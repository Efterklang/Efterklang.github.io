{"posts":[{"title":"","text":"h2 { font-family: Consolas; color: #426cc2; text-align: center; font-style: bold; /* font-size: 3em; */ } .title_card { display: flex; position: relative; box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2); transition: 0.3s; width: auto; height: 100%; border-radius: 10px; overflow: hidden; align-items: center; justify-content: center; margin-left: 15px; margin-right: 15px; } .title_card:hover { box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2); } .title_card_text { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; color: white; opacity: 0; transition: opacity 0.3s; font-family: 'Trebuchet MS'; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); /* æ·»åŠ æ–‡å­—é˜´å½± */ } .title_card:hover .title_card_text { opacity: 0.9; animation: jelly 0.5s; } @keyframes jelly { 0%, 100% { transform: scale(1, 1); } 25% { transform: scale(0.9, 1.1); } 50% { transform: scale(1.1, 0.9); } 75% { transform: scale(0.95, 1.05); } } HOME ğŸ”­About Me 12345678910111213141516171819202122232425262728293031{ &quot;name&quot;: &quot;gjx&quot;, &quot;age&quot;: 20, &quot;gender&quot;: &quot;man!&quot;, &quot;school&quot;: &quot;UESTC&quot;, &quot;skills&quot;: [&quot;Copy&quot;, &quot;Paste&quot;], &quot;major&quot;: &quot;Software Engineering&quot;, &quot;occupation&quot;: &quot;Undergraduate&quot;, &quot;home&quot;: &quot;TsingTao, Shandong, CN&quot;, &quot;Email&quot;: [ &quot;gaojiaxing2004@qq.com&quot;, &quot;gaojiaxing0220@gmail.com&quot;, &quot;gjx@ltvf.onmicrosoft.com&quot; ] &quot;hobbies&quot;: [ &quot;ğŸ•¹ï¸Immersing in Diverse Gaming Universes&quot;, &quot;ğŸ¼Harmonizing with the Rhythm of Music&quot;, &quot;ğŸªExploring the World of Literature&quot;, &quot;ğŸ§‘ğŸ»â€ğŸ¨DIY OS &amp; Desktop Beautification&quot;, &quot;ğŸ”¦Unearthing Productivity Tools&quot;, &quot;ğŸ“šLearning New Things About SE&quot;, &quot;ğŸ“¸Collecting Beautiful Pictures&quot; ], &quot;achievements&quot;: [ &quot;ğŸ¤µğŸ»2006å¹´ã€Šæ—¶ä»£å‘¨åˆŠã€‹å¹´åº¦é£äº‘äººç‰©&quot;, &quot;ğŸ«‚2008å¹´ã€Šæ„ŸåŠ¨ä¸­å›½ã€‹å¹´åº¦äººç‰©&quot;, &quot;ğŸŒè”åˆå›½2019å¹´åº¦åœ°çƒå«å£«å¥–è”åˆè·å¥–äºº&quot;, &quot;ğŸ¥å›½å®¶ä¸€çº§é€€å ‚é¼“æ¼”å¥å®¶&quot;, &quot;ğŸ¼ç†¬å¤œå† å†›&quot; ]} ğŸŒƒHow To Reach Me ğŸ˜¼Github ğŸ§QQ ğŸ“ºBilibili","link":"/Home/hello-world/"},{"title":"","text":"h2 { font-family: Microsoft JhengHei; /* font-family: æ¥·ä½“; */ color: #426cc2; /* text-align: center; */ font-style: bold; } è“¬æˆ·æ©å…®äº•å¾„è’ é’è‹”æ»¡å…®å±¥ç¶¦ç» å›­ç§é‚µå¹³ä¹‹ç“œ é—¨æ ½å…ˆç”Ÿä¹‹æŸ³ æ™“èµ·å‘¼ç«¥å­ é—®å±±æ¡ƒè½ä¹ è¾›å¤·å¼€æœª æ‰‹ç“®çŒèŠ± é™¤è™«ä¸è››æ€»äºæ—¶ ä¸å·¾ä¸å±¥ åæ°´çª— è¿½å‡‰é£ ç„šå¥½é¦™ çƒ¹è‹¦èŒ— å¿½è§å¼‚é¸Ÿæ¥é¸£æ ‘é—´ å°å€¦å³å§ åº·å‡‰æ•ä¸€è§‰ ç¾ç¡è§ç„¶æ— æ¢¦ å³æ¢¦äº¦ä¸ç¦»ç«¹åªèŒ¶åé—´","link":"/Home/%E8%93%AC%E6%88%B7%E6%89%8B%E5%8D%B7/"},{"title":"DataBase Base_å‡½æ•°&amp;çº¦æŸ","text":"å‡½æ•°AggregateFunctionOverview An SQL aggregate function calculates on a set of values and returns a single valueBecause an aggregate function operates on a set of values, it is often used with the GROUP BY clause of the SELECT statement. The GROUP BY clause divides the result set into groups of values and the aggregate function returns a single value for each group.SQL Tutorial The following are the commonly used SQL aggregate functions: AVG() â€“ returns the average of a set COUNT() â€“ returns the number of items in a set COUNT(*) â€“ returns the number of items in a set (including NULL values) MAX() â€“ returns the maximum value in a set MIN() â€“ returns the minimum value in a set SUM() â€“ returns the sum of all or distinct values in a set Except for the COUNT() function, SQL aggregate functions ignore null. You can use aggregate functions as expressions only in the following: The select list of a SELECT statement, either a subquery or an outer query. A HAVING clause StringFunctionFunctions that allow you to manipulate string data more effectively. CONCAT(s1,s2,...,sn) â€“ return the result of concatenation two strings together. LOWER(str),UPPER(str) â€“ converts a string to lower case or upper case. LPAD(str,n,padstr),RPAD(str,n,padstr) â€“ left/right pads a string with another string to a certain length. TRIM(str),LTRIM(str),RTRIM(str) â€“ removes all spaces from a string or from the left or right side of a string. REPLACE(str,source,replace) â€“ replaces all occurrences of a substring within a string with another substring. SUBSTRING(str,pos,len) â€“ returns a substring from a string starting at a specified position with a specified length.Reference: 123456789101112131415161718192021222324252627282930313233343536SELECT CONCAT('SQL',' is',' fun!');+-------------------------+| CONCAT(&quot;HELLO&quot;,&quot;WORLD&quot;) |+-------------------------+| HELLOWORLD |+-------------------------+SELECT LOWER(&quot;Hello,World&quot;);+----------------------+| LOWER(&quot;Hello,World&quot;) |+----------------------+| hello,world |+----------------------+SELECT RPAD(&quot;1&quot;,5,&quot;Z&quot;);+-----------------+| RPAD(&quot;1&quot;,5,&quot;Z&quot;) |+-----------------+| 1ZZZZ |+-----------------+SELECT RTRIM(&quot; HELLO &quot;);+---------------------+| RTRIM(&quot; HELLO &quot;) |+---------------------+| HELLO |+---------------------+SELECT REPLACE(&quot;Hello,World&quot;,&quot;World&quot;,&quot;SQL&quot;);+--------------------------------------+| REPLACE(&quot;Hello,World&quot;,&quot;World&quot;,&quot;SQL&quot;) |+--------------------------------------+| Hello,SQL |+--------------------------------------+SELECT SUBSTRING(&quot;Hello,World&quot;,1,5);+------------------------------+| SUBSTRING(&quot;Hello,World&quot;,1,5) |+------------------------------+| Hello |+------------------------------+ Math FunctionsSQL has many mathematical functions that allow you to perform business and engineering calculations. ABS(x) â€“ returns the absolute value of x. CEIL(x) â€“ returns the smallest integer that is greater than or equal to x. FLOOR(x) â€“ returns the largest integer that is less than or equal to x. RAND() â€“ returns a random floating-point value. MOD(x,y) â€“ returns the remainder(modulo) of x divided by y, MOD(10,7) returns 3. e.g. ROUND(x,d) â€“ returns a number rounded to d decimal places. ROUND(2.6666,3) returns 2.667 e.g. Exercise 1234567-- randomly generate 6 digitsSELECT SUBSTRING(ROUND(RAND(),6),3,6);+--------------------------------+| SUBSTRING(ROUND(RAND(),6),3,6) |+--------------------------------+| 578207 |+--------------------------------+ Date Functions123456789101112131415161718192021222324252627SELECT CURDATE(); -- YYYY-MM-DDSELECT CURTIME(); -- HH:MM:SSSELECT NOW(); -- YYYY-MM-DD HH:MM:SSYEAR(date); MONTH(date); DAY(date);SELECT YEAR(&quot;2023-1-2&quot;);+------------------+| YEAR(&quot;2023-1-2&quot;) |+------------------+| 2023 |+------------------+DATEADD(date,INTERVAL expr type);DATEDIFF(date1,date2); -- date1 - date2SELECT DATE_ADD(now(),INTERVAL 70 DAY);+---------------------------------+| DATE_ADD(now(),INTERVAL 70 DAY) |+---------------------------------+| 2024-04-06 20:09:20 |+---------------------------------+SELECT DATEDIFF(now(),&quot;2023-1-20&quot;);+-----------------------------+| DATEDIFF(now(),&quot;2023-1-20&quot;) |+-----------------------------+| 372 |+-----------------------------+ Exercises 12-- æŸ¥è¯¢æ¯ä¸ªå‘˜å·¥çš„å…¥èŒå¤©æ•°ï¼Œå¹¶æŒ‰ç…§å…¥èŒå¤©æ•°é™åºæ’åˆ—SELECT Name,DATEDIFF(now(),entrydate) AS days FROM emp ORDER BY days DESC; Control Flow Functions12345678-- if value is true, return if_true_expr, else return if_false_exprIF(value,if_true_expr,if_false_expr)-- if expr1 IS NULL, return expr2, else return expr1IFNULL(expr1,expr2)-- condition1ä¸ºçœŸï¼Œè¿”å›result1ï¼Œcondition2ä¸ºçœŸï¼Œè¿”å›result2ï¼Œå¦åˆ™è¿”å›resultCASE WHEN &lt;condition1&gt; THEN &lt;result1&gt; WHEN &lt;condition2&gt; THEN &lt;result2&gt; ELSE &lt;result&gt; END-- expr = value1, return result1, expr = value2, return result2, else return resultCASE &lt;expr&gt; WHEN value1 THEN result1 WHEN value2 THEN result2 ELSE result END Exercises 123456789101112-- æŸ¥è¯¢empè¡¨çš„å‘˜å·¥çš„name,addr,å¦‚æœaddrä¸ºBeijing/Shanghai,åˆ™æ˜¾ç¤ºä¸ºä¸€çº¿åŸå¸‚ï¼Œå¦åˆ™æ˜¾ç¤ºä¸ºäºŒçº¿åŸå¸‚SELECT name, (CASE addr WHEN 'Beijing' THEN 'ä¸€çº¿åŸå¸‚' WHEN &quot;Shanghai&quot; THEN &quot;ä¸€çº¿åŸå¸‚&quot; ELSE 'äºŒçº¿åŸå¸‚' END) AS addrTagFROM emp;-- æŸ¥è¯¢å­¦ç”Ÿæˆç»©è¡¨ï¼Œå¦‚æœæˆç»©å¤§äºç­‰äº60ï¼Œæ˜¾ç¤ºåŠæ ¼ï¼Œå¦åˆ™æ˜¾ç¤ºä¸åŠæ ¼SELECT name. (CASE WHEN score &gt;= 60 THEN 'åŠæ ¼' ELSE 'ä¸åŠæ ¼' END AS) math, (CASE WHEN english &gt;= 60 THEN 'åŠæ ¼' ELSE 'ä¸åŠæ ¼' END AS) english,FROM score; çº¦æŸOverviewæ¦‚å¿µ: çº¦æŸæ˜¯ä½œç”¨äºè¡¨ä¸­å­—æ®µä¸Šçš„è§„åˆ™,ç”¨äºé™åˆ¶å­˜å‚¨åœ¨è¡¨ä¸­çš„æ•°æ®(ç±»å‹ã€æ ¼å¼å’ŒèŒƒå›´ç­‰ç­‰)ç›®çš„: ä¿è¯æ•°æ®çš„æ­£ç¡®æ€§ã€æœ‰æ•ˆæ€§å’Œå®Œæ•´æ€§åˆ†ç±»: çº¦æŸ æè¿° å…³é”®å­— éç©ºçº¦æŸ é™åˆ¶è¯¥å­—æ®µçš„æ•°æ®ä¸èƒ½ä¸º null NOT NULL å”¯ä¸€çº¦æŸ ä¿è¯è¯¥å­—æ®µçš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯å”¯ä¸€ã€ä¸é‡å¤çš„ UNIQUE ä¸»é”®çº¦æŸ ä¸»é”®æ˜¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ ‡è¯†ï¼Œè¦æ±‚éç©ºä¸”å”¯ä¸€ PRIMARY KEY é»˜è®¤çº¦æŸ ä¿å­˜æ•°æ®æ—¶ï¼Œå¦‚æœæœªæŒ‡å®šè¯¥å­—æ®µçš„å€¼ï¼Œåˆ™é‡‡ç”¨é»˜è®¤å€¼ DEFAULT æ£€æŸ¥çº¦æŸï¼ˆ8.0.1 ç‰ˆæœ¬åï¼‰ ä¿è¯å­—æ®µå€¼æ»¡è¶³æŸä¸€ä¸ªæ¡ä»¶ CHECK å¤–é”®çº¦æŸ ç”¨æ¥è®©ä¸¤å¼ å›¾çš„æ•°æ®ä¹‹é—´å»ºç«‹è¿æ¥ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ FOREIGN KEY Example [DataBase01#DML] Review DML Syntax 123456CREATE TABLE USER( id INT PRIMARY KEY AUTO_INCREMENT, name VARCHAR(10) NOT NULL UNIQUE, age TINYINT UNSIGNED CHECK(age&gt;0 AND age&lt;120), gender ENUM('ç”·','å¥³','ä¿å¯†') DEFAULT 'ä¿å¯†'); å¤–é”®çº¦æŸæ¦‚å¿µ : å¤–é”®æ˜¯è¡¨ä¸­çš„ä¸€ä¸ªå­—æ®µï¼Œå®ƒæŒ‡å‘å¦ä¸€ä¸ªè¡¨çš„ä¸»é”®ï¼Œç”¨æ¥å»ºç«‹ä¸¤å¼ è¡¨ä¹‹é—´çš„è”ç³»ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ è¯­æ³• : FOREIGN KEY (&lt;foreignKey&gt;) REFERENCES &lt;tableName&gt;(&lt;primaryKey&gt;) Example 12345678910111213141516171819-- åˆ›å»ºäº†ä¸¤å¼ è¡¨ï¼ŒCompanyè¡¨(ä¸»è¡¨,çˆ¶è¡¨)ä¸­çš„Idå­—æ®µæ˜¯ä¸»é”®ï¼ŒDepartmentè¡¨(å­è¡¨,ä»è¡¨)ä¸­çš„depa_idå­—æ®µæ˜¯å¤–é”®ï¼ŒæŒ‡å‘Companyè¡¨ä¸­çš„Idå­—CREATE TABLE Company ( Id int NOT NULL, name varchar(20) NOT NULL, PRIMARY KEY (Id));CREATE TABLE Department ( id int NOT NULL, name varchar(20) NOT NULL, salary decimal(10,2), depa_id int, PRIMARY KEY (id), FOREIGN KEY (depa_id) REFERENCES Company(Id));-- æ·»åŠ å¤–é”®çº¦æŸALTER TABLE Department ADD CONSTRAINT fk_depa_id FOREIGN KEY (depa_id) REFERENCES Company(Id);-- åˆ é™¤å¤–é”®çº¦æŸALTER TABLE Department DROP FOREIGN KEY fk_depa_id; åˆ é™¤/æ›´æ–°è¡Œä¸º è¡Œä¸º è¯´æ˜ NO ACTION å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¸å…è®¸åˆ é™¤/æ›´æ–°ï¼ˆä¸ RESTRICT ä¸€è‡´ï¼‰ RESTRICT å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¸å…è®¸åˆ é™¤/æ›´æ–°ï¼ˆä¸ NO ACTION ä¸€è‡´ï¼‰ CASCADE å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¹Ÿåˆ é™¤/æ›´æ–°å¤–é”®åœ¨å­è¡¨ä¸­çš„è®°å½• SET NULL å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™è®¾ç½®å­è¡¨ä¸­è¯¥å¤–é”®å€¼ä¸º nullï¼ˆè¦æ±‚è¯¥å¤–é”®å…è®¸ä¸º nullï¼‰ SET DEFAULT çˆ¶è¡¨æœ‰å˜æ›´æ—¶ï¼Œå­è¡¨å°†å¤–é”®è®¾ä¸ºä¸€ä¸ªé»˜è®¤å€¼ï¼ˆInnodb ä¸æ”¯æŒï¼‰ è®¾ç½®åˆ é™¤/æ›´æ–°è¡Œä¸ºçš„è¯­æ³•ï¼šON DELETE/UPDATE &lt;action&gt;ä¾‹å¦‚ ALTER TABLE Department ADD CONSTRAINT fk_depa_id FOREIGN KEY (depa_id) REFERENCES Company(Id) ON DELETE CASCADE ON UPDATE CASCADE;","link":"/Dev/DataBase/DataBase02/"},{"title":"DataBase Base_åŸºç¡€æ¦‚å¿µ&amp;SQLè¯­æ³•","text":"MySQL Overviewæ•°æ®åº“ç›¸å…³æ¦‚å¿µæ•°æ®åº“ : æ•°æ®åº“(DataBase,Scheme)å°±æ˜¯ä¿¡æ¯çš„é›†åˆæˆ–è€…è¯´æ•°æ®åº“æ˜¯ç”±æ•°æ®åº“ç®¡ç†ç³»ç»Ÿç®¡ç†çš„æ•°æ®çš„é›†åˆã€‚ æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ : æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ(Database Management System)æ˜¯ä¸€ç§æ“çºµå’Œç®¡ç†æ•°æ®åº“çš„å¤§å‹è½¯ä»¶ï¼Œé€šå¸¸ç”¨äºå»ºç«‹ã€ä½¿ç”¨å’Œç»´æŠ¤æ•°æ®åº“ã€‚ æ•°æ®åº“ç³»ç»Ÿ : æ•°æ®åº“ç³»ç»Ÿ(Database System)é€šå¸¸ç”±è½¯ä»¶ã€æ•°æ®åº“å’Œæ•°æ®ç®¡ç†å‘˜(DBA)ç»„æˆã€‚ æ•°æ®åº“ç®¡ç†å‘˜ : æ•°æ®åº“ç®¡ç†å‘˜(Database Administrator)è´Ÿè´£å…¨é¢ç®¡ç†å’Œæ§åˆ¶æ•°æ®åº“ç³»ç»Ÿã€‚ å¯åŠ¨ &amp; å®¢æˆ·ç«¯è¿æ¥MySQL80 æœåŠ¡å°†å¼€å§‹ç›‘å¬ç‰¹å®šçš„ç«¯å£ï¼ˆé»˜è®¤æ˜¯ 3306ï¼‰ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ã€‚ä¸€æ—¦æ¥æ”¶åˆ°è¯·æ±‚ï¼Œå®ƒå°±ä¼šå¤„ç†è¿™äº›è¯·æ±‚ï¼Œæ‰§è¡Œ SQL æŸ¥è¯¢ï¼Œè¿”å›æŸ¥è¯¢ç»“æœ 123# å¯åŠ¨&amp;åœæ­¢ Servicenet start mysql80net stop mysql80 å®¢æˆ·ç«¯è¿æ¥æ•°æ®åº“çš„æ–¹å¼ï¼š å‘½ä»¤è¡Œï¼šmysql -h ä¸»æœºå -P ç«¯å£å· -u ç”¨æˆ·å -p å¯†ç  å›¾å½¢åŒ–å·¥å…·ï¼šNavicatã€SQLyogã€SQL Server Management Studio æ•°æ®æ¨¡å‹æ•°æ®æ¨¡å‹å¯ä»¥åˆ†ä¸ºä¸¤ç§.å…³ç³»å‹æ•°æ®æ¨¡å‹å’Œéå…³ç³»å‹æ•°æ®æ¨¡å‹ å…³ç³»å‹æ•°æ®æ¨¡å‹å…³ç³»å‹æ•°æ®æ¨¡å‹ï¼ˆRDBMS,Relational Database Management Systemï¼‰ï¼šå…³ç³»å‹æ•°æ®åº“æ¨¡å‹æ˜¯åŸºäºå…³ç³»ï¼ˆè¡¨ï¼‰çš„æ•°æ®æ¨¡å‹ï¼Œä½¿ç”¨è¡¨æ ¼æ¥ç»„ç»‡å’Œå­˜å‚¨æ•°æ®ã€‚æœ€å¸¸è§çš„å…³ç³»å‹æ•°æ®åº“æ˜¯ MySQLã€Oracleã€SQL Server ç­‰ã€‚ ps:table æ˜¯å…³ç³»å‹æ•°æ®åº“çš„æœ¯è¯­ï¼Œå¯¹åº”çš„ä¸­æ–‡æ˜¯è¡¨ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºå…³ç³»ï¼Œç”±è¡Œå’Œåˆ—ç»„æˆã€‚åœ¨ SQL ä¸­ï¼Œâ€recordâ€å’Œâ€fieldâ€æ˜¯ä¸¤ä¸ªåŸºæœ¬çš„æ¦‚å¿µï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”äºæ•°æ®åº“è¡¨ä¸­çš„è¡Œå’Œåˆ—ã€‚ Recordï¼šåœ¨æ•°æ®åº“ä¸­ï¼Œä¸€ä¸ª recordï¼ˆä¹Ÿè¢«ç§°ä¸º row æˆ– tupleï¼‰ä»£è¡¨ä¸€ç»„ç›¸å…³çš„æ•°æ®ï¼Œä¾‹å¦‚ä¸€ä¸ªç”¨æˆ·çš„ä¿¡æ¯æˆ–ä¸€ä¸ªè®¢å•çš„è¯¦æƒ…ã€‚ä¸€ä¸ª record åŒ…å«äº†ä¸€ç»„ fieldï¼Œæ¯ä¸ª field å­˜å‚¨äº†ä¸€é¡¹ç‰¹å®šçš„ä¿¡æ¯ï¼Œä¾‹å¦‚ç”¨æˆ·çš„åå­—æˆ–è®¢å•çš„ä»·æ ¼ã€‚ Fieldï¼šåœ¨æ•°æ®åº“ä¸­ï¼Œä¸€ä¸ª fieldï¼ˆä¹Ÿè¢«ç§°ä¸º field æˆ– attributeï¼‰ä»£è¡¨ä¸€ç§ç±»å‹çš„æ•°æ®ï¼Œä¾‹å¦‚æ‰€æœ‰ç”¨æˆ·çš„åå­—æˆ–æ‰€æœ‰è®¢å•çš„ä»·æ ¼ã€‚ä¸€ä¸ª field åœ¨ä¸€ä¸ªè¡¨ä¸­æ˜¯å‚ç›´çš„ï¼Œå®ƒåŒ…å«äº†ä¸€ä¸ªç‰¹å®šç±»å‹çš„æ‰€æœ‰å€¼ã€‚ ä¾‹å¦‚ï¼Œè€ƒè™‘ä¸€ä¸ªç®€å•çš„ tableï¼Œå®ƒæœ‰ä¸¤ä¸ª fieldï¼ˆâ€User IDâ€å’Œâ€User Nameâ€ï¼‰å’Œä¸¤ä¸ª recordï¼š User ID User Name 1 Alice 2 Bob åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œâ€1â€å’Œâ€Aliceâ€æ˜¯ç¬¬ä¸€ä¸ª recordï¼Œâ€2â€å’Œâ€Bobâ€æ˜¯ç¬¬äºŒä¸ª recordã€‚â€User IDâ€å’Œâ€User Nameâ€æ˜¯ä¸¤ä¸ª fieldã€‚ éå…³ç³»å‹æ•°æ®æ¨¡å‹éå…³ç³»å‹æ•°æ®æ¨¡å‹ï¼ˆNoSQLï¼‰ï¼šéå…³ç³»å‹æ•°æ®åº“æ¨¡å‹æ˜¯ä¸€ç§éç»“æ„åŒ–çš„æ•°æ®æ¨¡å‹ï¼Œä¸ä½¿ç”¨è¡¨æ ¼æ¥ç»„ç»‡å’Œå­˜å‚¨æ•°æ®ã€‚å®ƒä»¬å¯ä»¥æ˜¯é”®å€¼å¯¹å­˜å‚¨ã€æ–‡æ¡£å­˜å‚¨ã€åˆ—å­˜å‚¨ã€å›¾å½¢æ•°æ®åº“ç­‰ã€‚å¸¸è§çš„éå…³ç³»å‹æ•°æ®åº“æœ‰ MongoDBã€Redisã€Cassandra ç­‰ã€‚ SQL GrammerOverview å•è¡Œæˆ–å¤šè¡Œä¹¦å†™ï¼Œä»¥åˆ†å·ç»“å°¾SQL è¯­å¥å¯ä»¥ç”¨ç©ºæ ¼å’Œç¼©è¿›æ¥å¢å¼ºå¯è¯»æ€§SQL è¯­å¥ä¸åŒºåˆ†å¤§å°å†™ï¼Œå…³é”®å­—å»ºè®®ä½¿ç”¨å¤§å†™Commentï¼šå•è¡Œæ³¨é‡Šï¼ˆâ€“ commentï¼‰ï¼›å¤šè¡Œæ³¨é‡Šï¼ˆ/_ comment _/ï¼‰Categoryï¼šDDL,DML,DQL,DCL Data typeæ•°å€¼ç±»å‹ æ•°æ®ç±»å‹ å†…å­˜å¤§å°(Byte) TINYINT 1 SMALLINT 2 MEDIUMINT 3 INT 4 BIGINT 8 FLOAT 4 DOUBLE 8 DECIMAL(M, N) å–å†³äº Må’Œ N æ•°æ®ç±»å‹åé¢å¯åŠ  UNSIGNEDä¿®é¥°ï¼Œä¾‹å¦‚ age TINYINT UNSIGNED å¯¹äº DECIMAL(M, N)ç±»å‹ï¼ŒMæ˜¯æ•°å­—çš„æœ€å¤§æ€»ä½æ•°ï¼ŒNæ˜¯å°æ•°ç‚¹åçš„ä½æ•°ã€‚æ•°å€¼èŒƒå›´å–å†³äº Må’Œ Nçš„å€¼ã€‚å¦‚ 123.45ï¼ŒM=5,N=2 å­—ç¬¦ä¸²ç±»å‹ æ•°æ®ç±»å‹ å¤§å° æè¿° CHAR 0-255Bytes å®šé•¿å­—ç¬¦ä¸² VARCHAR 0-65535Bytes å˜é•¿å­—ç¬¦ä¸² BLOB 0-65535Bytes äºŒè¿›åˆ¶å½¢å¼çš„é•¿æ–‡æœ¬æ•°æ® TEXT 0-65535Bytes é•¿æ–‡æœ¬æ•°æ® char(10) ä¼šå ç”¨ 10 ä¸ªå­—ç¬¦çš„å­˜å‚¨ç©ºé—´ï¼Œä¸è¶³ 10 ä¸ªå­—ç¬¦ä¼šä½¿ç”¨ç©ºæ ¼è¡¥é½ï¼›æ€§èƒ½é«˜äº varcharvarchar(10) ä¼šæ ¹æ®å®é™…å­˜å‚¨çš„å­—ç¬¦æ•°æ¥å ç”¨å­˜å‚¨ç©ºé—´ï¼Œä¸ä¼šæµªè´¹ç©ºé—´ Date &amp; Time ç±»å‹ æ ¼å¼ èŒƒå›´ DATE YYYY-MM-DD 1000-01-01 åˆ° 9999-12-31 TIME HH:MM:SS -838:59:59 åˆ° 838:59:59 YEAR YYYY 1901 åˆ° 2155, ä»¥åŠ 0000 DATETIME YYYY-MM-DD HH:MM:SS 1000-01-01 00:00:00 åˆ° 9999-12-31 23:59:59 TIMESTAMP YYYY-MM-DD HH:MM:SS 1970-01-01 00:00:01 UTC åˆ° 2038-01-19 03:14:07 UTC SQL SyntaxCATEGORY åˆ†ç±» å…¨ç§° è¯´æ˜ DDL Data Definition Language å®šä¹‰æ•°æ®åº“å¯¹è±¡ï¼ˆæ•°æ®åº“ï¼Œè¡¨ï¼Œå­—æ®µï¼‰ DML Data Manipulation Language å¯¹æ•°æ®è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢åˆ æ”¹ DQL Data Query Language æŸ¥è¯¢æ•°æ®åº“ä¸­è¡¨çš„è®°å½• DCL Data Control Language åˆ›å»ºæ•°æ®åº“ç”¨æˆ·ï¼Œæ§åˆ¶æ•°æ®åº“çš„è®¿é—®æƒé™ TCL Transaction Control Language ç”¨äºä¿å­˜æˆ–æ¢å¤å¯¹æ•°æ®åº“å¯¹è±¡æ‰§è¡Œçš„æ“ä½œ [GlossaryOfSQL#Basic Structure of SQL Server syntax]-&gt;SeeMore DML è¯­å¥å’Œ DDL è¯­å¥åŒºåˆ«ï¼šDML æ˜¯æ•°æ®åº“æ“ä½œè¯­è¨€ï¼ˆData Manipulation Languageï¼‰çš„ç¼©å†™ï¼Œæ˜¯æŒ‡å¯¹æ•°æ®åº“ä¸­è¡¨è®°å½•çš„æ“ä½œï¼Œä¸»è¦åŒ…æ‹¬è¡¨è®°å½•çš„æ’å…¥ã€æ›´æ–°ã€åˆ é™¤å’ŒæŸ¥è¯¢ï¼Œæ˜¯å¼€å‘äººå‘˜æ—¥å¸¸ä½¿ç”¨æœ€é¢‘ç¹çš„æ“ä½œã€‚DDL ï¼ˆData Definition Languageï¼‰æ˜¯æ•°æ®å®šä¹‰è¯­è¨€çš„ç¼©å†™ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯å¯¹æ•°æ®åº“å†…éƒ¨çš„å¯¹è±¡è¿›è¡Œåˆ›å»ºã€åˆ é™¤ã€ä¿®æ”¹çš„æ“ä½œè¯­è¨€ã€‚å®ƒå’Œ DML è¯­è¨€çš„æœ€å¤§åŒºåˆ«æ˜¯ DML åªæ˜¯å¯¹è¡¨å†…éƒ¨æ•°æ®çš„æ“ä½œï¼Œè€Œä¸æ¶‰åŠåˆ°è¡¨çš„å®šä¹‰ã€ç»“æ„çš„ä¿®æ”¹ï¼Œæ›´ä¸ä¼šæ¶‰åŠåˆ°å…¶ä»–å¯¹è±¡ã€‚DDL è¯­å¥æ›´å¤šçš„è¢«æ•°æ®åº“ç®¡ç†å‘˜ï¼ˆDBAï¼‰æ‰€ä½¿ç”¨ï¼Œä¸€èˆ¬çš„å¼€å‘äººå‘˜å¾ˆå°‘ä½¿ç”¨ã€‚å¦å¤–ï¼Œç”±äº select ä¸ä¼šå¯¹è¡¨è¿›è¡Œç ´åï¼Œæ‰€ä»¥æœ‰çš„åœ°æ–¹ä¹Ÿä¼šæŠŠ select å•ç‹¬åŒºåˆ†å¼€å«åšæ•°æ®åº“æŸ¥è¯¢è¯­è¨€ DQLï¼ˆData Query Languageï¼‰ã€‚# æ‰§è¡Œé€Ÿåº¦ä¸åŒèŠ‚é€‰è‡ª JavaGuideâ€”â€”SnailClimb DDLDatabase Manipulation åˆ›å»ºï¼šCREATE DATABASE &lt;DATABASE_NAME&gt;; åˆ é™¤ï¼šDROP DATABASE &lt;DATABASE_NAME&gt;; æŸ¥çœ‹ï¼šSHOW DATABASES; ä½¿ç”¨ï¼šUSE &lt;DATABASE_NAME&gt;; æŸ¥è¯¢å½“å‰æ•°æ®åº“ï¼š SELECT DATABASE(); Table Manipulation åˆ é™¤ï¼šDROP TABLE &lt;TABLE_NAME&gt;; åˆ›å»ºï¼šCREATE TABLE &lt;TABLE_NAME&gt; (field_name field_type, ...); é‡å‘½åï¼šALTER TABLE &lt;TABLE_NAME&gt; RENAME TO &lt;NEW_TABLE_NAME&gt;; åˆ é™¤é‡å»ºï¼šTRUNCATE TABLE &lt;TABLE_NAME&gt;; æè¿°è¡¨ç»“æ„ï¼šDESC &lt;TABLE_NAME&gt;; æŸ¥è¯¢å½“å‰æ•°æ®åº“ä¸­çš„è¡¨ï¼šSHOW TABLES; æŸ¥çœ‹è¡¨çš„åˆ›å»ºè¯­å¥ï¼šSHOW CREATE TABLE &lt;TABLE_NAME&gt;; 12345678CREATE TABLE student( id int, name varchar(32), age int);DESC student;ALTER TABLE student RENAME TO student_info;DROP student_info; Add/Modify Fieldï¼š ALETR TABLE &lt;TABLE_NAME&gt; &lt;ADD|MODIFY&gt; &lt;FIELD_NAME&gt; &lt;FIELD_TYPE&gt;; Change Fieldï¼šALTER TABLE &lt;TABLE_NAME&gt; CHANGE &lt;FIELD_NAME&gt; &lt;NEW_FIELD_NAME&gt; &lt;FIELD_TYPE&gt;; Drop Fieldï¼šALTER TABLE &lt;TABLE_NAME&gt; DROP &lt;FIELD_NAME&gt;; 1234-- Field Manipulation ExamplesALTER TABLE student ADD age int UNSIGNED;ALTER TABLE student MODIFY age tinyint UNSIGNED;ALTER TABLE student CHANGE nickname username tinyint UNSIGNED; DMLINSERTåŸºæœ¬çš„ INSERT è¯­å¥çš„è¯­æ³•å¦‚ä¸‹ï¼š 1INSERT INTO table_name (field1, field2, field3, ...) VALUES (value1, value2, value3, ...); ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªåä¸º users çš„è¡¨ï¼Œå®ƒæœ‰ idï¼Œname å’Œ email,gender å››ä¸ª fieldï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„ INSERT è¯­å¥æ¥æ’å…¥æ•°æ®ï¼š 1INSERT INTO users (id, name, email) VALUES (1, 'John Doe', '123@gmail.com'); å¯ä»¥çœç•¥åˆ—çš„åç§°ï¼Œä½†å¿…é¡»æä¾›æ‰€æœ‰ fieldçš„å€¼ï¼Œå¹¶ä¸”é¡ºåºå¿…é¡»ä¸è¡¨ä¸­çš„åˆ—çš„é¡ºåºç›¸åŒï¼š 1INSERT INTO users VALUES (1, 'John Doe', '222@gmail.com','ç”·'); æ‰¹é‡æ’å…¥æ•°æ®ï¼š 12345INSERT INTO users (id, name, email)VALUES(1, 'Alice', 'alice@example.com'),(2, 'Bob', 'bob@example.com'),(3, 'Charlie', 'charlie@example.com'); DELETE123DELETE FROM student; -- åˆ é™¤è¡¨ä¸­æ‰€æœ‰æ•°æ®DELETE FROM student where id = 1; -- åˆ é™¤idä¸º1çš„æ•°æ®TRUNCATE TABLE student; -- åˆ é™¤è¡¨ä¸­æ‰€æœ‰æ•°æ®ï¼Œä½†ä¸åˆ é™¤è¡¨ç»“æ„ ğŸª§drop,delete,truncateçš„åŒºåˆ«ï¼š DROP TABLE is a DDL command. It is used to delete a table and free space associated with the table. It also deletes the table structure. TRUNCATE TABLE is a DDL command. It is used to delete all the rows from a table and free the space used by those rows. It does not generate any undo logs, so it is faster than the DELETE command. However, you CANNOT roll back a TRUNCATE operation. Also, TRUNCATE TABLE resets the identity of the table. DELETE FROM is a DML command. It is used to delete all the rows from a table or certain rows that match a condition. It generates undo logs for every deleted row, so you CAN roll back a DELETE operation. It does not reset the identity of the table. DELETE FROM without a WHERE clause behaves like TRUNCATE TABLE. PS:identity is a property of a column that is used to generate a sequence of numbers(id e.g.). The identity column is commonly used as a primary key. å¯å‚è€ƒå¦‚ä¸‹æ–‡ç« è¡¥å……å­¦ä¹ JavaGuide &gt; ZhiHu UPDATE12UPDATE student SET age = 18; -- Note:affects all rows in the table.UPDATE student SET age = 18 WHERE id = 1; DQLOVERVIEWæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼ˆData Query Languageï¼‰ç”¨äºä»æ•°æ®åº“ä¸­æ£€ç´¢æ•°æ®ã€‚ Sequence Of DQL ç¼–å†™é¡ºåºï¼š SELECT-&gt;FROM-&gt;WHERE-&gt;GROUP BY-&gt;HAVING-&gt;ORDER BY-&gt;LIMIT&gt;æ‰§è¡Œé¡ºåºï¼š FROM-&gt;WHERE-&gt;GROUP BY-&gt;HAVING-&gt;SELECT-&gt;ORDER BY-&gt;LIMIT ç»ƒä¹ Example 1234567891011-- table name: emp-- 1.æŸ¥è¯¢å¹´é¾„ä¸º20ï¼Œ21ï¼Œ22ï¼Œ23çš„å¥³æ€§å‘˜å·¥ä¿¡æ¯SELECT * FROM emp WHERE gender='å¥³' &amp;&amp; age IN (20,21,22,23);-- 2.æŸ¥è¯¢æ€§åˆ«ä¸ºç”·ï¼Œå¹¶ä¸”å¹´å±äº[20,40]ï¼Œåå­—ä¸º3ä¸ªå­—çš„å‘˜å·¥ã€‚SELECT * FROM emp WHERE gender='ç”·' &amp;&amp; age BETWEEN 20 AND 40 &amp;&amp; name LIKE '___';-- 3.æŸ¥è¯¢å¹´é¾„å°äº60å²çš„ç”·å‘˜å·¥äººæ•°å’Œå¥³å‘˜å·¥äººæ•°SELECT gender,count(*) FROM emp GROUP BY gender-- 4.æŸ¥è¯¢æ‰€æœ‰å¹´å°äºç­‰äº 35 å‘˜å·¥çš„å§“åå’Œå¹´é¾„ï¼Œå¹¶å¯¹æŸ¥è¯¢ç»“æœæŒ‰å¹´é¾„å‡åºæ’åºï¼Œå¦‚æœå¹´é¾„ç›¸åŒæŒ‰å…¥èŒæ—¶é—´é™åºæ’åºSELECT name,age,entrydate FROM emp WHERE age &lt;= 35 ORDER BY age ASC,entrydate DESC;-- 5.æŸ¥è¯¢æ€§åˆ«ä¸ºç”·ï¼Œä¸”å¹´é¾„å±äº[20,40]çš„å‰5ä¸ªå‘˜å·¥ï¼Œå¹¶å¯¹æŸ¥è¯¢ç»“æœæŒ‰å¹´é¾„å‡åºæ’åºï¼Œå¦‚æœå¹´é¾„ç›¸åŒæŒ‰å…¥èŒæ—¶é—´é™åºæ’åºSELECT name,age,entrydate FROM emp WHERE gender='ç”·' &amp;&amp; age BETWEEN 20 AND 40 ORDER BY age ASC,entrydate DESC LIMIT 5; åŸºç¡€æŸ¥è¯¢12345678910111213table: student+-----+-------+-----------+------+| Sid | Sname | Sage | Ssex |+-----+-------+-----------+------+| 01 | èµµé›· | 1/1/1990 | ç”· || 02 | é’±ç”µ | 21/12/1990| ç”· || 03 | å­™é£ | 20/5/1990 | ç”· || 04 | æäº‘ | 6/8/1990 | ç”· || 05 | å‘¨æ¢… | 1/12/1991 | å¥³ || 06 | å´å…° | 1/3/1992 | å¥³ || 07 | éƒ‘ç«¹ | 1/7/1989 | å¥³ || 08 | ç‹èŠ | 20/1/1990 | å¥³ |+-----+-------+-----------+------+ Basic Syntax æŸ¥è¯¢æŒ‡å®šå­—æ®µ SELECT field1, field2, ... FROM table_name; æŸ¥è¯¢æ‰€æœ‰å­—æ®µ SELECT * FROM table_name; æŒ‡å®šæ¡ä»¶æŸ¥è¯¢ SELECT field1, field2, ... FROM table_name WHERE condition; æŸ¥è¯¢ç»“æœå»é‡ SELECT DISTINCT field1, field2, ... FROM table_name; Condition SyntaxList of Comparison Operators =, !=,&lt;&gt;, &lt; &lt;=, &gt;, &gt;= ğŸª§Note:&lt;&gt; is the same as != BETWEEN ... AND ... IN(...) LIKE ğŸª§Note:pattern matching,placeholders:%,_ IS NULL,IS NOT NULL List of Logical Operators AND,&amp;&amp;,OR,||,NOT,! 12345678910111213141516SELECT * FROM student; -- æŸ¥è¯¢è¡¨ä¸­æ‰€æœ‰fieldæ•°æ®SELECT id,name FROM student; -- æŸ¥è¯¢è¡¨ä¸­æŒ‡å®šfieldçš„æ•°æ®SELECT * FROM student WHERE id = 1 &amp;&amp; age &lt;=30; -- &amp;&amp; å¯ä»¥ç”¨ AND ä»£æ›¿SELECT * FROM student WHERE id = 1 || age &lt;=30; -- || å¯ä»¥ç”¨ OR ä»£æ›¿SELECT * FROM student WHERE Sid BETWEEN 01 AND 20; -- BETWEEN ç”¨äºèŒƒå›´æŸ¥è¯¢[01,20]SELECT * FROM student WHERE Sid IN (01,02,03); -- IN ç”¨äºèŒƒå›´æŸ¥è¯¢SELECT DISTINCT Ssex FROM student; -- DISTINCT ç”¨äºå»é‡SELECT * FROM student WHERE enligh IS NOT NULL; -- IS NULL ç”¨äºåˆ¤æ–­æ˜¯å¦ä¸ºç©º-- =================================-- * LIKE *-- =================================SELECT * FROM student WHERE Sname LIKE 'èµµ%'; -- % å¤šä¸ªä»»æ„å­—ç¬¦SELECT * FROM student WHERE Sname LIKE 'èµµ_'; -- _ å•ä¸ªä»»æ„å­—ç¬¦SELECT * FROM student WHERE Sname LIKE 'èµµ__'; -- __ ä¸¤ä¸ªä»»æ„å­—ç¬¦SELECT * FROM student WHERE Sname LIKE '%å­%'; -- Snameä¸­åŒ…å«å­çš„record Examples 123456789101112131415161718-- example 1SELECT Sid,Sname FROM student WHERE Ssex='ç”·';+-----+-------+| Sid | Sname |+-----+-------+| 01 | èµµé›· || 02 | é’±ç”µ || 03 | å­™é£ || 04 | æäº‘ |+-----+-------+-- example 2SELECT DISTINCT Ssex FROM student;+------+| Ssex |+------+| ç”· || å¥³ |+------+ èšåˆå‡½æ•°èšåˆå‡½æ•°ï¼ˆAggregate Functionsï¼‰ç”¨äºè®¡ç®—è¡¨ä¸­åˆ—çš„å€¼(å¦‚æœä¸º NULLï¼Œåˆ™ä¸å‚ä¸è®¡ç®—)ï¼Œè¿”å›ä¸€ä¸ªå•ä¸€çš„å€¼ã€‚å¸¸ç”¨çš„èšåˆå‡½æ•°æœ‰ï¼š AVG()ï¼šè¿”å›æŸåˆ—çš„å¹³å‡å€¼ COUNT()ï¼šè¿”å›æŸåˆ—çš„è¡Œæ•° MAX()ï¼šè¿”å›æŸåˆ—çš„æœ€å¤§å€¼ MIN()ï¼šè¿”å›æŸåˆ—çš„æœ€å°å€¼ SUM()ï¼šè¿”å›æŸåˆ—å€¼ä¹‹å’Œ COUNT(*) è¡¨ç¤ºè®¡ç®—æ‰€æœ‰è¡Œçš„æ•°é‡ï¼ŒåŒ…æ‹¬ NULL å€¼COUNT(field) è¡¨ç¤ºè®¡ç®—æŒ‡å®šåˆ—çš„è¡Œæ•°ï¼Œä¸åŒ…æ‹¬ NULL å€¼COUNT(DISTINCT field) è¡¨ç¤ºè®¡ç®—æŒ‡å®šåˆ—çš„ä¸åŒå€¼çš„æ•°é‡ï¼Œä¸åŒ…æ‹¬ NULL å€¼[database02#AggregateFunction]-&gt;See more Examples 123456789101112131415161718SELECT count(Sid) FROM student;+------------+| count(Sid) |+------------+| 8 |+------------+SELECT avg(Sage) FROM student;+---------------+| avg(Sage) |+---------------+| 19903121.3750 |+---------------+SELECT avg(Sage) FROM student WHERE Ssex='ç”·';+---------------+| avg(Sage) |+---------------+| 19900662.0000 |+---------------+ åˆ†ç»„æŸ¥è¯¢åˆ†ç»„æŸ¥è¯¢ï¼ˆGroup Byï¼‰ç”¨äºç»“åˆèšåˆå‡½æ•°ï¼Œæ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—å¯¹ç»“æœé›†è¿›è¡Œåˆ†ç»„ã€‚ Syntax:SELECT field1, field2, ... FROM table_name GROUP BY field1, field2, ... HAVE condition; Difference between WHERE and HAVING æ‰§è¡Œæ—¶æœºä¸åŒï¼šWHERE åœ¨æ•°æ®åˆ†ç»„å‰çš„ record è¿›è¡Œè¿‡æ»¤ï¼ŒHAVING åœ¨æ•°æ®åˆ†ç»„åçš„ record è¿›è¡Œè¿‡æ»¤æ‰§è¡Œé¡ºåºï¼šwhere -&gt; aggregate -&gt; having å¯é€‰å‚æ•°ä¸åŒï¼šWHERE åé¢åªèƒ½è·Ÿæ¡ä»¶è¡¨è¾¾å¼ï¼ŒHAVING åé¢å¯ä»¥è·Ÿæ¡ä»¶è¡¨è¾¾å¼å’Œèšåˆå‡½æ•° WHERE is used to filter records before any groupings take place.HAVING is used to filter values after they have been grouped. Examples 12345678910111213141516171819202122232425262728293031-- æŸ¥è¯¢ç”·å¥³ç”Ÿçš„max/min age;SELECT Ssex,max(Sage),min(Sage) FROM student GROUP BY Ssex;+------+------------+------------+| Ssex | max(Sage) | min(Sage) |+------+------------+------------+| ç”· | 1990-12-21 | 1990-01-01 || å¥³ | 1992-03-01 | 1989-07-01 |+------+------------+------------+-- æŸ¥è¯¢Sid&gt;2çš„ç”·å¥³ç”Ÿçš„max/min ageSELECT Ssex,max(Sage),min(Sage) from student WHERE Sid&gt;2 GROUP BY Ssex;+------+------------+------------+| Ssex | max(Sage) | min(Sage) |+------+------------+------------+| ç”· | 1990-08-06 | 1990-05-20 || å¥³ | 1992-03-01 | 1989-07-01 |+------+------------+------------+-- æŸ¥è¯¢ç”·å¥³ç”Ÿçš„max/min ageï¼Œåˆ†ç»„ç»“æœåªæ˜¾ç¤ºä¸ºSsex=ç”·çš„recordSELECT Ssex,max(Sage),min(Sage) from student GROUP BY Ssex HAVING Ssex='ç”·';+------+------------+------------+| Ssex | max(Sage) | min(Sage) |+------+------------+------------+| ç”· | 1990-12-21 | 1990-01-01 |+------+------------+------------+-- æŸ¥è¯¢å¹´é¾„ &lt; 45 çš„employeeï¼Œå¹¶æ ¹æ®workaddressåˆ†ç»„ï¼Œæ˜¾ç¤ºåˆ†ç»„ç»“æœä¸­address_count&gt;3çš„åˆ†ç»„SELECT workaddress,count(*) AS address_count FROM employee WHERE age &lt; 45 GROUP BY workaddress HAVING address_count&gt;3;+--------------+----------------+| workaddress | address_count |+--------------+----------------+| Beijing | 4 || Shanghai | 5 |+--------------+----------------+ æ’åºæŸ¥è¯¢Syntax SELECT field1, field2, ... FROM table_name ORDER BY field1 [ASC|DESC], field2 [ASC|DESC], ...; ASC: ascending order å‡åº DESC: descending order é™åº å¦‚æœæœ‰å¤šä¸ªæ’åºæ¡ä»¶ï¼Œåˆ™å½“å‰è¾¹çš„æ¡ä»¶å€¼ä¸€æ ·æ—¶ï¼Œæ‰ä¼šåˆ¤æ–­ç¬¬äºŒæ¡ä»¶ 123456789101112131415SELECT * FROM student ORDER BY Sage ASC;+-----+-------+------------+------+| Sid | Sname | Sage | Ssex |+-----+-------+------------+------+| 07 | éƒ‘ç«¹ | 1989-07-01 | å¥³ || 01 | èµµé›· | 1990-01-01 | ç”· || 08 | ç‹èŠ | 1990-01-20 | å¥³ || 03 | å­™é£ | 1990-05-20 | ç”· || 04 | æäº‘ | 1990-08-06 | ç”· || 02 | é’±ç”µ | 1990-12-21 | ç”· || 05 | å‘¨æ¢… | 1991-12-01 | å¥³ || 06 | å´å…° | 1992-03-01 | å¥³ |+-----+-------+------------+------+-- æŒ‰ç…§ageå‡åºæ’åºï¼Œå¦‚æœageç›¸åŒï¼Œåˆ™å†æŒ‰ç…§entrydateé™åºæ’åºSELECT * FROM emp ORDER BY age ASC,entrydate DESC; åˆ†é¡µæŸ¥è¯¢Syntax SELECT field1, field2, ... FROM table_name LIMIT offset, count;offsetè¡¨ç¤ºåç§»é‡ï¼Œcountè¡¨ç¤ºæŸ¥è¯¢çš„è®°å½•æ•°offset = (pageNo - 1) * pageSizeåˆ†é¡µæŸ¥è¯¢å±äº MySQL çš„æ‰©å±•è¯­æ³•ï¼Œä¸æ˜¯ SQL æ ‡å‡†è¯­æ³•ï¼Œä¸åŒçš„æ•°æ®åº“æœ‰ä¸åŒçš„å®ç°æ–¹å¼ 12345678910111213141516171819202122232425262728SELECT * FROM student LIMIT 0,3; -- ç¬¬1é¡µSELECT * FROM student LIMIT 3,3; -- ç¬¬2é¡µSELECT * FROM student LIMIT 6,2; -- ç¬¬3é¡µ+-----+-------+------------+------+| Sid | Sname | Sage | Ssex |+-----+-------+------------+------+| 01 | èµµé›· | 1990-01-01 | ç”· || 02 | é’±ç”µ | 1990-12-21 | ç”· || 03 | å­™é£ | 1990-05-20 | ç”· |+-----+-------+------------+------+3 rows in set (0.27 sec)+-----+-------+------------+------+| Sid | Sname | Sage | Ssex |+-----+-------+------------+------+| 04 | æäº‘ | 1990-08-06 | ç”· || 05 | å‘¨æ¢… | 1991-12-01 | å¥³ || 06 | å´å…° | 1992-03-01 | å¥³ |+-----+-------+------------+------+3 rows in set (0.23 sec)+-----+-------+------------+------+| Sid | Sname | Sage | Ssex |+-----+-------+------------+------+| 07 | éƒ‘ç«¹ | 1989-07-01 | å¥³ || 08 | ç‹èŠ | 1990-01-20 | å¥³ |+-----+-------+------------+------+2 rows in set (0.22 sec) DCLç”¨æˆ·ç®¡ç†CREATEç”¨äºåˆ›å»ºä¸€ä¸ªæ–°çš„ç”¨æˆ·ï¼Œå¹¶è®¾ç½®å…¶å¯†ç ALTERç”¨äºä¿®æ”¹ä¸€ä¸ªå·²å­˜åœ¨çš„ç”¨æˆ·çš„å¯†ç DROPç”¨äºåˆ é™¤ä¸€ä¸ªå·²å­˜åœ¨çš„ç”¨æˆ· %ï¼šè¡¨ç¤ºç”¨æˆ·å¯ä»¥ä»ä»»ä½•ä¸»æœºè¿æ¥åˆ°æ•°æ®åº“ localhostï¼šè¡¨ç¤ºç”¨æˆ·åªèƒ½ä»æœ¬åœ°ä¸»æœºè¿æ¥åˆ°æ•°æ®åº“ 192.168.1.1ï¼šè¡¨ç¤ºç”¨æˆ·åªèƒ½ä»æŒ‡å®šçš„ IP åœ°å€è¿æ¥åˆ°æ•°æ®åº“ %.example.comï¼šè¡¨ç¤ºç”¨æˆ·å¯ä»¥ä» example.com åŸŸåä¸‹çš„ä»»ä½•ä¸»æœºè¿æ¥åˆ°æ•°æ®åº“ 1234CREATE USER 'Jason'@'xxx.xxx.x.x' IDENTIFIED BY 'password'; -- å¯ä»æŒ‡å®šä¸»æœºè¿æ¥åˆ°æ•°æ®åº“CREATE USER 'Jason'@'%' IDENTIFIED BY 'JasonPassword'; -- å¯ä»ä»»ä½•ä¸»æœºè¿æ¥åˆ°æ•°æ®åº“ALTER USER 'Jason'@'%' IDENTIFIED BY 'NewJasonPassword';DROP USER 'username'@'host'; æƒé™ç®¡ç†GRANTï¼šç”¨äºæˆäºˆç”¨æˆ·æ•°æ®åº“çš„è®¿é—®æƒé™REVOKEï¼šç”¨äºæ’¤é”€ç”¨æˆ·çš„æ•°æ®åº“è®¿é—®æƒé™ã€‚ä¾‹å¦‚ï¼š 1234-- æˆäºˆ user åœ¨ database.table ä¸Šæ‰§è¡Œ SELECTï¼ŒINSERT å’Œ DELETE æ“ä½œçš„æƒé™ã€‚GRANT SELECT, INSERT, DELETE ON database.table TO 'user'@'host';-- æ’¤é”€äº† user åœ¨ database.table ä¸Šæ‰§è¡Œ INSERT å’Œ DELETE æ“ä½œçš„æƒé™ã€‚REVOKE INSERT, DELETE ON database.table FROM 'user'@'host'; å¸¸ç”¨æƒé™ ALL, ALL PRIVILEGES æ‰€æœ‰æƒé™ SELECT æŸ¥è¯¢æ•°æ® INSERT æ’å…¥æ•°æ® UPDATE ä¿®æ”¹æ•°æ® DELETE åˆ é™¤æ•°æ® ALTER ä¿®æ”¹è¡¨ DROP åˆ é™¤æ•°æ®åº“/è¡¨/è§†å›¾ CREATE åˆ›å»ºæ•°æ®åº“/è¡¨","link":"/Dev/DataBase/DataBase01/"},{"title":"DataBase Base å¤šè¡¨æŸ¥è¯¢&amp;äº‹åŠ¡","text":"å¤šè¡¨æŸ¥è¯¢ Multi-Table Queryå¤šè¡¨å…³ç³»é¡¹ç›®å¼€å‘ä¸­,åœ¨è¿›è¡Œæ•°æ®åº“è¡¨ç»“æ„è®¾è®¡æ—¶,ä¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚åŠä¸šåŠ¡æ¨¡å—ä¹‹é—´çš„å…³ç³»,åˆ†æå¹¶è®¾è®¡è¡¨ç»“æ„,ç”±äºä¸šåŠ¡ä¹‹é—´ç›¸äº’å…³è”æ‰€ä»¥å„ä¸ªè¡¨ç»“æ„ä¹‹é—´ä¹Ÿå­˜åœ¨ç€å„ç§è”ç³»,åŸºæœ¬ä¸Šåˆ†ä¸ºä¸‰ç§ï¼šä¸€å¯¹ä¸€ one to oneå¦‚ç”¨æˆ·ä¸ç”¨æˆ·è¯¦æƒ…çš„å…³ç³»å¤šç”¨äºå•è¡¨æ‹†åˆ†,å°†ä¸€å¼ è¡¨çš„åŸºç¡€å­—æ®µå’Œæ‰©å±•å­—æ®µåˆ†å¼€å­˜å‚¨,å‡å°‘æ•°æ®å†—ä½™,æé«˜æ•°æ®åº“æ€§èƒ½.å¯åœ¨ä»»æ„ä¸€æ–¹æ·»åŠ å¤–é”®å…³è”å¦ä¸€æ–¹çš„ä¸»é”®,å¹¶ä¸”å¤–é”®å­—æ®µè®¾ç½® UNIQUE çº¦æŸ.ä¸€å¯¹å¤š(å¤šå¯¹ä¸€) one to manyå¦‚ä¸€ä¸ªéƒ¨é—¨å¯¹åº”å¤šä¸ªå‘˜å·¥,ä¸€ä¸ªå‘˜å·¥åªèƒ½å¯¹åº”ä¸€ä¸ªéƒ¨é—¨.è¿™ç§å…³ç³»ä¸€èˆ¬æ˜¯é€šè¿‡åœ¨å¤šçš„ä¸€æ–¹æ·»åŠ å¤–é”®æ¥å®ç°çš„.(å‘˜å·¥è¡¨ä¸­è®¾ç½®éƒ¨é—¨ id ä½œä¸ºå¤–é”®,æŒ‡å‘éƒ¨é—¨è¡¨ä¸­çš„ä¸»é”®)å¤šå¯¹å¤š many to manyå¦‚ä¸€ä¸ªå­¦ç”Ÿå¯ä»¥é€‰æ‹©å¤šä¸ªè¯¾ç¨‹,ä¸€ä¸ªè¯¾ç¨‹ä¹Ÿå¯ä»¥è¢«å¤šä¸ªå­¦ç”Ÿé€‰æ‹©.è¿™ç§å…³ç³»ä¸€èˆ¬æ˜¯é€šè¿‡æ·»åŠ ç¬¬ä¸‰å¼ è¡¨æ¥å®ç°çš„.(å­¦ç”Ÿè¡¨,è¯¾ç¨‹è¡¨,å­¦ç”Ÿè¯¾ç¨‹è¡¨),ä¸­é—´è¡¨ä¸­è®¾ç½®å­¦ç”Ÿ id å’Œè¯¾ç¨‹ id ä½œä¸ºå¤–é”®,æŒ‡å‘å­¦ç”Ÿè¡¨å’Œè¯¾ç¨‹è¡¨çš„ä¸»é”®. ä¸ºæ–¹ä¾¿ç†è§£,ä»¥ä¸‹ä»¥å‘˜å·¥è¡¨å’Œéƒ¨é—¨è¡¨ä¸ºä¾‹è¿›è¡Œè¯´æ˜. 123456789101112131415161718SELECT * FROM employees;+----+-------+--------------+| ID | Name | DepartmentID |+----+-------+--------------+| 1 | John | 100 || 2 | Alice | 200 || 3 | Bob | 100 || 4 | David | 300 |+----+-------+--------------+SELECT * FROM departments;+-----+-----------+| ID | Name |+-----+-----------+| 100 | Sales || 200 | Marketing || 300 | HR |+-----+-----------+ å¤šè¡¨æŸ¥è¯¢æ¦‚è¿°åˆå¹¶æŸ¥è¯¢(ç¬›å¡å°”ç§¯,æ˜¾ç¤ºæ‰€æœ‰ç»„åˆç»“æœ,ä¸å¸¸ç”¨)SELECT * FROM table1,table2;æ¶ˆé™¤æ— æ•ˆç»„åˆ(å†…è¿æ¥)SELECT * FROM employee, department WHERE employee.dept_id = department.id; 123456789101112131415161718192021222324252627SELECT * FROM employees,departments;+----+-------+--------------+-----+-----------+| ID | Name | DepartmentID | ID | Name |+----+-------+--------------+-----+-----------+| 1 | John | 100 | 300 | HR || 1 | John | 100 | 200 | Marketing || 1 | John | 100 | 100 | Sales || 2 | Alice | 200 | 300 | HR || 2 | Alice | 200 | 200 | Marketing || 2 | Alice | 200 | 100 | Sales || 3 | Bob | 100 | 300 | HR || 3 | Bob | 100 | 200 | Marketing || 3 | Bob | 100 | 100 | Sales || 4 | David | 300 | 300 | HR || 4 | David | 300 | 200 | Marketing || 4 | David | 300 | 100 | Sales |+----+-------+--------------+-----+-----------+SELECT * FROM employees,departments WHERE employees.DepartmentID = departments.ID;+----+-------+--------------+-----+-----------+| ID | Name | DepartmentID | ID | Name |+----+-------+--------------+-----+-----------+| 1 | John | 100 | 100 | Sales || 2 | Alice | 200 | 200 | Marketing || 3 | Bob | 100 | 100 | Sales || 4 | David | 300 | 300 | HR |+----+-------+--------------+-----+-----------+ å†…è¿æ¥æŸ¥è¯¢ Inner Joinå†…è¿æ¥æŸ¥è¯¢çš„æ˜¯ä¸¤å¼ è¡¨äº¤é›†çš„éƒ¨åˆ† éšå¼å†…è¿æ¥ï¼šSELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1, è¡¨2 WHERE æ¡ä»¶ ...;æ˜¾å¼å†…è¿æ¥(æ€§èƒ½è¾ƒé«˜)SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1 [ INNER ] JOIN è¡¨2 ON è¿æ¥æ¡ä»¶ ...; 123456789101112131415161718192021-- æŸ¥è¯¢å‘˜å·¥å§“å,ä»¥åŠå¯¹åº”çš„éƒ¨é—¨åç§°-- éšå¼SELECT e.Name,d.Name FROM employees AS e, departments AS d WHERE e.DepartmentID = d.ID;+-------+-----------+| Name | Name |+-------+-----------+| John | Sales || Alice | Marketing || Bob | Sales || David | HR |+-------+-----------+-- æ˜¾å¼SELECT e.Name,d.Name FROM employees AS e INNER JOIN departments AS d ON e.DepartmentID = d.ID;+-------+-----------+| Name | Name |+-------+-----------+| John | Sales || Alice | Marketing || Bob | Sales || David | HR |+-------+-----------+ sql inner join 3 tables example 1234567891011SELECT first_name, last_name, job_title, department_nameFROM employees eINNER JOIN departments d ON d.department_id = e.department_idINNER JOIN jobs j ON j.job_id = e.job_idWHERE e.department_id IN (1, 2, 3); å¤–è¿æ¥æŸ¥è¯¢ Outer Joinåˆ†ä¸ºå·¦å¤–è¿æ¥ã€å³å¤–è¿æ¥ã€å…¨å¤–è¿æ¥(Left Join, Right Join, Full Join) å·¦è¿æ¥æŸ¥è¯¢ï¼šæŸ¥è¯¢å·¦è¡¨çš„æ‰€æœ‰æ•°æ®,å³è¡¨ä¸­ç¬¦åˆæ¡ä»¶çš„æ•°æ®å³è¿æ¥æŸ¥è¯¢ï¼šæŸ¥è¯¢å³è¡¨çš„æ‰€æœ‰æ•°æ®,å·¦è¡¨ä¸­ç¬¦åˆæ¡ä»¶çš„æ•°æ®å…¨è¿æ¥æŸ¥è¯¢ï¼šæŸ¥è¯¢ä¸¤ä¸ªè¡¨çš„æ‰€æœ‰æ•°æ® 12345678910111213-- left joinSELECT e.Name,d.Name FROM employees AS e LEFT JOIN departments AS d ON e.DepartmentID = d.ID;-- right joinSELECT e.Name,d.Name FROM departments AS d RIGHT JOIN employees AS e ON e.DepartmentID = d.ID;-- ä»¥ä¸Šä¸¤å¥ç­‰ä»·+-------+-----------+| Name | Name |+-------+-----------+| John | Sales || Alice | Marketing || Bob | Sales || David | HR |+-------+-----------+ sqltutorial-left-joinsqltutorial-full-outer-join è‡ªè¿æ¥æŸ¥è¯¢ Self Joinå½“å‰è¡¨ä¸è‡ªèº«çš„è¿æ¥æŸ¥è¯¢ï¼Œè‡ªè¿æ¥å¿…é¡»ä½¿ç”¨è¡¨åˆ«å;è‡ªè¿æ¥æŸ¥è¯¢ï¼Œå¯ä»¥æ˜¯å†…è¿æ¥æŸ¥è¯¢ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤–è¿æ¥æŸ¥è¯¢ 123456789SELECT A.Name,B.NameFROM employees AJOIN employees BON A.DepartmentID = B.DepartmentID &amp;&amp; A.Name &lt; B.Name;+------+------+| Name | Name |+------+------+| Bob | John |+------+------+ sqltutorial-self-join è”åˆæŸ¥è¯¢ UnionæŠŠå¤šæ¬¡SELECTæŸ¥è¯¢çš„ç»“æœåˆå¹¶ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„æŸ¥è¯¢é›† 123SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨A ...UNION [ALL]SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨B ... Note: UNION ä¼šè‡ªåŠ¨å»é‡, UNION ALL ä¸ä¼šå»é‡;è”åˆæŸ¥è¯¢æ¯”ä½¿ç”¨ or æ•ˆç‡é«˜ï¼Œä¸ä¼šä½¿ç´¢å¼•å¤±æ•ˆ 123456789101112SELECT Name FROM employees UNION SELECT Name FROM departments;+-----------+| Name |+-----------+| John || Alice || Bob || David || Sales || Marketing || HR |+-----------+ å­æŸ¥è¯¢ SubquerySELECT * FROM t1 WHERE column1 = ( SELECT column1 FROM t2);åœ¨ SQL ä¸­ï¼Œå­æŸ¥è¯¢ï¼ˆSubqueryï¼‰æ˜¯åµŒå…¥åœ¨å…¶ä»– SQL æŸ¥è¯¢ä¸­çš„æŸ¥è¯¢,åˆç§°åµŒå¥—æŸ¥è¯¢ã€‚å­æŸ¥è¯¢å¯ä»¥ç”¨åœ¨å„ç§ SQL è¯­å¥ä¸­ï¼Œå¦‚ SELECTã€INSERTã€UPDATEã€DELETEï¼Œä»¥åŠåœ¨ WHERE æˆ– HAVING å­å¥ä¸­ã€‚ 123SELECT EmployeeName, SalaryFROM EmployeesWHERE Salary &gt; (SELECT AVG(Salary) FROM Employees); æ ¹æ®å­æŸ¥è¯¢ç»“æœå¯ä»¥åˆ†ä¸ºï¼š æ ‡é‡å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢è¿”å›å€¼ä¸ºå•ä¸ªå€¼,æ•°å­—,String,Dateï¼‰å¸¸ç”¨æ“ä½œç¬¦ï¼š- &lt; &gt; &gt; &gt;= &lt; &lt;= åˆ—å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢è¿”å›å€¼ä¸ºä¸€åˆ—ï¼‰å¸¸ç”¨æ“ä½œç¬¦:IN,NOT IN,SOME,ANY,ALL(SOMEå’ŒANYæ˜¯ç­‰ä»·çš„,åªè¦å­æŸ¥è¯¢è¿”å›çš„ä»»æ„ä¸€ä¸ªå€¼æ»¡è¶³æ¡ä»¶å³å¯,ALLæ˜¯æ‰€æœ‰å€¼éƒ½æ»¡è¶³æ¡ä»¶æ‰è¿”å›ç»“æœ) è¡Œå­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢è¿”å›å€¼ä¸ºä¸€è¡Œï¼‰å¸¸ç”¨æ“ä½œç¬¦:=, &lt;, &gt;, IN, NOT IN è¡¨å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢è¿”å›å€¼ä¸ºå¤šè¡Œå¤šåˆ—ï¼‰å¸¸ç”¨æ“ä½œç¬¦:IN 1234567891011121314151617181920212223-- æ ‡é‡å­æŸ¥è¯¢SELECT * FROM employees WHERE Salary &gt; (SELECT AVG(Salary) FROM employees);-- åˆ—å­æŸ¥è¯¢SELECT *FROM employeesWHERE Salary IN (SELECT Salary FROM employees WHERE DepartmentID = 100);SELECT *FROM employeesWHERE Salary &gt; ALL (SELECT Salary FROM employees WHERE DepartmentID = 100);SELECT *FROM employeesWHERE Salary &gt; ANY (SELECT Salary FROM employees WHERE DepartmentID = 100);-- è¡Œå­æŸ¥è¯¢SELECT *FROM employeesWHERE (salary, manager) = (SELECT salary,manager FROM employee WHERE name = 'xxx');-- è¡¨å­æŸ¥è¯¢SELECT e.*, d.*FROM (SELECT * FROM employees WHERE entrydate &gt; '2006-01-01') AS eLEFT JOIN dept AS dON e.dept = d.id; æ ¹æ®å­æŸ¥è¯¢ä½ç½®å¯åˆ†ä¸ºï¼š WHERE ä¹‹å FROM ä¹‹å SELECT ä¹‹å äº‹åŠ¡ TransactionIntroductionåœ¨ SQL ä¸­ï¼Œäº‹åŠ¡ï¼ˆTransactionï¼‰æ˜¯ä½œä¸ºå•ä¸ªé€»è¾‘å·¥ä½œå•å…ƒæ‰§è¡Œçš„ä¸€ç³»åˆ—æ“ä½œï¼Œè¿™äº›æ“ä½œè¦ä¹ˆå®Œå…¨å®Œæˆï¼Œè¦ä¹ˆå®Œå…¨ä¸å®Œæˆã€‚äº‹åŠ¡æ˜¯æ•°æ®åº“å®Œæ•´æ€§çš„å…³é”®ï¼Œå®ƒç¡®ä¿äº†æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€è½¬æ¢åˆ°å¦ä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€ã€‚[Ch5-DbManagement#äº‹åŠ¡ç®¡ç†] 12345678910111213141516-- Manual transactionSET @@autocommit = 0;SELECT * FROM employees WHERE ID = 1;UPDATE employees SET Salary = 1000 WHERE ID = 1;UPDATE employees SET Salary = 2000 WHERE ID = 2;COMMIT;-- å¦‚æœå‡ºç°é”™è¯¯,å¯ä»¥ä½¿ç”¨ ROLLBACK å›æ»šäº‹åŠ¡ROLLBACK;-- ä½¿ç”¨START/BEGIN TRANSACTIONSTART TRANSACTION; -- æˆ–è€… BEGIN;statement1;statement2;COMMIT; ACID åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼šäº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆã€‚å¦‚æœäº‹åŠ¡ä¸­çš„æŸä¸ªæ“ä½œå¤±è´¥ï¼Œé‚£ä¹ˆæ•´ä¸ªäº‹åŠ¡å°†è¢«å›æ»šï¼Œæ•°æ®åº“çŠ¶æ€ä¸ä¼šæ”¹å˜ã€‚ ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šäº‹åŠ¡ç¡®ä¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€è½¬æ¢åˆ°å¦ä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€ã€‚äº‹åŠ¡å¼€å§‹å’Œç»“æŸæ—¶ï¼Œæ‰€æœ‰çš„ä¸šåŠ¡è§„åˆ™éƒ½å¿…é¡»ä¿æŒä¸€è‡´ã€‚ éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼šæ¯ä¸ªäº‹åŠ¡éƒ½åœ¨ä¸€ä¸ªç‹¬ç«‹çš„å·¥ä½œåŒºä¸­æ‰§è¡Œï¼Œäº‹åŠ¡ä¹‹é—´ä¸ä¼šäº’ç›¸å½±å“ã€‚è¿™æ„å‘³ç€å¹¶å‘äº‹åŠ¡çš„ä¿®æ”¹å¿…é¡»è¢«éš”ç¦»ï¼Œç›´åˆ°äº‹åŠ¡æäº¤ï¼Œå…¶ä»–äº‹åŠ¡æ‰èƒ½çœ‹åˆ°è¿™äº›ä¿®æ”¹ã€‚ æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼šä¸€æ—¦äº‹åŠ¡è¢«æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“çš„æ›´æ”¹å°±æ˜¯æ°¸ä¹…æ€§çš„ã€‚å³ä½¿å‘ç”Ÿç³»ç»Ÿæ•…éšœï¼Œæ›´æ”¹ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚ å¹¶å‘äº‹åŠ¡ Concurrent Transactionäº‹åŠ¡å¹¶å‘é—®é¢˜[Ch5-DbManagement#äº‹åŠ¡ç®¡ç†]å¤šç”¨æˆ·å¹¶å‘è®¿é—®æ•°æ®åº“æ—¶,å¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹é—®é¢˜ï¼š lost updateTransaction A and Transaction B read and updates the same data, The update of Transaction A is lost because Transaction B overwrites it. dirty readA transaction reads data written by a concurrent uncommitted transaction. nonrepeatable readA transaction re-reads data it has previously read and finds that data has been modified by another transaction (that committed since the initial read). phantom readA transaction re-executes a query returning a set of rows that satisfy a search condition and finds that the set of rows satisfying the condition has changed due to another recently-committed transaction. serialization anomalyThe result of successfully committing a group of transactions is inconsistent with all possible orderings of running those transactions one at a time. Transaction Isolation Level Isolation Level Dirty Read Nonrepeatable Read Phantom Read Serialization Anomaly Read uncommitted Allowed, but not in PG Possible Possible Possible Read committed Not possible Possible Possible Possible Repeatable read Not possible Not possible Allowed, but not in PG Possible Serializable Not possible Not possible Not possible Not possible 12-- è®¾ç½®äº‹åŠ¡éš”ç¦»çº§åˆ«SET &lt;SESSION|GLOBAL&gt; TRANSACTION ISOLATION LEVEL &lt;READ UNCOMMITTED|READ COMMITTED|REPEATABLE READ|SERIALIZABLE&gt;; Reference:postgresql-transaction-isolation-levelszhihu","link":"/Dev/DataBase/DataBase03/"},{"title":"Glossary Of SQL","text":"Basic Structure of SQL Server syntaxIntro Generally speaking, the real difference between statements, clauses, batches, etc., is determined by how you use them at the time.The Difference Between SQL Statement,Command, Clause, Batch, etc by Aubrey Love ğŸª§Note:æ—¥å¸¸å·¥ä½œä¸­,è¿™äº›æœ¯è¯­çš„ä½¿ç”¨å¹¶ä¸æ˜¯å¾ˆä¸¥æ ¼,ä¸å¿…çº ç»“äºæ­¤.ä½†æ˜¯äº†è§£è¿™äº›æœ¯è¯­çš„å«ä¹‰,å¸®åŠ©æˆ‘ä»¬åœ¨é˜…è¯»æ–‡æ¡£æ—¶æ›´åŠ å‡†ç¡®çš„ç†è§£æ–‡æ¡£çš„å«ä¹‰. ä¸ªäººå¯¹æ­¤çš„ç®€å•æ€»ç»“å¦‚ä¸‹: Statementï¼šè¯­å¥.æ˜¯ä¸€æ¡å®Œæ•´çš„ SQL è¯­å¥ï¼Œå¯ä»¥æ˜¯å•è¡Œï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šè¡Œã€‚ä¾‹å¦‚ï¼ŒSELECT * FROM Users; å°±æ˜¯ä¸€ä¸ª SQL è¯­å¥ã€‚é€šå¸¸ç”¨åˆ†å· ; ç»“å°¾ã€‚ Commandï¼šå‘½ä»¤.é€šå¸¸æŒ‡å¯¹æ•°æ®åº“æˆ–æ•°æ®åº“å¯¹è±¡æ‰§è¡Œçš„æ“ä½œã€‚ä¾‹å¦‚ï¼ŒCREATE, DROP, SELECT, INSERT, UPDATE, DELETE ç­‰éƒ½æ˜¯ SQL å‘½ä»¤ã€‚ Batchï¼šæ‰¹å¤„ç†.è¿™æ˜¯ä¸€ç»„ SQL è¯­å¥ï¼Œå®ƒä»¬ä½œä¸ºä¸€ä¸ªå•å…ƒä¸€èµ·å‘é€åˆ° SQL æœåŠ¡å™¨ä»¥ä¾¿ä¸€èµ·æ‰§è¡Œã€‚åœ¨å¤§å¤šæ•° SQL æœåŠ¡å™¨ä¸­ï¼Œæ‰¹å¤„ç†ç”±ä¸€ä¸ªæˆ–å¤šä¸ª SQL è¯­å¥ç»„æˆï¼Œè¿™äº›è¯­å¥ç”±åˆ†å· ; åˆ†éš”ã€‚ Clauseï¼šå­å¥.è¿™æ˜¯ SQL è¯­å¥çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒç”¨äºæŒ‡å®š SQL è¯­å¥çš„æŸäº›æ¡ä»¶æˆ–ä¿®æ”¹ SQL è¯­å¥çš„è¡Œä¸ºã€‚ä¾‹å¦‚ï¼ŒWHERE, AND, OR, NOT, FROM, ORDER BY ç­‰éƒ½æ˜¯ SQL å­å¥ã€‚ Query : æŸ¥è¯¢.åœ¨ SQL ä¸­ï¼ŒQuery æ˜¯ä¸€ä¸ªè¯·æ±‚ï¼Œç”¨äºä»æ•°æ®åº“ä¸­è·å–ç‰¹å®šçš„æ•°æ®ã€‚æœ€å¸¸è§çš„æŸ¥è¯¢æ˜¯ SELECT è¯­å¥ï¼Œå®ƒç”¨äºä»ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ä¸­é€‰æ‹©æ•°æ®ã€‚ SQL StatementSQL Server â€œstatementsâ€ are the most basic unit of code that can be executed in SQL Server.A statement is typically a single line of code, although multiple lines may be combined into a single statement. You can also use a semicolon (;) as a batch terminator that separates one command statement or batch from another. SQL CommandCommands are often referred to as a STATEMENT or QUERY. However, a SQL command is any instruction set that directs SQL Server to perform an action against a given SQL Server object. DDL (Data Definition Language) DML (Data Manipulation Language) DCL (Data Control Language) TCL (Transaction Control Language) ps: æœ‰æ—¶æŠŠDMLä¸­çš„ SELECT å•ç‹¬æ‹¿å‡ºæ¥ï¼Œç§°ä¸º DQL(Data Query Language) DDL DML DCL TCL CREATE SELECT GRANT COMMIT ALTER INSERT REVOKE ROLLBACK DROP UPDATE SAVEPOINT TRUNCATE DELETE SET TRANSACTION COMMENT MERGE RENAME CALL EXPLAIN PLAN LOCK TABLE SQL BatchA SQL Server â€œbatchâ€ is a single or multi-line block of code that tells the SQL Server what action to take on a SQL Server object. Batches are typically separated by the â€œGOâ€ statement at the end of a SQL query; 12345678USE AdventureWorks2019;GOSELECT \\*FROM HumanResources.Department;GOSELECT \\*FROM HumanResources.Employee;GO SQL QueryThe â€œqueryâ€ keyword in SQL Server is used to perform an action against a database or database object. SQL ClauseA SQL Server â€œclauseâ€ is a code element that defines a particular action. Clauses are typically used to control the flow of a query or Transact-SQL program. The most common clauses are the FROM, WHERE, and ORDER BY clauses. The SELECT clause is used to specify the columns or expressions that will be returned by a query. DataBase GlossaryDatabase,Schemaï¼šæ•°æ®åº“ï¼Œä¸€ä¸ªåº“å¯ä»¥æœ‰å¤šä¸ªè¡¨Table,Relationï¼šè¡¨ï¼ˆTableï¼‰æ˜¯æ•°æ®åº“ä¸­å­˜å‚¨æ•°æ®çš„ä¸»è¦ç»“æ„ï¼Œå®ƒç”±è¡Œï¼ˆè®°å½•ï¼‰å’Œåˆ—ï¼ˆå­—æ®µï¼‰ç»„æˆ.è¡¨çš„ç»“æ„é€šå¸¸ç”±å­—æ®µåå’Œå­—æ®µç±»å‹å®šä¹‰Row,Record,Item,Tupleï¼šè¡Œï¼Œä¸€è¡Œå¯ä»¥æœ‰å¾ˆå¤šåˆ—ï¼›Column,Fieldï¼Œåˆ—ï¼Œä¸å†ç»†åˆ†çš„å…·ä½“å€¼ Referencesâ­www.mssqltips.comwww.databasestar.comdev.mysql.com","link":"/Dev/DataBase/GlossaryOfSQL/"},{"title":"Structed vs Unstructed Data","text":"Structured Dataç»“æ„åŒ–æ•°æ®æ˜¯é«˜åº¦ç»„ç»‡å’Œæ•´é½æ ¼å¼åŒ–çš„æ•°æ®ã€‚å®ƒæ˜¯å¯ä»¥æ”¾å…¥è¡¨æ ¼å’Œç”µå­è¡¨æ ¼ä¸­çš„æ•°æ®ç±»å‹ã€‚ç»“æ„åŒ–æ•°æ®ä¹Ÿè¢«ç§°ä¸ºå®šé‡æ•°æ®(Quantitative Data)ï¼Œåœ¨é¡¹ç›®ä¸­ï¼Œä¿å­˜å’Œç®¡ç†è¿™äº›çš„æ•°æ®ä¸€èˆ¬ä¸ºå…³ç³»æ•°æ®åº“ï¼Œå½“ä½¿ç”¨ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€(SQL)æ—¶ï¼Œè®¡ç®—æœºç¨‹åºå¾ˆå®¹æ˜“æ£€ç´¢&amp;æ“ä½œæ•°æ®ã€‚ç»“æ„åŒ–æ•°æ®å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼ä»å¤šç§æ¥æºç”Ÿæˆã€‚å®ƒå¯ä»¥æ¥è‡ªä¼ä¸šè½¯ä»¶ï¼Œå¦‚å®¢æˆ·å…³ç³»ç®¡ç†ï¼ˆCRMï¼‰ç³»ç»Ÿï¼Œä¼šè®¡ç¨‹åºå’Œå…¶ä»–åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„å…³é”®ä¸šåŠ¡è¿è¥ã€‚å®ƒå¯ä»¥ä»åœ¨çº¿æ¥æºç”Ÿæˆï¼ŒåŒ…æ‹¬ç¤¾äº¤åª’ä½“å¹³å°å’Œç½‘ç»œè°ƒæŸ¥ã€‚å®ƒä¹Ÿå¯ä»¥æ¥è‡ªäººå·¥è¾“å…¥ã€‚æ­¤å¤–ï¼Œå¯ä»¥ä½¿ç”¨ä¾èµ–äºäººå·¥æ™ºèƒ½ï¼ˆAIï¼‰å’Œè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰çš„å•†ä¸šæ™ºèƒ½ï¼ˆBIï¼‰å·¥å…·ä»éç»“æ„åŒ–æ•°æ®ä¸­æå–ç»“æ„åŒ–æ•°æ®ã€‚ Unstructured Dataéç»“æ„åŒ–æ•°æ®æ˜¯æ²¡æœ‰å›ºæœ‰ç»“æ„æˆ–ç»„ç»‡çš„ä¿¡æ¯ã€‚éç»“æ„åŒ–æ•°æ®é€šå¸¸è¢«ç§°ä¸ºâ€œå¯¹è±¡â€,å¸¸è§çš„éç»“æ„åŒ–æ•°æ®åŒ…æ‹¬å„ç§åŠå…¬æ–‡æ¡£ã€å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ã€è®¾è®¡æ–‡æ¡£ã€æ—¥å¿—æ–‡ä»¶ã€æœºå™¨æ•°æ®ç­‰ã€‚è¿™ç±»æ•°æ®å å…¨çƒç”Ÿæˆçš„æ‰€æœ‰æ•°æ®çš„ 80%åˆ° 90%ã€‚ Semi-Structured Dataåœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œå¤§å¤šæ•°æ•°æ®æ˜¯éç»“æ„åŒ–å’Œç»“æ„åŒ–æ•°æ®çš„æ··åˆã€‚åŠç»“æ„åŒ–æ•°æ®æ˜¯ç»“æ„åŒ–æ•°æ®çš„ä¸€ä¸ªæ¾æ•£å®šä¹‰çš„å­é›†ã€‚å¯ä»¥å°†å…¶è§†ä¸ºæ·»åŠ äº†æ ‡ç­¾ã€å…³é”®å­—å’Œå…ƒæ•°æ®ä»¥ä½¿å…¶æ›´æœ‰ç”¨çš„éç»“æ„åŒ–æ•°æ® Semi-structured data occupies the middle ground between structured and unstructured data as data that has some degree of organization but is not fully organized into a fixed record format found in a traditional system or database For example, you could add some structure to a natively unstructured XML document using metadata to explain who created the document and when, and keywords to describe the content and make it possible to be found in searches. In the case of HTML documents, which would otherwise be unstructured, H1 tags are used to identify their titles while H2 identify subsections, making it more easily searchable. RefDatamation","link":"/Dev/DataBase/StructedvsUnstructedData/"},{"title":"Hexoæ·»åŠ Live2dæ¨¡å‹","text":"Installations é¦–å…ˆåœ¨ç½‘ç«™æ ¹ç›®å½•ä¸‹æ‰§è¡Œnpm install --save hexo-helper-live2dï¼Œä¸‹è½½ Live2d æ’ä»¶ ä¸‹è½½æ¨¡å‹ï¼Œåœ¨ç½‘ç«™æ ¹ç›®å½•ä¸‹æ–°å»ºlive2d_modelsæ–‡ä»¶å¤¹ï¼Œå°†æ¨¡å‹æ–‡ä»¶æ”¾å…¥å…¶ä¸­,æ¨¡å‹æ–‡ä»¶å¯åœ¨ä»¥ä¸‹é“¾æ¥ä¸‹è½½https://github.com/xiazeyu/live2d-widget-models ä¿®æ”¹_config.ymlæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®1234567891011live2d: enable: true model: use: nipsilon # ç›¸å¯¹äº/live2d_models/çš„è·¯å¾„ display: position: left width: 175 height: 350 log: true mobile: show: false æ–‡ä»¶çš„å­˜æ”¾ä½ç½®å‚è€ƒä¸‹å›¾ æ•ˆæœå›¾ Configurationshelper ç‰¹æœ‰12345678910111213141516171819# Live2D## https://github.com/EYHN/hexo-helper-live2dlive2d: enable: true # enable: false scriptFrom: local # é»˜è®¤ pluginRootPath: live2dw/ # æ’ä»¶åœ¨ç«™ç‚¹ä¸Šçš„æ ¹ç›®å½•(ç›¸å¯¹è·¯å¾„) pluginJsPath: lib/ # è„šæœ¬æ–‡ä»¶ç›¸å¯¹ä¸æ’ä»¶æ ¹ç›®å½•è·¯å¾„ pluginModelPath: assets/ # æ¨¡å‹æ–‡ä»¶ç›¸å¯¹ä¸æ’ä»¶æ ¹ç›®å½•è·¯å¾„ # scriptFrom: jsdelivr # jsdelivr CDN # scriptFrom: unpkg # unpkg CDN # scriptFrom: https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js # ä½ çš„è‡ªå®šä¹‰ url tagMode: false # æ ‡ç­¾æ¨¡å¼, æ˜¯å¦ä»…æ›¿æ¢ live2d tagæ ‡ç­¾è€Œéæ’å…¥åˆ°æ‰€æœ‰é¡µé¢ä¸­ debug: false # è°ƒè¯•, æ˜¯å¦åœ¨æ§åˆ¶å°è¾“å‡ºæ—¥å¿— model: use: live2d-widget-model-wanko # npm-module package name # use: wanko # åšå®¢æ ¹ç›®å½•/live2d_models/ ä¸‹çš„ç›®å½•å # use: ./wives/wanko # ç›¸å¯¹äºåšå®¢æ ¹ç›®å½•çš„è·¯å¾„ # use: https://cdn.jsdelivr.net/npm/live2d-widget-model-wanko@1.0.5/assets/wanko.model.json # ä½ çš„è‡ªå®šä¹‰ url General Settings123456789101112131415161718192021# Live2D## https://github.com/xiazeyu/live2d-widget.js## https://l2dwidget.js.org/docs/class/src/index.js~L2Dwidget.html#instance-method-initlive2d: model: scale: 1 hHeadPos: 0.5 vHeadPos: 0.618 display: superSample: 2 width: 150 height: 300 position: right hOffset: 0 vOffset: -20 mobile: show: true scale: 0.5 react: opacityDefault: 0.7 opacityOnHover: 0.2 Refhexo-helper-live2dHexo æ·»åŠ  Live2D çœ‹æ¿å¨˜+æ¨¡å‹é¢„è§ˆ","link":"/Dev/FrontEnd/Live2d/"},{"title":"PicGo-Githubé…ç½®å›¾åºŠ(Typora&amp;VSCode)","text":"Introä»€ä¹ˆæ˜¯å›¾åºŠå›¾åºŠï¼Œä¹Ÿè¢«ç§°ä¸ºå›¾åƒæ‰˜ç®¡æœåŠ¡ï¼ˆImage Hosting Serviceï¼‰ï¼Œæ˜¯ä¸€ç§åœ¨çº¿æœåŠ¡ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„æ–¹å¼æ¥å­˜å‚¨å’Œåˆ†äº«å›¾ç‰‡ã€‚ç”¨æˆ·å¯ä»¥ä¸Šä¼ å›¾ç‰‡åˆ°å›¾åºŠï¼Œç„¶åå›¾åºŠä¼šç”Ÿæˆä¸€ä¸ªå¯ä»¥åœ¨ç½‘é¡µã€è®ºå›ã€åšå®¢æˆ–å…¶ä»–åœ°æ–¹ä½¿ç”¨çš„é“¾æ¥ï¼Œä»¥ä¾¿ä»–äººå¯ä»¥æŸ¥çœ‹æˆ–ä¸‹è½½è¿™äº›å›¾ç‰‡ã€‚ å›¾åºŠæœåŠ¡é€šå¸¸æä¾›ä¸€å®šçš„å…è´¹å­˜å‚¨ç©ºé—´ï¼Œä½†å¯èƒ½ä¼šå¯¹å›¾ç‰‡çš„å¤§å°ã€æ ¼å¼æˆ–æ•°é‡æœ‰é™åˆ¶ã€‚ä¸€äº›å›¾åºŠè¿˜æä¾›é¢å¤–çš„ä»˜è´¹æœåŠ¡ï¼Œå¦‚æ›´å¤§çš„å­˜å‚¨ç©ºé—´ã€æ›´é«˜çš„å¸¦å®½æˆ–æ›´å¤šçš„åŠŸèƒ½ã€‚ ä¼˜ç¼ºç‚¹ èŠ‚çœå­˜å‚¨ç©ºé—´ï¼šå›¾åºŠæœåŠ¡å¯ä»¥å¸®åŠ©ä½ èŠ‚çœæœ¬åœ°æˆ–æœåŠ¡å™¨çš„å­˜å‚¨ç©ºé—´ï¼Œå› ä¸ºå›¾ç‰‡æ˜¯å­˜å‚¨åœ¨å›¾åºŠæœåŠ¡çš„æœåŠ¡å™¨ä¸Šçš„ã€‚ æ˜“äºåˆ†äº«ï¼šå›¾åºŠæœåŠ¡é€šå¸¸ä¼šä¸ºä¸Šä¼ çš„å›¾ç‰‡æä¾›ä¸€ä¸ª URL é“¾æ¥ï¼Œä½ å¯ä»¥å°†è¿™ä¸ªé“¾æ¥åˆ†äº«ç»™ä»–äººï¼Œæˆ–è€…åœ¨ç½‘ç«™ã€åšå®¢ã€è®ºå›ç­‰åœ°æ–¹ä½¿ç”¨ï¼Œè®©ä»–äººå¯ä»¥è½»æ¾åœ°æŸ¥çœ‹æˆ–ä¸‹è½½å›¾ç‰‡ã€‚ æ˜“äºç®¡ç†ï¼šè®¸å¤šå›¾åºŠæœåŠ¡æä¾›äº†ç”¨æˆ·å‹å¥½çš„ç•Œé¢å’Œå·¥å…·ï¼Œä½¿å¾—ä¸Šä¼ ã€ç®¡ç†å’Œåˆ†äº«å›¾ç‰‡å˜å¾—éå¸¸ç®€å• è™½ç„¶å›¾åºŠæœåŠ¡æœ‰è®¸å¤šä¼˜åŠ¿ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›æ½œåœ¨çš„ç¼ºç‚¹ï¼Œå¦‚å¯èƒ½çš„éšç§é—®é¢˜ã€æœåŠ¡å•†å¯èƒ½ä¼šå…³é—­æˆ–æ›´æ”¹æœåŠ¡æ¡æ¬¾ã€ä»¥åŠå¯¹å…è´¹ç”¨æˆ·çš„å­˜å‚¨ç©ºé—´æˆ–å¸¦å®½çš„é™åˆ¶ç­‰ã€‚ StepsGithub Repo æ–°å»º Repoï¼Œå¯è§æ€§è®¾ç½®ä¸º Public Gen GitHub Token,åœ¨ Personal access tokens ä¸­å¯é€‰ Fine-grained tokens æˆ– Tokens(classic)ï¼Œå‰è€…å¯¹æƒé™æœ‰æ›´ç»†è‡´çš„åˆ’åˆ†ã€‚ PicGo ä¸‹è½½æº åœ°å€/å®‰è£…æ–¹å¼ GitHub Release https://github.com/Molunerfinn/PicGo/releases è…¾è®¯äº‘ COS https://github.com/Molunerfinn/PicGo/releases å±±ä¸œå¤§å­¦é•œåƒç«™ https://mirrors.sdu.edu.cn/github-release/Molunerfinn_PicGo åœ¨å›¾åºŠè®¾ç½®ä¸­è¿›è¡Œå¦‚ä¸‹é…ç½® è‡ªå®šä¹‰åŸŸåå¯è®¾ç½®ä¸ºhttps://cdn.jsdelivr.net/gh/your-repo-name@master Typoraè¯­è¨€è®¾ç½®ä¸ºä¸­æ–‡ åå¥½-å›¾å½¢ï¼Œè¿›è¡Œå¦‚ä¸‹è®¾ç½® VSCodeä¸‹è½½ PicGo æ’ä»¶ï¼ŒCtrl+Shift+P - Preferences: Open User Settings (JSON)ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½® é»˜è®¤å¿«æ·é”®å¦‚ä¸‹","link":"/Dev/FrontEnd/imageBed/"},{"title":"Linux Commands","text":"æ–‡ä»¶æ“ä½œLinux ç³»ç»Ÿä¸­ï¼Œæ–‡ä»¶æ“ä½œæ˜¯éå¸¸é‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„æ–‡ä»¶æ“ä½œå‘½ä»¤åŠå…¶ä½œç”¨ï¼š ç›®å½•æ“ä½œ ls åˆ—å‡ºç›®å½•å†…å®¹ ä½œç”¨ï¼šæ˜¾ç¤ºæŒ‡å®šç›®å½•ä¸‹çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹åˆ—è¡¨ã€‚ æŸ¥è¯¢æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ä¸ªæ•°ls -A &lt;folder_path&gt; wc -l -rwxrwxrwxä¸­-è¡¨ç¤ºç±»å‹ä¸ºæ™®é€šæ–‡ä»¶ï¼Œè‹¥ä¸ºdåˆ™è¡¨ç¤ºä¸ºç›®å½•ã€‚rwx rwx rwxåˆ†åˆ«è¡¨ç¤ºæ–‡ä»¶æ‰€æœ‰è€…ã€ç»„ç”¨æˆ·ä»¥åŠå…¶å®ƒç”¨æˆ·å¯¹è¯¥æ–‡ä»¶çš„æƒé™ï¼Œç¬¬ä¸€ä¸ªefterklangä¸ºæ–‡ä»¶æ‰€æœ‰è€…ï¼Œç¬¬äºŒä¸ªä¸ºæ–‡ä»¶æ‰€æœ‰è€…æ‰€åœ¨çš„ç»„ï¼Œ1093 è¡¨ç¤ºæ–‡ä»¶å¤§å°(Byte)ï¼Œæ—¶é—´ä¸º last modified timeï¼Œç»“å°¾ä¸º file name 12345678910â•­â”€ïŒƒ Arch ï” m/c/U/2/.c/ î¯Š 0.032s in ï’‰ bash ó°… 8:59 PMâ”” îš¬ ls -l ./total 4-rwxrwxrwx 1 efterklang efterklang 1093 Dec 20 17:02 LICENSEdrwxrwxrwx 1 efterklang efterklang 4096 Jun 9 20:50 backdropsdrwxrwxrwx 1 efterklang efterklang 4096 Apr 26 14:57 colorsdrwxrwxrwx 1 efterklang efterklang 4096 May 31 18:06 configdrwxrwxrwx 1 efterklang efterklang 4096 May 25 16:57 eventsdrwxrwxrwx 1 efterklang efterklang 4096 May 26 10:28 utils-rwxrwxrwx 1 efterklang efterklang 516 May 27 12:19 wezterm.lua cd æ”¹å˜å½“å‰ç›®å½• ä½œç”¨ï¼šåˆ‡æ¢å½“å‰å·¥ä½œç›®å½•åˆ°æŒ‡å®šçš„è·¯å¾„ã€‚ cd ~ åˆ‡æ¢åˆ°ç”¨æˆ·ä¸»ç›®å½• cd / åˆ‡æ¢åˆ°æ ¹ç›®å½• cd .. åˆ‡æ¢åˆ°ä¸Šä¸€çº§ç›®å½• cd - åˆ‡æ¢åˆ°ä¸Šæ¬¡å·¥ä½œç›®å½• ç°ä»£çš„ cd æ›¿æ¢å‘½ä»¤: zoxide,z pwd æ‰“å°å·¥ä½œç›®å½• ä½œç”¨ï¼šæ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•çš„å®Œæ•´è·¯å¾„ã€‚ cp å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½• ä½œç”¨ï¼šå°†æ–‡ä»¶æˆ–ç›®å½•ä»ä¸€ä¸ªä½ç½®å¤åˆ¶åˆ°å¦ä¸€ä¸ªä½ç½®ã€‚ mv ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶ ä½œç”¨ï¼šç§»åŠ¨æ–‡ä»¶æˆ–ç›®å½•åˆ°æ–°çš„ä½ç½®ï¼Œæˆ–è€…é‡å‘½åæ–‡ä»¶æˆ–ç›®å½•ã€‚ é‡å‘½å/ç§»åŠ¨æ–‡ä»¶ mv &lt;old_name&gt; &lt;new_name&gt; mv &lt;old_path&gt; &lt;new_path&gt; å°†æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ç§»åŠ¨åˆ°å¦ä¸€ä¸ªæŒ‡å®šçš„ç›®å½•mv &lt;source_folder&gt;/* &lt;target_folder&gt; rm åˆ é™¤æ–‡ä»¶æˆ–ç›®å½• touch åˆ›å»ºç©ºæ–‡ä»¶æˆ–æ›´æ–°æ–‡ä»¶æ—¶é—´æˆ³ mkdir åˆ›å»ºç›®å½• rmdir åˆ é™¤ç©ºç›®å½• æƒé™è®¾ç½® chmod æ›´æ”¹æ–‡ä»¶æˆ–ç›®å½•æƒé™ chown æ›´æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„æ‰€æœ‰è€… chgrp æ›´æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„ç»„ cat è¿æ¥æ–‡ä»¶å¹¶æ‰“å°åˆ°æ ‡å‡†è¾“å‡º ä½œç”¨ï¼šæ˜¾ç¤ºæ–‡ä»¶çš„å†…å®¹ã€‚ more åˆ†é¡µæ˜¾ç¤ºæ–‡ä»¶å†…å®¹ ä½œç”¨ï¼šåˆ†é¡µæ˜¾ç¤ºæ–‡ä»¶çš„å†…å®¹ï¼Œä¾¿äºæŸ¥çœ‹é•¿æ–‡ä»¶ã€‚ less æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ï¼Œæ”¯æŒå‰åç¿»é¡µ ä½œç”¨ï¼šæ˜¾ç¤ºæ–‡ä»¶çš„å†…å®¹ï¼Œæ”¯æŒå‘å‰å’Œå‘åç¿»é¡µã€‚ head æ˜¾ç¤ºæ–‡ä»¶çš„å¼€å¤´éƒ¨åˆ† ä½œç”¨ï¼šæ˜¾ç¤ºæ–‡ä»¶çš„å‰å‡ è¡Œï¼Œé»˜è®¤æ˜¯å‰ 10 è¡Œã€‚12head filename.txt # æ˜¾ç¤ºæ–‡ä»¶çš„å‰10è¡Œhead -n 20 filename.txt # æ˜¾ç¤ºæ–‡ä»¶çš„å‰20è¡Œ tail æ˜¾ç¤ºæ–‡ä»¶çš„ç»“å°¾éƒ¨åˆ† ä½œç”¨ï¼šæ˜¾ç¤ºæ–‡ä»¶çš„æœ€åå‡ è¡Œï¼Œé»˜è®¤æ˜¯æœ€å 10 è¡Œã€‚123tail filename.txt # æ˜¾ç¤ºæ–‡ä»¶çš„æœ€å10è¡Œtail -n 20 filename.txt # æ˜¾ç¤ºæ–‡ä»¶çš„æœ€å20è¡Œtail -f filename.txt # å®æ—¶æ˜¾ç¤ºæ–‡ä»¶æ–°å¢çš„å†…å®¹ find æœç´¢æ–‡ä»¶ ä½œç”¨ï¼šåœ¨æŒ‡å®šç›®å½•åŠå…¶å­ç›®å½•ä¸‹æœç´¢ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶ã€‚ diff æ¯”è¾ƒæ–‡ä»¶å·®å¼‚ ä½œç”¨ï¼šæ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶æˆ–ç›®å½•çš„å·®å¼‚ã€‚ ln åˆ›å»ºé“¾æ¥ ä½œç”¨ï¼šåˆ›å»ºæ–‡ä»¶æˆ–ç›®å½•çš„ç¡¬é“¾æ¥æˆ–ç¬¦å·é“¾æ¥ã€‚ du ç£ç›˜ä½¿ç”¨æƒ…å†µ ä½œç”¨ï¼šæ˜¾ç¤ºæ–‡ä»¶æˆ–ç›®å½•å ç”¨çš„ç£ç›˜ç©ºé—´ã€‚ df ç£ç›˜ç©ºé—´ä½¿ç”¨æƒ…å†µ ä½œç”¨ï¼šæ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿç£ç›˜ç©ºé—´çš„ä½¿ç”¨æƒ…å†µã€‚ tar æ‰“åŒ…å‹ç¼©æˆ–è§£å‹æ–‡ä»¶ ä½œç”¨ï¼šåˆ›å»ºã€æŸ¥çœ‹æˆ–è§£å‹ç¼© tar åŒ…ã€‚ gzip å‹ç¼©æˆ–è§£å‹æ–‡ä»¶ ä½œç”¨ï¼šä½¿ç”¨ gzip ç¨‹åºå‹ç¼©æˆ–è§£å‹æ–‡ä»¶ã€‚ nohup å‘½ä»¤å¯ä»¥åœ¨é€€å‡º shell åç»§ç»­è¿è¡Œè¿›ç¨‹ï¼Œnohup &lt;command&gt; &amp;ä¾‹å¦‚ nohup python ./train.py &gt;&gt; train.log 2&gt;&amp;1 &amp; ç”¨æˆ·ç®¡ç†ç”¨æˆ·ç™»å½•ç³»ç»Ÿè¶…çº§ç”¨æˆ·çš„ç”¨æˆ·åä¸º rootï¼Œå¯†ç åœ¨å®‰è£…ç³»ç»Ÿæ—¶å·²è®¾å®šï¼Œå½“ç”¨æˆ·æ­£ç¡®åœ°è¾“å…¥ç”¨æˆ·åå’Œå£ä»¤åï¼Œå°±èƒ½åˆæ³•åœ°è¿›å…¥ç³»ç»Ÿã€‚æ™®é€šç”¨æˆ·åœ¨å»ºç«‹äº†æ™®é€šç”¨æˆ·è´¦å·ä»¥åå°±å¯ä»¥è¿›è¡Œç™»å½•äº†ã€‚ su root ä¸´æ—¶åˆ‡æ¢åˆ° root ç”¨æˆ·ï¼Œéœ€è¦è¾“å…¥å¯†ç ï¼Œåˆ‡æ¢åç¯å¢ƒå˜é‡ä¸å˜ï¼Œå–å¾— root çš„éƒ¨åˆ†æƒé™ï¼Œä¸”åªèƒ½ä½¿ç”¨å½“å‰ç”¨æˆ· path è·¯å¾„ä¸­çš„å‘½ä»¤ï¼Œä¸èƒ½ä½¿ç”¨ root ç”¨æˆ· path è·¯å¾„ä¸­çš„ç‹¬æœ‰å‘½ä»¤ su - root åˆ‡æ¢ä¸º root ç”¨æˆ·ï¼Œéœ€è¦è¾“å…¥å¯†ç ï¼Œåˆ‡æ¢åç¯å¢ƒå˜é‡æ”¹å˜ï¼Œå‡ ä¹å¯ä»¥ä¸å—é™åˆ¶çš„åšä»»ä½•äº‹ su - &lt;user_name&gt; åˆ‡æ¢ç”¨æˆ· su - username -c &lt;command&gt;:Execute a command as another user exit/logout é€€å‡ºå½“å‰ç”¨æˆ· è´¦å·ç®¡ç†Linux ç”¨æˆ·å¯¹è´¦å·çš„ç®¡ç†åˆ†ä¸ºï¼šå¢ã€åˆ ã€æ”¹ä¸‰ä¸ªæ–¹é¢ï¼š å¢åŠ æ–°ç”¨æˆ·useradd -c commentï¼ŒæŒ‡å®šä¸€æ®µæ³¨é‡Šæ€§æè¿°ã€‚-d ç›®å½•ï¼ŒæŒ‡å®šç”¨æˆ·ä¸»ç›®å½•ï¼Œå¦‚æœæ­¤ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™åŒæ—¶ä½¿ç”¨-m é€‰é¡¹ï¼Œå¯ä»¥åˆ›å»ºä¸»ç›®å½•ã€‚-g ç”¨æˆ·ç»„ï¼Œç”¨æ¥æŒ‡å®šè¿™ä¸ªç”¨æˆ·é»˜è®¤çš„ç”¨æˆ·ç»„ã€‚-G ç”¨æˆ·ç»„ï¼Œä¸€èˆ¬é…åˆâ€˜-aâ€™æ¥å®Œæˆå‘å…¶å®ƒç»„æ·»åŠ ã€‚-s Shell æ–‡ä»¶ï¼ŒæŒ‡å®šç”¨æˆ·çš„ç™»å½• Shellã€‚-u ç”¨æˆ·å·ï¼ŒæŒ‡å®šç”¨æˆ·çš„ç”¨æˆ·å·ï¼Œå¦‚æœåŒæ—¶æœ‰-o é€‰é¡¹ï¼Œåˆ™å¯ä»¥é‡å¤ä½¿ç”¨å…¶ä»–ç”¨æˆ·çš„æ ‡è¯†å·ã€‚ åˆ é™¤ç”¨æˆ·åˆ é™¤ç”¨æˆ·è´¦å·å°±æ˜¯è¦å°†/etc/passwd ç­‰ç³»ç»Ÿæ–‡ä»¶ä¸­çš„è¯¥ç”¨æˆ·è®°å½•åˆ é™¤ï¼Œå¿…è¦æ—¶è¿˜åˆ é™¤ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚åˆ é™¤ä¸€ä¸ªå·²æœ‰çš„ç”¨æˆ·è´¦å·ä½¿ç”¨ userdel å‘½ä»¤ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼š userdel &lt;option&gt; &lt;user_name&gt;å¸¸ç”¨çš„é€‰é¡¹æ˜¯-rï¼Œå®ƒçš„ä½œç”¨æ˜¯æŠŠç”¨æˆ·çš„ä¸»ç›®å½•ä¸€èµ·åˆ é™¤ã€‚ ä¿®æ”¹ç”¨æˆ· ä½¿ç”¨ usermod å‘½ä»¤ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼šusermod &lt;option&gt; &lt;user_name&gt; å¸¸ç”¨çš„é€‰é¡¹åŒ…æ‹¬-c,-d,-m,-g,-G,-s,-u ä»¥åŠ-o ç­‰ï¼Œè¿™äº›é€‰é¡¹çš„æ„ä¹‰ä¸ useradd å‘½ä»¤ä¸­çš„é€‰é¡¹ä¸€æ ·ï¼Œå¯ä»¥ä¸ºç”¨æˆ·æŒ‡å®šæ–°çš„èµ„æºå€¼ã€‚ä¿®æ”¹ç”¨æˆ·è´¦å·å°±æ˜¯æ ¹æ®å®é™…æƒ…å†µæ›´æ”¹ç”¨æˆ·çš„æœ‰å…³å±æ€§ï¼Œå¦‚ç”¨æˆ·å·ã€ä¸»ç›®å½•ã€ç”¨æˆ·ç»„ã€ç™»å½• Shell ç­‰ã€‚ ç”¨æˆ·æƒé™ç®¡ç†å‘½ä»¤chmod ç”¨äºä¿®æ”¹æ–‡ä»¶çš„è®¿é—®æƒé™ format: chmod &lt;mode&gt; &lt;file&gt; mode: user: u(userï¼Œæ‰€æœ‰è€…),g(groupï¼ŒåŒç»„ç”¨æˆ·),o(otherï¼Œå…¶å®ƒç”¨æˆ·),a(all) operation: +ï¼ˆæ·»åŠ æƒé™ï¼‰ã€-ï¼ˆç§»é™¤æƒé™ï¼‰æˆ– =ï¼ˆè®¾ç½®æƒé™ï¼‰ permission: r(read)ã€w(write)ã€x(execute)ã€s(setuidï¼Œè®¾ç½®ç”¨æˆ· ID)ã€t(setgidï¼Œè®¾ç½®ç»„ ID) Regular Expressiongrep æ˜¯ä¸€ç§å¼ºå¤§çš„æ–‡æœ¬æœç´¢å·¥å…·ï¼Œå®ƒå…è®¸ç”¨æˆ·åœ¨æ–‡ä»¶ä¸­æœç´¢åŒ¹é…ç‰¹å®šæ¨¡å¼çš„è¡Œã€‚è¿™é‡Œæœ‰ä¸€äº› grep çš„ä½¿ç”¨æ¡ˆä¾‹ï¼šRIPgrep GUIDE å‚æ•° i: å¿½ç•¥å¤§å°å†™ ignore n: æ˜¾ç¤ºè¡Œå· number v: åå‘åŒ¹é… invert r/R: é€’å½’æœç´¢ï¼Œå³åœ¨ç›®å½•åŠå…¶æ‰€æœ‰å­ç›®å½•ä¸­æœç´¢æ–‡ä»¶(ps:ripgrep é»˜è®¤æ”¯æŒé€’å½’æœç´¢) recursive R æ”¯æŒè½¯é“¾æ¥çš„è§£å¼•ç”¨ åŸºæœ¬æœç´¢ï¼šåœ¨æ–‡ä»¶ä¸­æœç´¢ç‰¹å®šçš„æ–‡æœ¬ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³åœ¨æ–‡ä»¶ example.txt ä¸­æœç´¢å•è¯ â€œhelloâ€ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š 1grep &quot;hello&quot; example.txt é€’å½’æœç´¢ï¼šgrep å¯ä»¥é€’å½’åœ°åœ¨ç›®å½•ä¸­æœç´¢æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³åœ¨å½“å‰ç›®å½•åŠå…¶æ‰€æœ‰å­ç›®å½•ä¸­æœç´¢å•è¯ â€œhelloâ€ï¼Œä½ å¯ä»¥ä½¿ç”¨ -r æˆ– -R é€‰é¡¹ï¼š 1grep -r &quot;hello&quot; . åå‘åŒ¹é…ï¼šgrep è¿˜å¯ä»¥æ‰¾å‡ºä¸åŒ¹é…ç‰¹å®šæ¨¡å¼çš„è¡Œã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤ä¼šæ˜¾ç¤º example.txt ä¸­æ‰€æœ‰ä¸åŒ…å« â€œhelloâ€ çš„è¡Œï¼š 1grep -v &quot;hello&quot; example.txt æŒ‡å®šå¼€å¤´/ç»“å°¾ 12grep &quot;^May&quot; dairy.md # åŒ¹é…ä»¥Mayå¼€å¤´çš„è¡Œgrep &quot;hello$&quot; example.txt # åŒ¹é…ä»¥helloç»“å°¾çš„è¡Œ å¿«æ·é”®123456789Ctrl + L clearCtrl + K åˆ é™¤ä»å…‰æ ‡ä½ç½®åˆ°è¡Œå°¾çš„å†…å®¹Ctrl + U åˆ é™¤ä»å…‰æ ‡ä½ç½®åˆ°è¡Œé¦–çš„å†…å®¹Ctrl + Aï¼šç§»åŠ¨å…‰æ ‡åˆ°è¡Œé¦–Ctrl + Eï¼šç§»åŠ¨å…‰æ ‡åˆ°è¡Œå°¾Ctrl + Rï¼šæœç´¢å†å²å‘½ä»¤Ctrl + Cï¼šç»ˆæ­¢è¿›ç¨‹Ctrl + Dï¼šé€€å‡º shellTabï¼šè‡ªåŠ¨è¡¥å…¨ æ’ä»¶ batA cat clone with syntax highlighting and Git integration. bottomYet another cross-platform graphical process/system monitor. btopA monitor of resources curlieThe power of curl, the ease of use of httpie. fdA simple, fast and user-friendly alternative to find. fzfğŸŒ¸ A command-line fuzzy finder gpingPing, but with a graph zoxideA smarter cd command. Supports all major shells. ripgrepripgrep recursively searches directories for a regex pattern while respecting your gitignore [tldr] Terminal &amp; ShellTerminal:Weztermï¼ŒAlacrittyï¼ŒKittyï¼ŒWindows Terminal etc.Shell:Nushell,Fish,Powershell,zsh etc.","link":"/Dev/Linux/LinuxCmds/"},{"title":"WSLè¿ç§»è‡³å…¶å®ƒç›˜ç¬¦","text":"WSL Migration Manual :12345678910111213141516171819202122Usage: wsl.exe [Argument] [Options...] [CommandLine]Arguments for managing distributions in Windows Subsystem for Linux: --export &lt;Distro&gt; &lt;FileName&gt; [Options] Exports the distribution to a tar file. The filename can be - for stdout. Options: --vhd Specifies that the distribution should be exported as a .vhdx file. --import &lt;Distro&gt; &lt;InstallLocation&gt; &lt;FileName&gt; [Options] Imports the specified tar file as a new distribution. The filename can be - for stdin. Options: --version &lt;Version&gt; Specifies the version to use for the new distribution. --vhd Specifies that the provided file is a .vhdx file, not a tar file. This operation makes a copy of the .vhdx file at the specified install location. Commands wsl -l -v æŸ¥çœ‹WSL Distros wsl --export &lt;Distro&gt; &lt;FileName&gt; [Options]å°†è¦è¿ç§»çš„WSL Distroå¯¼å‡ºä¸ºtar wsl --unregister &lt;Distro&gt;å¸è½½WSL Distro wsl --import &lt;Distro&gt; &lt;InstallLocation&gt; &lt;FileName&gt; [Options]å°†tarå¯¼å…¥åˆ°æ–°çš„WSL Distro wsl --set-default &lt;UserName&gt;ä¸ºWSL Distroè®¾ç½®é»˜è®¤ç”¨æˆ· wsl -d &lt;Distro&gt;Linux,å¯åŠ¨ğŸ˜ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657# show distributionsâ”Œâ”€ î˜ª windows î‚° ï” î˜—/Desktop î‚° î¯Š 0.081s ï’¼ RAM 11/13GB ó°… 5:35 PM Fri îŒ½ 33Â°Câ”” îš¬ wsl -l -v NAME STATE VERSION* docker-desktop-data Stopped 2 Ubuntu-24.04 Running 2 docker-desktop Stopped 2 Arch Running 2# export to tarâ”Œâ”€ î˜ª windows î‚° ï” î˜—/Desktop î‚° î¯Š 0.046s ï’¼ RAM 11/13GB ó°… 5:35 PM Friâ”” îš¬ wsl --export Arch E:\\wsl\\Arch.tarExport in progress, this may take a few minutes.The operation completed successfully.# unregister Ubuntuâ”Œâ”€ î˜ª windows î‚° ï” î˜—/Desktop î‚° î¯Š 58.532s ï’¼ RAM 9/13GB ó°… 5:41 PM Friâ”” îš¬ wsl --unregister Ubuntu-24.04Unregistering.The operation completed successfully.# import from tarâ”Œâ”€ î˜ª windows î‚° ï” î˜—/Desktop î‚° î¯Š 0.145s ï’¼ RAM 10/13GB ó°… 5:44 PM Friâ”” îš¬ wsl --import Ubuntu e:\\wsl\\Arch e:\\wsl\\Arch.tarImport in progress, this may take a few minutes.The operation completed successfully.# set default userâ”Œâ”€ î˜ª windows î‚° ï” î˜—/Desktop î‚° î¯Š 21.622s ï’¼ RAM 12/13GB ó°… 6:00 PM Friâ”” îš¬ Arch config --default-user efterklang# launchâ”Œâ”€ î˜ª windows î‚° ï” î˜—/Desktop î‚° î¯Š 0.182s ï’¼ RAM 10/13GB ó°… 6:02 PM Friâ”” îš¬ wsl -d Arch ff gjx@Efterklang I use Arch BTW(â—Ë‡âˆ€Ë‡â—) â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â–„ î˜ª OS âœ Arch Linux 20240101.0.204074 x86_64 â–Ÿâ–ˆâ–™ â”‚ â”œï€“ Kernel âœ Linux 5.15.146.1-microsoft-standard-WSL2 â–Ÿâ–ˆâ–ˆâ–ˆâ–™ â”‚ â”œó°– Packages âœ 190 (pacman) â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™ â”‚ â””ï„  Shell âœ fish 3.7.1 â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™ ó°§¨ LM âœ login (TTY) â–‚â–”â–€â–œâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™ â”‚ â”œï’‰ Terminal âœ WezTerm 20240203-110809-5046fc22 â–Ÿâ–ˆâ–ˆâ–…â–‚â–â–œâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™ ï„‰ PC âœ Windows Subsystem for Linux - Arch â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™ â”‚ â”œï’¼ CPU âœ AMD Ryzen 7 5800H (16) @ 3.19 GHz â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™ â”‚ â”œó°› GPU âœ NVIDIA GeForce RTX 3060 Laptop GPU (5.87 GiB) [Discrete] â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™ â”‚ â”œó°› GPU âœ AMD Radeon(TM) Graphics (1.98 GiB) [Integrated] â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™ â”‚ â”œó°‹Š Disk âœ 2.09 GiB / 1006.85 GiB (0%) - ext4 â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–›â–€â–€â–œâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™ â”‚ â”œó°‹Š Disk âœ 165.95 GiB / 200.00 GiB (83%) - 9p â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–› â–œâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™ â”‚ â”œó°‹Š Disk âœ 101.74 GiB / 275.69 GiB (37%) - 9p â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™ â”‚ â”œó°‹Š Disk âœ 166.97 GiB / 475.45 GiB (35%) - 9p â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–†â–…â–„â–ƒâ–‚ â”‚ â”œï‹› Memory âœ 793.43 MiB / 6.71 GiB (12%) â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–› â–œâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™ â”‚ â”œó°“¡ Swap âœ 0 B / 2.00 GiB (0%) â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€â–€ â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™ â”‚ â”œó°… Uptime âœ 7 seconds â–Ÿâ–ˆâ–ˆâ–ˆâ–€â–˜ â–â–€â–ˆâ–ˆâ–ˆâ–™ ó°©Ÿ Local IP âœ 113.54.240.64/19 â–Ÿâ–›â–€ â–€â–œâ–™ ó°©Ÿ Public IP âœ 89.116.88.203 (Tokyo, JP) â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â— â— â— â— â— â— â— â—","link":"/Dev/Linux/WSL/"},{"title":"Java Stream","text":"OverviewJava 8 å¼•å…¥ç”¨äºæ“ä½œé›†åˆ(Collection)çš„ Stream API,å®ƒå°†å…ƒç´ é›†åˆæŠ½è±¡ä¸ºæµ(stream),å…ƒç´ å¦‚åŒæ°´æµä¸€æ ·åœ¨ç®¡é“(pipeline)ä¸­ä¼ è¾“,æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°å¯¹æµè¿›è¡Œå„ç§æ“ä½œ(Operation),æœ€ç»ˆå¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„ç»“æœ,æˆ‘ä»¬å°†è¿™ç§æ“ä½œçš„æ–¹å¼ç§°ä¸ºæµå¼å¤„ç†(stream processing) æ“ä½œåˆ†ç±»: Intermediate operations: è¿”å›ä¸€ä¸ªæ–°çš„ Stream,å¯è¿›è¡Œé“¾å¼æ“ä½œ Terminal operations: è¿”å›ä¸€ä¸ª result æˆ– side-effect,åªèƒ½æ”¾åœ¨æœ€å å¦‚ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ Stream å¯¹ Collection è¿›è¡Œæ“ä½œçš„ä»£ç ç¤ºä¾‹,å…¶ä¸­filterä¸ºä¸­é—´æ“ä½œ,forEachä¸ºç»ˆæ­¢æ“ä½œ 12345678910public static void main(String[] args) { List&lt;String&gt; nameList = Arrays.asList(&quot;Valerie&quot;, &quot;Jack&quot;, &quot;John&quot;, &quot;Jerry&quot;, &quot;Jesus&quot;); nameList.stream() .filter(name -&gt; name.startsWith(&quot;J&quot;)) .filter(name -&gt; name.length() == 4) .forEach(System.out::println);}[OUTPUT]JackJohn Stream ç‰¹ç‚¹: Lazy Evaluation: ä¸­é—´æ“ä½œä¸ä¼šç«‹å³æ‰§è¡Œ,åªæœ‰åœ¨é‡åˆ°ç»ˆæ­¢æ“ä½œæ—¶æµæ‰å¼€å§‹çœŸæ­£çš„éå†,å³ä¸€æ¬¡éå†ä¸­æ‰§è¡Œå¤šä¸ªæ“ä½œ(æ˜ å°„,è¿‡æ»¤ç­‰),è¿™ç§ç‰¹æ€§ç§°ä¸ºæƒ°æ€§æ±‚å€¼(lazy evaluation),è¿™ç§ç‰¹æ€§ä½¿å¾— Stream API å¯ä»¥è¿›è¡Œæ›´é«˜æ•ˆçš„æ“ä½œ Internal Iteration: ä¼ ç»Ÿçš„é›†åˆæ“ä½œæ˜¯å¤–éƒ¨è¿­ä»£(external iteration),å³ç”¨æˆ·éœ€è¦æ‰‹åŠ¨è¿­ä»£é›†åˆä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ,è€Œ Stream API æ˜¯å†…éƒ¨è¿­ä»£(internal iteration),ç”¨æˆ·åªéœ€è¦å‘Šè¯‰ Stream API éœ€è¦å¯¹é›†åˆè¿›è¡Œä»€ä¹ˆæ“ä½œ,è€Œä¸éœ€è¦å…³å¿ƒå…·ä½“çš„è¿­ä»£è¿‡ç¨‹ Immutability: Stream ä¸ä¼šæ”¹å˜åŸæœ‰çš„æ•°æ®ç»“æ„,å®ƒåªæ˜¯å¯¹åŸæœ‰çš„æ•°æ®è¿›è¡Œæ“ä½œ,å¹¶è¿”å›ä¸€ä¸ªæ–°çš„ Stream Parallel Processing : JDK æºç æ³¨è§£ä¸­æåˆ° Stream pipelines may execute either sequentially or in parallel, å³ Stream æ—¢å¯è¢«é¡ºåºå¤„ç†,ä¹Ÿå¯å¹¶è¡Œå¤„ç†,ä»è€Œå……åˆ†åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨çš„ä¼˜åŠ¿ Methods Method æ–¹æ³•ä½œç”¨ Operation ç±»åˆ« count è®¡æ•° terminal forEach è¿­ä»£å¤„ç† terminal reduce å½’çº¦ terminal collect æ”¶é›† terminal findAny æŸ¥æ‰¾ terminal anyMatch åŒ¹é… terminal filter è¿‡æ»¤ intermediate sorted æ’åº intermediate distinct å»é‡ intermediate limit å–ç”¨å‰å‡ ä¸ª intermediate skip è·³è¿‡å‰å‡ ä¸ª intermediate map æ˜ å°„ intermediate concat æ‹¼æ¥ intermediate To perform a computation, stream operations are composed into a stream pipeline. A stream pipeline consists of a source (which might be an array, a collection, a generator function, an I/O channel, etc), zero or more intermediate operations (which transform a stream into another stream, such as filter(Predicate)), and a terminal operation (which produces a result or side-effect, such as count() or forEach(Consumer)). Streams are lazy; computation on the source data is only performed when the terminal operation is initiated, and source elements are consumed only as needed. åˆ›å»º Stream123456789101112// ä½¿ç”¨ Collection çš„ stream()å’Œ parallelStream()æ–¹æ³•List&lt;Integer&gt; list = Arrays.asList(1, 2, 3);Stream&lt;Integer&gt; stream1 = list.stream();Stream&lt;Integer&gt; stream2 = list.parallelStream();// ä½¿ç”¨ Arrays çš„ stream() æ–¹æ³•Stream&lt;Integer&gt; stream3 = Arrays.stream(new Integer[] {1, 2, 3});// ä½¿ç”¨ Stream ç±»çš„é™æ€æ–¹æ³• of()ã€iterate()ã€generate()Stream&lt;Integer&gt; stream4 = Stream.of(1, 2, 3); // of() å†…éƒ¨è°ƒç”¨çš„æ˜¯ Arrays.stream() methodStream&lt;Double&gt; stream5 = Stream.iterate(10.0,num -&gt; num &gt; 0.5, num -&gt; num / 2);stream5.forEach(System.out::println);// 10.0 5.0 2.5 1.25 0.625 0.3125Stream&lt;Double&gt; stream6 = Stream.generate(Math::random).limit(5);stream6.forEach(System.out::println);// 5 ä¸ªéšæœºå°æ•° Methods åˆ†æfilterStream&lt;T&gt; filter(Predicate&lt;? super T&gt; predicate)Returns a stream consisting of the elements of this stream that match the given predicate. filter æ–¹æ³•æ¥å—ä¸€ä¸ª Predicate å‡½æ•°å¼æ¥å£å®ä¾‹[functionalInterface.md],ç”¨äºè¿‡æ»¤æµä¸­çš„å…ƒç´ ,è¿”å›ä¸€ä¸ªæ–°çš„ stream,å…¶ä¸­åŒ…å«ç¬¦åˆæ¡ä»¶çš„å…ƒç´  Predicate æ˜¯ä¸€ä¸ª Java 8 æ–°å¢çš„å‡½æ•°å¼æ¥å£,å®ƒæ¥å—ä¸€ä¸ªå‚æ•°å¹¶è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼,æˆ‘ä»¬é€šå¸¸ä½¿ç”¨ Lambda è¡¨è¾¾å¼æ¥åˆ›å»º Predicate å®ä¾‹ 1234567// Commonly used methods in Predicatestream.filter(element -&gt; element.length() &gt; 5)stream.filter(element -&gt; element.startsWith(&quot;J&quot;))stream.filter(element -&gt; element.endsWith(&quot;y&quot;))stream.filter(element -&gt; element.equals(&quot;Jerry&quot;))stream.filter(element -&gt; element.contains(&quot;e&quot;))stream.filter(element -&gt; element.matches(&quot;.*[aeiou].*&quot;)) forEach,find,matchStream æ”¯æŒç±»ä¼¼äº Collection çš„éå†ä»¥åŠæŸ¥è¯¢çš„æ“ä½œ,éœ€è¦æ³¨æ„çš„æ˜¯,Stream ä¸­çš„å…ƒç´ æ˜¯ä»¥Optionalç±»å‹å­˜åœ¨çš„Traverse void forEach(Consumer&lt;? super T&gt; action)forEach æ¥å—ä¸€ä¸ª Consumer å‡½æ•°å¼æ¥å£,ç”¨äºéå†æµä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ,å¹¶å¯¹å…¶è¿›è¡Œæ“ä½œConsumer æ˜¯ä¸€ä¸ª Java 8 æ–°å¢çš„å‡½æ•°å¼æ¥å£,å®ƒæ¥å—ä¸€ä¸ªå‚æ•°,æ— è¿”å›å€¼,ä¾‹å¦‚System.out::println; Find Optional&lt;T&gt; findFirst()Returns an Optional describing the first element of this stream, or an empty Optional if the stream is empty. If the stream has no encounter order, then any element may be returned. Optional&lt;T&gt; findAny()Returns an Optional describing the first element of this stream, or an empty Optional if the stream is empty. If the stream has no encounter order, then any element may be returned. Match boolean anyMatch(Predicate&lt;? super T&gt; predicate)åªè¦æœ‰ä¸€ä¸ªå…ƒç´ åŒ¹é…ä¼ å…¥çš„æ¡ä»¶ï¼Œå°±è¿”å› true boolean allMatch(Predicate&lt;? super T&gt; predicate)æ‰€æœ‰å…ƒç´ éƒ½åŒ¹é…ä¼ å…¥çš„æ¡ä»¶ï¼Œæ‰è¿”å› true boolean noneMatch(Predicate&lt;? super T&gt; predicate)æ‰€æœ‰å…ƒç´ éƒ½ä¸åŒ¹é…ä¼ å…¥çš„æ¡ä»¶ï¼Œæ‰è¿”å› true 12345678//forEachlist.stream().forEach(System.out::println);// FindOptional&lt;String&gt; first = list.stream().findFirst();Optional&lt;String&gt; any = list.stream().findAny();// Matchboolean isExist = list.stream().anyMatch(element -&gt; element.length() &gt; 5);boolean isAllMatch = list.stream().allMatch(element -&gt; element.startsWith(&quot;J&quot;)); map,flatMapmap æ„ä¸ºæ˜ å°„,å¯å°†ä¸€ä¸ª Stream ä¸­çš„å…ƒç´ æ˜ å°„æˆå¦ä¸€ä¸ª Stream,å¦‚ä¸‹ä»£ç å°†ä¸€ä¸ª String ç±»å‹çš„ Stream æ˜ å°„æˆä¸€ä¸ª Integer ç±»å‹çš„ Stream &lt;R&gt; Stream&lt;R&gt; map(Function&lt;? super T,? extends R&gt; mapper)Returns a stream consisting of the results of applying the given function to the elements of this stream. &lt;R&gt; Stream&lt;R&gt; flatMap(Function&lt;? super T,? extends Stream&lt;? extends R&gt;&gt; mapper)Returns a stream consisting of the results of replacing each element of this stream with the contents of a mapped stream produced by applying the provided mapping function to each element. Each mapped stream is closed after its contents have been placed into this stream. (If a mapped stream is null an empty stream is used, instead.) mapæ–¹æ³•æ¥å—ä¸€ä¸ªå‡½æ•°å¼æ¥å£å®ä¾‹mapper,æ ¹æ® mapper å°†æµä¸­çš„å…ƒç´ æ˜ å°„æˆæ–°çš„å…ƒç´ ,è¿”å›ä¸€ä¸ªæ–°çš„stream,å…¶ä¸­åŒ…å«æ˜ å°„åçš„å…ƒç´  flatMapæ–¹æ³•æ¥å—ä¸€ä¸ªå‡½æ•°å¼æ¥å£å®ä¾‹mapper ,ç”¨äºå°†æµä¸­çš„å…ƒç´ æ˜ å°„æˆæµ,å¹¶å°†æ˜ å°„åçš„æµæ‰å¹³åŒ–,å³å°†å¤šä¸ªæµè¿æ¥æˆä¸€ä¸ªæµ,è¿”å›æ‹¼æ¥åçš„ stream 123456789101112131415161718192021222324252627282930313233343536373839404142434445// mapimport java.util.Arrays;import java.util.List;public class Main { public static void main(String[] args) { List&lt;String&gt; nameList = Arrays.asList(&quot;Valerie&quot;, &quot;Tom&quot;); nameList.stream() .map(String::toUpperCase) .map(name -&gt; &quot;Hello, &quot; + name) .forEach(System.out::println); nameList.stream() .map(String::toUpperCase) .flatMap((String name) -&gt; Arrays.stream(name.split(&quot;&quot;))) .forEach(System.out::println); }}[OUTPUT]Hello, VALERIEHello, JACKHello, JOHNHello, TOMHello, JERRYHello, JESUS// flatMapimport java.util.Arrays;import java.util.List;import java.util.stream.Collectors;public class Main { public static void main(String[] args) { // ç»™å®šä¸¤ä¸ªæ•°å­—åˆ—è¡¨ è·å–æ‰€æœ‰çš„æ•°å¯¹ List&lt;Integer&gt; numbers1 = Arrays.asList(1, 2, 3); List&lt;Integer&gt; numbers2 = Arrays.asList(3, 4); // numbers2.stream().map(y -&gt; new int[] { x, y })è¿”å›Stream&lt;int[]&gt;,flatMapå°†æ¯ä¸ªxå¯¹åº”çš„Stream&lt;int[]&gt;è¿æ¥ List&lt;int[]&gt; pairs = numbers1.stream().flatMap(x -&gt; numbers2.stream().map(y -&gt; new int[] { x, y })) .collect(Collectors.toList()); for (int[] pair : pairs) { System.out.print(Arrays.toString(pair)); } }}[OUTPUT][1, 3][1, 4][2, 3][2, 4][3, 3][3, 4] reducereduce æ„ä¸ºå½’çº¦,é¡¾åæ€ä¹‰ï¼Œæ˜¯æŠŠä¸€ä¸ªæµç¼©å‡æˆä¸€ä¸ªå€¼ï¼Œèƒ½å®ç°å¯¹é›†åˆæ±‚å’Œã€æ±‚ä¹˜ç§¯å’Œæ±‚æœ€å€¼æ“ä½œã€‚ Optional&lt;T&gt; reduce(BinaryOperator&lt;T&gt; accumulator)æ— åˆå§‹å€¼ï¼Œè¿”å›ä¸€ä¸ª Optional,å‚æ•°ä¸ºä¸€ä¸ª BinaryOperator å‡½æ•°å¼æ¥å£å®ä¾‹,ç”¨äºå°†æµä¸­çš„å…ƒç´ ä¸¤ä¸¤ç»“åˆPerforms a reduction on the elements of this stream, using an associative accumulation function, and returns an Optional describing the reduced value, if any.Parameters: accumulator - an associative, non-interfering, stateless function for combining two values Returns:an Optional describing the result of the reduction T reduce(T identity, BinaryOperator&lt;T&gt; accumulator)æœ‰åˆå§‹å€¼ï¼Œè¿”å›ç±»å‹ä¸åˆå§‹å€¼çš„ç±»å‹ä¸€è‡´,å‚æ•°ä¸ºåˆå§‹å€¼å’Œä¸€ä¸ª BinaryOperator å‡½æ•°å¼æ¥å£å®ä¾‹ &lt;U&gt; U reduce(U identity, BiFunction&lt;U,? super T,U&gt; accumulator, BinaryOperator&lt;U&gt; combiner) Parameters: identity the identity value for the combiner function accumulator an associative, non-interfering, stateless function for incorporating an additional element into a result combiner an associative, non-interfering, stateless function for combining two values, which must be compatible with the accumulator function Returns:the result of the reduction Associativeï¼ˆå¯ç»“åˆçš„ï¼‰ï¼šè¿™æ„å‘³ç€ç´¯ç§¯å™¨å‡½æ•°åœ¨å¤„ç†å¤šä¸ªå€¼æ—¶ï¼Œå…¶æ“ä½œçš„é¡ºåºä¸å½±å“æœ€ç»ˆç»“æœã€‚å³æ— è®ºå€¼æ˜¯å¦‚ä½•ç»„åˆçš„ï¼Œç´¯ç§¯å™¨å‡½æ•°æ€»æ˜¯äº§ç”Ÿç›¸åŒçš„ç»“æœã€‚ä¾‹å¦‚ï¼ŒåŠ æ³•å’Œä¹˜æ³•éƒ½æ˜¯å¯ç»“åˆçš„æ“ä½œã€‚Non-interferingï¼ˆä¸å¹²æ‰°çš„ï¼‰ï¼šç´¯ç§¯å™¨å‡½æ•°åœ¨å¤„ç†å€¼æ—¶ä¸ä¼šæ”¹å˜è¿™äº›å€¼çš„çŠ¶æ€ã€‚å®ƒåªæ˜¯ç®€å•åœ°å°†å€¼ç»„åˆèµ·æ¥ï¼Œè€Œä¸å½±å“åŸå§‹å€¼ã€‚Statelessï¼ˆæ— çŠ¶æ€çš„ï¼‰ï¼šç´¯ç§¯å™¨å‡½æ•°ä¸ä¾èµ–äºæˆ–ä¿®æ”¹ä»»ä½•å¤–éƒ¨çŠ¶æ€ã€‚å®ƒåªæ ¹æ®ä¼ å…¥çš„å‚æ•°æ¥è®¡ç®—ç»“æœï¼Œä¸æ¶‰åŠä»»ä½•å¤–éƒ¨çš„ã€å¯å˜çš„æˆ–å…¨å±€çš„çŠ¶æ€ã€‚ 123456789101112131415161718// æ±‚æ‰€æœ‰å‘˜å·¥çš„å·¥èµ„ä¹‹å’Œã€æœ€é«˜å·¥èµ„// æ±‚å·¥èµ„ä¹‹å’Œæ–¹æ³•1ï¼šStream&lt;Person&gt; -&gt; Stream&lt;Integer&gt; -&gt; Optional&lt;Integer&gt;Optional&lt;Integer&gt; sumSalary = personList.stream().map(Person::getSalary).reduce(Integer::sum);// æ±‚å·¥èµ„ä¹‹å’Œæ–¹æ³•2ï¼šInteger sumSalary2 = personList.stream().reduce(0, (sum, p) -&gt; sum += p.getSalary(), Integer::sum);// æ±‚æœ€é«˜å·¥èµ„æ–¹æ³•1ï¼šStream&lt;Person&gt; -&gt; Stream&lt;Integer&gt; -&gt; IntegerInteger maxSalary1 = personList.stream().map(Person::getSalary).reduce(Integer::max).get();// æ±‚æœ€é«˜å·¥èµ„æ–¹æ³•2ï¼šInteger maxSalary2 = personList.stream().reduce(0, (max, p) -&gt; max &gt; p.getSalary() ? max : p.getSalary(), (max1, max2) -&gt; max1 &gt; max2 ? max1 : max2);// æ±‚æœ€é«˜å·¥èµ„æ–¹æ³•3ï¼šInteger maxSalary3 = personList.stream().reduce(0, (max, p) -&gt; max &gt; p.getSalary() ? max : p.getSalary(), Integer::max); collectstream()æ–¹æ³•å¯ä»¥å°†é›†åˆ,æ•°ç»„è½¬æ¢ä¸º Stream,è€Œcollect()æ–¹æ³•åˆ™å¯ä»¥å°† Stream è½¬æ¢ä¸ºé›†åˆ 123String[] strArr = list.stream().toArray(String[]::new);List&lt;Integer&gt; strLengthList = list.stream().map(String::length).collect(Collectors.toList());List&lt;String&gt; strList = list.stream().collect(Collectors.toCollection(ArrayList::new)); count,max,minå¦‚ä¸‹æ–¹æ³•å‡ä¸º terminal operation long count()Returns the count of elements in this stream. Optional&lt;T&gt; max(Comparator&lt;? super T&gt; comparator)Returns the maximum element of this stream according to the provided Comparator. Optional&lt;T&gt; min(Comparator&lt;? super T&gt; comparator)Returns the minimum element of this stream according to the provided Comparator. RefStream iterateoracle docsJava8 æ–°ç‰¹æ€§ä¹‹ Stream æµï¼ˆå«å…·ä½“æ¡ˆä¾‹ï¼‰ç”±æµ…å…¥æ·±ä½“éªŒ Stream æµï¼ˆé™„å¸¦æ•™ç¨‹ï¼‰Java 8 Stream å’Œ Optional: å®è·µæŒ‡å—Reducing a Stream","link":"/Dev/Java/Java%20Stream/"},{"title":"Java Evaluation Strategy","text":"åŸºç¡€æ¦‚å¿µParameter: å½¢å¼å‚æ•°,æ˜¯åœ¨å®šä¹‰å‡½æ•°åå’Œå‡½æ•°ä½“çš„æ—¶å€™ä½¿ç”¨çš„å‚æ•°,ç›®çš„æ˜¯ç”¨æ¥æ¥æ”¶è°ƒç”¨è¯¥å‡½æ•°æ—¶ä¼ å…¥çš„å‚æ•°ã€‚Argument: å®é™…å‚æ•°,åœ¨è°ƒç”¨æœ‰å‚å‡½æ•°æ—¶ï¼Œä¸»è°ƒå‡½æ•°å’Œè¢«è°ƒå‡½æ•°ä¹‹é—´æœ‰æ•°æ®ä¼ é€’å…³ç³»ã€‚åœ¨ä¸»è°ƒå‡½æ•°ä¸­è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå‡½æ•°ååé¢æ‹¬å·ä¸­çš„å‚æ•°ç§°ä¸ºâ€œå®é™…å‚æ•°â€Pass By Value: å€¼ä¼ é€’,æ˜¯æŒ‡åœ¨è°ƒç”¨å‡½æ•°æ—¶å°†å®é™…å‚æ•°å¤åˆ¶ä¸€ä»½ä¼ é€’åˆ°å‡½æ•°ä¸­,è¿™æ ·åœ¨å‡½æ•°ä¸­å¦‚æœå¯¹å‚æ•°è¿›è¡Œä¿®æ”¹,å°†ä¸ä¼šå½±å“åˆ°å®é™…å‚æ•°ã€‚ In Pass by value, the function is called by directly passing the value of the variable as an argument. So any changes made inside the function do not affect the original value. In Pass by value, parameters passed as arguments create their own copy. So any changes made inside the function are made to the copied value not to the original value Pass by Reference: å¼•ç”¨ä¼ é€’,æ˜¯æŒ‡åœ¨è°ƒç”¨å‡½æ•°æ—¶å°†å®é™…å‚æ•°çš„åœ°å€ç›´æ¥ä¼ é€’åˆ°å‡½æ•°ä¸­,é‚£ä¹ˆåœ¨å‡½æ•°ä¸­å¯¹å‚æ•°æ‰€è¿›è¡Œçš„ä¿®æ”¹,å°†å½±å“åˆ°å®é™…å‚æ•°ã€‚ In Pass by Reference, Function is called by directly passing the reference/address of the variable as an argument. So changing the value inside the function also change the original value. In JavaScript array and Object follows pass by reference property. In Pass by reference, parameters passed as an arguments does not create its own copy, it refers to the original value so changes made inside function affect the original value. Call by value å’Œ call by reference çš„é‡è¦åŒºåˆ«åœ¨äºï¼Œcall by value æ˜¯å°†å®é™…å‚æ•°çš„å‰¯æœ¬ä¼ é€’ç»™å‡½æ•°ï¼Œè€Œ call by reference æ˜¯å°†å®é™…å‚æ•°çš„åœ°å€ä¼ é€’ç»™å‡½æ•°ã€‚åœ¨ call by value ä¸­ï¼Œå‡½æ•°å¯¹å‚æ•°çš„ä¿®æ”¹ä¸ä¼šå½±å“åˆ°å®é™…å‚æ•°ï¼Œè€Œåœ¨ call by reference ä¸­ï¼Œå‡½æ•°å¯¹å‚æ•°çš„ä¿®æ”¹ä¼šå½±å“åˆ°å®é™…å‚æ•°ã€‚ åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œæ±‚å€¼ç­–ç•¥ï¼ˆè‹±è¯­ï¼šEvaluation strategyï¼‰æ˜¯ç¡®å®šç¼–ç¨‹è¯­è¨€ä¸­è¡¨è¾¾å¼çš„æ±‚å€¼çš„ä¸€ç»„ï¼ˆé€šå¸¸ç¡®å®šæ€§çš„ï¼‰è§„åˆ™ã€‚é‡ç‚¹å…¸å‹çš„ä½äºå‡½æ•°æˆ–ç®—å­ä¸Šâ€”â€”æ±‚å€¼ç­–ç•¥å®šä¹‰ä½•æ—¶å’Œä»¥ä½•ç§æ¬¡åºæ±‚å€¼ç»™å‡½æ•°çš„å®é™…å‚æ•°ï¼Œä»€ä¹ˆæ—¶å€™æŠŠå®ƒä»¬ä»£æ¢å…¥å‡½æ•°ï¼Œå’Œä»£æ¢ä»¥ä½•ç§å½¢å¼å‘ç”Ÿã€‚ç»å¸¸ä½¿ç”¨ç”¨æ¥ç ”ç©¶å‡½æ•°çš„å½¢å¼ç³»ç»Ÿ Î» æ¼”ç®—æ¥å»ºæ¨¡æ±‚å€¼ç­–ç•¥ï¼Œè¿™é‡Œå®ƒä»¬é€šå¸¸å«åšå½’çº¦ç­–ç•¥ã€‚æ±‚å€¼ç­–ç•¥åˆ†ä¸ºä¸¤å¤§åŸºæœ¬ç±»ï¼Œä¸¥æ ¼çš„å’Œéä¸¥æ ¼çš„ï¼ŒåŸºäºå¦‚ä½•å¤„ç†ç»™å‡½æ•°çš„å®é™…å‚æ•°from wikipedia Java ä¸­çš„å‚æ•°ä¼ é€’é‚£ä¹ˆä¸ºä»€ä¹ˆåœ¨ Java ä¸­åªæœ‰ call by value å‘¢ï¼Ÿ è¿™ä¸»è¦æ˜¯å› ä¸º Java ä¸­çš„æ‰€æœ‰å‚æ•°ä¼ é€’éƒ½æ˜¯é€šè¿‡å€¼ä¼ é€’çš„ã€‚åœ¨ Java ä¸­ï¼Œå¯¹è±¡å¼•ç”¨ä½œä¸ºå‚æ•°ä¼ é€’æ—¶ï¼Œå®é™…ä¸Šæ˜¯å°†å¯¹è±¡åœ¨å †(heap)ä¸­åœ°å€å€¼çš„copyä¼ é€’ç»™å‡½æ•°ï¼Œè€Œä¸æ˜¯å¯¹è±¡æœ¬èº«ã€‚åŸºæœ¬ç±»å‹çš„å‚æ•°ä¼ é€’ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä¼ é€’çš„æ˜¯åŸºæœ¬ç±»å‹å­—é¢é‡å€¼çš„ copy 123456789101112131415161718192021222324252627public class Test { public static void main(String[] args) { int x = 10; changePrimitive(x); System.out.println(x); // è¾“å‡º 10ï¼Œå› ä¸º x çš„å€¼æ²¡æœ‰è¢«æ”¹å˜ Integer y = new Integer(10); changeReference(y);// num æ˜¯ y çš„copy System.out.println(y); // è¾“å‡º 10 int[] z = {10}; changeArray(z);// num ä¸º z çš„ copy System.out.println(z[0]); // è¾“å‡º 20ï¼Œå› ä¸º z[0] çš„å€¼è¢«æ”¹å˜ } public static void changePrimitive(int num) { num = 20; } public static void changeReference(Integer num) { num = new Integer(20);//numæœ¬æ¥æŒ‡å‘yå¯¹è±¡,ç°åœ¨æŒ‡å‘å¦ä¸€ä¸ªIntegerå¯¹è±¡,æ­¤ånumå’Œyæ²¡æœ‰ä»»ä½•å…³ç³». } public static void changeArray(int[] num) { num[0] = 20; }}","link":"/Dev/Java/JavaEvaluation/"},{"title":"Functional Interface","text":"SAM InterfaceSingle Abstract Method Interfaces (SAM Interfaces) are also known as Functional Interfaces.A functional interface in Java is an interface that contains only one abstract method. They can have any number of default or static methods. The main roles of functional interfaces are: Support for Lambda Expressions and Method References Support for Stream API Hereâ€™s an example of a functional interface which is implemented using a lambda expression: 1234567891011@FunctionalInterfaceinterface GreetingService { void sayHello(String msg);}public class Main { public static void main(String[] args) { GreetingService greetService = (message) -&gt; {System.out.println(&quot;Hello &quot; + message)}; greetService.sayHello(&quot;Efterklang&quot;); }} ğŸª§Note: The @FuncitonalInterface annotation is optional. The parentheses () are optional if there is only one parameter. The curly braces {} are optional if there is only one statement. Create SAM Interface InstancesInstances of functional interfaces can be created with lambda expressions, method references, or constructor references. 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950@FunctionalInterfaceinterface Message { void send(String name);}// Î» Expressionspublic class Main() { public static void main(String[] args) { Message message = (name) -&gt; { System.out.println(&quot;Sending email&quot; + name); }; message.send(&quot;Efterklang&quot;); }}// Method References/** * In this example, System.out::println is a method reference that refers to the println method of the System.out object. * The method reference is equivalent to the lambda expression x -&gt; System.out.println(x). * Here this reference acts as Consumer functional interface instance. * void java.lang.Iterable.forEach(Consumer&lt;? super String&gt; action)*/public class Main() { public static void main(String[] args) { List&lt;String&gt; list = Arrays.asList(&quot;Apple&quot;, &quot;Banana&quot;, &quot;Cherry&quot;); list.forEach(System.out::println); }}// Constructor Referencesclass Person { private String name; Person(String name) { this.name = name; } String getName() { return name; }}@FunctionalInterfaceinterface PersonFactory { Person create(String name);}PersonFactory factory = Person::new;Person person = factory.create(&quot;John&quot;);System.out.println(person.getName()); // Outputs: John Examples of SAM InterfacesJavaâ€™s standard library includes many commonly used SAM interfaces, such as Runnable, Callable, Comparable,Consumer, and many others in the java.util.function package. 123456789101112131415161718192021222324252627282930313233343536373839@FunctionalInterfacepublic interface Runnable { /** * Runs this operation. */ void run();}@FunctionalInterfacepublic interface Callable&lt;V&gt; { /** * Computes a result, or throws an exception if unable to do so. * * @return computed result * @throws Exception if unable to compute a result */ V call() throws Exception;}@FunctionalInterfacepublic interface Comparable&lt;T&gt; { public int compareTo(T o);}@FunctionalInterfacepublic interface Consumer&lt;T&gt; { /** * Performs this operation on the given argument. * * @param t the input argument */ void accept(T t); default Consumer&lt;T&gt; andThen(Consumer&lt;? super T&gt; after) { Objects.requireNonNull(after); return (T t) -&gt; { accept(t); after.accept(t); }; }} Hereâ€™s an example of using the Comparator and Consumer interfaces with lambda expressions: 12345678910111213141516171819202122232425262728293031323334353637import java.util.Arrays;import java.util.Comparator;import java.util.List;class Student { private String name; private int age; public Student(String name, int age) { this.name = name; this.age = age; } public String getName() { return name; } public int getAge() { return age; }}public class Main { public static void main(String[] args) { List&lt;Student&gt; students = Arrays.asList( new Student(&quot;John&quot;, 20), new Student(&quot;Alice&quot;, 22), new Student(&quot;Bob&quot;, 18) ); //Here comparator is a functional interface(Comparator&lt;Student&gt;) instance Comparator&lt;Student&gt; comparator = Comparator.comparing(Student::getAge); students.stream().sorted(comparator); students.forEach(student -&gt; { System.out.println(student.getName()+ &quot;,&quot; + student.getAge()); }); }}","link":"/Dev/Java/functionalInterface/"},{"title":"Java Hashtable","text":"Introå¦‚æœä½ å·²äº†è§£ HashTable ç›¸å…³çš„åŸºæœ¬æ¦‚å¿µ, å¯ä»¥è·³è¿‡æœ¬èŠ‚.Next Part Hashtable æ˜¯ä¸€ç§æ•°æ®ç»“æ„, ç”¨äºå­˜å‚¨é”®å€¼å¯¹, é€šè¿‡ key æ¥è®¡ç®— index, ä»è€Œå¿«é€ŸæŸ¥æ‰¾ value. å®ƒä»¥æ•°ç»„+é“¾è¡¨æˆ–è€…æ•°ç»„+çº¢é»‘æ ‘çš„å½¢å¼æ¥å­˜å‚¨æ•°æ®ï¼ˆåœ¨ Java 8 ä¹‹åï¼Œå½“é“¾è¡¨çš„é•¿åº¦è¶…è¿‡ä¸€å®šé˜ˆå€¼æ—¶ï¼Œé“¾è¡¨ä¼šè½¬æ¢ä¸ºçº¢é»‘æ ‘ä»¥æé«˜æ€§èƒ½ï¼‰, é€šè¿‡ key çš„ hashcode æ¥è®¡ç®— index, ä»è€Œå¿«é€ŸæŸ¥æ‰¾ value. åè¯è§£é‡Š Buckets HashTable å†…éƒ¨æœ‰ä¸€ä¸ªæ•°ç»„(Buckets),å­˜æ”¾å¤šä¸ª Bucketï¼Œæ¯ä¸ªå…ƒç´ ï¼ˆä¹Ÿç§°ä¸º bucketï¼‰å­˜å‚¨é”®å€¼å¯¹ç»„ï¼ˆKey-Value Pairsï¼‰,æ¯ä¸ª Bucket ä¸­å­˜æ”¾ç€æ‰€æœ‰ HashKey ç›¸åŒçš„(Key, Value);ps:hash bucket æ˜¯ä¸€ä¸ªæ¦‚å¿µ,åœ¨ JDK ä¸­å…¶æ•°æ®ç»“æ„å¯ä¸ºé“¾è¡¨æˆ–è€…çº¢é»‘æ ‘.å¼•å…¥ bucket çš„ç›®çš„æ˜¯ä¸ºäº†è§£å†³ hash å†²çª. Hash collision å“ˆå¸Œå†²çª/å“ˆå¸Œç¢°æ’,æŒ‡ä¸åŒçš„ key é€šè¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—å‡ºç›¸åŒçš„ index,è¿™ç§æƒ…å†µç§°ä¸ºå“ˆå¸Œå†²çªã€‚ hashCode() å“ˆå¸Œå‡½æ•°,å®ƒæ¥å—ä¸€ä¸ªé”®ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œè¯¥æ•´æ•°ç”¨ä½œåœ¨æ•°ç»„ä¸­å­˜å‚¨é”®å€¼å¯¹çš„ç´¢å¼•ã€‚è®¾è®¡å“ˆå¸Œå‡½æ•°æ—¶,åº”ä½¿å¾—å“ˆå¸Œå‡½æ•°å°½å¯èƒ½åœ°å‡åŒ€åœ°åˆ†å¸ƒ,å°½é‡è®©ä¸åŒçš„ key å¾—åˆ°ä¸åŒçš„ hashCodeã€‚ Key-Value Pair è¿™æ˜¯å­˜å‚¨åœ¨ HashTable ä¸­çš„æ•°æ®ã€‚æ¯ä¸ªé”®éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå¹¶æ˜ å°„åˆ°ä¸€ä¸ªå€¼ã€‚ index ç´¢å¼•.æœ¬æ–‡ä¸­æŒ‡ é€šè¿‡ key çš„ hashcode è®¡ç®—å‡ºæ¥çš„ index(index åº”è¯¥å°äº buckets çš„é•¿åº¦), ç”¨äºå®šä½ key-value pair æ‰€åœ¨çš„ bucket æ’å…¥é”®å€¼å¯¹æµç¨‹è®¡ç®— index åœ¨ Java ä¸­ï¼ŒObject ç±»æä¾›äº†ä¸€ä¸ªæ–¹æ³• hashCode()ï¼Œå®ƒè¿”å›å¯¹è±¡çš„å“ˆå¸Œç å€¼ã€‚å¸®åŠ©ç¡®å®šå¯¹è±¡åº”è¯¥å­˜å‚¨åœ¨å“ˆå¸Œè¡¨çš„å“ªä¸ªä½ç½®ã€‚ hashCode() çš„å…·ä½“å®ç°å–å†³äºå¯¹è±¡çš„ç±»ã€‚ä¾‹å¦‚ï¼Œå¯¹äº String ç±»ï¼ŒhashCode() æ–¹æ³•è®¡ç®—å­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦çš„å“ˆå¸Œç å€¼ï¼Œå¹¶å°†å®ƒä»¬ç»„åˆåœ¨ä¸€èµ·ã€‚ è¯·æ³¨æ„ï¼ŒObjects è§„èŒƒä¸­,å¦‚æœä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼ˆæ ¹æ® equals(Object) æ–¹æ³•ï¼‰ï¼Œé‚£ä¹ˆå®ƒä»¬çš„å“ˆå¸Œç å€¼å¿…é¡»ç›¸åŒã€‚ä½†æ˜¯ï¼Œä¸¤ä¸ªå¯¹è±¡çš„å“ˆå¸Œç å€¼ç›¸åŒæ—¶ï¼Œä¸¤ä¸ªå¯¹è±¡ä¸ä¸€å®šç›¸ç­‰ã€‚è¿™æ˜¯å› ä¸ºå¯èƒ½å­˜åœ¨å“ˆå¸Œå†²çªï¼Œå³ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡å…·æœ‰ç›¸åŒçš„å“ˆå¸Œç å€¼ã€‚ åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦é€šè¿‡ hashCode() æ–¹æ³•è·å–å¯¹è±¡çš„å“ˆå¸Œç ï¼Œç„¶åå†é€šè¿‡å–ä½™æ“ä½œå°†å“ˆå¸Œç æ˜ å°„åˆ°å“ˆå¸Œè¡¨çš„å¤§å°èŒƒå›´(å³ bucketsLen)å†…ã€‚å–ä½™å¯¹ HashCollision çš„å½±å“ JDK æºç ä¸­,å–ä½™æ“ä½œçš„å®ç°ä¸º: 123static int indexFor(int h, int length) { return h &amp; (length-1);} åŸç†è§Hashtable å¿«é€Ÿå–æ¨¡æ–¹æ¡ˆ è§£å†³ HashCollisionæ’å…¥é”®å€¼å¯¹æ—¶,å¦‚æœå‘ç”Ÿ index ç›¸åŒ,æ„å‘³ç€å‘ç”Ÿäº†å“ˆå¸Œå†²çª å†²çªè§£å†³çš„æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œå¸¸è§çš„æœ‰é“¾åœ°å€æ³•(æ¯ä¸ª bucket å­˜å‚¨ä¸€ä¸ªé“¾è¡¨ï¼Œæ–°çš„é”®å€¼å¯¹è¢«æ·»åŠ åˆ°é“¾è¡¨çš„æœ«å°¾)å’Œå¼€æ”¾åœ°å€æ³•(å¦‚æœä¸€ä¸ª bucket è¢«å ç”¨ï¼ŒHashTable ä¼šå¯»æ‰¾ä¸‹ä¸€ä¸ªå¯ç”¨çš„ bucket)ã€‚ JDK ä¸­çš„ HashTable ä½¿ç”¨çš„æ˜¯é“¾åœ°å€æ³•,å³æ¯ä¸ª bucket å­˜å‚¨ä¸€ä¸ªé“¾è¡¨ï¼Œæ–°çš„é”®å€¼å¯¹è¢«æ·»åŠ åˆ°é“¾è¡¨çš„æœ«å°¾ã€‚JDK 1.8 ä¹‹å,å½“é“¾è¡¨çš„é•¿åº¦è¶…è¿‡ä¸€å®šé˜ˆå€¼æ—¶ï¼Œé“¾è¡¨ä¼šè½¬æ¢ä¸ºçº¢é»‘æ ‘ä»¥æé«˜æ€§èƒ½ã€‚ è¡¥å……å–ä½™å¯¹ HashCollision çš„å½±å“åŸºæœ¬æ¦‚å¿µ è¢«é™¤æ•° Ã· é™¤æ•° = å•† ... ä½™æ•° è¢«é™¤æ•° mod|% é™¤æ•° = ä½™æ•° é™¤æ•°&gt;è¢«é™¤æ•°,ä½™æ•°=è¢«é™¤æ•° è¢«é™¤æ•°: dividend é™¤æ•°: divisor å•†: quotient ä½™æ•°: remainder ç´ æ•°/è´¨æ•°: prime number, é™¤äº† 1 å’Œå®ƒæœ¬èº«ä»¥å¤–ä¸å†æœ‰å…¶ä»–çš„å› æ•° å› å­: factor, ä¸€ä¸ªæ•°çš„å› å­æ˜¯èƒ½å¤Ÿæ•´é™¤å®ƒçš„æ•°,ä¾‹å¦‚ 2 æ˜¯ 4 çš„å› å­,å› ä¸º 4/2=2 åˆæ•°: composite number, é™¤äº† 1 å’Œå®ƒæœ¬èº«ä»¥å¤–è¿˜æœ‰å…¶ä»–çš„å› æ•° åœ¨å“ˆå¸Œå‡½æ•°ä¸­ï¼Œå–ä½™æ“ä½œé€šå¸¸ç”¨äºå°†å¤§èŒƒå›´çš„å“ˆå¸Œå€¼æ˜ å°„åˆ°ä¸€ä¸ªè¾ƒå°çš„èŒƒå›´,å–ä½™æ“ä½œçš„ç»“æœæ˜¯å“ˆå¸Œå€¼çš„åˆ†å¸ƒå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè¿™å¯èƒ½ä¼šå½±å“å“ˆå¸Œç¢°æ’çš„é¢‘ç‡ã€‚ ç»™å®šæ•°åˆ—ä½œä¸º keys, ä»¥åŠæ¨¡æ•°(è¢«é™¤æ•°) n ä½œä¸º buckets é•¿åº¦, é€šè¿‡å–ä½™æ“ä½œ, å¯ä»¥å°†æ•°åˆ—çš„å€¼æ˜ å°„åˆ°[0, n)çš„èŒƒå›´å†…ã€‚$$a_n = 1+n*step, n \\in N$$ å–ä½™æ“ä½œå¯èƒ½ä¼šå½±å“å“ˆå¸Œç¢°æ’çš„é¢‘ç‡ã€‚é™¤æ•°é€‰å–ç´ æ•°å¯ä»¥å‡å°‘å“ˆå¸Œç¢°æ’çš„é¢‘ç‡ã€‚ â€‹ å¦‚æœ step æ˜¯ n çš„å› å­,é‚£ä¹ˆå°±å®¹æ˜“å‘ç”Ÿå“ˆå¸Œç¢°æ’,å“ˆå¸Œç¢°æ’çš„é—´éš”å³ä¸º step çš„å€¼ã€‚ä¾‹å¦‚,n = 6, step = 2, é‚£ä¹ˆå“ˆå¸Œç¢°æ’çš„é—´éš”ä¸º 2, å³ index = 1, 3, 5 å¤„ä¼šå‘ç”Ÿå“ˆå¸Œç¢°æ’.è§ä»£ç ç¤ºä¾‹ 123step = 2, n = 6;array: 1, 3, 5, 7, 9,11,13,15,17,19,21,23,25,27,29,31index: 1, 3, 5, 1, 3, 5, 1, 3, 5, 1, 3, 5, 1, 3, 5, 1 æ•°åˆ—çš„å†²çªåˆ†å¸ƒé—´éš”ä¸ºå› å­å¤§å°ï¼Œå¯¹äºåŒæ ·çš„éšæœºæ•°åˆ—ï¼Œn çš„å› å­è¶Šå¤šï¼Œå‘ç”Ÿå†²çªçš„å¯èƒ½æ€§å°±è¶Šå¤§.æ•…è€Œï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡é¿å…å› å­è¿‡å¤šçš„æƒ…å†µ,å¦‚æœæƒ…å†µå…è®¸,å°½é‡é€‰æ‹©ç´ æ•°ä½œä¸ºé™¤æ•°ã€‚ Hashtable å¿«é€Ÿå–æ¨¡æ–¹æ¡ˆè¯æ˜å¯¹äºäºŒè¿›åˆ¶çš„ä½è¿ç®—ï¼Œæ•´é™¤ 8(2 çš„ä¸‰æ¬¡æ–¹) ç­‰ä»·äºå³ç§»ä¸‰ä½ $0110 0100 &gt;&gt; 3 = (0000 1100)_2 = 12$ å³ä¸ºå•† è€Œ01100100çš„åä¸‰ä½$(100)_2 = 4$å³ä¸ºä½™æ•° å·²çŸ¥$n = 2^m$ï¼Œå•†ä¸ºhashäºŒè¿›åˆ¶æ•°å³ç§» m ä½ï¼Œè€Œä½™æ•°ä¸ºhashçš„å m ä½ è¦æ±‚hash % nï¼Œå³æ±‚hashçš„å m ä½ï¼Œè€Œn-1çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ°ä¸º m ä¸ª 1ï¼Œå¯æ¨å¾—hash &amp; (n-1)ç­‰ä¸hash % n $$ \\begin{align} \\nonumber & 2 = (10)_2 \\quad 2 -1 = (1)_2 \\\\ & 4 = (100)_2 \\quad 4 -1 = (11)_2 \\\\ & 8 = (1000)_2 \\quad 8 - 1 = (111)_2 \\\\ & ...... \\\\ &å½’çº³å¾—åˆ°:\\\\ & 2^m = (1000...0)_2 æœ€é«˜ä½ä¸º1ï¼Œå…¶åæœ‰mä¸ªé›¶\\\\ & 2^m-1 = (111..1)_2 å…±æœ‰mä¸ª1 \\end{align} $$ ä¾‹é¢˜éªŒè¯ (n-1) &amp; hashï¼Œä¸å¦¨è®¾hash = 45367ï¼ŒäºŒè¿›åˆ¶ä¸º 0100 1010 1111 0111ï¼Œæ±‚hash % 8 45367 % 8 = 45367 &amp; 7 $$ \\begin{align} &8 = (1000)_2 \\quad7 = (111)_2 \\quad hash = \\ (0100\\ 1010\\ 1111\\ 0111)_2 \\\\ &45367 \\ \\%\\ 8 = 7 \\\\ &(0100 1010 1111 0111)_2 \\ \\&\\ (0000\\ 0000\\ 0000\\ \\ 0111)_2 = (111)_2 = 7 \\end{align} $$ ä¸ºä»€ä¹ˆ java ä¸­å“ˆå¸Œè¡¨çš„å¤§å°æ˜¯ 2 çš„å¹‚æ¬¡æ–¹?ä»£ç éªŒè¯åœ¨ JDK ä¸­,Hashtableæ±‚æ¨¡çš„æ–¹å¼ä¸º hash &amp; (n-1),è¿™ç§æ–¹å¼çš„å‰ææ˜¯ n ä¸º 2 çš„å¹‚æ¬¡æ–¹,å…¶ä»–æƒ…å†µä¸‹æœªå¿…æˆç«‹. 1234567891011121314public class HashTable { public static void main(String[] args) { int bucketsLen = new Scanner(System.in).nextInt(); int hashCode = new String(&quot;Hello&quot;).hashCode(); System.out.println(&quot;hashCode = &quot; + hashCode); int index = hashCode &amp; (bucketsLen - 1); System.out.println(&quot;index = &quot; + index); index = hashCode % bucketsLen; System.out.println(&quot;index = &quot; + index); String isEqual = (hashCode % bucketsLen) == (hashCode &amp; (bucketsLen - 1)) ? &quot;true&quot; : &quot;false&quot;; System.out.println(&quot;hashCode % bucketLen == hashCode &amp; (bucketsLen - 1) is &quot; + isEqual); }} 123456789101112[INPUT = 16][OUTPUT]hashCode = 69609650index = 2index = 2hashCode % 16 == hashCode &amp; (bucketsLen - 1) is true----------------------------------------[INPUT = 47]hashCode = 69609650index = 34index = 18hashCode % bucketLen == hashCode &amp; (bucketsLen - 1) is false hashMap ä¸­çš„å“ˆå¸Œå‡½æ•° hash &amp; (n - 1) è·Ÿå–ä½™è¿ç®— hash % n ç»“æœæ˜¯ä¸€è‡´çš„ã€‚æç«¯æƒ…å†µä¸‹ï¼Œå¦‚æœ hashMap ä¸­å­˜äº†å‡ åƒä¸‡çš„æ•°æ®ã€‚å½“æŸæ¬¡æ’å…¥æ•°æ®å¼•å‘æ‰©å®¹æ—¶ï¼Œéœ€è¦é‡æ–°è®¡ç®—ä¸‹æ ‡å€¼ï¼Œæ­¤æ—¶ç”¨ä½è¿ç®—å¯ä»¥æé«˜æ€§èƒ½ï¼›å¹³å¸¸ä»£ç ä¸­ä½¿ç”¨ï¼Œå¯¹äºä»£ç æ€§èƒ½æå‡ä¼˜åŒ–å¾®ä¹å…¶å¾®ï¼Œä¸”ä¼šå½±å“ä»£ç å¯è¯»æ€§ Referencesç®—æ³•åˆ†æï¼šå“ˆå¸Œè¡¨çš„å¤§å°ä¸ºä½•æ˜¯ç´ æ•°å“ˆå¸Œå‡½æ•°é™¤æ•°çš„é€‰å–ä¸ºä»€ä¹ˆæ˜¯è´¨æ•°ï¼Ÿå“ˆå¸Œå†²çªè§£å†³æ–¹æ³•,é—­æ•£åˆ—&amp;å¼€æ•£åˆ—","link":"/Dev/Java/hashTable/"},{"title":"Git for Android","text":"DownLoad åœ¨F-Droid ä¸­æœç´¢Mgitï¼Œä¸‹è½½å¹¶å®‰è£…ã€‚(Playå•†åº—ä¸­ä¹Ÿæœ‰,ä½†åŠŸèƒ½ä¸èƒ½æ­£å¸¸ä½¿ç”¨) åœ¨Githubä»“åº“é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ä¸‹è½½ Quick StartClone a remote repository Click on the + icon to add a new repository Enter remote URL see URL format below Enter local repository name - note that this is not the full path, as MGit stores all repositories in the same local directory (can be changed in MGit settings) Click the Clone button If required, you will be prompted for credentials to connect to the remote repo. MGit will download the repository (all branches) to your device Create a local repository Click on the + icon to add a new repository Click on Init Local to create a local repository Enter the name for this repository when prompted A local empty repo will be created URL formatSSH URLsSSH running on standard port (22): ssh://username@server_name/path/to/repoSSH running on non-standard port: ssh://username@server_name:port/path/to/repousername is needed - by default, MGit tries to connect as root.HTTP(S) URLsHTTP(S) URL: https://server_name/path/to/repo SSHMGit AppSettings -&gt; SSH Keys -&gt; + icon -&gt; input NewFileName -&gt; Generate Key -&gt; Open File and Copy the contentGithubSettings/keysNew SSH Key -&gt; input Title -&gt; Paste the content","link":"/Dev/Git/GitForAndroid/"},{"title":"Using Git Rebase to Manage Commit History","text":"ä½¿ç”¨åœºæ™¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šæœ‰è¿™æ ·çš„æƒ…å†µï¼šä½ åœ¨å¼€å‘ä¸€ä¸ªåŠŸèƒ½æ—¶ï¼Œæäº¤äº†å¤šæ¬¡commitï¼Œä½†æ˜¯è¿™äº›commitå¹¶ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„åŠŸèƒ½ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªbugä¿®å¤ï¼Œè¿™æ—¶å€™ä½ å¯èƒ½ä¼šæƒ³è¦å°†è¿™äº›commitåˆå¹¶æˆä¸€ä¸ªcommitï¼Œä»¥ä¾¿äºæ›´å¥½çš„ç®¡ç†æäº¤å†å²ã€‚è¿™æ—¶å€™ï¼Œgit rebaseå°±æ´¾ä¸Šç”¨åœºäº†ã€‚é€šè¿‡è¿™ä¸ªå‘½ä»¤ï¼Œå¯¹gitæäº¤å†å²è¿›è¡Œæ•´ç†ï¼Œå¯ä»¥ä½¿æäº¤å†å²æ›´åŠ æ¸…æ™°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ å·²ç»å°†è¿™äº›commitæ¨é€åˆ°äº†è¿œç¨‹ä»“åº“ï¼Œé‚£ä¹ˆä½ éœ€è¦ä½¿ç”¨git push --forceæ¥æ¨é€ä½ çš„æ›´æ”¹ã€‚ Warning âš ï¸ï¸ åœ¨å¤šäººåä½œçš„é¡¹ç›®ä¸­ä½¿ç”¨git rebase éœ€è¦æ³¨æ„å°½é‡ä¸è¦å¯¹å·²ç»æ¨é€åˆ°è¿œç¨‹ä»“åº“çš„commitè¿›è¡Œrebaseæ“ä½œï¼Œå› ä¸ºè¿™æ ·ä¼šæ”¹å˜æäº¤å†å²ï¼Œå¯èƒ½ä¼šå¯¼è‡´å…¶ä»–äººåœ¨åˆå¹¶ä½ çš„æäº¤æ—¶å‡ºç°é—®é¢˜ã€‚æ¨èçš„ä½¿ç”¨åœºæ™¯æ˜¯åœ¨æœ¬åœ°å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨rebaseæ•´ç†æäº¤å†å²ã€‚ å¦‚ä½•åˆå¹¶å¤šä¸ªcommitå¦‚ä½•ç¡®å®šä½ æƒ³è¦åˆå¹¶çš„commitsçš„èŒƒå›´å‘¢? ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³è¦åˆå¹¶æœ€è¿‘çš„ä¸‰ä¸ª commitï¼Œä½ å¯ä»¥ä½¿ç”¨ HEAD~3ã€‚è¿™å°†æ‰“å¼€ä¸€ä¸ªç¼–è¾‘å™¨(core.editor)ï¼Œåˆ—å‡ºæœ€è¿‘çš„ä¸‰ä¸ª commitã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨git rebase -i &lt;commit&gt;æŒ‡å®šcommitçš„hashå€¼ã€‚ä¾‹å¦‚git rebase -i 8c0a3c,è¿™å°†æ‰“å¼€ä¸€ä¸ªç¼–è¾‘å™¨ï¼Œåˆ—å‡ºä» åˆ° HEAD çš„æ‰€æœ‰ commitã€‚è¿è¡Œgit rebase -i HEAD~3ã€‚ æ³¨æ„:git rebaseåªèƒ½åˆå¹¶è¿ç»­çš„commitï¼Œå¦‚æœä½ æƒ³è¦åˆå¹¶ä¸è¿ç»­çš„commitï¼Œä½ éœ€è¦å¤šæ¬¡è¿è¡Œrebaseå‘½ä»¤ä½ å¯ä»¥é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡æ¥æŒ‡å®šä½¿ç”¨çš„ç¼–è¾‘å™¨ï¼Œä¾‹å¦‚ï¼šgit config --global core.editor &quot;nvim&quot; å°†ä½¿ç”¨nvimç¼–è¾‘å™¨ã€‚è¿™é‡Œæ¨èlazyvimä»¥åŠlunarvimï¼Œè¿™ä¸¤ä¸ªvimé…ç½®éƒ½æ˜¯åŸºäºneovimçš„ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œé…ç½®ç®€å•ï¼Œæ¨èä½¿ç”¨ã€‚ä¸”å¯¹äºåœ¨ç»ˆç«¯ä¸­è¿è¡Œæ”¯æŒè‰¯å¥½ã€‚ åœ¨ç¼–è¾‘å™¨ä¸­ï¼Œå°†ç¬¬äºŒè¡Œå’Œç¬¬ä¸‰è¡Œçš„ pick æ”¹ä¸º squash æˆ– s;ç„¶åä¿å­˜ä¿®æ”¹å¹¶é€€å‡ºï¼Œè¿™å°†æ‰“å¼€å¦ä¸€ä¸ªç¼–è¾‘å™¨ï¼Œè®©ä½ ç¼–è¾‘æ–°çš„ commit ä¿¡æ¯ã€‚æ›´å¤šå‘½ä»¤è§ä¸‹è¡¨Commandså†…å®¹ Commands: p, pick = use commit r, reword = use commit, but edit the commit message e, edit = use commit, but stop for amending s, squash = use commit, but meld into previous commit f, fixup = like â€œsquashâ€, but discard this commitâ€™s log message x, exec = run command (the rest of the line) using shell d, drop = remove commit ç¼–è¾‘ commit ä¿¡æ¯ï¼Œç„¶åä¿å­˜å¹¶å…³é—­ç¼–è¾‘å™¨ã€‚å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œä½ çš„ä¸‰ä¸ª commit ç°åœ¨åº”è¯¥å·²ç»è¢«åˆå¹¶æˆä¸€ä¸ªäº†ã€‚ è¿™å°†æ”¹å˜ä½ çš„ Git å†å²ã€‚å¦‚æœä½ å·²ç»å°†è¿™äº› commit æ¨é€åˆ°äº†è¿œç¨‹ä»“åº“ï¼Œä½ å°†éœ€è¦ä½¿ç”¨git push --force æ¥æ¨é€ä½ çš„æ›´æ”¹ Refhttps://git-scm.com/docs/git-rebase","link":"/Dev/Git/rebase-and-quash/"},{"title":"Understanding Git Reset and Revert","text":"å¼•è¨€é¡¹ç›®å¼€å‘ä¸­é‡åˆ°è¿‡æ„å¤–æäº¤æˆ–ç³Ÿç³•çš„ä¿®æ”¹éœ€è¦æ’¤é”€çš„æƒ…å†µå¦‚ä½•è§£å†³ï¼ŸGit Resetå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨Gitå†å²ä¸­å›åˆ°è¿‡å»ï¼Œå»é™¤é”™è¯¯çš„æäº¤æˆ–ä¿®æ”¹ï¼Œä¸ºé¡¹ç›®çš„è¿›å±•é“ºå¹³é“è·¯ resetå‘½ä»¤æ ¼å¼å’Œå‚æ•° ğŸ› ï¸åœ¨å¼€å§‹ä»‹ç»Git Resetçš„ä½¿ç”¨æ¡ˆä¾‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹Git Resetå‘½ä»¤çš„æ ¼å¼å’Œå‚æ•°ã€‚Git Resetå‘½ä»¤çš„ä¸€èˆ¬æ ¼å¼å¦‚ä¸‹ 1git reset [option] &lt;commit&gt; Git Resetå‘½ä»¤æœ‰ä¸‰ä¸ªä¸»è¦çš„é€‰é¡¹å‚æ•°ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š git reset â€“soft : æ­¤å‘½ä»¤å°†HEADç§»åŠ¨åˆ°æŒ‡å®šçš„æäº¤ï¼Œä½†ä¿ç•™æš‚å­˜åŒºå’Œå·¥ä½œç›®å½•ä¸å˜ã€‚è¿™æ„å‘³ç€æ‰€æœ‰çš„æ›´æ”¹ä»ç„¶è¢«æš‚å­˜ï¼Œä½ å¯ä»¥é‡æ–°æäº¤ã€‚è¿™æ˜¯æ’¤é”€æäº¤ä½†ä¿ç•™æ›´æ”¹ä»¥ä¾¿é‡æ–°æäº¤çš„å¥½æ–¹æ³•ã€‚åªæ”¹å˜HEADçš„ä½ç½®ï¼Œä¸æ”¹å˜æš‚å­˜åŒºå’Œå·¥ä½œç›®å½• git reset â€“mixed : è¿™æ˜¯git resetçš„é»˜è®¤æ¨¡å¼ã€‚æ­¤å‘½ä»¤å°†HEADç§»åŠ¨åˆ°æŒ‡å®šçš„æäº¤ï¼Œå¹¶ä¸”ä¹Ÿä¼šæ›´æ–°æš‚å­˜åŒºä»¥åŒ¹é…è¿™ä¸ªæäº¤ã€‚ä½†æ˜¯ï¼Œå·¥ä½œç›®å½•ä¸­çš„æ–‡ä»¶ä¸ä¼šæ”¹å˜ã€‚è¿™æ„å‘³ç€ä½ çš„æ›´æ”¹ä»ç„¶å­˜åœ¨ï¼Œä½†æ²¡æœ‰è¢«æš‚å­˜ï¼Œä½ å¯ä»¥é‡æ–°æš‚å­˜å’Œæäº¤ã€‚åªæ”¹å˜HEADå’Œæš‚å­˜åŒºçš„ä½ç½®ï¼Œä¸æ”¹å˜å·¥ä½œç›®å½• git reset â€“hard : æ­¤å‘½ä»¤å°†HEADç§»åŠ¨åˆ°æŒ‡å®šçš„æäº¤ï¼Œå¹¶ä¸”ä¹Ÿä¼šæ›´æ–°æš‚å­˜åŒºå’Œå·¥ä½œç›®å½•ä»¥åŒ¹é…è¿™ä¸ªæäº¤ã€‚è¿™å°†æ°¸ä¹…åˆ é™¤è‡ªæŒ‡å®šæäº¤ä»¥æ¥çš„æ‰€æœ‰æ›´æ”¹ã€‚è¿™æ˜¯ä¸€ä¸ªå±é™©çš„å‘½ä»¤ï¼Œå› ä¸ºå®ƒä¼šæ°¸ä¹…åˆ é™¤æ›´æ”¹ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ä¹‹å‰ä¸€å®šè¦ç¡®è®¤ä½ ä¸éœ€è¦è¿™äº›æ›´æ”¹ã€‚æ”¹å˜HEADã€æš‚å­˜åŒºå’Œå·¥ä½œç›®å½•çš„ä½ç½® git reset â€“merge/keep ä¸å¸¸ç”¨ï¼Œæš‚ä¸åšä»‹ç» git resetä¹Ÿå¯ä»¥æ“ä½œæ–‡ä»¶ï¼Œé€šè¿‡git reset &lt;file_name&gt;æ’¤é”€æš‚å­˜åŒºä¸­ç›¸åº”çš„æ–‡ä»¶ åº”ç”¨åœºæ™¯ä¿®å¤é”™è¯¯çš„æäº¤ ğŸ æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šåœ¨é¡¹ç›®ä¸­ä¸å°å¿ƒæäº¤äº†ä¸€äº›é”™è¯¯çš„ä»£ç æˆ–æ–‡ä»¶ï¼Œç”šè‡³å¯èƒ½æ˜¯æ•æ„Ÿä¿¡æ¯ã€‚ä½ å¯ä»¥ä½¿ç”¨git resetå›åˆ°ä¹‹å‰çš„æäº¤ï¼Œæ’¤é”€è¿™æ¬¡é”™è¯¯ï¼Œç„¶åå†æ¬¡è¿›è¡Œä¿®æ”¹ï¼Œç¡®ä¿å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯ä¸å†æäº¤åˆ°ä»£ç åº“ä¸­ã€‚ å›æ»šåˆ°ç¨³å®šç‰ˆæœ¬ âª å¦ä¸€ä¸ªGit Resetçš„å¸¸è§åº”ç”¨åœºæ™¯æ˜¯å›æ»šåˆ°é¡¹ç›®çš„ç¨³å®šç‰ˆæœ¬ã€‚æœ‰æ—¶å€™ï¼Œåœ¨è¿›è¡Œæ–°åŠŸèƒ½å¼€å‘æˆ–è¿›è¡Œä¸€äº›å®éªŒæ€§çš„ä¿®æ”¹æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå‘ç°é¡¹ç›®å‡ºç°äº†ä¸€äº›éš¾ä»¥è§£å†³çš„é—®é¢˜ï¼Œå¯¼è‡´é¡¹ç›®æ— æ³•æ­£å¸¸å·¥ä½œã€‚é€šè¿‡å›åˆ°ä¹‹å‰çš„ç¨³å®šç‰ˆæœ¬ï¼Œä½ å¯ä»¥å¿«é€Ÿæ’¤é”€å¼•å…¥é—®é¢˜çš„ä¿®æ”¹ï¼Œå¹¶ç¡®ä¿é¡¹ç›®å›åˆ°å¯ç”¨çŠ¶æ€ã€‚ ä¾‹å¦‚ï¼Œä½ åœ¨å¼€å‘ä¸€ä¸ªç½‘ç«™æ—¶æ·»åŠ äº†ä¸€äº›æ–°åŠŸèƒ½ï¼Œä½†å‘ç°å®ƒä»¬å¯¼è‡´äº†ä¸¥é‡çš„æ€§èƒ½é—®é¢˜,ä½ å¸Œæœ›ä¸¢å¼ƒè¿™äº›ä¿®æ”¹ï¼Œå›åˆ°ä¸€ä¸ªå·²çŸ¥ç¨³å®šçš„ç‰ˆæœ¬ã€‚ä½¿ç”¨Git Resetï¼Œä½ å¯ä»¥è½»æ¾åœ°å›åˆ°ä¹‹å‰çš„æäº¤ï¼Œæ’¤é”€è¿™äº›ä¿®æ”¹ï¼Œç¡®ä¿é¡¹ç›®æ¢å¤æ­£å¸¸è¿è¡Œã€‚ Git Revertgit resetå¯ä»¥æ’¤é”€æäº¤ï¼Œä½†æ˜¯ä¼šåˆ é™¤æäº¤å†å²ï¼Œå¦‚æœæƒ³ä¿ç•™æäº¤å†å²ï¼Œå¯ä»¥ä½¿ç”¨git revert git revert &lt;commit&gt;ï¼Œå…¶ä¸­&lt;commit&gt;æ˜¯ä½ å¸Œæœ›æ’¤é”€çš„æäº¤çš„å“ˆå¸Œå€¼æˆ–å¼•ç”¨ã€‚Gitä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤ï¼Œæ’¤é”€æŒ‡å®šçš„æ›´æ”¹ï¼Œå¹¶ä¿ç•™æ’¤é”€çš„å†å²è®°å½•ã€‚æ­¤æ—¶ï¼Œä½ çš„ä»£ç å°†å›åˆ°æ’¤é”€çš„æäº¤ä¹‹å‰çš„çŠ¶æ€ã€‚","link":"/Dev/Git/reset-and-revert/"},{"title":"Base64 Encoding","text":"å ç”²é™äºçŸ¥è¯†æ°´å¹³ï¼Œæ–‡ç« ä¸­å¯èƒ½å­˜åœ¨é”™è¯¯ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚ What is Base64? Base64 is a binary-to-text encoding scheme. It represents binary data in a printable ASCII string format by translating it into a radix-64 representation.Base64 encoding is commonly used when there is a need to transmit binary data over media that do not correctly handle binary data and is designed to deal with textual data belonging to the 7-bit US-ASCII charset only.One example of such a system is Email (SMTP), which was traditionally designed to work with plain text data in the 7-bit US-ASCII character set. Although, It was later extended to support non US-ASCII text messages as well as non-text messages such as audio and images, It is still recommended to encode the data to ASCII charset for backward compatibility.What is Base64 Encoding and How does it work? Base64 ç”¨ 6 ä¸ª bit æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œè¾“å…¥æµä¸­æ¯ 3 ä¸ª Bytes ç”± 4 ä¸ª Base64 å­—ç¬¦è¡¨ç¤º12343 Bytes = 3 * 8 bits = 24 bits = 4 * 6 bitsBase64 Encodingç®—æ³•ä¼šåœ¨4ç»„6bitå„è‡ªçš„å¤´éƒ¨æ·»0ï¼š4 * 6 bit -&gt; 4 * 8 bits = 4 Bytesè¿™å³æ˜¯Base64ç¼–ç åæ•°æ®é•¿åº¦å¢åŠ 1/3çš„åŸå›  Base64 åŒ…å« 64 ä¸ªå­—ç¬¦(26 ä¸ªå¤§å†™å­—æ¯ï¼Œ26 ä¸ªå°å†™å­—æ¯ï¼Œ10 ä¸ªæ•°å­—ï¼Œ2 ä¸ªç‰¹æ®Šå­—ç¬¦+ï¼Œ/) Base64 å¸¸ç”¨äºåœ¨ URLã€Cookieã€ç½‘é¡µä¸­ä¼ è¾“å°‘é‡äºŒè¿›åˆ¶æ•°æ®ã€‚ How does Base64 Encoding work?Base64 encoding works with a 65-character subset of the US-ASCII charset. The first 64 characters out of the 65-character subset are mapped to an equivalent 6-bit binary sequence $2^6 = 64$. The extra 65th character (=) is used for padding. 1234567891011121314151617181920## The Base64 AlphabetValue Encoding Value Encoding Value Encoding Value Encoding 0 A 17 R 34 i 51 z 1 B 18 S 35 j 52 0 2 C 19 T 36 k 53 1 3 D 20 U 37 l 54 2 4 E 21 V 38 m 55 3 5 F 22 W 39 n 56 4 6 G 23 X 40 o 57 5 7 H 24 Y 41 p 58 6 8 I 25 Z 42 q 59 7 9 J 26 a 43 r 60 8 10 K 27 b 44 s 61 9 11 L 28 c 45 t 62 + 12 M 29 d 46 u 63 / 13 N 30 e 47 v 14 O 31 f 48 w (pad) = 15 P 32 g 49 x 16 Q 33 h 50 y Steps ä»¥ 6 bit ä¸ºå•ä½å°†äºŒè¿›åˆ¶æ•°æ®åˆ†ç»„ï¼Œä¸è¶³ 6 ä¸ª bit çš„åœ¨æœ«å°¾è¡¥ 0ï¼Œå¾—åˆ° 8 ç»„äºŒè¿›åˆ¶æ•°æ®ï¼šä»¥ ASCII ç¼–ç çš„å­—ç¬¦ä¸²HelloWorld\\nä¸ºä¾‹ï¼Œå…¶äºŒè¿›åˆ¶æ•°æ®ä¸ºï¼š01001000 01100101 01101100 01101100 01101111 01010111 01101111 01110010 01101100 01100100 00001010åˆ†ç»„åä¸ºï¼š010010 000110 010101 101100 011011 000110 111101 010111 011011 110111 001001 101100 011001 000000 1010 å°†å„ç»„äºŒè¿›åˆ¶è½¬æˆåè¿›åˆ¶ï¼Œæ ¹æ®æ˜ å°„å…³ç³»å¾—åˆ° Base64 ç¼–ç 1218 6 21 44 27 6 61 23 27 55 9 44 25 0 40S G V s b G 9 X b 3 J s Z A o å°† Base64 ç¼–ç æ‹¼æ¥èµ·æ¥ï¼Œæœ€ç»ˆç»“æœåº”ä¸º 4 çš„å€æ•°ï¼Œä¸è¶³åˆ™åœ¨æœ«å°¾è¡¥=SGVs bG9X b3Js ZAO= Why Base64ï¼Ÿåœ¨æ—©æœŸçš„äº’è”ç½‘åè®®ä¸­ï¼Œè®¾è®¡è€…ä»¬ä¸»è¦è€ƒè™‘çš„æ˜¯å‘é€æ–‡æœ¬æ•°æ®ï¼Œå› æ­¤è¿™äº›åè®®é€šå¸¸åªèƒ½å¤„ç† ASCII å­—ç¬¦é›†ä¸­çš„å­—ç¬¦ã€‚ç„¶è€Œï¼ŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆå¦‚å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰ï¼‰åŒ…å«çš„æ•°æ®é€šå¸¸è¶…å‡ºäº† ASCII å­—ç¬¦é›†çš„èŒƒå›´ã€‚å¦‚æœç›´æ¥å‘é€è¿™äº›äºŒè¿›åˆ¶æ•°æ®ï¼Œå¯èƒ½æœ‰éƒ¨åˆ†å­—èŠ‚è¢«è§£é‡Šä¸ºæ§åˆ¶å­—ç¬¦ï¼Œä¾‹å¦‚æ¢è¡Œç¬¦ã€å›è½¦ç¬¦ã€åˆ¶è¡¨ç¬¦ç­‰ã€‚è¿™äº›æ§åˆ¶å­—ç¬¦åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½ä¼šè¢«è§£é‡Šä¸ºå…¶ä»–å«ä¹‰ï¼Œä»è€Œå¯¼è‡´æ•°æ®ä¼ è¾“é”™è¯¯ã€‚ Base64 ç¼–ç å‡ºç°æ˜¯ä¸ºäº†å°±æ˜¯è§£å†³åœ¨ç½‘ç»œä¸Šå‘é€äºŒè¿›åˆ¶æ•°æ®çš„é—®é¢˜ã€‚Base64 é€‰å– US-ASCII ä¸­çš„64 ä¸ªå¯æ‰“å°å­—ç¬¦ä½œä¸ºç¼–ç åçš„å­—ç¬¦é›†ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¸ä¼šè¢«è§£é‡Šä¸ºæ§åˆ¶å­—ç¬¦ï¼Œä»è€Œç¡®ä¿æ•°æ®ä¼ è¾“çš„å®‰å…¨å’Œå¯é ã€‚ ä¸è¿‡ï¼ŒBase64 ç¼–ç ä¼šå¯¼è‡´æ•°æ®è†¨èƒ€ï¼Œå¤§çº¦å¢åŠ  1/3 çš„å¤§å°ã€‚ Base64â€™s ApplicationsBase64 çš„åº”ç”¨éå¸¸å¹¿æ³›ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š ç”µå­é‚®ä»¶ï¼šåœ¨ MIMEï¼ˆå¤šç”¨é€”äº’è”ç½‘é‚®ä»¶æ‰©å±•ï¼‰åè®®ä¸­ï¼ŒBase64 ç”¨äºç¼–ç ç”µå­é‚®ä»¶çš„é™„ä»¶ï¼Œä½¿å…¶å¯ä»¥é€šè¿‡ç”µå­é‚®ä»¶ç³»ç»Ÿå‘é€ã€‚ç”µå­é‚®ä»¶ç³»ç»Ÿä¸»è¦è®¾è®¡ç”¨äºå¤„ç†æ–‡æœ¬ï¼Œè€Œä¸æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œå› æ­¤éœ€è¦å°†äºŒè¿›åˆ¶é™„ä»¶ï¼ˆå¦‚å›¾ç‰‡æˆ–æ–‡æ¡£ï¼‰è½¬æ¢ä¸ºæ–‡æœ¬æ ¼å¼ã€‚ æ•°æ® URIï¼šåœ¨ç½‘é¡µä¸­ï¼Œå¯ä»¥ä½¿ç”¨ Base64 ç¼–ç çš„æ•°æ® URI æ¥å†…åµŒå›¾ç‰‡æˆ–å…¶ä»–èµ„æºã€‚è¿™æ ·å¯ä»¥å‡å°‘ HTTP è¯·æ±‚çš„æ•°é‡ï¼Œä»è€Œæé«˜é¡µé¢åŠ è½½é€Ÿåº¦ã€‚æ•°æ® URI çš„æ ¼å¼ä¸º data:[&lt;mediatype&gt;][;base64],&lt;data&gt;ï¼Œå…¶ä¸­ æ˜¯èµ„æºçš„ MIME ç±»å‹ï¼Œ æ˜¯ Base64 ç¼–ç çš„èµ„æºæ•°æ®ã€‚ URL ç¼–ç ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒURL å¯èƒ½éœ€è¦åŒ…å«äºŒè¿›åˆ¶æ•°æ®ã€‚ç”±äº URL åªèƒ½åŒ…å« ASCII å­—ç¬¦ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ Base64 ç¼–ç æ¥ç¼–ç è¿™äº›æ•°æ®ã€‚æ ‡å‡†çš„ Base64 ç¼–ç åœ¨ URL ä¸­æœ‰ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦(+ å’Œ /)ï¼Œäºæ˜¯ + å’Œ / åˆ†åˆ«è¢«æ›¿æ¢ä¸º - å’Œ _ã€‚ è¯ä¹¦å’Œå¯†é’¥ï¼šåœ¨ SSL/TLS å’Œå…¶ä»–å®‰å…¨åè®®ä¸­ï¼Œè¯ä¹¦å’Œå¯†é’¥é€šå¸¸ä½¿ç”¨ Base64 ç¼–ç ï¼Œä»¥ä¾¿åœ¨æ–‡æœ¬æ ¼å¼çš„é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨ã€‚è¿™æ ·å¯ä»¥é¿å…äºŒè¿›åˆ¶æ•°æ®åœ¨å¤„ç†æˆ–ä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„é—®é¢˜ã€‚ ç¼–ç ç”¨æˆ·å‡­æ®ï¼šåœ¨ HTTP åŸºæœ¬è®¤è¯ä¸­ï¼Œç”¨æˆ·çš„ç”¨æˆ·åå’Œå¯†ç ä¼šè¢«æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç„¶åä½¿ç”¨ Base64 ç¼–ç ï¼Œæœ€åå°†ç¼–ç åçš„å­—ç¬¦ä¸²æ”¾åœ¨ HTTP å¤´çš„ Authorization å­—æ®µä¸­å‘é€ç»™æœåŠ¡å™¨ã€‚","link":"/Dev/Others/Base64Encoding/"},{"title":"DataBase Advance å­˜å‚¨å¼•æ“ä¸ç´¢å¼•","text":"","link":"/Dev/DataBase/DataBase04/"},{"title":"Copilot GPT4 Service","text":"æ–‡ç« å·²è¿‡æ—¶ Copilot-GPT4-Service Repo å·²è¢«é‚ªæ¶çš„å¾®è½¯å¸å›½ç¦ç”¨,ä¸å»ºè®®ç»§ç»­ä½¿ç”¨ ğŸ‘¾æœ¬äººå·å·²å¯„ Prerequisiteæ‹¥æœ‰ä¸€ä¸ª github è´¦å·,å¹¶ä¸”è®¢é˜…äº† Github Copilot æœåŠ¡åœ¨é€šè¿‡ Github å­¦ç”Ÿè®¤è¯å,å¯å…è´¹ä½¿ç”¨ Github Copilot Step1.ä¸‹è½½ Copilot-GPT4-Servicehttps://github.com/aaamoon/copilot-gpt4-service/releases/tag/0.2.0https://gitlab.com/aaamoon/copilot-gpt4-service Step2.è¿è¡Œ service,è·å– copilot tokenè§£å‹ç¼©,å¹¶ä»¥ç®¡ç†å‘˜æƒé™è¿è¡ŒStep1ä¸­ä¸‹è½½çš„å¯æ‰§è¡Œæ–‡ä»¶;ç„¶åæŒ‰ç…§å¦‚ä¸‹æ­¥éª¤ copilot token Windowsè¿è¡Œè„šæœ¬(äºŒé€‰ä¸€å³å¯),æŒ‰ç…§è„šæœ¬æç¤ºè¿›è¡Œæ“ä½œå³å¯;å¤åˆ¶å¾—åˆ°çš„ token,å½¢å¦‚ ghu_6lGZ6JxxxxxxxxxxxxxxxxD0kykBmæ–¹æ³•ä¸€: python script get_copilot_token.py 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117#!/usr/bin/env python3PROXY = { &quot;http&quot;: &quot;&quot;, &quot;https&quot;: &quot;&quot;}import timeimport typingfrom enum import Enumimport sysimport osimport retry: import requestsexcept ImportError: print(&quot;requests is not installed, please install it by running `pip install requests`&quot;) sys.exit(1)import requestsclass LoginError(Enum): AUTH_PENDING = 1 EXPIRED_TOKEN = 2 NETWORK_ERROR = 3 OTHER_ERROR = 4HEADERS = { &quot;accept&quot;: &quot;application/json&quot;, &quot;content-type&quot;: &quot;application/json&quot;,}def getLoginInfo(proxy=None) -&gt; (LoginError, typing.Union[dict, Exception]): url = &quot;https://github.com/login/device/code&quot; body = { &quot;client_id&quot;: &quot;Iv1.b507a08c87ecfe98&quot;, &quot;scope&quot;: &quot;read:user&quot; } try: resp = requests.post(url, headers=HEADERS, json=body, proxies=proxy, timeout=10) except requests.exceptions.ConnectionError: return LoginError.NETWORK_ERROR, None except Exception as e: return LoginError.OTHER_ERROR, e return None, resp.json()def pollAuth(device_code: str, proxy=None) -&gt; (LoginError, str): url = &quot;https://github.com/login/oauth/access_token&quot; body = { &quot;client_id&quot;: &quot;Iv1.b507a08c87ecfe98&quot;, # client_id of gh copilot &quot;device_code&quot;: device_code, &quot;grant_type&quot;: &quot;urn:ietf:params:oauth:grant-type:device_code&quot; } try: resp = requests.post(url, headers=HEADERS, json=body, proxies=proxy, timeout=10) except requests.exceptions.ConnectionError: return LoginError.NETWORK_ERROR, None except Exception as e: return LoginError.OTHER_ERROR, e data = resp.json() if data.get(&quot;error&quot;) == &quot;authorization_pending&quot;: return LoginError.AUTH_PENDING, None if data.get(&quot;error&quot;) == &quot;expired_token&quot;: return LoginError.EXPIRED_TOKEN, None elif &quot;access_token&quot; in data: return None, data[&quot;access_token&quot;] else: return LoginError.OTHER_ERROR, datadef getToken(proxy=None) -&gt; (LoginError, str): # get login info err, login_info = getLoginInfo(proxy) if err is not None: if err == LoginError.NETWORK_ERROR: print(&quot;network error, please check your network.&quot;) elif err == LoginError.OTHER_ERROR: print(&quot;unknown error occurred when getting login info.&quot;) print(&quot;error message:&quot;, login_info) return err, None interval = login_info['interval'] print(f&quot;Please open {login_info['verification_uri']} in browser and enter {login_info['user_code']} to login.&quot;) # poll for auth status while True: err, access_token = pollAuth(login_info['device_code'], proxy) if err is None: return None, access_token elif err == LoginError.AUTH_PENDING: pass elif err == LoginError.EXPIRED_TOKEN: print(&quot;session expired, please try again.&quot;) return err, None elif err == LoginError.NETWORK_ERROR: print(&quot;network error, please check your network.&quot;) return err, None elif err == LoginError.OTHER_ERROR: print(&quot;unknown error occurred when pulling auth info.&quot;) print(&quot;error message:&quot;, access_token) return err, None time.sleep(interval)if __name__ == &quot;__main__&quot;: for k, v in PROXY.items(): if v == &quot;&quot;: PROXY[k] = os.getenv(f&quot;{k}_proxy&quot;.upper()) or os.getenv(f&quot;{k}_proxy&quot;.lower()) or &quot;&quot; if re.match(r&quot;^.+://.+$&quot;, PROXY[k]) is None and PROXY[k] != &quot;&quot;: PROXY[k] = &quot;http://&quot; + PROXY[k] err, token = getToken(PROXY) if err is None: print(&quot;Your token is:&quot;) print(token) æ–¹æ³•äºŒ:batch scriptget_copilot_token.bat MacOS12345# method 1bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/aaamoon/copilot-gpt4-service/master/shells/get_copilot_token.sh)&quot;# method 2pip install requestspython3 &lt;(curl -fsSL https://raw.githubusercontent.com/aaamoon/copilot-gpt4-service/master/shells/get_copilot_token.py) Step3. config NextChatä¸‹è½½NextChat å‚ç…§ä¸‹å›¾è¿›è¡Œé…ç½®,å…¶ä¸­ OpenAI API Keyå¡«å…¥åœ¨ Step2 ä¸­è·å¾—çš„token åå°è¿è¡ŒCopilot-GPT4-Serviceåå³å¯æ— é™åˆ¶ä½¿ç”¨ GPT4","link":"/Dev/Others/CopilotGPT4Service/"},{"title":"ç¦ç”¨ç³»ç»Ÿå¿«æ·é”®","text":"é—®é¢˜æè¿°windows ç³»ç»Ÿä¸­å­˜åœ¨ä¸€äº›å¿«æ·é”®ï¼Œæ¯”å¦‚ win+space åˆ‡æ¢ keyboard layout,è¿™äº›å¿«æ·é”®åœ¨æŸäº›æƒ…å†µä¸‹ä¼šé€ æˆä¸å¿…è¦çš„éº»çƒ¦ï¼Œæˆ‘å°è¯•åœ¨Time &amp; language &gt; Typing &gt; Advanced keyboard settings &gt; Input language hot keysä¸­å¼ƒç”¨win+spaceå¿«æ·é”®,ä½† d å¯¹äºæˆ‘çš„ç”µè„‘è€Œè¨€,è¿™å¹¶æ²¡æœ‰æ•ˆæœ å› æ­¤,æœ¬æ–‡ä»‹ç»é€šè¿‡ PowerToys Keyboardmanager ç¦ç”¨è¿™äº›å¿«æ·é”®ã€‚ The PowerToys Keyboard Manager enables you to redefine keys on your keyboard.For example, you can exchange the letter A for the letter B on your keyboard. When you press the A key, a B will be inserted. è§£å†³æ–¹æ¡ˆ ä¸‹è½½å®‰è£…PowerToys æ‰“å¼€ PowerToysï¼Œåœ¨å·¦ä¾§è¾¹æ ä¸­é€‰æ‹©é”®ç›˜ç®¡ç†å™¨ï¼Œç‚¹å‡»é‡æ–°æ˜ å°„å¿«æ·é”®.è¿›å…¥å¦‚ä¸‹é¡µé¢ åœ¨é¡µé¢ä¸­,ç‚¹å‡»Add shortcut remappingé‡æ–°æ˜ å°„å¿«æ·é”®ï¼Œä½ å¯ä»¥å°†win+spaceæ˜ å°„ä¸ºundefinedï¼Œåœ¨Target appä¸­ä½ å¯ä»¥å¡«å†™ä½ æƒ³è¦åœ¨å“ªä¸ª app ä¸­åº”ç”¨è¿™ä¸€æ˜ å°„.è¿™é‡Œæˆ‘å°†å…¶æ˜ å°„ä¸ºPowerToysRunçš„å¿«æ·é”® å•å‡»ok,æˆåŠŸæ·»åŠ æ˜ å°„ è¡¥å……PowerToys è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„åŠŸèƒ½ï¼Œæ¯”å¦‚PowerToysRunï¼ŒFancyZonesç­‰ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œé…ç½®ã€‚å…³äº Keyboard-manager çš„æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒKeyboard-manager æ–‡æ¡£","link":"/Dev/Others/DisableShortcuts/"},{"title":"Java Reflection","text":"1234567public class Main { public static void main(String[] args) { User user = new User(); Class&lt;?&gt; clazz = user.getClass(); }}","link":"/Dev/Java/Java%20Reflection/"},{"title":"Scoop","text":"Introduction Scoop is an installerThe goal of Scoop is to let you use Unix-y programs in a normal Windows environmentMike Zick Scoopæ˜¯ä¸€ä¸ª Windows çš„ä¸‹è½½å·¥å…·ï¼Œå¯ä»¥æ–¹ä¾¿çš„å®‰è£…å„ç§è½¯ä»¶ã€‚ Directory Structure12345678910â”Œâ”€ î˜ª windows î‚° ï” î˜— î‚° î¯Š 0s ï’¼ RAM 12/13GB ó°… 3:13 PM Sat îŒ’ 27Â°Câ”” îš¬ dir D:\\envir_vars\\scoop\\ Directory: D:\\envir_vars\\scoopMode LastWriteTime Length Name---- ------------- ------ ----d---- 6/1/2024 3:13 PM ó°€» appsd---- 6/1/2024 2:48 PM ï“ bucketsd---- 6/1/2024 3:13 PM ï“ cached---- 6/1/2024 2:49 PM ï“ persistd---- 6/1/2024 3:13 PM ï“ shims Apps: å®‰è£…çš„å„ä¸ªè½¯ä»¶æˆ–ç¨‹åº Buckets: å­˜æ”¾å„ç§ app çš„é›†åˆ,buckets ç›®å½•ä¸‹å­˜æ”¾è®¸å¤šä¸ª bucketï¼Œä¾‹å¦‚ main ä¸ºé»˜è®¤çš„ bucketï¼Œextras åŒ…æ‹¬éƒ¨åˆ†æœªæ”¶å½• main bucket çš„å¸¸ç”¨è½¯ä»¶ï¼Œnerdfonts ä¸ºå­˜æ”¾å­—ä½“ app çš„ bucket,æ¯ä¸€ä¸ª bucket éƒ½æ˜¯ä¸€ä¸ª github ä»“åº“ï¼Œä»“åº“é‡Œç»´æŠ¤è®¸å¤š app çš„ json æ–‡ä»¶ï¼Œjson æ–‡ä»¶é‡Œå­˜æ”¾äº† app çš„å®‰è£…ä¿¡æ¯ï¼ŒåŒ…æ‹¬ app çš„ç‰ˆæœ¬ï¼ŒLICENSEï¼Œä¸‹è½½åœ°å€ url etc,è¿™äº› json æ–‡ä»¶è¢«ç§°ä½œ App manifestï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹123456{ &quot;version&quot;: &quot;1.0&quot;, &quot;url&quot;: &quot;https://github.com/lukesampson/cowsay-psh/archive/master.zip&quot;, &quot;extract_dir&quot;: &quot;cowsay-psh-master&quot;, &quot;bin&quot;: &quot;cowsay.ps1&quot;} Cache: å­˜æ”¾ä¸‹è½½çš„ä¸´æ—¶æ–‡ä»¶ Shims: scoop åœ¨ environment variable ä¸­æ·»åŠ äº†è¯¥ç›®å½•;é€šè¿‡ scoop å®‰è£…çš„ç¨‹åº,scoop ä¼šè‡ªåŠ¨ä¸ºå…¶åœ¨ Shims ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„ exe æ–‡ä»¶ï¼Œè¿™æ ·ç¨‹åºå®‰è£…åå¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­è°ƒç”¨ã€‚å¯¹äº GUI ç¨‹åºï¼Œscoop ä¼šè‡ªåŠ¨åœ¨å¼€å§‹èœå•ä¸­æ·»åŠ å…¶å¿«æ·æ–¹å¼ï¼Œç›®å½•C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\Scoop Apps InstallationDefault Installationåœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ Powershell æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯å®‰è£… Scoopã€‚é»˜è®¤æŠŠ scoop å®‰è£…åˆ° C:\\Users\\&lt;YOUR USERNAME&gt;\\scoop ç›®å½•ä¸‹ 12Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUserInvoke-RestMethod -Uri https://get.scoop.sh | Invoke-Expression Advance Installationã€‚å¦‚æœå¸Œæœ›æŠŠ scoop å®‰è£…åˆ°å…¶å®ƒç›®å½•ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344â”Œâ”€ î˜ª windows î‚° ï” D/envir_vars î‚° î¯Š 0.002s ï’¼ RAM 12/13GB ó°… 2:24 PM Sat îŒ 26Â°Câ”” îš¬ irm get.scoop.sh -outfile 'install.ps1'â”Œâ”€ î˜ª windows î‚° ï” D/envir_vars î‚° î¯Š 1.137s ï’¼ RAM 12/13GB ó°… 2:24 PM Sat îŒ 26Â°Câ”” îš¬ ls | grep ps1-a--- 6/1/2024 2:24 PM 25628 ó°· install.ps1â”Œâ”€ î˜ª windows î‚° ï” D/envir_vars î‚° î¯Š 0.092s ï’¼ RAM 12/13GB ó°… 2:24 PM Sat îŒ 26Â°Câ”” îš¬ .\\install.ps1 -?NAME D:\\envir_vars\\install.ps1SYNOPSIS Scoop installer.SYNTAX D:\\envir_vars\\install.ps1 [[-ScoopDir] &lt;String&gt;] [[-ScoopGlobalDir] &lt;String&gt;] [[-ScoopCacheDir] &lt;String&gt;] [-NoProxy] [[-Proxy] &lt;Uri&gt;] [[-ProxyCredential] &lt;PSCredential&gt;] [-ProxyUseDefaultCredentials] [-RunAsAdmin] [&lt;CommonParameters&gt;]DESCRIPTION The installer of Scoop. For details please check the website and wiki.RELATED LINKS https://scoop.sh https://github.com/ScoopInstaller/Scoop/wikiREMARKS To see the examples, type: &quot;Get-Help D:\\envir_vars\\install.ps1 -Examples&quot; For more information, type: &quot;Get-Help D:\\envir_vars\\install.ps1 -Detailed&quot; For technical information, type: &quot;Get-Help D:\\envir_vars\\install.ps1 -Full&quot; For online help, type: &quot;Get-Help D:\\envir_vars\\install.ps1 -Online&quot;â”Œâ”€ î˜ª windows î‚° ï” D/envir_vars î‚° î¯Š 0.178s ï’¼ RAM 11/13GB ó°… 2:25 PM Sat îŒ 26Â°Câ”” îš¬ .\\install.ps1 -ScoopDir 'D:\\envir_vars\\scoop\\' -ScoopGlobalDir 'D:\\envir_vars\\scoop\\GlobalApps' -NoProxyInitializing...Downloading...Creating shim...Adding D:\\envir_vars\\scoop\\\\shims to your path.Scoop was installed successfully!Type 'scoop help' for instructions. å¦‚æœä½ å·²ç»å®‰è£…äº† Scoopï¼Œæƒ³è¦æŠŠ scoop å®‰è£…åˆ°å…¶å®ƒç›®å½•ï¼Œå¯å‚è€ƒChange Directoryè¿ç§»åº”ç”¨ä¹Ÿå¯ä»¥é€šè¿‡scoop exportå¯¼å‡º json ç„¶åå†é€šè¿‡ import å¯¼å…¥ä¸‹è½½,è‹¥ç›´æ¥ç§»åŠ¨æºç›®å½•ä¸‹çš„æ–‡ä»¶,shims å®é™…ä¸Šæ˜¯æ— æ•ˆçš„,å®ƒæŒ‡å‘çš„ä½ç½®ä»ç„¶æ˜¯åŸå…ˆç›®å½• CommandInstall &amp; Update &amp; Uninstall scoop search vim æŸ¥æ‰¾ app scoop install neovim å®‰è£…æŒ‡å®š app scoop install git@2.23.0.windows.1 å®‰è£…æŒ‡å®šç‰ˆæœ¬ app scoop install -g git å®‰è£…å…¨å±€ appInstall Options:-g, â€“global Install the app globally-i, â€“independent Donâ€™t install dependencies automatically-k, â€“no-cache Donâ€™t use the download cache-u, â€“no-update-scoop Donâ€™t update Scoop before installing if itâ€™s outdated-s, â€“skip Skip hash validation (use with caution!)-a, â€“arch &lt;32bit|64bit&gt; Use the specified architecture, if the app supports it scoop list List installed apps scoop status Show status and check for new app versions1234567891011Name Installed Version Latest Version Missing Dependencies Info---- ----------------- -------------- -------------------- ----7zip 23.01 24.05aria2 1.36.0-1 1.37.0-1eza 0.18.15 0.18.16fastfetch 2.11.3 2.14.0fd 9.0.0 10.1.0git 2.42.0.2 2.45.1gitui 0.26.1 0.26.2kotlin 1.9.22 2.0.0neovim 0.9.5 0.10.0 scoop update update scoop scoop update neovim 7zip aria2 æ›´æ–°æŒ‡å®šè½¯ä»¶ scoop update * æ›´æ–°æ‰€æœ‰è½¯ä»¶ scoop uninstall neovim å¸è½½æŒ‡å®šè½¯ä»¶ scoop uninstall -p python å¸è½½è½¯ä»¶åŠå…¶é…ç½®æ–‡ä»¶ scoop uninstall -g git å¸è½½å…¨å±€è½¯ä»¶ Clean scoop cleanup git æ¸…ç†æŒ‡å®šè½¯ä»¶ scoop cleanup * æ¸…ç†æ‰€æœ‰è½¯ä»¶ scoop cache rm * æ¸…ç†ç¼“å­˜ MISCåœ¨åŒä¸€ç¨‹åºçš„ä¸åŒç‰ˆæœ¬ä¹‹é—´åˆ‡æ¢ 123scoop reset python@3.10.6# do somethingscoop reset python@3.12.3 alias Manage scoop aliases bucket Manage Scoop buckets cache Show or clear the download cache cat Show content of specified manifest. checkup Check for potential problems create Create a custom app manifest depends List dependencies for an app, in the order theyâ€™ll be installed download Download apps in the cache folder and verify hashes export Exports installed apps, buckets (and optionally configs) in JSON format help Show help for a command hold Hold an app to disable updates home Opens the app homepage import Imports apps, buckets and configs from a Scoopfile in JSON format info Display information about an app prefix Returns the path to the specified app shim Manipulate Scoop shims unhold Unhold an app to enable updates virustotal Look for appâ€™s hash or url on virustotal.com which Locate a shim/executable (similar to â€˜whichâ€™ on Linux) RefScoop_Wiki","link":"/Dev/Others/Scoop/"},{"title":"Recommended VSCode Extensions","text":"ä¸ªäººä½¿ç”¨æ’ä»¶æ¨èï¼Œä»…ä¾›å‚è€ƒã€‚ â… . Beautification Themes Dark Space Material Theme Tokyo Night Tokyo Night Ported Nvim Tokyo Night Frameless Solarized Palenight Bearded Theme Icons Material Theme Icons Fluent Icons Customization CodeUI Color HighlightHighlight web colors in your editor Apc Custom UI++Advanced VSCode user interface customizations. Very experimental. VSCode AnimationsClean and customizable animations for VSCode â…¡. Productivity Editing BookmarksMark lines and jump to them jumpğŸƒâ€â™‚ï¸ Jump/Select to the Start/End of a word in VSCode Code TranslateA pure vscode translation plug-in; ä¸€æ¬¾çº¯ç²¹çš„ vscode æ»‘è¯ç¿»è¯‘æ’ä»¶ CodeSnapğŸ“· Take beautiful screenshots of your code Github CopilotYour AI pair programmer GitHub Copilot ChatAI chat features powered by Copilot Error LensImprove highlighting of errors, warnings and other language diagnostics. Better CommentsImprove your code commenting by annotating with alert, informational, TODOs, and more! Blockman - Highlight Nested Code BlocksMark/Highlight code blocks Markdown Markdown All In OneAll you need to write Markdown (keyboard shortcuts, table of contents, auto preview and more) Markdown Preview EnhancedMarkdown Preview Enhanced ported to vscode Markdown LintMarkdown linting and style checking for Visual Studio Code MarkmapVisualize your Markdown as mindmaps with Markmap. PicGoUpload images to online, and generate markdown urls. FoamVS Code + Markdown + Wikilinks for your note taking and knowledge base word count cjkA word count extension that supports CJK languages. Markdown+Math Dictionary CompletionWord Completion Formatter Prettier - Code formatterCode formatter using prettier Git Git GraphView a Git Graph of your repository, and perform Git actions from the graph. Git HistoryView git log, file history, compare branches or commits GitHub CodespacesYour instant dev environment Git BlameSee git blame information in the status bar. GitLens â€” Git supercharged Web Live ServerLaunch a development local Server with live reload feature for static &amp; dynamic pages Miscellaneous Live ServerLaunch a development local Server with live reload feature for static &amp; dynamic pages LeetCodeSolve LeetCode problems in VS Code file-sizeShow file size in the status bar Resource MonitorDisplay CPU frequency, usage, memory consumption, and battery percentage remaining within the VSCode status bar Project ManagerEasily switch between projects IME and CursorChange input method and cursor style","link":"/Dev/VSCode/RecommendedExtensions/"},{"title":"VSCode C_Cpp Debug","text":"Intro â€‹ ä»Šå¤©é˜…è¯»Configure launch.json for C/C++ debugging in Visual Studio Codeï¼Œåˆæ­¥å®Œæˆ VSCode C/C++ debug çš„é…ç½®ï¼Œäºæ˜¯å†™ä¸‹æœ¬æ–‡ï¼Œæ—¨åœ¨è®°å½•ä¸ªäººåœ¨ Windows/WSL å¹³å°ï¼ŒVSCode é…ç½® C/C++çš„ Debug ç¯å¢ƒè¿‡ç¨‹ï¼Œä»¥ä¾›å…¶ä»–åˆå­¦è€…å‚è€ƒã€‚åœ¨æ­¤ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆå®‰è£… VSCodeï¼Œé…ç½®å¥½ WSL ç¯å¢ƒä»¥åŠ gcc ç¯å¢ƒå˜é‡ã€‚æ–‡ç« ä»‹ç»äº†launch.jsonå’Œtasks.jsonä¸­éƒ¨åˆ†attributeçš„å«ä¹‰ï¼Œå¹¶ç»™å‡ºæœ¬äººçš„é…ç½®ä¾›è¯»è€…å‚è€ƒ Stepslaunch.jsoné…ç½® debug ç¯å¢ƒï¼Œé¦–å…ˆè¦é…ç½®launch.jsonï¼Œlaunch.jsonæ˜¯ç”¨æ¥é…ç½® VSCode çš„ debug ç¯å¢ƒçš„ï¼Œå®ƒåŒ…å«äº†ä¸€ç³»åˆ—çš„è°ƒè¯•é…ç½®ï¼Œæ¯ä¸ªè°ƒè¯•é…ç½®éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº†ä¸€ç³»åˆ—çš„å­—æ®µï¼Œç”¨äºå®šä¹‰å¦‚ä½•å¯åŠ¨å’Œè¿è¡Œè°ƒè¯•å™¨ã€‚åœ¨ VSCode ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡F5å¿«æ·é”®æˆ–è€…ç‚¹å‡»å·¦ä¾§çš„ debug æŒ‰é’®è¿›å…¥ debug æ¨¡å¼ï¼Œæ­¤æ—¶ VSCode ä¼šè‡ªåŠ¨å¯»æ‰¾å½“å‰å·¥ä½œç›®å½•ä¸‹çš„launch.jsonæ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼ŒVSCode ä¼šæç¤ºä½ åˆ›å»ºä¸€ä¸ªlaunch.jsonæ–‡ä»¶ï¼Œå¦‚æœæ‰¾åˆ°äº†ï¼ŒVSCode ä¼šè‡ªåŠ¨åŠ è½½launch.jsonä¸­çš„é…ç½®ï¼Œç„¶åæ ¹æ®é…ç½®å¯åŠ¨è°ƒè¯•å™¨ã€‚ A launch.json file is used to configure the debugger in Visual Studio Code. Visual Studio Code generates a launch.json (under a .vscode folder in your project) with almost all of the required information. To get started with debugging you need to fill in the program field with the path to the executable you plan to debug. This must be specified for both the launch and attach (if you plan to attach to a running instance at any point) configurations. Launch.json Codeä¸ªäººé…ç½®å¦‚ä¸‹ï¼Œä»…ä¾›å‚è€ƒ 123456789101112131415161718192021{ &quot;version&quot;: &quot;0.2.0&quot;, &quot;configurations&quot;: [ { &quot;name&quot;: &quot;c/c++ gdb&quot;, &quot;type&quot;: &quot;lldb&quot;, &quot;request&quot;: &quot;launch&quot;, &quot;args&quot;: [], &quot;cwd&quot;: &quot;${fileDirname}&quot;, &quot;console&quot;: &quot;integratedTerminal&quot;, &quot;windows&quot;: { &quot;program&quot;: &quot;${fileDirname}/${fileBasenameNoExtension}.exe&quot;, &quot;preLaunchTask&quot;: &quot;compile c file(Windows)&quot; }, &quot;linux&quot;: { &quot;program&quot;: &quot;${fileDirname}/${fileBasenameNoExtension}.out&quot;, &quot;preLaunchTask&quot;: &quot;compile c file(Linux)&quot; } } ]} Attributes versionï¼šversion of this file formatä¸å¿…ä¿®æ”¹ configurationsï¼šList of configurations.configuration æ•°ç»„ï¼Œ åŒ…å«äº†ä½ çš„è°ƒè¯•é…ç½®ã€‚æ¯ä¸ªè°ƒè¯•é…ç½®éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº†ä¸€ç³»åˆ—çš„å­—æ®µï¼Œç”¨äºå®šä¹‰å¦‚ä½•å¯åŠ¨å’Œè¿è¡Œè°ƒè¯•å™¨ typeï¼šType of configurationç”¨äºæŒ‡å®šè¦ä½¿ç”¨çš„è°ƒè¯•å™¨ç±»å‹ã€‚å¯é€‰çš„å€¼å–å†³äºä½ å·²ç»å®‰è£…çš„è°ƒè¯•å™¨æ‰©å±•ã€‚å¸¸è§çš„ type å­—æ®µå€¼æœ‰ nodeã€javaã€lldb(ä¸»è¦ç”¨äºè°ƒè¯•c/cppä»¥åŠå…¶ä»–llvmæ”¯æŒçš„è¯­è¨€)ã€chrome(JavaScript,TypeScript)ç­‰ç­‰ nameï¼šName of configuration; appears in the launch configuration dropdown menu.å­—é¢æ„æ€ï¼Œæ­¤å¤„çš„c/c++ gdbå³ä¸ºlaunch.jsonçš„name preLaunchTaskï¼šTask to run before debug session starts.åœ¨ debug å¼€å§‹å‰æ‰§è¡Œçš„ taskï¼Œä¾‹å¦‚ç¼–è¯‘ä½ çš„ä»£ç ï¼Œç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶(.exe, .out e.g.)ï¼Œå¦‚æœ task å¤±è´¥ï¼Œåˆ™ä¸ä¼šå¯åŠ¨ debug sessionã€‚æ­¤å¤„æˆ‘ä»¬è¦é…ç½® c/cpp çš„ debug ç¯å¢ƒï¼Œæ‰€ä»¥ preLaunchTask è®¾ç½®ä¸º build active file(åå­—ä»»æ„)ï¼Œä¸tasks.jsonä¸­çš„ task å¯¹è±¡çš„ label å±æ€§å¯¹åº”å³å¯ programï¼šPath to the program to debug.Specify debug programâ€™s pathã€‚ä»¥ windows å¹³å°ä¸ºä¾‹ï¼Œæˆ‘ä»¬ç¼–å†™äº† hello.cï¼Œè¦è°ƒè¯•çš„ç¨‹åºå³ä¸ºfilePath/hello.exeï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¦‚ä¸‹é¢„å®šä¹‰å˜é‡ç®€åŒ– program Common pre-defined variables provided by VSCode for configuration files: ${workspaceFolder}: The path of the folder opened in VS Code. ${workspaceRootFolderName}: The name of the folder opened in VS Code without any slashes (/). ${file}: The current opened file. ${fileWorkspaceFolder}: The current opened fileâ€™s workspace folder. ${relativeFile}: The current opened file relative to workspaceFolder. ${relativeFileDirname}: The current opened fileâ€™s dirname relative to workspaceFolder. ${fileBasename}: The current opened fileâ€™s basename. ${fileBasenameNoExtension}: The current opened fileâ€™s basename with no file extension. ${fileDirname}: The current opened fileâ€™s dirname. ${fileExtname}: The current opened fileâ€™s extension. ${lineNumber}: The current selected line number in the active file. ${selectedText}: The current selected text in the active file. ${execPath}: The location of the VS Code executable. ${defaultBuildTask}: The name of the default build task. requestï¼šIndicates whether the configuration section is intended to launch the program or attach to an already running instance.ä¸€èˆ¬é€‰æ‹© launchï¼Œå‰ç«¯ debug å¯èƒ½ä¼šç”¨åˆ° attach consoleï¼šTerminal type to use.å–å†³ä¸ªäººå–œå¥½ï¼Œå¯é€‰å‚æ•°å¦‚ä¸‹ internalConsoleï¼šVSCode Panel ä¸­çš„ TERMINAL integratedTerminalï¼šVSCode Panel ä¸­çš„ DEBUG CONSOLE externalTerminalï¼šå¤–éƒ¨çš„é›†æˆç»ˆç«¯ cwdï¼šProgram working directory.cwd å­—æ®µç”¨äºè®¾ç½®å½“å‰å·¥ä½œç›®å½•ï¼ˆCurrent Working Directoryï¼‰ã€‚å½“ä½ å¯åŠ¨è°ƒè¯•å™¨æ—¶ï¼Œè¿™ä¸ªç›®å½•å°†è¢«ç”¨ä½œç¨‹åºçš„å·¥ä½œç›®å½•ï¼Œä¸€èˆ¬é…ç½®ä¸º &quot;cwd&quot;: &quot;${fileDirname}&quot; window/linux/osxï¼šspecific launch configuration attributesé’ˆå¯¹ Window,Linux/WSL,MacOS å¹³å°å•ç‹¬è®¾ç½®çš„ attributes tasks.jsondebugger æ­£å¸¸å·¥ä½œï¼Œéœ€è¦å…ˆç¼–è¯‘ä½ çš„ä»£ç ï¼Œç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶(.exe, .out e.g.)ï¼Œäºæ˜¯åœ¨preLaunchä¸­æˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ª task,ç”¨æ¥ç¼–è¯‘ c æ–‡ä»¶[tasks.jsonçš„ä½¿ç”¨]-&gt;See more Tasks.json Code123456789101112131415161718192021222324252627{ &quot;version&quot;: &quot;2.0.0&quot;, &quot;tasks&quot;: [ { &quot;type&quot;: &quot;shell&quot;, &quot;label&quot;: &quot;compile c file(Windows)&quot;, &quot;command&quot;: &quot;gcc&quot;, &quot;args&quot;: [ &quot;-g&quot;, &quot;${file}&quot;, &quot;-o&quot;, &quot;${fileDirname}\\\\${fileBasenameNoExtension}.exe&quot; ] }, { &quot;type&quot;: &quot;shell&quot;, &quot;label&quot;: &quot;compile c file(Linux)&quot;, &quot;command&quot;: &quot;gcc&quot;, &quot;args&quot;: [ &quot;-g&quot;, &quot;${file}&quot;, &quot;-o&quot;, &quot;${fileDirname}/${fileBasenameNoExtension}.out&quot; ] } ]} Attribute tasksï¼šThe task configurations. Usually these are enrichments of task already defined in the external task runner.ä¾‹å¦‚ä¹‹å‰åœ¨launch.jsonå®šä¹‰çš„ä¸¤ä¸ªtask 12345678&quot;windows&quot;: { &quot;program&quot;: &quot;${fileDirname}/${fileBasenameNoExtension}.exe&quot;, &quot;preLaunchTask&quot;: &quot;build active file(Windows)&quot;},&quot;linux&quot;: { &quot;program&quot;: &quot;${fileDirname}/${fileBasenameNoExtension}.out&quot;, &quot;preLaunchTask&quot;: &quot;build active file(Linux)&quot;} typeï¼šDefines whether the task is run as a process or as a command inside a shell.å¯é€‰å‚æ•°æœ‰ shell,progessã€‚gcc å‘½ä»¤åœ¨ shell ä¸­æ‰§è¡Œï¼Œæ­¤å¤„é€‰æ‹© shell å³å¯ labelï¼šThe taskâ€™s user interface labelä»»åŠ¡çš„åç§°ï¼Œåœ¨launch.jsoné€šè¿‡ label specify tasks to run commandï¼šThe command to be executed. Can be an external program or a shell command.æ­¤å¤„é€‰æ‹© gcc å³å¯ï¼Œä¹Ÿå¯é€‰ clang ç­‰ c/cpp ç¼–è¯‘å™¨ argsï¼šArguments passed to the command when this task is invoked.å‘½ä»¤çš„å‚æ•°ï¼Œä¾‹å¦‚-oï¼Œ-g ç­‰ç­‰ Outroâ€‹ ä»¥ç»å…¸çš„hello.cæµ‹è¯•ï¼Œèƒ½æ­£å¸¸ debugã€‚å¸Œæœ›æœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ© ğŸ•Šï¸","link":"/Dev/VSCode/DebugForC/"},{"title":"VSCode Keyboard Shortcuts","text":"â… . EditorGroups Shortcut Command Ctrl + 1/2 Focus first/second editor group Ctrl + M Maximize editor group Ctrl + W Close editor Alt + F4 Close windows Alt + A/D Open previous/next editor Ctrl + Shift + W/A/S/D View: split editor up/down/left/right ğŸ“¨ PS: Ctrl + M When spliting, maximize the current editor group, press again to cancel Alt + A/D Open previous/next editor in the current editor group Ctrl + Shift + W/A/S/D Move the current editor group to the up/left/down/right Coding Shortcut Command Alt + Up/DownArrow Move line up/down Alt + Shift + Up/DownArrow Copy line up/down Ctrl + C/X/Y Copy/Cut/Delete line Ctrl + Z Undo Ctrl + Shift + Z Redo Alt + Scroll Accelerate scrolling Ctrl + Alt + Up/DownArrow Add cursor above/below Alt + Click Insert cursor at click Ctrl + Home/End cursorTop/Bottom Alt + [ Go to Bracket Alt + ] Select to Bracket ğŸ“¨ PS: Alt + Up/DownArrow Move the current line up/down Ctrl + Alt + Up/DownArrow Add cursor above/below the current line, press ESCto exit Alt + Click Insert cursor where you click, press ESC to exit Ctrl + Home/End Move cursor to the top/bottom of the file Go to and Peek Shortcut Command F12 Go to definition Ctrl + F12 Peek implementation Shift + F12 Go to references Alt + F12 Peek definition Shift + Alt + F12 Find all references Ctrl + Shift + O Go to symbol in editor Ctrl + T Go to symbol in workspace â…¡. ExplorerFiles Shortcut Command J New File K New Folder E Reveal in explorer C/X/R Copy/cut/rename T Open in default integrated terminal List Shortcut Command I List.focusParent A List.collapse D List.expand Q List.collapseAll F3 List.find â…¢. Workbench Shortcut Command Ctrl + Shift + P Show all command Ctrl + Shift + M Toggle panel visibility Ctrl + Shift + F Toggle search visibility Ctrl + Shift + G Toggle source control visibility Ctrl + Shift + T Toggle todo tree visibility Ctrl + E Toggle explorer visibility Alt + E Toggle Secondary Sidebar visibility â…£. Extensions Shortcut Command Alt + O Project Manager: List Projects to Open Alt+Q Jumpy Word Mode Alt+W Jumpy Line Mode Ctrl+L Bookmarks: Toggle Labeled Bookmarks: List Bookmarks: List","link":"/Dev/VSCode/Shortcuts/"},{"title":"tasks.jsonçš„ä½¿ç”¨","text":"Introtasks.json çš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®˜æ–¹çš„è§£é‡Šæ˜¯è¿™æ ·çš„ï¼š Lots of tools exist to automate tasks like linting, building, packaging, testing, or deploying software systems.Tasks in VS Code can be configured to run scripts and start processes so that many of these existing tools can be used from within VS Code without having to enter a command line or write new code.linting: Linting is a tool that analyzes source code to flag programming errors, bugs, stylistic errors, and suspicious constructs &gt; Integrate with External Tools via Tasks ç®€å•æ¥è¯´ï¼Œtasks.json çš„ä½œç”¨å°±æ˜¯å¯ä»¥åœ¨ VSCode ä¸­ç¼–å†™ä¸€äº›è„šæœ¬ï¼Œç”¨äºæ‰§è¡Œä¸€äº›ä»»åŠ¡ï¼Œæ¯”å¦‚ç¼–è¯‘ä»£ç ï¼Œè¿è¡Œä»£ç ï¼Œæ‰“åŒ…ä»£ç ç­‰ç­‰ã€‚ propertiesThe taskâ€™s properties have the following semantic: label: The taskâ€™s label used in the user interface. type: The taskâ€™s type. For a custom task, this can either be shell or process. If shell is specified, the command is interpreted as a shell command (for example: bash, cmd, or PowerShell). If process is specified, the command is interpreted as a process to execute. command: The actual command to execute. windows: Any Windows specific properties. Will be used instead of the default properties when the command is executed on the Windows operating system. group: Defines to which group the task belongs. In the example, it belongs to the test group. Tasks that belong to the test group can be executed by running Run Test Task from the Command Palette. presentation: Defines how the task output is handled in the user interface. In this example, the Integrated Terminal showing the output is always revealed and a new terminal is created on every task run. options: Override the defaults for cwd (current working directory), env (environment variables), or shell (default shell). Options can be set per task but also globally or per platform. Environment variables configured here can only be referenced from within your task script or process and will not be resolved if they are part of your args, command, or other task attributes. runOptions: Defines when and how a task is run. ç¤ºä¾‹tasks.jsonçš„åŠŸèƒ½ååˆ†ä¸°å¯Œï¼Œè¿™é‡Œåªåˆ—ä¸¾ä¸€äº›å¸¸ç”¨çš„åŠŸèƒ½ï¼Œæ›´å¤šçš„åŠŸèƒ½å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940{ &quot;version&quot;: &quot;2.0.0&quot;, &quot;tasks&quot;: [ { &quot;type&quot;: &quot;shell&quot;, &quot;label&quot;: &quot;compile c file(Windows)&quot;, &quot;command&quot;: &quot;gcc&quot;, &quot;args&quot;: [ &quot;-g&quot;, &quot;${file}&quot;, &quot;-o&quot;, &quot;${fileDirname}\\\\${fileBasenameNoExtension}.exe&quot; ], &quot;group&quot;: &quot;build&quot; }, { &quot;type&quot;: &quot;shell&quot;, &quot;label&quot;: &quot;compile c file(Linux)&quot;, &quot;command&quot;: &quot;gcc&quot;, &quot;args&quot;: [ &quot;-g&quot;, &quot;${file}&quot;, &quot;-o&quot;, &quot;${fileDirname}/${fileBasenameNoExtension}.out&quot; ], &quot;group&quot;: &quot;build&quot; }, { &quot;type&quot;: &quot;shell&quot;, &quot;label&quot;: &quot;run exe file(Windows)&quot;, &quot;command&quot;: &quot;${fileDirname}\\\\${fileBasenameNoExtension}.exe&quot; }, { &quot;type&quot;: &quot;shell&quot;, &quot;label&quot;: &quot;compile and run c file(Windows)&quot;, &quot;command&quot;: &quot;gcc -g ${file} -o ${fileDirname}\\\\${fileBasenameNoExtension}.exe &amp;&amp; ${fileDirname}\\\\${fileBasenameNoExtension}.exe&quot;, &quot;problemMatcher&quot;: [&quot;$gcc&quot;] } ]} compile c file(Windows)å’Œcompile c file(Linux)ï¼šç”¨äºç¼–è¯‘ c æ–‡ä»¶ run exe file(Windows)ç”¨äºè¿è¡Œç¼–è¯‘å¥½çš„ exe æ–‡ä»¶ï¼Œä»£ç æ²¡æœ‰æ”¹åŠ¨æ—¶ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œ exe æ–‡ä»¶ï¼Œé¿å…é‡æ–°ç¼–è¯‘ã€‚ compile and run c file(Windows)ç”¨äºç¼–è¯‘å¹¶è¿è¡Œ c æ–‡ä»¶ã€‚ ps: ä¸ºworkbench.action.tasks.runTaskè®¾ç½®å¿«æ·é”®,å¯æ˜¾ç¤º tasks åˆ—è¡¨","link":"/Dev/VSCode/tasks.json%E7%9A%84%E4%BD%BF%E7%94%A8/"},{"title":"2077 Easter Eggs about Music","text":"ä¸­æ–‡å†è§æ°å…‹|å†è§æ°å…‹ ç—›ä»°ä¹é˜Ÿé£ç¿”é¸Ÿ|é£ç¿”é¸Ÿ å”æœä¹é˜Ÿæ€æ­»é‚£ä¸ªçŸ³å®¶åº„äºº|ç›´åˆ°å¤§å¦å´©å¡Œ ä¸‡èƒ½é’å¹´æ—…åº—é»‘æ¢¦|é»‘æ¢¦,é«˜çº§åŠ¨ç‰© çª¦å”¯æ¢¦ç¼ ç»•çš„æ—¶å€™|æ¢¦ç¼ ç»•çš„æ—¶ä¾¯ è¶…è½½ä¹é˜Ÿç«è½¦é©¶å‘äº‘å¤–ï¼Œæ¢¦å®‰é­‚äºä¹éœ„|æ¢¦å®‰çœ äºä¹éœ„ åˆºçŒ¬ä¹é˜Ÿç™½æ—¥æ¢¦è“|ä¼¤å®³çš„æ¯”èµ› åˆºçŒ¬ä¹é˜Ÿå…¬è·¯ä¹‹æ­Œ|å…¬è·¯ä¹‹æ­Œ ç—›ä»°ä¹é˜Ÿå¿«è®©æˆ‘å†é›ªåœ°ä¸Šæ’’ç‚¹é‡|è®©æˆ‘ä»¬åœ¨äº‘é¡¶æ’’ç‚¹é‡,æˆ‘çš„ç—…å°±æ˜¯æ²¡æœ‰æ„Ÿè§‰ å´”å¥åƒåœ¾åœº|åƒåœ¾åœº ä½•å‹‡æ²¡æœ‰ç†æƒ³çš„äººä¸ä¼¤å¿ƒ|æ²¡æœ‰ç†æƒ³ä¸ä¼¤å¿ƒ æ–°è£¤å­ä¹é˜Ÿåˆ«æ¥çº ç¼ æˆ‘|åˆ«æ¥çº ç¼ æˆ‘ é»‘è±¹ä¹é˜Ÿä¸€ä¸‡æ¬¡æ‚²ä¼¤|ä¸€ä¸‡æ¬¡æ‚²ä¼¤ é€ƒè·‘è®¡åˆ’èŠ±ç«|æ²¡æœ‰ç»“å±€çš„è¡¨æ¼” æ±ªå³°é’Ÿé¼“æ¥¼|å…¨éƒ½æ˜¯æ­£ç¡®ç­”æ¡ˆ ä½•å‹‡èŠ±|æ ¹å·²ç»æ¯è èŠ±å„¿ä¹é˜Ÿå±±é›€|ä¸æ¯çš„èº«ä½“ ä¸‡èƒ½é’å¹´æ—…åº—ä¸¤å¤©|ä¸€å¤©ç”¨æ¥å¸Œæœ›,ä¸€å¤©ç”¨æ¥ç»æœ› è®¸å·ç«è½¦å¿«å¼€|ç”Ÿæ´»å¾€å“ªå¼€ äºŒæ‰‹ç«ç‘° è‹±æ–‡ã€ŠAll Along the Watchtowerã€‹ Bob Dylanã€ŠA Little Help From My Friendsã€‹ The Beatlesã€ŠA Like Supremeã€‹ A Like Supreme ã€ŠBeat on the Bratã€‹ Ramonesã€ŠBelly Of The Beastã€‹ Anthraxã€ŠBoat Drinksã€‹ Jimmy Buffettã€ŠBoth Sides Nowã€‹ Joni Mitchell ã€ŠDisasterpieceã€‹ Slipknotã€Š(Donâ€™t Fear) The Reaperã€‹ Blue Oyster Cultã€ŠDown on the Streetã€‹ The Stooges ã€ŠEvery Breath You Takeã€‹ The Policeã€ŠEx-Factorã€‹ Lauryn Hill ã€ŠFollowing the Riverã€‹ The Rolling Stonesã€ŠForward to Deathã€‹ Dead Kennedyã€ŠFourtunate Sonã€‹ Creedence Clearwater Revival ã€ŠGimme Dangerã€‹ The Stoogesã€ŠGhost Townã€‹ The Specials ã€ŠI Fought the Lawã€‹ The Clashã€ŠI Donâ€™t Wanna Hear Itã€‹ Minor Threatã€ŠI Walk The Lineã€‹ Jonny Cashã€ŠImagineã€‹ John Lennon ã€ŠKilling In The Nameã€‹ Rage Against the Machineã€ŠKnockinâ€™ on Heavenâ€™s Doorã€‹ Bob Dylan ã€ŠLast Caressã€‹ Misfitsã€ŠLife During Wartimeã€‹ Talking Headsã€ŠLove Like Fireã€‹ Generation Xã€ŠLightening Breaksã€‹ Plasmatics ã€ŠMeeting Alone the Edgeã€‹ Pink Floyd ã€ŠNocturnes Op.55 No.1ã€‹ Chopinã€ŠNew Dawn Fadesã€‹ Joy Division ã€ŠPyramid songã€‹ Radioheadã€ŠPsycho Killerã€‹ Talking Headsã€ŠPlaying For Timeã€‹ Madleen Kaneã€ŠPlay it Safeã€‹ Iggy Popã€ŠPath of Gloryã€‹ Plasmaticsã€ŠPaid in Fullã€‹ Fire B. &amp; Rakimã€ŠPiscesã€‹ JINJER ã€ŠRiders On the Stormã€‹ The Doorsã€ŠRebel Rebelã€‹ David Bowie ã€ŠSpace Oddityã€‹ David Bowieã€ŠSerach&amp;Destroyã€‹ The Stoogesã€ŠSmoke On The Waterã€‹ Deep Purpleã€ŠStairway to Heavenã€‹ Led Zeppelin ã€ŠTapewormã€‹ Pigfaceã€ŠThe Beast In Meã€‹ Jonny Cashã€ŠTransmissionã€‹ Joy Divisionã€ŠTotalimmortalã€‹ A.F.Iã€ŠThe Fool On The Hillã€‹ The Beatlesã€ŠTalkinâ€™ about a Revolutionã€‹ Tracy Chapmanã€ŠThe Space In Betweenã€‹ How To Destroy Angels ã€ŠVenus in Fursã€‹ The Velvet Underground ã€ŠWe Gotta Live Togetherã€‹ Dead Kennedysã€ŠWhere is My Mindã€‹ Pixies æ–‡å­¦ä½œå“For Whom the Bell Tolls æµ·æ˜å¨çš„é•¿ç¯‡å°è¯´,ä¸§é’Ÿä¸ºè°è€Œé¸£;ä»¥ç¾å›½äººå‚åŠ è¥¿ç­ç‰™äººæ°‘åæ³•è¥¿æ–¯æˆ˜äº‰ä¸ºé¢˜æ,1940 å¹´é¦–æ¬¡å‡ºç‰ˆ æ¯”è¿œæ–¹æ›´è¿œ,åªèº«æ‰“é©¬ æµ·å­è¯—ä½œ,ä¹æœˆ ç›®å‡»ä¼—ç¥æ­»äº¡çš„è‰åŸä¸Šé‡èŠ±ä¸€ç‰‡è¿œåœ¨è¿œæ–¹çš„é£æ¯”è¿œæ–¹æ›´è¿œæˆ‘çš„ç´å£°å‘œå’½ æ³ªæ°´å…¨æ— æˆ‘æŠŠè¿™è¿œæ–¹çš„è¿œå½’è¿˜è‰åŸä¸€ä¸ªå«é©¬å¤´ ä¸€ä¸ªå«é©¬å°¾æˆ‘çš„ç´å£°å‘œå’½ æ³ªæ°´å…¨æ— è¿œæ–¹åªæœ‰åœ¨æ­»äº¡ä¸­å‡èšé‡èŠ±ä¸€ç‰‡æ˜æœˆå¦‚é•œé«˜æ‚¬è‰åŸæ˜ ç…§åƒå¹´å²æœˆæˆ‘çš„ç´å£°å‘œå’½ æ³ªæ°´å…¨æ— åªèº«æ‰“é©¬è¿‡è‰åŸ","link":"/Essay/Game/2077MusicalEasterEggs/"},{"title":"Letter From Olgierd von Everec","text":"Letter from Olgierd von Everec My Dearest Wife, Were I only as skilled with words as I am with my blade. Especially now, when an icy void grips my heart. I see how you look at me, and I see how you wither. I cannot help you, but I believe I can cease harming you. This letter and this rose are my farewell. May you live in health and remember but the good times. Olgierd The Painted Worldâ€‹ Geralt finds himself in the surreal painted world reminiscent of the estate. The dog and cat, who apparently exist simultaneously in both worlds, informing him that in order to truly awaken Iris, Geralt has to complete the memories she has been denying, and destroy the fears and nightmares that bind her. â€‹ As you reenact the memories, Geralt will see how the coupleâ€™s marriage began to deteriorate over time, how Irisâ€™ family didnâ€™t approve of Olgierd as her husband, and how Olgierd tried to use magic to summon Gaunter Oâ€™Dimm to try and break the pact he forged, but it ultimately failed and set fire to the manor. Eventually, it leads to a scene where, having grown indifferent to Iris and only remembering that he was supposed to love her, Olgierd gave her the strange cat and dog for company and the Caretaker for protection. Video","link":"/Essay/Game/Letter-From-Olgierd-von-Everec/"},{"title":"ã€ŠäºŒå­ä¹˜èˆŸã€‹","text":"p { text-indent: 2em; } .poem { /* font-family: Microsoft JhengHei; */ font-family: æ¥·ä½“; font-style: bold; font-size: 30px; background-color:rgba(210, 180, 140, 0.1); border: 3px solid rgba(0, 0, 0, 0.1); /* æ›´æ”¹è¾¹æ¡†é¢œè‰²å’Œé€æ˜åº¦ */ padding: 20px; margin: 10px; border-radius: 10px; /* box-shadow: 10px 10px 20px rgba(0, 0, 0, 0.1); */ } .admiration { font-family: Microsoft JhengHei; /* font-family: æ¥·ä½“; */ /* color: #426cc2; */ /* text-align: center; */ font-style: bold; } äºŒå­ä¹˜èˆŸ æ³›æ³›å…¶æ™¯ æ„¿è¨€æ€å­ ä¸­å¿ƒå…»å…» äºŒå­ä¹˜èˆŸ æ³›æ³›å…¶é€ æ„¿è¨€æ€å­ ä¸ç‘•æœ‰å®³ æ³¨é‡Š äºŒå­: å«å®£å…¬çš„ä¸¤ä¸ªå¼‚æ¯å­ï¼Œå…¬å­ä¼‹å’Œå…¬å­å¯¿ æ³›æ³›: é£˜è¡è²Œã€‚ç‹å…ˆè°¦ã€Šé›†ç–ã€‹ï¼šâ€œæ³›ï¼Œæµ®è²Œã€‚é‡è¨€ä¹‹æ›°æ³›æ³›ã€‚â€ æ™¯: é€šæ†¬ï¼Œè¿œè¡Œè²Œ é—»ä¸€å¤šã€Šè¯—ç»é€šä¹‰ã€‹â€œæ™¯è¯»ä¸ºâ€˜è¿¥â€™ï¼Œè¨€æ¼‚æµæ¸è¿œä¹Ÿâ€ã€‚ æ„¿ï¼šæ€å¿µè²Œ ä¸­å¿ƒ: å¿ƒä¸­ å…»(yÃ¡ng ç¾Š) å¿ƒä¸­çƒ¦èºä¸å®‰ã€‚ ç‘•ï¼šè®­â€œèƒ¡â€ï¼Œé€šâ€œæ— â€ã€‚ ä¸ç‘•ï¼ŒçŠ¹è¨€â€œä¸æ— â€ï¼Œç–‘æƒ‘ã€æ£æµ‹ä¹‹è¯ è¯‘æ–‡ä¸¤äººä¹˜ä¸€å¶å­¤èˆŸï¼Œæ¸æ¸å‘è¿œå¤„æ¼‚æµã€‚æ·±æ·±æ€å¿µä½ ä»¬ä¿©ï¼Œæˆ‘å¿ƒä¸­å……æ»¡å¿§æ„ã€‚ ä¸¤äººä¹˜ä¸€å¶å°èˆ¹ï¼Œæ¸æ¸åœ°è¶Šè¡Œè¶Šè¿œã€‚æ·±æ·±æ€å¿µä½ ä»¬ä¿©ï¼Œæ„¿ä½ ä»¬é¡ºåˆ©å¹³å®‰ã€‚ é‰´èµã€Šæ¯›è¯—åºã€‹äº‘ï¼šâ€œã€ŠäºŒå­ä¹˜èˆŸã€‹ï¼Œæ€ä¼‹ã€å¯¿ä¹Ÿã€‚å«å®£å…¬ä¹‹äºŒå­ï¼Œäº‰ç›¸ä¸ºæ­»ï¼Œå›½äººä¼¤è€Œæ€ä¹‹ï¼Œä½œæ˜¯è¯—ä¹Ÿã€‚å®£å…¬ä¸ºä¼‹å–äºé½å¥³è€Œç¾ï¼Œå…¬å¤ºä¹‹ï¼Œç”Ÿå¯¿åŠæœ”ã€‚æœ”ä¸å…¶æ¯è¯‰ä¼‹äºå…¬ï¼Œå…¬ä»¤ä¼‹ä½¿é½ï¼Œä½¿è´¼å…ˆå¾…äºéš˜è€Œæ€ä¹‹ã€‚å¯¿çŸ¥ä¹‹ï¼Œä»¥å‘Šä¼‹ï¼Œä½¿å»ä¹‹ã€‚ä¼‹æ›°ï¼šâ€˜å›å‘½ä¹Ÿï¼Œä¸å¯ä»¥é€ƒã€‚â€™å¯¿çªƒå…¶èŠ‚è€Œå…ˆå¾€ï¼Œè´¼æ€ä¹‹ã€‚ä¼‹è‡³ï¼Œæ›°ï¼šâ€˜å›å‘½æ€æˆ‘ï¼Œå¯¿æœ‰ä½•ç½ªï¼Ÿâ€™åˆæ€ä¹‹ã€‚â€ã€‚ åˆ˜å‘ã€Šæ–°åºÂ·èŠ‚å£«ã€‹äº‘:â€œå¯¿çŸ¥å…¶æ¯é˜´è°‹ï¼Œé‚ä¸ä¼‹åŒèˆŸï¼Œä½¿èˆŸäººä¸å¾—æ€ä¼‹ï¼Œæ–¹ä¹˜èˆŸæ—¶ï¼Œä¼‹å‚…æ¯æå…¶æ­»ä¹Ÿï¼Œé—µè€Œä½œè¯—â€ã€‚ è½¶äº‹å…¸æ•…å«å®£å…¬ï¼Œå§¬å§“å«æ°åæ™‹ï¼Œä¸ºå«åº„å…¬ä¹‹å­ã€‚å«åº„å…¬æ­»åï¼Œå…¬å­æ™‹çš„å“¥å“¥å¤ªå­å®Œç»§ä½ï¼Œæ˜¯ä¸ºå«æ¡“å…¬ã€‚å«æ¡“å…¬åå…­å¹´ï¼Œå«å®£å…¬çš„å¦ä¸€ä¸ªå…„å¼Ÿå…¬å­å·åèšé›†ä»å«å›½é€ƒèµ°çš„æµæ°‘è¢­å‡»æ€å®³å«æ¡“å…¬ï¼Œè‡ªç«‹ä¸ºå›ï¼Œå²ç§°å«å‰åºŸå…¬ã€‚å«å›½äººå› å«å‰åºŸå…¬æ€å®³å«æ¡“å…¬ï¼Œè€Œä¸”å–œå¥½æ‰“ä»—ï¼Œæ‰€ä»¥éƒ½ä¸æ‹¥æŠ¤ä»–ã€‚åŒå¹´ä¹æœˆï¼Œå«å›½å¤§è‡£çŸ³ç¢è”åˆé™ˆæ¡“å…¬æ€æ­»å«å‰åºŸå…¬ã€‚åäºŒæœˆï¼ŒçŸ³ç¢å°†å…¬å­æ™‹ä»é‚¢å›½è¿å›å«å›½ï¼Œå¹¶æ‹¥ç«‹å…¬å­æ™‹ç»§ä½ï¼Œæ˜¯ä¸ºå«å®£å…¬ã€‚ å«å®£å…¬å’Œçˆ¶äº²å«åº„å…¬çš„å§¬å¦¾å¤·å§œç§é€šï¼Œç”Ÿå­åä¼‹ï¼Œå«å®£å…¬æŠŠå…¬å­ä¼‹æ‰˜ç»™å³å…¬å­ã€‚å«å®£å…¬å¾ˆå® çˆ±å¤·å§œï¼Œå› æ­¤å°†å…¬å­ä¼‹ç«‹ä¸ºå¤ªå­ï¼Œå¹¶è®©å³å…¬å­æ•™å¯¼ä»–ã€‚ä¼‹é•¿å¤§æˆäººåï¼Œå«å®£å…¬ä¸ºä»–è˜å¨¶é½å¥³ï¼Œåªå› æ–°å¨˜å­æ˜¯ä¸ªå¤§ç¾äººï¼Œä¾¿æ”¹å˜ä¸»æ„ï¼Œåœ¨æ²³ä¸Šé«˜ç­‘æ–°å°ï¼ŒæŠŠé½å¥³æˆªç•™ä¸‹æ¥ï¼Œéœ¸ä¸ºå·±æœ‰ï¼Œå°±æ˜¯åæ¥çš„å®£å§œã€‚å›½äººæ¶ä¹‹è€Œä½œã€Šæ–°å°ã€‹ å«å®£å…¬å¾—åˆ°å®£å§œåï¼Œå®£å§œç”Ÿä¸‹ä¸¤ä¸ªå„¿å­å…¬å­å¯¿å’Œå…¬å­æœ”ï¼Œå«å®£å…¬è®©å·¦å…¬å­æ•™å¯¼ä»–ä»¬ã€‚å¤·å§œè‡ªç¼¢ã€‚å®£å§œä¸å…¬å­æœ”åœ¨å®£å…¬è·Ÿå‰è¯¬é™·æ€¥å­ã€‚å®£å…¬æ´¾é£æ€¥å­å‡ºä½¿é½å›½ï¼Œæ´¾äººä¼ªè£…å¼ºç›—ç­‰åœ¨è˜åœ°ï¼Œå‡†å¤‡æ€æ­»ä»–ã€‚ å¤ªå­ä¼‹å°†è¦åŠ¨èº«æ—¶ï¼Œå…¬å­å¯¿çŸ¥é“å…¬å­æœ”ä»‡æ¨å¤ªå­ä¼‹ï¼Œè€Œå«å®£å…¬æƒ³æ€æ‰å¤ªå­ä¼‹ï¼Œäºæ˜¯å¯¹å¤ªå­ä¼‹è¯´ï¼šâ€œè¾¹å¢ƒä¸Šçš„å¼ºç›—çœ‹è§ä½ æ‰‹ä¸­çš„ç™½è‰²æ—„èŠ‚ï¼Œå°±ä¼šæ€æ­»ä½ ï¼Œä½ å¯ä¸è¦å‰å»ã€‚â€å¹¶è®©å¤ªå­ä¼‹èµ¶å¿«é€ƒèµ°ã€‚å¤ªå­ä¼‹ä¸åŒæ„è¯´ï¼šâ€œå¼ƒçˆ¶ä¹‹å‘½ï¼Œæ¶ç”¨å­çŸ£ï¼æœ‰æ— çˆ¶ä¹‹å›½åˆ™å¯ä¹Ÿã€‚â€ç­‰åˆ°å¤ªå­ä¼‹ä¸´èµ°æ—¶ï¼Œå…¬å­å¯¿ç”¨é…’æŠŠå¤ªå­ä¼‹çŒé†‰ï¼Œç„¶åå·èµ°å¤ªå­ä¼‹çš„ç™½è‰²æ—„èŠ‚ã€‚å…¬å­å¯¿è½¦ä¸Šæ’ç€ç™½è‰²æ—„èŠ‚å¥”é©°åˆ°è˜åœ°ï¼Œè˜åœ°çš„å¼ºç›—çœ‹è§æ¥äººæœçœŸæ‰‹æŒç™½è‰²æ—„èŠ‚ï¼Œå°±æ€æ­»å…¬å­å¯¿ã€‚å…¬å­å¯¿æ­»åï¼Œå¤ªå­ä¼‹èµ¶åˆ°ï¼Œå¯¹å¼ºç›—è¯´ï¼šâ€œæˆ‘ä¹‹æ±‚ä¹Ÿï¼Œæ­¤ä½•ç½ªï¼Ÿè¯·æ€æˆ‘ä¹ï¼â€å¼ºç›—ä¸€å¹¶æ€æ‰å¤ªå­ä¼‹ï¼Œç„¶åæŠ¥å‘Šå«å®£å…¬ã€‚å«å®£å…¬äºæ˜¯ç«‹å…¬å­æœ”ä¸ºå¤ªå­ï¼Œå³åæ¥çš„å«æƒ å…¬ã€‚","link":"/Essay/Poems/%E3%80%8A%E4%BA%8C%E5%AD%90%E4%B9%98%E8%88%9F%E3%80%8B/"},{"title":"Phantom Liberty","text":"Lyricsby CD PROJEKT RED, Dawid PodsiadÅ‚o, P.T. Adamczyk Album Cyberpunk 2077: Phantom Liberty (Original Score - Deluxe Edition) CD PROJEKT RED, Dawid PodsiadÅ‚o, P.T. Adamczyk â€“ Phantom Liberty lyrics | Matchlyric Verse 1Found outTreasures are always lostPleasures and rage combinedIâ€™m watchinâ€™ youBe careful with your movesTonight, I think the time is rightI think the blood has driedIt cries for moreSo what are we waiting for? Chorus 1Wires and chains(Iâ€™m just tired of lookinâ€™ the other way)Starting to fade(Iâ€™m just tired of lookinâ€™ the other way)It feels like a game(Iâ€™m just tired of lookinâ€™ the other way)You have to play(Iâ€™m just tired of lookinâ€™ the other way) Verse 2Lights out, is this who you really are?Canâ€™t look into your eyesYour twisted mindItâ€™s dark, so darkWe end it nowIt ends right here, right nowPlease tell me you brought the ironLetâ€™s light up the skyAnd fade into the night Chorus 1Wires and chains(Iâ€™m just tired of lookinâ€™ the other way)Starting to fade(Iâ€™m just tired of lookinâ€™ the other way)It feels like a game(Iâ€™m just tired of lookinâ€™ the other way)You have to play(Iâ€™m just tired of lookinâ€™ the other way) BridgeThe days when it was good are gone (*Nah-nah-nah, nah-nah, nah*)Iâ€™m tryna see what it was for, but Iâ€™ll never know (*Nah-nah-nah, nah-nah, nah*)And though itâ€™s dead, I hear the call (*Nah-nah-nah, nah-nah, nah*)Ooh-ooh-ooh-ooh-ooh Chorus 2Wires and chains(Iâ€™m just tired of lookinâ€™ the other way)Starting to fade(Iâ€™m just tired of lookinâ€™ the other way)Feels like a game(Iâ€™m just tired of lookinâ€™ the other way)You canâ€™t escape(Iâ€™m just tired of lookinâ€™ the other way)Wires and chains(Iâ€™m just tired of lookinâ€™ the other way)Starting to fade(Iâ€™m just tired of lookinâ€™ the other way)Feels like a game(Iâ€™m just tired of lookinâ€™ the other way)You canâ€™t escape(Iâ€™m just tired of lookinâ€™ the other way) OutroI found outTreasures are always lostPleasures are long forgottenWho are you now? Appreciationâ€œPhantom Libertyâ€ by Dawid PodsiadÅ‚o &amp; P.T. Adamczyk explores themes of lost treasures, suppressed emotions, and the feeling of being trapped. The lyrics suggest a sense of danger and caution, urging the listener to be careful with their actions and movements. The line â€œI think the blood is dried, it cries for moreâ€ implies a craving for intensity and stimulation. There is an underlying desire to break free from a stagnant and monotonous existence. The chorus of the song emphasizes the feeling of being stuck and unable to escape. Wires and chains symbolize constraints and limitations, while the mention of fading suggests a loss of vitality or passion. The lyrics portray life as a game that one must play, even if it feels repetitive and meaningless. It hints at the idea that one may feel trapped by circumstances beyond their control. In the second verse, the lyrics delve into the darkness within someoneâ€™s mind. The narratorâ€™s inability to look into the eyes of another person suggests a lack of trust or fear of confronting their true intentions. There is a desire to bring an end to this twisted and oppressive situation, as indicated by the line â€œWe end it now, it ends right here, right now.â€ The idea of fading into the moon signifies a longing for escape or transcendence. The bridge reflects on the loss of better days and the frustration of not fully understanding the purpose behind certain experiences. The mention of hearing the clock suggests an awareness of time passing and the need to take action. Overall, â€œPhantom Libertyâ€ depicts a struggle with confinement, questioning the meaning of existence, and a yearning for freedom and liberation. æµè¡ŒéŸ³ä¹å¸¸ç”¨çš„æ­Œæ›²ç»“æ„ä¸€èˆ¬æ˜¯ ABABCBï¼Œä¹Ÿå°±æ˜¯Verse-Chorus-Verse-Chorus-Bridge-Chorusï¼Œ VERSE æ˜¯ä¸»æ­Œï¼Œ CHORUS æ˜¯å‰¯æ­Œ(chorus æœ‰åˆå”±ï¼Œå‰¯æ­Œçš„æ„æ€)ã€‚ Bridge æ˜¯ç»å¸¸å‡ºç°åœ¨ç¬¬äºŒæ®µå‰¯æ­Œä¹‹åçš„ä¹æ®µï¼Œä¸ºæ­Œæ›²æä¾›ä¸€äº›å˜åŒ–ã€å¢åŠ å¼ åŠ›ç­‰ã€‚ é•¿åº¦ä¸€èˆ¬æ˜¯ 4 æˆ– 8 å°èŠ‚ï¼Œä¹Ÿè¢«ç§°ä¸ºâ€œmiddle 8â€ï¼Œå…·ä½“æ—¶é•¿å–å†³äºæ­Œæ›²éœ€è¦","link":"/Essay/Game/Phantom-Liberty/"},{"title":"","text":"å”å¤šä»¤Â·èŠ¦å¶æ»¡æ±€æ´²å—å®‹ åˆ˜è¿‡ å®‰è¿œæ¥¼å°é›†ï¼Œä¾‘è§æ­Œæ¿ä¹‹å§¬é»„å…¶å§“è€…ï¼Œä¹è¯äºé¾™æ´²é“äººï¼Œä¸ºèµ‹æ­¤ã€Šå”å¤šä»¤ã€‹ã€‚åŒæŸ³é˜œä¹‹ã€åˆ˜å»éã€çŸ³æ°‘ç»ã€å‘¨å˜‰ä»²ã€é™ˆå­Ÿå‚ã€å­Ÿå®¹ã€‚æ—¶å…«æœˆäº”æ—¥ä¹Ÿã€‚ èŠ¦å¶æ»¡æ±€æ´²ï¼Œå¯’æ²™å¸¦æµ…æµã€‚äºŒåå¹´é‡è¿‡å—æ¥¼ã€‚æŸ³ä¸‹ç³»èˆ¹çŠ¹æœªç¨³ï¼Œèƒ½å‡ æ—¥ï¼Œåˆä¸­ç§‹ã€‚é»„é¹¤æ–­çŸ¶å¤´ï¼Œæ•…äººä»Šåœ¨å¦ï¼Ÿæ—§æ±Ÿå±±æµ‘æ˜¯æ–°æ„ã€‚æ¬²ä¹°æ¡‚èŠ±åŒè½½é…’ï¼Œç»ˆä¸ä¼¼ï¼Œå°‘å¹´æ¸¸ã€‚ åˆ›ä½œèƒŒæ™¯ å®‰è¿œæ¥¼ï¼Œåœ¨æ­¦æ˜Œé»„é¹„å±±ä¸Šï¼Œä¸€åå—æ¥¼ã€‚å»ºäº1186å¹´ï¼ˆæ·³ç†™åä¸‰å¹´ï¼‰ã€‚å§œå¤”æ›¾è‡ªåº¦ã€Šç¿ æ¥¼åŸã€‹è¯çºªä¹‹ã€‚åˆ˜è¿‡é‡è®¿å—æ¥¼ï¼Œè·ä¸Šæ¬¡ç™»è§ˆå‡ äºŒåå¹´ã€‚è¯äººåˆ˜è¿‡ä»¥å‚æš®ä¹‹èº«ï¼Œé€¢æ­¤ä¹±å±€ï¼Œè™½é£æ™¯ä¸æ®Šï¼Œå´è§¦ç›®æœ‰å¿§å›½ä¼¤æ—¶ä¹‹æ¸ã€‚è¿™ç§å¿ƒå¢ƒæ·±æ·±åœ°åæ˜ åˆ°ä»–çš„è¯ä¸­ã€‚ èµæ â€‹ åˆ˜è¿‡è¯èƒ½å¤Ÿåœ¨è¾›æ´¾é˜µè¥ä¸­å æ®é‡è¦ä¸€å¸­ï¼Œå¹¶ä¸ä»…ä»…æ˜¯å› ä¸ºé‚£äº›ä¸è¾›å¼ƒç–¾è±ªçºµæ£è‚†ä¹‹é£ç›¸è¿‘çš„ä½œå“ï¼Œè¿˜åœ¨äºé‚£äº›è±ªè¿ˆä¸­é¢‡æ˜¾ä¿Šè‡´çš„ç‹¬ç‰¹è¯é£ï¼Œæ­£å¦‚åˆ˜ç†™è½½æ‰€è¯´ï¼šâ€œåˆ˜æ”¹ä¹‹è¯ï¼Œç‹‚é€¸ä¹‹ä¸­è‡ªé¥¶ä¿Šè‡´ï¼Œè™½æ²‰ç€ä¸åŠç¨¼è½©ï¼Œè¶³ä»¥è‡ªæˆä¸€å®¶ã€‚â€ï¼ˆã€Šè‰ºæ¦‚ã€‹ï¼‰æ­¤è¯å°±æ˜¯è¿™ä¹ˆä¸€é¦–å…·æœ‰ç‹¬ç‰¹é£æ ¼çš„è¯ã€‚ è¿™æ˜¯ä¸€é¦–ç™»ä¸´åä½œã€‚ä½œè€…å€Ÿé‡è¿‡æ­¦æ˜Œå—æ¥¼ä¹‹æœºï¼Œæ„Ÿæ…¨æ—¶äº‹ï¼ŒæŠ’å†™æ˜”æ˜¯ä»Šéå’Œæ€€æ‰ä¸é‡çš„æ€æƒ³æ„Ÿæƒ…ã€‚å®‰è¿œæ¥¼ï¼Œåœ¨æ­¦æ˜Œé»„é¹„å±±ä¸Šï¼Œä¸€åå—æ¥¼ã€‚å»ºäº1186å¹´ï¼ˆæ·³ç†™åä¸‰å¹´ï¼‰ã€‚å§œå¤”æ›¾è‡ªåº¦ã€Šç¿ æ¥¼åŸã€‹è¯çºªä¹‹ã€‚å…¶å°åºäº‘â€œæ·³ç†™ä¸™åˆå†¬ï¼Œæ­¦æ˜Œå®‰è¿œæ¥¼æˆï¼Œä¸åˆ˜å»éè¯¸å‹è½ä¹‹ï¼Œåº¦æ›²è§å¿—â€ï¼Œå…·è½½å…¶äº‹ã€‚ åˆ˜è¿‡é‡è®¿å—æ¥¼ï¼Œè·ä¸Šæ¬¡ç™»è§ˆå‡ äºŒåå¹´ã€‚å½“æ—¶éŸ©ä¾‚èƒ„æŒæ¡å®æƒï¼Œè½»ä¸¾å¦„åŠ¨ï¼Œæ„æ¬²ä¼é‡‘ä»¥æˆå°±è‡ªå·±çš„â€œåŠŸåâ€ã€‚è€Œå½“æ—¶å—å®‹æœå»·å†›å¤‡åºŸé©°ï¼Œå›½åº“ç©ºè™šï¼Œå°†æ‰éš¾è§…ï¼Œä¸€æ—¦æŒ‘èµ·æˆ˜äº‰ï¼Œå°±ä¼šå…µè¿ç¥¸è¿ï¼Œç”Ÿçµæ¶‚ç‚­ã€‚è¯äººåˆ˜è¿‡ä»¥å‚æš®ä¹‹èº«ï¼Œé€¢æ­¤ä¹±å±€ï¼Œè™½é£æ™¯ä¸æ®Šï¼Œå´è§¦ç›®æœ‰å¿§å›½ä¼¤æ—¶ä¹‹æ¸ã€‚è¿™ç§å¿ƒå¢ƒæ·±æ·±åœ°åæ˜ åˆ°ä»–çš„è¯ä¸­ã€‚ è¯ä¸€èµ·ç”¨äº†ä¸¤ä¸ªå¶å¥ï¼Œç•¥ç‚¹æ™¯ç‰©ï¼Œå†™ç™»æ¥¼ä¹‹æ‰€è§ã€‚ ä½†æ—¢æ— é‡‘ç¢§æ¥¼å°ï¼Œä¹Ÿæ²¡å†™æ¸…å˜‰çš„å±±æ°´ã€‚å‘ˆç°åœ¨äººä»¬é¢å‰çš„åªæ˜¯ä¸€æ³“å¯’æ°´ï¼Œæ»¡ç›®è’èŠ¦è€Œå·²ã€‚è¿™é‡Œçš„â€œæ»¡â€å­—å’Œâ€œå¯’â€å­—ä¸‹å¾—å¥½ï¼ŒæŠŠè§ç–çš„å¤–æ™¯åŒä½å¾Šçš„å¿ƒå¢ƒäº¤èåœ¨ä¸€èµ·ï¼Œå‹¾å‹’å‡ºä¸€å¹…é»¯æ·¡çš„ç”»é¢ï¼Œä¸ºå…¨è¯ç€ä¸Šäº†ä¸€å±‚â€œåº•è‰²â€ã€‚ç»†å‘³è¿™æ®‹èŠ¦æ»¡ç›®ã€æµ…æµå¦‚å¸¦çš„è¯å¢ƒï¼Œä¸æ­¢æ°”è±¡è§ç‘Ÿï¼Œè€Œä¸”å†™å‡ºäº†å±…é«˜ä¸´ä¸‹çš„çœºæœ›ä¹‹æ„Ÿæ¥ï¼Œæ˜¯ç»Ÿæ‘„å…¨ç¯‡çš„ä¼ ç¥ä¹‹ç¬”ã€‚æ¥ä¸‹å»ï¼Œä½œè€…ä»¥æ—¶ç©ºäº¤é”™çš„æŠ€æ³•æŠŠè¯ç¬”ä»ç©ºé—´çš„å‡­çœºæŠ˜å…¥æ—¶é—´çš„æº¯æ´„ï¼Œä»¥è™šé—´å®ï¼Œåˆ«èµ·æ³¢æ¾œã€‚â€œäºŒåå¹´é‡è¿‡å—æ¥¼â€ï¼Œä¸€å¥é‡ŒåŒ…å«äº†å¤šå°‘æ„Ÿæ…¨ï¼äºŒåå¹´å‰ï¼Œä¹Ÿå°±æ˜¯å®‰è¿œæ¥¼è½æˆä¸ä¹…ï¼Œåˆ˜è¿‡ç¦»å®¶èµ´è¯•ï¼Œæ›¾åœ¨è¿™é‡Œè¿‡äº†ä¸€æ®µç‹‚æ”¾ä¸ç¾çš„ç”Ÿæ´»ã€‚æ‰€è°“â€œé†‰æ§Œé»„é¹¤æ¥¼ï¼Œä¸€æ·èµŒç™¾ä¸‡ã€‚â€ï¼ˆã€Šæ¹–å­¦åˆ«è‹å¬åŸã€‹ï¼‰ä»¥åŠâ€œé»„é¹¤æ¥¼å‰è¯†æ¥šå¿ï¼Œå½©äº‘é‡å æ‹¥å¨‰å©·â€ï¼ˆã€Šæµ£æºªæ²™ã€‚èµ å¦“å¾æ¥šæ¥šã€‹ï¼‰ï¼Œè¿™å°±æ˜¯ä»–å½“å¹´æ¸¸è¸ªçš„å‰ªå½±ã€‚äºŒåå¹´è¿‡å»äº†ï¼Œå¯æ˜¯ä»¥èº«è®¸å›½çš„åˆ˜è¿‡å´â€œå››ä¸¾æ— æˆï¼Œåå¹´ä¸è°ƒâ€ï¼Œä»ç„¶ä¸€è¢­å¸ƒè¡£ã€‚æ­¤æ—¶æ•…åœ°é‡ç»ï¼Œè€Œä¸”æ˜¯åœ¨è¿™ä¸ªå±æœºå››ä¼ç¥¸ä¹±ä¸è¿œçš„æ—¶å€™ï¼Œæ€ä¸ä»¤äººå‡„ç„¶ä»¥æ‚²å‘¢ï¼Ÿå¥ä¸­çš„â€œè¿‡â€å­—ç‚¹æ˜æ­¤è¡Œä¸è¿‡æ˜¯â€œè§£éå°‘é©»åˆç¨‹â€çš„æš‚æ­‡è€Œå·²ï¼Œå¹¶ä¸ºä¸‹æ–‡ä¼çº¿ã€‚â€œæŸ³ä¸‹â€ä¸‰å¥ï¼Œä¸€æ³¢ä¸‰æŠ˜ï¼Œæ–‡éšæ„è½¬ï¼Œæè§å·¥åŠ›ã€‚â€œæœªç¨³â€ä¸Šæ‰¿â€œè¿‡â€å­—ï¼Œè¯´æ˜è¡Œè‰²åŒ†åŒ†ï¼Œé’©é”ç´§å¯†ï¼Œè§å‡ºæ–‡å¿ƒä¹‹ç»†ã€‚â€œèƒ½å‡ æ—¥ï¼Œåˆä¸­ç§‹â€ï¼Œæ„è°“ä¸æ¶ˆå‡ å¤©ï¼Œä¸­ç§‹åˆæ¥åˆ°äº†ã€‚ä¸€ç§æ—¶åºå‚¬äººçš„å¿§å¿ƒã€çƒˆå£«æš®å¹´çš„æ‚²æ„Ÿå’Œæ— å¯å¥ˆä½•çš„å¹å–Ÿéƒ½ä»è¿™ä¸€ä¸ªâ€œåˆâ€å­—é‡Œæ³„éœ²å‡ºæ¥ã€‚ä¸‰å¥è¿­ç”¨â€œçŠ¹â€ã€â€œèƒ½â€ã€â€œåˆâ€ç­‰è™šå­—å‘¼åº”ææºï¼ŒçœŸèƒ½å°†è¯äººçµé­‚çš„çš±æŠ˜æ·‹æ¼“å°½è‡´åœ°æ­ç¤ºæ— ä½™ã€‚ è¿‡ç‰‡ä»¥åçº¯ä¹å†™æƒ…ï¼Œéƒ½ä»â€œé‡è¿‡â€ä¸€ä¹‰ç”Ÿå‘ã€‚æ›°â€œæ•…äººâ€ï¼Œæ›°â€œæ—§æ±Ÿå±±â€ï¼Œæ›°â€œæ–°æ„â€ï¼Œæ›°â€œä¸ä¼¼â€ï¼Œè«ä¸å¦‚æ­¤ã€‚ç« æ³•ä¹‹ç²¾ä¸¥ï¼Œé£æ ¼ä¹‹æµ‘æˆï¼Œå ªç§°ã€Šé¾™æ´²è¯ã€‹ä¸­ä¸Šä¸Šä¹‹ä½œã€‚â€œé»„é¹¤â€äºŒå¥ä»è®¾é—®æèµ·ï¼Œå¦™å¤„åœ¨èƒ½ä»è™šé™…è½¬èº«ã€‚â€œçŸ¶å¤´â€ä¸Šç¼€ä¸€â€œæ–­â€å­—ï¼Œä¾¿æœ‰æ®‹å±±å‰©æ°´çš„å‡„å‡‰æ„å‘³ï¼Œä¸æ˜¯æ³›æ³›ä¹‹ç¬”ã€‚â€œæ—§æ±Ÿå±±æµ‘æ˜¯æ–°æ„â€ï¼Œæ˜¯æ·±åŒ–é¢˜æ—¨ä¹‹é‡ç¬”ã€‚å‰æ­¤ç§ç§ç°é»¯çš„å¿ƒç»ªï¼Œæ‰€ä¸ºä¼Šä½•ï¼Ÿ éš¾é“ä»…ä»…æ˜¯æ€€äººã€ç—…é…’ã€å¹è€ã€æ‚²ç§‹ä¹ˆï¼Ÿè¢«å®‹å­è™šèª‰ä¸ºâ€œå¤©ä¸‹å¥‡ç”·å­ï¼Œå¹³ç”Ÿä»¥æ°”ä¹‰æ’¼å½“ä¸–â€ï¼ˆã€Šé¾™æ´²è¯è·‹ã€‹ï¼‰çš„åˆ˜è¿‡æ˜¯ä¸ä¼šè‡ªæººäºæ­¤çš„ï¼Œåˆ˜è¿‡æ­¤è¯çš„å¿§å›½ä¼¤æ—¶ä¹‹æ„Ÿæ— ç–‘è¦é«˜äºå®‹ç‰ã€Šä¹è¾¨ã€‹å•çº¯çš„å¯’åœŸæ‚²ç§‹ä¹‹æ„Ÿã€‚ä»–æ­¤åˆ»æ‰€æ„Ÿå—çš„å·¨å¤§çš„æ„è‹¦ï¼Œå°±æ˜¯å¯¹éŸ©ä¾‚èƒ„å¼•ç«çš„å†’é™©æ”¿ç­–çš„æ‹…å¿§ï¼Œå°±æ˜¯å¯¹æ±Ÿæ²³æ—¥ä¸‹çš„å—å®‹æ”¿å±€çš„æ‚²ç—›ã€‚ æ—§æ—¥çš„å£®ä¸½æ±Ÿå±±ç¬¼ç½©ç€æˆ˜äº‰çš„é˜´å½±ï¼Œè€Œä»–å¯¹äºè¿™åœºå¯æ€•çš„ç¾éš¾ç«Ÿç„¶æ— èƒ½ä¸ºåŠ›ï¼Œè¿™æ€ä¹ˆä¸æ•™äººæ‚²ä»ä¸­æ¥ä¸å¯æ–­ç»å‘¢ï¼Ÿâ€œæµ‘æ˜¯æ–°æ„â€ï¼Œå››å­—åŒ…æ‹¬ä¸‰å±‚å«ä¹‰ã€‚æœ¬æœ‰æ—§æ„ï¼Œæ˜¯ä¸€å±‚ï¼›æ·»äº†æ–°æ„ï¼Œæ˜¯ç¬¬äºŒå±‚ã€‚æ„åˆ°äº†â€œæµ‘æ˜¯â€çš„ç¨‹åº¦ï¼Œæè¨€åˆ†é‡ä¹‹é‡ï¼Œæ˜¯ç¬¬ä¸‰å±‚ã€‚æ—§æ„ä¸ºä½•ï¼Ÿå°±æ˜¯ä»–ã€Šå¿†é„‚æ¸šã€‹è¯—æ‰€äº‘â€œä¹¦ç”Ÿå²‚æ— ä¸€ç­–å¥‡ï¼Œå©é˜å‡»é¼“å¤©ä¸çŸ¥â€ä¹‹æ€€æ‰ä¸é‡æŠ¥å›½æ— é—¨çš„è‹¦é—·ã€‚å’ç« ä¸‰å¥ä¹°èŠ±è½½é…’ï¼Œæœ¬æƒ³è‹¦ä¸­æ±‚ä¹ï¼Œæ¥é©±æ•£ä¸€ä¸‹å¿ƒå¤´çš„æ„ç»ªã€‚å¯æ˜¯è¿™å®¶å›½æ¨ã€èº«ä¸–æ„åˆå²‚æ˜¯äº›è®¸èŠ±é…’æ‰€å†²æ·¡å¾—äº†çš„ï¼å…ˆç”¨â€œæ¬²â€å­—ä¸€é¡¿ï¼Œæå‡ºæ¸¸ä¹çš„æ„æ„¿ï¼Œæ¥ç€ç”¨â€œä¸ä¼¼â€ä¸€è½¬ï¼Œåˆ™çºµå»ä¹Ÿæ— å¤å½“å¹´ä¹è¶£ï¼Œè¡¨ç¤ºäº†å¦å®šçš„æ€åº¦ã€‚â€œå°‘å¹´â€ï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒå®½æ³›çš„æ¦‚å¿µï¼Œç›¸å¯¹è€Œè¨€ã€‚åˆ˜è¿‡åˆåˆ°å—æ¥¼ï¼Œå¹´æ–¹ä¸‰åï¼Œæ•…å¯ç§°ä¸ºå°‘å¹´ã€‚ä¸”å¯ä¸ä¸Šç‰‡ä¹‹â€œäºŒåå¹´é‡è¿‡å—æ¥¼â€ç›¸ç»¾åˆï¼Œè®ºå…¶ç« æ³•ï¼Œç¡®æœ‰è‰è›‡ç°çº¿ä¹‹å¦™ã€‚å¦‚æ­¤ç»“å°¾ï¼Œæ—¢æ²‰éƒåˆæµ‘æˆï¼Œä»¤äººè¯»ä¹‹æœ‰æ— ç©·å“€æ„Ÿã€‚ åˆ˜è¿‡çš„çˆ±å›½è¯ç¯‡ï¼Œå¤šä¸ºè±ªçˆ½å¥”æ”¾ï¼Œç—›å¿«æ·‹æ¼“ä¹‹ä½œã€‚ä½†è¿™é¦–ã€Šå”å¤šä»¤ã€‹å´å†™å¾—è•´è—‰å«è“„ï¼Œè€äººå’€åš¼ã€‚ä¸å…¶ä»–çˆ±å›½è¯æ¯”è¾ƒï¼Œçš„ç¡®åˆ«å…·ä¸€æ ¼ï¼Œæ•…è€Œæµä¼ ç”šå¹¿ã€‚ã€Šå”å¤šä»¤ã€‹ï¼ŒåŸä¸ºåƒ»è°ƒï¼Œç½•æœ‰å¡«è€…ã€‚è‡ªåˆ˜è¯å‡ºè€Œå’Œè€…å¦‚æ—ï¼Œå…¶è°ƒä¹ƒæ˜¾ã€‚åˆ˜è¾°ç¿å³è¿½å’Œä¸ƒé˜•ï¼Œå‘¨å¯†è€Œå› å…¶æœ‰â€œé‡è¿‡å—æ¥¼â€ä¹‹è¯­ï¼Œä¸ºæ›´åæ›°ã€Šå—æ¥¼ä»¤ã€‹ã€‚å¯è§æ­¤è¯å½±å“ä¹‹å¤§","link":"/Essay/Poems/%E3%80%8A%E5%94%90%E5%A4%9A%E4%BB%A4%C2%B7%E8%8A%A6%E5%8F%B6%E6%BB%A1%E6%B1%80%E6%B4%B2%E3%80%8B/"},{"title":"ã€Šæ–°å°ã€‹","text":"p { text-indent: 2em; } .poem { /* font-family: Microsoft JhengHei; */ font-family: æ¥·ä½“; font-style: bold; font-size: 30px; background-color:rgba(210, 180, 140, 0.1); border: 3px solid rgba(0, 0, 0, 0.1); /* æ›´æ”¹è¾¹æ¡†é¢œè‰²å’Œé€æ˜åº¦ */ padding: 20px; margin: 10px; border-radius: 10px; /* box-shadow: 10px 10px 20px rgba(0, 0, 0, 0.1); */ } .admiration { font-family: Microsoft JhengHei; font-style: bold; } æ–°å°æœ‰æ³š æ²³æ°´å¼¥å¼¥ ç‡•å©‰ä¹‹æ±‚ è˜§ç¯¨ä¸é²œ æ–°å°æœ‰æ´’ æ²³æ°´æµ¼æµ¼ ç‡•å©‰ä¹‹æ±‚ è˜§ç¯¨ä¸æ®„ é±¼ç½‘ä¹‹è®¾ é¸¿åˆ™ç¦»ä¹‹ ç‡•å©‰ä¹‹æ±‚ å¾—æ­¤æˆšæ–½ æ³¨é‡Š æ–°å°ï¼šå°åï¼Œå«å®£å…¬ä¸ºçº³å®£å§œæ‰€ç­‘ï¼Œæ•…å€åœ¨ä»Šå±±ä¸œçœç”„åŸå¿é»„æ²³åŒ—å²¸ã€‚å°ï¼šå°åŸºï¼Œå®«åŸºï¼Œæ–°å»ºçš„æˆ¿å­ã€‚ æœ‰ï¼šè¯­åŠ©è¯ï¼Œåšå½¢å®¹è¯è¯å¤´ï¼Œæ— å®ä¹‰ã€‚ æœ‰æ³šï¼ˆcÇï¼‰ï¼šé²œæ˜çš„æ ·å­ã€‚ æ²³ï¼šæŒ‡é»„æ²³ã€‚å¼¥ï¼ˆmÃ­ï¼‰å¼¥ï¼šæ°´ç››å¤§çš„æ ·å­ã€‚ ç‡•å©‰ï¼šæŒ‡å¤«å¦‡å’Œå¥½ã€‚ç‡•ï¼Œå®‰ï¼›å©‰ï¼Œé¡ºã€‚ ç±§ï¼ˆqÃºï¼‰ç¯¨ï¼ˆchÃºï¼‰ï¼šä¸èƒ½ä¿¯è€…ã€‚å¤ä»£é’Ÿé¼“æ¶ä¸‹å…½å½¢çš„æŸï¼Œå…¶å…½ä¼¼è±•ï¼Œè¹²å…¶åè¶³ï¼Œä»¥å‰è¶³æ®æŒå…¶èº«ï¼Œä»°é¦–ä¸èƒ½ä¿¯è§†ã€‚å–»èº«æœ‰æ®‹ç–¾ä¸èƒ½ä¿¯è§†ä¹‹äººï¼Œæ­¤å¤„è®¥è®½å«å®£å…¬å¹´è€ä½“è¡°è…°è„Šåƒµç¡¬çŠ¶ã€‚ä¸€è¯´æŒ‡ç™è›¤èŸ†ä¸€ç±»çš„ä¸œè¥¿ã€‚é²œï¼ˆxiÇnï¼‰ï¼šå°‘ï¼ŒæŒ‡å¹´å°‘ã€‚ä¸€è¯´å–„ã€‚ æ´’ï¼ˆcuÇï¼‰ï¼šé«˜å³»çš„æ ·å­ã€‚ æµ¼ï¼ˆmÄ›iï¼‰æµ¼ï¼šæ°´ç››å¤§çš„æ ·å­ã€‚ æ®„ï¼ˆtiÇnï¼‰ï¼šé€šâ€œè…†â€ï¼Œä¸°åšï¼Œç¾å¥½ã€‚ è®¾ï¼šè®¾ç½®ã€‚ é¸¿ï¼šè›¤èŸ†ï¼Œä¸€è¯´å¤§é›ã€‚ç¦»ï¼šç¦»å¼€ã€‚ä¸€è¯´ç¦»é€šâ€œä¸½â€ï¼Œé™„ç€ï¼Œé­é‡ã€‚ä¸€è¯´ç¦»é€šâ€œç½¹â€ï¼Œé­å—ï¼Œé­é‡ï¼Œè¿™é‡ŒæŒ‡è½ç½‘ã€‚ æˆšæ–½ï¼ˆshÄ«ï¼‰ï¼šèŸ¾èœï¼Œè›¤èŸ†ï¼Œå…¶å››è¶³æ®åœ°ï¼Œæ— é¡»ï¼Œä¸èƒ½ä»°è§†ï¼Œå–»è²Œä¸‘é©¼èƒŒä¹‹äºº è¯‘æ–‡æ–°å°æ˜ä¸½åˆè¾‰ç…Œï¼Œæ²³æ°´æ´‹æ´‹ä¸œæµæ·Œã€‚æœ¬æƒ³å«ä¸ªå¦‚æ„éƒï¼Œå´æ˜¯ä¸‘å¾—è›¤èŸ†æ ·ã€‚ æ–°å°é«˜å¤§åˆå£®ä¸½ï¼Œæ²³æ°´æ¼«æ¼«ä¸œæµå»ã€‚æœ¬æƒ³å«ä¸ªå¦‚æ„éƒï¼Œå´æ˜¯ä¸‘å¾—ä¸æˆæ ·ã€‚ è®¾å¥½é±¼ç½‘æŠŠé±¼æ•ï¼Œæ²¡æƒ³è›¤èŸ†ç½‘ä¸­æ¸¸ã€‚æœ¬æƒ³å«ä¸ªå¦‚æ„éƒï¼Œå¾—åˆ°å´æ˜¯å¦‚æ­¤ä¸‘ã€‚ é‰´èµæ­¤è¯—è‹¥æŒ‰æ—§è¯´ç†è§£ï¼Œä¸€ã€äºŒç« èµ‹é™ˆå…¶äº‹ï¼Œç¬¬ä¸‰ç« èµ·å…´ä»¥æ¯”ã€‚è¯—å¼€ç¯‡å³å¤¸è€€å«å®£å…¬å»ºé€ çš„æ–°å°æ˜¯å¤šä¹ˆå®ä¼Ÿåä¸½ï¼Œå…¶ä¸‹å¥”æµçš„æ·‡æ²³ä¹‹æ°´æ˜¯å¤šä¹ˆä¸°ç›ˆæµ©ç€šã€‚è¿™éƒ½æ˜¯æåŠ›æ¸²æŸ“å«å®£å…¬çš„èµ«èµ«å¨åŠ¿å’Œè£…ç‚¹é—¨é¢ï¼Œä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯å§œæ°ï¼ˆå®£å§œï¼‰çœ¼ä¸­æ‰€è§ï¼Œå·²è¢«å®£å…¬çš„è¡¨é¢ç°è±¡è¿·æƒ‘äº†ã€‚å¥¹æœ¬ä¸ºæ˜¯å«è¿‡æ¥è¿½æ±‚ç‡•å©‰ä¹‹å¥½ï¼Œæƒ³è¿‡ä¸€ç§éƒæ‰å¥³è²Œã€ç´ç‘Ÿå’Œè°çš„å¹¸ç¦ç”Ÿæ´»çš„ï¼Œå´ä¸æ–™æˆäº†ä¸€ä¸ªç³Ÿè€å¤´å­çš„æŒä¸­ç©ç‰©ã€‚ å…¨è¯—ä¸‰ç« ï¼Œå‰ä¸¤ç« å å’ã€‚å å’çš„ä¸¤ç« å‰äºŒå¥æ˜¯å…´è¯­ï¼Œä½†å…´ä¸­æœ‰èµ‹ï¼šå«å®£å…¬æ¬²å¤ºæœªå©šä¹‹å„¿åª³ï¼Œå…ˆé€ â€œæ–°å°â€ï¼Œæ¥è¡¨ç¤ºäº‹ä»¶çš„åˆæ³•æ€§ï¼Œå…¶å®æ˜¯éšœçœ¼æ³•ã€‚å¥½æ¯”å”æ˜çš‡æ¬²å¤ºå…¶å­å¯¿ç‹å¦ƒå³æ¨ç‰ç¯ï¼Œå…ˆè®©å¥¹å…¥é“è§‚åšå¥³è§‚ä¸€æ ·ï¼Œå¥½åƒè¿™ä¸€æ¥ï¼Œä¸€åˆ‡å°±åˆç†åˆæ³•äº†ã€‚ç„¶è€Œä¸‘è¡Œå°±æ˜¯ä¸‘è¡Œï¼Œä¸‘è¡Œæ˜¯æ¬²ç›–å¼¥å½°çš„ã€‚è¯—äººå¤§èµâ€œæ–°å°æœ‰æ³šâ€â€œæ–°å°æœ‰æ´’â€ï¼Œæ­£è¨€æ¬²åï¼Œå…¶å…´å‘³åœ¨äºï¼Œæ–°å°æ˜¯ç¾çš„ï¼Œä½†é®ä¸ä½è€å¤´å­å¹²çš„ä¸‘äº‹ã€‚è¿™é‡Œæ˜¯è¿ç”¨åå½¢ï¼ˆæˆ–åè¡¬ï¼‰çš„ä¿®è¾æ‰‹æ³•ï¼Œä½¿ç¾æ„ˆç¾ï¼Œä¸‘æ„ˆä¸‘ã€‚ â€œæ–°å°â€ä¹‹äº‹çš„ç›´æ¥å—å®³è€…æ˜¯å®£å§œï¼šç¾ä¸½çš„å°‘å¥³é…äº†ä¸ªç³Ÿè€å¤´ï¼Œè€Œä¸”è¿˜æ˜¯ä¸ªé©¼èƒŒé¸¡èƒ¸ï¼Œæœ¬æ¥è¯¥åšå¥¹è€å…¬å…¬çš„äººã€‚â€œé±¼ç½‘ä¹‹è®¾ï¼Œé¸¿åˆ™ç¦»ä¹‹ã€‚â€æ‰“é±¼æ‰“ä¸ªç™è™¾èŸ†ï¼Œæ˜¯éå¸¸å€’æ¥£ï¼Œéå¸¸ä¸§æ°”ï¼Œåˆéå¸¸æ— å¥ˆçš„äº‹ã€‚æŒ‰ç…§é—»ä¸€å¤šã€Šè¯—ç»é€šä¹‰ã€‹ä¸­çš„è¯´æ³•ï¼šâ€œã€Šå›½é£ã€‹ä¸­å‡¡è¨€é±¼è€…ï¼Œçš†ä¸¤æ€§é—´äº’ç§°å…¶å¯¹æ–¹ä¹‹è™è¯­ï¼ˆéšè¯­ï¼‰ï¼Œæ— ä¸€å®æ‹¾é±¼è€…ã€‚â€å¤ä»Šè¯—æ­Œä¸­ä»¥æ•é±¼ã€é’“é±¼å–»ç”·å¥³æ±‚å¶ä¹‹äº‹çš„æ°‘æ­Œå¾ˆå¤šã€‚ä¾‹å¦‚æ±‰ä¹åºœæ°‘æ­Œã€Šæ±Ÿå—æ›²ã€‹ï¼šâ€œæ±Ÿå—å¯é‡‡è²ï¼Œè²å¶ä½•ç”°ç”°ï¼Œé±¼æˆè²å¶é—´ã€‚é±¼æˆè²å¶ä¸œï¼Œé±¼æˆè²å¶è¥¿ï¼Œé±¼æˆè²å¶å—ï¼Œé±¼æˆè²å¶åŒ—ã€‚â€ã€Šåƒ®äººæƒ…æ­Œã€‹ï¼šâ€œå¤©ä¸Šæ— é£ç‡•å­é£ï¼Œæ±Ÿæ²³æ— æ°´ç°æ²™ç£Šã€‚é±¼åœ¨æ·±å¡˜ç©ºå¾—è§ï¼Œå“„å“¥ç©ºæŠŠç½‘æ¥å›´ã€‚â€å³æ˜¯æ˜¾ä¾‹ã€‚æ­¤è¯—ä¸­æ‰€å†™çš„å°±æ˜¯å¥³å­å¯¹å©šå§»çš„å¹»æƒ³å’Œç°å®çš„ç›¸æ‚–ï¼Œæ„æˆå¼‚å¸¸å¼ºçƒˆçš„å¯¹æ¯”ï¼Œäº§ç”Ÿäº†å¼‚ä¹å¯»å¸¸çš„è‰ºæœ¯æ•ˆæœã€‚è¿™é‡Œå¼ºçƒˆåœ°è¡¨æ˜ï¼šå®£å§œå¯çœŸæ˜¯å€’æ¥£é€äº†ã€‚è¯—ä¸­â€œæ²³æ°´å¼¥å¼¥â€â€œæ²³æ°´æµ¼æµ¼â€ï¼Œäº¦ä¼¼æœ‰æš—å–»å®£å§œæ³ªæµä¸æ­¢ä¹‹æ„ï¼Œå°±å¦‚ã€Šå«é£Â·æ°“ã€‹â€œæ·‡æ°´æ±¤æ±¤ï¼Œæ¸è½¦å¸·è£³â€ä»¥åŠè¾›å¼ƒç–¾ã€Šè©è¨è›®Â·ä¹¦æ±Ÿè¥¿é€ å£å£ã€‹â€œéƒå­¤å°ä¸‹æ¸…æ±Ÿæ°´ï¼Œä¸­é—´å¤šå°‘è¡Œäººæ³ªâ€æ‰€è¡¨ç°çš„é‚£æ ·ï¼Œæ¸²æŸ“å‡ºä¸€ç§æµ“åšçš„æ‚²å‰§æ°›å›´","link":"/Essay/Poems/%E3%80%8A%E6%96%B0%E5%8F%B0%E3%80%8B/"},{"title":"ã€Šè¿‡æ¾åŸæ™¨ç‚Šæ¼†å…¬åº—å…­é¦–ã€‹","text":"p { text-indent: 2em; } .poem { /* font-family: Microsoft JhengHei; */ font-family: æ¥·ä½“; font-style: bold; font-size: 30px; background-color:rgba(210, 180, 140, 0.1); border: 3px solid rgba(0, 0, 0, 0.1); /* æ›´æ”¹è¾¹æ¡†é¢œè‰²å’Œé€æ˜åº¦ */ padding: 20px; margin: 10px; border-radius: 10px; /* box-shadow: 10px 10px 20px rgba(0, 0, 0, 0.1); */ } .admiration { font-family: Microsoft JhengHei; font-style: bold; } [å®‹] æ¨ä¸‡é‡Œ ä¾§å¡åƒå±±ç¼ä¹Ÿæ— ï¼Œä¸Šå¤©ä¸‹äº•ä¸‡å´å²–ã€‚ æ˜¨æœæ›¾è¿‡èŠ™è“‰æ¸¡ï¼Œå¯»åˆ°æºªæºä¸€çº¿åˆã€‚ å±±åŒ—æºªå£°ä¸€è·¯è¿ï¼Œå±±å—æºªå“é€äººè¡Œã€‚ ä¹ŸçŸ¥æµå‘é‡‘é™µå»ï¼Œè‹¥è¿‡é‡‘é™µè«å¯„å£°ã€‚ åå±±å‹’æ°´å‘ä¸œé©°ï¼Œå´è¢«å‰å±±å‹’å‘è¥¿ã€‚ é“æ˜¯æ°´æŸ”æ— æ€§æ°”ï¼Œæ€¥å£°å£°æ€’æ…¢å£°æ‚²ã€‚ æ—¥é«˜è°·åº•å§‹å¾®æš„ï¼Œå²šç¿ ä¾ç„¶é€éª¨å¯’ã€‚ è¯´ä¸è¡Œäººå¿™åº•äº‹ï¼Ÿé‡‘é¸¡å£°é‡Œä¿ƒé“¶éã€‚ è«è¨€ä¸‹å²­ä¾¿æ— éš¾ï¼Œèµšå¾—è¡Œäººé”™å–œæ¬¢ã€‚ æ”¿å…¥ä¸‡å±±å›´å­é‡Œï¼Œä¸€å±±æ”¾å‡ºä¸€å±±æ‹¦ã€‚ æ”¿æ˜¯è¡Œäººè‚ æ–­æ—¶ï¼Œå­è§„å¾—å¾—å‘äººå•¼ã€‚ è‹¥èƒ½æ³ªå¾—å±…äººè„¸ï¼Œå§‹ä¿¡æ˜¥æ„æ€»ä¸ºä¼Šã€‚ æ³¨é‡Š æ¾æºã€æ¼†å…¬åº—ï¼šåœ°åï¼Œå½“ä»Šåœ¨ä»Šçš–å—å±±åŒºï¼ˆåœ¨ä»Šæ±Ÿè¥¿å¼‹é˜³ä¸ä½™æ±Ÿä¹‹é—´ï¼‰ ä¾§å¡ï¼šç§¯æ»¡å……å¡è²Œï¼ˆç§¯æ»¡å……å¡çš„æ ·å­ï¼‰ æ˜¨æœï¼šæ˜¨å¤© å¯„å£°ï¼šæ‰˜äººä¼ è¯ å‹’ï¼šçº¦æŸ æš„ï¼šæ¸©æš– å²šç¿ ï¼šè‹ç¿ è‰²çš„å±±é›¾(ä¸‰åå…­å³°æ™´ï¼Œé›ªé”€å²šç¿ ç”Ÿâ€”â€”ç™½å±…æ˜“ã€Šæ—©æ˜¥é¢˜å°‘åä¸œå²©ã€‹) åº•äº‹ï¼šä½•äº‹ é“¶éï¼šé“¶é¥°çš„é©¬éã€‚ä»£æŒ‡éªé©¬ æ”¿å…¥ï¼šæ°å¥½è¿›å…¥ å­è§„ï¼šæœé¹ƒé¸Ÿçš„åˆ«åã€‚ä¼ è¯´ä¸ºèœ€å¸æœå®‡çš„é­‚é­„æ‰€åŒ–ã€‚å¸¸å¤œé¸£ï¼Œå£°éŸ³å‡„åˆ‡ï¼Œæ•…å€Ÿä»¥æŠ’æ‚²è‹¦å“€æ€¨ä¹‹æƒ… å¾—å¾—ï¼šé¢‘é¢‘ï¼Œé¢‘ä» å±…äººï¼šå®¶å±…çš„äººï¼Œç•™å±…çš„äºº(å¦»å­) ä¼Šï¼šç¬¬ä¸‰äººç§°ä»£è¯ï¼Œå®ƒ åˆ›ä½œèƒŒæ™¯ æ¨ä¸‡é‡Œä¸€ç”ŸåŠ›ä¸»æŠ—æˆ˜ï¼Œåå¯¹å±ˆè†æŠ•é™ï¼Œæ‰€ä»¥ä¸€ç›´ä¸å¾—é‡ç”¨ã€‚å®‹å­å®—ç™»åŸºåï¼Œä¾¿è¢«å¤–æ”¾åšå®˜ã€‚å®‹å…‰å®—ç»ç†™å…ƒå¹´ï¼ˆ1190ï¼‰åä¸€æœˆï¼Œæ¨ä¸‡é‡Œä»¥ç›´é¾™å›¾é˜å‡ºä¸ºæ±Ÿä¸œè½¬è¿å‰¯ä½¿ï¼Œæƒé¢†æ·®è¥¿ã€æ±Ÿä¸œå†›é©¬é’±ç²®ï¼Œæ²»æ‰€åœ¨å»ºåº·ï¼ˆä»Šæ±Ÿè‹å—äº¬ï¼‰ã€‚ç»ç†™ä¸‰å¹´ï¼ˆ1192ï¼‰å…«æœˆï¼Œæ”¹çŸ¥èµ£å·ï¼Œä¸èµ´ï¼Œä¹ç¥ ã€‚ã€Šè¿‡æ¾æºæ™¨ç‚Šæ¼†å…¬åº—å…­é¦–ã€‹è¿™ç»„è¯—ç¬¬å…­é¦–ä¸­â€œæ”¿æ˜¯è¡Œäººè‚ æ–­æ—¶ï¼Œå­è§„å¾—å¾—å‘äººå•¼â€ä¸ã€Šåˆæ†©é©¬å®¶åº—ã€‹ä¸­â€œç”Ÿè¡£å…¼è‰é¸ï¼Œå¹´ä¾‹è¯•æ˜¥é£â€æ­£ç›¸åˆï¼Œæ—¢ç§°â€œå¹´ä¾‹â€ï¼ˆæ¯å¹´å¦‚æ­¤ï¼‰ï¼Œå¯çŸ¥éç»ç†™äºŒå¹´äº‹ï¼Œå½“ä½œäºç»ç†™ä¸‰å¹´æ˜¥ï¼Œè¯—äººæ—¶å¹´å…­åå…­å²ã€‚ä»–å¤–å‡ºé€”ç»æ¾æºæ—¶ï¼Œè§ç¾¤å±±ç¯ç»•ï¼Œæ„Ÿæ…¨ä¸å·²ï¼Œäºæ˜¯å†™ä¸‹ã€Šè¿‡æ¾æºæ™¨ç‚Šæ¼†å…¬åº—å…­é¦–ã€‹è¿™ç»„è¯—ã€‚ ä½œè€…ä»‹ç» æ¨ä¸‡é‡Œï¼ˆ1127å¹´10æœˆ29æ—¥ï¼1206å¹´6æœˆ15æ—¥ï¼‰ï¼Œå­—å»·ç§€ï¼Œå·è¯šæ–‹ã€‚å‰å·å‰æ°´ï¼ˆä»Šæ±Ÿè¥¿çœå‰æ°´å¿é»„æ¡¥é•‡æ¹´å¡˜æ‘ï¼‰äººã€‚å—å®‹è‘—åè¯—äººã€å¤§è‡£ï¼Œä¸é™†æ¸¸ã€å°¤è¢¤ã€èŒƒæˆå¤§å¹¶ç§°ä¸ºâ€œä¸­å…´å››å¤§è¯—äººâ€ã€‚å› å®‹å…‰å®—æ›¾ä¸ºå…¶äº²ä¹¦â€œè¯šæ–‹â€äºŒå­—ï¼Œæ•…å­¦è€…ç§°å…¶ä¸ºâ€œè¯šæ–‹å…ˆç”Ÿâ€ã€‚æ¨ä¸‡é‡Œä¸€ç”Ÿä½œè¯—ä¸¤ä¸‡å¤šé¦–ï¼Œä¼ ä¸–ä½œå“æœ‰å››åƒäºŒç™¾é¦–ï¼Œè¢«èª‰ä¸ºä¸€ä»£è¯—å®—ã€‚ä»–åˆ›é€ äº†è¯­è¨€æµ…è¿‘æ˜ç™½ã€æ¸…æ–°è‡ªç„¶ï¼Œå¯Œæœ‰å¹½é»˜æƒ…è¶£çš„â€œè¯šæ–‹ä½“â€ã€‚æ¨ä¸‡é‡Œçš„è¯—æ­Œå¤§å¤šæå†™è‡ªç„¶æ™¯ç‰©ï¼Œä¸”ä»¥æ­¤è§é•¿ã€‚ä»–ä¹Ÿæœ‰ä¸å°‘ç¯‡ç« åæ˜ æ°‘é—´ç–¾è‹¦ã€æŠ’å‘çˆ±å›½æ„Ÿæƒ…çš„ä½œå“ã€‚è‘—æœ‰ã€Šè¯šæ–‹é›†ã€‹ç­‰","link":"/Essay/Poems/%E3%80%8A%E8%BF%87%E6%9D%BE%E5%8E%9F%E6%99%A8%E7%82%8A%E6%BC%86%E5%85%AC%E5%BA%97%E5%85%AD%E9%A6%96%E3%80%8B/"},{"title":"ARMå¤„ç†å™¨åŠç³»ç»Ÿç»“æ„","text":"ARM ä»‹ç»ARMï¼ˆAdvanced RISC Machinesï¼‰æœ‰ 3 ç§å«ä¹‰ï¼š æ˜¯ä¸€ä¸ªå…¬å¸çš„åç§°; æ˜¯ä¸€ç§æŠ€æœ¯çš„åç§° æ˜¯ä¸€ç±»å¾®å¤„ç†å™¨çš„é€šç§°; åŸºäº ARM æŠ€æœ¯ çš„å¾®å¤„ç†å™¨åº”ç”¨çº¦å æ®äº† 32 ä½ RISC å¾®å¤„ç†å™¨ 80% ä»¥ä¸Šçš„å¸‚åœºä»½é¢ï¼Œå…¶ä¸­ï¼Œåœ¨æ‰‹æœºå¸‚åœºï¼ŒARM å æœ‰ç»å¯¹çš„å„æ–­åœ°ä½ã€‚ å¤„ç†å™¨ Processorï¼ˆä¹Ÿç§°ä¸ºä¸­å¤®å¤„ç†å•å…ƒæˆ– CPUï¼‰æ˜¯è®¡ç®—æœºçš„æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒè´Ÿè´£æ‰§è¡Œå¤§éƒ¨åˆ†çš„è®¡ç®—å’Œé€»è¾‘æ“ä½œã€‚å¤„ç†å™¨ä¸ä»…åŒ…æ‹¬å¤„ç†èŠ¯ç‰‡ï¼Œè¿˜æœ‰å…¶ä»–å‡ ä¸ªå…³é”®çš„éƒ¨åˆ†: å†…æ ¸ï¼ˆCoresï¼‰ï¼šç°ä»£å¤„ç†å™¨é€šå¸¸åŒ…å«å¤šä¸ªå†…æ ¸ï¼Œæ¯ä¸ªå†…æ ¸éƒ½å¯ä»¥ç‹¬ç«‹æ‰§è¡ŒæŒ‡ä»¤ã€‚å¤šæ ¸å¤„ç†å™¨å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œæé«˜äº†æ€§èƒ½ã€‚ ç¼“å­˜ï¼ˆCacheï¼‰ï¼šç¼“å­˜æ˜¯ä¸€ç§å¿«é€Ÿå­˜å‚¨å™¨ï¼Œç”¨äºå­˜å‚¨å¤„ç†å™¨å¯èƒ½éœ€è¦çš„æ•°æ®å’ŒæŒ‡ä»¤ã€‚é€šè¿‡ä½¿ç”¨ç¼“å­˜ï¼Œå¤„ç†å™¨å¯ä»¥å‡å°‘ä»ä¸»å†…å­˜è·å–æ•°æ®çš„æ—¶é—´ï¼Œæé«˜æ€§èƒ½ã€‚ æ§åˆ¶å•å…ƒï¼ˆControl Unitï¼‰ï¼šæ§åˆ¶å•å…ƒæ˜¯å¤„ç†å™¨çš„ä¸€ä¸ªéƒ¨åˆ†ï¼Œè´Ÿè´£ç®¡ç†å’Œåè°ƒå¤„ç†å™¨çš„æ“ä½œã€‚å®ƒè§£é‡Šå’Œæ‰§è¡Œå­˜å‚¨åœ¨å†…å­˜ä¸­çš„æŒ‡ä»¤ã€‚ ç®—æœ¯é€»è¾‘å•å…ƒï¼ˆArithmetic Logic Unit, ALUï¼‰ï¼šALU è´Ÿè´£æ‰§è¡Œæ‰€æœ‰çš„ç®—æœ¯å’Œé€»è¾‘æ“ä½œï¼ŒåŒ…æ‹¬åŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•ã€é™¤æ³•ä»¥åŠæ¯”è¾ƒæ“ä½œã€‚ å¯„å­˜å™¨ï¼ˆRegistersï¼‰ï¼šå¯„å­˜å™¨æ˜¯ä¸€ç§éå¸¸å¿«é€Ÿçš„å­˜å‚¨å™¨ï¼Œç”¨äºä¸´æ—¶å­˜å‚¨å’Œè®¿é—®æ­£åœ¨è¢«å¤„ç†å™¨å¤„ç†çš„æ•°æ®å’ŒæŒ‡ä»¤ã€‚ æ€»çº¿ï¼ˆBusesï¼‰ï¼šæ€»çº¿æ˜¯è¿æ¥å¤„ç†å™¨å’Œå…¶ä»–ç³»ç»Ÿç»„ä»¶ï¼ˆå¦‚å†…å­˜ã€ç¡¬ç›˜ã€è¾“å…¥/è¾“å‡ºè®¾å¤‡ç­‰ï¼‰çš„é€šé“ï¼Œç”¨äºæ•°æ®ä¼ è¾“ã€‚ ARM å…¬å¸æ˜¯ä¸€å®¶æ€»éƒ¨ä½äºè‹±å›½ Cambridge çš„è®¾è®¡å’Œè®¸å¯è¯å…¬å¸ï¼Œä¸“æ³¨äºå¤„ç†å™¨æ ¸å¿ƒçš„è®¾è®¡ã€‚ARM å¹¶ä¸ç›´æ¥ç”Ÿäº§å’Œé”€å”®èŠ¯ç‰‡ï¼Œè€Œæ˜¯è®¾è®¡å’Œå¼€å‘å¤„ç†å™¨æ¶æ„ï¼Œç„¶åå‘å„ç§èŠ¯ç‰‡åˆ¶é€ å•†æˆæƒè¿™äº›è®¾è®¡ã€‚è¿™äº›èŠ¯ç‰‡åˆ¶é€ å•†ï¼Œå¦‚é«˜é€šï¼ˆQualcommï¼‰ã€ä¸‰æ˜Ÿï¼ˆSamsungï¼‰ã€è‹¹æœï¼ˆAppleï¼‰ç­‰ï¼Œä¼šåŸºäº ARM çš„è®¾è®¡ï¼Œåˆ¶é€ å‡ºå„è‡ªçš„å¤„ç†å™¨äº§å“ã€‚ ARM çš„ä¸šåŠ¡æ¨¡å¼ä½¿å¾—å®ƒå¯ä»¥ä¸“æ³¨äºè®¾è®¡å’Œä¼˜åŒ–å¤„ç†å™¨æ¶æ„ï¼Œè€Œæ— éœ€æŠ•å…¥å¤§é‡èµ„é‡‘æ¥å»ºç«‹å’Œç»´æŠ¤è‡ªå·±çš„åˆ¶é€ è®¾æ–½ã€‚åŒæ—¶ï¼ŒèŠ¯ç‰‡åˆ¶é€ å•†å¯ä»¥åˆ©ç”¨ ARM çš„è®¾è®¡æ¥ç”Ÿäº§é«˜æ•ˆã€ä½åŠŸè€—çš„èŠ¯ç‰‡ï¼Œè€Œæ— éœ€è‡ªè¡Œä»å¤´å¼€å§‹è®¾è®¡å¤„ç†å™¨æ¶æ„ã€‚ é‡‡ç”¨ RISC æ¶æ„çš„ ARM å¾®å¤„ç†å™¨ä¸€èˆ¬æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š ä½“ç§¯å°ã€åŠŸè€—ä½ã€ä½æˆæœ¬ã€é«˜æ€§èƒ½ï¼› æ”¯æŒ Thumbï¼ˆ16 ä½ï¼‰/ARMï¼ˆ32 ä½ï¼‰åŒæŒ‡ä»¤é›†ï¼Œèƒ½å¾ˆå¥½åœ°å…¼å®¹ 8 ä½/16 ä½ å™¨ä»¶ï¼› å¤§é‡ä½¿ç”¨ å¯„å­˜å™¨ï¼ŒæŒ‡ä»¤æ‰§è¡Œé€Ÿåº¦æ›´å¿«ï¼› å¤§å¤šæ•°æ•°æ®æ“ä½œéƒ½åœ¨å¯„å­˜å™¨ä¸­å®Œæˆï¼› å¯»å€æ–¹å¼çµæ´»ç®€å•ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ï¼› æŒ‡ä»¤é•¿åº¦å›ºå®šã€‚ ARM Processor ç³»åˆ—ä»‹ç»ARM å¤„ç†å™¨æŒ‡ä»¤é›†çš„ç‰¹ç‚¹ ARM å†…æ ¸ä¸æ˜¯ä¸€ä¸ªçº¯ç²¹çš„ RISC ä½“ç³»ç»“æ„ï¼ŒARM æŒ‡ä»¤é›†ä¸çº¯ç²¹çš„ RISC çš„å®šä¹‰æœ‰ä»¥ä¸‹å‡ ä¸ªä¸åŒã€‚ ä¸€äº›ç‰¹å®šæŒ‡ä»¤çš„å‘¨æœŸæ•°å¯å˜ï¼Œå¹¶ä¸æ˜¯æ¯æ¡ ARM æŒ‡ä»¤éƒ½æ˜¯å•å‘¨æœŸçš„ã€‚ å†…åµŒçš„æ¡¶å½¢ç§»ä½å™¨(å¯ä»¥å•ä¸ªæ—¶é’Ÿå‘¨æœŸå†…å¯¹äºŒè¿›åˆ¶æ•°è¿›è¡Œå¤šä½çš„ç§»ä½æ“ä½œ)äº§ç”Ÿäº†æ›´ä¸ºå¤æ‚çš„æŒ‡ä»¤ï¼Œæ‰©å±•äº†æŒ‡ä»¤çš„åŠŸèƒ½ï¼Œå› æ­¤æ”¹å–„äº†å†…æ ¸çš„æ€§èƒ½ã€‚ æ”¯æŒ 16 ä½çš„ Thumb æŒ‡ä»¤é›†ï¼Œæé«˜äº†ä»£ç å¯†åº¦ã€‚ æ”¯æŒæ¡ä»¶æ‰§è¡Œï¼šæ¯æ¡æŒ‡ä»¤éƒ½å¯ä»¥è®¾ç½®ä¸€ä¸ªæ‰§è¡Œæ¡ä»¶ï¼Œåªæœ‰æ¡ä»¶æ»¡è¶³æ—¶æ‰æ‰§è¡Œã€‚ å¢å¼ºæŒ‡ä»¤ï¼šä¸€äº›åŠŸèƒ½å¼ºå¤§çš„æ•°å­—ä¿¡å·å¤„ç†æŒ‡ä»¤è¢«åŠ å…¥åˆ° ARM æŒ‡ä»¤é›†ä¸­ã€‚ ARM æŒ‡ä»¤é›†ä½“ç³»ç»“æ„çš„æ¼”å˜ï¼ˆäº†è§£ï¼‰ ARM å…¬å¸å®šä¹‰äº†ä¸åŒç‰ˆæœ¬çš„ ARM æŒ‡ä»¤é›†ä½“ç³»ç»“æ„ç‰ˆæœ¬ï¼Œç”¨ vn æ¥æ ‡è¯†ï¼ˆn æ˜¯ç‰ˆæœ¬å·ï¼Œç›®å‰æ˜¯ 1-8ï¼‰ã€‚ARM v1 ï½ v3 ç‰ˆæœ¬çš„å¤„ç†å™¨æœªå¾—åˆ°å¤§é‡åº”ç”¨ï¼ŒARM å¤„ç†å™¨çš„å¤§é‡å¹¿æ³›åº”ç”¨æ˜¯ä»å…¶ v4 ç‰ˆæœ¬å¼€å§‹çš„ã€‚v7 ç³»åˆ— CPU è¢«ç§°ä½œ CoreTex ç³»åˆ—åˆ°ç›®å‰ v8 æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œ å¯ä»¥é€‰æ‹© 64 æˆ– 32 æ‰§è¡ŒçŠ¶æ€ã€‚64 æ‰§è¡ŒçŠ¶æ€é’ˆå¯¹ 64 ä½å¤„ç†æŠ€æœ¯ï¼Œå¼•å…¥äº†ä¸€ä¸ªå…¨æ–°æŒ‡ä»¤é›† A64ï¼Œå¯ä»¥å­˜å–å¤§è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚ ARMv4ARMv4 æ˜¯ç›®å‰æ”¯æŒçš„æœ€è€çš„æ¶æ„,æ˜¯åŸºäº 32-bit åœ°å€ç©ºé—´çš„ 32-bit æŒ‡ä»¤é›†ã€‚ARMv4 é™¤äº†æ”¯æŒ ARMv3 çš„æŒ‡ä»¤å¤–è¿˜æ‰©å±•äº†ï¼šæ”¯æŒ halfword çš„å­˜å–æ”¯æŒ byte å’Œ halfword çš„ç¬¦å·æ‰©å±•è¯»è¿›ä¸€æ­¥çš„æ˜ç¡®äº†ä¼šå¼•èµ· Undefined å¼‚å¸¸çš„æŒ‡ä»¤å¯¹ä»¥å‰çš„ 26bits ä½“ç³»ç»“æ„çš„ CPU ä¸å†å…¼å®¹ ARMv4TARMv4T å¢åŠ äº† 16-bit Thumb æŒ‡ä»¤é›†ï¼Œè¿™æ ·ä½¿å¾—ç¼–è¯‘å™¨èƒ½äº§ç”Ÿç´§å‡‘ä»£ç (ç›¸å¯¹äº 32-bit ä»£ç ï¼Œå†…å­˜èƒ½èŠ‚çœåˆ° 35%ä»¥ä¸Š)å¹¶ä¿æŒ 32-bit ç³»ç»Ÿçš„å¥½å¤„ã€‚Thumb åœ¨å¤„ç†å™¨ä¸­ä»ç„¶è¦æ‰©å±•ä¸ºæ ‡å‡†çš„ 32 ä½ ARM æŒ‡ä»¤æ¥è¿è¡Œã€‚ç”¨æˆ·é‡‡ç”¨ 16 ä½ Thumb æŒ‡ä»¤é›†æœ€å¤§çš„å¥½å¤„å°±æ˜¯å¯ä»¥è·å¾—æ›´é«˜çš„ä»£ç å¯†åº¦å’Œé™ä½åŠŸè€—ã€‚ ARMv82011 å¹´ 11 æœˆï¼ŒARM å…¬å¸å‘å¸ƒäº†æ–°ä¸€ä»£å¤„ç†å™¨æ¶æ„ ARM V8ï¼ŒARM çš„é¦–ä¸ª 64 ä½æ¶æ„;ARM 2012 å¹´åæœˆå‘å¸ƒäº† Cortex-A53 and Cortex-A57 æ ¸å¿ƒã€‚2013 å¹´è‹¹æœåŸºäº V8 æ¶æ„çš„ Apple 7 ä½¿ç”¨åœ¨äº† iPhone 5S ä¸Šã€‚ CortexARM æ¨å‡ºçš„ Cortex ç³»åˆ—åŒ…æ‹¬ï¼šCortex-Aã€Cortex-R å’Œ Cortex-M ä¸‰ä¸ªç³»åˆ—ã€‚ Cortex-A(Application)ç³»åˆ—ä¸»è¦åº”ç”¨äºå¤æ‚çš„åº”ç”¨ä¸­ï¼Œæ”¯æŒï¼šARMã€Thumb å’Œ Thumb2 æŒ‡ä»¤é›†ã€‚ Cortex-R(Real-time)ç³»åˆ—æ˜¯ä¸ºå®æ—¶æ“ä½œç³»ç»Ÿè®¾è®¡çš„åµŒå…¥å¼å¤„ç†å™¨ï¼Œèƒ½å¸¦æ¥æ›´å°çš„èŠ¯ç‰‡é¢ç§¯å’Œä½åŠŸè€—ã€‚ Cortex-M(Microcontroller)ç³»åˆ—å¤„ç†å™¨ç»“åˆäº†å¤šç§çªç ´æ€§æŠ€æœ¯ï¼Œé›†æˆäº†è®¸å¤šç´§è€¦åˆç³»ç»Ÿå¤–è®¾ï¼Œä»¥ä¾¿èƒ½æ»¡è¶³ä¸‹ä¸€ä»£äº§å“çš„æ§åˆ¶è¦æ±‚ï¼Œé€‚ç”¨äºé«˜æ€§èƒ½ã€ä½æˆæœ¬éœ€æ±‚çš„åµŒå…¥å¼åº”ç”¨ã€‚ Cortex-M ä¸»è¦é’ˆå¯¹å•ç‰‡æœºé¢†åŸŸã€‚ ARM9 çš„ 5 çº§æµæ°´çº¿(æµæ°´çº¿çš„çº§æ•°ï¼Œä»£è¡¨çš„æ˜¯æŒ‡ä»¤å‘¨æœŸè¢«åˆ’åˆ†æˆçš„é˜¶æ®µæ•°é‡)5 çº§æµæ°´çº¿ æ˜¯ ARM9TDMI çš„ä¸»è¦ç‰¹å¾ä¹‹ä¸€ï¼Œå…¶è®¾è®¡å‡å°‘äº†åœ¨æ¯ä¸ªæ—¶é’Ÿå†…å¿…é¡»å®Œæˆçš„æœ€å¤§å·¥ä½œé‡ï¼Œè¿›è€Œå…è®¸ä½¿ç”¨è¾ƒé«˜çš„æ—¶é’Ÿé¢‘ç‡ã€‚ å–æŒ‡ï¼šæŒ‡ä»¤ä»å­˜å‚¨å™¨ä¸­å–å‡ºï¼Œæ”¾å…¥æŒ‡ä»¤æµæ°´çº¿ è¯‘ç ï¼šæŒ‡ä»¤è¯‘ç ï¼Œä»å¯„å­˜å™¨å †ä¸­è¯»å–å¯„å­˜å™¨æ“ä½œæ•° æ‰§è¡Œï¼šæŠŠä¸€ä¸ªæ“ä½œæ•°ç§»ä½ï¼Œäº§ç”Ÿ ALU çš„ç»“æœã€‚å¦‚æœæŒ‡ä»¤æ˜¯ Load æˆ– Storeï¼Œåœ¨ ALU ä¸­è®¡ç®—å­˜å‚¨å™¨çš„åœ°å€ ç¼“å­˜/æ•°æ®ï¼šå¦‚æœéœ€è¦ï¼Œåˆ™è®¿é—®æ•°æ®å­˜å‚¨å™¨ï¼›å¦åˆ™ï¼ŒALU çš„ç»“æœåªæ˜¯ç®€å•åœ°ç¼“å†²ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œä»¥ä¾¿ä½¿æ‰€æœ‰æŒ‡ä»¤å…·æœ‰åŒæ ·çš„æµæ°´çº¿æµç¨‹ å›å†™ï¼šå°†æŒ‡ä»¤äº§ç”Ÿçš„ç»“æœå†™å›åˆ°å¯„å­˜å™¨å †ï¼ŒåŒ…æ‹¬ä»»ä½•ä»å¯„å­˜å™¨è¯»å‡ºçš„æ•°æ® 12345678910111213ARM å¤„ç†å™¨å‘½åè§„åˆ™ï¼šARM{x}{y}{z}{T}{D}{M}{I}{E}{J}{F}{-S}x -- å¤„ç†å™¨ç³»åˆ—y -- å­˜å‚¨ç®¡ç†/ä¿æŠ¤å•å…ƒz -- cacheT -- æ”¯æŒ Thumb æŒ‡ä»¤é›†D -- æ”¯æŒç‰‡ä¸Šè°ƒè¯•M -- æ”¯æŒå¿«é€Ÿä¹˜æ³•å™¨I -- æ”¯æŒ Embedded ICEï¼Œæ”¯æŒåµŒå…¥å¼è·Ÿè¸ªè°ƒè¯•E -- æ”¯æŒå¢å¼ºå‹ DSP(Digital Signal Processor) æŒ‡ä»¤J -- æ”¯æŒ JazelleF -- å…·å¤‡å‘é‡æµ®ç‚¹å•å…ƒ VFP-S -- å¯ç»¼åˆç‰ˆæœ¬ ARM Processor å·¥ä½œçŠ¶æ€ARM çŠ¶æ€å’Œ Thumb çŠ¶æ€ Thumb æŒ‡ä»¤é›†åµŒå…¥å¼ç³»ç»Ÿåœ¨æŸäº›åº”ç”¨åœºåˆå¯¹å­˜å‚¨æˆæœ¬æˆ–ç©ºé—´è¦æ±‚æ¯”è¾ƒè‹›åˆ»ï¼Œä¸ºäº†è®©ç”¨æˆ·æ›´å¥½åœ°æ§åˆ¶ä»£ç é‡ï¼Œäºæ˜¯è®¾è®¡äº† 2 å¥—æŒ‡ä»¤ç³»ç»Ÿï¼Œåˆ†åˆ«ä¸º ARM æŒ‡ä»¤é›†å’Œ Thumb æŒ‡ä»¤é›†ã€‚å…¶ä¸­ ARM æŒ‡ä»¤é›†ä¸º 32 ä½ï¼ˆå­—ï¼‰é•¿åº¦ï¼Œå…·æœ‰æœ€å®Œæ•´çš„åŠŸèƒ½ï¼›Thumb æŒ‡ä»¤é›†ä¸º 16 ä½ï¼ˆåŠå­—ï¼‰é•¿åº¦ï¼Œèƒ½å®ç° ARM æŒ‡ä»¤é›†çš„å¤§éƒ¨åˆ†åŠŸèƒ½åœ¨åŠŸèƒ½ä¸Šå¯ä»¥è®¤ä¸º Thumb æ˜¯ ARM æŒ‡ä»¤é›†çš„å­é›† æ—¢ç„¶ ARM å¤„ç†å™¨å…±å­˜ 2 ç§æŒ‡ä»¤é›†ï¼Œé‚£ä¹ˆåˆ°åº•ä½•æ—¶æ‰§è¡Œ ARM æŒ‡ä»¤é›†ï¼Œä½•æ—¶æ‰§è¡Œ Thumb æŒ‡ä»¤é›†å‘¢?ARM å¤„ç†å™¨æœ‰ 2 ä¸ªå¤„ç†å™¨çŠ¶æ€ä¸è¿™ 2 å¥—æŒ‡ä»¤é›†åˆ†åˆ«å¯¹åº”;ARM å¤„ç†å™¨çš„ä¸¤ç§çŠ¶æ€å¯ä»¥é€šè¿‡ç›¸åº”çš„æŒ‡ä»¤è¿›è¡Œåˆ‡æ¢; ARM9TDMI æ ¸æ˜¯å…·æœ‰ T å˜ç§çš„ ARM å¤„ç†å™¨æ ¸ï¼Œå…¶å·¥ä½œçŠ¶æ€ä¸€èˆ¬æœ‰ä»¥ä¸‹ä¸¤ç§ï¼Œå¹¶å¯åœ¨ä¸¤ç§çŠ¶æ€ä¹‹é—´åˆ‡æ¢ã€‚ ARM çŠ¶æ€:æ‰§è¡Œ 32 ä½çš„å­—å¯¹é½çš„ ARM æŒ‡ä»¤ã€‚æ˜¯ç³»ç»Ÿä¸Šç”µé»˜è®¤çš„çŠ¶æ€ã€‚ Thumb çŠ¶æ€:æ‰§è¡Œ 16 ä½çš„ã€åŠå­—å¯¹é½çš„ Thumb æŒ‡ä»¤ã€‚ Note ARM æŒ‡ä»¤é›†ä¸ Thumb æŒ‡ä»¤é›†ä¸èƒ½åŒæ—¶æ··åˆä½¿ç”¨ ARM å’Œ Thumb çŠ¶æ€é—´çš„åˆ‡æ¢å¹¶ä¸å½±å“å¤„ç†å™¨æ¨¡å¼æˆ–å¯„å­˜å™¨å†…å®¹ã€‚ ä»ä¸€ä¸ª ARM ä¾‹ç¨‹è°ƒç”¨å¦ä¸€ä¸ª Thumb ä¾‹ç¨‹æ—¶ï¼Œå†…æ ¸å¿…é¡»åˆ‡æ¢çŠ¶æ€ï¼Œåä¹‹äº¦ç„¶ æŒ‡ä»¤é•¿åº¦å’Œæ•°æ®æ ¼å¼ARM å¾®å¤„ç†å™¨çš„æŒ‡ä»¤é•¿åº¦å¯ä»¥æ˜¯ 32 ä½ï¼ˆåœ¨ ARM çŠ¶æ€ä¸‹ï¼‰ï¼Œä¹Ÿå¯ä»¥ä¸º 16 ä½ï¼ˆåœ¨ Thumb çŠ¶æ€ä¸‹ï¼‰ã€‚ARM å¾®å¤„ç†å™¨ä¸­æ”¯æŒå­—èŠ‚Byteï¼ˆ8 ä½ï¼‰ã€åŠå­— Half-Wordï¼ˆ16 ä½ï¼‰ã€å­— Wordï¼ˆ32 ä½ï¼‰ä¸‰ç§æ•°æ®ç±»å‹ã€‚ å¦‚æœä¸€ä¸ªæ•°æ®æ˜¯ä»¥å­—æ–¹å¼å­˜å‚¨çš„ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯å­—å¯¹é½çš„ï¼› å¦‚æœä¸€ä¸ªæ•°æ®æ˜¯ä»¥åŠå­—æ–¹å¼å­˜å‚¨çš„ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯åŠå­—å¯¹é½çš„ã€‚ 0x4002 å’Œ 0x4004 ç›¸å·® 2 ä¸ª Byte,å³ 16bit,æ‰€ä»¥ä¸ºåŠå­—å¯¹é½ Half-Word Aligned ARM Processor è¿è¡Œæ¨¡å¼ARM ä½“ç³»ç»“æ„æ”¯æŒ7 ç§è¿è¡Œæ¨¡å¼ï¼š ç”¨æˆ·æ¨¡å¼ï¼ˆUSRï¼‰æ­£å¸¸ç¨‹åºæ‰§è¡Œæ¨¡å¼ï¼Œå¤§éƒ¨åˆ†ä»»åŠ¡æ‰§è¡Œåœ¨è¿™ç§æ¨¡å¼ä¸‹ã€‚ç”¨æˆ·æ¨¡å¼æ˜¯ç”¨æˆ·ç¨‹åºçš„å·¥ä½œæ¨¡å¼ã€‚è¯¥æ²¡æœ‰æƒé™å»æ“ä½œå…¶å®ƒç¡¬ä»¶èµ„æºï¼Œä¹Ÿä¸èƒ½åˆ‡æ¢åˆ°å…¶å®ƒæ¨¡å¼ä¸‹ã€‚ ç³»ç»Ÿæ¨¡å¼ï¼ˆSYSï¼‰ç³»ç»Ÿæ¨¡å¼æ˜¯ç‰¹æƒæ¨¡å¼ï¼Œä¸å—ç”¨æˆ·æ¨¡å¼çš„é™åˆ¶ã€‚ç”¨æˆ·æ¨¡å¼å’Œç³»ç»Ÿæ¨¡å¼å…±ç”¨ä¸€å¥—å¯„å­˜å™¨ï¼Œä½†æ¯”ç”¨æˆ·æ¨¡å¼æœ‰æ›´é«˜çš„æƒé™ï¼Œå¯ä»¥è®¿é—®æ‰€æœ‰ç³»ç»Ÿèµ„æºåŠè¿›è¡Œæ¨¡å¼åˆ‡æ¢ã€‚ ä¸€èˆ¬ä¸­æ–­æ¨¡å¼ï¼ˆIRQï¼‰ä¸€èˆ¬ä¸­æ–­æ¨¡å¼ä¹Ÿå«é€šç”¨ä¸­æ–­æ¨¡å¼ï¼Œç”¨äºå¤„ç†ä¸€èˆ¬çš„ä¸­æ–­è¯·æ±‚ï¼Œé€šå¸¸åœ¨ç¡¬ä»¶äº§ç”Ÿä¸­æ–­ä¿¡å·ä¹‹åè‡ªåŠ¨è¿›å…¥è¯¥æ¨¡å¼ï¼Œè¯¥æ¨¡å¼ä¸ºç‰¹æƒæ¨¡å¼ï¼Œå¯ä»¥è‡ªç”±è®¿é—®ç³»ç»Ÿç¡¬ä»¶èµ„æºã€‚ å¿«é€Ÿä¸­æ–­æ¨¡å¼ï¼ˆFIQï¼‰å¿«é€Ÿä¸­æ–­æ¨¡å¼æ˜¯ç›¸å¯¹ä¸€èˆ¬ä¸­æ–­æ¨¡å¼è€Œè¨€çš„ï¼Œå®ƒæ˜¯ç”¨æ¥å¤„ç†å¯¹æ—¶é—´è¦æ±‚æ¯”è¾ƒç´§æ€¥çš„ä¸­æ–­è¯·æ±‚ï¼Œä¸»è¦ç”¨äºé«˜é€Ÿæ•°æ®ä¼ è¾“åŠé€šé“å¤„ç†ä¸­ï¼Œå…¶ä¸­æ–­ä¼˜å…ˆçº§ç›¸å¯¹æ™®é€šä¸­æ–­æ›´é«˜ ç®¡ç†æ¨¡å¼ï¼ˆSupervisorï¼ŒSVCï¼‰ ç®¡ç†æ¨¡å¼æ˜¯ CPU ä¸Šç”µåé»˜è®¤æ¨¡å¼ï¼Œå› æ­¤åœ¨è¯¥æ¨¡å¼ä¸‹ä¸»è¦ç”¨æ¥åšç³»ç»Ÿçš„åˆå§‹åŒ–ï¼Œè½¯ä¸­æ–­å¤„ç†ä¹Ÿåœ¨è¯¥æ¨¡å¼ä¸‹ã€‚ç³»ç»Ÿå¤ä½æˆ–å¼€æœºã€è½¯ä¸­æ–­æ—¶è¿›å…¥åˆ° SVC æ¨¡å¼ä¸‹ã€‚ ä¸­æ­¢æ¨¡å¼ï¼ˆABTï¼‰ä¸­æ­¢æ¨¡å¼ç”¨äºæ”¯æŒè™šæ‹Ÿå†…å­˜æˆ–å­˜å‚¨å™¨ä¿æŠ¤ï¼Œå½“ç”¨æˆ·ç¨‹åºè®¿é—®éæ³•åœ°å€ï¼Œæ²¡æœ‰æƒé™è¯»å–çš„å†…å­˜åœ°å€æ—¶ï¼Œä¼šè¿›å…¥è¯¥æ¨¡å¼ã€‚ æœªå®šä¹‰æ¨¡å¼ï¼ˆUNDï¼‰CPU åœ¨æŒ‡ä»¤çš„è¯‘ç é˜¶æ®µä¸èƒ½è¯†åˆ«è¯¥æŒ‡ä»¤æ“ä½œæ—¶ï¼Œä¼šè¿›å…¥æœªå®šä¹‰æ¨¡å¼ï¼Œè¿›è¡Œæœªå®šä¹‰é™·é˜±å¤„ç†ã€‚ ç‰¹æƒæ¨¡å¼: é™¤ç”¨æˆ·æ¨¡å¼å¤–çš„å…¶å®ƒ 6 ç§å¤„ç†å™¨æ¨¡å¼ç§°ä¸ºç‰¹æƒæ¨¡å¼ï¼ˆPrivileged Modesï¼‰ã€‚åœ¨ç‰¹æƒæ¨¡å¼ä¸‹ï¼Œç¨‹åºå¯ä»¥è®¿é—®æ‰€æœ‰çš„ç³»ç»Ÿèµ„æºï¼Œä¹Ÿå¯ä»¥ä»»æ„çš„è¿›è¡Œå¤„ç†å™¨æ¨¡å¼åˆ‡æ¢ã€‚åªæœ‰åœ¨ç‰¹æƒæ¨¡å¼ä¸‹æ‰å…è®¸å¯¹å½“å‰ç¨‹åºçŠ¶æ€å¯„å­˜å™¨ï¼ˆCPSRï¼‰çš„æ‰€æœ‰æ§åˆ¶ä½ç›´æ¥è¿›è¡Œè¯»/å†™è®¿é—®ï¼Œè€Œåœ¨éç‰¹æƒæ¨¡å¼ä¸‹åªå…è®¸å¯¹ CPSR çš„æ§åˆ¶ä½è¿›è¡Œé—´æ¥è®¿é—®ï¼ˆSWI æ–¹å¼ï¼‰ã€‚ç‰¹æƒæ¨¡å¼ä¸­é™¤ç³»ç»Ÿæ¨¡å¼ä¹‹å¤–çš„å…¶ä»– 5 ç§æ¨¡å¼åˆç»Ÿç§°ä¸ºå¼‚å¸¸æ¨¡å¼ã€‚å®ƒä»¬é™¤äº†å¯ä»¥é€šè¿‡åœ¨ç‰¹æƒä¸‹çš„ç¨‹åºåˆ‡æ¢è¿›å…¥å¤–ï¼Œä¹Ÿå¯ä»¥ç”±ç‰¹å®šçš„å¼‚å¸¸è¿›å…¥ã€‚å…¶ä¸­ç®¡ç†æ¨¡å¼ä¹Ÿç§°ä¸ºè¶…çº§ç”¨æˆ·æ¨¡å¼ï¼Œæ˜¯ä¸ºæ“ä½œç³»ç»Ÿæä¾›è½¯ä¸­æ–­çš„ç‰¹æœ‰æ¨¡å¼ã€‚å¤§å¤šæ•°çš„ç”¨æˆ·ç¨‹åºè¿è¡Œåœ¨ç”¨æˆ·æ¨¡å¼ä¸‹ã€‚å½“å¤„ç†å™¨å·¥ä½œåœ¨ç”¨æˆ·æ¨¡å¼æ—¶ï¼Œéœ€è¦è¿›è¡Œå¤„ç†å™¨æ¨¡å¼åˆ‡æ¢æ—¶ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥äº§ç”Ÿå¼‚å¸¸å¤„ç†ï¼Œåœ¨å¼‚å¸¸å¤„ç†è¿‡ç¨‹ä¸­è¿›è¡Œå¤„ç†å™¨æ¨¡å¼åˆ‡æ¢ã€‚è¿™ç§ä½“ç³»ç»“æ„å¯ä»¥ä½¿æ“ä½œç³»ç»Ÿæ§åˆ¶æ•´ä¸ªç³»ç»Ÿèµ„æºçš„ä½¿ç”¨ã€‚ ARM RegisterARM å¤„ç†å™¨æœ‰å¦‚ä¸‹ 37 ä¸ªç”¨æˆ·å¯è§å¯„å­˜å™¨ã€‚31 ä¸ªé€šç”¨å¯„å­˜å™¨ï¼š R0~R15 R13_svc,R14_svc, R13_abt,R14_abt, R13_undã€R14_undã€ R13_irqã€ R14_irq R8_fiq~R14_fiqã€‚ 6 ä¸ªçŠ¶æ€å¯„å­˜å™¨ï¼š 1 ä¸ª CPSR 5 ä¸ª SPSRï¼ˆ SPSR_svrã€ SPSR_abt ã€ SPSR_und ã€ SPSR_irq ã€ SPSR_frq ï¼‰ï¼› ARM å¤„ç†å™¨å…±æœ‰ 7 ç§è¿è¡Œæ¨¡å¼ï¼Œåœ¨æ¯ä¸€ç§å¤„ç†å™¨æ¨¡å¼ä¸­éƒ½æœ‰ä¸€ç»„ç›¸åº”çš„å¯„å­˜å™¨ã€‚ åœ¨ ARM çŠ¶æ€ä¸‹ï¼Œä»»ä¸€æ—¶åˆ»éƒ½å¯ä»¥è®¿é—®åˆ° 16 ä¸ª é€šç”¨å¯„å­˜å™¨å’Œ 1~2 ä¸ªçŠ¶æ€å¯„å­˜å™¨ã€‚å„ç§æ¨¡å¼ä¸‹èƒ½è®¿é—®çš„å¯„å­˜å™¨å¦‚ä¸‹å›¾æ‰€ç¤º å †æ ˆæŒ‡é’ˆ SP R13å¯„å­˜å™¨ R13 é€šå¸¸ç”¨ä½œå †æ ˆæŒ‡é’ˆï¼Œç§°ä½œ SPã€‚æ¯ç§å¼‚å¸¸æ¨¡å¼éƒ½æœ‰è‡ªå·±çš„åˆ†ç»„ R13ã€‚é€šå¸¸ R13 åº”å½“è¢«åˆå§‹åŒ–æˆæŒ‡å‘ç»™å¼‚å¸¸æ¨¡å¼æ‰€åˆ†é…çš„å †æ ˆã€‚å…¶ä¸­ç”¨æˆ·æ¨¡å¼å’Œç³»ç»Ÿæ¨¡å¼å…±ç”¨ä¸€ä¸ªï¼Œæ¯ç§å¼‚å¸¸æ¨¡å¼éƒ½æœ‰ä¸“ç”¨çš„ R13 å¯„å­˜å™¨ã€‚å®ƒä»¬é€šå¸¸æŒ‡å‘å„æ¨¡å¼æ‰€å¯¹åº”çš„ä¸“ç”¨å †æ ˆï¼Œä¹Ÿå°±æ˜¯è¯´ ARM å¤„ç†å™¨å…è®¸ç”¨æˆ·ç¨‹åºæœ‰ 6 ä¸ªä¸åŒçš„å †æ ˆç©ºé—´ã€‚ é“¾æ¥å¯„å­˜å™¨ LR R14å¯„å­˜å™¨ R14(é“¾æ¥å¯„å­˜å™¨æˆ– LR)åœ¨ä½“ç³»ç»“æ„ä¸­æœ‰ä¸¤ç§ç‰¹æ®Šç”¨é€”ï¼šç”¨é€” 1åœ¨å„ç§æ¨¡å¼ä¸‹ï¼ŒR14 ç”¨æ¥ä¿å­˜å­ç¨‹åºçš„è¿”å›åœ°å€ã€‚å½“ä¸€æ¡ BL æˆ–è€… BLX æŒ‡ä»¤æ‰§è¡Œå­ç¨‹åºè°ƒç”¨æ—¶ï¼ŒR14 è®¾ä¸ºå­ç¨‹åºçš„è¿”å›åœ°å€ã€‚è¿”å›æ—¶ï¼Œé€šè¿‡å¤åˆ¶ R14 ä¸­çš„åœ°å€å€¼åˆ° PC ä¸­æ¥å®ç°å­ç¨‹åºçš„è¿”å›ã€‚é€šå¸¸æœ‰ä»¥ä¸‹2 ç§æ–¹å¼Method1:æ‰§è¡Œä¸‹åˆ—æŒ‡ä»¤ä¹‹ä¸€ MOV PC, LR æŠŠ LR ä¸­çš„å€¼å†™å…¥åˆ° PC å¯„å­˜å™¨ä¸­ BX LRè·³è½¬(å¸¦çŠ¶æ€åˆ‡æ¢)åˆ° LR åœ°å€æ‰€æŒ‡å‘çš„æŒ‡ä»¤æ‰§è¡Œã€‚ç”¨äºä»å®ç°ä»ä¸€ä¸ªçŠ¶æ€è¿”å›å¦å¤–ä¸€ä¸ªçŠ¶æ€å¹¶ç»§ç»­æ‰§è¡Œã€‚Method2åœ¨å­ç¨‹åºå…¥å£ï¼Œæ‰§è¡Œ R14 çš„å…¥æ ˆæ“ä½œSTMFP SP!, {&lt;registers&gt;, LR} è¯¥æ¡æŒ‡ä»¤ç”¨äºæŠŠï¼Œå’Œ LRï¼ˆR14ï¼‰ç­‰å¤šä¸ªå¯„å­˜å™¨å‹å…¥å †æ ˆï¼ŒSPï¼ˆR13ï¼‰æŒ‡å‘å †æ ˆé¡¶éƒ¨ã€‚å¹¶ä½¿ç”¨åŒ¹é…çš„æŒ‡ä»¤è¿”å›LDMFP SP!, {&lt;registers&gt;, PC}è¯¥æ¡æŒ‡ä»¤ç”¨äºæŠŠå †æ ˆé¡¶éƒ¨å¤šä¸ªå•å…ƒï¼Œæ‰§è¡Œå‡ºæ ˆæ“ä½œï¼Œå‡ºæ ˆçš„æ•°æ®ä¿å­˜åˆ°å’Œ PC ç­‰å¤šä¸ªå¯„å­˜å™¨ä¸­ã€‚æ³¨ï¼šæ‰§è¡Œè¯¥æ“ä½œåï¼ŒåŸ R14 å…¥æ ˆçš„å€¼ï¼Œå‡ºæ ˆåå°±ä¿å­˜åˆ° PC ä¸­äº†ï¼Œç›¸å½“äºæ‰§è¡Œäº†æŠŠ R14 çš„å€¼å†™å…¥åˆ° PC çš„æ“ä½œã€‚ç”¨é€” 2å½“å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œç›¸å…³å¼‚å¸¸æ¨¡å¼ä¸‹çš„ R14 å°±è®¾ä¸ºå¼‚å¸¸è¿”å›åœ°å€ã€‚å¼‚å¸¸çš„è¿”å›åœ°å€ä¸å­ç¨‹åºçš„è¿”å›ç±»ä¼¼ã€‚åŒºåˆ«åœ¨äºæœ‰äº›å¼‚å¸¸æœ‰ä¸€ä¸ªå°å¸¸é‡çš„åç§» ç¨‹åºè®¡æ•°å™¨ PC R15æ— è®ºå¤„ç†å™¨å¤„äºä½•ç§çŠ¶æ€ï¼Œç¨‹åºè®¡æ•°å™¨ R15ï¼ˆå³ PCï¼‰æ€»æ˜¯æŒ‡å‘â€œæ­£åœ¨å–æŒ‡â€çš„æŒ‡ä»¤ï¼Œè€Œä¸æ˜¯æŒ‡å‘â€œæ­£åœ¨æ‰§è¡Œâ€çš„æŒ‡ä»¤æˆ–æ­£åœ¨â€œè¯‘ç â€çš„æŒ‡ä»¤ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œäººä»¬ä¹ æƒ¯æ€§çº¦å®šå°†â€œæ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤ä½œä¸ºå‚è€ƒç‚¹â€ï¼Œç§°ä¹‹ä¸ºå½“å‰ç¬¬ 1 æ¡æŒ‡ä»¤ã€‚å› æ­¤ï¼ŒPC æ€»æ˜¯æŒ‡å‘ç¬¬ 3 æ¡æŒ‡ä»¤ï¼Œæˆ–è€…è¯´ PC æ€»æ˜¯æŒ‡å‘å½“å‰æ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤åœ°å€å†åŠ  2 æ¡æŒ‡ä»¤çš„åœ°å€ã€‚ MOV æ‰§è¡Œæ—¶,LDR åœ¨å–å€¼,ç›¸å·® 2 æ¡æŒ‡ä»¤çš„åœ°å€,å¦‚æœä¸º ARM æŒ‡ä»¤,è®¾ä¸‰æ¡æŒ‡ä»¤åœ°å€åˆ†åˆ«ä¸º 0x4000,0x4004,0x4008,PC å€¼ç­‰äºå½“å‰æŒ‡ä»¤çš„åœ°å€+8Bytes,0x4000 + 8 = 0x4008å½“å¤„ç†å™¨å¤„äº Thumb çŠ¶æ€æ—¶ï¼Œæ¯æ¡æŒ‡ä»¤é•¿ä¸º 2 å­—èŠ‚ï¼Œæ‰€ä»¥ PC çš„å€¼ä¸ºæ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤åœ°å€åŠ  4 å­—èŠ‚ï¼Œå³ï¼šPCå€¼=å½“å‰ç¨‹åºæ‰§è¡Œä½ç½®+4å­—èŠ‚ ç¨‹åºçŠ¶æ€å¯„å­˜å™¨ PSRå½“å‰ç¨‹åºçŠ¶æ€å¯„å­˜å™¨ï¼ˆCPSR,Curren Program Status Registerï¼‰å¯ä»¥åœ¨ä»»ä½•å¤„ç†å™¨æ¨¡å¼ä¸‹è¢«è®¿é—®ï¼Œå®ƒåŒ…å«ä¸‹åˆ—å†…å®¹ï¼š ALU çŠ¶æ€æ ‡å¿—ï¼ˆæ¡ä»¶ç æ ‡å¿—ä½ï¼‰ï¼› å½“å‰çš„å¤„ç†å™¨æ¨¡å¼ï¼› ä¸­æ–­ä½¿èƒ½æ ‡å¿—ï¼› è®¾ç½®å¤„ç†å™¨çš„çŠ¶æ€ã€‚ æ¯ä¸€ç§å¼‚å¸¸å™¨æ¨¡å¼ä¸‹ï¼Œéƒ½æœ‰ä¸€ä¸ªä¸“ç”¨çš„ç‰©ç†å¯„å­˜å™¨åšå¤‡ä»½ç¨‹åºçŠ¶æ€å¯„å­˜å™¨ï¼ˆSPSR,Saved Program Status Register ï¼‰ã€‚å½“ç‰¹å®šçš„å¼‚å¸¸ä¸­æ–­å‘ç”Ÿæ—¶ï¼Œè¿™ä¸ªç‰©ç†å¯„å­˜å™¨è´Ÿè´£å­˜æ”¾å½“å‰ç¨‹åºçŠ¶æ€å¯„å­˜å™¨çš„å†…å®¹ã€‚å½“å¼‚å¸¸å¤„ç†ç¨‹åºè¿”å›æ—¶ï¼Œå†å°†å…¶å†…å®¹æ¢å¤åˆ°å½“å‰ç¨‹åºçŠ¶æ€å¯„å­˜å™¨ã€‚ è¿™äº›æ¡ä»¶æ ‡å¿—ä½ä¼šæ ¹æ®ç¨‹åºä¸­çš„ç®—æ•°æŒ‡ä»¤æˆ–é€»è¾‘æŒ‡ä»¤çš„æ‰§è¡Œç»“æœè¿›è¡Œæ”¹å˜ï¼Œè€Œä¸”è¿™äº›æ¡ä»¶æ ‡å¿—ä½å¯ç”±å¤§å¤šæ•°æŒ‡ä»¤æ£€æµ‹ä»¥å†³å®šæŒ‡ä»¤æ˜¯å¦æ‰§è¡Œã€‚ N æœ¬ä½è®¾ç½®æˆå½“å‰æŒ‡ä»¤æ‰§è¡Œç»“æœçš„ç¬¬ 31 ä½ã€‚å½“ä¸¤ä¸ªç”±è¡¥ç è¡¨ç¤ºçš„æœ‰ç¬¦å·æ•´æ•°è¿ç®—æ—¶ï¼ŒN=1 è¡¨ç¤ºç»“æœä¸ºè´Ÿæ•°ï¼›å¦åˆ™ç»“æœä¸ºæ­£æ•°æˆ–é›¶ã€‚ Z Z=1 è¡¨ç¤ºè¿ç®—çš„ç»“æœä¸ºé›¶ï¼Œå¦åˆ™ç»“æœä¸ä¸ºé›¶ã€‚ C åˆ† 4 ç§æƒ…å†µè®¾ç½® C çš„æ–¹æ³•ï¼š åœ¨åŠ æ³•æŒ‡ä»¤ä¸­ï¼ˆåŒ…æ‹¬æ¯”è¾ƒæŒ‡ä»¤ CMNï¼‰ï¼Œå½“ç»“æœäº§ç”Ÿäº†è¿›ä½ï¼Œåˆ™ C=1ï¼Œè¡¨ç¤ºæ— ç¬¦å·æ•°è¿ç®—å‘ç”Ÿä¸Šæº¢å‡ºï¼Œå…¶å®ƒæƒ…å†µä¸‹ C=0; åœ¨å‡æ³•æŒ‡ä»¤ä¸­ï¼ˆåŒ…æ‹¬æ¯”è¾ƒæŒ‡ä»¤ CMPï¼‰ï¼Œå½“è¿ç®—ä¸­å‘ç”Ÿäº†å€Ÿä½ï¼Œåˆ™ C=0ï¼Œå…¶å®ƒæƒ…å†µä¸‹ C=1; å¯¹äºåœ¨æ“ä½œæ•°ä¸­åŒ…å«ç§»ä½æ“ä½œçš„è¿ç®—æŒ‡ä»¤ï¼ˆéåŠ /å‡æŒ‡ä»¤ï¼‰ï¼ŒC è¢«è®¾ç½®æˆè¢«ç§»ä½å¯„å­˜å™¨æœ€åç§»å‡ºå»çš„ä½; å¯¹äºå…¶å®ƒéåŠ /å‡æ³•è¿ç®—æŒ‡ä»¤ï¼ŒC çš„å€¼é€šå¸¸ä¸å—å½±å“ã€‚ V ä¸‹é¢åˆ†ä¸¤ç§æƒ…å†µè®¨è®º V çš„è®¾ç½®æ–¹æ³•ï¼š å¯¹äºåŠ /å‡è¿ç®—æŒ‡ä»¤ï¼Œå½“æ“ä½œæ•°å’Œè¿ç®—ç»“æœéƒ½æ˜¯ä»¥äºŒè¿›åˆ¶çš„è¡¥ç è¡¨ç¤ºçš„å¸¦ç¬¦å·çš„æ•°æ—¶ï¼Œä¸”è¿ç®—ç»“æœè¶…å‡ºäº†æœ‰ç¬¦å·è¿ç®—çš„èŒƒå›´æ—¶æº¢å‡ºã€‚V=1 è¡¨ç¤ºç¬¦å·ä½æº¢å‡ºï¼› å¯¹äºéåŠ /å‡æ³•æŒ‡ä»¤ï¼Œé€šå¸¸ä¸æ”¹å˜æ ‡å¿—ä½ V çš„å€¼ã€‚ Qï¼ˆäº†è§£ï¼‰åœ¨å¸¦ DSP æŒ‡ä»¤æ‰©å±•çš„ ARMV5 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼ŒQ æ ‡å¿—ä½è¢«æŒ‡å®šç”¨äºæŒ‡ç¤ºå¢å¼º DSP æŒ‡ä»¤æ˜¯å¦å‘ç”Ÿäº†æº¢å‡ºã€‚åœ¨ ARMV5 ä»¥å‰çš„ç‰ˆæœ¬åŠ ARMV5 çš„é E ç³»åˆ—å¤„ç†å™¨ä¸­ï¼ŒQ æ ‡å¿—ä½æ²¡æœ‰è¢«å®šä¹‰ï¼Œå±äºå¾…æ‰©å±•çš„ä½ã€‚ æ§åˆ¶ä½:CPSR çš„ä½ 8 ä½å±äºæ§åˆ¶ä½ã€‚ I,Fä¸­æ–­ç¦æ­¢ä½ï¼ˆç¬¬ 7ã€6 ä½ï¼‰ I=1ï¼šIRQ è¢«ç¦æ­¢ï¼›F=1ï¼šFIQ è¢«ç¦æ­¢ã€‚ TçŠ¶æ€æ§åˆ¶ä½ï¼ˆç¬¬ 5 ä½ï¼‰T æ˜¯å¤„ç†å™¨çš„çŠ¶æ€æ§åˆ¶ä½ã€‚T=0ï¼šå¤„ç†å™¨å¤„äº ARM çŠ¶æ€ï¼›T=1ï¼šå¤„ç†å™¨å¤„äº Thumb çŠ¶æ€ã€‚æ³¨æ„ï¼šç»å¯¹ä¸è¦å¼ºåˆ¶æ”¹å˜ CPSR å¯„å­˜å™¨ä¸­çš„æ§åˆ¶ä½ Tã€‚å¦‚æœè¿™æ ·åšï¼Œå¤„ç†å™¨ä¼šè¿›å…¥ä¸€ä¸ªæ— æ³•é¢„çŸ¥çš„çŠ¶æ€ã€‚ MMMMMæ¨¡å¼æ§åˆ¶ä½ æ³¨æ„é€šè¿‡ç¨‹åºä¿®æ”¹ CPSR å¯ä»¥è¿›å…¥å¼‚å¸¸(é™¤ SYS ä»¥å¤–çš„ç‰¹æƒæ¨¡å¼)ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥åœ¨å†…æ ¸å¯¹å¼‚å¸¸æˆ–è€…ä¸­æ–­å“åº”æ—¶ç”±ç¡¬ä»¶åˆ‡æ¢åˆ°å¼‚å¸¸æ¨¡å¼ã€‚ 1234567&lt;!-- ä¾‹ï¼šä»ç³»ç»Ÿæ¨¡å¼åˆ‡æ¢åˆ°ç®¡ç†æ¨¡å¼ --&gt;&lt;!-- MSR CPSR_c, #D3 æ˜¯ä¸€æ¡ARMæ±‡ç¼–è¯­è¨€æŒ‡ä»¤ï¼Œç”¨äºä¿®æ”¹å½“å‰ç¨‹åºçŠ¶æ€å¯„å­˜å™¨ï¼ˆCurrent Program Status Registerï¼ŒCPSRï¼‰çš„ç‰¹å®šå­—æ®µã€‚è¿™æ¡æŒ‡ä»¤çš„å…·ä½“å«ä¹‰å¦‚ä¸‹ï¼šMSRï¼šè¿™æ˜¯ä¸€ä¸ªMove to Status Registerçš„æŒ‡ä»¤ï¼Œç”¨äºå°†ä¸€ä¸ªå€¼ç§»åŠ¨åˆ°ä¸€ä¸ªçŠ¶æ€å¯„å­˜å™¨ä¸­ã€‚CPSR_cï¼šè¿™è¡¨ç¤ºç›®æ ‡æ˜¯CPSRçš„æ§åˆ¶å­—æ®µï¼ˆcontrol fieldï¼‰#D3ï¼šè¿™æ˜¯ä¸€ä¸ªç«‹å³æ•°ï¼Œè¡¨ç¤ºè¦å°†CPSRçš„æ§åˆ¶å­—æ®µè®¾ç½®ä¸ºåå…­è¿›åˆ¶çš„D3ã€‚åœ¨äºŒè¿›åˆ¶ä¸­ï¼ŒD3ç­‰äº1101 0011ã€‚ --&gt;MSR CPSR_c,#D3; ç”¨æˆ·æ¨¡å¼ä¸ç³»ç»Ÿæ¨¡å¼ä¸èƒ½ç”±å¼‚å¸¸è¿›å…¥ï¼Œä¹Ÿå°±æ˜¯è¯´è¦æƒ³è¿›å…¥ç³»ç»Ÿæ¨¡å¼ï¼Œå¿…é¡»é€šè¿‡ä¿®æ”¹ CPSR æ‰èƒ½å®ç°ã€‚MSR CPSR_c,#DF; ARM StorageARM å­˜å‚¨æ–¹æ³•ARM å¤„ç†å™¨å¤–éƒ¨é‡‡ç”¨å†¯Â·è¯ºä¾æ›¼ï¼ˆvon Neumannï¼‰ç»“æ„ï¼ŒæŒ‡ä»¤å’Œæ•°æ®å…±ç”¨ä¸€æ¡ 32 ä½æ•°æ®æ€»çº¿ï¼Œåªæœ‰è£…è½½ã€å­˜å‚¨å’Œäº¤æ¢æŒ‡ä»¤å¯è®¿é—®å­˜å‚¨å™¨ä¸­çš„æ•°æ®ã€‚ARM å¤„ç†å™¨å°†å­˜å‚¨å™¨çœ‹ä½œæ˜¯ä¸€ä¸ªä» 0 å¼€å§‹çš„çº¿æ€§é€’å¢çš„å­—èŠ‚é›†åˆï¼Œå…¶ä¸­æ¯ä¸ªæ•°ç»„å…ƒç´ ï¼ˆå­—èŠ‚ï¼‰éƒ½æ˜¯å¯ä»¥å¯»å€çš„ã€‚ARM æ”¯æŒå¤§ç«¯æ¨¡å¼ï¼ˆbig-endianï¼‰å’Œå°ç«¯æ¨¡å¼ï¼ˆlittle-endianï¼‰ä¸¤ç§å†…å­˜æ¨¡å¼ã€‚åœ¨å¤§ç«¯æ¨¡å¼ä¸‹ï¼Œä¸€ä¸ªå­—çš„é«˜åœ°å€å•å…ƒæ”¾çš„æ˜¯æ•°æ®çš„ä½ä½ï¼›è€Œåœ¨å°ç«¯æ¨¡å¼ä¸‹ï¼Œæ•°æ®çš„ä½ä½æ”¾åœ¨å†…å­˜ä¸­ä½åœ°å€å•å…ƒä¸­ã€‚ä¸€ä¸ªåŸºäº ARM çš„å®é™…èŠ¯ç‰‡å¯èƒ½åªæ”¯æŒå°ç«¯å­˜å‚¨å™¨æ ¼å¼ï¼Œä¹Ÿå¯èƒ½åªæ”¯æŒå¤§ç«¯å­˜å‚¨å™¨æ ¼å¼ï¼Œè¿˜å¯èƒ½ä¸¤è€…éƒ½æ”¯æŒã€‚ARM æŒ‡ä»¤é›†ä¸åŒ…å«ä»»ä½•ç›´æ¥é€‰æ‹©å¤§å°ç«¯å­˜å‚¨å™¨æ ¼å¼çš„æŒ‡ä»¤ï¼Œä½†æ˜¯ä¸€ä¸ªåŒæ—¶æ”¯æŒå¤§å°ç«¯å­˜å‚¨å™¨æ ¼å¼åŸºäº ARM çš„èŠ¯ç‰‡å¯ä»¥é€šè¿‡ç¡¬ä»¶é…ç½®ï¼ˆä¸€èˆ¬ä½¿ç”¨èŠ¯ç‰‡çš„å¼•è„šæ¥é…ç½®ï¼‰æ¥åŒ¹é…å­˜å‚¨å™¨ç³»ç»Ÿæ‰€ä½¿ç”¨çš„è§„åˆ™ã€‚å¦‚æœèŠ¯ç‰‡æœ‰ä¸€ä¸ªæ ‡å‡†ç³»ç»Ÿæ§åˆ¶çš„åå¤„ç†å™¨ï¼ˆä¾‹å¦‚ ARM920T çš„ CP15 åå¤„ç†å™¨ï¼‰ï¼Œç³»ç»Ÿæ§åˆ¶åå¤„ç†å™¨å¯„å­˜å™¨ 1 çš„ bit7 å¯ç”¨äºæ”¹å˜é…ç½®ã€‚æ³¨æ„ï¼šå¯¹äº S3C2440æ˜¯é€šè¿‡è½¯ä»¶æ¥æŒ‡å®šå­˜å‚¨å™¨æ ¼å¼çš„ï¼ˆé€šè¿‡è®¾ç½® CP15 åå¤„ç†å™¨åå¤„ç†å™¨å¯„å­˜å™¨ 1 çš„ bit7 æ¥å®ç°ï¼‰ï¼Œç¼ºçœä¸ºå°ç«¯æ ¼å¼ã€‚ ARM ä½“ç³»çš„å­˜å‚¨ç©ºé—´ARM9 ä½¿ç”¨ $2^{32}$ ä¸ª 8 ä½å­—èŠ‚åœ°å€ç©ºé—´ï¼Œå­—èŠ‚åœ°å€çš„æ’åˆ—ä» $0ï½2^{32}-1$åœ°å€ç©ºé—´ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯åŒ…å«$2^{30}$ä¸ª 32 ä½å­—ï¼Œåœ°å€ä»¥å­—ä¸ºå•ä½è¿›è¡Œåˆ†é…ã€‚ä¹Ÿå°±æ˜¯å°†åœ°å€é™¤ä»¥ 4ï¼Œåœ°å€ä¸º A çš„å­—åŒ…å« 4 ä¸ªå­—èŠ‚ï¼Œåœ°å€åˆ†åˆ«ä¸º Aã€A+1ã€A+2å’ŒA+3ã€‚ä¸æ­¤åŒæ—¶ï¼Œåœ°å€ç©ºé—´è¿˜å¯è¢«çœ‹ä½œåŒ…å«$2^{31}$ä¸ª 16 ä½åŠå­—ï¼Œåœ°å€æŒ‰ç…§åŠå­—è¿›è¡Œåˆ†é…ã€‚åœ°å€ä¸º A çš„åŠå­—åŒ…å« 2 ä¸ªå­—èŠ‚ï¼Œåœ°å€åˆ†åˆ«ä¸º Aå’ŒA+1ã€‚ ARM å­˜å‚¨å™¨ç»“æ„ARM å¤„ç†å™¨æœ‰çš„å¸¦æœ‰æŒ‡ä»¤ cache å’Œæ•°æ® cacheï¼Œä½†ä¸å¸¦æœ‰ç‰‡å†… RAM å’Œç‰‡å†… ROMã€‚ç³»ç»Ÿæ‰€éœ€çš„ RAM å’Œ ROMï¼ˆåŒ…æ‹¬ Flashï¼‰éƒ½é€šè¿‡æ€»çº¿å¤–æ¥ã€‚æœ‰çš„ ARM ç‰‡å†…è¿˜å¸¦æœ‰å­˜å‚¨å™¨ç®¡ç†å•å…ƒ MMUï¼ˆMemory Management Unitï¼‰ å­˜å‚¨å™¨æ˜ å°„ I/OåŸºäº ARM å†…æ ¸çš„èŠ¯ç‰‡å…·æœ‰è®¸å¤šçš„å¤–è®¾ï¼Œè¿™äº›å¤–è®¾è®¿é—®çš„æ ‡å‡†æ–¹æ³•æ˜¯ä½¿ç”¨å­˜å‚¨å™¨æ˜ å°„çš„ I/Oï¼ˆå­˜å‚¨å™¨ç»Ÿä¸€ç¼–å€ï¼‰ï¼Œä¸ºå¤–è®¾çš„æ¯ä¸ªå¯„å­˜å™¨éƒ½åˆ†é…ä¸€ä¸ªåœ°å€ã€‚é€šå¸¸ï¼Œä»è¿™äº›åœ°å€è£…è½½æ•°æ®ç”¨äºè¯»å…¥ï¼Œå‘è¿™äº›åœ°å€ä¿å­˜æ•°æ®ç”¨äºè¾“å‡ºã€‚æœ‰äº›åœ°å€çš„è£…è½½å’Œä¿å­˜ç”¨äºå¤–è®¾çš„æ§åˆ¶åŠŸèƒ½ï¼Œè€Œä¸æ˜¯è¾“å…¥æˆ–è¾“å‡ºåŠŸèƒ½ã€‚æ³¨æ„ï¼šå­˜å‚¨å™¨æ˜ å°„çš„ I/O ä½ç½®çš„æ“ä½œä¸åŒäºæ­£å¸¸çš„å­˜å‚¨å™¨ä½ç½®çš„æ“ä½œã€‚é€šå¸¸ï¼ŒæŠŠå­˜å‚¨å™¨æ˜ å°„çš„ I/O ä½ç½®æ ‡è®°ä¸ºæ— é«˜é€Ÿç¼“å­˜å’Œæ— ç¼“å†²åŒºï¼Œä»¥é¿å…å¤„ç†å™¨æŠŠè¿™éƒ¨åˆ†åœ°å€å½“æ™®é€šå†…å­˜ï¼Œè°ƒå…¥åˆ° cache ä¸­ï¼Œè¿›è¡Œç¼“å­˜æ“ä½œã€‚ Flash ç»„ç»‡å½¢å¼ç›®å‰å‡ ä¹æ‰€æœ‰ MCU çš„ç¨‹åºéƒ½å­˜å‚¨åœ¨ Flash ä¸­ã€‚Flash åˆ†ä¸ºç‰‡å†…å’Œç‰‡å¤–ä¸¤ç§ã€‚ç‰‡å¤– Flash åˆæœ‰ä»¥ä¸‹ç§ç±»ã€‚NOR Flash:NOR Flash è¯»å–é€Ÿåº¦å¿«ï¼Œä½†æ˜¯æ“¦é™¤å’Œå†™å…¥é€Ÿåº¦æ…¢ã€‚NAND Flash:NAND Flash è¯»å–é€Ÿåº¦æ¯” NOR Flash æ…¢ï¼Œä½†æ“¦é™¤å’Œå†™å…¥é€Ÿåº¦å¾ˆå¿« RAM çš„ç»„ç»‡å½¢å¼èŠ¯ç‰‡è‡ªå¸¦çš„ RAM ä¸å¤Ÿç”¨æ—¶éœ€è¦å¤–åŠ ï¼Œå¤–åŠ çš„ RAM ä¸€èˆ¬æ˜¯ SDRAM å’Œ DDR RAMï¼Œæå°‘æ•°ä½¿ç”¨ SRAMï¼Œå› ä¸º SRAM çš„ä»·æ ¼ç›¸å¯¹è¾ƒè´µï¼Œä½† SRAM é€Ÿåº¦è¦æ¯”åŠ¨æ€ RAM å¿«ã€‚SRAM:åªéœ€è¦åœ¨ IDE ä¸­è®¾ç½®å¥½åœ°å€ã€‚SDRAM/DDR RAM:ä¸ä»…è¦åœ¨ IDE ä¸­è®¾ç½®å¥½èµ·å§‹åœ°å€ï¼Œè¿˜è¦åœ¨ç¨‹åºä¸­åšåˆå§‹åŒ–æ“ä½œåæ‰èƒ½ä½¿ç”¨ã€‚å¦‚æœä½¿ç”¨ä»¿çœŸå™¨ï¼Œé‚£ä¹ˆåœ¨ä»¿çœŸè¿è¡Œç¨‹åºå‰ï¼Œè¦æ‰§è¡Œä¸€ä¸ªåˆå§‹åŒ–è„šæœ¬æ–‡ä»¶ï¼Œæˆ–è€…æ‰§è¡Œä¸€ç³»åˆ—å‘½ä»¤å¯¹ SDRAM å’Œ DDR RAM è¿›è¡Œåˆå§‹åŒ–ï¼Œå¦åˆ™ä¼šè¿è¡Œå‡ºé”™ã€‚","link":"/UESTC/ARM-Processor/Ch2-1ARM%E5%A4%84%E7%90%86%E5%99%A8%E5%8F%8A%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84/"},{"title":"ARMä¸­æ–­åŠå¼‚å¸¸","text":"ä¸­æ–­å’Œå¼‚å¸¸åŸºæœ¬æ¦‚å¿µä¸­æ–­æ˜¯ä¸»æœºä¸å¤–è®¾è¿›è¡Œæ•°æ®é€šä¿¡çš„é‡è¦æœºåˆ¶ï¼Œå®ƒè´Ÿè´£å¤„ç†å¤„ç†å™¨å¤–éƒ¨çš„äº‹ä»¶;å¼‚å¸¸å®è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§ä¸­æ–­ï¼Œåªä¸è¿‡å®ƒä¸»è¦è´Ÿè´£å¤„ç†å¤„ç†å™¨å†…éƒ¨äº‹ä»¶ã€‚è®¡ç®—æœºé€šå¸¸æ˜¯ç”¨ä¸­æ–­æ¥å¤„ç†å¤–ä¸­æ–­å’Œå†…éƒ¨å¼‚å¸¸ï¼Œå› æ­¤åœ¨ ARM æŠ€æœ¯ä¸­ï¼Œå°†äºŒè€…ç»Ÿç§°ä¸ºå¼‚å¸¸ã€‚ä¸­æ–­å½“å¤„ç†å™¨é‡æœ‰å¤–éƒ¨è®¾å¤‡å‘ç”Ÿ â€œç´§æ€¥äº‹ä»¶â€ éœ€è¦å®ƒæ¥å¤„ç†æ—¶ï¼Œå®ƒå°±å¿…é¡»åœä¸‹ â€œæ‰‹å¤´ä¸Šçš„å·¥ä½œâ€ å…ˆå»å¤„ç†è¿™ä¸ª â€œç´§æ€¥äº‹ä»¶â€ã€‚å¤„ç†å™¨çš„è¿™ç§å·¥ä½œè¿‡ç¨‹ï¼Œæˆ–è€…è¿™ç§å·¥ä½œçŠ¶æ€å°±å«åšä¸­æ–­ã€‚ä¸­æ–­è¯·æ±‚å½“å¤–éƒ¨è®¾å¤‡æœ‰ç´§æ€¥äº‹ä»¶éœ€è¦å¤„ç†å™¨è¿›è¡Œå¤„ç†æ—¶ï¼Œå¤–éƒ¨è®¾å¤‡å¿…é¡»å‘å¤„ç†å™¨å‘é€ä¸€ä¸ª ç”µä¿¡å·ï¼ˆè„‰å†²æˆ–ç”µå¹³ï¼‰ æ¥è¡¨ç¤ºæœ‰äº‹ä»¶éœ€è¦å¤„ç†å™¨æ¥å¤„ç†ã€‚è¿™ä¸ªä¿¡å·å«åš ä¸­æ–­è¯·æ±‚ä¿¡å· ï¼Œæˆ–ç§° ä¸­æ–­è¯·æ±‚ã€‚ä¸­æ–­æºå‘å‡ºä¸­æ–­è¯·æ±‚ä¿¡å·çš„å¤–éƒ¨è®¾å¤‡æˆ–äº‹ä»¶å°±å«åšä¸­æ–­æºã€‚å¼‚å¸¸ç”±å†…éƒ¨äº‹ä»¶å¼•èµ·çš„ä¸­æ–­å«åšå¼‚å¸¸ã€‚ ä¸­æ–­å‘é‡å’Œä¸­æ–­å‘é‡è¡¨ä¸ºäº†ä¸æ™®é€šå­ç¨‹åºçš„é¦–åœ°å€è¿›è¡ŒåŒºåˆ†ï¼Œä¸­æ–­æœåŠ¡ç¨‹åºçš„é¦–åœ°å€ï¼ˆå…¥å£åœ°å€ï¼‰é€šå¸¸è¢«å«åšä¸­æ–­å‘é‡ï¼Œæˆ–ä¸­æ–­çŸ¢é‡ã€‚ä»¥åè¿˜ä¼šçœ‹åˆ°ï¼Œå‡¡æ˜¯èƒ½ç›´æ¥æˆ–é—´æ¥æŒ‡å‘ä¸­æ–­æœåŠ¡ç¨‹åºçš„éƒ½å«ä¸­æ–­å‘é‡ã€‚åœ¨å¤„ç†å™¨æ”¶åˆ°ä¸­æ–­è¯·æ±‚ä¹‹åï¼Œå®ƒä»¬éƒ½éœ€è¦è·å¾—ä¸­æ–­æœåŠ¡ç¨‹åºé¦–åœ°å€â€”â€”ä¸­æ–­å‘é‡ã€‚æ‰€æœ‰çš„ä¸­æ–­å‘é‡éƒ½æŒ‰ä¸€å®šè§„å¾‹å­˜æ”¾åœ¨ä¸€ä¸ªå›ºå®šçš„å­˜å‚¨åŒºåŸŸï¼Œè¿™ä¸ªé›†ä¸­å­˜æ”¾äº†ä¸­æ–­å‘é‡æˆ–ä¸ä¸­æ–­å‘é‡ç›¸å…³ä¿¡æ¯çš„å­˜å‚¨åŒºåŸŸå°±å«åšä¸­æ–­å‘é‡è¡¨ã€‚ ä¸­æ–­è¯·æ±‚ä¿¡å·çš„å±è”½å¯å±è”½ä¸­æ–­ äººä»¬æŠŠå¸¦æœ‰å¼€å…³ï¼Œèƒ½é˜»æ­¢ä¸­æ–­è¯·æ±‚çš„ä¸­æ–­è¾“å…¥ç«¯å«åšå¯å±è”½ä¸­æ–­ä¿¡å·è¾“å…¥ç«¯ã€‚è¿™ç±»ä¸­æ–­å«å¯å±è”½ä¸­æ–­ã€‚éå±è”½ä¸­æ–­ äººä»¬æŠŠä¸å¸¦å¼€å…³ï¼Œä¸èƒ½é˜»æ­¢ä¸­æ–­è¯·æ±‚çš„ä¸­æ–­è¾“å…¥ç«¯å«åšéå±è”½ä¸­æ–­ä¿¡å·è¾“å…¥ç«¯ã€‚è¿™ç±»ä¸­æ–­å«éå±è”½ä¸­æ–­ã€‚ ä¸ºäº†å¯¹å¤„ç†å™¨å¯ä»¥æ¥æ”¶ä¸­æ–­æºçš„æ•°ç›®è¿›è¡Œæ‰©å……åŠå¯¹ä¸­æ–­è¿›è¡Œå¿…è¦çš„ç®¡ç†ï¼Œåœ¨ä¸­æ–­æºå’Œå¤„ç†å™¨ä¹‹é—´è¿˜é…æœ‰å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ä¸­æ–­æ§åˆ¶å™¨ ä¸­æ–­ä¼˜å…ˆçº§åŠä¸­æ–­åµŒå¥—å¤„ç†å™¨é€šå¸¸åªæœ‰ä¸€ä¸ªå¯å±è”½ä¸­æ–­è¯·æ±‚è¾“å…¥ç«¯ã€‚å¯¹äºå…·æœ‰ å¤šä¸ªä¸­æ–­æºçš„ç³»ç»Ÿæ¥è¯´ï¼Œå½“æœ‰ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šä¸­æ–­æºåŒæ—¶å‘ç”Ÿä¸­æ–­è¯·æ±‚æ—¶å°±ä¼šå‡ºç°æ‰€è°“çš„ç«äº‰ã€‚ç«äº‰å¯ä»¥é€šè¿‡ä¼˜å…ˆçº§çš„æ–¹æ³•æ¥å¤„ç†ï¼Œå…·ä½“å®ç°æ–¹æ³•æœ‰ä¸¤ç§ï¼šç¡¬ä»¶å®ç°æ–¹æ³•å’Œè½¯ä»¶å®ç°æ–¹æ³•ã€‚ ARM å¼‚å¸¸å“åº”å¤„ç†å™¨å“åº”ä¸­æ–­çš„æ¡ä»¶ å¤„ç†å™¨ç¨‹åºçŠ¶æ€å¯„å­˜å™¨çš„ä¸­æ–­å±è”½æ ‡å¿—å¤„äºéå±è”½çŠ¶æ€ æ²¡æœ‰æ›´é«˜çº§çš„ä¸­æ–­è¯·æ±‚æ­£åœ¨å“åº”æˆ–æ­£åœ¨å‘å‡ºã€æ­£æŒ‚èµ·ï¼› å¤„ç†å™¨åœ¨ç°è¡ŒæŒ‡ä»¤æ‰§è¡Œç»“æŸå ä¸­æ–­çš„å¤„ç†è¿‡ç¨‹ å½“æœ‰ä¸­æ–­è¯·æ±‚å‘ç”Ÿä¸”æ»¡è¶³ä¸Šè¿°æ¡ä»¶æ—¶ï¼Œè®¡ç®—æœºç³»ç»Ÿå°±ä¼šå“åº”ä¸­æ–­è¯·æ±‚ï¼Œå¹¶è‡ªåŠ¨å°†è¢«ä¸­æ–­ç¨‹åºçš„ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€ï¼ˆæ–­ç‚¹åœ°å€ï¼‰ä¿å­˜å’Œå…³é—­ä¸­æ–­ï¼›æ¥ä¸‹æ¥ä¾¿å°†è‡ªä¸­æ–­å‘é‡è¡¨æŸ¥è¯¢å¾—åˆ°çš„ä¸è¯¥ä¸­æ–­æºå¯¹åº”çš„ä¸­æ–­å‘é‡é€å…¥ PCï¼Œå¹¶è½¬å»æ‰§è¡Œä¸­æ–­æœåŠ¡ç¨‹åºã€‚ å½“æ‰§è¡Œåˆ°ä¸­æ–­æœåŠ¡ç¨‹åºæœ«å°¾æ—¶ï¼Œæ‰§è¡Œä¸­æ–­è¿”å›æŒ‡ä»¤æˆ–è·³è½¬æŒ‡ä»¤ï¼ŒæŠŠä¿å­˜çš„æ–­ç‚¹åœ°å€é€å› PCï¼Œä»¥åœ¨æ–­ç‚¹å¤„æ¥ç»­æ‰§è¡Œè¢«ä¸­æ–­çš„ç¨‹åºã€‚ ARM çš„ä¸­æ–­(å¼‚å¸¸)å‘é‡è¡¨ ARM çš„ä¸­æ–­å‘é‡è¡¨å†…å­˜æ”¾çš„æ˜¯å“åº”å¼‚å¸¸å’Œä¸­æ–­çš„è½¬ç§»æŒ‡ä»¤è€Œä¸æ˜¯ä¸­æ–­å‘é‡åœ°å€ã€‚åœ¨ ARM å¤„ç†å™¨ä¸­ï¼Œå½“å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œå®Œæˆå½“å‰æŒ‡ä»¤åè·³è½¬åˆ°ç›¸åº”çš„å¼‚å¸¸ä¸­æ–­å¤„ç†ç¨‹åºå…¥å£æ‰§è¡Œå¼‚å¸¸ä¸­æ–­å¤„ç†ã€‚å¼‚å¸¸å¤„ç†å®Œæ¯•åè¿”å›åŸæ¥çš„ç¨‹åºæ–­ç‚¹ç»§ç»­æ‰§è¡ŒåŸæ¥çš„ç¨‹åºã€‚ è¿›å…¥å¼‚å¸¸ åœ¨å¼‚å¸¸å‘ç”Ÿåï¼ŒARM å†…æ ¸ä¼šä½œä»¥ä¸‹å·¥ä½œï¼š åœ¨é€‚å½“çš„ LR ä¸­ä¿å­˜æ–­ç‚¹çš„åœ°å€ æŠŠå½“å‰ç¨‹åºçŠ¶æ€å¯„å­˜å™¨ï¼ˆCPSRï¼‰ä¸­çš„å†…å®¹ä¿å­˜åˆ°æ¨¡å¼ç§æœ‰å¯„å­˜å™¨ SPSR ä¸­ å°†å¯„å­˜å™¨ CPSR ä¸­çš„ MODE åŸŸè®¾ç½®ä¸ºä¸­æ–­ï¼ˆå¼‚å¸¸ï¼‰åº”è¿›å…¥çš„è¿è¡Œæ¨¡å¼ï¼› å¯¹ CPSR çš„ I ä½å’Œ F ä½è¿›è¡Œç›¸åº”çš„è®¾ç½®ï¼Œä»¥é˜²æ­¢å†æ¬¡å“åº”åŒä¸€ä¸ªä¸­æ–­è¯·æ±‚ã€‚ å¼ºåˆ¶ PC ä»ç›¸å…³çš„å¼‚å¸¸å‘é‡å¤„å–æŒ‡ï¼Œå³åˆ°ä¸­æ–­å‘é‡è¡¨ä¸­è·å–ä¸­æ–­å‘é‡ï¼Œè½¬å‘ç”¨æˆ·æ‰€ç¼–å†™çš„ä¸­æ–­ï¼ˆå¼‚å¸¸ï¼‰æœåŠ¡ç¨‹åºã€‚æ³¨ï¼šå¼‚å¸¸æ€»æ˜¯åœ¨ ARM çŠ¶æ€ä¸­è¿›è¡Œå¤„ç†ã€‚å½“å¤„ç†å™¨å¤„äº Thumb çŠ¶æ€æ—¶å‘ç”Ÿäº†å¼‚å¸¸ï¼Œåœ¨å¼‚å¸¸å‘é‡åœ°å€è£…å…¥ PC æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢åˆ° ARM çŠ¶æ€ å¼‚å¸¸è¿”å› å½“å¼‚å¸¸ç»“æŸæ—¶ï¼Œå¼‚å¸¸å¤„ç†ç¨‹åºå¿…é¡»åšå¦‚ä¸‹å¤„ç†ï¼š å°† SPSR çš„å€¼å¤åˆ¶å› CPSR å°† LR ä¸­çš„å€¼å‡å»åç§»é‡åå­˜å…¥ PCï¼Œåç§»é‡æ ¹æ®å¼‚å¸¸çš„ç±»å‹è€Œæœ‰æ‰€ä¸åŒã€‚ ARM çš„ä¸­æ–­(å¼‚å¸¸)ARM æŒ‰äº‹ä»¶çš„ç´§æ€¥ç¨‹åº¦ä¸ºæ¯ä¸ªä¸­æ–­ï¼ˆå¼‚å¸¸ï¼‰éƒ½å®šä¹‰äº†ä¸€ä¸ªå›ºå®šçš„ä¼˜å…ˆçº§åˆ«ã€‚å½“å¤šä¸ªå¼‚å¸¸åŒæ—¶å‘ç”Ÿæ—¶ï¼Œä¸€ä¸ªå›ºå®šçš„ä¼˜å…ˆçº§ç³»ç»Ÿå†³å®šå®ƒä»¬è¢«å¤„ç†çš„é¡ºåºï¼š å¿«é€Ÿä¸­æ–­è¯·æ±‚å¼‚å¸¸ FIQæœ‰äº›åµŒå…¥å¼ç³»ç»Ÿçš„åº”ç”¨å¯¹å®æ—¶æ€§è¦æ±‚æ¯”è¾ƒé«˜ï¼Œéœ€è¦è¶³å¤Ÿå¿«çš„ä¸­æ–­å“åº”é€Ÿåº¦ï¼Œæ¯”å¦‚æ•°æ®è½¬ç§»æˆ–é€šé“å¤„ç†ã€‚ARM åœ¨è®¾è®¡ä¸Šå……åˆ†åœ°è€ƒè™‘äº†åµŒå…¥å¼ç³»ç»Ÿçš„è¿™ä¸€ç‰¹ç‚¹ï¼Œåœ¨ IRQ å¼‚å¸¸ä¹‹å¤–è¿˜è®¾è®¡äº†ä¸€ç§å¿«é€Ÿä¸­æ–­è¯·æ±‚ï¼ˆFIQï¼‰å¼‚å¸¸ï¼Œå¹¶åœ¨ç¡¬ä»¶ç»“æ„å’Œèµ„æºåˆ†é…ä¸Šç»™äºˆäº†è¶³å¤Ÿçš„æ”¯æŒã€‚ä¸ºå‡å°‘å»¶æ—¶ï¼ŒARM åœ¨å¿«ä¸­æ–­ä¸­é‡‡å–äº† ä¸¤ä¸ªæªæ–½ï¼šä¸“é—¨ä¸ºå¿«ä¸­æ–­é…ç½®äº†è¾ƒå¤šçš„ç§æœ‰å¯„å­˜å™¨ï¼Œä»è€Œå¯ä½¿ä¸­æ–­æœåŠ¡ç¨‹åºæœ‰è¶³å¤Ÿçš„å¯„å­˜å™¨æ¥ä½¿ç”¨ï¼Œè€Œä¸å¿…ä¸è¢«ä¸­æ–­æœåŠ¡ç¨‹åºä½¿ç”¨åŒä¸€ç»„å¯„å­˜å™¨ï¼Œè¿™æ ·å°±å…å»äº†å› å¯„å­˜å™¨å†²çªè€Œå¿…éœ€çš„ä¿æŠ¤åŠæ¢å¤ç°åœºå·¥ä½œã€‚ARM æŠŠ FIQ çš„ä¸­æ–­å‘é‡æ”¾åœ¨äº†ä¸­æ–­ï¼ˆå¼‚å¸¸ï¼‰å‘é‡è¡¨æœ«å°¾ 0X0000001C å¤„ï¼Œå› æ­¤å®ƒåé¢æ²¡æœ‰å…¶å®ƒä¸­æ–­å‘é‡ï¼Œå…è®¸ç”¨æˆ·å°†ä¸­æ–­æœåŠ¡ç¨‹åºç›´æ¥æ”¾åœ¨è¿™é‡Œã€‚ Othersè‡ªè¡ŒæŸ¥é˜…èµ„æ–™","link":"/UESTC/ARM-Processor/Ch2-2ARM%E5%BC%82%E5%B8%B8%E5%92%8C%E4%B8%AD%E6%96%AD/"},{"title":"ARMæŒ‡ä»¤é›†æ¦‚è¿°","text":"ARM æŒ‡ä»¤é›†ç®€ä»‹ARM å¾®å¤„ç†å™¨çš„ ARM æŒ‡ä»¤é›† ï¼Œæ‰€æœ‰çš„æŒ‡ä»¤é•¿åº¦éƒ½æ˜¯ 32 ä½ ï¼Œå¹¶ä¸”å¤§å¤šæ•°æŒ‡ä»¤éƒ½åœ¨ä¸€ä¸ªå•ç‹¬æŒ‡ä»¤å‘¨æœŸå†…æ‰§è¡Œã€‚ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š æŒ‡ä»¤æ˜¯æ¡ä»¶æ‰§è¡Œçš„; ARM å¾®å¤„ç†å™¨çš„æŒ‡ä»¤é›†æ˜¯åŠ è½½/å­˜å‚¨å‹çš„; åœ¨å¤šå¯„å­˜å™¨æ“ä½œæŒ‡ä»¤ä¸­ä¸€æ¬¡æœ€å¤šå¯ä»¥å®Œæˆ 16 ä¸ªå¯„å­˜å™¨çš„æ•°æ®ä¼ é€ã€‚ ARM Instruction FormatåŠ©è®°ç¬¦è¡¨ç¤ºç”¨åŠ©è®°ç¬¦è¡¨ç¤ºçš„ ARM æŒ‡ä»¤æ ¼å¼å¦‚ä¸‹ï¼š&lt;opcode&gt; {&lt;cond&gt;} {S} {&lt;Rd&gt;} { ï¼Œ&lt;Rn&gt;} {ï¼Œ&lt;OP2&gt;}æ ¼å¼ä¸­ &lt; &gt;çš„å†…å®¹å¿…ä¸å¯å°‘ï¼Œ{ }ä¸­çš„å†…å®¹å¯çœç•¥ã€‚ &lt;opcode&gt;è¡¨ç¤ºæ“ä½œç ï¼Œå¦‚ ADD è¡¨ç¤ºç®—æœ¯åŠ æ³•ã€‚{&lt;cond&gt;}è¡¨ç¤ºæŒ‡ä»¤æ‰§è¡Œçš„æ¡ä»¶åŸŸï¼Œå¦‚ EQã€NE ç­‰ã€‚{S}å†³å®šæŒ‡ä»¤çš„æ‰§è¡Œç»“æœæ˜¯å¦å½±å“ CPSR çš„å€¼ï¼Œä½¿ç”¨è¯¥åç¼€åˆ™æŒ‡ä»¤æ‰§è¡Œçš„ç»“å°†æœå½±å“ CPSR çš„å€¼ï¼Œå¦åˆ™ä¸å½±å“ã€‚&lt;Rd&gt;è¡¨ç¤ºç›®æ ‡æˆ–æºå¯„å­˜å™¨ã€‚&lt;Rn&gt;è¡¨ç¤ºç¬¬ä¸€ä¸ªæ“ä½œæ•°ï¼Œä¸ºå¯„å­˜å™¨ã€‚&lt;op2&gt;è¡¨ç¤ºç¬¬äºŒä¸ªæ“ä½œæ•°ï¼Œå¯ä»¥æ˜¯ç«‹å³æ•°ã€å¯„å­˜å™¨å’Œå¯„å­˜å™¨ç§»ä½æ“ä½œæ•°ã€‚é™¤äº† &lt;opcode&gt;å…¶ä½™åŸŸéƒ½å¯ä»¥é€‰æ‹©ä½¿ç”¨ ä¾‹å¦‚ï¼š æŒ‡ä»¤ ADDEQS R0,R1,#8; æ“ä½œç ä¸º ADDï¼Œ æ¡ä»¶åŸŸ cond ä¸º EQï¼Œ S è¡¨ç¤ºè¯¥æŒ‡ä»¤çš„æ‰§è¡Œå½±å“ CPSR å¯„å­˜å™¨çš„å€¼ï¼Œ ç›®çš„å¯„å­˜å™¨ Rd ä¸º R0ï¼Œ ç¬¬ä¸€ä¸ªæ“ä½œæ•°å¯„å­˜å™¨ Rn ä¸º R1ï¼Œ ç¬¬äºŒä¸ªæ“ä½œæ•° OP2 ä¸ºç«‹å³æ•°ï¼ƒ8ã€‚æ‰§è¡Œç»“æœï¼šR0 = R1+ 8 æœºå™¨ç è¡¨ç¤ºARM æŒ‡ä»¤ä»£ç ä¸€èˆ¬å¯ä»¥åˆ†ä¸º 5 ä¸ªåŸŸï¼šç¬¬ 1 ä¸ªåŸŸæ˜¯ 4 ä½[31:28]çš„æ¡ä»¶ç åŸŸï¼Œ4 ä½æ¡ä»¶ç å…±æœ‰ 16 ç§ç»„åˆ;ç¬¬ 2 ä¸ªåŸŸæ˜¯æŒ‡ä»¤ä»£ç åŸŸ[27:20],é™¤äº†æŒ‡ä»¤ç¼–ç å¤–ï¼Œè¿˜åŒ…å«å‡ ä¸ªå¾ˆé‡è¦çš„æŒ‡ä»¤ç‰¹å¾å’Œå¯é€‰åç¼€çš„ç¼–ç ;ç¬¬ 3 ä¸ªåŸŸæ˜¯ç¬¬ 1 ä¸ªæ“ä½œæ•°å¯„å­˜å™¨ Rnï¼Œæ˜¯ 4 ä½[19:16],ä¸º R0 ï½ R15 å…± 16 ä¸ªå¯„å­˜å™¨ç¼–ç ;ç¬¬ 4 ä¸ªåŸŸæ˜¯ç›®æ ‡æˆ–æºå¯„å­˜å™¨ Rdï¼Œæ˜¯ 4 ä½[15:12],ä¸º R0 ï½ R15 å…± 16 ä¸ªå¯„å­˜å™¨ç¼–ç ;ç¬¬ 5 ä¸ªåŸŸæ˜¯ç¬¬äºŒä¸ªæ“ä½œæ•°[11:0]ã€‚ å¯é€‰åç¼€ S åç¼€ æŒ‡ä»¤ä¸­ä½¿ç”¨ S åç¼€æ—¶ï¼ŒæŒ‡ä»¤æ‰§è¡Œåç¨‹åºçŠ¶æ€å¯„å­˜å™¨çš„æ¡ä»¶æ ‡å¿—ä½å°†è¢«åˆ·æ–°ï¼Œä¸ä½¿ç”¨ S åç¼€æ—¶ï¼ŒæŒ‡ä»¤æ‰§è¡Œåç¨‹åºçŠ¶æ€å¯„å­˜å™¨ CPSR çš„æ¡ä»¶æ ‡å¿—å°†ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚ å‡è®¾ R0=0x1,R3=0x3,æŒ‡ä»¤æ‰§è¡Œä¹‹å‰ CPSR éƒ¨åˆ†æ ‡å¿—ä½ä¸º nZcv,åˆ†åˆ«æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ CPSR çš„å€¼æœ‰ä½•å˜åŒ–ï¼ŸSUB R1,R0,R3; R0çš„å€¼å‡å»R3çš„å€¼ï¼Œç»“æœå­˜å…¥R1 &gt; SUBS R1,R0,R3; R0çš„å€¼å‡å»R3çš„å€¼ï¼Œç»“æœå­˜å…¥R1å½±å“æ ‡å¿—ä½ã€‚åˆ†æï¼šæ‰§è¡Œç¬¬ 1 æ¡æŒ‡ä»¤å¯¹äºæ ‡å¿—å¯„å­˜å™¨çš„å€¼æ²¡æœ‰ä»»ä½•å½±å“ï¼Œå› æ­¤ CPSR çš„å€¼ä¸å˜ã€‚æ‰§è¡Œç¬¬ 2 æ¡æŒ‡ä»¤å CPSR=Nzcvã€‚ !åç¼€ å¦‚æœæŒ‡ä»¤åœ°å€è¡¨è¾¾å¼ä¸­ä¸å«ï¼åç¼€ï¼Œåˆ™åŸºå€å¯„å­˜å™¨ä¸­çš„åœ°å€å€¼ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚æŒ‡ä»¤ä¸­çš„åœ°å€è¡¨è¾¾å¼ä¸­å«æœ‰!åç¼€æ—¶ï¼ŒæŒ‡ä»¤æ‰§è¡Œåï¼ŒåŸºå€å¯„å­˜å™¨ä¸­çš„åœ°å€å€¼å°†å‘ç”Ÿå˜åŒ–ï¼Œå˜åŒ–çš„ç»“æœå¦‚ä¸‹ï¼šåŸºå€å¯„å­˜å™¨ä¸­çš„å€¼ï¼ˆæŒ‡ä»¤æ‰§è¡Œåï¼‰ï¼æŒ‡ä»¤æ‰§è¡Œå‰çš„å€¼ï¼‹åœ°å€åç§»é‡ä½¿ç”¨!åç¼€éœ€è¦æ³¨æ„å¦‚ä¸‹äº‹é¡¹ï¼š - ï¼åç¼€å¿…é¡»ç´§è·Ÿåœ¨åœ°å€è¡¨è¾¾å¼åé¢ï¼Œè€Œåœ°å€è¡¨è¾¾å¼è¦æœ‰æ˜ç¡®çš„åœ°å€åç§»é‡; - ! åç¼€ä¸èƒ½ç”¨äº R15(PC)çš„åé¢; - å½“ç”¨åœ¨å•ä¸ªåœ°å€å¯„å­˜å™¨åé¢æ—¶ï¼Œå¿…é¡»ç¡®ä¿¡è¿™ä¸ªå¯„å­˜å™¨æœ‰éšæ€§çš„åç§»é‡ï¼Œä¾‹å¦‚â€œSTMIA R7!, {R0 â€“ R3}â€æ­¤æ—¶åœ°å€åŸºå€å¯„å­˜å™¨ R7 çš„éšæ€§åç§»é‡æ˜¯ 16 å­—èŠ‚ã€‚å¦‚æœ R7 çš„åˆå§‹å€¼ä¸º 0X40000000ï¼Œåˆ™è¯¥è¯­å¥ç»“æŸåä¸º 0X40000010 ä¾‹ åˆ†åˆ«æ‰§è¡Œä¸‹é¢ä¸¤æ¡æŒ‡ä»¤æœ‰ä½•åŒºåˆ«ï¼ŸLDR R3,[R0,#4] &gt; LDR R3,[R0,#4]ï¼åˆ†æï¼šåœ¨ä¸Šè¿°æŒ‡ä»¤ä¸­ï¼Œç¬¬ 1 æ¡æŒ‡ä»¤æ²¡æœ‰åç¼€ï¼ï¼ŒæŒ‡ä»¤çš„ç»“æœæ˜¯æŠŠ R0 åŠ  4 ä½œä¸ºåœ°å€æŒ‡é’ˆï¼ŒæŠŠè¿™ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„åœ°å€å•å…ƒæ‰€å­˜å‚¨çš„æ•°æ®è¯»å…¥ R3ï¼ŒR0 çš„å€¼ä¸å˜ã€‚ç¬¬ 2 æ¡æŒ‡ä»¤é™¤äº†å®ç°ä»¥ä¸Šæ“ä½œå¤–ï¼Œè¿˜æŠŠ R0 ï¼‹ 4 çš„ç»“æœé€åˆ° R0 ä¸­ã€‚ B åç¼€B åç¼€çš„å«ä¹‰æ˜¯ï¼šæŒ‡ä»¤æ‰€æ¶‰åŠçš„æ•°æ®æ˜¯ä¸€ä¸ªå­—èŠ‚ï¼Œä¸æ˜¯ä¸€ä¸ªå­—æˆ–åŠå­—ã€‚LDR R4ï¼Œ[R0]R4=[R0]ï¼ŒæŒ‡ä»¤ä¼ é€ä¸€ä¸ªå­—LDRB R4ï¼Œ[R0]R4=[R0]ï¼ŒæŒ‡ä»¤ä¼ é€ä¸€ä¸ªå­—èŠ‚LDREQB R4ï¼Œ[R0]å¦‚æœç›¸ç­‰åˆ™æ‰§è¡Œï¼ŒR4=[R0]ï¼ŒæŒ‡ä»¤ä¼ é€ä¸€ä¸ªå­—èŠ‚ ARM æŒ‡ä»¤çš„æ¡ä»¶ç  æ¡ä»¶ç  æ¡ä»¶ç åŠ©è®°ç¬¦ CPSR ä¸­æ¡ä»¶æ ‡å¿—ä½å€¼ å«ä¹‰ 0000 EQ Z=1 ç›¸ç­‰ 0001 NE Z=0 ä¸ç›¸ç­‰ 0010 CS/HS C=1 æ— ç¬¦å·æ•°å¤§äºæˆ–ç­‰äº 0011 CC/LO C=0 æ— ç¬¦å·æ•°å°äº 0100 MI N=1 è´Ÿæ•° 0101 PL N=0 æ­£æ•°æˆ–é›¶ 0110 VS V=1 æº¢å‡º 0111 VC V=0 æœªæº¢å‡º 1000 HI C=1 ä¸” Z=0 æ— ç¬¦å·æ•°å¤§äº 1001 LS C=0 æˆ– Z=1 æ— ç¬¦å·æ•°å°äºæˆ–ç­‰äº 1010 GE N=V å¸¦ç¬¦å·æ•°å¤§äºæˆ–ç­‰äº 1011 LT N!=V å¸¦ç¬¦å·æ•°å°äº 1100 GT Z=0 ä¸” N=V å¸¦ç¬¦å·æ•°å¤§äº 1101 LE Z=1 æˆ– N!=V å¸¦ç¬¦å·æ•°å°äºæˆ–ç­‰äº 1110 AL æ— æ¡ä»¶æ‰§è¡Œ 1111 NV ARMV3 ä¹‹å‰ ä»ä¸æ‰§è¡Œä¸è¦ä½¿ç”¨ ARM æŒ‡ä»¤åˆ†ç±»ARM æŒ‡ä»¤å¯ä»¥åˆ†ä¸ºï¼šåˆ†æ”¯æŒ‡ä»¤ã€æ•°æ®å¤„ç†æŒ‡ä»¤ã€å­˜å‚¨è®¿é—®æŒ‡ä»¤ã€åå¤„ç†å™¨æŒ‡ä»¤å’Œæ‚é¡¹æŒ‡ä»¤äº”ç±»ã€‚1. åˆ†æ”¯æŒ‡ä»¤åˆ†æ”¯æŒ‡ä»¤ç”¨äºæ§åˆ¶ç¨‹åºçš„æ‰§è¡Œæµç¨‹ã€å®ç° ARM ä»£ç ä¸ Thumb ä»£ç ä¹‹é—´è¿›è¡Œåˆ‡æ¢ã€‚2. æ•°æ®å¤„ç†æŒ‡ä»¤æ•°æ®å¤„ç†æŒ‡ä»¤åœ¨é€šç”¨å¯„å­˜å™¨ä¸Šæ‰§è¡Œè®¡ç®—ï¼Œä¸»è¦åˆ†ä¸º 3 ç§ï¼šç®—æœ¯/é€»è¾‘æŒ‡ä»¤ã€æ¯”è¾ƒæŒ‡ä»¤å’Œä¹˜æ³•æŒ‡ä»¤ã€‚3. å­˜å‚¨è®¿é—®æŒ‡ä»¤ç”¨äºåŠ è½½/å­˜å‚¨å­˜æ”¾äº MCU ç‰‡å¤–å­˜å‚¨ç³»ç»Ÿä¸­çš„æ•°æ®ã€‚åŠ è½½æŒ‡ä»¤ç”¨äºä»å†…å­˜ä¸­è¯»å–æ•°æ®æ”¾å…¥å¯„å­˜å™¨ä¸­ï¼Œå­˜å‚¨æŒ‡ä»¤ç”¨äºå°†å¯„å­˜å™¨ä¸­çš„æ•°æ®ä¿å­˜åˆ°å†…å­˜ä¸­ã€‚4. ARM åå¤„ç†å™¨æŒ‡ä»¤ARM åå¤„ç†å™¨æŒ‡ä»¤ç”¨äºæ§åˆ¶å¤–éƒ¨çš„åå¤„ç†å™¨ã€‚åŒ…æ‹¬ æ•°æ®å¤„ç†æŒ‡ä»¤ï¼šå¯åŠ¨ä¸€ä¸ªåå¤„ç†å™¨ä¸“ç”¨çš„å†…éƒ¨æ“ä½œã€‚ æ•°æ®è½¬ç§»æŒ‡ä»¤ï¼šä½¿æ•°æ®åœ¨åå¤„ç†å™¨å’Œå­˜å‚¨å™¨ä¹‹é—´è¿›è¡Œè½¬ç§»ã€‚ å¯„å­˜å™¨è½¬ç§»æŒ‡ä»¤ï¼šåå¤„ç†å™¨å€¼è½¬ç§»åˆ° ARM å¯„å­˜å™¨æˆ– ARM å¯„å­˜å™¨çš„å€¼è½¬ç§»åˆ°åå¤„ç†å™¨ã€‚ 5. æ‚é¡¹æŒ‡ä»¤åŒ…æ‹¬çŠ¶æ€å¯„å­˜å™¨è½¬ç§»æŒ‡ä»¤å’Œå¼‚å¸¸ä¸­æ–­äº§ç”ŸæŒ‡ä»¤ã€‚çŠ¶æ€å¯„å­˜å™¨è½¬ç§»æŒ‡ä»¤å°† CPSR æˆ– SPSR çš„å†…å®¹è½¬ç§»åˆ°ä¸€ä¸ªé€šç”¨å¯„å­˜å™¨ï¼Œæˆ–è€…åè¿‡æ¥å°†é€šç”¨å¯„å­˜å™¨çš„å†…å®¹å†™å…¥ CPSR æˆ– SPSR å¯„å­˜å™¨ARM æœ‰ ä¸¤æ¡ å¼‚å¸¸ä¸­æ–­äº§ç”ŸæŒ‡ä»¤ï¼Œåˆ†åˆ«ä¸º è½¯ä¸­æ–­æŒ‡ä»¤ SWI å’Œ æ–­ç‚¹ä¸­æ–­æŒ‡ä»¤ BKPTã€‚ ARM æŒ‡ä»¤çš„å¯»å€æ–¹å¼ç«‹å³æ•°å¯»å€ Immediate Addressingç«‹å³æ•°å¯»å€ä¹Ÿå«ç«‹å³å¯»å€ï¼Œæ“ä½œæ•°æœ¬èº«å°±åœ¨æŒ‡ä»¤ä¸­ç»™å‡ºï¼Œå–å‡ºæŒ‡ä»¤ä¹Ÿå°±å–åˆ°äº†æ“ä½œæ•°ã€‚è¿™ä¸ªæ“ä½œæ•°è¢«ç§°ä¸ºç«‹å³æ•°ï¼Œå¯¹åº”çš„å¯»å€æ–¹å¼ä¹Ÿå°±å«åšç«‹å³æ•°å¯»å€ã€‚ ç«‹å³æ•°è¦æ±‚ä»¥â€œï¼ƒâ€ä¸ºå‰ç¼€ï¼Œå¯¹äºä»¥åå…­è¿›åˆ¶è¡¨ç¤ºçš„ç«‹å³æ•°ï¼Œè¿˜è¦æ±‚åœ¨â€œï¼ƒâ€ååŠ ä¸Šâ€œ0xâ€æˆ–â€œ&amp;â€;å¯¹äºä»¥äºŒè¿›åˆ¶è¡¨ç¤ºçš„ç«‹å³æ•°ï¼Œè¦æ±‚åœ¨â€œ#â€ååŠ ä¸Šâ€œ0bâ€;å¯¹äºä»¥åè¿›åˆ¶è¡¨ç¤ºçš„ç«‹å³æ•°ï¼Œè¦æ±‚åœ¨â€œ#â€ååŠ ä¸Šâ€œ0dâ€æˆ–ç¼ºçœã€‚ åœ¨æŒ‡ä»¤æ ¼å¼ä¸­ï¼Œç¬¬äºŒä¸ªæ“ä½œæ•°æœ‰ 12 ä½ï¼š å› æ­¤æœ‰æ•ˆç«‹å³æ•° immediate å¯ä»¥è¡¨ç¤ºæˆï¼š &lt;immediate&gt; = immed_8 å¾ªç¯å³ç§»ï¼ˆ2Ã—rotï¼‰[8,11]è¿™4 bitç§»ä½å› å­ (åè¿›åˆ¶è¡¨ç¤ºèŒƒå›´ 0-15)ä¹˜ 2(å†…å­˜å¯¹é½,ARM å†…å­˜åœ°å€ä¸º 4 çš„å€æ•°)ï¼Œå¾—åˆ°ä¸€ä¸ªèŒƒå›´åœ¨ 0-30ï¼Œæ­¥é•¿ä¸º 2 çš„ç§»ä½å€¼ã€‚å› æ­¤ï¼Œå°† ARM ä¸­çš„ç«‹å³æ•°ç§°ä¸º 8 ä½ä½å›¾ã€‚â€œæœ€å 8 ä½ç§»åŠ¨å¶æ•°ä½â€å¾—åˆ°ç«‹å³æ•° å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯åˆæ³•ç«‹å³æ•°è¿˜æ˜¯éæ³•ç«‹å³æ•°åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦ç¬¦åˆ 8 ä½ä½å›¾çš„åŸåˆ™, é¦–å…ˆçœ‹è¿™ä¸ªæ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­1 çš„ä¸ªæ•°æ˜¯å¦ä¸è¶…è¿‡ 8 ä¸ª. å¦‚æœä¸è¶…è¿‡ 8 ä¸ª, å†çœ‹è¿™ n ä¸ª 1(n&lt;=8)æ˜¯å¦èƒ½åŒæ—¶æ”¾åˆ° 8 ä¸ªäºŒè¿›åˆ¶ä½ä¸­, å¦‚æœå¯ä»¥æ”¾è¿›å», å†çœ‹è¿™å…«ä¸ªäºŒè¿›åˆ¶ä½æ˜¯å¦å¯ä»¥å¾ªç¯å³ç§»å¶æ•°ä½å¾—åˆ°æˆ‘ä»¬æ¬²ä½¿ç”¨çš„æ•°. å¦‚æœå¯ä»¥, åˆ™æ­¤æ•°ç¬¦åˆ 8 ä½ä½å›¾åŸç†, æ˜¯åˆæ³•çš„ç«‹å³æ•°. å¦åˆ™, ä¸ç¬¦åˆ. å¯„å­˜å™¨å¯»å€ Register Addressingå¯„å­˜å™¨å¯»å€å°±æ˜¯åˆ©ç”¨å¯„å­˜å™¨ä¸­çš„æ•°å€¼ä½œä¸ºæ“ä½œæ•°ï¼Œè¿™ç§å¯»å€æ–¹å¼æ˜¯å„ç±»å¾®å¤„ç†å™¨ç»å¸¸é‡‡ç”¨çš„ä¸€ç§æ–¹å¼ï¼Œä¹Ÿæ˜¯ä¸€ç§æ‰§è¡Œæ•ˆç‡è¾ƒé«˜çš„å¯»å€æ–¹å¼ã€‚ å¯„å­˜å™¨ç§»ä½å¯»å€ Register Shift Addressingå½“ç¬¬äºŒæ“ä½œæ•°ä¸ºå¯„å­˜å™¨å‹æ—¶ï¼Œåœ¨æ‰§è¡Œå¯„å­˜å™¨å¯»å€æ“ä½œæ—¶ï¼Œä¹Ÿå¯ä»¥å¯¹ç¬¬äºŒæ“ä½œæ•°å¯„å­˜å™¨è¿›è¡Œç§»ä½ï¼Œæ­¤æ—¶ç¬¬äºŒæ“ä½œæ•°å½¢å¼ä¸ºï¼šADD Rd, Rn, Rmï¼Œ{&lt;shift&gt;} Rm: ç¬¬äºŒæ“ä½œæ•°å¯„å­˜å™¨&lt;shift&gt;:ç”¨æ¥æŒ‡å®šç§»ä½ç±»å‹å’Œç§»ä½ä½æ•°ï¼Œæœ‰ä¸¤ç§å½¢å¼:5 ä½ç«‹å³æ•°,å¯„å­˜å™¨(ç”¨ Rs è¡¨ç¤º)åœ¨æŒ‡ä»¤æ‰§è¡Œæ—¶ï¼Œå°†å¯„å­˜å™¨ç§»ä½åçš„å†…å®¹ï¼Œä½œä¸ºç¬¬äºŒæ“ä½œæ•°å‚ä¸è¿ç®—ã€‚ä¾‹å¦‚æŒ‡ä»¤ï¼š 1234R3â†R2+(R1å³ç§»2ä½):ADD R3ï¼ŒR2ï¼ŒR1ï¼ŒLSR #2;R3â†R2+(R1å³ç§»R0ä½)ADD R3ï¼ŒR2ï¼ŒR1ï¼ŒLSR R0; ç¬¬äºŒæ“ä½œæ•°çš„ç§»ä½æ–¹å¼: ç§»ä½ä½æ•°å¯ä»¥ç”¨ç«‹å³æ•°æ–¹å¼æˆ–è€…å¯„å­˜å™¨æ–¹å¼ç»™å‡ºï¼Œå…¶å€¼å‡å°äº 32ï¼Œåº”ä¸º[0,31] LSL,LSR é€»è¾‘å·¦/å³ç§»: ç©ºå‡ºçš„æœ€ä½/é«˜æœ‰æ•ˆä½ç”¨ 0 å¡«å…… ASL,ASR ç®—æœ¯å·¦/å³ç§»: ç®—æœ¯ç§»ä½çš„å¯¹è±¡ä¸ºå¸¦ç¬¦å·æ•°;æ•… ASL ç©ºå‡ºçš„æœ€ä½æœ‰æ•ˆä½ç”¨ 0 å¡«å……,è€Œ ASR ç§»ä½æ—¶,å¦‚æœä¸ºè´Ÿæ•°,æœ€é«˜æœ‰æ•ˆä½ç”¨ 1 å¡«å……;è‹¥ä¸ºæ­£æ•°,åˆ™ç”¨ 0 å¡«å…… ROR Rotate Right;å¾ªç¯å³ç§» ç§»å‡ºçš„å­—çš„æœ€ä½æœ‰æ•ˆä½ä¾æ¬¡å¡«å…¥ç©ºå‡ºçš„æœ€é«˜æœ‰æ•ˆä½ã€‚ RRX Rotate Right Extended å¸¦æ‰©å±•çš„å¾ªç¯å³ç§»;å°†å¯„å­˜å™¨çš„å†…å®¹å¾ªç¯å³ç§» 1 ä½ï¼Œç©ºä½ç”¨åŸæ¥ C æ ‡å¿—ä½å¡«å…… å¯„å­˜å™¨é—´æ¥å¯»å€ Register Indirect Addressingå¯„å­˜å™¨é—´æ¥å¯»å€å°±æ˜¯ä»¥å¯„å­˜å™¨ä¸­çš„å€¼ä½œä¸ºæ“ä½œæ•°çš„åœ°å€ï¼Œè€Œæ“ä½œæ•°æœ¬èº«å­˜æ”¾åœ¨å­˜å‚¨å™¨ä¸­ã€‚LDR R0ï¼Œ[R4];AR0â†[R4] åŸºå€å˜å€å¯»å€ Base-index Addressingå˜å€å¯»å€,ä¹Ÿå«åŸºå€å˜å€å¯»å€,æ˜¯æŒ‡å°†åŸºå€å¯„å­˜å™¨çš„å†…å®¹ä¸æŒ‡ä»¤ä¸­ç»™å‡ºçš„åœ°å€åç§»é‡ç›¸åŠ ï¼Œå¾—åˆ°æ“ä½œæ•°æ‰€åœ¨çš„å­˜å‚¨å™¨çš„æœ‰æ•ˆåœ°å€å˜å€å¯»å€æ–¹å¼å¸¸ç”¨äºè®¿é—®æŸåŸºåœ°å€é™„è¿‘çš„åœ°å€å•å…ƒ(4K èŒƒå›´çš„åç§»)LDR R0ï¼Œ[R1ï¼Œï¼ƒ4]; R0â†mem32[R1ï¼‹4] åç§»åœ°å€æ–¹å¼ æœ‰ä¸‰ç§åŠ åå€çš„æ–¹å¼ï¼šå‰å˜å€ã€è‡ªåŠ¨å˜å€å’Œåå˜å€å¯»å€æ–¹å¼ å‰å˜å€æ¨¡å¼(ä¸ä¿®æ”¹åŸºå€å¯„å­˜å™¨):å…ˆåŸºå€+åå€ï¼Œç”Ÿæˆæ“ä½œæ•°åœ°å€ï¼Œå†åšæŒ‡ä»¤æŒ‡å®šçš„æ“ä½œã€‚ä¹Ÿå«å‰ç´¢å¼•åç§»ã€‚ä¾‹å¦‚ STR r0,[r1,#12](å°† r0 çš„å†…å®¹å­˜å…¥ r1+12 çš„åœ°å€å•å…ƒä¸­)è‡ªåŠ¨å˜å€æ¨¡å¼(ä¿®æ”¹åŸºå€å¯„å­˜å™¨)ï¼š å…ˆåŸºå€+åç§»ï¼Œç”Ÿæˆæ“ä½œæ•°åœ°å€ï¼ŒåšæŒ‡ä»¤æŒ‡å®šçš„æ“ä½œã€‚ç„¶åè‡ªåŠ¨ä¿®æ”¹åŸºå€å¯„å­˜å™¨ã€‚ä¾‹å¦‚ LDR R0ï¼Œ[R1ï¼Œï¼ƒ4]!;(ä» R1 æŒ‡å‘çš„åœ°å€åŠ ä¸Š 4 çš„ä½ç½®åŠ è½½æ•°æ®åˆ° R0ï¼Œå¹¶å°†è®¡ç®—å¾—å‡ºçš„åœ°å€å†™å›åˆ° R1 ä¸­â€ã€‚)åå˜å€æ¨¡å¼(ä¿®æ”¹åŸºå€å¯„å­˜å™¨)ï¼š åŸºå€å¯„å­˜å™¨ä¸åŠ åç§»ä½œä¸ºæ“ä½œæ•°åœ°å€ã€‚å®ŒæˆæŒ‡ä»¤æ“ä½œåï¼Œç”¨(åŸºå€+åç§»)çš„å€¼ä¿®æ”¹åŸºå€å¯„å­˜å™¨ã€‚ä¾‹å¦‚ STR r0,[r1],#12å°† r0 ä¸­çš„å€¼å­˜å‚¨åˆ° r1 æŒ‡å‘çš„åœ°å€ï¼Œç„¶åå°† r1 çš„å€¼åŠ ä¸Š 12 å¹¶æŠŠç»“æœå†™å› r1â€ã€‚ åç§»åœ°å€å½¢å¼:å¯ä»¥æ˜¯ä¸€ä¸ªç«‹å³æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯å¦ä¸€ä¸ªå¯„å­˜å™¨ï¼Œå¹¶ä¸”è¿˜å¯ä»¥æ˜¯å¯„å­˜å™¨ç§»ä½æ“ä½œ;å¸¸ç”¨çš„æ˜¯ç«‹å³æ•°åç§»çš„å½¢å¼ 1234LDR R2ï¼Œ[R3ï¼Œ#0X0C]; R2&lt;-mem32[R3ï¼‹0X0C]STR R1ï¼Œ[R0ï¼Œ#-0x4]!; R1-&gt;mem32[R0-0x4],R0&lt;-R0-0x4LDR r0ï¼Œ[r1ï¼Œr2]; r0&lt;-mem32[r1+r2]LDR r0ï¼Œ[r1ï¼Œr2ï¼ŒLSL #2]; r0&lt;-mem32[r1+r2*4](r2é€»è¾‘å·¦ç§»4ä½) å¤šå¯„å­˜å™¨å¯»å€ Multiple Register Addressingé‡‡ç”¨å¤šå¯„å­˜å™¨å¯»å€æ–¹å¼ï¼Œä¸€æ¡æŒ‡ä»¤å¯ä»¥å®Œæˆå¤šä¸ªå¯„å­˜å™¨å€¼çš„ä¼ é€ã€‚è¿™ç§å¯»å€æ–¹å¼æ˜¯å¤šå¯„å­˜å™¨ä¼ é€æŒ‡ä»¤ LDM/STM çš„å¯»å€æ–¹å¼ï¼Œè¿™ç§å¯»å€æ–¹å¼ä¸­ç”¨ä¸€æ¡æŒ‡ä»¤æœ€å¤šå¯ä¼ é€ 16 ä¸ªé€šç”¨å¯„å­˜å™¨çš„å€¼ã€‚è¿ç»­çš„å¯„å­˜å™¨é—´ç”¨ -è¿æ¥ï¼Œå¦åˆ™ç”¨ ,åˆ†éš” 12LDMIA R0ï¼ï¼Œ{R1-R4};R1â†[R0]ã€R2â†[R0ï¼‹4]ã€R3â†[R0ï¼‹8]ã€R4â†[R0ï¼‹12] LDMIA â€œLoad Multiple Increment Afterâ€ä» R0 æŒ‡å‘çš„åœ°å€å¼€å§‹ï¼Œè¿ç»­åŠ è½½å¯„å­˜å™¨ R1, R2, R3, R4 çš„å€¼ï¼Œå¹¶å°†æœ€åçš„åœ°å€å†™å›åˆ° R0 ä¸­â€ 1234564ç§å¯»å€æ“ä½œLDMIA/STMIA Increment After(å…ˆä¼ é€ï¼Œååœ°å€åŠ 4)LDMIB/STMIB Increment Before(å…ˆåœ°å€åŠ 4 ,åä¼ é€)LDMDA/STMDA Decrement After(å…ˆä¼ é€ï¼Œååœ°å€å‡4)LDMDB/STMDB Decrement Before (å…ˆåœ°å€å‡4,åä¼ é€)âš ï¸æ³¨æ„:å¯¹äºæ‰€æœ‰LDM/STMæŒ‡ä»¤è€Œè¨€ï¼Œå¯„å­˜å™¨åºå·ä½çš„ï¼Œåœ¨ä½åœ°å€å•å…ƒï¼Œåºå·å¤§çš„åœ¨é«˜åœ°å€å•å…ƒï¼ä¸ä¹¦å†™é¡ºåºæ— å…³ï¼ å †æ ˆå¯»å€ Stack Addressingå †æ ˆæ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼ŒæŒ‰åè¿›å…ˆå‡ºï¼ˆLast In First Outï¼Œ LIFOï¼‰çš„æ–¹å¼å·¥ä½œï¼Œä½¿ç”¨ä¸€ä¸ªç§°ä½œå †æ ˆæŒ‡é’ˆçš„ä¸“ç”¨å¯„å­˜å™¨æŒ‡ç¤ºå½“å‰çš„æ“ä½œä½ç½®ï¼Œå †æ ˆæŒ‡é’ˆæ€»æ˜¯æŒ‡å‘æ ˆé¡¶ã€‚ å †æ ˆå¯åˆ†ä¸ºä¸¤ç§å¢é•¿æ–¹å¼ï¼š å‘ä¸Šç”Ÿé•¿ï¼šå‘é«˜åœ°å€æ–¹å‘ç”Ÿé•¿ï¼Œç§°ä¸ºé€’å¢å †æ ˆã€‚ å‘ä¸‹ç”Ÿé•¿ï¼šå‘ä½åœ°å€æ–¹å‘ç”Ÿé•¿ï¼Œç§°ä¸ºé€’å‡å †æ ˆã€‚ æ ¹æ®å †æ ˆæŒ‡é’ˆæŒ‡å‘çš„æ•°æ®ä½ç½®çš„ä¸åŒï¼Œå¯åˆ†ä¸ºï¼š æ»¡å †æ ˆï¼šå †æ ˆæŒ‡é’ˆæŒ‡å‘æœ€åå‹å…¥å †æ ˆçš„æœ‰æ•ˆæ•°æ®é¡¹ï¼Œç§°ä¸ºæ»¡å †æ ˆ; ç©ºå †æ ˆï¼šå †æ ˆæŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªå¾…å‹å…¥æ•°æ®çš„ç©ºä½ç½®ï¼Œç§°ä¸ºç©ºå †æ ˆã€‚ å››ç§ç±»å‹çš„å †æ ˆå·¥ä½œæ–¹å¼ æ»¡é€’å¢å †æ ˆ FA(Full Ascending)ï¼šå †æ ˆæŒ‡é’ˆæŒ‡å‘æœ€åå‹å…¥çš„æ•°æ®ï¼Œä¸”ç”±ä½åœ°å€å‘é«˜åœ°å€ç”Ÿé•¿ã€‚ ç©ºé€’å¢å †æ ˆ EA(Empty Ascending)ï¼šå †æ ˆæŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªå°†è¦æ”¾å…¥æ•°æ®çš„ç©ºä½ç½®ï¼Œä¸”ç”±ä½åœ°å€å‘é«˜åœ°å€ç”Ÿé•¿ã€‚ æ»¡é€’å‡å †æ ˆ FD(Full Descending) ï¼šå †æ ˆæŒ‡é’ˆæŒ‡å‘æœ€åå‹å…¥çš„æ•°æ®ï¼Œä¸”ç”±é«˜åœ°å€å‘ä½åœ°å€ç”Ÿé•¿ã€‚ ç©ºé€’å‡å †æ ˆ ED(Empty Descending)ï¼šå †æ ˆæŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªå°†è¦æ”¾å…¥æ•°æ®çš„ç©ºä½ç½®ï¼Œä¸”ç”±é«˜åœ°å€å‘ä½åœ°å€ç”Ÿé•¿ã€‚ STMXX æ˜¯å­˜å…¥åˆ°ä¸»å­˜ï¼Œæ˜¯å…¥æ ˆæ“ä½œ;LDMXX æ˜¯ä»ä¸»å­˜è¯»å‡ºåˆ°å¯„å­˜å™¨ï¼Œæ˜¯å‡ºæ ˆæ“ä½œ 12STMFD SP!,{R1-R7,LR};å°†R1-R7ï¼ŒLRå…¥æ ˆLDMFD SP!,{R1-R7,LR};æ•°æ®å‡ºæ ˆï¼Œæ”¾å…¥R1-R7,LR ç›¸å¯¹å¯»å€ Relative Addressingä¸åŸºå€å˜å€å¯»å€æ–¹å¼ç›¸ç±»ä¼¼ï¼Œç›¸å¯¹å¯»å€ä»¥ç¨‹åºè®¡æ•°å™¨ PC çš„å½“å‰å€¼ä¸ºåŸºåœ°å€ï¼ŒæŒ‡ä»¤ä¸­çš„åœ°å€æ ‡å·ä½œä¸ºåç§»é‡ï¼Œå°†ä¸¤è€…ç›¸åŠ ä¹‹åå¾—åˆ°æ“ä½œæ•°çš„æœ‰æ•ˆåœ°å€","link":"/UESTC/ARM-Processor/Ch3-1ARM%E6%8C%87%E4%BB%A4%E6%A6%82%E8%BF%B0/"},{"title":"ARMæŒ‡ä»¤åˆ†ç±»","text":"ARM æŒ‡ä»¤é›†åˆ†æ”¯æŒ‡ä»¤åœ¨ ARM ä¸­æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®ç°ç¨‹åºçš„è·³è½¬ï¼šä¸€ç§æ˜¯ä½¿ç”¨åˆ†æ”¯è½¬ç§»æŒ‡ä»¤ç›´æ¥è·³è½¬;å¦ä¸€ç§åˆ™æ˜¯ç›´æ¥å‘ PC å¯„å­˜å™¨èµ‹å€¼æ¥å®ç°è·³è½¬ã€‚ARM çš„åˆ†æ”¯è½¬ç§»æŒ‡ä»¤ï¼Œå¯ä»¥ä»å½“å‰æŒ‡ä»¤å‘å‰æˆ–å‘åçš„ 32MB($2^{23}\\times4=2^{10} \\times 2^{10} \\times 32 $) çš„åœ°å€ç©ºé—´è·³è½¬ï¼Œæ ¹æ®å®Œæˆçš„åŠŸèƒ½å®ƒå¯ä»¥åˆ†ä¸º 4 ç§:Bã€BLã€BXã€BLXã€‚ signed_immed_24 é—´æ¥æä¾›ç›®æ ‡åœ°å€ï¼ŒçœŸæ­£çš„ç›®æ ‡åœ°å€æ˜¯ç”±å¤„ç†å™¨æ ¹æ®è¿™ä¸ªæœ‰ç¬¦å·æ•°å’Œå½“å‰çš„ PC å€¼è®¡ç®—å‡ºæ¥çš„ã€‚å…·ä½“è®¡ç®—ä¸ºï¼šå…ˆå°† signed_immed_24 å·¦ç§»ä¸¤ä½ï¼ˆå³å…·æœ‰ 26 ä½çš„åç§»é‡ï¼‰ï¼Œå¹¶æ‰©å±•ä¸º 32 ä½æœ‰ç¬¦å·æ•°ï¼Œç„¶åå†å°†è¿™ 32 ä½æœ‰ç¬¦å·æ•°ä¸ PC çš„å½“å‰å€¼ç›¸åŠ ï¼Œå¾—åˆ°å®é™…çš„è·³è½¬åœ°å€ã€‚å› æ­¤ B å’Œ BL æŒ‡ä»¤è½¬ç§»çš„åç§»é‡ä¸º 26 ä½ï¼Œå³è½¬ç§»çš„è·¨åº¦ä¸ºå‰å 32MB åœ°å€ç©ºé—´ã€‚ è·³è½¬æŒ‡ä»¤ B åŠå¸¦è¿æ¥çš„è·³è½¬æŒ‡ä»¤ BLBæŒ‡ä»¤ä¸BLæŒ‡ä»¤çš„ç¼–ç æ ¼å¼å¦‚ä¸‹ï¼š ä»ç¼–ç ä¸­çœ‹åˆ° L æ§åˆ¶äº† PC ä¸ LR å¯„å­˜å™¨ä¹‹é—´çš„å¼€å…³ã€‚å½“ L=0 æ—¶ï¼Œè¯¥å¼€å…³æ–­å¼€ï¼ŒæŒ‡ä»¤ä¸º B æŒ‡ä»¤;å½“ L=1 æ—¶ï¼Œè¯¥å¼€å…³æ¥é€šï¼ŒæŒ‡ä»¤ä¸º BL æŒ‡ä»¤ã€‚Signed_immed_24 è¡¨ç¤º 24 ä½æœ‰ç¬¦å·çš„ç«‹å³æ•°ï¼ˆåç§»é‡ï¼‰ B å’Œ BL æŒ‡ä»¤çš„åŠ©è®°ç¬¦æ ¼å¼ä¸ºï¼šB {&lt;cond&gt;} &lt;target&gt;å’ŒBL{&lt;cond&gt;} &lt;target&gt;cond è¡¨ç¤ºæŒ‡ä»¤æ‰§è¡Œæ¡ä»¶target è¡¨ç¤ºè·³è½¬åœ°å€åŠŸèƒ½ï¼šè·³è½¬åˆ°æŒ‡å®šåœ°å€æ‰§è¡Œï¼Œåœ°å€èŒƒå›´é™åˆ¶åœ¨å½“å‰ PC å¯„å­˜å™¨æ‰€æŒ‡å‘çš„æŒ‡ä»¤åœ°å€çš„ Â±32MB èŒƒå›´ è·³è½¬æŒ‡ä»¤ä¹Ÿå«ç¨‹åºè½¬ç§»æŒ‡ä»¤ã€‚å†™æ±‡ç¼–ç¨‹åºæ—¶ï¼Œå¯ä»¥è·³è½¬åˆ°ä¸€ä¸ªç»å¯¹åœ°å€ï¼Œå¦‚:B 0x1234 ï¼ˆæ³¨ï¼š B #0x1234 æ˜¯é”™è¯¯çš„ ï¼‰ç¼–è¯‘å™¨ä¼šæŠŠè¯¥ç»å¯¹åœ°å€è½¬æ¢ä¸ºç›¸å¯¹åœ°å€æ”¾å…¥æŒ‡ä»¤ä¸­ã€‚ 1234567ä¾‹ï¼šç°å·²çŸ¥å¯„å­˜å™¨ R0 ä¸­å­˜æ”¾äº†æ•°æ® a ï¼Œå¯„å­˜å™¨ R1 ä¸­å­˜æ”¾äº†æ•°æ® b ï¼Œç¼–å†™ä¸€ä¸ªç¨‹åºæ®µï¼Œæ±‚å– a å’Œ b çš„æœ€å¤§å…¬çº¦æ•°å¹¶å°†å…¶å­˜å…¥å¯„å­˜å™¨ R0 ã€‚gcb CMP R0,R1 ; æ¯”è¾ƒaå’Œbçš„å¤§å° SUBGT R0,R0,R1; å¦‚æœa&gt;b,åˆ™a=a-b SUBLT R1,R1,R0; å¦‚æœa&lt;b,åˆ™b=b-a BNE gcb ; å¦‚æœa!=b,åˆ™è¿”å›gcb MOV PC,LR ; å¦‚æœa=b,åˆ™è¿”å›ä¸»ç¨‹åº B(Branch)å’Œ BL(Branch with Link) çš„åŒºåˆ«åœ¨äºï¼šBL åœ¨è·³è½¬ä¹‹å‰ä¼šæŠŠ BL æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€ï¼ˆæ–­ç‚¹åœ°å€ï¼‰ä¿å­˜åˆ°è¿æ¥å¯„å­˜å™¨ LRï¼ˆR14ï¼‰ï¼Œå› æ­¤ç¨‹åºåœ¨å¿…è¦çš„æ—¶å€™å¯ä»¥é€šè¿‡å°† LR çš„å†…å®¹åŠ è½½åˆ° PC ä¸­ï¼Œä½¿ç¨‹åºè¿”å›åˆ°è·³è½¬ç‚¹ã€‚BL è¿™ä¹Ÿæ˜¯ä¸€ä¸ªè·³è½¬æŒ‡ä»¤ï¼Œä½†å®ƒåœ¨è·³è½¬ä¹‹å‰ä¼šå°†ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€å­˜å‚¨åˆ°é“¾æ¥å¯„å­˜å™¨ï¼ˆLRï¼‰ä¸­ã€‚è¿™æ˜¯ä¸ºäº†åœ¨å­ç¨‹åºæˆ–å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œèƒ½å¤Ÿè¿”å›åˆ°è°ƒç”¨å®ƒçš„ä»£ç å¤„ç»§ç»­æ‰§è¡Œã€‚æ¢å¥è¯è¯´ï¼ŒBL æŒ‡ä»¤ç”¨äºå‡½æ•°æˆ–å­ç¨‹åºçš„è°ƒç”¨ã€‚ 1234567891011_start: MOV R0, #5 ; å°†5æ”¾å…¥å¯„å­˜å™¨R0 BL multiply ; è°ƒç”¨multiplyå‡½æ•° B end ; è·³è½¬åˆ°endæ ‡ç­¾multiply: LSL R0, R0, #1 ; å°†R0çš„å€¼ä¹˜ä»¥2(é€»è¾‘å·¦ç§») MOV PC, LR ; è¿”å›åˆ°è°ƒç”¨multiplyçš„åœ°æ–¹end: ; è¿™é‡Œæ˜¯ç¨‹åºç»“æŸçš„åœ°æ–¹ å¸¦çŠ¶æ€åˆ‡æ¢çš„è·³è½¬æŒ‡ä»¤ BXBX æŒ‡ä»¤çš„æ ¼å¼ä¸ºBX{&lt;cond&gt;} Rmcond è¡¨ç¤ºæŒ‡ä»¤æ‰§è¡Œæ¡ä»¶Rm å¯„å­˜å™¨ï¼Œå€¼æ˜¯ç»å¯¹åœ°å€å€¼ï¼Œä¸æ˜¯åç§»é‡ï¼Œåœ¨æŒ‡ä»¤æ‰§è¡Œåï¼ŒRm ä¸­çš„åœ°å€å€¼ä¸#0XFFFF FFFE è¿›è¡Œ AND è¿ç®—ï¼Œå†è¢«å¤åˆ¶åˆ°ç¨‹åºè®¡æ•°å™¨ PCã€‚å¸¦çŠ¶æ€åˆ‡æ¢çš„è·³è½¬ã€‚æœ€ä½ä½(Rm[0])ä¸º 1 æ—¶ï¼Œåˆ‡æ¢åˆ° Thumb æŒ‡ä»¤æ‰§è¡Œï¼Œä¸º 0 æ—¶ï¼Œè§£é‡Šä¸º ARM æŒ‡ä»¤æ‰§è¡Œ 123456789101112ä¾‹å¦‚ï¼š CODE32 ;32ä½ç¼–ç ARM1 LDR R0ï¼Œ=Thumb1 ;æŠŠThumbåœ°å€èµ‹ç»™R0ï¼Œæœ«ä½è‡ªåŠ¨ç½®1 MOV LR,PC ;è®¾ç½®è¿”å›åœ°å€ BX R0 ;è·³è½¬ï¼Œåˆ‡æ¢çŠ¶æ€ ADD R1,R2,#2 â€¦ CODE16 ;16ä½ç¼–ç Thumb1 ADD R1ï¼ŒR3,#1 ;Thumbç¨‹åº â€¦ BX LR ;è·³è½¬åˆ°è¿”å›åœ°å€ï¼ŒçŠ¶æ€åˆ‡æ¢ å¸¦è¿æ¥å’ŒçŠ¶æ€åˆ‡æ¢çš„è¿æ¥è·³è½¬æŒ‡ä»¤ BLX BLX æŒ‡ä»¤çš„æ ¼å¼æœ‰ä¸¤ç§ï¼š BLX &lt;target&gt; å’Œ BLX{&lt;cond&gt;} Rmä»¥ target æ–¹å¼æä¾›ç›®æ ‡åœ°å€çš„ BLX æŒ‡ä»¤çš„åŠŸèƒ½æ˜¯ï¼šæŠŠç¨‹åºè·³è½¬åˆ°æŒ‡ä»¤ä¸­æ‰€æŒ‡å®šçš„ç›®æ ‡åœ°å€ç»§ç»­æ‰§è¡Œï¼Œå¹¶åŒæ—¶å°†å¤„ç†å™¨çš„å·¥ä½œçŠ¶æ€ä» ARM çŠ¶æ€åˆ‡æ¢åˆ° Thumb çŠ¶æ€ï¼Œå¹¶å°†ä¸‹ä¸€æ¡çš„åœ°å€ä¿å­˜åˆ°å¯„å­˜å™¨ LR ä¸­ã€‚è€Œä»¥ Rm æ–¹å¼æä¾›ç›®æ ‡åœ°å€çš„ BLX æŒ‡ä»¤ï¼Œé™¤äº†è·³è½¬å’Œä¸‹ä¸€æ¡çš„åœ°å€ä¿å­˜åˆ° LR ä¹‹å¤–ï¼Œä¹Ÿå¯è¿›è¡ŒçŠ¶æ€åˆ‡æ¢ï¼Œä½†å…¶åˆ‡æ¢çš„ä¾æ®æ˜¯ Rm æœ€ä½ä½çš„å€¼ã€‚å¦‚æœå€¼ä¸º 0 ï¼Œåˆ™ç›®æ ‡åœ°å€å¤„åº”ä¸º ARM æŒ‡ä»¤ï¼Œå¦‚æœå€¼ä¸º 1 ï¼Œåˆ™ç›®æ ‡åœ°å€å¤„åº”ä¸º Thumb æŒ‡ä»¤ ä¿®æ”¹ PCå¦ä¸€ç§å®ç°æŒ‡ä»¤è·³è½¬çš„æ–¹å¼æ˜¯é€šè¿‡ç›´æ¥å‘ PC å¯„å­˜å™¨ä¸­å†™å…¥ç›®æ ‡åœ°å€å€¼ï¼Œå®ç°åœ¨ 4GB åœ°å€ç©ºé—´ä¸­ä»»æ„è·³è½¬ï¼Œè¿™ç§è·³è½¬åˆç§°ä¸ºé•¿è·³è½¬ã€‚å¦‚æœåœ¨é•¿è·³è½¬æŒ‡ä»¤ä¹‹å‰ä½¿ç”¨â€œMOV LRï¼ŒPCâ€ ç­‰æŒ‡ä»¤ï¼Œå¯ä»¥ä¿å­˜å°†æ¥è¿”å›çš„åœ°å€å€¼ï¼Œä¹Ÿå°±å®ç°äº†åœ¨ 4GB çš„åœ°å€ç©ºé—´ä¸­çš„å­ç¨‹åºè°ƒç”¨ã€‚ æ•°æ®å¤„ç†æŒ‡ä»¤æ•°æ®å¤„ç†æŒ‡ä»¤æ¦‚è¿°1. ARM æ•°æ®å¤„ç†æŒ‡ä»¤çš„åŠŸèƒ½ä¸»è¦å®Œæˆå¯„å­˜å™¨ä¸­æ•°æ®çš„ç®—æœ¯å’Œé€»è¾‘è¿ç®—æ“ä½œã€‚2. ARM æ•°æ®å¤„ç†æŒ‡ä»¤çš„ç‰¹ç‚¹æ“ä½œæ•°æ¥æº:æ‰€æœ‰çš„æ“ä½œæ•°è¦ä¹ˆæ¥è‡ªå¯„å­˜å™¨ï¼Œè¦ä¹ˆæ¥è‡ªç«‹å³æ•°ï¼Œä¸ä¼šæ¥è‡ªå­˜å‚¨å™¨ã€‚æ“ä½œç»“æœ:å¦‚æœæœ‰ç»“æœï¼Œåˆ™ç»“æœä¸€å®šæ˜¯ä¸º 32 ä½å®½ã€æˆ– 64 ä½å®½ï¼ˆé•¿ä¹˜æ³•æŒ‡ä»¤ï¼‰ï¼Œå¹¶ä¸”æ”¾åœ¨ä¸€ä¸ªæˆ–ä¸¤ä¸ªå¯„å­˜å™¨ä¸­ï¼Œä¸ä¼šå†™å…¥å­˜å‚¨å™¨ã€‚æœ‰ç¬¬äºŒä¸ªæ“ä½œæ•° Operand2 :åˆ‡è®°å…¶ä¸‰ç§å½¢å¼ï¼šç«‹å³æ•°ã€å¯„å­˜å™¨ã€å¯„å­˜å™¨ç§»ä½ã€‚ç‰¹åˆ«åœ°,ä¹˜æ³•æŒ‡ä»¤çš„æ“ä½œæ•°:å…¨éƒ¨æ˜¯å¯„å­˜å™¨ã€‚ 3. ARM æ•°æ®å¤„ç†æŒ‡ä»¤åˆ†ç±»ç®—æœ¯è¿ç®—æŒ‡ä»¤ï¼šADD ADC SUB SBC RSB RSC MUL MLA UMULL UMLAL SMULL SMLALé€»è¾‘è¿ç®—æŒ‡ä»¤ï¼š AND ORR EOR BICæ•°æ®ä¼ é€æŒ‡ä»¤ï¼š MOV MVNæ¯”è¾ƒæŒ‡ä»¤ï¼š CMP CMNæµ‹è¯•æŒ‡ä»¤ï¼š TST TEQä¸Šè¿°æŒ‡ä»¤åªèƒ½å¯¹å¯„å­˜å™¨æ“ä½œï¼Œä¸èƒ½é’ˆå¯¹å­˜å‚¨å™¨ã€‚ 4. æ•°æ®å¤„ç†æŒ‡ä»¤å¯¹ç¨‹åºçŠ¶æ€å¯„å­˜å™¨ CPSR çš„å½±å“æŒ‡ä»¤ä¸­å¯ä»¥æ·»åŠ  S åç¼€ï¼Œä»¥å½±å“ CPSR çŠ¶æ€æ ‡å¿—ã€‚ä½†æ˜¯æ¯”è¾ƒæŒ‡ä»¤ï¼ˆCMP å’Œ CMNï¼‰å’Œæµ‹è¯•æŒ‡ä»¤(TST å’Œ TEQ)ä¸éœ€è¦åç¼€ Sï¼Œå®ƒä»¬æ€»ä¼šç›´æ¥å½±å“ CPSR ä¸­çš„çŠ¶æ€æ ‡å¿—ã€‚ å…³äºæ¢å¤ CPSR åŸå€¼é—®é¢˜ï¼š å¦‚æœæŒ‡ä»¤å¸¦æœ‰ S åç¼€ï¼ˆé™¤äº†æ¯”è¾ƒæŒ‡ä»¤ä»¥å¤–ï¼‰ï¼ŒåŒæ—¶åˆä»¥ PC ä¸ºç›®æ ‡å¯„å­˜å™¨è¿›è¡Œæ“ä½œ:1. åœ¨å¼‚å¸¸æ¨¡å¼ä¸‹ï¼šåˆ™æ“ä½œçš„åŒæ—¶ä» SPSR(Saved Program Status Register) æ¢å¤ CPSR(Current Program Status Register) 1234movs pc, #0xff /* cpsr = spsr; pc = 0xff */adds pc, r1, #0xff00 /* cpsr = spsr; pc = r1 + 0xff00 */ands pc, r1, r2 /* cpsr = spsr; pc = r1 &amp; r2; */ 2. åœ¨ user æˆ–è€… system æ¨¡å¼ï¼šä¼šäº§ç”Ÿä¸å¯é¢„æ–™çš„ç»“æœï¼Œå› ä¸ºåœ¨è¿™ä¸¤ç§æ¨¡å¼ä¸‹æ²¡æœ‰ SPSR æ•°æ®å¤„ç†æŒ‡ä»¤æ ¼å¼ I ç”¨äºåŒºåˆ«ç«‹å³æ•°(I=1)æˆ–å¯„å­˜å™¨ç§»ä½(I=0)opcode ä¸ºæ•°æ®å¤„ç†æŒ‡ä»¤æ“ä½œç operand2 ä¸ºç¬¬äºŒä¸ªæ“ä½œæ•°ï¼Œè‹¥æŒ‡ä»¤ä¸éœ€è¦å…¨éƒ¨çš„å¯ç”¨æ“ä½œæ•°æ—¶(å¦‚ MOV æŒ‡ä»¤çš„ Rn)ï¼Œä¸ç”¨çš„å¯„å­˜å™¨åŸŸåº”è®¾ç½®ä¸º 0(ç”±ç¼–è¯‘å™¨è‡ªåŠ¨å®Œæˆ)ã€‚å¯¹äºæ¯”è¾ƒæŒ‡ä»¤,b20 ä½å›ºå®šä¸º 1ã€‚ Data Processing InstructionsåŠ å‡ä¹˜ADDâ€”â€”åŠ æ³•è¿ç®—æŒ‡ä»¤ADD{cond}{S} Rdï¼ŒRnï¼Œoperand2; Rd&lt;-Rn+operand2 å—å½±å“çš„ CPSR æ ‡å¿—ä½ å–å€¼ N å¯„å­˜å™¨ Rd[31]è¢«å¤åˆ¶åˆ° N Z å¦‚æœ Rd ä¸º 0ï¼Œåˆ™ Z=1ï¼Œå¦åˆ™ Z=0 C è¿ç®—ç»“æœæœ‰è¿›ä½ C=1ï¼Œå¦åˆ™ C=0 V è¿ç®—ç»“æœæœ‰æº¢å‡º V=1ï¼Œå¦åˆ™ V=0 123ADD R0ï¼ŒR1ï¼ŒR2 ;R0â†ï¼ˆR1ï¼‰+ï¼ˆR2ï¼‰ADD R0ï¼ŒR1ï¼Œ#255 ;R0 â†ï¼ˆR1ï¼‰+ 255ADD R0ï¼ŒR2ï¼ŒR3ï¼ŒLSL#1 ;R0 â†ï¼ˆR2ï¼‰ +ï¼ˆR3&lt;&lt;1ï¼‰ ADCâ€”â€”å¸¦è¿›ä½åŠ æ³•æŒ‡ä»¤æŒ‡ä»¤æ ¼å¼ï¼šADC{cond}{S} Rdï¼ŒRnï¼Œoperand2ADC æŒ‡ä»¤å°† operand2 çš„æ•°æ®ä¸ Rn çš„å€¼ç›¸åŠ ï¼Œå†åŠ ä¸Š CPSR ä¸­çš„ C æ¡ä»¶æ ‡å¿—ä½ï¼Œç»“æœä¿å­˜åˆ° Rd å¯„å­˜å™¨ã€‚ADC é€šå¸¸ç”¨æ¥å®ç°å­—é•¿å¤§äº 32 ä½çš„åŠ æ³•è¿ç®—ã€‚ SUBâ€”â€”å‡æ³•è¿ç®—æŒ‡ä»¤æŒ‡ä»¤æ ¼å¼ï¼šSUB{cond}{S} Rdï¼ŒRnï¼Œoperand2SUB æŒ‡ä»¤ç”¨å¯„å­˜å™¨ Rn å‡å» operand2ï¼Œç»“æœä¿å­˜åˆ° Rd ä¸­ 123SUB R0ï¼ŒR1ï¼ŒR2 ;R0â†ï¼ˆR1ï¼‰-ï¼ˆR2ï¼‰SUB R0ï¼ŒR1ï¼Œ#256;R0â†ï¼ˆR1ï¼‰- 256SUB R0ï¼ŒR2ï¼ŒR3ï¼ŒLSL#1;R0â†ï¼ˆR2ï¼‰-ï¼ˆR3&lt;&lt;1ï¼‰ å—å½±å“çš„ CPSR æ ‡å¿—ä½ å–å€¼ N å¯„å­˜å™¨ Rd[31]è¢«å¤åˆ¶åˆ° N Z å¦‚æœ Rd ä¸º 0ï¼Œåˆ™ Z=1ï¼Œå¦åˆ™ Z=0 C è¿ç®—ç»“æœæœ‰å€Ÿä½ C=0ï¼Œå¦åˆ™ C=1 V è¿ç®—ç»“æœæœ‰æº¢å‡º V=1ï¼Œå¦åˆ™ V=0 SBCâ€”â€”å¸¦è¿›ä½å‡æ³•æŒ‡ä»¤æŒ‡ä»¤æ ¼å¼ï¼šSBC{cond}{S} Rdï¼ŒRnï¼Œoperand2SBC æŒ‡ä»¤ç”¨å¯„å­˜å™¨ Rn å‡å» operand2ï¼Œå†å‡å» CPSR ä¸­çš„ C æ¡ä»¶æ ‡å¿—ä½çš„åç ï¼Œç»“æœä¿å­˜åˆ° Rd ä¸­ã€‚æ ‡å¿—ä½çš„ä¿®æ”¹åŒ SUBã€‚è¯¥æŒ‡ä»¤ä¸»è¦ç”¨äºå­—é•¿å¤§äº 32 ä½çš„æ•°æ®çš„å‡æ³•è¿ç®—ã€‚ RSCâ€”â€”å¸¦è¿›ä½åå‘å‡æ³•æŒ‡ä»¤æŒ‡ä»¤æ ¼å¼ï¼šRSC{cond}{S} Rdï¼ŒRnï¼Œoperand2RSC æŒ‡ä»¤ç”¨å¯„å­˜å™¨ operand2 å‡å» Rnï¼Œå†å‡å» CPSR ä¸­çš„ C æ¡ä»¶æ ‡å¿—ä½çš„åç ï¼Œç»“æœä¿å­˜åˆ° Rd ä¸­ã€‚ ä¹˜æ³•æŒ‡ä»¤æ ¼å¼å…¶ä¸­ï¼Œopcode ä¸ºä¹˜æ³•æŒ‡ä»¤æ“ä½œç ã€‚S ä¸ºè®¾ç½®æ¡ä»¶ç ã€‚Rm ä¸ºè¢«ä¹˜æ•°å¯„å­˜å™¨ï¼ŒRs ä¸ºä¹˜æ•°çš„å¯„å­˜å™¨ã€‚Rn/RdLo ç”¨äº MLA æŒ‡ä»¤ç›¸åŠ çš„å¯„å­˜å™¨æˆ– 64 ä½ä¹˜æ³•æŒ‡ä»¤çš„ç›®æ ‡å¯„å­˜å™¨(ä½ 32 ä½)ã€‚Rd/RdHi ç”¨äºç›®æ ‡å¯„å­˜å™¨æˆ– 64 ä½ä¹˜æ³•æŒ‡ä»¤çš„ç›®æ ‡å¯„å­˜å™¨(é«˜ 32 ä½)ã€‚è‹¥æŒ‡ä»¤ä¸éœ€è¦å…¨éƒ¨çš„å¯ç”¨æ“ä½œæ•°æ—¶(å¦‚ MUL æŒ‡ä»¤çš„ Rn)ï¼Œä¸ç”¨çš„å¯„å­˜å™¨åŸŸåº”è®¾ç½®ä¸º 0(ç”±ç¼–è¯‘å™¨è‡ªåŠ¨å®Œæˆ) MULâ€”â€”32 ä½ä¹˜æ³•æŒ‡ä»¤æŒ‡ä»¤æ ¼å¼ï¼šMUL{cond}{S} Rdï¼ŒRmï¼ŒRsMUL æŒ‡ä»¤å°† Rm å’Œ Rs ä¸­çš„å€¼ç›¸ä¹˜ï¼Œç»“æœçš„ä½ 32 ä½ä¿å­˜åˆ° Rd ä¸­ å—å½±å“çš„ CPSR æ ‡å¿—ä½ å–å€¼ N å¯„å­˜å™¨ Rd[31]è¢«å¤åˆ¶åˆ° N Z å¦‚æœ Rd ä¸º 0 åˆ™ Z=1ï¼Œå¦åˆ™ Z=0 123MUL R1ï¼ŒR2ï¼ŒR3 ;R1=R2Ã—R3MULS R0ï¼ŒR3ï¼ŒR7 ;R0=R3Ã—R7ï¼Œ ;è®¾ç½®CPSRçš„Nä½å’ŒZä½ MLAâ€”â€”32 ä½ä¹˜åŠ æŒ‡ä»¤æ ¼å¼ MLA{cond}{S} Rdï¼ŒRmï¼ŒRsï¼ŒRnæŒ‡ä»¤å°† Rm å’Œ Rs ä¸­çš„å€¼ç›¸ä¹˜ï¼Œå†å°†ä¹˜ç§¯åŠ ä¸Šç¬¬ 3 ä¸ªæ“ä½œæ•°ï¼Œç»“æœçš„ä½ 32 ä½ä¿å­˜åˆ° Rd ä¸­ã€‚æ³¨ï¼š Rd â‰  Rmæ ‡å¿—ä½çš„ä¿®æ”¹åŒ MULã€‚ 123MLA R0,R1,R2,R3 ;R0â†(R1)X(R2)+(R3)MLAS R0,R1,R2,R3 ; R0â†(R1)X(R2)+(R3), ;å¹¶æ›´æ–°CPSRæ ‡å¿—ä½ UMULLâ€”64 ä½æ— ç¬¦å·ä¹˜æ³•æŒ‡ä»¤æŒ‡ä»¤æ ¼å¼ï¼šUMULL{cond}{S} RdLoï¼ŒRdHiï¼ŒRmï¼ŒRs;RdHi, RdLoâ† Rm*RsUMULL æŒ‡ä»¤å°† Rm å’Œ Rs ä¸­çš„å€¼ä½œæ— ç¬¦å·æ•°ç›¸ä¹˜ï¼Œç»“æœçš„ä½ 32 ä½ä¿å­˜åˆ° RdLo ä¸­ï¼Œé«˜ 32 ä½ä¿å­˜åˆ° RdHi ä¸­ä¾‹ï¼šUMULL R0ï¼ŒR1ï¼ŒR5ï¼ŒR8;(R1,R0)â†R5Ã—R8 å—å½±å“çš„ CPSR æ ‡å¿—ä½ å–å€¼ N å¯„å­˜å™¨ RdHi[31]è¢«å¤åˆ¶åˆ° N Z å¦‚æœ RdHi ä¸” Rdlo ä¸º 0ï¼Œåˆ™ Z=1ï¼Œå¦åˆ™ Z=0 UMLALâ€”64 ä½æ— ç¬¦å·ä¹˜åŠ æŒ‡ä»¤æŒ‡ä»¤æ ¼å¼ï¼šUMLAL{cond}{S} RdLoï¼ŒRdHiï¼ŒRmï¼ŒRs;RdHi, RdLoâ† Rm*Rs+ RdHi, RdLoUMLAL æŒ‡ä»¤å°† Rm å’Œ Rs ä¸­çš„å€¼ä½œæ— ç¬¦å·æ•°ç›¸ä¹˜ï¼Œ64 ä½ä¹˜ç§¯ä¸ RdHiã€RdLo ç›¸åŠ ï¼Œç»“æœçš„ä½ 32 ä½ä¿å­˜åˆ° RdLo ä¸­ï¼Œè€Œé«˜ 32 ä½ä¿å­˜åˆ° RdHi ä¸­ã€‚æ ‡å¿—çš„ä¿®æ”¹åŒ UMULLã€‚æŒ‡ä»¤ä¸¾ä¾‹å¦‚ä¸‹ï¼šUMLAL R0ï¼ŒR1ï¼ŒR5ï¼ŒR8;(R1,R0)â†R5Ã—R8+(R1,R0) SMULLâ€”64 ä½æœ‰ç¬¦å·ä¹˜æ³•æŒ‡ä»¤æŒ‡ä»¤æ ¼å¼ï¼šSMULL{cond}{S} RdLoï¼ŒRdHiï¼ŒRmï¼ŒRs; RdHi, RdLoâ† Rm*RsSMULL æŒ‡ä»¤å°† Rm å’Œ Rs ä¸­çš„å€¼ä½œæœ‰ç¬¦å·æ•°ç›¸ä¹˜ï¼Œç»“æœçš„ä½ 32 ä½ä¿å­˜åˆ° RdLo ä¸­ï¼Œè€Œé«˜ 32 ä½ä¿å­˜åˆ° RdHi ä¸­ã€‚ä¾‹å¦‚ï¼šSMULL R2ï¼ŒR3ï¼ŒR7ï¼ŒR6;(R3,R2)â†R7Ã—R6 å—å½±å“çš„ CPSR æ ‡å¿—ä½ å–å€¼ N å¯„å­˜å™¨ RdHi[31]è¢«å¤åˆ¶åˆ° N Z å¦‚æœ RdHi ä¸” Rdlo ä¸º 0ï¼Œåˆ™ Z=1ï¼Œå¦åˆ™ Z=0 SMLALâ€”64 ä½æœ‰ç¬¦å·ä¹˜åŠ æŒ‡ä»¤æŒ‡ä»¤æ ¼å¼ï¼šSMLAL{cond}{S} RdLoï¼ŒRdHiï¼ŒRmï¼ŒRs; RdHi, RdLoâ† Rm*Rs+ RdHi, RdLoSMLAL æŒ‡ä»¤å°† Rm å’Œ Rs ä¸­çš„å€¼ä½œæœ‰ç¬¦å·æ•°ç›¸ä¹˜ï¼Œ64 ä½ä¹˜ç§¯ä¸ RdHiã€RdLo ç›¸åŠ ï¼Œç»“æœçš„ä½ 32 ä½ä¿å­˜åˆ° RdLo ä¸­ï¼Œé«˜ 32 ä½ä¿å­˜åˆ° RdHi ä¸­ã€‚æ ‡å¿—çš„ä¿®æ”¹åŒ SMULLã€‚ ä¹˜æ³•æŒ‡ä»¤çš„ç‰¹ç‚¹ ç»“æœå¯„å­˜å™¨ä¸èƒ½ä¸ç¬¬ä¸€æºå¯„å­˜å™¨ç›¸åŒã€‚ ä¸æ”¯æŒç¬¬ 2 æ“ä½œæ•°ä¸ºç«‹å³æ•°ã€‚ Rdã€RdHiã€RdLo ä¸èƒ½ä¸ Rm ä¸ºåŒä¸€å¯„å­˜å™¨ã€‚ RdHi å’Œ RdLo ä¸èƒ½ä¸ºåŒä¸€å¯„å­˜å™¨ã€‚ é¿å…å°† R15 å®šä¹‰ä¸ºä»»ä¸€æ“ä½œæ•°æˆ–ç»“æœå¯„å­˜å™¨ã€‚ æ—©æœŸçš„ ARM å¤„ç†å™¨ä»…æ”¯æŒ 32 ä½ä¹˜æ³•æŒ‡ä»¤ã€‚ARM7 ç‰ˆæœ¬å’Œåç»­çš„åœ¨åå­—ä¸­æœ‰ M çš„å¤„ç†å™¨æ‰æ”¯æŒ 64 ä½ä¹˜æ³•æŒ‡ä»¤ã€‚ å¯¹æ ‡å¿—ä½çš„å½±å“ å¯¹ N æ ‡å¿—ä½ï¼šè‹¥ç»“æœæ˜¯ 32 ä½æŒ‡ä»¤å½¢å¼ï¼ŒRd çš„ç¬¬ 31 ä½æ˜¯æ ‡å¿—ä½ N;å¯¹äºäº§ç”Ÿé•¿ç»“æœçš„æŒ‡ä»¤å½¢å¼ï¼ŒRdHi çš„ç¬¬ 31 ä½æ˜¯æ ‡å¿—ä½ã€‚ å¯¹ Z æ ‡å¿—ä½ï¼šå¦‚æœ Rd æˆ– RdHiã€RdLo ä¸º 0ï¼Œåˆ™æ ‡å¿—ä½ Z ç½®ä½ã€‚ å¯¹ V æ ‡å¿—ä½ï¼šä¹˜æ³•æŒ‡ä»¤ä¸å½±å“ V æ ‡å¿—ä½ã€‚ å¯¹ C æ ‡å¿—ä½ï¼š ARM v5 åŠä»¥ä¸Šçš„ç‰ˆæœ¬ä¸å½±å“ C æ ‡å¿—ä½; ARM v5 ä»¥å‰çš„ç‰ˆæœ¬ï¼ŒC æ ‡å¿—ä½æ•°å€¼ä¸ç¡®å®šã€‚ é€»è¾‘è¿ç®—æŒ‡ä»¤ æŒ‰ä½ä¸æŒ‡ä»¤ï¼ˆANDï¼‰æŒ‰ä½ä¸æŒ‡ä»¤ç”¨äºå°†ä¸¤ä¸ªå¯„å­˜å™¨ä¸­çš„å€¼è¿›è¡ŒæŒ‰ä½ä¸è¿ç®—ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨ç›®æ ‡å¯„å­˜å™¨ä¸­ã€‚åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼šAND Rd, Rn, Operand2å…¶ä¸­ï¼ŒRd æ˜¯ç›®æ ‡å¯„å­˜å™¨ï¼ŒRn æ˜¯ç¬¬ä¸€ä¸ªæ“ä½œæ•°æ‰€åœ¨å¯„å­˜å™¨ï¼ŒOperand2 æ˜¯ç¬¬äºŒä¸ªæ“ä½œæ•°ã€‚ç¤ºä¾‹ï¼šAND R0, R1, R2è¿™ä¸ªæŒ‡ä»¤å°† R1 å’Œ R2 ä¸­çš„å€¼è¿›è¡ŒæŒ‰ä½ä¸è¿ç®—ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨ R0 ä¸­ã€‚ æŒ‰ä½æˆ–æŒ‡ä»¤ï¼ˆORRï¼‰æŒ‰ä½æˆ–æŒ‡ä»¤ç”¨äºå°†ä¸¤ä¸ªå¯„å­˜å™¨ä¸­çš„å€¼è¿›è¡ŒæŒ‰ä½æˆ–è¿ç®—ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨ç›®æ ‡å¯„å­˜å™¨ä¸­ã€‚åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼šORR Rd, Rn, Operand2å…¶ä¸­ï¼ŒRd æ˜¯ç›®æ ‡å¯„å­˜å™¨ï¼ŒRn æ˜¯ç¬¬ä¸€ä¸ªæ“ä½œæ•°æ‰€åœ¨å¯„å­˜å™¨ï¼ŒOperand2 æ˜¯ç¬¬äºŒä¸ªæ“ä½œæ•°ã€‚ç¤ºä¾‹ï¼šORR R0, R1, R2è¿™ä¸ªæŒ‡ä»¤å°† R1 å’Œ R2 ä¸­çš„å€¼è¿›è¡ŒæŒ‰ä½æˆ–è¿ç®—ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨ R0 ä¸­ã€‚ æŒ‰ä½å¼‚æˆ–æŒ‡ä»¤ï¼ˆEORï¼‰æŒ‰ä½å¼‚æˆ–æŒ‡ä»¤ç”¨äºå°†ä¸¤ä¸ªå¯„å­˜å™¨ä¸­çš„å€¼è¿›è¡ŒæŒ‰ä½å¼‚æˆ–è¿ç®—ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨ç›®æ ‡å¯„å­˜å™¨ä¸­ã€‚åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼šEOR Rd, Rn, Operand2å…¶ä¸­ï¼ŒRd æ˜¯ç›®æ ‡å¯„å­˜å™¨ï¼ŒRn æ˜¯ç¬¬ä¸€ä¸ªæ“ä½œæ•°æ‰€åœ¨å¯„å­˜å™¨ï¼ŒOperand2 æ˜¯ç¬¬äºŒä¸ªæ“ä½œæ•°ã€‚ç¤ºä¾‹ï¼šEOR R0, R1, R2è¿™ä¸ªæŒ‡ä»¤å°† R1 å’Œ R2 ä¸­çš„å€¼è¿›è¡ŒæŒ‰ä½å¼‚æˆ–è¿ç®—ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨ R0 ä¸­ã€‚ ä½æ¸…æ¥šæŒ‡ä»¤ï¼ˆBICï¼‰æŒ‰ä½éæŒ‡ä»¤ç”¨äºå¯¹ä¸€ä¸ªå¯„å­˜å™¨ä¸­çš„å€¼è¿›è¡ŒæŒ‰ä½å–åï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨ç›®æ ‡å¯„å­˜å™¨ä¸­ã€‚åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼šBIC Rd, Rn, Operand2BIC æŒ‡ä»¤å°†å¯„å­˜å™¨ Rn çš„å€¼ä¸ Operand2 çš„å€¼çš„åç æŒ‰ä½é€»è¾‘ä¸æ“ä½œï¼Œç»“æœä¿å­˜åˆ° Rd ä¸­ã€‚æŒ‡ä»¤ä¸¾ä¾‹å¦‚ä¸‹ï¼šBIC R1ï¼ŒR1ï¼Œ#0x0F; å°†R1çš„ä½4ä½æ¸…0,å…¶å®ƒä½ä¸å˜ 123ä¾‹ï¼šè¯·æŠŠå¯„å­˜å™¨R2ä¸­çš„é«˜8ä½æ•°æ®ä¼ é€åˆ°å¯„å­˜å™¨R3çš„ä½8ä½ï¼ŒåŸR3ä½24ç½®æ¢ä¸ºé«˜24ä½ã€‚MOV R0ï¼ŒR2ï¼ŒLSR #24;å°†R2å³ç§»24ä½ï¼Œå³å°†å…¶é«˜8ä½ç§»è‡³ä½8ä½é€R0ã€‚ORR R3ï¼ŒR0ï¼ŒR3ï¼ŒLSL #8;å°†R3å·¦ç§»8ä½åå°†R0ä½8ä½é€è‡³R3ã€‚ æ•°æ®ä¼ é€æŒ‡ä»¤MOV{cond}{S} Rdï¼Œoperand2MOV æŒ‡ä»¤å°† operand2 ä¼ é€åˆ°ç›®æ ‡å¯„å­˜å™¨ Rd ä¸­ 1234MOV R2ï¼Œ#0x7E; å°†ç«‹å³æ•° 0x7E ä¼ é€åˆ°å¯„å­˜å™¨ R2 ä¸­MOVS R1ï¼ŒR0ï¼ŒLSL#3; å°†å¯„å­˜å™¨ R0 * 8 ä¼ é€åˆ°å¯„å­˜å™¨ R1ï¼Œå¹¶å½±å“æ ‡å¿—ä½MOV PCï¼ŒLR; PCâ†LRï¼Œå­ç¨‹åºè¿”å›MOVS PCï¼ŒLR; PCâ†LRï¼Œå¼‚å¸¸æ¨¡å¼ä¸‹è¿”å› CPSRâ†SPSR MOV æŒ‡ä»¤çš„åŠŸèƒ½æ€»ç»“ å¯„å­˜å™¨ä¹‹é—´ä¼ é€ã€‚ ç«‹å³æ•°ä¼ é€åˆ°å¯„å­˜å™¨ä¸­ã€‚ï¼ˆ8 ä½ç«‹å³æ•°ä½å›¾ï¼‰ å®ç°å•çº¯çš„ç§»ä½æ“ä½œã€‚MOV Rdï¼ŒRdï¼ŒLSLï¼Œ#3 å®ç°å­ç¨‹åºè°ƒç”¨ã€ä»å­ç¨‹åºä¸­è¿”å›ã€‚å½“ PC å¯„å­˜å™¨ä½œä¸ºç›®æ ‡å¯„å­˜å™¨æ—¶å¯ä»¥å®ç°ç¨‹åºè·³è½¬ã€‚ å®ç°å¼‚å¸¸æ¨¡å¼çš„è¿”å›ï¼Œå¹¶æŠŠå½“å‰å¤„ç†å™¨æ¨¡å¼çš„ SPSR å¯„å­˜å™¨å†…å®¹å¤åˆ¶åˆ° CPSR ä¸­ã€‚ MVN{cond}{S} Rdï¼Œoperand2MVN æŒ‡ä»¤å°† operand2 æŒ‰ä½å–ååä¼ é€åˆ°ç›®æ ‡å¯„å­˜å™¨ Rd æ¯”è¾ƒæŒ‡ä»¤CMP{cond} Rnï¼Œoperand2CMP æŒ‡ä»¤å°†å¯„å­˜å™¨ Rn çš„å€¼å‡å» operand2 çš„å€¼ï¼Œä½†ä¸å­˜å‚¨è¿ç®—ç»“æœï¼Œåªæ ¹æ®æ“ä½œçš„ç»“æœæ›´æ–° CPSR ä¸­çš„ç›¸åº”æ¡ä»¶æ ‡å¿—ä½ï¼Œä»¥ä¾¿åé¢çš„æŒ‡ä»¤æ ¹æ®ç›¸åº”çš„æ¡ä»¶æ ‡å¿—æ¥åˆ¤æ–­æ˜¯å¦æ‰§è¡Œã€‚ å—å½±å“çš„ CPSR æ ‡å¿—ä½ å–å€¼ N è¿ç®—ç»“æœçš„ç¬¬ 31 ä½è¢«å¤åˆ¶åˆ° N Z è¿ç®—ç»“æœä¸º 0 åˆ™ Z=1ï¼Œå¦åˆ™ Z=0 C è¿ç®—ç»“æœæœ‰å€Ÿä½åˆ™ C=0ï¼Œå¦åˆ™ C=1 V è¿ç®—ç»“æœæœ‰æº¢å‡ºåˆ™ V=1ï¼Œå¦åˆ™ V=0 CMN{cond} Rnï¼Œoperand2CMN æŒ‡ä»¤å°†å¯„å­˜å™¨ Rn çš„å€¼å‡å» operand2 çš„ç›¸åæ•°ï¼ˆå³åŠ ä¸Š operand2 çš„å€¼ï¼‰ï¼Œä½†ä¸å­˜å‚¨è¿ç®—ç»“æœï¼Œåªæ ¹æ®æ“ä½œçš„ç»“æœæ›´æ–° CPSR ä¸­çš„ç›¸åº”æ¡ä»¶æ ‡å¿—ä½ï¼Œä»¥ä¾¿åé¢çš„æŒ‡ä»¤æ ¹æ®ç›¸åº”çš„æ¡ä»¶æ ‡å¿—æ¥åˆ¤æ–­æ˜¯å¦æ‰§è¡Œã€‚ 1CMN R0ï¼Œ#1;R0+1ï¼Œåˆ¤æ–­R0æ˜¯å¦ä¸º-1ã€‚ æµ‹è¯•æŒ‡ä»¤TST{cond} Rnï¼Œoperand2TST æŒ‡ä»¤å°†å¯„å­˜å™¨ Rn çš„å€¼ä¸ operand2 çš„å€¼æŒ‰ä½é€»è¾‘â€œä¸â€æ“ä½œï¼Œä½†ä¸å­˜å‚¨è¿ç®—ç»“æœï¼Œåªæ ¹æ®æ“ä½œçš„ç»“æœæ›´æ–° CPSR ä¸­çš„ç›¸åº”æ¡ä»¶æ ‡å¿—ä½ã€‚è¯¥æŒ‡ä»¤ä¸€èˆ¬ç”¨æ¥æ£€æµ‹æ˜¯å¦è®¾ç½®äº†ç‰¹å®šçš„ä½ã€‚ 12TST R0ï¼Œ#0x01;åˆ¤æ–­ R0 çš„æœ€ä½ä½æ˜¯å¦ä¸º 0TST Rlï¼Œ#0x0F;åˆ¤æ–­ R1 çš„ä½ 4 ä½æ˜¯å¦ä¸º 0 TEQ{cond} Rnï¼Œoperand2TEQ æŒ‡ä»¤å°†å¯„å­˜å™¨ Rn çš„å€¼ä¸ operand2 çš„å€¼æŒ‰ä½é€»è¾‘â€œå¼‚æˆ–â€æ“ä½œï¼Œä½†ä¸å­˜å‚¨è¿ç®—ç»“æœï¼Œåªæ ¹æ®æ“ä½œçš„ç»“æœæ›´æ–° CPSR ä¸­çš„ç›¸åº”æ¡ä»¶æ ‡å¿—ä½ï¼Œä»¥ä¾¿åé¢çš„æŒ‡ä»¤æ ¹æ®ç›¸åº”çš„æ¡ä»¶æ ‡å¿—æ¥åˆ¤æ–­æ˜¯å¦æ‰§è¡Œã€‚æŒ‡ä»¤ä¸¾ä¾‹å¦‚ä¸‹ï¼šTEQ R0ï¼ŒR1;æ¯”è¾ƒ R0 ä¸ R1 æ˜¯å¦ç›¸ç­‰ï¼›(ä¸å½±å“ V ä½å’Œ C ä½) å­˜å‚¨å™¨è®¿é—®æŒ‡ä»¤ARM å¾®å¤„ç†å™¨ç”¨åŠ è½½/å­˜å‚¨æŒ‡ä»¤è®¿é—®å­˜å‚¨å™¨ï¼Œå®ç°åœ¨å¯„å­˜å™¨å’Œå­˜å‚¨å™¨ä¹‹é—´ä¼ é€æ•°æ®ã€‚ç”±äº ARM å¤„ç†å™¨å¯¹å¤–è®¾å¯„å­˜å™¨ã€I/O æ˜ å°„ç©ºé—´ä¸å­˜å‚¨å™¨ç»Ÿä¸€ç¼–å€ï¼Œå› æ­¤ï¼Œå¯¹å¤–å›´è®¾å¤‡çš„ I/O æ“ä½œä¹Ÿç”¨æ­¤ç±»æŒ‡ä»¤ã€‚åŸºæœ¬çš„åŠ è½½/å­˜å‚¨æŒ‡ä»¤ä»…æœ‰ 5 æ¡ï¼Œåˆ†ä¸º 3 ç§ï¼š LDR å’Œ STRï¼Œå•å¯„å­˜å™¨åŠ è½½/å­˜å‚¨æŒ‡ä»¤ LDM å’Œ STMï¼Œå¤šå¯„å­˜å™¨åŠ è½½/å­˜å‚¨æŒ‡ä»¤ SWPï¼Œå¯„å­˜å™¨å’Œå­˜å‚¨å™¨æ•°æ®äº¤æ¢æŒ‡ä»¤ å…¶ä¸­ï¼ŒIã€Pã€Uã€W ç”¨äºåŒºåˆ«ä¸åŒçš„åœ°å€æ¨¡å¼(åç§»é‡) I ä¸º 0 æ—¶ï¼Œåç§»é‡ä¸º 12 ä½ç«‹å³æ•°ï¼›I ä¸º 1 æ—¶ï¼Œåç§»é‡ä¸ºå¯„å­˜å™¨ç§»ä½ï¼› P è¡¨ç¤ºå‰/åå˜å€ï¼ŒU è¡¨ç¤ºåŠ /å‡ï¼ŒW è¡¨ç¤ºå›å†™(ï¼åç¼€) L ç”¨äºåŒºåˆ«åŠ è½½(L ä¸º 1 æ—¶)æˆ–å­˜å‚¨(L ä¸º 0 æ—¶) B ç”¨äºåŒºåˆ«å­—èŠ‚è®¿é—®(B ä¸º 1 æ—¶)æˆ–å­—è®¿é—®(B ä¸º 0 æ—¶) Rn ä¸ºåŸºå€å¯„å­˜å™¨ï¼ŒRd ä¸ºæº/ç›®æ ‡å¯„å­˜å™¨ã€‚ å•å¯„å­˜å™¨åŠ è½½/å­˜å‚¨æŒ‡ä»¤å•å¯„å­˜å™¨åŠ è½½/å­˜å‚¨æŒ‡ä»¤æ˜¯ ARM åœ¨å¯„å­˜å™¨å’Œå­˜å‚¨å™¨é—´ä¼ é€å•ä¸ªå­—èŠ‚å’Œå­—çš„æœ€çµæ´»æ–¹å¼ã€‚ LDRï¼ˆLoad Registerï¼‰ï¼šè¿™æ˜¯ä¸€ä¸ªåŠ è½½æŒ‡ä»¤ï¼Œç”¨äºä»å†…å­˜ä¸­è¯»å–æ•°æ®å¹¶å°†å…¶åŠ è½½åˆ°å¯„å­˜å™¨ä¸­ã€‚å…¶åŸºæœ¬æ ¼å¼ä¸º LDR Rd, [Rn]ï¼Œå…¶ä¸­ Rd æ˜¯ç›®æ ‡å¯„å­˜å™¨ï¼ŒRn æ˜¯åŒ…å«è¦è¯»å–çš„å†…å­˜åœ°å€çš„å¯„å­˜å™¨;ä¾‹å¦‚ï¼ŒLDR R1, [R2] ä¼šå°†å­˜å‚¨åœ¨ R2 å¯„å­˜å™¨æ‰€æŒ‡å‘çš„å†…å­˜åœ°å€ä¸­çš„æ•°æ®åŠ è½½åˆ° R1 å¯„å­˜å™¨ä¸­ã€‚STRï¼ˆStore Registerï¼‰ï¼šè¿™æ˜¯ä¸€ä¸ªå­˜å‚¨æŒ‡ä»¤ï¼Œç”¨äºå°†å¯„å­˜å™¨ä¸­çš„æ•°æ®å†™å…¥åˆ°å†…å­˜ä¸­ã€‚å…¶åŸºæœ¬æ ¼å¼ä¸º STR Rd, [Rn]ï¼Œå…¶ä¸­ Rd æ˜¯æºå¯„å­˜å™¨ï¼ŒRn æ˜¯åŒ…å«è¦å†™å…¥çš„å†…å­˜åœ°å€çš„å¯„å­˜å™¨ã€‚ä¾‹å¦‚ï¼ŒSTR R1, [R2] ä¼šå°† R1 å¯„å­˜å™¨ä¸­çš„æ•°æ®å­˜å‚¨åˆ° R2 å¯„å­˜å™¨æ‰€æŒ‡å‘çš„å†…å­˜åœ°å€ä¸­ã€‚ æ ¹æ®ä¼ é€æ•°æ®çš„ç±»å‹ä¸åŒï¼Œå•ä¸ªå¯„å­˜å™¨å­˜å–æŒ‡ä»¤åˆå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸¤ç±»ï¼šå•å­—å’Œæ— ç¬¦å·å­—èŠ‚çš„åŠ è½½/å­˜å‚¨æŒ‡ä»¤åŠå­—å’Œæœ‰ç¬¦å·å­—èŠ‚çš„åŠ è½½/å­˜å‚¨æŒ‡ä»¤ å•å­—å’Œæ— ç¬¦å·å­—èŠ‚çš„åŠ è½½ï¼å­˜å‚¨æŒ‡ä»¤LDRï¼šæŒ‡ä»¤ä»å†…å­˜ä¸­å– 32 ä½å­—æˆ– 8 ä½æ— ç¬¦å·å­—èŠ‚æ•°æ®æ”¾å…¥å¯„å­˜å™¨ï¼›STRï¼šæŒ‡ä»¤å°†å¯„å­˜å™¨ä¸­çš„ 32 ä½å­—æˆ– 8 ä½æ— ç¬¦å·å­—èŠ‚æ•°æ®ä¿å­˜åˆ°å­˜å‚¨å™¨ä¸­ã€‚ æ³¨æ„ï¼šæ— ç¬¦å·å­—èŠ‚åŠ è½½æ—¶ï¼Œç”¨ 0 å°† 8 ä½çš„æ“ä½œæ•°æ‰©å±•åˆ° 32 ä½ã€‚ Instruction FormatLDR{cond}{T} Rdï¼Œ&lt;åœ°å€&gt;;åŠ è½½æŒ‡å®šåœ°å€ä¸Šçš„å­—æ•°æ®ï¼Œæ”¾å…¥ Rd ä¸­ã€‚STR{cond}{T} Rdï¼Œ&lt;åœ°å€&gt;;å­˜å‚¨ Rd ä¸­å­—æ•°æ®ï¼Œåˆ°æŒ‡å®šåœ°å€çš„å­˜å‚¨å•å…ƒã€‚LDR{cond}B{T} Rdï¼Œ&lt;åœ°å€&gt;;åŠ è½½å­—èŠ‚æ•°æ®åˆ° Rd ä½ 8 ä½æ•°æ®ä½ä¸­ï¼Œé«˜ 24 ä½ä¸º 0ã€‚STR{cond}B{T} Rdï¼Œ&lt;åœ°å€&gt;;å­˜å‚¨ Rd ä¸­å­—èŠ‚æ•°æ®ï¼Œ Rd ä¸­æœ€ä½å­—èŠ‚ä¸ºä¼ é€æ•°æ® PostfixT ä¸ºå¯é€‰åç¼€ï¼Œè‹¥æŒ‡ä»¤æœ‰ Tï¼Œå­˜å‚¨ç³»ç»Ÿå°†è®¿é—®çœ‹æˆæ˜¯å¤„ç†å™¨æ˜¯åœ¨ç”¨æˆ·æ¨¡å¼ä¸‹ã€‚ç”¨äºå­˜å‚¨å™¨ä¿æŠ¤ã€‚ä¸èƒ½ä¸åå˜å€æ¨¡å¼ã€è‡ªåŠ¨å˜å€æ¨¡å¼ä¸€èµ·ä½¿ç”¨ï¼ˆå³ä¸èƒ½æ”¹å˜åŸºå€å¯„å­˜å™¨å€¼ï¼‰ã€‚T åœ¨ç”¨æˆ·æ¨¡å¼ä¸‹æ— æ•ˆ AddressingLDR/STR æŒ‡ä»¤ä¸ºåŸºå€å˜å€å¯»å€[Ch3-1ARMæŒ‡ä»¤æ¦‚è¿°.md#åŸºå€å˜å€å¯»å€ Base-index Addressing]ï¼ˆæˆ–å¯„å­˜å™¨é—´æ¥å¯»å€ï¼‰ï¼Œç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š åŸºåœ°å€éƒ¨åˆ†ï¼šä¸ºä¸€ä¸ªåŸºå€å¯„å­˜å™¨ï¼Œå¯ä»¥ä¸ºä»»ä¸€ä¸ªé€šç”¨å¯„å­˜å™¨ï¼› åç§»åœ°å€éƒ¨åˆ†ï¼šè¿™ä¸€éƒ¨åˆ†éå¸¸çµæ´»ï¼Œå®é™…å°±ç±»ä¼¼ç¬¬äºŒä¸ªæ“ä½œæ•°ï¼Œå¯ä»¥æœ‰ä»¥ä¸‹ 3 ç§æ ¼å¼ï¼š ç«‹å³æ•°:12 ä½ç«‹å³æ•°æ˜¯ä¸€ä¸ªæ— ç¬¦å·çš„æ•°å€¼ã€‚è¿™ä¸ªæ•°æ®å¯ä»¥åŠ åˆ°åŸºå€å¯„å­˜å™¨ï¼Œä¹Ÿå¯ä»¥ä»åŸºå€å¯„å­˜å™¨ä¸­å‡å»è¿™ä¸ªæ•°å€¼ å¯„å­˜å™¨:å¯„å­˜å™¨ä¸­çš„æ•°å€¼(æ— ç¬¦å·æ•°)å¯ä»¥åŠ åˆ°åŸºå€å¯„å­˜å™¨ï¼Œä¹Ÿå¯ä»¥ä»åŸºå€å¯„å­˜å™¨ä¸­å‡å»è¿™ä¸ªæ•°å€¼ å¯„å­˜å™¨åŠç§»ä½å¸¸æ•°:å¯„å­˜å™¨ç§»ä½åçš„å€¼(æ— ç¬¦å·æ•°)å¯ä»¥åŠ åˆ°åŸºå€å¯„å­˜å™¨ï¼Œä¹Ÿå¯ä»¥ä»åŸºå€å¯„å­˜å™¨ä¸­å‡å»è¿™ä¸ªæ•°å€¼123456LDR R1ï¼Œ[R0ï¼Œ#0x10];LDR R1ï¼Œ[R0ï¼Œ# -0x10];LDR R1ï¼Œ[R0ï¼ŒR2]LDR R1ï¼Œ[R0ï¼Œ-R2]LDR R1ï¼Œ[R0ï¼ŒR2ï¼ŒLSL #2] å°†R0+R2Ã—4åœ°å€å¤„çš„æ•°æ®è¯»å‡º,ä¿å­˜åˆ°R1ä¸­(R0ã€R2çš„å€¼ä¸å˜)LDR R1ï¼Œ[R0ï¼Œ-R2ï¼ŒLSL #2] å°†R0-R2Ã—4åœ°å€å¤„çš„æ•°æ®è¯»å‡º,ä¿å­˜åˆ°R1ä¸­(R0ã€R2çš„å€¼ä¸å˜) PCï¼ˆå³ R15ï¼‰ä½¿ç”¨çš„å‡ ä¸ªé—®é¢˜ä½¿ç”¨ PC ä½œä¸ºåŸºå€æ—¶ï¼Œä½¿ç”¨çš„æ•°å€¼æ˜¯å½“å‰æ‰§è¡ŒæŒ‡ä»¤çš„åœ°å€åŠ  8 ä¸ªå­—èŠ‚ï¼ˆå–æŒ‡ä¸æ‰§è¡Œç›¸å·® 8 ä¸ªå­—èŠ‚ï¼‰ã€‚PC ä¸èƒ½ç”¨åšåç§»å¯„å­˜å™¨ï¼Œä¹Ÿä¸èƒ½ç”¨äºä»»ä½•å˜å€å¯»å€æ¨¡å¼ã€‚æŠŠä¸€ä¸ªå­—åŠ è½½åˆ° PCï¼Œå°†ä½¿ç¨‹åºè½¬ç§»åˆ°æ‰€åŠ è½½çš„åœ°å€ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¬è®¤çš„å®ç°è·³è½¬çš„æ–¹æ³•ã€‚ä½†æ˜¯åº”å½“é¿å…å°†ä¸€ä¸ªå­—èŠ‚åŠ è½½åˆ° PCã€‚æŠŠ PC å­˜åˆ°å­˜å‚¨å™¨çš„æ“ä½œåœ¨ä¸åŒä½“ç³»ç»“æ„çš„å¤„ç†å™¨ä¸­äº§ç”Ÿä¸åŒçš„ç»“æœï¼Œåº”å°½å¯èƒ½é¿å…ã€‚ å¤šå¯„å­˜å™¨çš„å­˜å–æŒ‡ä»¤LDM å’Œ STM æŒ‡ä»¤å¯ä»¥å®ç°åœ¨ä¸€ç»„å¯„å­˜å™¨å’Œä¸€å—è¿ç»­çš„å†…å­˜å•å…ƒä¹‹é—´å­˜/å–æ•°æ®ã€‚LDM ä¸ºåŠ è½½å¤šä¸ªå¯„å­˜å™¨ï¼›STM ä¸ºå­˜å‚¨å¤šä¸ªå¯„å­˜å™¨ã€‚è¿™ä¸¤æ¡æŒ‡ä»¤ï¼Œå…è®¸ä¼ é€ 16 ä¸ªå¯„å­˜å™¨ R0â€”R15 çš„ä»»ä½•å­é›†æˆ–æ‰€æœ‰å¯„å­˜å™¨ã€‚ LDM{cond}&lt;æ¨¡å¼&gt; Rn{!}ï¼Œ&lt;reglist&gt;{^}STM{cond} &lt;æ¨¡å¼&gt; Rn{!}ï¼Œ&lt;reglist&gt;{^}ï¼ˆ1ï¼‰Rnï¼šè¡¨ç¤ºåŸºå€å¯„å­˜å™¨ï¼Œè£…æœ‰ä¼ é€æ•°æ®çš„åˆå§‹åœ°å€ï¼ŒRn ä¸å…è®¸ä¸º R15ï¼ˆå³ PCï¼‰ã€‚ï¼ˆ2ï¼‰Rn åç¼€â€œ!â€ï¼šè¡¨ç¤ºæœ€åçš„åœ°å€å†™å›åˆ° Rn ä¸­ã€‚ï¼ˆ3ï¼‰Reglistï¼šè¡¨ç¤ºå¯„å­˜å™¨åˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå¯„å­˜å™¨ã€‚å½“å¯„å­˜å™¨ä¸è¿ç»­æ—¶ï¼Œä¸­é—´ä½¿ç”¨â€œï¼Œâ€éš”å¼€ã€‚ä¾‹å¦‚ï¼š{R1ï¼ŒR2ï¼ŒR6-R9}åˆ—è¡¨å¯„å­˜å™¨å’Œå­˜å‚¨å™¨åœ°å€çš„å…³ç³»è§„åˆ™ï¼šç¼–å·ä½çš„å¯„å­˜å™¨å¯¹åº”äºå­˜å‚¨å™¨ä¸­ä½åœ°å€å•å…ƒï¼Œç¼–å·é«˜çš„å¯„å­˜å™¨å¯¹åº”äºå­˜å‚¨å™¨ä¸­é«˜åœ°å€å•å…ƒã€‚(4)åç¼€â€œ^â€è¯´æ˜å¯„å­˜å™¨åˆ—è¡¨ä¸åŒ…å« PCï¼šä½¿ç”¨åç¼€â€œ^â€è¿›è¡Œæ•°æ®ä¼ é€æ—¶ï¼ŒåŠ è½½ï¼å­˜å‚¨çš„æ˜¯ç”¨æˆ·æ¨¡å¼çš„å¯„å­˜å™¨ï¼Œè€Œä¸æ˜¯å½“å‰æ¨¡å¼çš„å¯„å­˜å™¨ã€‚å¯„å­˜å™¨åˆ—è¡¨åŒ…å«æœ‰ PCï¼šé™¤äº†æ­£å¸¸çš„å¤šå¯„å­˜å™¨ä¼ é€å¤–ï¼Œè¿˜è¦å°† SPSR æ‹·è´åˆ° CPSR ä¸­ã€‚è¯¥ç”¨æ³•å¯ç”¨äºå¼‚å¸¸å¤„ç†è¿”å›ã€‚ç¦ç”¨æƒ…å†µï¼šåç¼€â€œ^â€ä¸å…è®¸åœ¨ç”¨æˆ·æ¨¡å¼æˆ–ç³»ç»Ÿæ¨¡å¼ä¸‹ä½¿ç”¨ã€‚ ï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰ SPSRï¼ˆ5ï¼‰å½“ Rn åœ¨å¯„å­˜å™¨åˆ—è¡¨ä¸­ä¸”ä½¿ç”¨åç¼€â€œ!â€å¯¹äº STM æŒ‡ä»¤ï¼Œè‹¥ Rn ä¸ºå¯„å­˜å™¨åˆ—è¡¨ä¸­çš„æœ€ä½åºå·çš„å¯„å­˜å™¨ï¼Œåˆ™ä¼šå°† Rn çš„åˆå€¼ä¿å­˜ï¼›å…¶å®ƒæƒ…å†µä¸‹ Rn çš„ç¼–è¯‘æ— æ³•é€šè¿‡ã€‚ï¼ˆ6ï¼‰åœ°å€å­—å¯¹é½è¿™äº›æŒ‡ä»¤å¯»å€æ˜¯å­—å¯¹é½çš„ï¼Œå³å¿½ç•¥åœ°å€ä½[1:0]ã€‚ åå¤„ç†å™¨æŒ‡ä»¤ç•¥ æ‚é¡¹æŒ‡ä»¤ä¸»è¦ç”±ä¸¤ç§ç±»å‹æŒ‡ä»¤ç»„æˆï¼Œç¨‹åºçŠ¶æ€å¯„å­˜å™¨æ“ä½œæŒ‡ä»¤ã€ä¸­æ–­æ“ä½œæŒ‡ä»¤ï¼Œä¸€å…±æœ‰ 5 æ¡æŒ‡ä»¤ã€‚ çŠ¶æ€å¯„å­˜å™¨æ“ä½œæŒ‡ä»¤ï¼šMRSï¼šè¯»ç¨‹åºçŠ¶æ€å¯„å­˜å™¨æŒ‡ä»¤MSRï¼šå†™ç¨‹åºçŠ¶æ€å¯„å­˜å™¨æŒ‡ä»¤å¼‚å¸¸ä¸­æ–­æ“ä½œæŒ‡ä»¤ï¼šSWIï¼š è½¯ä»¶ä¸­æ–­æŒ‡ä»¤BKPTï¼šæ–­ç‚¹æŒ‡ä»¤ï¼ˆv5T ä½“ç³»ï¼‰CLZï¼š å‰å¯¼ 0 è®¡æ•°ï¼ˆv5T ä½“ç³»ï¼‰","link":"/UESTC/ARM-Processor/Ch3-2ARM%E6%8C%87%E4%BB%A4%E5%88%86%E7%B1%BB/"},{"title":"ARMä¼ªæŒ‡ä»¤åŠç¼–ç¨‹åŸºç¡€","text":"ä¼ªæŒ‡ä»¤æ¦‚è¿°ä¼ªæŒ‡ä»¤:äººä»¬è®¾è®¡äº†ä¸€äº›ä¸“é—¨ç”¨äºæŒ‡å¯¼æ±‡ç¼–å™¨è¿›è¡Œæ±‡ç¼–å·¥ä½œçš„æŒ‡ä»¤ï¼Œç”±äºè¿™äº›æŒ‡ä»¤ä¸å½¢æˆæœºå™¨ç æŒ‡ä»¤ï¼Œå®ƒä»¬åªæ˜¯åœ¨æ±‡ç¼–å™¨è¿›è¡Œæ±‡ç¼–å·¥ä½œçš„è¿‡ç¨‹ä¸­èµ·ä½œç”¨ï¼Œæ‰€ä»¥è¢«å«åšä¼ªæŒ‡ä»¤ä¼ªæŒ‡ä»¤å…·æœ‰çš„ä¸¤ä¸ªç‰¹å¾:ä¼ªæŒ‡ä»¤æ˜¯ä¸€æ¡æŒ‡ä»¤;ä¼ªæŒ‡ä»¤æ²¡æœ‰æŒ‡ä»¤ä»£ç ã€‚ ä¼ªæŒ‡ä»¤çš„ä½œç”¨ ç¨‹åºå®šä½çš„ä½œç”¨; ä¸ºéæŒ‡ä»¤ä»£ç è¿›è¡Œå®šä¹‰; ä¸ºç¨‹åºå®Œæ•´æ€§åšæ ‡æ³¨; æœ‰æ¡ä»¶çš„å¼•å¯¼ç¨‹åºæ®µã€‚ é€šç”¨ä¼ªæŒ‡ä»¤åœ¨ ARM æ±‡ç¼–ç¨‹åºè¯­è¨€ä¸­ï¼Œæœ‰å¦‚ä¸‹å‡ ç§ä¼ªæŒ‡ä»¤ï¼š ç¬¦å·å®šä¹‰ï¼ˆSymbol Definitionï¼‰ä¼ªæŒ‡ä»¤ æ•°æ®å®šä¹‰ï¼ˆData Definitionï¼‰ä¼ªæŒ‡ä»¤ æ±‡ç¼–æ§åˆ¶ï¼ˆAssembly Controlï¼‰ä¼ªæŒ‡ä»¤ å…¶å®ƒï¼ˆMiscellaneousï¼‰ä¼ªæŒ‡ä»¤ ä¸ºå˜é‡å®šä¹‰æˆ–èµ‹å€¼çš„ä¼ªæŒ‡ä»¤ç¬¦å·çš„å‘½åç”±ç¼–ç¨‹è€…å†³å®šï¼Œä½†å¿…é¡»éµå¾ªä»¥ä¸‹çº¦å®šï¼š ç¬¦å·åŒºåˆ†å¤§å°å†™ï¼ŒåŒåçš„å¤§ã€å°å†™ç¬¦å·ä¼šè¢«ç¼–è¯‘å™¨è®¤ä¸ºæ˜¯ä¸¤ä¸ªä¸åŒçš„ç¬¦å·; ç¬¦å·åœ¨å…¶ä½œç”¨èŒƒå›´å†…å¿…é¡»å”¯ä¸€; è‡ªå®šä¹‰çš„ç¬¦å·ä¸èƒ½ä¸ç³»ç»Ÿä¿ç•™å­—ç›¸åŒ; ç¬¦å·ä¸åº”ä¸æŒ‡ä»¤æˆ–ä¼ªæŒ‡ä»¤åŒåã€‚ å£°æ˜å…¨å±€å˜é‡ä¼ªæŒ‡ä»¤ GBLAã€GBLL å’Œ GBLSGBLAã€GBLL å’Œ GBLS ä¼ªæŒ‡ä»¤ç”¨äºå®šä¹‰ä¸€ä¸ª ARM ç¨‹åºä¸­çš„å…¨å±€å˜é‡ï¼Œå¹¶å°†å…¶åˆå§‹åŒ–ã€‚å…¨å±€å˜é‡çš„å˜é‡ååœ¨æ•´ä¸ªç¨‹åºèŒƒå›´å†…å¿…é¡»å…·æœ‰å”¯ä¸€æ€§æŒ‡ä»¤æ ¼å¼ï¼šGBLA(GBLLå’ŒGBLS) &lt;variable_name&gt;GBLA å®šä¹‰ä¸€ä¸ª å…¨å±€æ•°å­—å˜é‡ï¼Œå…¶é»˜è®¤åˆå€¼ä¸º 0 ;GBLL å®šä¹‰ä¸€ä¸ª å…¨å±€é€»è¾‘å˜é‡ ï¼Œå…¶é»˜è®¤åˆå€¼ä¸º FALSE;GBLS å®šä¹‰ä¸€ä¸ª å…¨å±€å­—ç¬¦ä¸²å˜é‡ï¼Œå…¶é»˜è®¤åˆå€¼ä¸º ç©º ; å£°æ˜å±€éƒ¨å˜é‡ä¼ªæŒ‡ä»¤ LCLAã€LCLL å’Œ LCLSLCLAã€LCLL å’Œ LCLS ä¼ªæŒ‡ä»¤ç”¨äºå®šä¹‰ä¸€ä¸ª ARM ç¨‹åºä¸­çš„å±€éƒ¨å˜é‡ï¼Œå¹¶å°†å…¶åˆå§‹åŒ–ã€‚æ ¼å¼ï¼šLCLA(LCLL å’Œ LCLS) &lt;variable_name&gt;LCLA å®šä¹‰ä¸€ä¸ªå±€éƒ¨æ•°å­—å˜é‡ï¼Œå…¶é»˜è®¤åˆå€¼ä¸º 0;LCLL å®šä¹‰ä¸€ä¸ªå±€éƒ¨é€»è¾‘å˜é‡ï¼Œå…¶é»˜è®¤åˆå€¼ä¸º FALSE;LCLS å®šä¹‰ä¸€ä¸ªå±€éƒ¨å­—ç¬¦ä¸²å˜é‡ï¼Œå…¶é»˜è®¤åˆå€¼ä¸º ç©ºã€‚ å˜é‡èµ‹å€¼ä¼ªæŒ‡ä»¤ SETAã€SETL å’Œ SETSä¼ªæŒ‡ä»¤ SETAã€SETL å’Œ SETS ç”¨äºç»™ä¸€ä¸ªå·²ç»å®šä¹‰çš„å…¨å±€å˜é‡æˆ–å±€éƒ¨å˜é‡è¿›è¡Œèµ‹å€¼ã€‚ æ³¨ï¼šè¦é¡¶æ ¼å†™ æŒ‡ä»¤æ ¼å¼ï¼šå˜é‡å SETAï¼ˆSETL æˆ– SETSï¼‰è¡¨è¾¾å¼SETA ä¼ªæŒ‡ä»¤ç”¨äºç»™ä¸€ä¸ªæ•°å­—å˜é‡èµ‹å€¼;SETL ä¼ªæŒ‡ä»¤ç”¨äºç»™ä¸€ä¸ªé€»è¾‘å˜é‡èµ‹å€¼;SETS ä¼ªæŒ‡ä»¤ç”¨äºç»™ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡èµ‹å€¼; 123Test1 SETA 0xAA ;å°†Test1å˜é‡èµ‹å€¼ä¸º0xAAã€‚Test2 SETL {TRUE} ;å°†Test2 å˜é‡èµ‹å€¼ä¸ºçœŸ;Test3 SETS &quot;Testing&quot; ;å°†Test3å˜é‡èµ‹å€¼ä¸ºTesting å®šä¹‰å¯„å­˜å™¨åˆ—è¡¨ä¼ªæŒ‡ä»¤æŒ‡ä»¤ LDM/STM éœ€è¦ä½¿ç”¨ä¸€ä¸ªæ¯”è¾ƒé•¿çš„å¯„å­˜å™¨åˆ—è¡¨ï¼Œä½¿ç”¨ä¼ªæŒ‡ä»¤ RLIST å¯å¯¹ä¸€ä¸ªåˆ—è¡¨å®šä¹‰ä¸€ä¸ªç»Ÿä¸€çš„åç§°ã€‚æ ¼å¼ï¼š&lt;name&gt; RLIST &lt;{list}&gt;ä¾‹å¦‚ï¼š 123LoReg RLIST {R0-R7} ;å®šä¹‰å¯„å­˜å™¨åˆ—è¡¨{R0-R7}çš„åç§°ä¸º LoRegSTMFD SP!, LoReg ;å †æ ˆæ“ä½œä½¿ç”¨å¯„å­˜å™¨åˆ—è¡¨RegList RLIST {R0-R5,R8,R10} ;å°†å¯„å­˜å™¨åˆ—è¡¨åç§°å®šä¹‰ä¸º RegListï¼Œå¯åœ¨ ARM æŒ‡ä»¤ LDM/STM ä¸­é€šè¿‡è¯¥åç§°è®¿é—®å¯„å­˜å™¨åˆ—è¡¨ æ•°æ®å®šä¹‰ä¼ªæŒ‡ä»¤LTORGç”¨äºå£°æ˜ä¸€ä¸ªæ•°æ®ç¼“å†²æ± ï¼ˆæ–‡å­—æ± ï¼‰çš„å¼€å§‹ã€‚æ ¼å¼ï¼šLTORGä¼ªæŒ‡ä»¤ LTORG ç”¨æ¥è¯´æ˜æŸä¸ªå­˜å‚¨åŒºåŸŸä¸ºä¸€ä¸ªç”¨æ¥æš‚å­˜æ•°æ®çš„æ•°æ®ç¼“å†²åŒºï¼Œä¹Ÿå«æ–‡å­—æ± æˆ–æ•°æ®ç¼“å†²æ± ã€‚å¤§çš„ä»£ç æ®µä¹Ÿå¯ä»¥ä½¿ç”¨å¤šä¸ªæ•°æ®ç¼“å†²æ± ã€‚å…¶ç›®çš„æ˜¯ï¼Œé˜²æ­¢åœ¨ç¨‹åºä¸­ä½¿ç”¨ LDR ä¹‹ç±»çš„æŒ‡ä»¤è®¿é—®æ—¶ï¼Œå¯èƒ½äº§ç”Ÿçš„è¶Šç•Œã€‚é€šå¸¸æŠŠæ•°æ®ç¼“å†²æ± æ”¾åœ¨ä»£ç æ®µçš„æœ€åé¢ï¼Œæˆ–æ”¾åœ¨æ— æ¡ä»¶è½¬ç§»æŒ‡ä»¤æˆ–å­ç¨‹åºè¿”å›æŒ‡ä»¤ä¹‹åï¼Œè¿™æ ·å¤„ç†å™¨å°±ä¸ä¼šé”™è¯¯åœ°å°†æ•°æ®ç¼“å†²æ± ä¸­çš„æ•°æ®å½“ä½œæŒ‡ä»¤æ¥æ‰§è¡Œã€‚ 123456789 AREA example, CODE, READONLYStart BL Func1 â€¦Func1 LDR R1,=0x800 MOV PC,LR LTORG ;å®šä¹‰æ•°æ®ç¼“å†²æ± çš„å¼€å§‹ä½ç½®ï¼Œ ;ç³»ç»Ÿä¼šè‡ªåŠ¨è®¾ç½®æ•°æ®ç¼“å†²æ± çš„å¤§å° â€¦ END MAP å’Œ FIELDMAP ç”¨äºå®šä¹‰ä¸€ä¸ªç»“æ„åŒ–çš„å†…å­˜è¡¨çš„é¦–åœ°å€ã€‚MAP å¯ä»¥ç”¨^ ä»£æ›¿ã€‚æ ¼å¼ï¼šMAP &lt;expr&gt; {,&lt;base_register&gt;} expr æ˜¯æ•°å­—è¡¨è¾¾å¼æˆ–ç¨‹åºä¸­çš„æ ‡å·ã€‚å½“æŒ‡ä»¤ä¸­æ²¡æœ‰ base_register æ—¶ï¼Œexpr å³ä¸ºç»“æ„åŒ–å†…å­˜è¡¨çš„é¦–åœ°å€ï¼Œå¯ä»¥ä¸º æ ‡å· æˆ– æ•°å­—è¡¨è¾¾å¼;base_register ä¸ºåŸºå€å¯„å­˜å™¨ï¼ˆå¯é€‰é¡¹ï¼‰ã€‚å½“æŒ‡ä»¤ä¸­åŒ…å«è¿™ä¸€é¡¹æ—¶ï¼Œç»“æ„åŒ–å†…å­˜è¡¨çš„é¦–åœ°å€ä¸º expr ä¸ base_register å¯„å­˜å™¨å€¼çš„å’Œ;MAP fun ; fun å°±æ˜¯å†…å­˜è¡¨çš„é¦–åœ°å€MAP 0x100,R9 ;å†…å­˜è¡¨çš„é¦–åœ°å€ä¸º R9+0X100 MAP é€šå¸¸å’Œ FIELD ä¼ªæŒ‡ä»¤ç›¸é…åˆæ¥å®šä¹‰ä¸€ä¸ªç»“æ„åŒ–çš„å†…å­˜è¡¨ã€‚FIELD ä¼ªæŒ‡ä»¤ç”¨äºå®šä¹‰ä¸€ä¸ªç»“æ„åŒ–å†…å­˜è¡¨ä¸­çš„æ•°æ®åŸŸã€‚æ ¼å¼ï¼š{label} FIELD expr Label ä¸ºåŸŸæ ‡å·ï¼Œè¦é¡¶æ ¼å†™;Expr è¡¨ç¤ºæœ¬æ•°æ®åŸŸåœ¨å†…å­˜è¡¨ä¸­æ‰€å ç”¨çš„å­—èŠ‚æ•°;åŠŸèƒ½ï¼šFIELD ç”¨äºå®šä¹‰ä¸€ä¸ªç»“æ„åŒ–å†…å­˜è¡¨ä¸­çš„æ•°æ®åŸŸï¼Œ#ä¸ FIELD åŒä¹‰ã€‚ 12345 MAP 0X100 ;å®šä¹‰ç»“æ„åŒ–å†…å­˜è¡¨é¦–åœ°å€ä¸º 0X100A FIELD 16 ;å®šä¹‰Açš„é•¿åº¦ä¸º16å­—èŠ‚ï¼Œä½ç½®ä¸º 0X100B FIELD 32 ;å®šä¹‰Bçš„é•¿åº¦ä¸º32å­—èŠ‚ï¼Œä½ç½®ä¸º 0X110S FIELD 256 ;å®šä¹‰Sçš„é•¿åº¦ä¸º256å­—èŠ‚ï¼Œä½ç½®ä¸º 0X130æ³¨æ„ï¼šMAP å’Œ FIELD ä¼ªæŒ‡ä»¤ä»…ç”¨äºå®šä¹‰æ•°æ®ç»“æ„ï¼Œå¹¶ä¸å®é™…åˆ†é…å­˜å‚¨å•å…ƒã€‚ FIELD ä¹Ÿå¯ç”¨â€œ#â€ ä»£æ›¿ã€‚ SPACE å’Œ DCBSPACE ä¼ªæŒ‡ä»¤ç”¨äºåˆ†é…ä¸€ç‰‡è¿ç»­çš„å­˜å‚¨åŒºåŸŸå¹¶åˆå§‹åŒ–ä¸º 0ã€‚æ ¼å¼ï¼š {label} SPACE exprlabel ä¸ºå†…å­˜å—èµ·å§‹åœ°å€æ ‡å·;Expr ä¸ºæ‰€è¦åˆ†é…çš„å†…å­˜å­—èŠ‚æ•°;SPACE ä¹Ÿå¯ç”¨â€œ%â€ ä»£æ›¿ã€‚ 12 AREA DataRAM,DATA,READWRITE;å£°æ˜ä¸€æ•°æ®æ®µï¼Œåä¸º DataRAMDataSpace SPACE 100 ;åˆ†é…è¿ç»­çš„ 100 å­—èŠ‚çš„å­˜å‚¨å•å…ƒ,å¹¶åˆå§‹åŒ–ä¸º 0ã€‚ DCB ä¼ªæŒ‡ä»¤ç”¨äºåˆ†é…å†…å­˜å•å…ƒå¹¶åˆå§‹åŒ–æ ¼å¼ï¼š{label} DCB expr{ï¼Œexpr }{ï¼Œexpr }â€¦ label æ˜¯å­˜å—èµ·å§‹åœ°å€æ ‡å·;expr å¯ä»¥ä¸º 0 è‡³ 255 çš„æ•°å€¼æˆ–å­—ç¬¦ä¸²ï¼Œå†…å­˜åˆ†é…çš„å­—èŠ‚æ•°ç”± expr ä¸ªæ•°å†³å®š;åŠŸèƒ½ï¼šDCB ç”¨äºåˆ†é…ä¸€æ®µå­—èŠ‚å†…å­˜å•å…ƒï¼Œå¹¶ç”¨ä¼ªæŒ‡ä»¤ä¸­çš„ expr åˆå§‹åŒ–ï¼Œä¸€èˆ¬å¯ç”¨æ¥å®šä¹‰æ•°æ®è¡¨æ ¼ï¼Œæˆ–æ–‡å­—ç¬¦ä¸²ï¼Œ=ä¸ DCB åŒä¹‰ã€‚ 1234567DISPTAB DCB 0x43,0x33,0x76,0x12 DCB 120,20,32,44String DCB â€œsend,data is error!â€,0LDR R1, =DISPTAB ;æŠŠDISPTABçš„åœ°å€å€¼é€å…¥R1 LDRB R2, [R1,#2] ;è·å–åœ°å€ä¸º[R1+#2]å­—èŠ‚å•å…ƒçš„å€¼,R2=0x76 DCD å’Œ DCDUç”¨äºåˆ†é…å­˜å‚¨å•å…ƒå¹¶åˆå§‹åŒ–æ ¼å¼ï¼š{label} DCD expr{ï¼Œexpr }{ï¼Œexpr }â€¦{label} DCDU expr{ï¼Œexpr }{ï¼Œexpr }â€¦label æ˜¯å†…å­˜å—èµ·å§‹åœ°å€æ ‡å·expr ä¸ºå¸¸æ•°è¡¨è¾¾å¼æˆ–ç¨‹åºä¸­æ ‡å·ï¼Œå†…å­˜åˆ†é…å­—èŠ‚æ•°ç”± expr ä¸ªæ•°å†³å®šåŠŸèƒ½ï¼šDCD ç”¨äºåˆ†é…ä¸€æ®µå­—å†…å­˜å•å…ƒï¼Œå¹¶ç”¨ä¼ªæŒ‡ä»¤ä¸­çš„ expr åˆå§‹åŒ–ï¼Œå­—å¯¹é½ï¼Œå¯å®šä¹‰æ•°æ®è¡¨æ ¼æˆ–å…¶å®ƒå¸¸æ•°ã€‚&amp;ä¸ DCD åŒä¹‰ã€‚DCDU ç”¨äºåˆ†é…ä¸€æ®µå­—å†…å­˜å•å…ƒï¼Œå¹¶ç”¨ä¼ªæŒ‡ä»¤ä¸­çš„ expr åˆå§‹åŒ–ã€‚DCDU ä¼ªæŒ‡ä»¤åˆ†é…çš„å†…å­˜ä¸éœ€è¦å­—å¯¹é½ï¼Œå¯å®šä¹‰æ•°æ®è¡¨æ ¼æˆ–å…¶å®ƒå¸¸æ•° 123456789101112131415 AREA blockcopy,CODE,READONLY â€¦â€¦ LDR R1,=ftt LDR R2,=ftt2 LDR R3,[R1] ; R3 = 1 LDR R4,[R2] ; R4 = 3 LDR R5,[R1, #4]; R5 = 2 LDR R6,[R2, #4]; R6 = 4 â€¦â€¦Src DCD 1,2,3,4,5,6,7,8, MAP Srcftt FIELD 8; 8 Byte = 64 Bit = 2 words, å³fttä¸ºsrcæ•°ç»„çš„å‰ä¸¤ä¸ªå…ƒç´ ftt2 FIELD 8 END è¯¥ä¾‹è¯´æ˜äº†,MAP å’Œ FIELD ä¼ªæŒ‡ä»¤ä¸åˆ†é…å­˜å‚¨ç©ºé—´ï¼Œåªæ˜¯ç»™ç›¸å…³å­˜å‚¨å•å…ƒå–ä¸ªåç§°ï¼ˆæ ‡å·ï¼‰ã€‚ä¾¿äºç¨‹åºä»¥ç»“æ„çš„æ–¹å¼è®¿é—®å¯¹åº”çš„å†…å­˜å•å…ƒã€‚ MISCäº†è§£ DCFD å’Œ DCFDU DCFS å’Œ DCFSU DCQ å’Œ DCQU DCW å’Œ DCWU æ§åˆ¶ç¨‹åºæµå‘ä¼ªæŒ‡ä»¤IFã€ELSE å’Œ ENDIF ä¼ªæŒ‡ä»¤èƒ½æ ¹æ®æ¡ä»¶çš„æˆç«‹ä¸å¦å†³å®šæ˜¯å¦ç¼–è¯‘æŸä¸ªç¨‹åºæ®µã€‚ 12345IF condition ç¨‹åºæ®µ1ELSE ç¨‹åºæ®µ2ENDIF WHILE å’Œ WEND ä¼ªæŒ‡ä»¤æ ¹æ®æ¡ä»¶çš„æˆç«‹ä¸å¦å†³å®šæ˜¯å¦é‡å¤æ±‡ç¼–ä¸€ä¸ªç¨‹åºæ®µã€‚ 123WHILE condition ç¨‹åºæ®µWEND è‹¥ WHILE åé¢çš„é€»è¾‘è¡¨è¾¾å¼ä¸ºçœŸï¼Œåˆ™é‡å¤æ±‡ç¼–è¯¥ç¨‹åºæ®µï¼Œç›´åˆ°é€»è¾‘è¡¨è¾¾å¼ä¸ºå‡ã€‚ 1234567891011 GBLA NUMNUM SETA 1 AREA blockcopy,CODE,READONLY ENTRY WHILE NUM &lt; 3 ...NUM SETA NUM+1 WEND ......... END å…¶å®ƒä¼ªæŒ‡ä»¤å®šä¹‰å¯¹é½æ–¹å¼ä¼ªæŒ‡ä»¤ ALIGNæ ¼å¼ï¼šALIGN {è¡¨è¾¾å¼ï¼Œ{åç§»é‡}}ALIGN æ˜¯è¾¹ç•Œå¯¹é½ä¼ªæŒ‡ä»¤ï¼Œå®ƒå¯ä»¥é€šè¿‡æ·»åŠ å¡«å……å­—èŠ‚çš„æ–¹å¼ï¼Œä½¿å½“å‰ä½ç½®æ»¡è¶³ä¸€å®šçš„å¯¹é½æ–¹å¼ã€‚å…¶ä¸­è¡¨è¾¾å¼ç”¨äºæŒ‡å®šå¯¹é½æ–¹å¼åœ¨ä¸åŒåœºåˆæœ‰ä¸åŒçš„å®šä¹‰ä¾‹å¦‚ ALIGN 4 ;4 å­—èŠ‚å­—å¯¹é½ï¼ŒALIGN åé¢ä¸èƒ½æœ‰ç­‰å· 12345678 AREA OffsetExample, CODE .........ss1 DCB 1 ;å‡è®¾ss1åœ¨0x01000å­—èŠ‚ ALIGN 4,3 ; 4å­—èŠ‚å¯¹é½+3åç§»é‡.ss2 DCB 1 ;ä½¿ç”¨â€œALIGN 4ï¼Œ3â€ä»¥åï¼Œ ;å½“å‰ä½ç½®ä¼šè½¬åˆ°0x01003(0x01000+3)ã€‚ ;ss1å’Œss2ä¹‹é—´ä¼šç©º2ä¸ªå­—èŠ‚ã€‚ æ®µå®šä¹‰ä¼ªæŒ‡ä»¤ AREAAREA ç”¨äºå®šä¹‰ä¸€ä¸ªä»£ç æ®µæˆ–æ•°æ®æ®µã€‚ä¸€ä¸ªæ±‡ç¼–è¯­è¨€ç¨‹åºè‡³å°‘è¦æœ‰ä¸€ä¸ªæ®µã€‚æ ¼å¼ï¼šAREA sectionname {,attr} {,attr}â€¦ sectionname æ˜¯å®šä¹‰çš„ä»£ç æ®µæˆ–æ•°æ®æ®µçš„åç§°ã€‚è‹¥è¯¥åç§°æ˜¯ä»¥æ•°æ®å¼€å¤´çš„ï¼Œåˆ™è¯¥åç§°å¿…é¡»ç”¨â€œï½œâ€æ‹¬èµ·æ¥ï¼Œå¦‚ï½œ 2_datasec ï½œã€‚è¿˜æœ‰ä¸€äº›ä»£ç æ®µçš„åç§°æ˜¯ä¸“æœ‰åç§°ã€‚Attr è¡¨ç¤ºä»£ç æˆ–æ•°æ®æ®µçš„å±æ€§ï¼Œå¤šä¸ªå±æ€§ç”¨çŸ­å·åˆ†éš”ï¼Œå¸¸ç”¨çš„å±æ€§å¦‚ä¸‹ å±æ€§ å«ä¹‰ å¤‡æ³¨ CODE ä»£ç æ®µ é»˜è®¤è¯»/å†™å±æ€§ä¸º READONLY DATA æ•°æ®æ®µ é»˜è®¤è¯»/å†™å±æ€§ä¸º READWRITE NOINIT æ•°æ®æ®µ æŒ‡å®šæ­¤æ•°æ®æ®µä»…ä»…ä¿ç•™äº†å†…å­˜å•å…ƒï¼Œè€Œæ²¡æœ‰å°†å„åˆå§‹å€¼å†™å…¥å†…å­˜å•å…ƒã€‚ READONLY æœ¬æ®µä¸ºåªè¯» READWRITE æœ¬æ®µä¸ºå¯è¯»å¯å†™ ALIGN è¡¨è¾¾å¼ ELF çš„ä»£ç æ®µå’Œæ•°æ®æ®µä¸ºå­—å¯¹é½ COMMON å¤šæºæ–‡ä»¶å…±äº«æ®µ CODE16 å’Œ CODE32CODE16 å‘Šè¯‰æ±‡ç¼–ç¼–è¯‘å™¨åé¢çš„æŒ‡ä»¤åºåˆ—ä¸º 16 ä½çš„ Thumb æŒ‡ä»¤ã€‚CODE32 å‘Šè¯‰æ±‡ç¼–ç¼–è¯‘å™¨åé¢çš„æŒ‡ä»¤åºåˆ—ä¸º 32 ä½çš„ ARM æŒ‡ä»¤ã€‚æ³¨æ„ï¼šCODE16 å’Œ CODE32 åªæ˜¯å‘Šè¯‰ç¼–è¯‘å™¨åé¢æŒ‡ä»¤çš„ç±»å‹ï¼Œè¯¥ä¼ªæ“ä½œæœ¬èº«ä¸è¿›è¡Œç¨‹åºçŠ¶æ€çš„åˆ‡æ¢ 1234567891011AREA ChangeState, CODE, READONLY ENTRY CODE32 ;ä¸‹é¢ä¸º32ä½ARMæŒ‡ä»¤ LDR R0,=start+1 ;å°†è·³è½¬åœ°å€æ”¾å…¥å¯„å­˜å™¨R0 BX R0 ;ç¨‹åºè·³è½¬åˆ°æ–°çš„ä½ç½®æ‰§è¡Œ â€¦â€¦ ;å¹¶å°†å¤„ç†å™¨åˆ‡æ¢åˆ°Thumbå·¥ä½œçŠ¶æ€ CODE16 ;ä¸‹é¢ä¸º16ä½ThumbæŒ‡ä»¤start MOV R1,#10 â€¦â€¦. END ENTRY &amp; ENDENTRY å®šä¹‰ç¨‹åºå…¥å£ç‚¹ä¼ªæŒ‡ä»¤ ,æŒ‡å®šç¨‹åºçš„å…¥å£ç‚¹ã€‚ æ³¨æ„ï¼šä¸€ä¸ªç¨‹åºï¼ˆå¯åŒ…å«å¤šä¸ªæºæ–‡ä»¶ï¼‰ä¸­è‡³å°‘è¦æœ‰ä¸€ä¸ª ENTRYï¼ˆå¯ä»¥æœ‰å¤šä¸ª ENTRYï¼Œå½“æœ‰å¤šä¸ª ENTRY å…¥å£æ—¶ï¼Œç¨‹åºçš„çœŸæ­£å…¥å£ç‚¹ç”±é“¾æ¥å™¨æŒ‡å®šï¼‰ï¼Œä½†ä¸€ä¸ªæºæ–‡ä»¶ä¸­æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ª ENTRYï¼ˆå¯ä»¥æ²¡æœ‰ ENTRYï¼‰ END ä¼ªæŒ‡ä»¤ç”¨äºé€šçŸ¥ç¼–è¯‘å™¨æ±‡ç¼–å·¥ä½œåˆ°æ­¤ç»“æŸï¼Œä¸å†å¾€ä¸‹æ±‡ç¼–äº†ã€‚æ¯ä¸€ä¸ªæ±‡ç¼–æºç¨‹åºéƒ½å¿…é¡»åŒ…å« END ä¼ªæ“ä½œï¼Œä»¥è¡¨æ˜æœ¬æºç¨‹åºçš„ç»“æŸã€‚ EXPORT &amp; IMPORT &amp; EXTERNEXPORTå¤–éƒ¨å¯å¼•ç”¨ç¬¦å·å£°æ˜ä¼ªæŒ‡ä»¤ EXPORTï¼ˆæˆ– GLOBALï¼‰å£°æ˜ä¸€ä¸ªæºæ–‡ä»¶ä¸­çš„ç¬¦å·ï¼Œä½¿æ­¤ç¬¦å·å¯ä»¥è¢«å…¶ä»–æºæ–‡ä»¶å¼•ç”¨ã€‚æ ¼å¼ï¼šEXPORT/GLOBAL symbol {[weak]}symbolï¼šå£°æ˜çš„ç¬¦å·çš„åç§°ã€‚ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰[weak]ï¼šå£°æ˜å…¶ä»–åŒåç¬¦å·ä¼˜å…ˆäºæœ¬ç¬¦å·è¢«å¼•ç”¨ã€‚ 123 AREA exampleï¼ŒCODEï¼ŒREADONLY EXPORT DoAdd;ç”³æ˜ä¸€ä¸ªå…¨å±€å¼•ç”¨çš„æ ‡å· DoAddDoAdd ADD R0ï¼ŒR0ï¼ŒR1 IMPORTå½“åœ¨ä¸€ä¸ªæºæ–‡ä»¶ä¸­éœ€è¦ä½¿ç”¨å¦å¤–ä¸€ä¸ªæºæ–‡ä»¶çš„å¤–éƒ¨å¯å¼•ç”¨ç¬¦å·æ—¶ï¼Œåœ¨è¢«å¼•ç”¨çš„ç¬¦å·å‰é¢ï¼Œå¿…é¡»ä½¿ç”¨ä¼ªæŒ‡ä»¤ IMPORT å¯¹å…¶è¿›è¡Œå£°æ˜ï¼šå£°æ˜ä¸€ä¸ªç¬¦å·æ˜¯åœ¨å…¶ä»–æºæ–‡ä»¶ä¸­å®šä¹‰çš„ã€‚æ ¼å¼ï¼šIMPORT symbol{[weak]}å¦‚æœæºæ–‡ä»¶å£°æ˜äº†ä¸€ä¸ªå¼•ç”¨ç¬¦å·ï¼Œåˆ™æ— è®ºå½“å‰æºæ–‡ä»¶ä¸­ç¨‹åºæ˜¯å¦çœŸæ­£åœ°ä½¿ç”¨äº†è¯¥ç¬¦å·ï¼Œè¯¥ç¬¦å·å‡ä¼šè¢«åŠ å…¥åˆ°å½“å‰æºæ–‡ä»¶çš„ç¬¦å·è¡¨ä¸­ã€‚symbolï¼šå£°æ˜çš„ç¬¦å·çš„åç§°ã€‚[weak]ï¼šå½“æ²¡æœ‰æŒ‡å®šæ­¤é¡¹æ—¶ï¼Œå¦‚æœ symbol åœ¨æ‰€æœ‰çš„æºæ–‡ä»¶ä¸­éƒ½æ²¡æœ‰è¢«å®šä¹‰ï¼Œåˆ™è¿æ¥å™¨ä¼šæŠ¥å‘Šé”™è¯¯ã€‚å½“æŒ‡å®šæ­¤é¡¹æ—¶ï¼Œå¦‚æœ symbol åœ¨æ‰€æœ‰çš„æºæ–‡ä»¶ä¸­éƒ½æ²¡æœ‰è¢«å®šä¹‰ï¼Œåˆ™è¿æ¥å™¨ä¸ä¼šæŠ¥å‘Šé”™è¯¯ï¼Œè€Œæ˜¯è¿›è¡Œä¸‹é¢çš„æ“ä½œã€‚å¦‚æœè¯¥ç¬¦å·è¢« B æˆ–è€… BL æŒ‡ä»¤å¼•ç”¨ï¼Œåˆ™è¯¥ç¬¦å·è¢«è®¾ç½®æˆä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼Œè¯¥ B æˆ– BL æŒ‡ä»¤ç›¸å½“äºä¸€æ¡ NOP æŒ‡ä»¤ã€‚å…¶ä»–æƒ…å†µä¸‹æ­¤ç¬¦å·è¢«è®¾ç½®æˆ 0ã€‚ 1234AREA Init, CODE, READONLYIMPORT main â€¦END EXTERNEXTERN ä¼ªæŒ‡ä»¤ä¸ IMPORT ä¼ªæŒ‡ä»¤çš„åŠŸèƒ½åŸºæœ¬ç›¸åŒï¼Œä½†å¦‚æœå½“å‰æºæ–‡ä»¶ä¸­çš„ç¨‹åºå®é™…å¹¶æœªä½¿ç”¨è¯¥ç¬¦å·ï¼Œåˆ™è¯¥ç¬¦å·ä¸ä¼šåŠ å…¥åˆ°å½“å‰æºæ–‡ä»¶çš„ç¬¦å·è¡¨ä¸­ã€‚å…¶å®ƒä¸ IMPORT ç›¸åŒã€‚ GET &amp; INCLUDEGETï¼ˆæˆ– INCLUDEï¼‰GET ä¼ªæŒ‡ä»¤ç”¨äºå°†ä¸€ä¸ªæºæ–‡ä»¶åŒ…å«åˆ°å½“å‰çš„æºæ–‡ä»¶ä¸­ï¼Œå¹¶å°†è¢«åŒ…å«çš„æºæ–‡ä»¶åœ¨å½“å‰ä½ç½®è¿›è¡Œæ±‡ç¼–ã€‚è¯­æ³•æ ¼å¼ï¼šGET æ–‡ä»¶åå¯ä»¥ä½¿ç”¨ INCLUDE ä»£æ›¿ GETã€‚GET ä¼ªæŒ‡ä»¤åªèƒ½ç”¨äºåŒ…å«æºæ–‡ä»¶ï¼ŒåŒ…å«ç›®æ ‡æ–‡ä»¶åˆ™éœ€è¦ä½¿ç”¨ INCBIN ä¼ªæŒ‡ä»¤ã€‚ ä¸ ARM æŒ‡ä»¤ç›¸å…³çš„å®æŒ‡ä»¤å®MACRO å’Œ MEND ä¼ªæŒ‡ä»¤å¯ä»¥ä¸ºä¸€ä¸ªç¨‹åºæ®µå®šä¹‰ä¸€ä¸ªåç§°ã€‚è¿™æ ·ï¼Œåœ¨æ±‡ç¼–è¯­è¨€åº”ç”¨ç¨‹åºä¸­ï¼Œå°±å¯ä»¥é€šè¿‡è¿™ä¸ªåç§°æ¥ä½¿ç”¨å®ƒæ‰€ä»£è¡¨çš„ç¨‹åºæ®µï¼Œå³å½“ç¨‹åºåšæ±‡ç¼–æ—¶ï¼Œè¯¥åç§°å°†è¢«æ›¿æ¢ä¸ºå…¶æ‰€ä»£è¡¨çš„ç¨‹åºæ®µã€‚ 1234MACRO $æ ‡å· å®å $å‚æ•°1ï¼Œ $å‚æ•°2ï¼Œâ€¦.. ç¨‹åºæ®µï¼ˆå®å®šä¹‰ä½“ï¼‰MEND $æ ‡å·ï¼šä¸ºä¸»æ ‡å·ï¼Œå®å†…çš„æ‰€æœ‰å…¶å®ƒæ ‡å·å¿…é¡»ç”±ä¸»æ ‡å·ç»„æˆ;å®åï¼šå®åç§°ï¼Œä¸ºå®åœ¨ç¨‹åºä¸­çš„å¼•ç”¨å;$å‚æ•° 1ï¼Œ$å‚æ•°2ï¼šå®ä¸­å¯ä»¥ä½¿ç”¨çš„å‚æ•°ã€‚å®ä¸­çš„æ‰€æœ‰æ ‡å·å¿…é¡»åœ¨å‰é¢å† ä»¥ç¬¦å·â€œ$â€ã€‚MACROã€ MEND ä¼ªæŒ‡ä»¤å¯ä»¥åµŒå¥—ä½¿ç”¨ 12345678 MACRO ;å®å®šä¹‰æŒ‡ä»¤$MDATA MAXNUM $NUM1,$NUM2 ;ä¸»æ ‡å·ï¼Œå®åï¼Œå‚æ•° è¯­å¥æ®µ$MDATA.WAY1 ; å®å†…æ ‡å·ï¼Œå¿…é¡»å†™ä¸ºâ€œä¸»æ ‡å·.å®å†…æ ‡å·â€ è¯­å¥æ®µ$MDATA.WAY2 ; å®å†…æ ‡å· è¯­å¥æ®µ MEND ; å®ç»“æŸæŒ‡ä»¤ MEXIT ç”¨äºä»å®å®šä¹‰ä¸­è·³è½¬å‡ºå» å®æŒ‡ä»¤åœ¨ ARM ä¸­ï¼Œè¿˜æœ‰ä¸€ç§æ±‡ç¼–å™¨å†…ç½®çš„æ— å‚æ•°å’Œæ ‡å·çš„å®â€”â€”å®æŒ‡ä»¤ã€‚åœ¨æ±‡ç¼–æ—¶ï¼Œè¿™äº›å®æŒ‡ä»¤è¢«æ›¿æ¢æˆä¸€æ¡æˆ–ä¸¤æ¡çœŸæ­£çš„ ARM æˆ– Thumb æŒ‡ä»¤ã€‚ARM å®æŒ‡ä»¤æœ‰å››æ¡ï¼Œåˆ†åˆ«æ˜¯ï¼š ADRï¼šå°èŒƒå›´çš„åœ°å€è¯»å–å®æŒ‡ä»¤ï¼› ADRLï¼šä¸­ç­‰èŒƒå›´çš„åœ°å€è¯»å–å®æŒ‡ä»¤ï¼› LDRï¼šå¤§èŒƒå›´çš„åœ°å€è¯»å–å®æŒ‡ä»¤ï¼› NOPï¼šç©ºæ“ä½œå®æŒ‡ä»¤ã€‚ ADR æŒ‡ä»¤ç”¨äºå°†ä¸€ä¸ª è¿‘åœ°å€å€¼ ä¼ é€’åˆ°ä¸€ä¸ªå¯„å­˜å™¨ä¸­ã€‚æ ¼å¼ï¼šADR{cond} &lt;reg&gt;, &lt;expr&gt;reg ä¸ºç›®æ ‡å¯„å­˜å™¨åç§°ï¼›expr ä¸ºè¡¨è¾¾å¼ã€‚è¯¥è¡¨è¾¾å¼é€šå¸¸æ˜¯ç¨‹åºä¸­ä¸€ä¸ªè¡¨ç¤ºå­˜å‚¨ä½ç½®çš„ åœ°å€æ ‡å·ã€‚è¯¥å®æŒ‡ä»¤çš„åŠŸèƒ½æ˜¯æŠŠæ ‡å·æ‰€è¡¨ç¤ºçš„åœ°å€ä¼ é€’åˆ°ç›®æ ‡å¯„å­˜å™¨ä¸­ã€‚æ±‡ç¼–å™¨åœ¨æ±‡ç¼–æ—¶ï¼Œå°†æŠŠ ADR å®æŒ‡ä»¤æ›¿æ¢æˆä¸€æ¡çœŸæ­£çš„ ADD æˆ– SUB æŒ‡ä»¤ï¼Œä»¥å½“å‰çš„ PC å€¼å‡å»æˆ–åŠ ä¸Š expr ä¸ PC ä¹‹é—´çš„åç§»é‡å¾—åˆ°æ ‡å·çš„åœ°å€ï¼Œå¹¶å°†å…¶ä¼ é€’åˆ°ç›®æ ‡å¯„å­˜å™¨ã€‚è‹¥ä¸èƒ½ç”¨ä¸€æ¡æŒ‡ä»¤å®ç°ï¼Œåˆ™äº§ç”Ÿé”™è¯¯ï¼Œç¼–è¯‘å¤±è´¥ã€‚ ä¸­ç­‰èŒƒå›´çš„åœ°å€è¯»å–å®æŒ‡ä»¤ ADRL ç±»ä¼¼äº ADRï¼Œä½†å¯ä»¥æŠŠæ›´è¿œçš„åœ°å€èµ‹ç»™ç›®æ ‡å¯„å­˜å™¨ã€‚è¯¥æŒ‡ä»¤åªèƒ½åœ¨ ARM çŠ¶æ€ä¸‹ä½¿ç”¨ï¼Œåœ¨ Thumb çŠ¶æ€ä¸‹ä¸èƒ½ä½¿ç”¨ã€‚æ±‡ç¼–æ—¶ï¼ŒADRL å®æŒ‡ä»¤ç”±æ±‡ç¼–å™¨æ›¿æ¢æˆä¸¤æ¡åˆé€‚çš„æŒ‡ä»¤ã€‚å¤§èŒƒå›´çš„åœ°å€è¯»å–å®æŒ‡ä»¤LDR å¤§èŒƒå›´çš„åœ°å€è¯»å–å®æŒ‡ä»¤LDRæ ¼å¼ï¼šLDR{cond} reg,={expr | label - expr} regï¼šç›®æ ‡å¯„å­˜å™¨åç§°ï¼› exprï¼š32ä½å¸¸æ•°ï¼› label â€“ exprï¼šä¸ºåœ°å€è¡¨è¾¾å¼ã€‚ ç¨‹åºç»å¸¸ç”¨è¿™æ¡æŒ‡ä»¤æŠŠä¸€ä¸ªåœ°å€ä¼ é€’åˆ°å¯„å­˜å™¨regä¸­ã€‚æ±‡ç¼–å™¨åœ¨å¯¹è¿™ç§æŒ‡ä»¤è¿›è¡Œæ±‡ç¼–æ—¶ï¼Œä¼šæ ¹æ®æŒ‡ä»¤ä¸­exprçš„å€¼çš„å¤§å°æ¥æŠŠè¿™æ¡æŒ‡ä»¤æ›¿æ¢ä¸ºåˆé€‚çš„æŒ‡ä»¤ã€‚ ä¸ARMæŒ‡ä»¤çš„LDRçš„åŒºåˆ«ï¼šä¼ªæŒ‡ä»¤LDRçš„å‚æ•°æœ‰â€œ=â€ TODOâ€¦Maybe never (:Ğ·)âˆ )","link":"/UESTC/ARM-Processor/Ch4-1ARM%E4%BC%AA%E6%8C%87%E4%BB%A4%E5%8F%8A%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/"},{"title":"Computer Networks Overview","text":"p { text-indent: 2em; } è®¡ç®—æœºç½‘ç»œåœ¨ä¿¡æ¯æ—¶ä»£çš„ä½œç”¨è®¡ç®—æœºç½‘ç»œå·²ç»ç”±é€šä¿¡åŸºç¡€è®¾æ–½å‘å±•æˆä¸ºä¸€ç§é‡è¦çš„ä¿¡æ¯æœåŠ¡åŸºç¡€è®¾æ–½ å› ç‰¹ç½‘æ¦‚è¿°åŸºæœ¬æ¦‚å¿µ NetWork ç½‘ç»œ,ç”±è‹¥å¹²ç»“ç‚¹(Node)å’Œé“¾è·¯(Link)ç»„æˆ internet äº’è”ç½‘/äº’è¿ç½‘,å¤šä¸ªç½‘ç»œå¯ä»¥é€šè¿‡è·¯ç”±å™¨(Router)äº’è”èµ·æ¥,å½¢æˆä¸€ä¸ªè¦†ç›–èŒƒå›´æ›´å¤§çš„ç½‘ç»œ,äº’è”ç½‘æ˜¯ç”±ç½‘ç»œå’Œç½‘ç»œä¹‹é—´äº’è”è€Œæˆçš„,æ˜¯ç½‘ç»œçš„ç½‘ç»œ(Network of Networks) Internet å› ç‰¹ç½‘ä¸–ç•Œä¸Šæœ€å¤§çš„äº’è”ç½‘ç»œ. Host ä¸»æœº,è¿æ¥åˆ°å› ç‰¹ç½‘ä¸Šçš„è®¡ç®—æœº `` internet å’Œ Internet çš„åŒºåˆ« `` internet(äº’è”ç½‘æˆ–äº’è¿ç½‘)æ˜¯ä¸€ä¸ªé€šç”¨åè¯ï¼Œå®ƒæ³›æŒ‡å¤šä¸ªè®¡ç®—æœºç½‘ç»œäº’è¿è€Œæˆçš„ç½‘ç»œã€‚åœ¨è¿™äº›ç½‘ç»œä¹‹é—´çš„é€šä¿¡åè®®å¯ä»¥æ˜¯ä»»æ„çš„ã€‚ Internetï¼ˆå› ç‰¹ç½‘ï¼‰åˆ™æ˜¯ä¸€ä¸ªä¸“ç”¨åè¯ï¼Œå®ƒæŒ‡å½“å‰å…¨çƒæœ€å¤§çš„ã€å¼€æ”¾çš„ã€ç”±ä¼—å¤šç½‘ç»œäº’è¿è€Œæˆçš„ç‰¹å®šè®¡ç®—æœºç½‘ç»œï¼Œå®ƒé‡‡ç”¨ TCP/IP åè®®æ—ä½œä¸ºé€šä¿¡çš„è§„åˆ™ï¼Œå…¶å‰èº«æ˜¯ç¾å›½çš„ ARPANETã€‚ ä»»æ„æŠŠå‡ ä¸ªè®¡ç®—æœºç½‘ç»œäº’è¿èµ·æ¥ï¼ˆä¸ç®¡é‡‡ç”¨ä»€ä¹ˆåè®®ï¼‰ï¼Œå¹¶èƒ½å¤Ÿç›¸äº’é€šä¿¡ï¼Œè¿™æ ·æ„æˆçš„æ˜¯ä¸€ä¸ªäº’è¿ç½‘(internet) ï¼Œè€Œä¸æ˜¯äº’è”ç½‘(Internet)ã€‚ `` Internet å‘å±•çš„ä¸‰ä¸ªé˜¶æ®µ ISP(äº’è”ç½‘æœåŠ¡æä¾›å•†)Internetä¸Šçš„ä¸»æœºé€šè¿‡ISPæ¥å…¥Internet,ä¹‹åæ‰èƒ½äº’ç›¸é€šä¿¡;ISPå¯ä»¥ä»å› ç‰¹ç½‘ç®¡ç†æœºæ„ç”³è¯·åˆ°æˆå—çš„ IP åœ°å€,åŒæ—¶æ‹¥æœ‰é€šä¿¡çº¿è·¯ä»¥åŠè·¯ç”±å™¨ç­‰è”ç½‘è®¾å¤‡.æœºæ„/ä¸ªäººç¼´çº³ä¸€å®šçš„è´¹ç”¨,å°±å¯ä»¥ä»ISPç§Ÿç”¨IP åœ°å€,å¹¶é€šè¿‡ISPæ¥å…¥Internetã€‚ä¸­å›½çš„ä¸»æµISPæœ‰:ä¸­å›½ç”µä¿¡ã€ä¸­å›½ç§»åŠ¨ã€ä¸­å›½è”é€šç­‰ ç¬¬ä¸€å±‚ ISPï¼ˆTier 1 ISPï¼‰ï¼šè¿™äº›æ˜¯å…¨çƒäº’è”ç½‘çš„ä¸»å¹²ç½‘ç»œè¿è¥å•†ï¼Œå®ƒä»¬æ‹¥æœ‰éå¸ƒå…¨çƒçš„ç½‘ç»œåŸºç¡€è®¾æ–½ã€‚è¿™äº›å…¬å¸çš„ç½‘ç»œé€šå¸¸è¦†ç›–äº†å…¨çƒçš„ä¸»è¦åœ°åŒºå’ŒåŸå¸‚ï¼ŒåŒ…æ‹¬åŒ—ç¾ã€æ¬§æ´²ã€äºšæ´²ã€æ¾³å¤§åˆ©äºšç­‰ã€‚ã€‚ç¬¬ä¸€å±‚ ISP ä¹‹é—´é€šè¿‡å…è´¹çš„äº’è”ç½‘ç»œï¼ˆPeeringï¼‰åè®®è¿›è¡Œæ•°æ®äº¤æ¢ï¼Œä¸éœ€è¦å‘å…¶ä»– ISP æ”¯ä»˜è´¹ç”¨ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›çŸ¥åçš„ç¬¬ä¸€å±‚ ISP åŠå…¶æ€»éƒ¨æ‰€åœ¨åœ°ï¼š AT&amp;Tï¼šæ€»éƒ¨ä½äºç¾å›½å¾·å…‹è¨æ–¯å·è¾¾æ‹‰æ–¯ã€‚ Verizonï¼šæ€»éƒ¨ä½äºç¾å›½çº½çº¦å·çº½çº¦ã€‚ Level 3 Communicationsï¼šæ€»éƒ¨ä½äºç¾å›½ç§‘ç½—æ‹‰å¤šå·å¸ƒéš†è²å°”å¾·ï¼Œç°å·²è¢« CenturyLinkï¼ˆç°ä¸º Lumen Technologiesï¼‰æ”¶è´­ã€‚ NTT Communicationsï¼šæ€»éƒ¨ä½äºæ—¥æœ¬ä¸œäº¬ã€‚ Telia Companyï¼šæ€»éƒ¨ä½äºç‘å…¸æ–¯å¾·å“¥å°”æ‘©ã€‚ ç¬¬äºŒå±‚ ISPï¼ˆTier 2 ISPï¼‰ï¼šè¿™äº› ISP æ‹¥æœ‰è‡ªå·±çš„ç½‘ç»œåŸºç¡€è®¾æ–½ï¼Œä½†æ˜¯ä¸è¶³ä»¥è¦†ç›–å…¨çƒï¼Œæ‰€ä»¥å®ƒä»¬éœ€è¦è´­ä¹°ç¬¬ä¸€å±‚ ISP çš„æœåŠ¡ï¼Œä»¥ä¾¿å°†æ•°æ®ä¼ è¾“åˆ°å…¨çƒçš„å…¶ä»–åœ°æ–¹ã€‚ç¬¬äºŒå±‚ ISP é€šå¸¸ä¼šå‘æœ¬åœ°æˆ–åŒºåŸŸçš„å®¢æˆ·æä¾›æœåŠ¡ã€‚ ç¬¬ä¸‰å±‚ ISPï¼ˆTier 3 ISPï¼‰ï¼šè¿™äº› ISP é€šå¸¸æ²¡æœ‰è‡ªå·±çš„ç½‘ç»œåŸºç¡€è®¾æ–½ï¼Œè€Œæ˜¯è´­ä¹°ç¬¬äºŒå±‚ ISP çš„æœåŠ¡ï¼Œç„¶åå°†å…¶è½¬å”®ç»™æœ€ç»ˆç”¨æˆ·ã€‚ç¬¬ä¸‰å±‚ ISP é€šå¸¸ä¼šæä¾›ä¸€äº›å¢å€¼æœåŠ¡ï¼Œå¦‚ç”µå­é‚®ä»¶ã€ç½‘é¡µæ‰˜ç®¡å’Œè™šæ‹Ÿä¸“ç”¨ç½‘ç»œï¼ˆVPNï¼‰ã€‚ Internet çš„æ ‡å‡†åŒ–å·¥ä½œ å› ç‰¹ç½‘çš„æ ‡å‡†åŒ–å·¥ä½œå¯¹å› ç‰¹ç½‘çš„å‘å±•èµ·åˆ°äº†éå¸¸é‡è¦çš„ä½œç”¨ã€‚ å› ç‰¹ç½‘åœ¨æŒ‡å®šå…¶æ ‡å‡†ä¸Šçš„ä¸€ä¸ªå¾ˆå¤§çš„ç‰¹ç‚¹æ˜¯é¢å‘å…¬ä¼—ã€‚ å› ç‰¹ç½‘æ‰€æœ‰çš„ RFC(Request For Comments)æŠ€æœ¯æ–‡æ¡£éƒ½å¯ä»å› ç‰¹ç½‘ä¸Šå…è´¹ä¸‹è½½ï¼› ä»»ä½•äººéƒ½å¯ä»¥éšæ—¶ç”¨ç”µå­é‚®ä»¶å‘è¡¨å¯¹æŸä¸ªæ–‡æ¡£çš„æ„è§æˆ–å»ºè®®ã€‚ å› ç‰¹ç½‘åä¼š ISOC æ˜¯ä¸€ä¸ªå›½é™…æ€§ç»„ç»‡ï¼Œå®ƒè´Ÿè´£å¯¹å› ç‰¹ç½‘è¿›è¡Œå…¨é¢ç®¡ç†ï¼Œä»¥åŠåœ¨ä¸–ç•ŒèŒƒå›´å†…ä¿ƒè¿›å…¶å‘å±•å’Œä½¿ç”¨ã€‚ å› ç‰¹ç½‘ä½“ç³»ç»“æ„å§”å‘˜ä¼š IABï¼Œè´Ÿè´£ç®¡ç†å› ç‰¹ç½‘æœ‰å…³åè®®çš„å¼€å‘ï¼› å› ç‰¹ç½‘å·¥ç¨‹éƒ¨ IETFï¼Œè´Ÿè´£ç ”ç©¶ä¸­çŸ­æœŸå·¥ç¨‹é—®é¢˜ï¼Œä¸»è¦é’ˆå¯¹åè®®çš„å¼€å‘å’Œæ ‡å‡†åŒ–ï¼› å› ç‰¹ç½‘ç ”ç©¶éƒ¨ IRTFï¼Œä»äº‹ç†è®ºæ–¹é¢çš„ç ”ç©¶å’Œå¼€å‘ä¸€äº›éœ€è¦é•¿æœŸè€ƒè™‘çš„é—®é¢˜ã€‚ åˆ¶å®šå› ç‰¹ç½‘çš„æ­£å¼æ ‡å‡†éœ€è¦å››ä¸ªé˜¶æ®µ: å› ç‰¹ç½‘è‰æ¡ˆ å»ºè®®æ ‡å‡†(è¯¥é˜¶æ®µçš„æ ‡å‡†ä¼šå¼€å§‹å†™å…¥ RFC æ–‡æ¡£) è‰æ¡ˆæ ‡å‡† å› ç‰¹ç½‘æ ‡å‡† Internet çš„ç»„æˆè¾¹ç¼˜éƒ¨åˆ† ç”±æ‰€æœ‰è¿æ¥åœ¨å› ç‰¹ç½‘ä¸Šçš„ä¸»æœºç»„æˆ.è¿™éƒ¨åˆ†æ˜¯ç”¨æˆ·ç›´æ¥ä½¿ç”¨çš„,ç”¨äºé€šä¿¡å’Œèµ„æºå…±äº«.æ ¸å¿ƒéƒ¨åˆ† ç”±å¤§é‡ç½‘ç»œå’Œè¿æ¥è¿™äº›ç½‘ç»œçš„è·¯ç”±å™¨ç»„æˆ,è¿™éƒ¨åˆ†æ˜¯ä¸ºè¾¹ç¼˜éƒ¨åˆ†æä¾›æœåŠ¡çš„(æä¾›è¿é€šæ€§å’Œäº¤æ¢). è·¯ç”±å™¨æ˜¯ä¸€ç§ä¸“ç”¨è®¡ç®—æœºï¼Œä½†æˆ‘ä»¬ä¸ç§°å®ƒä¸ºä¸»æœºï¼Œè·¯ç”±å™¨æ˜¯å®ç°åˆ†ç»„äº¤æ¢çš„å…³é”®æ„å»ºï¼Œå…¶ä»»åŠ¡æ˜¯è½¬å‘æ”¶åˆ°çš„åˆ†ç»„ï¼Œè¿™æ˜¯ç½‘ç»œæ ¸å¿ƒæœ€é‡è¦çš„éƒ¨åˆ†ã€‚å¤„åœ¨äº’è”ç½‘è¾¹ç¼˜çš„éƒ¨åˆ†å°±æ˜¯è¿æ¥åœ¨äº’è”ç½‘ä¸Šçš„æ‰€æœ‰çš„ä¸»æœºã€‚è¿™äº›ä¸»æœºåˆç§°ä¸ºç«¯ç³»ç»Ÿ(end system)ç«¯ç³»ç»Ÿåœ¨åŠŸèƒ½ä¸Šå¯èƒ½æœ‰å¾ˆå¤§çš„å·®åˆ«ï¼š å°çš„ç«¯ç³»ç»Ÿå¯ä»¥æ˜¯ä¸€å°æ™®é€šä¸ªäººç”µè„‘ï¼Œå…·æœ‰ä¸Šç½‘åŠŸèƒ½çš„æ™ºèƒ½æ‰‹æœºï¼Œç”šè‡³æ˜¯ä¸€ä¸ªå¾ˆå°çš„ç½‘ç»œæ‘„åƒå¤´ã€‚ å¤§çš„ç«¯ç³»ç»Ÿåˆ™å¯ä»¥æ˜¯ä¸€å°éå¸¸æ˜‚è´µçš„å¤§å‹è®¡ç®—æœºã€‚ ç«¯ç³»ç»Ÿçš„æ‹¥æœ‰è€…å¯ä»¥æ˜¯ä¸ªäººï¼Œä¹Ÿå¯ä»¥æ˜¯å•ä½ï¼ˆå¦‚å­¦æ ¡ã€ä¼ä¸šã€æ”¿åºœæœºå…³ç­‰ï¼‰ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ˜¯æŸä¸ª ISPã€‚ ä¸‰ç§äº¤æ¢æ–¹å¼ç½‘ç»œä¸­çš„æ ¸å¿ƒéƒ¨åˆ†è¦å‘ç½‘ç»œè¾¹ç¼˜ä¸­çš„å¤§é‡ä¸»æœºæä¾›è¿é€šæ€§ï¼Œä½¿è¾¹ç¼˜éƒ¨åˆ†ä¸­çš„ä»»ä½•ä¸€ä¸ªä¸»æœºéƒ½èƒ½å¤Ÿå‘å…¶ä»–ä¸»æœºé€šä¿¡ï¼ˆå³ä¼ é€æˆ–æ¥æ”¶å„ç§å½¢å¼çš„æ•°æ®ï¼‰ã€‚ åœ¨ç½‘ç»œæ ¸å¿ƒéƒ¨åˆ†èµ·ç‰¹æ®Šä½œç”¨çš„æ˜¯è·¯ç”±å™¨(router)ã€‚è·¯ç”±å™¨æ˜¯å®ç°åˆ†ç»„äº¤æ¢ (packet switching) çš„å…³é”®æ„ä»¶ï¼Œå…¶ä»»åŠ¡æ˜¯è½¬å‘æ”¶åˆ°çš„åˆ†ç»„ï¼Œè¿™æ˜¯ç½‘ç»œæ ¸å¿ƒéƒ¨åˆ†æœ€é‡è¦çš„åŠŸèƒ½ã€‚ ç”µè·¯äº¤æ¢ Circuit Switchingä¼ ç»Ÿçš„ç”µè¯ä¸¤ä¸¤ç›¸è¿,ä½†å½“ç”¨æˆ·å¾ˆå¤šæ—¶,è¿™ç§æ–¹å¼å°±ä¸å¯è¡Œäº†,å› æ­¤å¼•å…¥ä¸­é—´è®¾å¤‡(ç”µè¯äº¤æ¢æœº),ä½¿ç”¨ç”µè¯äº¤æ¢æœºæ¥é€šç”µè¯çº¿çš„æ–¹å¼ç§°ä¸ºç”µè·¯äº¤æ¢ã€‚ ä»é€šä¿¡èµ„æºçš„åˆ†é…è§’åº¦æ¥çœ‹,äº¤æ¢å°±æ˜¯æŒ‰ç…§æŸç§æ–¹å¼åŠ¨æ€åœ°åˆ†é…ä¼ è¾“çº¿è·¯çš„èµ„æº ç”µè·¯äº¤æ¢çš„ä¸‰ä¸ªæ­¥éª¤æ˜¯:å»ºç«‹è¿æ¥(åˆ†é…é€šä¿¡èµ„æº),ä¼ è¾“æ•°æ®(ä¸€ç›´å ç”¨é€šä¿¡èµ„æº),é‡Šæ”¾è¿æ¥(å½’è¿˜é€šä¿¡èµ„æº) è€Œå½“ä½¿ç”¨ç”µè·¯äº¤æ¢æ¥ä¼ é€è®¡ç®—æœºæ•°æ®æ—¶ï¼Œå…¶çº¿è·¯çš„ä¼ è¾“æ•ˆç‡å¾€å¾€å¾ˆä½ã€‚è¿™æ˜¯å› ä¸ºè®¡ç®—æœºæ•°æ®æ˜¯çªå‘å¼åœ°å‡ºç°åœ¨ä¼ è¾“çº¿è·¯ä¸Šçš„ã€‚æ‰€ä»¥è®¡ç®—æœºé€šå¸¸é‡‡ç”¨çš„æ˜¯åˆ†ç»„äº¤æ¢ï¼Œè€Œä¸æ˜¯çº¿è·¯äº¤æ¢ åˆ†ç»„äº¤æ¢ Packet Switching æŠ¥æ–‡: ä¿¡æ¯äº¤æ¢çš„åŸºæœ¬å•ä½,åœ¨ç½‘ç»œä¸­ä¼ è¾“çš„ä¿¡æ¯å•ä½ åˆ†ç»„: ä¸ºäº†ä¼ è¾“æ–¹ä¾¿,å°†æŠ¥æ–‡åˆ’åˆ†ä¸ºå›ºå®šé•¿åº¦çš„æ•°æ®å—(åˆ†ç»„,packet),åœ¨æ¯ä¸€ä¸ªæ•°æ®æ®µå‰é¢,åŠ ä¸Šä¸€äº›ç”±å¿…è¦çš„æ§åˆ¶ä¿¡æ¯ç»„æˆçš„é¦–éƒ¨(æŠ¥å¤´),ç§°ä¸ºåˆ†ç»„ã€‚ å‘é€æ–¹:æ„é€ åˆ†ç»„,å‘é€åˆ†ç»„ è·¯ç”±å™¨:ç¼“å­˜åˆ†ç»„,è½¬å‘åˆ†ç»„(åˆ†ç»„è½¬å‘) æ¥æ”¶æ–¹:æ¥å—åˆ†ç»„,è¿˜åŸæŠ¥æ–‡ åœ¨è·¯ç”±å™¨çš„è¾“å…¥å’Œè¾“å‡ºç«¯å£ä¹‹é—´æ²¡æœ‰ç›´æ¥è¿çº¿,è·¯ç”±å™¨å¤„ç†åˆ†ç»„çš„è¿‡ç¨‹æ˜¯:æŠŠæ”¶åˆ°çš„åˆ†ç»„å…ˆæ”¾å…¥ç¼“å­˜,æŸ¥æ‰¾è½¬å‘è¡¨,æ‰¾å‡ºæŸä¸ªç›®çš„åœ°å€çš„æœ€ä½³è¾“å‡ºç«¯å£,ç„¶åä»ç¼“å­˜ä¸­å–å‡ºè¯¥åˆ†ç»„,é€šè¿‡è¾“å‡ºç«¯å£è½¬å‘å‡ºå». åœ¨åˆ†ç»„äº¤æ¢ä¸­ï¼Œæ¯ä¸ªpacketç‹¬ç«‹åœ°é€šè¿‡ç½‘ç»œè¿›è¡Œä¼ è¾“ã€‚è¿™æ„å‘³ç€åˆ†ç»„å¯ä»¥é€šè¿‡ä¸åŒçš„è·¯å¾„åˆ°è¾¾ç›®çš„åœ°ï¼Œå¹¶ä¸”å¯èƒ½ä¼šåœ¨ä¸åŒçš„æ—¶é—´åˆ°è¾¾ã€‚åœ¨æ¥æ”¶ç«¯ï¼Œè¿™äº›åˆ†ç»„ä¼šè¢«é‡æ–°ç»„è£…æˆåŸå§‹çš„æŠ¥æ–‡ã€‚ æŠ¥æ–‡äº¤æ¢ Message Switchingåœ¨æŠ¥æ–‡äº¤æ¢ä¸­ï¼Œæ•´ä¸ªæŠ¥æ–‡ä½œä¸ºä¸€ä¸ªå•å…ƒè¿›è¡Œå‘é€ï¼Œå¹¶ä¸”åœ¨æ•´ä¸ªä¼ è¾“è¿‡ç¨‹ä¸­ä¿æŒå…¶å®Œæ•´æ€§ã€‚æŠ¥æ–‡åœ¨å‘é€å‰éœ€è¦å®Œå…¨å‡†å¤‡å¥½ï¼Œå¹¶ä¸”åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¸ä¼šè¢«åˆ†å‰²ã€‚è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯ç®€å•ï¼Œä½†ç¼ºç‚¹æ˜¯å¦‚æœæŠ¥æ–‡å¾ˆå¤§ï¼Œé‚£ä¹ˆå®ƒå¯èƒ½ä¼šå ç”¨ç½‘ç»œèµ„æºä¸€æ®µå¾ˆé•¿çš„æ—¶é—´ï¼Œå¯¼è‡´ç½‘ç»œæ‹¥å¡ã€‚æŠ¥æ–‡äº¤æ¢ä¸»è¦ç”¨äºæ—©æœŸçš„ç”µæŠ¥é€šä¿¡ç½‘ï¼Œç°åœ¨è¾ƒå°‘ä½¿ç”¨ï¼Œé€šå¸¸è¢«è¾ƒå…ˆè¿›çš„åˆ†ç»„äº¤æ¢æ–¹å¼æ‰€å–ä»£ã€‚ ä¸‰ç§äº¤æ¢æ–¹å¼å¯¹æ¯”ç”µè·¯äº¤æ¢ é€šä¿¡ä¹‹å‰é¦–å…ˆè¦å»ºç«‹è¿æ¥ï¼›è¿æ¥å»ºç«‹å¥½ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨å·²å»ºç«‹å¥½çš„è¿æ¥è¿›è¡Œæ•°æ®ä¼ é€ï¼›æ•°æ®ä¼ é€åï¼Œéœ€é‡Šæ”¾è¿æ¥ï¼Œä»¥å½’è¿˜ä¹‹å‰å»ºç«‹è¿æ¥æ‰€å ç”¨çš„é€šä¿¡çº¿è·¯èµ„æºã€‚ ä¸€æ—¦å»ºç«‹è¿æ¥ï¼Œä¸­é—´çš„å„ç»“ç‚¹äº¤æ¢æœºå°±æ˜¯ç›´é€šå½¢å¼çš„ï¼Œæ¯”ç‰¹æµå¯ä»¥ç›´è¾¾ç»ˆç‚¹ï¼› æŠ¥æ–‡äº¤æ¢ å¯ä»¥éšæ—¶å‘é€æŠ¥æ–‡ï¼Œè€Œä¸éœ€è¦äº‹å…ˆå»ºç«‹è¿æ¥ï¼›æ•´ä¸ªæŠ¥æ–‡å…ˆä¼ é€åˆ°ç›¸é‚»ç»“ç‚¹äº¤æ¢æœºï¼Œå…¨éƒ¨å­˜å‚¨ä¸‹æ¥åè¿›è¡ŒæŸ¥è¡¨è½¬å‘ï¼Œè½¬å‘åˆ°ä¸‹ä¸€ä¸ªç»“ç‚¹äº¤æ¢æœºã€‚ æ•´ä¸ªæŠ¥æ–‡éœ€è¦åœ¨å„ç»“ç‚¹äº¤æ¢æœºä¸Šè¿›è¡Œå­˜å‚¨è½¬å‘ï¼Œç”±äºä¸é™åˆ¶æŠ¥æ–‡å¤§å°ï¼Œå› æ­¤éœ€è¦å„ç»“ç‚¹äº¤æ¢æœºéƒ½å…·æœ‰è¾ƒå¤§çš„ç¼“å­˜ç©ºé—´ã€‚ åˆ†ç»„äº¤æ¢ å¯ä»¥éšæ—¶å‘é€åˆ†ç»„ï¼Œè€Œä¸éœ€è¦äº‹å…ˆå»ºç«‹è¿æ¥ã€‚æ„æˆåŸå§‹æŠ¥æ–‡çš„ä¸€ä¸ªä¸ªåˆ†ç»„ï¼Œä¾æ¬¡åœ¨å„ç»“ç‚¹äº¤æ¢æœºä¸Šå­˜å‚¨è½¬å‘ã€‚å„ç»“ç‚¹äº¤æ¢æœºåœ¨å‘é€åˆ†ç»„çš„åŒæ—¶ï¼Œè¿˜ç¼“å­˜æ¥æ”¶åˆ°çš„åˆ†ç»„ã€‚ æ„æˆåŸå§‹æŠ¥æ–‡çš„ä¸€ä¸ªä¸ªåˆ†ç»„ï¼Œåœ¨å„ç»“ç‚¹äº¤æ¢æœºä¸Šè¿›è¡Œå­˜å‚¨è½¬å‘ï¼Œç›¸æ¯”æŠ¥æ–‡äº¤æ¢ï¼Œå‡å°‘äº†è½¬å‘æ—¶å»¶ï¼Œè¿˜å¯ä»¥é¿å…è¿‡é•¿çš„æŠ¥æ–‡é•¿æ—¶é—´å ç”¨é“¾è·¯ï¼ŒåŒæ—¶ä¹Ÿæœ‰åˆ©äºè¿›è¡Œå·®é”™æ§åˆ¶ã€‚ è®¡ç®—æœºç½‘ç»œçš„å®šä¹‰å’Œåˆ†ç±»è®¡ç®—æœºç½‘ç»œçš„å®šä¹‰è®¡ç®—æœºç½‘ç»œçš„æœ€ç®€å•çš„å®šä¹‰æ˜¯ï¼šä¸€äº›äº’ç›¸è¿æ¥çš„ã€è‡ªæ²»çš„è®¡ç®—æœºçš„é›†åˆ äº’è” è®¡ç®—æœºä¹‹é—´å¯ä»¥é€šè¿‡æœ‰çº¿æˆ–æ— çº¿çš„æ–¹å¼è¿›è¡Œæ•°æ®é€šä¿¡ è‡ªæ²» æŒ‡è®¡ç®—æœºæœ‰ç‹¬ç«‹æ€§,æœ‰è‡ªå·±çš„è½¯ç¡¬ä»¶,å¯ä»¥å•ç‹¬å…è®¸ä½¿ç”¨ é›†åˆ è‡³å°‘ä¸¤å°è®¡ç®—æœºç»„æˆ è®¡ç®—æœºç½‘ç»œè¾ƒå¥½çš„å®šä¹‰æ˜¯: è®¡ç®—æœºç½‘ç»œä¸»è¦æ˜¯ç”±ä¸€äº›é€šç”¨çš„ï¼Œå¯ç¼–ç¨‹çš„ç¡¬ä»¶ï¼ˆä¸€å®šåŒ…å«æœ‰ä¸­å¤®å¤„ç†æœº CPUï¼‰äº’è¿è€Œæˆçš„ï¼Œè€Œè¿™äº›ç¡¬ä»¶å¹¶éä¸“é—¨ç”¨æ¥å®ç°æŸä¸€ç‰¹å®šç›®çš„ï¼ˆä¾‹å¦‚ï¼Œä¼ é€æ•°æ®æˆ–è§†é¢‘ä¿¡å·ï¼‰ã€‚è¿™äº›å¯ç¼–ç¨‹çš„ç¡¬ä»¶èƒ½å¤Ÿç”¨æ¥ä¼ é€å¤šç§ä¸åŒç±»å‹çš„æ•°æ®ï¼Œå¹¶èƒ½æ”¯æŒå¹¿æ³›çš„å’Œæ—¥ç›Šå¢é•¿çš„åº”ç”¨ã€‚ è®¡ç®—æœºç½‘ç»œæ‰€è¿æ¥çš„ç¡¬ä»¶ï¼Œå¹¶ä¸é™äºä¸€èˆ¬çš„è®¡ç®—æœºï¼Œè€Œæ˜¯åŒ…æ‹¬äº†æ™ºèƒ½æ‰‹æœºç­‰æ™ºèƒ½ç¡¬ä»¶ã€‚ è®¡ç®—æœºç½‘ç»œå¹¶éä¸“é—¨ç”¨æ¥ä¼ é€æ•°æ®ï¼Œè€Œæ˜¯èƒ½å¤Ÿæ”¯æŒå¾ˆå¤šç§çš„åº”ç”¨ï¼ˆåŒ…æ‹¬ä»Šåå¯èƒ½å‡ºç°çš„å„ç§åº”ç”¨ï¼‰ã€‚ è®¡ç®—æœºç½‘ç»œçš„åˆ†ç±» æŒ‰äº¤æ¢æŠ€æœ¯åˆ†ç±»: ç”µè·¯äº¤æ¢ç½‘ç»œ æŠ¥æ–‡äº¤æ¢ç½‘ç»œ åˆ†ç»„äº¤æ¢ç½‘ç»œ æŒ‰ä½¿ç”¨è€…åˆ†ç±»: å…¬ç”¨ç½‘ ä¸“ç”¨ç½‘ æŒ‰ä¼ è¾“ä»‹è´¨åˆ†ç±»: æœ‰çº¿ç½‘ç»œ æ— çº¿ç½‘ç»œ æŒ‰è¦†ç›–èŒƒå›´åˆ†ç±»: Wide/Metropolitan/Local/Personal Area Network æŒ‰æ‹“æ‰‘ç»“æ„åˆ†ç±» æ€»çº¿å‹ ç¯å‹ æ˜Ÿå‹ ç½‘çŠ¶å‹ è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡é€Ÿç‡ Ratebit æ¯”ç‰¹.è®¡ç®—æœºä¸­æ•°æ®é‡çš„å•ä½,ä¹Ÿæ˜¯ä¿¡æ¯è®ºä¸­ä¿¡æ¯é‡çš„å•ä½.ä¸€ä¸ª bit å³æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ•°å­—,å®ƒåªèƒ½å– 0 æˆ– 1 ä¸¤ä¸ªå€¼ 8bit = 1Byte; KB=1024B,MB=1024KB,GB=1024MB,TB=1024GB rate æ¯”ç‰¹ç‡,æ•°æ®ç‡.è¿æ¥åœ¨è®¡ç®—æœºç½‘ç»œä¸Šçš„ä¸»æœºåœ¨æ•°å­—ä¿¡é“ä¸Šä¼ é€æ•°æ®ä½æ•°çš„é€Ÿç‡,å•ä½ä¸º bit/s,ä¹Ÿç§°ä¸º bps(bit per second)1kbs=1000bps,1Mbps=1000kbs,1Gbps=1000Mbps 100MB çš„æ•°æ®å—,ç½‘å¡çš„å‘é€é€Ÿç‡ä¸º 100Mbps,æ±‚å‘é€æ‰€éœ€æ—¶é—´? $$ \\frac{100MB}{100Mbps}=\\frac{MB}{Mbps}=\\frac{2^{20}B}{10^6bps}=\\frac{2^{20}\\times8}{10^6s^{-1}}=8.388608s $$ å¸¦å®½ BandwidthBandwidthåœ¨æ¨¡æ‹Ÿä¿¡å·ç³»ç»Ÿä¸­,è¡¨ç¤ºä¿¡å·æ‰€åŒ…å«çš„å„ç§ä¸åŒé¢‘ç‡æˆåˆ†æ‰€å æ®çš„é¢‘ç‡èŒƒå›´(å³æœ€é«˜é¢‘ç‡ä¸æœ€ä½é¢‘ç‡ä¹‹å·®),å•ä½ä¸º Hz;åœ¨è®¡ç®—æœºç½‘ç»œä¸­,è¡¨ç¤ºç½‘ç»œä¸­çš„é€šä¿¡çº¿è·¯æ‰€èƒ½ä¼ è¾“æ•°æ®çš„èƒ½åŠ›,ç½‘ç»œå¸¦å®½è¡¨ç¤ºåœ¨å•ä½æ—¶é—´å†…ä»ç½‘ç»œä¸­çš„æŸä¸€ç‚¹åˆ°å¦ä¸€ç‚¹æ‰€èƒ½é€šè¿‡çš„æœ€é«˜æ•°æ®ç‡(å³ç½‘ç»œè®¾å¤‡æ‰€æ”¯æŒçš„æœ€é«˜é€Ÿåº¦),å•ä½ä¸º bps. å¸¦å®½çš„è¿™ä¸¤ç§è¡¨è¿°ä¹‹é—´æœ‰ç€å¯†åˆ‡çš„è”ç³»,ä¸€æ¡é€šä¿¡çº¿è·¯çš„é¢‘å¸¦å®½åº¦è¶Šå®½ï¼Œç†è®ºä¸Šæ‰€èƒ½ä¼ è¾“çš„æœ€é«˜æ•°æ®ç‡ä¹Ÿè¶Šé«˜ã€‚(å…·ä½“å¯è‡ªè¡ŒæŸ¥é˜…ä¿¡å·ä¸ç³»ç»Ÿç›¸å…³çŸ¥è¯†,ä¾‹å¦‚é¦™å†œå®šç†) ååé‡ Throughputååé‡æ˜¯æŒ‡å•ä½æ—¶é—´å†…å®é™…é€šè¿‡æŸä¸ªç½‘ç»œ(æˆ–ä¿¡é“ã€æ¥å£)çš„æ•°æ®é‡,å•ä½ä¸º bps. ååé‡å—ç½‘ç»œçš„å¸¦å®½æˆ–æˆ–é¢å®šé€Ÿç‡çš„é™åˆ¶(ååé‡å¾€å¾€å°äºå¸¦å®½),åŒæ—¶è¿˜å—åˆ°ç½‘ç»œä¸­å…¶ä»–å› ç´ çš„å½±å“,ä¾‹å¦‚ç½‘ç»œæ‹¥å¡ã€è·¯ç”±å™¨è½¬å‘é€Ÿç‡ã€ä¸»æœºå¤„ç†é€Ÿåº¦ç­‰. æ—¶å»¶ Delayæ—¶å»¶æ—¶æŒ‡æ•°æ®ï¼ˆä¸€ä¸ªæŠ¥æ–‡æˆ–åˆ†ç»„ï¼Œç”šè‡³æ¯”ç‰¹ï¼‰ä»ç½‘ç»œï¼ˆæˆ–é“¾è·¯ï¼‰çš„ä¸€ç«¯ä¼ é€åˆ°å¦ä¸€ç«¯æ‰€éœ€çš„æ—¶é—´ã€‚ç½‘ç»œæ—¶å»¶ç”±ä»¥ä¸‹å‡ éƒ¨åˆ†ç»„æˆ å‘é€æ—¶å»¶/ä¼ è¾“æ—¶å»¶ Transmission delay:ä¸»æœºæˆ–è·¯ç”±å™¨å‘é€æ•°æ®å¸§æ‰€éœ€è¦çš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯ä»å‘é€æ•°æ®å¸§çš„ç¬¬ä¸€ä¸ªæ¯”ç‰¹ç®—èµ·ï¼Œåˆ°è¯¥å¸§çš„æœ€åä¸€ä¸ªæ¯”ç‰¹å‘é€å®Œæ¯•æ‰€éœ€çš„æ—¶é—´ã€‚$$R=é“¾è·¯å¸¦å®½ (bps)L=åˆ†ç»„é•¿åº¦ (bits)å‘é€åˆ†ç»„æ¯”ç‰¹æµçš„æ—¶é—´ = L/R$$ ä¼ æ’­æ—¶å»¶ Propagation delayç”µç£æ³¢åœ¨ä¿¡é“ä¸­ä¼ æ’­ä¸€å®šçš„è·ç¦»éœ€è¦èŠ±è´¹çš„æ—¶é—´ã€‚$$d = ç‰©ç†é“¾è·¯çš„é•¿åº¦s = ä»‹è´¨çš„ä¿¡å·ä¼ æ’­é€Ÿåº¦ (2x10^8 m/s)ä¼ æ’­å»¶è¿Ÿ = d/s$$ èŠ‚ç‚¹å¤„ç†æ—¶å»¶ Nodal processing delayä¸»æœºæˆ–è·¯ç”±å™¨åœ¨æ”¶åˆ°åˆ†ç»„æ—¶è¦èŠ±è´¹ä¸€å®šæ—¶é—´è¿›è¡Œå¤„ç†(æ£€æŸ¥é”™è¯¯ä½,é€‰æ‹©è¾“å‡ºé“¾è·¯),é«˜é€Ÿè·¯ç”±å™¨çš„å¤„ç†å»¶è¿Ÿä¸ºå¾®ç§’çº§ æ’é˜Ÿæ—¶å»¶ Queueing delayå¸¸è¢«çœ‹ä½œæ˜¯å¤„ç†æ—¶å»¶çš„ä¸€éƒ¨åˆ†ã€‚åˆ†ç»„åœ¨è¿›è¿‡ç½‘ç»œä¼ è¾“æ—¶ï¼Œè¦ç»è¿‡è®¸å¤šè·¯ç”±å™¨ã€‚ä½†åˆ†ç»„åœ¨è¿›å…¥è·¯ç”±å™¨åè¦å…ˆåœ¨è¾“å…¥é˜Ÿåˆ—ä¸­æ’é˜Ÿç­‰å¾…å¤„ç†ã€‚ æ€»æ—¶å»¶ = å‘é€æ—¶å»¶ + ä¼ æ’­æ—¶å»¶ + å¤„ç†æ—¶å»¶(å¤„ç†æ—¶å»¶ + æ’é˜Ÿæ—¶å»¶) æ—¶å»¶å¸¦å®½ç§¯ Delay-Bandwidth Productæ—¶å»¶å¸¦å®½ç§¯(bit) = ä¼ æ’­æ—¶å»¶(s) * å¸¦å®½(bps) ç±»æ¯”å¸¦å®½ä¸ºæ°´ç®¡çš„æ¨ªåˆ‡é¢é¢ç§¯,ä¼ æ’­æ—¶å»¶ç†è§£ä¸ºæ°´æµç»è¿‡æ°´ç®¡çš„æ—¶é—´,æ—¶å»¶å¸¦å®½ç§¯å°±æ˜¯æ°´ç®¡çš„å®¹é‡,å³æ°´ç®¡ä¸­èƒ½å¤Ÿå®¹çº³çš„æ°´çš„æ•°é‡. å¾€è¿”æ—¶é—´ Round Trip Timeäº’è”ç½‘ä¸Šçš„ä¿¡æ¯ä¸ä»…ä»…å•æ–¹å‘ä¼ è¾“è€Œæ˜¯åŒå‘äº¤äº’çš„ã€‚å› æ­¤ï¼Œå¾€è¿”æ—¶é—´(RTT)ä¹Ÿæ˜¯ä¸€ä¸ªé‡è¦çš„æ€§èƒ½æŒ‡æ ‡ åˆ©ç”¨ç‡ Utilizationåˆ©ç”¨ç‡åˆ†ä¸ºä¿¡é“åˆ©ç”¨ç‡å’Œç½‘ç»œåˆ©ç”¨ç‡ ä¸¢åŒ…ç‡ Packet Loss Rate è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„å¸¸è§çš„è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„è®¡ç®—æœºç½‘ç»œæ˜¯ä¸€ä¸ªå¤æ‚çš„ç³»ç»Ÿ,æ—©åœ¨ ARPANET æ—¶ä»£,å°±å·²ç»æ„è¯†åˆ°äº†ç½‘ç»œçš„å¤æ‚æ€§,å› æ­¤æå‡ºäº†åˆ†å±‚çš„æ€æƒ³ã€‚åˆ†å±‚å°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºè‹¥å¹²è¾ƒå°çš„å±€éƒ¨é—®é¢˜,ä½¿å¾—ç½‘ç»œçš„è®¾è®¡å’Œç®¡ç†å˜å¾—æ›´åŠ å®¹æ˜“ã€‚ å„å±‚ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼šå„å±‚ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œå„å±‚ä¹‹é—´ä¸éœ€è¦å…³å¿ƒå…¶ä»–å±‚æ˜¯å¦‚ä½•å®ç°çš„ï¼Œåªéœ€è¦çŸ¥é“è‡ªå·±å¦‚ä½•è°ƒç”¨ä¸‹å±‚æä¾›å¥½çš„åŠŸèƒ½å°±å¯ä»¥äº†ï¼ˆå¯ä»¥ç®€å•ç†è§£ä¸ºæ¥å£è°ƒç”¨ï¼‰ã€‚è¿™ä¸ªå’Œæˆ‘ä»¬å¯¹å¼€å‘æ—¶ç³»ç»Ÿè¿›è¡Œåˆ†å±‚æ˜¯ä¸€ä¸ªé“ç†ã€‚æé«˜äº†çµæ´»æ€§å’Œå¯æ›¿æ¢æ€§ï¼šæ¯ä¸€å±‚éƒ½å¯ä»¥ä½¿ç”¨æœ€é€‚åˆçš„æŠ€æœ¯æ¥å®ç°ï¼Œä½ åªéœ€è¦ä¿è¯ä½ æä¾›çš„åŠŸèƒ½ä»¥åŠæš´éœ²çš„æ¥å£çš„è§„åˆ™æ²¡æœ‰æ”¹å˜å°±è¡Œäº†ã€‚å¹¶ä¸”ï¼Œæ¯ä¸€å±‚éƒ½å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œä¿®æ”¹æˆ–æ›¿æ¢ï¼Œè€Œä¸ä¼šå½±å“åˆ°æ•´ä¸ªç½‘ç»œçš„ç»“æ„ã€‚è¿™ä¸ªå’Œæˆ‘ä»¬å¹³æ—¶å¼€å‘ç³»ç»Ÿçš„æ—¶å€™è¦æ±‚çš„é«˜å†…èšã€ä½è€¦åˆçš„åŸåˆ™ä¹Ÿæ˜¯å¯ä»¥å¯¹åº”ä¸Šçš„ã€‚å¤§é—®é¢˜åŒ–å°ï¼šåˆ†å±‚å¯ä»¥å°†å¤æ‚çš„ç½‘ç»œé—®é¢˜åˆ†è§£ä¸ºè®¸å¤šæ¯”è¾ƒå°çš„ã€ç•Œçº¿æ¯”è¾ƒæ¸…æ™°ç®€å•çš„å°é—®é¢˜æ¥å¤„ç†å’Œè§£å†³ã€‚è¿™æ ·ä½¿å¾—å¤æ‚çš„è®¡ç®—æœºç½‘ç»œç³»ç»Ÿå˜å¾—æ˜“äºè®¾è®¡ï¼Œå®ç°å’Œæ ‡å‡†åŒ–ã€‚ è¿™ä¸ªå’Œæˆ‘ä»¬å¹³æ—¶å¼€å‘çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šå°†ç³»ç»ŸåŠŸèƒ½åˆ†è§£ï¼Œç„¶åå°†å¤æ‚çš„é—®é¢˜åˆ†è§£ä¸ºå®¹æ˜“ç†è§£çš„æ›´å°çš„é—®é¢˜æ˜¯ç›¸å¯¹åº”çš„ï¼Œè¿™äº›è¾ƒå°çš„é—®é¢˜å…·æœ‰æ›´å¥½çš„è¾¹ç•Œï¼ˆç›®æ ‡å’Œæ¥å£ï¼‰å®šä¹‰ã€‚JavaGuide OSI(Open System Interconnection)ä¸ƒå±‚æ¨¡å‹æ˜¯å›½é™…æ ‡å‡†åŒ–ç»„ç»‡(ISO)åˆ¶å®šçš„ä¸€ä¸ªé€šä¿¡ç³»ç»Ÿçš„æ¡†æ¶,å®ƒå°†é€šä¿¡ç³»ç»Ÿåˆ’åˆ†ä¸ºä¸ƒå±‚,æ¯ä¸€å±‚éƒ½æœ‰è‡ªå·±çš„åŠŸèƒ½,å¹¶ä¸”æ¯ä¸€å±‚çš„åŠŸèƒ½éƒ½æ˜¯ç›¸å¯¹ç‹¬ç«‹çš„,åªä¸ç›¸é‚»çš„ä¸¤å±‚è¿›è¡Œé€šä¿¡ã€‚ä½†ç”±äº OSI æ¨¡å‹è¿‡äºå¤æ‚,å®é™…åº”ç”¨ä¸­å¹¶ä¸å¸¸ç”¨,è€Œæ˜¯ä½¿ç”¨ TCP/IP å››å±‚æ¨¡å‹ TCP/IP ä½“ç³»ç»“æ„ç›¸å½“äºå°† OSI ä½“ç³»ç»“æ„çš„ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚åˆå¹¶ä¸ºäº†ç½‘ç»œæ¥å£å±‚ï¼Œå¹¶å»æ‰äº†ä¼šè¯å±‚å’Œè¡¨ç¤ºå±‚ã€‚ åœ¨ç”¨æˆ·ä¸»æœºçš„æ“ä½œç³»ç»Ÿä¸­ï¼Œé€šå¸¸éƒ½å¸¦æœ‰ç¬¦åˆ TCP/IP ä½“ç³»ç»“æ„æ ‡å‡†çš„ TCP/IP åè®®æ—ã€‚è€Œç”¨äºç½‘ç»œäº’è¿çš„è·¯ç”±å™¨ä¸­ï¼Œä¹Ÿå¸¦æœ‰ç¬¦åˆ TCP/IP ä½“ç³»ç»“æ„æ ‡å‡†çš„ TCP/IP åè®®æ—ã€‚åªä¸è¿‡è·¯ç”±å™¨ä¸€èˆ¬åªåŒ…å«ç½‘ç»œæ¥å£å±‚å’Œç½‘é™…å±‚ã€‚ ReferenceJavaGuide-Network-OSI and TCP/IPbilibili-è®¡ç½‘ä½“ç³»ç»“æ„åˆ†å±‚æ€æƒ³ä¸¾ä¾‹bilibili-ä¹ é¢˜ 1bilibili-ä¹ é¢˜ 2","link":"/UESTC/ComputerNetworking/Ch1-NetworkOverview/"},{"title":"ç‰©ç†å±‚ Physical Layer","text":"ç‰©ç†å±‚çš„åŸºæœ¬æ¦‚å¿µ Overview ç‰©ç†å±‚çš„ä»»åŠ¡å±è”½æ‰ä¸åŒä¼ è¾“åª’ä½“å’Œé€šä¿¡æ‰‹æ®µé—´çš„å·®å¼‚ï¼Œä½¿æ•°æ®é“¾è·¯å±‚æ„Ÿå—ä¸åˆ°è¿™ç§å·®å¼‚ äº”ç§ä¿¡é“å¤ç”¨æ–¹å¼æ—¶åˆ†å¤ç”¨ã€é¢‘åˆ†å¤ç”¨ã€ç»Ÿè®¡æ—¶åˆ†å¤ç”¨ã€ç åˆ†å¤ç”¨ã€æ³¢åˆ†å¤ç”¨ ä¸‰ç§å®½å¸¦æ¥å…¥æ–¹å¼éå¯¹ç§°æ•°å­—ç”¨æˆ·çº¿ï¼ˆADSL æŠ€æœ¯ï¼ŒåŸºäºç”µè¯ç”¨æˆ·çº¿æ”¹é€ ï¼‰ã€å…‰çº¤åŒè½´æ··åˆç½‘ï¼ˆHFC ç½‘ï¼‰ã€FTTx æŠ€æœ¯ ç‰©ç†å±‚ä¸‹é¢çš„ä¼ è¾“åª’ä½“ Transmission Mediaä¼ è¾“åª’ä½“ä¹Ÿç§°ä¸ºä¼ è¾“ä»‹è´¨æˆ–ä¼ è¾“åª’ä»‹ï¼Œå®ƒå°±æ˜¯æ•°æ®ä¼ è¾“ç³»ç»Ÿä¸­åœ¨å‘é€å™¨å’Œæ¥æ”¶å™¨ä¹‹é—´çš„ç‰©ç†é€šè·¯ã€‚ä¼ è¾“åª’ä½“å¯åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œå³å¯¼å¼•å‹ä¼ è¾“åª’ä½“å’Œéå¯¼å¼•å‹ä¼ è¾“åª’ä½“ã€‚åœ¨å¯¼å¼•å‹ä¼ è¾“åª’ä½“ä¸­ï¼Œç”µç£æ³¢è¢«å¯¼å¼•æ²¿ç€å›ºä½“åª’ä½“ï¼ˆé“œçº¿æˆ–å…‰çº¤ï¼‰ä¼ æ’­ï¼Œè€Œéå¯¼å¼•å‹ä¼ è¾“åª’ä½“å°±æ˜¯æŒ‡è‡ªç”±ç©ºé—´ï¼Œåœ¨éå¯¼å¼•å‹ä¼ è¾“åª’ä½“ä¸­ç”µç£æ³¢çš„ä¼ è¾“å¸¸ç§°ä¸ºæ— çº¿ä¼ è¾“ ä¼ è¾“åª’ä½“ä¸å±äºè®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„çš„ä»»ä½•ä¸€å±‚ã€‚å¦‚æœéè¦å°†å®ƒæ·»åŠ åˆ°ä½“ç³»ç»“æ„ä¸­ï¼Œåªèƒ½å°†å…¶æ”¾ç½®åˆ°ç‰©ç†å±‚ä¹‹ä¸‹ã€‚ å¯¼å¼•å‹ä¼ è¾“åª’ä½“ Guided Transmission MediaCoaxial Cable Twisted Pair Optical Fiber Power Line éå¯¼å¼•å‹ä¼ è¾“åª’ä½“ Unguided Transmission Media è‹¥é€šä¿¡çº¿è·¯è¦é€šè¿‡ä¸€äº›é«˜å±±æˆ–å²›å±¿ï¼Œæœ‰æ—¶å°±å¾ˆéš¾æ–½å·¥ã€‚å³ä½¿æ˜¯åœ¨åŸå¸‚ä¸­ï¼ŒæŒ–å¼€é©¬è·¯æ•·è®¾ç”µç¼†ä¹Ÿä¸æ˜¯ä¸€ä»¶å¾ˆå®¹æ˜“çš„äº‹ã€‚å½“é€šä¿¡è·ç¦»å¾ˆè¿œæ—¶ï¼Œæ•·è®¾ç”µç¼†æ—¢æ˜‚è´µåˆè´¹æ—¶ã€‚ä½†åˆ©ç”¨æ— çº¿ç”µæ³¢åœ¨è‡ªç”±ç©ºé—´çš„ä¼ æ’­å°±å¯è¾ƒå¿«åœ°å®ç°å¤šç§é€šä¿¡ã€‚ç”±äºè¿™ç§é€šä¿¡æ–¹å¼ä¸ä½¿ç”¨ä¸Šä¸€èŠ‚æ‰€ä»‹ç»çš„å„ç§å¯¼å¼•å‹ä¼ è¾“åª’ä½“ï¼Œå› æ­¤å°±å°†è‡ªç”±ç©ºé—´ç§°ä¸ºâ€œéå¯¼å¼•å‹ä¼ è¾“åª’ä½“â€ã€‚ç‰¹åˆ«è¦æŒ‡å‡ºçš„æ˜¯ï¼Œç”±äºä¿¡æ¯æŠ€æœ¯çš„å‘å±•ï¼Œç¤¾ä¼šå„æ–¹é¢çš„èŠ‚å¥å˜å¿«äº†ã€‚äººä»¬ä¸ä»…è¦æ±‚èƒ½å¤Ÿåœ¨è¿åŠ¨ä¸­è¿›è¡Œç”µè¯é€šä¿¡ï¼ˆå³ç§»åŠ¨ç”µè¯é€šä¿¡ï¼‰ï¼Œè€Œä¸”è¿˜è¦æ±‚èƒ½å¤Ÿåœ¨è¿åŠ¨ä¸­è¿›è¡Œè®¡ç®—æœºæ•°æ®é€šä¿¡ï¼ˆä¿—ç§°ä¸Šç½‘ï¼‰ã€‚å› æ­¤åœ¨æœ€è¿‘åå‡ å¹´æ— çº¿ç”µé€šä¿¡å‘å±•å¾—ç‰¹åˆ«å¿«ï¼Œå› ä¸ºåˆ©ç”¨æ— çº¿ä¿¡é“è¿›è¡Œä¿¡æ¯çš„ä¼ è¾“ï¼Œæ˜¯åœ¨è¿åŠ¨ä¸­é€šä¿¡çš„å”¯ä¸€æ‰‹æ®µçŸ­æ³¢é€šä¿¡è´¨é‡è¾ƒå·®ï¼Œé€Ÿç‡è¾ƒä½ã€‚æ— é™ç”µå¾®æ³¢é€šä¿¡å¯ä¼ è¾“ç”µè¯ã€å›¾åƒã€æ•°æ®ç­‰ä¿¡æ¯ã€‚ç´«å¤–çº¿åŠæ›´é«˜æ³¢æ®µç›®å‰è¿˜ä¸èƒ½ç”¨äºé€šä¿¡ã€‚å«æ˜Ÿé€šä¿¡çš„ä¼˜ç‚¹æ˜¯é€šä¿¡è·ç¦»è¿œï¼Œç¼ºç‚¹æ˜¯ä¼ æ’­æ—¶å»¶é«˜ï¼Œä¿å¯†æ€§å·®ã€‚ Radio wave Microwave Infrared Visible lightç™¾åº¦ç™¾ç§‘-LIFI ä¼ è¾“æ–¹å¼ Transmission Mode ä¸²è¡Œä¼ è¾“å’Œå¹¶è¡Œä¼ è¾“ åŒæ­¥ä¼ è¾“å’Œå¼‚æ­¥ä¼ è¾“ å•å·¥é€šä¿¡(å•å‘é€šä¿¡)ã€åŠåŒå·¥é€šä¿¡(åŒå‘äº¤æ›¿é€šä¿¡)å’Œå…¨åŒå·¥é€šä¿¡(åŒå‘åŒæ—¶é€šä¿¡) ä¸²è¡Œå’Œå¹¶è¡Œä¼ è¾“ Serial and Parallel Transmissionä¸²è¡Œä¼ è¾“æ•°æ®æ˜¯ä¸€ä¸ªæ¯”ç‰¹ä¸€ä¸ªæ¯”ç‰¹ä¾æ¬¡å‘é€çš„ï¼Œå› æ­¤åœ¨å‘é€ç«¯ä¸æ¥æ”¶ç«¯ä¹‹é—´ï¼Œåªéœ€è¦ä¸€æ¡æ•°æ®ä¼ è¾“çº¿è·¯å³å¯å¹¶è¡Œä¼ è¾“ä¸€æ¬¡å‘é€ n ä¸ªæ¯”ç‰¹ï¼Œå› æ­¤ï¼Œåœ¨å‘é€ç«¯å’Œæ¥æ”¶ç«¯ä¹‹é—´éœ€è¦æœ‰ n æ¡ä¼ è¾“çº¿è·¯å¹¶è¡Œä¼ è¾“çš„ä¼˜ç‚¹æ˜¯æ¯”ä¸²è¡Œä¼ è¾“çš„é€Ÿåº¦ n å€ï¼Œä½†æˆæœ¬é«˜æ•°æ®åœ¨ä¼ è¾“çº¿è·¯ä¸Šçš„ä¼ è¾“é‡‡ç”¨æ˜¯ä¸²è¡Œä¼ è¾“ï¼Œè®¡ç®—æœºå†…éƒ¨çš„æ•°æ®ä¼ è¾“å¸¸ç”¨å¹¶è¡Œä¼ è¾“ åŒæ­¥å’Œå¼‚æ­¥ä¼ è¾“ Synchronous and Asynchronous TransmissionåŒæ­¥ä¼ è¾“ æ•°æ®å—ä»¥ç¨³å®šçš„æ¯”ç‰¹æµçš„å½¢å¼ä¼ è¾“ã€‚å­—èŠ‚ä¹‹é—´æ²¡æœ‰é—´éš” æ¥æ”¶ç«¯åœ¨æ¯ä¸ªæ¯”ç‰¹ä¿¡å·çš„ä¸­é—´æ—¶åˆ»è¿›è¡Œæ£€æµ‹ï¼Œä»¥åˆ¤åˆ«æ¥æ”¶åˆ°çš„æ˜¯ 0 è¿˜æ˜¯ 1 ç”±äºä¸åŒè®¾å¤‡çš„æ—¶é’Ÿé¢‘ç‡å­˜åœ¨ä¸€å®šå·®å¼‚ï¼Œä¸å¯èƒ½åšåˆ°å®Œå…¨ç›¸åŒï¼Œåœ¨ä¼ è¾“å¤§é‡æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œæ‰€äº§ç”Ÿçš„åˆ¤åˆ«æ—¶åˆ»çš„ç´¯è®¡è¯¯å·®ï¼Œä¼šå¯¼è‡´æ¥æ”¶ç«¯å¯¹æ¯”ç‰¹ä¿¡å·çš„åˆ¤åˆ«é”™ä½,æ‰€ä»¥è¦ä½¿æ”¶å‘åŒå‘æ—¶é’Ÿä¿æŒåŒæ­¥ å¼‚æ­¥ä¼ è¾“ ä»¥å­—èŠ‚ä¸ºå•ä½ä¼ è¾“ï¼Œå­—èŠ‚ä¹‹é—´çš„æ—¶é—´é—´éš”ä¸å›ºå®š æ¥æ”¶ç«¯ä»…åœ¨æ¯ä¸ªå­—èŠ‚çš„èµ·å§‹å¤„å¯¹å­—èŠ‚å†…çš„ bit å®ç°åŒæ­¥ é€šå¸¸å†æ¯ä¸ªå­—èŠ‚çš„å‰ååŠ ä¸Šèµ·å§‹ä½å’Œç»“æŸä½ å•å·¥ã€åŠåŒå·¥å’Œå…¨åŒå·¥é€šä¿¡ Simplex, Half-Duplex, and Full-Duplex Communicationä¿¡é“[GlossaryOfNetwork#Physical Layer]å’Œç”µè·¯å¹¶ä¸ç­‰åŒã€‚ä¿¡é“ä¸€èˆ¬éƒ½æ˜¯ç”¨æ¥è¡¨ç¤ºå‘æŸä¸€ä¸ªæ–¹å‘ä¼ é€ä¿¡æ¯çš„åª’ä½“ã€‚å› æ­¤ï¼Œä¸€æ¡é€šä¿¡ç”µè·¯å¾€å¾€åŒ…å«ä¸€æ¡å‘é€ä¿¡é“å’Œä¸€æ¡æ¥æ”¶ä¿¡é“ã€‚ä»é€šä¿¡çš„åŒæ–¹ä¿¡æ¯äº¤äº’çš„æ–¹å¼æ¥çœ‹ï¼Œå¯ä»¥æœ‰ä»¥ä¸‹ä¸‰ç§åŸºæœ¬æ–¹å¼ï¼š å•å·¥é€šä¿¡ï¼ˆSimplex Communicationï¼‰åˆç§°å•å‘é€šä¿¡,å³åªèƒ½æœ‰ä¸€ä¸ªæ–¹å‘çš„é€šä¿¡è€Œæ²¡æœ‰åæ–¹å‘çš„äº¤äº’ã€‚æ— çº¿ç”µå¹¿æ’­æˆ–æœ‰çº¿ç”µä»¥åŠç”µè§†å¹¿æ’­å°±å±äºè¿™ç§ç±»å‹ åŠåŒå·¥é€šä¿¡ï¼ˆHalf-Duplex Communicationï¼‰åˆç§°åŒå‘äº¤æ›¿é€šä¿¡,é€šä¿¡çš„åŒå‘å¯ä»¥äº¤æ›¿åœ°å‘é€å’Œæ¥æ”¶ä¿¡æ¯ï¼Œä½†ä¸èƒ½åŒæ—¶è¿›è¡Œã€‚å¯¹è®²æœºå°±æ˜¯è¿™ç§é€šä¿¡æ–¹å¼ å…¨åŒå·¥é€šä¿¡ï¼ˆFull-Duplex Communicationï¼‰åˆç§°åŒå‘åŒæ—¶é€šä¿¡,é€šä¿¡çš„åŒæ–¹å¯ä»¥åŒæ—¶å‘é€å’Œæ¥æ”¶ä¿¡æ¯ã€‚ç”µè¯å°±æ˜¯è¿™ç§é€šä¿¡æ–¹å¼ å•å‘é€šä¿¡åªéœ€è¦ä¸€æ¡ä¿¡é“ï¼Œè€ŒåŒå‘äº¤æ›¿é€šä¿¡æˆ–åŒå‘åŒæ—¶é€šä¿¡åˆ™éœ€è¦ä¸¤æ¡ä¿¡é“ï¼ˆæ¯ä¸ªæ–¹å‘å„ä¸€æ¡ï¼‰åŒå‘åŒæ—¶é€šä¿¡çš„ä¼ è¾“æ•ˆç‡æœ€é«˜ ç¼–ç å’Œè°ƒåˆ¶ Encoding and Modulationç¼–ç Encoding å°†ä¿¡æ¯è½¬åŒ–ä¸ºç‰¹å®šæ ¼å¼ä»¥ä¾¿ä¼ è¾“å’Œå­˜å‚¨çš„è¿‡ç¨‹ã€‚è°ƒåˆ¶Modulation å°†æ•°å­—ä¿¡å·è½¬åŒ–ä¸ºæ¨¡æ‹Ÿä¿¡å·çš„è¿‡ç¨‹ï¼Œä½¿å¾—ä¿¡å·èƒ½å¤Ÿåœ¨ä¼ è¾“ä»‹è´¨ä¸­ä¼ æ’­ ç¼–ç æ–¹å¼ Encoding ä¸å½’é›¶ç¼–ç  Non-Return-to-Zero (NRZ) Encodingæ­£ç”µå¹³ä¸è´Ÿç”µå¹³åˆ†åˆ«è¡¨ç¤º 1 å’Œ 0(æˆ– 0 å’Œ 1)ï¼Œä¸å½’é›¶ç¼–ç ä¸­çš„ç”µå¹³ä¸ä¼šåœ¨ç å…ƒæ—¶é—´å†…å½’é›¶ï¼Œå³åœ¨æ•´ä¸ªç å…ƒæ—¶é—´å†…ï¼Œç”µå¹³ä¸ä¼šå‡ºç°é›¶ç”µå¹³è¿ç»­çš„ä¸¤ä¸ª 1 æˆ– 0 ä¼šå¯¼è‡´ç”µå¹³ä¿æŒä¸å˜ï¼Œæ¥æ”¶ç«¯å¦‚ä½•åˆ¤æ–­è¿™æ˜¯ä¸¤ä¸ªç å…ƒè¿˜æ˜¯ä¸€ä¸ªç å…ƒå‘¢ï¼Ÿè¿™éœ€è¦é¢å¤–ä¸€æ ¹ä¼ è¾“çº¿æ¥ä¼ è¾“æ—¶é’Ÿä¿¡å·ï¼Œä½¿å‘é€æ–¹å’Œæ¥æ”¶æ–¹åŒæ­¥ï¼Œæ¥æ”¶æ–¹æŒ‰æ—¶é’Ÿä¿¡å·çš„èŠ‚æ‹æ¥é€ä¸ªæ¥æ”¶ç å…ƒã€‚ä½†æ˜¯å¯¹äºè®¡ç®—æœºç½‘ç»œï¼Œå®æ„¿åˆ©ç”¨è¿™æ ¹ä¼ è¾“çº¿ä¼ è¾“æ•°æ®ä¿¡å·ï¼Œè€Œä¸æ˜¯ä¼ è¾“æ—¶é’Ÿä¿¡å·ï¼Œå› æ­¤ä¸å½’é›¶ç¼–ç åœ¨è®¡ç®—æœºç½‘ç»œä¸­å¹¶ä¸å¸¸ç”¨ å½’é›¶ç¼–ç  Return-to-Zero (RZ) Encodingæ¯ä¸ªç å…ƒä¼ è¾“ç»“æŸåä¿¡å·éƒ½è¦â€å½’é›¶â€,æ¥æ”¶æ–¹åªè¦åœ¨ä¿¡å·å½’é›¶åè¿›è¡Œé‡‡æ ·å³å¯ï¼Œä¸éœ€è¦å•ç‹¬çš„æ—¶é’Ÿä¿¡å·ã€‚è¿™ç›¸å½“äºæŠŠæ—¶é’Ÿä¿¡å·ç”¨å½’é›¶çš„æ–¹å¼ç¼–ç åˆ°æ•°æ®ä¹‹å†…,è¿™ç§°ä¸ºâ€è‡ªåŒæ­¥â€ã€‚ä½†è¿™ç§ç¼–ç æ–¹å¼æµªè´¹äº†å¤§é‡å¸¦å®½ æ›¼å½»æ–¯ç‰¹ç¼–ç  Manchester Encodingåœ¨æ¯ä¸ªç å…ƒçš„ä¸­é—´æ—¶åˆ»ï¼Œç”µå¹³éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè¿™æ ·æ¥æ”¶æ–¹å°±å¯ä»¥æ ¹æ®è¿™ä¸ªå˜åŒ–æ¥åˆ¤æ–­ç å…ƒçš„å¼€å§‹å’Œç»“æŸã€‚æ›¼å½»æ–¯ç‰¹ç¼–ç çš„ä¼˜ç‚¹æ˜¯ä¸éœ€è¦å•ç‹¬çš„æ—¶é’Ÿä¿¡å·ï¼Œè€Œä¸”ä¸ä¼šæµªè´¹å¸¦å®½ï¼Œå› æ­¤åœ¨è®¡ç®—æœºç½‘ç»œä¸­åº”ç”¨è¾ƒå¤š,ä¼ ç»Ÿä»¥å¤ªç½‘å°±æ˜¯ä½¿ç”¨æ›¼å½»æ–¯ç‰¹ç¼–ç çš„ å·®åˆ†æ›¼å½»æ–¯ç‰¹ç¼–ç  Differential Manchester Encodingæ¯ä½ä¸­é—´çš„è·³å˜ä»…æä¾›æ—¶é’Ÿå®šæ—¶ï¼Œè€Œç”¨æ¯ä½å¼€å§‹æ—¶æœ‰æ— è·³å˜è¡¨ç¤ºâ€œ0â€æˆ–â€œ1â€ï¼Œæœ‰è·³å˜ä¸ºâ€œ0â€ï¼Œæ— è·³å˜ä¸ºâ€œ1â€ã€‚ è°ƒåˆ¶æ–¹å¼ Modulationè°ƒè¯•æ˜¯å°†æ•°å­—ä¿¡å·è½¬åŒ–ä¸ºæ¨¡æ‹Ÿä¿¡å·çš„è¿‡ç¨‹ï¼Œä½¿å¾—ä¿¡å·èƒ½å¤Ÿåœ¨ä¼ è¾“ä»‹è´¨ä¸­ä¼ æ’­ã€‚æ¨¡æ‹Ÿä¿¡å·é€šå¸¸ä½¿ç”¨è¿ç»­çš„å˜åŒ–æ¥è¡¨ç¤ºä¿¡æ¯ï¼Œå¦‚æ­£å¼¦æ³¢æˆ–æ–¹æ³¢ã€‚è°ƒåˆ¶æŠ€æœ¯å¯ä»¥å°†æ•°å­—ä¿¡å·è½¬åŒ–ä¸ºç‰¹å®šé¢‘ç‡èŒƒå›´å†…çš„æ¨¡æ‹Ÿä¿¡å·ï¼Œä»¥æ–¹ä¾¿ä¼ è¾“å’Œæ¥æ”¶ã€‚ åŸºæœ¬è°ƒåˆ¶æ–¹å¼ Basic Modulationä¸‰ç§åŸºæœ¬è°ƒåˆ¶æ–¹å¼ï¼š è°ƒé¢‘ Frequency Modulation (FM) è°ƒå¹… Amplitude Modulation (AM) è°ƒç›¸ Phase Modulation (PM) æ··å’Œè°ƒåˆ¶ Hybrid Modulationæ­£äº¤æŒ¯å¹…è°ƒåˆ¶ QAMQAMï¼ˆQuadrature Amplitude Modulationï¼‰æ˜¯ä¸€ç§æ··åˆè°ƒåˆ¶æŠ€æœ¯ï¼Œå®ƒæ˜¯å°†è°ƒå¹…å’Œè°ƒç›¸ç»“åˆèµ·æ¥çš„ä¸€ç§è°ƒåˆ¶æ–¹å¼ã€‚QAM ä¿¡å·æ˜¯ç”±ä¸¤è·¯æ­£äº¤çš„è°ƒåˆ¶ä¿¡å·å åŠ è€Œæˆçš„ï¼Œä¸€è·¯æ˜¯è°ƒå¹…ä¿¡å·ï¼Œå¦ä¸€è·¯æ˜¯è°ƒç›¸ä¿¡å·ã€‚QAM ä¿¡å·çš„é¢‘è°±æ•ˆç‡å¾ˆé«˜ï¼Œå› æ­¤åœ¨æ•°å­—é€šä¿¡ä¸­åº”ç”¨å¹¿æ³›ã€‚ ä¿¡é“çš„æé™å®¹é‡ Channel Capacityä¿¡å·å¤±çœŸ Signal Distortion Nyquist Theorem and Shannon Theorem ä¿¡é“å¤ç”¨ Channel Multiplexing[Ch3-2DataLinkLayer#é™æ€åˆ’åˆ†ä¿¡é“ Static Channel Allocation] å¤ç”¨(multiplexing)æ˜¯é€šä¿¡æŠ€æœ¯ä¸­çš„åŸºæœ¬æ¦‚å¿µã€‚è®¡ç®—æœºç½‘ç»œä¸­çš„ä¿¡é“å¹¿æ³›åœ°ä½¿ç”¨å„ç§å¤ç”¨æŠ€æœ¯ã€‚å¯åˆ†ä¸ºé¢‘åˆ†å¤ç”¨ã€æ—¶åˆ†å¤ç”¨ã€æ³¢åˆ†å¤ç”¨åŠç åˆ†å¤ç”¨ç­‰ å°†ä¸€ä¸ªç‰©ç†ä¿¡é“æ ¹æ®æ—¶é—´ã€é¢‘ç‡ã€ç©ºé—´ç­‰èµ„æºåˆ’åˆ†ä¸ºå¤šä¸ªè™šæ‹Ÿä¿¡é“ã€‚è¿™ä¹ˆåšçš„å¥½å¤„æœ‰äºŒï¼šä¸€æ˜¯å‡å°‘ç®¡é“çš„ä¸ªæ•°ï¼Œä¸ºè¿è¥å•†å‡å°‘çº¿è·¯æˆæœ¬ï¼›äºŒæ˜¯æå‡å•é€šé“çš„å®¹é‡ã€‚ Reference:ã€è®¡ç®—æœºç½‘ç»œç³»åˆ—ã€‘ç‰©ç†å±‚ï¼šä¿¡é“å¤ç”¨æŠ€æœ¯ï¼ˆé¢‘åˆ†å¤ç”¨ã€æ—¶åˆ†å¤ç”¨ã€æ³¢åˆ†å¤ç”¨åŠç åˆ†å¤ç”¨ï¼‰å›¾æ–‡å¹¶èŒ‚â€”â€”é¢‘åˆ†å¤ç”¨ã€æ—¶åˆ†å¤ç”¨ã€ç åˆ†å¤ç”¨ã€å¤ç”¨å’Œå¤šå€çš„åŒºåˆ«","link":"/UESTC/ComputerNetworking/Ch2-PhysicalLayer/"},{"title":"æ•°æ®é“¾è·¯å±‚ Datalink Layer â… ","text":"æ•°æ®é“¾è·¯å±‚æ¦‚è¿° OverviewèŠ‚ç‚¹ Node è¿è¡Œé“¾è·¯å±‚åè®®çš„ä»»ä½•è®¾å¤‡é“¾è·¯ Link æŒ‡ä»ä¸€ä¸ªç»“ç‚¹åˆ°ç›¸é‚»ç»“ç‚¹çš„ä¸€æ®µç‰©ç†çº¿è·¯ï¼Œä¸­é—´æ²¡æœ‰å…¶ä»–çš„äº¤æ¢ç»“ç‚¹æ•°æ®é“¾è·¯ Data Link æŠŠå®ç°é€šä¿¡åè®®çš„ç¡¬ä»¶å’Œè½¯ä»¶åŠ åˆ°é“¾è·¯ä¸Šï¼Œå°±æ„æˆäº†æ•°æ®é“¾è·¯å¸§ Frame æ˜¯æ•°æ®é“¾è·¯å±‚çš„ä¼ è¾“å•ä½ï¼Œç”±æ•°æ®éƒ¨åˆ†å’Œæ§åˆ¶éƒ¨åˆ†ç»„æˆ The Service Provide by the Link Layer Framing å°è£…æˆå¸§ Link access é“¾è·¯æ¥å…¥ Reliable delivery å¯é äº¤ä»˜ Error detection and correction å·®é”™æ£€æµ‹å’Œçº æ­£ å±€åŸŸç½‘å±äºæ•°æ®é“¾è·¯å±‚å±€åŸŸç½‘è™½ç„¶æ˜¯ä¸ªç½‘ç»œã€‚ä½†æˆ‘ä»¬å¹¶ä¸æŠŠå±€åŸŸç½‘æ”¾åœ¨ç½‘ç»œå±‚ä¸­è®¨è®ºã€‚è¿™æ˜¯å› ä¸ºåœ¨ç½‘ç»œå±‚è¦è®¨è®ºçš„æ˜¯å¤šä¸ªç½‘ç»œäº’è¿çš„é—®é¢˜ï¼Œæ˜¯è®¨è®ºåˆ†ç»„æ€ä¹ˆä»ä¸€ä¸ªç½‘ç»œï¼Œé€šè¿‡è·¯ç”±å™¨ï¼Œè½¬å‘åˆ°å¦ä¸€ä¸ªç½‘ç»œã€‚è€Œåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ä¸­ï¼Œåˆ†ç»„æ€ä¹ˆä»ä¸€å°ä¸»æœºä¼ é€åˆ°å¦ä¸€å°ä¸»æœºï¼Œä½†å¹¶ä¸ç»è¿‡è·¯ç”±å™¨è½¬å‘ã€‚ä»æ•´ä¸ªäº’è”ç½‘æ¥çœ‹ï¼Œå±€åŸŸç½‘ä»å±äºæ•°æ®é“¾è·¯å±‚çš„èŒƒå›´ ä»å±‚æ¬¡ä¸Šæ¥çœ‹æ•°æ®çš„æµåŠ¨ä»…ä»æ•°æ®é“¾è·¯å±‚è§‚å¯Ÿå¸§çš„æµåŠ¨ æ•°æ®é“¾è·¯å±‚ä½¿ç”¨çš„ä¿¡é“æ•°æ®é“¾è·¯å±‚å±äºè®¡ç®—æœºç½‘è·¯çš„ä½å±‚ã€‚æ•°æ®é“¾è·¯å±‚ä½¿ç”¨çš„ä¿¡é“ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§ç±»å‹ï¼š ç‚¹å¯¹ç‚¹ä¿¡é“ point to point link å¹¿æ’­ä¿¡é“ broadcast link æ•°æ®é“¾è·¯å±‚çš„ä¸‰ä¸ªé‡è¦é—®é¢˜ å°è£…æˆå¸§ Framing åœ¨æ•°æ®å‰åæ·»åŠ å¸§å¤´å’Œå¸§å°¾ï¼Œç”¨äºæ ‡è¯†å¸§çš„å¼€å§‹å’Œç»“æŸ å·®é”™æ£€æµ‹ Error Detection ä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½ä¼šäº§ç”Ÿæ¯”ç‰¹å·®é”™,é€šè¿‡å¸§å°¾ä¸­çš„æ£€é”™ç æ£€æµ‹å¸§ä¸­æ˜¯å¦æœ‰è¯¯ç  å¯é ä¼ è¾“ Reliable delivery å¦‚æœæ¥æ”¶æ–¹æ”¶åˆ°æœ‰è¯¯ç çš„å¸§ï¼Œä¼šä¸¢å¼ƒè¿™ä¸ªå¸§ã€‚å¦‚æœæ•°æ®é“¾è·¯å±‚å‘å…¶ä¸Šå±‚æä¾›çš„æ˜¯ä¸å¯é æœåŠ¡ï¼Œé‚£ä¹ˆä¸¢å¼ƒåä¸ä¼šå†æœ‰æ›´å¤šæªæ–½;å¦‚æœæ˜¯å¯é æœåŠ¡åˆ™éœ€è¦å…¶ä»–æªæ–½ï¼Œæ¥ç¡®ä¿æ¥æ”¶æ–¹ä¸»æœºé‡æ–°æ”¶åˆ°å¸§çš„æ­£ç¡®å‰¯æœ¬ å¯¹äºå¹¿æ’­ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚,è¿˜æœ‰ä»¥ä¸‹é—®é¢˜éœ€è§£å†³ ç¡®è®¤å¸§çš„æ¥æ”¶ Link Access ä¸»æœºå¦‚ä½•ç¡®è®¤å¸§æ˜¯å‘é€ç»™è‡ªå·±çš„? å¯ä»¥é€šè¿‡ MAC åœ°å€æ¥ç¡®è®¤ æ•°æ®ç¢°æ’ Collide å¦‚æœä¸¤ä¸ªä¸»æœºåŒæ—¶å‘é€æ•°æ®ï¼Œå¯èƒ½ä¼šå‘ç”Ÿæ•°æ®ç¢°æ’ éšç€æŠ€æœ¯çš„å‘å±•ï¼Œäº¤æ¢æŠ€æœ¯çš„æˆç†Ÿï¼Œåœ¨æœ‰çº¿ï¼ˆå±€åŸŸç½‘ï¼‰é¢†åŸŸä½¿ç”¨ç‚¹å¯¹ç‚¹é“¾è·¯å’Œé“¾è·¯å±‚äº¤æ¢æœºçš„äº¤æ¢å¼å±€åŸŸç½‘å–ä»£äº†å…±äº«å¼å±€åŸŸç½‘;åœ¨æ— çº¿å±€åŸŸç½‘ä¸­ä»ç„¶ä½¿ç”¨çš„æ˜¯å…±äº«ä¿¡é“æŠ€æœ¯ Where Is the Link Layer Implemented?é“¾è·¯å±‚çš„ä¸»ä½“éƒ¨åˆ†åœ¨ç½‘ç»œé€‚é…å™¨ï¼ˆnetwork adapterï¼‰ä¸­å®ç°ï¼Œç½‘ç»œé€‚é…å™¨æœ‰æ—¶ä¹Ÿç§°ä¸ºç½‘ç»œæ¥å£å¡ï¼ˆNetwork Interface Cardï¼ŒNICï¼‰ï¼Œä¸€ä¸ªå…¸å‹çš„ä¸»æœºä½“ç³»ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å°è£…æˆå¸§ Framingå°è£…ä¸è§£åŒ… Encapsulation&amp;De-encapsulationå°è£…(Encapsulation)æ˜¯ä½å±‚åè®®ä»é«˜å±‚åè®®æ¥æ”¶æ•°æ®ï¼Œç„¶åå°†æ•°æ®æ”¾å…¥å…¶å¸§çš„æ•°æ®éƒ¨åˆ†çš„è¿‡ç¨‹ã€‚å› æ­¤ï¼Œå°è£…æ˜¯æŠŠä¸€ç§æ•°æ®åŒ…å°è£…å¦ä¸€ç§æ•°æ®åŒ…çš„è¿‡ç¨‹ã€‚è§£åŒ…(Decapsulation)ä¸ä¹‹ç›¸å,é«˜å±‚åè®®ä»ä½å±‚åè®®æ¥æ”¶æ•°æ®ï¼Œç„¶åé€å±‚å°†æ•°æ®ä»å¸§çš„æ•°æ®éƒ¨åˆ†å–å‡ºçš„è¿‡ç¨‹ã€‚ Generally, Encapsulation is a process by which a lower-layer protocol receives data from a higher-layer protocol and then places the data into the data portion of its frame. Thus, encapsulation is the process of enclosing one type of packet using another type of packet. å°è£…æˆå¸§(Framing)æŒ‡æ•°æ®é“¾è·¯å±‚æ¥å—ä¸Šå±‚äº¤ä»˜çš„åè®®æ•°æ®å•å…ƒ,å¹¶ä¸ºå…¶æ·»åŠ å¸§å¤´å’Œå¸§å°¾,ä½¿ä¹‹æˆä¸ºå¸§çš„è¿‡ç¨‹ å‘é€æ–¹çš„æ•°æ®é“¾è·¯å±‚å°†ä¸Šå±‚äº¤ä»˜ä¸‹æ¥çš„åè®®æ•°æ®å•å…ƒå°è£…æˆå¸§åï¼Œé€šè¿‡ç‰©ç†å±‚å°†æ„æˆå¸§çš„ bits è½¬æ¢æˆç”µä¿¡å·äº¤ç»™ä¼ è¾“åª’ä½“ï¼Œæ¥æ”¶æ–¹çš„æ•°æ®é“¾è·¯å±‚å†ä»ç‰©ç†å±‚äº¤ä»˜çš„æ¯”ç‰¹æµä¸­æå–å‡º framesè§£åŒ…è¿‡ç¨‹å¦‚ä½•æå– frames? PPP å¸§ ä¾æ®å¸§å¤´å’Œå¸§å°¾çš„æ ‡å¿—ç¬¦ç¡®å®šå¸§çš„å¼€å§‹å’Œç»“æŸ(å¸§å®šç•Œ)ä»è€Œæå–å‡º frames ä»¥å¤ªç½‘ V2 çš„ MAC å¸§ æ ¹æ®å‰å¯¼ç (1 å­—èŠ‚çš„å¸§å¼€å§‹å®šç•Œç¬¦,7 å­—èŠ‚çš„å‰åŒæ­¥ç )æ¥å®šç•Œ,å¸§é—´é—´éš”ä¸º 96bit çš„æ—¶é—´ å‰åŒæ­¥ç :ä½œç”¨æ˜¯ä½¿æ¥æ”¶æ–¹çš„æ—¶é’Ÿä¸å‘é€æ–¹çš„æ—¶é’ŸåŒæ­¥ å¸§å¼€å§‹å®šç•Œç¬¦:æ ‡å¿—å¸§çš„å¼€å§‹ ä»¥å¤ªç½‘è§„å®šå¸§é—´é—´éš”ä¸º 96bit çš„æ—¶é—´,å› æ­¤ MAC å¸§ä¸éœ€è¦å¸§ç»“æŸå®šç•Œç¬¦ é€æ˜ä¼ è¾“ Transparent transmissioné€æ˜ä¼ è¾“æ˜¯æŒ‡ä¸ç®¡æ‰€ä¼ æ•°æ®æ˜¯ä»€ä¹ˆæ ·çš„æ¯”ç‰¹ç»„åˆï¼Œéƒ½åº”å½“èƒ½å¤Ÿåœ¨é“¾è·¯ä¸Šä¼ é€ã€‚å› æ­¤ï¼Œé“¾è·¯å±‚å°±â€œçœ‹ä¸è§â€æœ‰ä»€ä¹ˆå¦¨ç¢æ•°æ®ä¼ è¾“çš„ä¸œè¥¿ã€‚ å½“æ‰€ä¼ æ•°æ®ä¸­çš„æ¯”ç‰¹ç»„åˆæ°å·§ä¸æŸä¸€ä¸ªæ§åˆ¶ä¿¡æ¯å®Œå…¨ä¸€æ ·æ—¶ï¼Œå°±å¿…é¡»é‡‡å–é€‚å½“çš„æªæ–½ï¼Œä½¿æ”¶æ–¹ä¸ä¼šå°†è¿™æ ·çš„æ•°æ®è¯¯è®¤ä¸ºæ˜¯æŸç§æ§åˆ¶ä¿¡æ¯ã€‚è¿™æ ·æ‰èƒ½ä¿è¯æ•°æ®é“¾è·¯å±‚çš„ä¼ è¾“æ˜¯é€æ˜çš„ã€‚ è§£å†³åŠæ³• å­—ç¬¦å¡«å……/å­—èŠ‚å¡«å…… å‘é€æ–¹æ‰«ææ•°æ®,å½“æ•°æ®ä¸­å‡ºç°ä¸å¸§å®šç•Œç¬¦ç›¸åŒçš„æ¯”ç‰¹ä¸²æ—¶,åœ¨å…¶å‰é¢æ’å…¥è½¬ä¹‰å­—ç¬¦ ESC; æ¥å—æ–¹å°†é‡åˆ°çš„ç¬¬ä¸€ä¸ªå¸§å®šç•Œç¬¦è®¤ä¸ºæ˜¯å¸§çš„å¼€å§‹ é‡åˆ°è½¬ä¹‰å­—ç¬¦æ—¶,åˆ™çŸ¥é“åé¢çš„æ¯”ç‰¹ä¸²è™½ä¸å¸§å®šç•Œç¬¦ç›¸åŒ,ä½†å¹¶éå¸§å®šç•Œç¬¦è€Œæ˜¯æ•°æ®,å› æ­¤å‰”é™¤è½¬ä¹‰å­—ç¬¦ ESC ç„¶åå°†å…¶åçš„å­—ç¬¦ä½œä¸ºæ•°æ®å¤„ç† å½“å†æ¬¡é‡åˆ°å¸§å®šç•Œç¬¦æ—¶,è®¤ä¸ºå¸§ç»“æŸps:é‡åˆ°ä¸è½¬ç§»å­—ç¬¦ç›¸åŒçš„æ¯”ç‰¹ä¸²æ—¶,åˆ™åœ¨è½¬ä¹‰å­—ç¬¦å‰é¢å†æ’å…¥è½¬ä¹‰å­—ç¬¦ æ¯”ç‰¹å¡«å…… ä¸ºäº†æé«˜å¸§çš„ä¼ è¾“æ•ˆç‡ï¼Œåº”å½“ä½¿å¸§çš„æ•°æ®éƒ¨åˆ†çš„é•¿åº¦å°½å¯èƒ½å¤§äº›ã€‚è€ƒè™‘åˆ°å·®é”™æ§åˆ¶ç­‰å¤šç§å› ç´ ï¼Œæ¯ä¸€ç§æ•°æ®é“¾è·¯å±‚åè®®éƒ½è§„å®šäº†å¸§çš„æ•°æ®éƒ¨åˆ†çš„é•¿åº¦ä¸Šé™ï¼Œå³æœ€å¤§ä¼ é€å•å…ƒ MTU(Maximum Transfer Unit) å·®é”™æ£€æµ‹ Error Detectionå·®é”™æ£€æµ‹çš„åŸºæœ¬æ¦‚å¿µå®é™…çš„é€šä¿¡é“¾è·¯éƒ½ä¸æ˜¯ç†æƒ³çš„ï¼Œæ¯”ç‰¹åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½ä¼šäº§ç”Ÿå·®é”™ï¼š1å¯èƒ½ä¼šå˜æˆ0 ï¼Œè€Œ0ä¹Ÿå¯èƒ½å˜æˆ1,è¿™ç§°ä¸ºæ¯”ç‰¹å·®é”™ã€‚åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œä¼ è¾“é”™è¯¯çš„æ¯”ç‰¹å æ‰€ä¼ è¾“æ¯”ç‰¹æ€»æ•°çš„æ¯”ç‡ç§°ä¸ºè¯¯ç ç‡BER(Bit Error Rate)ä½¿ç”¨å·®é”™æ£€æµ‹ç æ¥æ£€æµ‹æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦äº§ç”Ÿäº†æ¯”ç‰¹å·®é”™ï¼Œæ˜¯æ•°æ®é“¾è·¯å±‚æ‰€è¦è§£å†³çš„é‡è¦é—®é¢˜ä¹‹ä¸€å¸§æ ¡éªŒåºåˆ— FCS(Frame Check Sequence)æ˜¯å·®é”™æ£€æµ‹ç çš„ä¸€ç§ï¼Œç”¨äºæ£€æµ‹å¸§ä¸­æ˜¯å¦æœ‰è¯¯ç ,é€šå¸¸ä½¿ç”¨å¾ªç¯å†—ä½™æ ¡éªŒ CRCæ¥è®¡ç®— FCS å¥‡å¶æ ¡éªŒ Parity Checkå¥‡å¶æ ¡éªŒåœ¨å¾…å‘é€çš„æ•°æ®åé¢æ·»åŠ  1 ä½å¥‡å¶æ ¡éªŒä½ï¼Œä½¿æ•´ä¸ªæ•°æ®ï¼ˆåŒ…æ‹¬æ‰€æ·»åŠ çš„æ ¡éªŒä½åœ¨å†…ï¼‰ä¸­1çš„ä¸ªæ•°ä¸ºå¥‡æ•°ï¼ˆå¥‡æ ¡éªŒï¼‰æˆ–å¶æ•°ï¼ˆå¶æ ¡éªŒï¼‰ã€‚å¦‚æœæœ‰å¥‡æ•°ä¸ªbit å‘ç”Ÿè¯¯ç ï¼Œåˆ™å¥‡å¶æ€§å‘ç”Ÿå˜åŒ–ï¼Œå¯ä»¥æ£€æŸ¥å‡ºè¯¯ç ï¼›å¦‚æœæœ‰å¶æ•°ä¸ªbit å‘ç”Ÿè¯¯ç ï¼Œåˆ™å¥‡å¶æ€§ä¸å‘ç”Ÿå˜åŒ–ï¼Œä¸èƒ½æ£€æŸ¥å‡ºè¯¯ç ï¼ˆæ¼æ£€ï¼‰ç”±äºæ¼æ£€ç‡é«˜ï¼Œå¥‡å¶æ ¡éªŒåœ¨å®é™…ä¸­å¾ˆå°‘ä½¿ç”¨ äºŒç»´å¥‡å¶æ ¡éªŒ Two-Dimensional Parity Checkå‡è®¾ä¼ è¾“ä¿¡æ¯ D æœ‰ d ä½ï¼Œåœ¨å¶æ ¡éªŒæ–¹æ¡ˆä¸­ï¼Œä¼šå¢åŠ ä¸€ä¸ªé™„åŠ çš„æ¯”ç‰¹ï¼Œä½¿å¾—è¿™ d+1 ä¸ªæ¯”ç‰¹ä¸­ 1 çš„æ€»æ•°æ˜¯å¶æ•°ã€‚ç”±äºæ™®é€šçš„å¥‡å¶æ ¡éªŒæ–¹å¼æ£€é”™èƒ½åŠ›æœ‰é™ï¼Œæ‰€ä»¥äº§ç”Ÿäº†äºŒç»´çš„å¥‡å¶æ ¡éªŒã€‚D ä¸­çš„ d ä¸ªæ¯”ç‰¹è¢«åˆ’åˆ†ä¸º i è¡Œ j åˆ—ï¼Œå¯¹æ¯è¡Œæ¯åˆ—è®¡ç®—å¥‡å¶å€¼ï¼Œäº§ç”Ÿçš„ i+j+1 ä¸ªå¥‡å¶æ¯”ç‰¹æ„æˆäº†é“¾è·¯å±‚å¸§çš„å·®é”™æ£€æµ‹æ¯”ç‰¹ã€‚ æ ¡éªŒå’Œ Checksumming Methodå› ç‰¹ç½‘æ£€éªŒå’Œï¼ˆInternet checksumï¼‰åŸºäºè¿™ç§æ–¹æ³•ï¼Œå³æ•°æ®çš„å­—èŠ‚ä½œä¸º 16 æ¯”ç‰¹çš„æ•´æ•°å¯¹å¾…å¹¶æ±‚å’Œã€‚ å¾ªç¯å†—ä½™æ ¡éªŒ Cyclical Redundancy Checkæ”¶å‘åŒæ–¹çº¦å®šå¥½ä¸€ä¸ªç”Ÿæˆå¤šé¡¶å¼G(x);å‘é€æ–¹åŸºäºå¾…å‘é€çš„æ•°æ®å’Œç”Ÿæˆå¤šé¡¶å¼è®¡ç®—å‡ºå·®é”™æ£€æµ‹ç (å†—ä½™ç )ï¼Œå°†å…¶æ·»åŠ åˆ°å¾…ä¼ è¾“æ•°æ®çš„åé¢ä¸€èµ·ä¼ è¾“æ¥æ”¶æ–¹é€šè¿‡ç”Ÿæˆå¤šé¡¹å¼æ¥è®¡ç®—æ”¶åˆ°çš„æ•°æ®æ˜¯å¦äº§ç”Ÿäº†è¯¯ç ï¼› æ£€é”™ç åªèƒ½æ£€æµ‹å‡ºå¸§åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°äº†å·®é”™ï¼Œä½†äº•ä¸èƒ½å®šä½é”™è¯¯ï¼Œå› æ­¤æ— æ³•çº æ­£é”™è¯¯è¦æƒ³çº æ­£ä¼ è¾“ä¸­çš„å·®é”™ï¼Œå¯ä»¥ä½¿ç”¨å†—ä½™ä¿¡æ¯æ›´å¤šçš„çº é”™ç è¿›è¡Œå‰å‘çº é”™,ä½†çº é”™ç çš„å¼€é”€æ¯”è¾ƒå¤§ï¼Œåœ¨è®¡ç®—æœºç½‘ç»œä¸­è¾ƒå°‘ä½¿ç”¨ã€‚å¾ªç¯å†—ä½™æ ¡éªŒæœ‰å¾ˆå¥½çš„æ£€é”™èƒ½åŠ›,æ¼æ£€ç‡éå¸¸ä½ï¼Œè™½ç„¶è®¡ç®—æ¯”è¾ƒå¤æ‚ï¼Œä½†éå¸¸æ˜“äºç”¨ç¡¬ä»¶å®ç°ï¼Œå› æ­¤è¢«å¹¿æ³›åº”ç”¨äºæ•°æ®é“¾è·¯å±‚ã€‚åœ¨è®¡ç®—æœºç½‘ç»œä¸­é€šå¸¸é‡‡ç”¨æ£€é”™é‡ä¼ æ–¹å¼æ¥çº æ­£ä¼ è¾“ä¸­çš„å·®é”™ï¼Œæˆ–è€…ä»…ä»…æ˜¯ä¸¢å¼ƒæ£€æµ‹åˆ°å·®é”™çš„å¸§ï¼Œè¿™å–å†³äºæ•°æ®é“¾è·¯å±‚å‘å…¶ä¸Šå±‚æä¾›çš„æ˜¯å¯é ä¼ è¾“æœåŠ¡è¿˜æ˜¯ä¸å¯é ä¼ è¾“æœåŠ¡ã€‚ å¯é ä¼ è¾“ Reliable TransmissionOverviewå¯èƒ½å‘é€çš„å·®é”™ æ¯”ç‰¹é”™è¯¯ ä½¿ç”¨å·®é”™æ£€æµ‹æŠ€æœ¯ï¼ˆä¾‹å¦‚å¾ªç¯å†—ä½™æ ¡éªŒ CRCï¼Œæ¥æ”¶æ–¹çš„æ•°æ®é“¾è·¯å±‚å°±å¯æ£€æµ‹å‡ºå¸§åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦äº§ç”Ÿäº†è¯¯ç ï¼ˆæ¯”ç‰¹é”™è¯¯ï¼‰ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæœ‰çº¿é“¾è·¯çš„è¯¯ç ç‡æ¯”è¾ƒä½ï¼Œä¸ºäº†å‡å°å¼€é”€ï¼Œäº•ä¸è¦æ±‚æ•°æ®é“¾è·¯å±‚å‘ä¸Šæä¾›å¯é ä¼ è¾“æœåŠ¡ã€‚å³ä½¿å‡ºç°äº†è¯¯ç ï¼Œå¯é ä¼ è¾“çš„é—®é¢˜ç”±å…¶ä¸Šå±‚å¤„ç†ã€‚æ— çº¿é“¾è·¯æ˜“å—å¹²æ‰°ï¼Œè¯¯ç ç‡æ¯”è¾ƒé«˜ï¼Œå› æ­¤è¦æ±‚æ•°æ®é“¾è·¯å±‚å¿…é¡»å‘ä¸Šå±‚æä¾›å¯é ä¼ è¾“æœåŠ¡ã€‚ åˆ†ç»„ä¸¢å¤± è·¯ç”±å™¨è¾“å…¥é˜Ÿåˆ—å¿«æ»¡äº†ï¼Œä¸»åŠ¨ä¸¢å¼ƒæ”¶åˆ°çš„åˆ†ç»„ åˆ†ç»„æ—¶åº æ•°æ®å¹¶æœªæŒ‰ç…§å‘é€é¡ºåºä¾æ¬¡åˆ°è¾¾æ¥æ”¶ç«¯ åˆ†ç»„é‡å¤ ç”±äºæŸäº›åŸå› ï¼Œæœ‰äº›åˆ†ç»„åœ¨ç½‘ç»œä¸­æ»ç•™äº†ï¼Œæ²¡æœ‰åŠæ—¶åˆ°è¾¾æ¥æ”¶ç«¯ï¼Œè¿™å¯èƒ½ä¼šé€ æˆå‘é€ç«¯å¯¹è¯¥åˆ†ç»„çš„è¶…æ—¶é‡å‘ï¼Œé‡å‘çš„åˆ†ç»„åˆ°è¾¾æ¥æ”¶ç«¯ï¼Œä½†ä¸€æ®µæ—¶é—´åï¼Œæ»ç•™åœ¨ç½‘ç»œçš„åˆ†ç»„ä¹Ÿåˆ°è¾¾äº†æ¥æ”¶ç«¯ï¼Œè¿™å°±é€ æˆåˆ†ç»„é‡å¤çš„ä¼ è¾“å·®é”™ ä¸‰ç§å¯é ä¼ è¾“æ–¹å¼ åœæ­¢ç­‰å¾…åè®® SW å›é€€ N å¸§åè®® GBN é€‰æ‹©é‡ä¼ åè®® SR Refhttps://www.tkn.tu-berlin.de/teaching/rn/animations/gbn_sr/https://zhuanlan.zhihu.com/p/126312611[Ch5-1TransportLayer#Principles of Reliable Data Transfer] åœæ­¢ç­‰å¾…åè®® Stop-and-Wait Protocol ç¡®è®¤ä¸å¦è®¤ é¦–å…ˆï¼Œæ¯æ¬¡å‘é€æ–¹éƒ½åªå‘ä¸€ä¸ªæ•°æ®åˆ†ç»„ï¼Œæ¥æ”¶æ–¹å¯¹æ•°æ®åˆ†ç»„è¿›è¡Œå·®é”™æ£€æµ‹ï¼Œæ£€éªŒæ˜¯å¦æœ‰è¯¯ç ; å¦‚æœæ²¡æœ‰è¯¯ç ï¼Œæ¥æ”¶æ–¹å‘é€ACKç¡®è®¤åˆ†ç»„,å‘é€æ–¹æ”¶åˆ°ACKç¡®è®¤åˆ†ç»„åï¼Œå‘é€æ–¹æ‰èƒ½å‘é€ä¸‹ä¸€ä¸ªæ•°æ®åˆ†ç»„ã€‚ å¦‚æœæœ‰è¯¯ç ,æ¥æ”¶æ–¹å‘é€NAKå¦è®¤åˆ†ç»„å¹¶ä¸¢å¼ƒå½“å‰åˆ†ç»„,å‘é€æ–¹æ”¶åˆ°NAKå¦è®¤åˆ†ç»„åï¼Œé‡å‘æ•°æ®åˆ†ç»„ã€‚ è¶…æ—¶é‡ä¼  æ¥æ”¶æ–¹æ”¶ä¸åˆ°æ•°æ®åˆ†ç»„ï¼Œå°±ä¸ä¼šå‘é€ACKæˆ–NAKã€‚å¦‚æœä¸é‡‡å–å…¶ä»–æªæ–½ï¼Œå‘é€æ–¹å°±ä¼šä¸€ç›´å¤„äºç­‰å¾…æ¥æ”¶æ–¹ACKæˆ–NAKçš„çŠ¶æ€ã€‚æ•°æ®åˆ†ç»„åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æœ‰å¯èƒ½é‡åˆ°å·²ç»æ»¡äº†çš„è·¯ç”±å™¨ç­‰æƒ…å†µï¼Œæ­¤æ—¶è·¯ç”±å™¨ä¼šä¸¢å¤±è¯¥åˆ†ç»„ï¼Œå¦‚æ­¤ä¾¿ä¼šäº§ç”Ÿæ•°æ®åˆ†ç»„è¢«ä¸¢å¤±ï¼Œå‘é€æ–¹ç­‰ä¸åˆ°æ¥æ”¶æ–¹çš„ACKæˆ–è€…NAK,å¯¼è‡´å‘é€æ–¹é™·å…¥ç­‰å¾…çŠ¶æ€ã€‚ ä¸ºè§£å†³è¯¥é—®é¢˜ï¼Œå¯ä»¥åœ¨å‘é€æ–¹å‘é€å®Œä¸€ä¸ªæ•°æ®åˆ†ç»„æ—¶ï¼Œå¯åŠ¨ä¸€ä¸ªè¶…æ—¶è®¡æ—¶å™¨ã€‚è‹¥åˆ°äº†è¶…æ—¶è®¡æ—¶å™¨æ‰€è®¾ç½®çš„é‡ä¼ æ—¶é—´è€Œå‘é€æ–¹ä»æ”¶ä¸åˆ°æ¥æ”¶æ–¹çš„ä»»ä½•ACKæˆ–NAKï¼Œåˆ™é‡ä¼ åŸæ¥çš„æ•°æ®åˆ†ç»„ï¼Œè¿™å°±å«åšè¶…æ—¶é‡ä¼ ã€‚ è¶…æ—¶è®¡æ—¶å™¨è®¾ç½®çš„é‡ä¼ æ—¶é—´åº”ä»”ç»†é€‰æ‹©ã€‚ä¸€èˆ¬å¯å°†é‡ä¼ æ—¶é—´é€‰ä¸ºç•¥å¤§äºä»å‘é€æ–¹åˆ°æ¥æ”¶æ–¹çš„å¹³å‡å¾€è¿”æ—¶é—´;åœ¨æ•°æ®é“¾è·¯å±‚ç‚¹å¯¹ç‚¹çš„å¾€è¿”æ—¶é—´æ¯”è¾ƒç¡®å®šï¼Œé‡ä¼ æ—¶é—´æ¯”è¾ƒå®¹æ˜“è®¾å®šã€‚ç„¶è€Œåœ¨è¿è¾“å±‚ï¼Œç”±äºç«¯åˆ°ç«¯å¾€è¿”æ—¶é—´éå¸¸ä¸ç¡®å®šï¼Œè®¾ç½®åˆé€‚çš„é‡ä¼ æ—¶é—´æœ‰æ—¶å¹¶ä¸å®¹æ˜“ã€‚ ç¡®è®¤ä¸¢å¤± å®é™…è¿‡ç¨‹ä¸­,æ¥æ”¶æ–¹å‘é€çš„ACKæˆ–NAKä¹Ÿå¯èƒ½ä¼šä¸¢å¤±,å‘é€æ–¹æ”¶ä¸åˆ°æ¥æ”¶æ–¹çš„ACKæˆ–NAKï¼Œè§¦å‘è¶…æ—¶è®¡æ—¶å™¨,ä¼šé‡ä¼ æ•°æ®åˆ†ç»„ã€‚å¦‚æœæ¥æ”¶æ–¹æˆåŠŸæ¥æ”¶äº†æ•°æ®åˆ†ç»„ï¼Œä½†å‘é€ACKçš„åˆ†ç»„ä¸¢å¤±äº†ï¼Œå‘é€æ–¹ä¼šé‡ä¼ æ•°æ®åˆ†ç»„ï¼Œè¿™æ ·ä¼šå¯¼è‡´æ¥æ”¶æ–¹æ”¶åˆ°é‡å¤çš„æ•°æ®åˆ†ç»„ã€‚ ä¸ºè§£å†³è¯¥é—®é¢˜,æˆ‘ä»¬ç”¨ä¸€ä¸ªæ¯”ç‰¹ä½ç»™æ¯ä¸ªæ•°æ®åˆ†ç»„ä¸€ä¸ªåºå·ï¼ˆ0 æˆ– 1ï¼‰ï¼Œå½“é‡æ–°ä¼ è¾“æ•°æ®åˆ†ç»„çš„æ—¶å€™ï¼Œæ¥æ”¶æ–¹æ£€æµ‹åˆ°è¿™ä¸ªæ•°æ®åˆ†ç»„çš„åºå·,å¦‚æœåˆšæ‰çš„æ•°æ®åˆ†ç»„çš„åºå·ç›¸åŒå°±ä¸¢å¼ƒè¯¥æ•°æ®åˆ†ç»„ï¼Œå¦åˆ™æ¥æ”¶è¯¥æ•°æ®åˆ†ç»„ã€‚ç„¶åå‘é€ACKç¡®è®¤åˆ†ç»„ã€‚ è¿™é‡Œä¸ºä»€ä¹ˆå¯ä»¥åªç”¨0å’Œ1å‘¢ï¼Œä¸»è¦è¿˜æ˜¯å› ä¸ºåœæ­¢ç­‰å¾…åè®®çš„ç‰¹æ€§ï¼Œå³æ¯å‘é€å®Œä¸€ä¸ªæ•°æ®åˆ†ç»„ä¾¿ç­‰å¾…å‘é€æ–¹çš„ACKæˆ–NAKï¼Œåªè¦ä¿è¯æ¯å‘é€ä¸€ä¸ªæ–°çš„æ•°æ®åˆ†ç»„ï¼Œå…¶å‘é€åºå·ä¸ä¸Šæ¬¡å‘é€çš„æ•°å±…åˆ†ç»„çš„åºå·ä¸åŒå°±å¯ä»¥äº†ï¼Œå› æ¯”ç”¨ä¸€ä¸ªæ¯”ç‰¹æ¥ç¼–å·å°±å¤Ÿäº†ã€‚ ç¡®è®¤è¿Ÿåˆ° ä¸ºäº†è®©å‘é€æ–¹èƒ½å¤Ÿåˆ¤æ–­æ‰€æ”¶åˆ°çš„ACKåˆ†ç»„æ˜¯å¦æ˜¯é‡å¤çš„ï¼Œéœ€è¦ç»™ACKåˆ†ç»„ç¼–å·ï¼Œæ‰€ç”¨æ¯”ç‰¹æ•°é‡ä¸æ•°æ®åˆ†ç»„ç¼–å·æ‰€ç”¨æ¯”ç‰¹æ•°é‡ä¸€æ ·ã€‚æ•°æ®é“¾è·¯å±‚ä¸€èˆ¬ä¸ä¼šå‡ºç°ACKåˆ†ç»„è¿Ÿåˆ°çš„æƒ…å†µï¼Œå› æ­¤åœ¨æ•°æ®é“¾è·¯å±‚å®ç°åœæ­¢ï¼ç­‰å¾…åè®®å¯ä»¥ä¸ç”¨ç»™ACKåˆ†ç»„ç¼–å·ã€‚ ä¿¡é“åˆ©ç”¨ç‡ [Ch1-NetworkOverview#åˆ©ç”¨ç‡ Utilization] å›é€€ N å¸§åè®® Go-Back-N Protocolåœ¨åœæ­¢-ç­‰å¾…åè®®ä¸­ï¼Œéšç€ RTT çš„å˜å¤§ï¼Œä¿¡é“çš„åˆ©ç”¨ç‡ä¹Ÿä¼šå˜ä½ï¼ˆå«æ˜Ÿé€šä¿¡ï¼‰ï¼Œè§£å†³è¯¥é—®é¢˜çš„æ–¹æ³•æ˜¯ï¼šä¸ä»¥åœç­‰æ–¹å¼è¿è¡Œï¼Œå…è®¸å‘é€æ–¹å‘é€å¤šä¸ªåˆ†ç»„è€Œæ— é¡»ç­‰å¾…ç¡®è®¤ã€‚å› ä¸ºè®¸å¤šä»å‘é€æ–¹å‘æ¥æ”¶æ–¹è¾“é€å¯ä»¥çœ‹æˆæ˜¯å¡«å……åˆ°ä¸€æ¡æµæ°´çº¿ä¸­ï¼Œæ•…è¿™ç§æŠ€æœ¯è¢«ç§°ä¸ºæµæ°´çº¿ï¼ˆpipelineï¼‰ï¼Œä¸‹å›¾ä¸ºåœç­‰å’Œæµæ°´çº¿å‘é€ç¤ºæ„å›¾ï¼š åœ¨å›é€€ N æ­¥åè®®ä¸­ï¼Œå°†åŸºåºå·ï¼ˆbaseï¼‰å®šä¹‰ä¸ºæœ€æ—©æœªç¡®è®¤åˆ†ç»„çš„åºå·ï¼Œå°†ä¸‹ä¸€ä¸ªåºå·ï¼ˆnextseqnumï¼‰å®šä¹‰ä¸ºæœ€å°çš„æœªä½¿ç”¨åºå·ï¼Œåˆ™å°†åºå·èŒƒå›´åˆ†å‰²æˆå¦‚ä¸‹ 4 æ®µï¼š GBN åè®®ä¹Ÿå¸¸è¢«ç§°ä¸ºæ»‘åŠ¨çª—å£åè®®(sliding-window protocol)ä¸­ï¼Œçª—å£å¤§å° N å†³å®šäº†å¯ä»¥åœ¨æ²¡æœ‰ç¡®è®¤çš„æƒ…å†µä¸‹å‘é€çš„æ•°æ®åŒ…çš„æœ€å¤§æ•°é‡ã€‚è¿™ä¸ªçª—å£ä¼šéšç€æ•°æ®åŒ…çš„ç¡®è®¤è€Œå‘å‰æ»‘åŠ¨ã€‚é™åˆ¶çª—å£å¤§å°çš„åŸå› æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯æµé‡æ§åˆ¶ï¼Œé˜²æ­¢æ¥æ”¶è€…è¢«å‘é€è€…çš„å¤§é‡æ•°æ®åŒ…æ·¹æ²¡ï¼›å¦ä¸€ä¸ªæ˜¯ TCP æ‹¥å¡æ§åˆ¶ åœ¨ GBN åè®®ä¸­ï¼Œæ¥æ”¶æ–¹ä¸¢å¼ƒæ‰€æœ‰å¤±åºåˆ†ç»„ã€‚è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯æ¥æ”¶ç¼“å­˜ç®€å•ï¼Œå³æ¥æ”¶æ–¹ä¸éœ€è¦ç¼“å­˜ä»»ä½•å¤±åºåˆ†ç»„ã€‚å› æ­¤ï¼Œè™½ç„¶å‘é€æ–¹å¿…é¡»ç»´æŠ¤çª—å£çš„ä¸Šä¸‹è¾¹ç•ŒåŠ nextseqnumåœ¨è¯¥çª—å£çš„ä½ç½®ï¼Œä½†æ¥æ”¶æ–¹éœ€è¦ç»´æŠ¤çš„å”¯ä¸€ä¿¡æ¯å°±æ˜¯ä¸‹ä¸€ä¸ªæŒ‰åºæ¥æ”¶çš„åˆ†ç»„åºå·ã€‚è¿è¡Œä¸­çš„ GBN å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š Notes å¦‚æœæŸä¸ªæŠ¥æ–‡æ®µæ²¡æœ‰è¢«æ­£ç¡®æ¥æ”¶ï¼Œåˆ™ä»è¿™ä¸ªæŠ¥æ–‡æ®µåˆ°åé¢çš„æŠ¥æ–‡æ®µéƒ½è¦é‡æ–°å‘é€ã€‚ é‡‡ç”¨ç´¯è®¡åº”ç­”çš„æ–¹å¼ã€‚ä¾‹å¦‚æ¥æ”¶ç«¯è¿”å› ACK=3ï¼Œåˆ™è¯æ˜æŠ¥æ–‡æ®µ 3 ä»¥åŠä¹‹å‰çš„æŠ¥æ–‡æ®µéƒ½è¢«æ­£ç¡®æ¥æ”¶ã€‚(GBN å¦‚ä½•ä¿è¯ 3 ä¹‹å‰çš„æ•°æ®è¢«æ­£ç¡®æ¥æ”¶äº†å‘¢ï¼Ÿåœ¨ GBN çš„æ¥æ”¶çª—å£$W_{R}=1$,å³æŒ‰é¡ºåºé€ä¸ªæ¥å—æ•°æ®,å› æ­¤æ¥æ”¶æ–¹åªèƒ½æŒ‰åºæ¥å—æ­£ç¡®åˆ°è¾¾çš„æ•°æ®åˆ†ç»„) æ¥æ”¶ç«¯ä¸å¯¹å¤±åºåˆ°è¾¾çš„åˆ†ç»„è¿›è¡Œç¼“å­˜ã€‚ å›é€€å¸§åè®®åœ¨æµæ°´çº¿ä¼ è¾“çš„åŸºç¡€ä¸Šåˆ©ç”¨å‘é€çª—å£æ¥é™åˆ¶å‘é€æ–¹è¿ç»­å‘é€æ•°æ®åˆ†ç»„çš„æ•°å‘˜ï¼Œæ˜¯ä¸€ç§è¿ç»­ ARQ åè®®ï¼Œ åœ¨åè®®çš„å·¥ä½œè¿‡ç¨‹ä¸­å‘é€çª—å›—å’Œæ¥æ”¶çª—å›—ä¸æ–­å‘å‰æ»‘åŠ¨ï¼Œå› æ­¤è¿™ç±»åè®®åˆç§°ä¸ºæ»‘åŠ¨åœŠå›—åè®®ã€‚ ç¼ºç‚¹:å¦‚æœå‘ç”Ÿé”™è¯¯ï¼ŒGBN åè®®ä¼šä¸¢å¼ƒåç»­çš„æ‰€æœ‰åŒ…ï¼Œå³ä½¿å®ƒä»¬å·²ç»åˆ°è¾¾å¹¶ä¸”æ²¡æœ‰é”™è¯¯ã€‚è¿™å¯èƒ½å¯¼è‡´æ•ˆç‡ä½ä¸‹ï¼Œç‰¹åˆ«æ˜¯åœ¨é€šä¿¡çº¿è·¯è´¨é‡ä¸å¥½çš„æƒ…å†µä¸‹ FSM é€‰æ‹©é‡ä¼ åè®® Selective Repeat Protocol GBN åè®®çš„æ¥æ”¶çª—å£å°ºå¯¸ WR åªèƒ½ç­‰äº 1 ï¼Œå› æ­¤æ¥æ”¶æ–¹åªèƒ½æŒ‰åºæ¥æ”¶æ­£ç¡®åˆ°è¾¾çš„æ•°æ®åˆ†ç»„ã€‚ä¸€ä¸ªæ•°æ®åˆ†ç»„çš„è¯¯ç ä¼šå¯¼è‡´å…¶åç»­å¤šä¸ªæ•°æ®åˆ†ç»„ä¸èƒ½è¢«æ¥æ”¶æ–¹æŒ‰åºæ¥æ”¶è€Œä¸¢å¼ƒï¼ˆå°½ç®¡å®ƒä»¬æ— ä¹±åºå’Œè¯¯ç ï¼‰ã€‚è¿™å¿…ç„¶ä¼šé€ æˆå‘é€æ–¹å¯¹è¿™äº›æ•°æ®åˆ†ç»„çš„è¶…æ—¶é‡ä¼ ï¼Œæ˜¾ç„¶è¿™æ˜¯å¯¹é€šä¿¡èµ„æºçš„æå¤§æµªè´¹ã€‚ä¸ºäº†è¿›ä¸€æ­¥æé«˜æ€§èƒ½ï¼Œå¯è®¾æ³•åªé‡ä¼ å‡ºç°è¯¯ç çš„æ•°æ®åˆ†ç»„ã€‚å› æ­¤ï¼Œæ¥æ”¶çª—å£çš„å°ºå¯¸ä¸åº”å†ç­‰äº 1 ï¼ˆè€Œåº”å¤§äº 1 ï¼‰ä»¥ä¾¿æ¥æ”¶æ–¹å…ˆæ”¶ä¸‹å¤±åºåˆ°è¾¾ä½†æ— è¯¯ç äº•ä¸”åºå·è½åœ¨æ¥æ”¶çª—å£å†…çš„é‚£äº›æ•°æ®åˆ†ç»„ï¼Œç­‰åˆ°æ‰€ç¼ºåˆ†ç»„æ”¶é½åå†ä¸€äº•é€äº¤ä¸Šå±‚ã€‚è¿™æ˜¯é€‰æ‹©é‡ä¼ åè®®ã€‚ $$ å‘é€çª—å£å°ºå¯¸W_{T}å¿…é¡»æ»¡è¶³: 1 < W_{T} \\lt 2^{n-1}; nä¸ºåˆ†ç»„ä¸­çš„bitæ•° \\\\ è‹¥W_{T} = 1,åˆ™é€€åŒ–ä¸ºåœæ­¢ç­‰å¾…åè®®;è‹¥W_{T} \\gt 2^{n-1},åˆ™ä¼šé€ æˆæ¥æ”¶æ–¹æ— æ³•è¾¨åˆ«æ–°æ—§æ•°æ®åˆ†ç»„çš„é—®é¢˜\\\\ æ¥æ”¶çª—å£å°ºå¯¸W_{R}å¿…é¡»æ»¡è¶³: 1 < W_{R} \\leq W_{T}\\\\ è‹¥W_{R} = 1,åˆ™é€€åŒ–ä¸ºå›é€€ N å¸§åè®®;W_{R} \\gt W_{T}æ²¡æœ‰æ„ä¹‰ $$ ç‚¹å¯¹ç‚¹åè®® Point to Point Protocolç‚¹å¯¹ç‚¹åè®® PPPï¼ˆPoint-to-Point Protocolï¼‰æ˜¯ç›®å‰ä½¿ç”¨æœ€å¹¿æ³›çš„ç‚¹å¯¹ç‚¹æ•°æ®é“¾è·¯å±‚åè®® PPP åè®®æ˜¯å› ç‰¹ç½‘å·¥ç¨‹ä»»åŠ¡ç»„ IEIF åœ¨ 1992 å¹´åˆ¶å®šçš„ã€‚ç»è¿‡ 1993 å¹´å’Œ 1994 å¹´çš„ä¿®è®¢ï¼Œç°åœ¨çš„ PPP åè®®å·²æˆä¸ºå› ç‰¹ç½‘çš„æ­£å¼æ ‡å‡†[RFC1661ï¼ŒRFC1662] æ•°æ®é“¾è·¯å±‚ä½¿ç”¨çš„ä¸€ç§åè®®ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯ï¼šç®€å•ï¼›åªæ£€æµ‹å·®é”™ï¼Œè€Œä¸æ˜¯çº æ­£é”™ï¼›ä¸ä½¿ç”¨åºå·ï¼Œä¹Ÿä¸è¿›è¡Œæµé‡æ§åˆ¶ï¼›å¯åŒæ—¶æ”¯æŒå¤šç§ç½‘ç»œå±‚åè®®","link":"/UESTC/ComputerNetworking/Ch3-1DataLinkLayer/"},{"title":"æ•°æ®é“¾è·¯å±‚ Datalink Layer â…¡","text":"ç‚¹å¯¹ç‚¹åè®® Point to Point Protocolä¸€èˆ¬çš„ç”¨æˆ·æ¥å…¥äº’è”ç½‘çš„æ–¹å¼: è¿æ¥åˆ°æŸä¸ªå› ç‰¹ç½‘æœåŠ¡æä¾›è€… ISP(ä¸­å›½ç”µä¿¡,ä¸­å›½ç§»åŠ¨.etc),ç”¨æˆ·è®¡ç®—æœºè·å–åˆ° ISP æ‰€åˆ†é…çš„åˆæ³• IP åœ°å€å,æ‰èƒ½æˆä¸ºå› ç‰¹ç½‘çš„ä¸€å‘˜;PPPoE(PPP over Ethernet)åè®®åœ¨å®¶åº­å’Œå°å‹ä¼ä¸šä¸­è¢«å¹¿æ³›ç”¨äºè¿æ¥åˆ°äº’è”ç½‘æœåŠ¡æä¾›å•† PPPï¼ˆPoint-to-Point Protocolï¼‰æ˜¯ä¸€ç§ç½‘ç»œåè®®,é€šå¸¸ç”¨äºåœ¨ä¸¤ç‚¹ä¹‹é—´å»ºç«‹ç›´æ¥è¿æ¥,ä¾‹å¦‚è®¡ç®—æœºå’Œäº’è”ç½‘æœåŠ¡æä¾›å•†ï¼ˆISPï¼‰çš„è¿æ¥ã€‚PPP å¯ä»¥åœ¨å„ç§ç±»å‹çš„ç‰©ç†ç½‘ç»œä¸Šè¿è¡Œ,åŒ…æ‹¬ä¸²è¡Œçº¿ã€ç”µè¯çº¿ã€åŒè½´ç”µç¼†ã€å…¨åŒå·¥å…‰çº¤ä¼ è¾“çº¿è·¯æˆ–æ— çº¿è¿æ¥ç­‰ã€‚ Components of PPPThe Link Control Protocol (LCP): responsible for establishing, configuring, and testing the link between the two devices. It negotiates link parameters like the maximum frame size and compression type while monitoring the link for errors and dropsThe Authentication Protocol (AP): responsible for verifying the identities of the two devices using a range of authentication methods, including passwords, digital certificates, and biometricsThe Network Control Protocol (NCP): responsible for negotiating the network layer protocol used to transmit data over the connection, supporting a variety of network layer protocols such as IP, IPX, and AppleTalk! PPP çš„ä¸»è¦ç‰¹æ€§å’ŒåŠŸèƒ½ å°è£…æ•°æ®ï¼šPPP å¯ä»¥å°è£… IP,IPX ç­‰ç½‘ç»œå±‚åè®®çš„æ•°æ®åŒ…,ä½¿å®ƒä»¬å¯ä»¥åœ¨ç‚¹å¯¹ç‚¹é“¾æ¥ä¸Šä¼ è¾“ã€‚ èº«ä»½éªŒè¯ï¼šPPP æ”¯æŒ PAPï¼ˆPassword Authentication Protocolï¼‰å’Œ CHAPï¼ˆChallenge Handshake Authentication Protocolï¼‰ç­‰èº«ä»½éªŒè¯åè®®,è¿™äº›åè®®å¯ä»¥åœ¨å»ºç«‹è¿æ¥æ—¶éªŒè¯ç”¨æˆ·çš„èº«ä»½ã€‚ é“¾æ¥æ§åˆ¶ï¼šPPP ä½¿ç”¨ LCPï¼ˆLink Control Protocolï¼‰æ¥å»ºç«‹ã€é…ç½®å’Œæµ‹è¯•æ•°æ®é“¾è·¯è¿æ¥ã€‚ ç½‘ç»œæ§åˆ¶ï¼šPPP ä½¿ç”¨ NCPï¼ˆNetwork Control Protocolï¼‰æ¥å»ºç«‹å’Œé…ç½®ä¸åŒçš„ç½‘ç»œå±‚åè®®ã€‚ é”™è¯¯æ£€æµ‹ï¼šPPP å¸§åŒ…å«ä¸€ä¸ªæ ¡éªŒå’Œå­—æ®µ,ç”¨äºé”™è¯¯æ£€æµ‹ã€‚ å¤šåè®®æ”¯æŒï¼šPPP æ”¯æŒå¤šç§ç½‘ç»œå±‚åè®®,è¿™ä½¿å¾—å®ƒå¯ä»¥åœ¨å„ç§ä¸åŒçš„ç½‘ç»œç¯å¢ƒä¸­ä½¿ç”¨ã€‚ PPP æ˜¯ä¸€ç§çµæ´»ä¸”å¹¿æ³›ä½¿ç”¨çš„åè®®,ç‰¹åˆ«é€‚ç”¨äºæ‹¨å·å’Œ DSL è¿æ¥ã€‚å®ƒæ˜¯è®¸å¤šäº’è”ç½‘ç”¨æˆ·è¿æ¥åˆ° ISP çš„åŸºç¡€ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯ï¼šç®€å•ï¼›åªæ£€æµ‹å·®é”™,è€Œä¸æ˜¯çº æ­£å·®é”™ï¼›ä¸ä½¿ç”¨åºå·,ä¹Ÿä¸è¿›è¡Œæµé‡æ§åˆ¶ï¼›å¯åŒæ—¶æ”¯æŒå¤šç§ç½‘ç»œå±‚åè®®,æ˜¯ç›®å‰ä½¿ç”¨æœ€å¹¿æ³›çš„ç‚¹å¯¹ç‚¹æ•°æ®é“¾è·¯å±‚åè®® PPP å¸§æ ¼å¼ PPP é€æ˜ä¼ è¾“é¢å‘å­—èŠ‚çš„å¼‚æ­¥é“¾è·¯ï¼šå­—èŠ‚å¡«å……æ³•(æ’å…¥è½¬ä¹‰å­—ç¬¦)é¢å‘æ¯”ç‰¹çš„åŒæ­¥é“¾è·¯ï¼šæ¯”ç‰¹å¡«å……æ³•(æ’å…¥æ¯”ç‰¹ 0) å·®é”™æ£€æµ‹èƒ½å¤Ÿå¯¹æ¥æ”¶ç«¯æ”¶åˆ°çš„å¸§è¿›è¡Œæ£€æµ‹,å¹¶ç«‹å³ä¸¢å¼ƒæœ‰å·®é”™çš„å¸§ã€‚å› æ­¤ PPP å‘ä¸Šå±‚æä¾›çš„æ˜¯ä¸å¯é ä¼ è¾“æœåŠ¡ å·¥ä½œçŠ¶æ€ Bob initiates a connection by dialing his ISPâ€™s phone number Bobâ€™s modem establishes a physical connection with the ISPâ€™s modem over a phone line The two modems exchange LCP packets for negotiating the connection parameters. Parameters are, for instance, the maximum frame size and compression type They agree to a maximum frame size of 1500 bytes with no compression After the LCP negotiation, Bobâ€™s modem and the ISPâ€™s modem authenticate each otherâ€™s identities The ISP uses the Challenge-Handshake Authentication Protocol (CHAP) to verify Bobâ€™s identity. Bob, however, employs the Password Authentication Protocol (PAP) to verify the ISPâ€™s identity Once authentication is complete, the two modems exchange NCP packets. So, they determine which network layer protocol will be used to transmit data over the connection They agree to use the TCP/IP protocol suite With the NCP negotiation complete, we can transmit the data between Bobâ€™s computer and the internet using the TCP/IP protocol suite through encapsulated frames transmitted over the PPP connection Finally, when Bob finishes using the internet, he can terminate the PPP connection by disconnecting the modem or logging off the ISPâ€™s **server*PPP åè®®å·²ä¸æ˜¯çº¯ç²¹çš„æ•°æ®é“¾è·¯å±‚çš„åè®®,å®ƒè¿˜åŒ…å«äº†ç‰©ç†å±‚å’Œç½‘ç»œå±‚çš„å†…å®¹* åª’ä½“æ¥å…¥æ§åˆ¶ Media Access ControlMAC å¼•å…¥å±€åŸŸç½‘çš„æ•°æ®é“¾è·¯å±‚ å±€åŸŸç½‘æœ€ä¸»è¦çš„ç‰¹ç‚¹æ˜¯ï¼š ç½‘ç»œä¸ºä¸€ä¸ªå•ä½æ‰€æ‹¥æœ‰ï¼› åœ°ç†èŒƒå›´å’Œç«™ç‚¹æ•°ç›®å‡æœ‰é™ã€‚ å±€åŸŸç½‘å…·æœ‰å¦‚ä¸‹ä¸»è¦ä¼˜ç‚¹ï¼š å…·æœ‰å¹¿æ’­åŠŸèƒ½,ä»ä¸€ä¸ªç«™ç‚¹å¯å¾ˆæ–¹ä¾¿åœ°è®¿é—®å…¨ç½‘ã€‚å±€åŸŸç½‘ä¸Šçš„ä¸»æœºå¯å…±äº«è¿æ¥åœ¨å±€åŸŸç½‘ä¸Šçš„å„ç§ç¡¬ä»¶å’Œè½¯ä»¶èµ„æºã€‚ ä¾¿äºç³»ç»Ÿçš„æ‰©å±•å’Œé€æ¸åœ°æ¼”å˜,å„è®¾å¤‡çš„ä½ç½®å¯çµæ´»è°ƒæ•´å’Œæ”¹å˜ã€‚ æé«˜äº†ç³»ç»Ÿçš„å¯é æ€§ã€å¯ç”¨æ€§å’Œæ®‹å­˜æ€§ã€‚ æ•°æ®é“¾è·¯å±‚çš„ä¸¤ä¸ªå­å±‚ä¸ºäº†ä½¿æ•°æ®é“¾è·¯å±‚èƒ½æ›´å¥½åœ°é€‚åº”å¤šç§å±€åŸŸç½‘æ ‡å‡†,IEEE 802 å§”å‘˜ä¼šå°±å°†å±€åŸŸç½‘çš„æ•°æ®é“¾è·¯å±‚æ‹†æˆä¸¤ä¸ªå­å±‚ï¼š é€»è¾‘é“¾è·¯æ§åˆ¶ LLC (Logical Link Control)å­å±‚ï¼› åª’ä½“æ¥å…¥æ§åˆ¶ MAC (Medium Access Control)å­å±‚ã€‚ ä¸æ¥å…¥åˆ°ä¼ è¾“åª’ä½“æœ‰å…³çš„å†…å®¹éƒ½æ”¾åœ¨ MAC å­å±‚,è€Œ LLC å­å±‚åˆ™ä¸ä¼ è¾“åª’ä½“æ— å…³ã€‚ä¸ç®¡é‡‡ç”¨ä½•ç§åè®®çš„å±€åŸŸç½‘,å¯¹ LLC å­å±‚æ¥è¯´éƒ½æ˜¯é€æ˜çš„ã€‚ ä¸ºä»€ä¹ˆè¦åª’ä½“æ¥å…¥æ§åˆ¶ï¼ˆä»‹è´¨è®¿é—®æ§åˆ¶ï¼‰ï¼Ÿå…±äº«ä¿¡é“å¸¦æ¥çš„é—®é¢˜è‹¥å¤šä¸ªè®¾å¤‡åœ¨å…±äº«ä¿¡é“ä¸ŠåŒæ—¶å‘é€æ•°æ®,åˆ™ä¼šé€ æˆå½¼æ­¤å¹²æ‰°,å¯¼è‡´å‘é€å¤±è´¥ã€‚ åª’ä½“æ¥å…¥æ§åˆ¶(MAC)å¯åˆ†ä¸º 1. é™æ€ä¿¡é“åˆ’åˆ† Static Channel Allocationé™æ€ä¿¡é“åˆ’åˆ†ï¼ˆStatic Channel Allocationï¼‰æ˜¯ä¸€ç§é€šä¿¡ç½‘ç»œä¸­çš„èµ„æºåˆ†é…ç­–ç•¥,å®ƒå°†å¯ç”¨çš„é¢‘è°±èµ„æºäº‹å…ˆå›ºå®šåœ°åˆ†é…ç»™å„ä¸ªç”¨æˆ·æˆ–è€…ä¿¡é“ã€‚è¿™ç§æ–¹å¼ä¸‹,å³ä½¿æŸä¸ªç”¨æˆ·æˆ–ä¿¡é“å½“å‰æ²¡æœ‰æ•°æ®éœ€è¦ä¼ è¾“,å…¶åˆ†é…çš„èµ„æºä¹Ÿä¸èƒ½è¢«å…¶ä»–ç”¨æˆ·æˆ–ä¿¡é“ä½¿ç”¨,å› æ­¤å¯èƒ½å¯¼è‡´èµ„æºçš„æµªè´¹ã€‚è°¨å¸¸åœ¨æ— çº¿ç½‘ç»œçš„ç‰©ç†å±‚ä¸­ä½¿ç”¨ SCA æœ‰ä¸‰ç§ä¸»è¦çš„æŠ€æœ¯,åœ¨è¿™äº›æŠ€æœ¯ä¸­,æ¯ä¸ªç”¨æˆ·æˆ–ä¿¡é“éƒ½è¢«åˆ†é…åˆ°ä¸€ä¸ªç‰¹å®šçš„é¢‘ç‡å¸¦å®½ã€æ—¶é—´æ§½æˆ–ç¼–ç ã€‚ é¢‘åˆ†å¤šå€ FDMA,Frequency Division Multiple Access æ—¶åˆ†å¤šå€ TDMA,Time Division Multiple Access ç åˆ†å¤šå€ CDMA,Code Division Multiple Access 2. åŠ¨æ€æ¥å…¥æ§åˆ¶ Dynamic Access Control åŠ¨æ€æ¥å…¥æ§åˆ¶ï¼ˆDynamic Access Controlï¼‰æ˜¯ä¸€ç§ç½‘ç»œé€šä¿¡ä¸­çš„èµ„æºåˆ†é…ç­–ç•¥,å®ƒæ ¹æ®ç½‘ç»œçš„å®æ—¶éœ€æ±‚åŠ¨æ€åœ°åˆ†é…èµ„æºã€‚ä¸é™æ€ä¿¡é“åˆ’åˆ†ï¼ˆå¦‚ FDMAã€TDMAã€CDMAï¼‰ç›¸æ¯”,åŠ¨æ€æ¥å…¥æ§åˆ¶å¯ä»¥æ›´æœ‰æ•ˆåœ°åˆ©ç”¨å¯ç”¨èµ„æºã€‚åœ¨åŠ¨æ€æ¥å…¥æ§åˆ¶ä¸­,å¦‚æœä¸€ä¸ªç”¨æˆ·æ²¡æœ‰æ•°æ®éœ€è¦ä¼ è¾“,å…¶åˆ†é…çš„èµ„æºå¯ä»¥è¢«å…¶ä»–ç”¨æˆ·ä½¿ç”¨,ä»è€Œé¿å…äº†èµ„æºçš„æµªè´¹ã€‚è¿™ç§æ–¹å¼éœ€è¦ä¸€ä¸ªæ¥å…¥æ§åˆ¶åè®®æ¥ç¡®å®šå“ªäº›ç”¨æˆ·å¯ä»¥åœ¨å“ªä¸ªæ—¶åˆ»ä½¿ç”¨ç½‘ç»œèµ„æºã€‚ å—æ§æ¥å…¥ Controlled Access(å·²ç»è¢«æ·˜æ±°) é›†ä¸­æ§åˆ¶ Centralized Control åˆ†æ•£æ§åˆ¶ Distributed Control éšæœºæ¥å…¥ Random Access ALOHA CSMA/CD CSMA/CA MAC å®šä¹‰Media access control, medium access control or simply MAC, is a specific network data transfer policy. It determines how data transmits through a regular network cable. The protocol exists to ease data packetsâ€™ transfer between two computers and ensure no collision or simultaneous data transit occurs. The medium access control â€“ commonly referred to as the MAC protocol â€“ is, effectively, a sublayer or MAC sublayer that controls hardware responsible for the communication with a wired, wireless or optical transmission medium. The MAC sublayer is part of the two sublayers scheme: data link layer. The other part of the data link layer is the logical link control (LLC) sublayer. The LLC sublayer offers multiplexing and flow control for the logical link, and the MAC sublayer acts as the interface between the LLC sublayer and the physical layer within a transmission medium. åª’ä½“è®¿é—®æ§åˆ¶ï¼ˆMACï¼‰æ˜¯æ•°æ®é€šä¿¡åè®®ä¸­ä¸€ç§å­å±‚,å®ƒæ˜¯æ•°æ®é“¾è·¯å±‚çš„ä¸€éƒ¨åˆ†ã€‚MAC å­å±‚çš„ä¸»è¦èŒè´£æ˜¯æ§åˆ¶è®¾å¤‡å¦‚ä½•è®¿é—®ç½‘ç»œä»‹è´¨ï¼ˆä¾‹å¦‚ä»¥å¤ªç½‘,Wi-Fiï¼‰,ä»¥ä¾¿è¿›è¡Œæœ‰æ•ˆçš„ä¿¡æ¯ä¼ è¾“ã€‚MAC åœ°å€æ˜¯ä¸€ä¸ªè®¾å¤‡ç½‘ç»œæ¥å£çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚å®ƒé€šå¸¸ç”±å…­ç»„ä¸¤ä½åå…­è¿›åˆ¶æ•°å­—ç»„æˆ,ä¾‹å¦‚ï¼š00:0A:95:9D:68:16ã€‚æ¯ä¸ªç½‘ç»œè®¾å¤‡çš„ MAC åœ°å€éƒ½æ˜¯å…¨çƒå”¯ä¸€çš„,ç”±è®¾å¤‡åˆ¶é€ å•†åœ¨ç”Ÿäº§æ—¶åˆ†é…ã€‚MAC åœ°å€åœ¨ç½‘ç»œé€šä¿¡ä¸­èµ·ç€å…³é”®ä½œç”¨ã€‚å½“ä¸€ä¸ªè®¾å¤‡éœ€è¦å‘é€æ•°æ®åŒ…åˆ°å¦ä¸€ä¸ªè®¾å¤‡æ—¶,å®ƒä¼šä½¿ç”¨ç›®æ ‡è®¾å¤‡çš„ MAC åœ°å€æ¥å®šä½å®ƒã€‚è¿™æ˜¯åœ¨åŒä¸€å±€åŸŸç½‘ï¼ˆLANï¼‰å†…è¿›è¡Œé€šä¿¡çš„åŸºç¡€ã€‚ é™æ€åˆ’åˆ†ä¿¡é“ Static Channel Allocation å¤ç”¨ (Multiplexing) æ˜¯é€šä¿¡æŠ€æœ¯ä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µã€‚å¤ç”¨å°±æ˜¯é€šè¿‡ä¸€æ¡ç‰©ç†çº¿è·¯åŒæ—¶ä¼ è¾“å¤šè·¯ç”¨æˆ·çš„ä¿¡å·ã€‚å½“ç½‘ç»œä¸­ä¼ è¾“åª’ä½“çš„ä¼ è¾“å®¹é‡å¤§äºå¤šæ¡å•ä¸€ä¿¡é“ä¼ è¾“çš„æ€»é€šä¿¡é‡æ—¶,å¯åˆ©ç”¨å¤ç”¨æŠ€æœ¯åœ¨ä¸€æ¡ç‰©ç†çº¿è·¯ä¸Šå»ºç«‹å¤šæ¡é€šä¿¡ä¿¡é“æ¥å……åˆ†åˆ©ç”¨ä¼ è¾“åª’ä½“çš„å¸¦å®½ã€‚ é¢‘åˆ†å¤ç”¨ FDM (Frequency Division Multiplexing) å°†ä¼ è¾“çº¿è·¯çš„é¢‘å¸¦èµ„æºåˆ’åˆ†æˆå¤šä¸ªå­é¢‘å¸¦,å½¢æˆå¤šä¸ªå­ä¿¡é“,å„å­ä¿¡é“é—´éœ€è¦ç•™å‡ºéš”ç¦»é¢‘å¸¦,ä»¥å…é€ æˆå­ä¿¡é“é—´çš„åæ‰°ã€‚å½“å¤šè·¯ä¿¡å·è¾“å…¥ä¸€ä¸ªå¤šè·¯å¤ç”¨å™¨æ—¶,è¿™ä¸ªå¤ç”¨å™¨å°†æ¯ä¸€è·¯ä¿¡å·è°ƒåˆ¶åˆ°ä¸åŒé¢‘ç‡çš„è½½æ³¢ä¸Šã€‚æ¥æ”¶ç«¯ç”±ç›¸åº”çš„åˆ†ç”¨å™¨é€šè¿‡æ»¤æ³¢å°†å„è·¯ä¿¡å·åˆ†å¼€,å°†åˆæˆçš„å¤ç”¨ä¿¡å·æ¢å¤æˆåŸå§‹çš„å¤šè·¯ä¿¡å·ã€‚ æ—¶åˆ†å¤ç”¨ TDM (Time Division Multiplexing) æ—¶åˆ†å¤ç”¨åˆ™æ˜¯å°†æ—¶é—´åˆ’åˆ†ä¸ºä¸€æ®µæ®µç­‰é•¿çš„æ—¶åˆ†å¤ç”¨å¸§ï¼ˆTDM å¸§ï¼‰ã€‚æ¯ä¸€ä¸ªæ—¶åˆ†å¤ç”¨çš„ç”¨æˆ·åœ¨æ¯ä¸€ä¸ª TDM å¸§ä¸­å ç”¨å›ºå®šåºå·çš„æ—¶éš™ã€‚ æ¯ä¸€ä¸ªç”¨æˆ·æ‰€å ç”¨çš„æ—¶éš™æ˜¯å‘¨æœŸæ€§åœ°å‡ºç°ï¼ˆå…¶å‘¨æœŸå°±æ˜¯ TDM å¸§çš„é•¿åº¦ï¼‰çš„ã€‚ TDM ä¿¡å·ä¹Ÿç§°ä¸ºç­‰æ—¶ (isochronous) ä¿¡å·ã€‚ æ—¶åˆ†å¤ç”¨çš„æ‰€æœ‰ç”¨æˆ·åœ¨ä¸åŒçš„æ—¶é—´å ç”¨åŒæ ·çš„é¢‘å¸¦å®½åº¦ã€‚ æ³¢åˆ†å¤ç”¨ WDM (Wavelength Division Multiplexing)æ³¢åˆ†å¤ç”¨å°±æ˜¯å…‰çš„é¢‘åˆ†å¤ç”¨,ä½¿ç”¨ä¸€æ ¹å…‰çº¤æ¥åŒæ—¶ä¼ è¾“å¤šä¸ªå…‰è½½æ³¢ä¿¡å·;å…‰ä¿¡å·ä¼ è¾“ä¸€æ®µè·ç¦»åä¼šè¡°å‡,æ‰€ä»¥è¦ç”¨æºé“’å…‰çº¤æ”¾å¤§å™¨ EDFA(Erbium-Doped Fiber Amplifier) æ”¾å¤§å…‰ä¿¡å· ç åˆ†å¤ç”¨ CDM (Code Division Multiplexing)ç åˆ†å¤ç”¨ CDM æ˜¯å¦ä¸€ç§å…±äº«ä¿¡é“çš„æ–¹æ³•ã€‚å®é™…ä¸Š,ç”±äºè¯¥æŠ€æœ¯ä¸»è¦ç”¨äºå¤šå€æ¥å…¥,äººä»¬æ›´å¸¸ç”¨çš„åè¯æ˜¯ç åˆ†å¤šå€ CDMA(Code Division MuItipIe Access) åŒç†,é¢‘åˆ†å¤ç”¨ FDM å’Œæ—¶åˆ†å¤ç”¨ TDM åŒæ ·å¯ç”¨äºå¤šå€æ¥å…¥,ç›¸åº”çš„åè¯æ˜¯é¢‘åˆ†å¤šå€ FDMA(Frequency Division Multiple Access) å’Œæ—¶åˆ†å¤šå€ TDMA(Time Division Multiple Access);ä¸ FDM å’Œ TDM ä¸åŒ,CDM çš„æ¯ä¸€ä¸ªç”¨æˆ·å¯ä»¥åœ¨åŒæ ·çš„æ—¶é—´ä½¿ç”¨åŒæ ·çš„é¢‘å¸¦è¿›è¡Œé€šä¿¡ã€‚ç”±äºå„ç”¨æˆ·ä½¿ç”¨ç»è¿‡ç‰¹æ®ŠæŒ‘é€‰çš„ä¸åŒç å‹,å› æ­¤å„ç”¨æˆ·ä¹‹é—´ä¸ä¼šé€ æˆå¹²æ‰°ã€‚CDM æœ€åˆæ˜¯ç”¨äºå†›äº‹é€šä¿¡çš„,å› ä¸ºè¿™ç§ç³»ç»Ÿæ‰€å‘é€çš„ä¿¡å·æœ‰å¾ˆå¼ºçš„æŠ—å¹²æ‰°èƒ½åŠ›,å…¶é¢‘è°±ç±»ä¼¼äºç™½å™ªå£°,ä¸æ˜“è¢«æ•Œäººå‘ç°ã€‚éšç€æŠ€æœ¯çš„è¿›æ­¥,CDMA è®¾å¤‡çš„ä»·æ ¼å’Œä½“ç§¯éƒ½å¤§å¹…åº¦ä¸‹é™,å› è€Œç°åœ¨å·²å¹¿æ³›ç”¨äºæ°‘ç”¨çš„ç§»åŠ¨é€šä¿¡ä¸­ å¤ç”¨ä¸å¤šå€çš„æ¦‚å¿µã€‚å¯ç®€å•ç†è§£å¦‚ä¸‹ï¼š å¤ç”¨(Multiplexing)æ˜¯å°†å•ä¸€åª’ä½“çš„é¢‘å¸¦èµ„æºåˆ’åˆ†æˆå¾ˆå¤šå­ä¿¡é“,è¿™äº›å­ä¿¡é“ä¹‹é—´ç›¸äº’ç‹¬ç«‹,äº’ä¸å¹²æ‰°ã€‚ä»åª’ä½“çš„æ•´ä½“é¢‘å¸¦èµ„æºä¸Šçœ‹,æ¯ä¸ªå­ä¿¡é“åªå ç”¨è¯¥åª’ä½“é¢‘å¸¦èµ„çš„ä¸€éƒ¨åˆ†ã€‚ å¤šå€(Multiple Access),æ›´ç¡®åˆ‡åœ°åº”è¯¥ç§°ä¸ºå¤šç‚¹æ¥å…¥,å¤„ç†çš„æ˜¯åŠ¨æ€åˆ†é…ä¿¡é“ç»™ç”¨æˆ·;è¿™åœ¨ç”¨æˆ·æš‚æ—¶æ€§å ç”¨ä¿¡é“(å¦‚ç§»åŠ¨é€šä¿¡)çš„åº”ç”¨ä¸­æ˜¯å¿…é¡»çš„ã€‚åœ¨ä¿¡é“æ°¸ä¹…æ€§åœ°åˆ†é…ç»™ç”¨æˆ·(å¦‚æ— çº¿å¹¿æ’­ç­‰)çš„åº”ç”¨ä¸­,å¤šå€æ˜¯ä¸éœ€è¦çš„ æŸç§ç¨‹åº¦ä¸Š,FDMA,TDMAS CDMA å¯ä»¥åˆ†åˆ«çœ‹æˆæ˜¯ FDM,TDM,CDM çš„åº”ç”¨ åœ¨ CDMA ä¸­,æ¯ä¸€ä¸ªæ¯”ç‰¹æ—¶é—´å†åˆ’åˆ†ä¸º m ä¸ªçŸ­çš„é—´éš”,ç§°ä¸ºç ç‰‡ (Chip);é€šå¸¸ m çš„å€¼æ˜¯ 64 æˆ– 128 ä¸ºäº†ç®€å•èµ·è§,åœ¨åç»­çš„ä¸¾ä¾‹ä¸­,æˆ‘ä»¬å‡è®¾ m ä¸º 8; ä½¿ç”¨ CDMA çš„æ¯ä¸€ä¸ªç«™è¢«æŒ‡æ´¾ä¸€ä¸ªå”¯ä¸€çš„ m bit ç ç‰‡åºåˆ— (Chip Sequence); ä¸€ä¸ªç«™å¦‚æœè¦å‘é€æ¯”ç‰¹ 1 ,åˆ™å‘é€å®ƒè‡ªå·±çš„ m bit ç ç‰‡åºåˆ—ï¼› ä¸€ä¸ªç«™å¦‚æœè¦å‘é€æ¯”ç‰¹ 0 ,åˆ™å‘é€å®ƒè‡ªå·±çš„ m bit ç ç‰‡åºåˆ—çš„äºŒè¿›åˆ¶åç ï¼›æŒ‡æ´¾ç»™ï¼ˆ DMA ç³»ç»Ÿä¸­æŸä¸ªç«™ç‚¹çš„ç ç‰‡åºåˆ—ä¸º 00011011å‘é€æ¯”ç‰¹ 1:å‘é€è‡ªå·±çš„ç ç‰‡åºåˆ— 00011011å‘é€æ¯”ç‰¹ 0:å‘é€è‡ªå·±çš„ç ç‰‡åºåˆ—çš„äºŒè¿›åˆ¶åç  11100100ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬æŒ‰æƒ¯ä¾‹å°†ç ç‰‡åºåˆ—ä¸­çš„ 0 å†™ä¸º-1, å°† 1 å†™ä¸º+ 1 ã€‚åˆ™è¯¥ç«™ç‚¹çš„ç ç‰‡åºåˆ—æ˜¯(-1 -1 -1 + 1 + 1 -1 + 1 + 1) ç ç‰‡åºåˆ—éœ€è¦æ»¡è¶³çš„æ¡ä»¶ æ¯ä¸ªç«™çš„ Chip Sequence ä¸èƒ½ç›¸åŒ,å®é™…ä¸Šå¸¸é‡‡ç”¨ä¼ªéšæœºç ç‰‡åºåˆ—,è¿™æ ·å¯ä»¥ä½¿å¾—ç ç‰‡åºåˆ—ä¹‹é—´çš„ç›¸å…³æ€§å¾ˆå°,ä»è€Œå‡å°å¹²æ‰°ï¼› æ¯ä¸ªç«™çš„ Chip Sequence å¿…é¡»ç›¸äº’æ­£äº¤,ä»¤å‘é‡ S è¡¨ç¤ºç«™ S çš„ç ç‰‡åºåˆ—ï¼Œä»¤å‘é‡ T è¡¨ç¤ºå…¶ä»–ä»»ä½•ç«™çš„ç ç‰‡åºåˆ—ã€‚ä¸¤ä¸ªä¸åŒç«™ S å’Œ T çš„ç ç‰‡åºåˆ—æ­£äº¤ï¼Œå°±æ˜¯å‘é‡ S å’Œ T çš„è§„æ ¼åŒ–å†…ç§¯ä¸º 0 ï¼š æ»¡è¶³çš„ 4 ä¸ªæ¡ä»¶å¦‚å…¬å¼æ‰€ç¤º $$ \\begin{array}{ll} S \\cdot T \\equiv \\frac{1}{m} \\sum_{i=1}^{m} S_{i} T_{i}=0 & S \\cdot \\bar{T} \\equiv 0 \\\\ S \\cdot S \\equiv \\frac{1}{m} \\sum_{i=1}^{m} S_{i} S_{i}=\\frac{1}{m} \\sum_{i=1}^{m} S_{i}^{2}=\\frac{1}{m} \\sum_{i=1}^{m}( \\pm 1)^{2}=1 & S \\cdot \\bar{S} \\equiv-1 \\end{array} $$ Examples åŠ¨æ€æ¥å…¥æ§åˆ¶ Dynamic Access Control","link":"/UESTC/ComputerNetworking/Ch3-2DataLinkLayer/"},{"title":"ç½‘ç»œå±‚æ•°æ®å¹³é¢ Network Layer:Data Plane","text":"Overview of Network Layerç½‘ç»œå±‚æä¾›çš„åŠŸèƒ½ä»å‘é€æ–¹ä¸»æœºä¼ è¾“æŠ¥æ–‡æ®µåˆ°æ¥æ”¶æ–¹ä¸»æœºå‘é€æ–¹ä¸»æœºå°è£…æŠ¥æ–‡æ®µ(segments)ä¸ºæ•°æ®æŠ¥(datagrams)ç»™é“¾è·¯å±‚æ¥æ”¶æ–¹ä¸»æœºé€’äº¤æŠ¥æ–‡æ®µç»™ä¼ è¾“å±‚åœ¨æ¯ä¸ªä¸»æœºã€è·¯ç”±å™¨ä¸Šéƒ½éœ€è¦è¿è¡Œç½‘ç»œå±‚åè®®è·¯ç”±å™¨ä¼šæ£€æŸ¥é€šè¿‡å®ƒçš„æ‰€æœ‰ IP æ•°æ®æŠ¥çš„å¤´éƒ¨å­—æ®µï¼Œç„¶åæ ¹æ®ç›®çš„ IP åœ°å€å¯¹æ•°æ®æŠ¥è¿›è¡Œè½¬å‘ Forwarding and Routing: The Data Plane and Control Plane è½¬å‘(forwarding): å½“æ•°æ®åŒ…åˆ°è¾¾è·¯ç”±å™¨çš„è¾“å…¥é“¾è·¯æ—¶ï¼Œè·¯ç”±å™¨å¿…é¡»å°†æ•°æ®åŒ…ç§»åŠ¨åˆ°é€‚å½“çš„è¾“å‡ºé“¾è·¯ã€‚ä¾‹å¦‚ï¼Œä»ä¸»æœº H1 åˆ°è·¯ç”±å™¨ R1 çš„æ•°æ®åŒ…å¿…é¡»è¢«è½¬å‘åˆ°é€šå¾€ H2 çš„è·¯å¾„ä¸Šçš„ä¸‹ä¸€ä¸ªè·¯ç”±å™¨ã€‚å°†åˆ†ç»„ä»è·¯ç”±å™¨çš„è¾“å…¥ç«¯å£è½¬ç§»åˆ°æ­£ç¡®çš„è·¯ç”±å™¨è¾“å‡ºç«¯å£(ä¸»è¦åˆ©ç”¨ç¡¬ä»¶) è·¯ç”±(routing): ç½‘ç»œå±‚å¿…é¡»ç¡®å®šæ•°æ®åŒ…ä»å‘é€è€…æµå‘æ¥æ”¶è€…æ—¶æ‰€èµ°çš„è·¯ç”± route æˆ–è·¯å¾„ path,è®¡ç®—è¿™äº›è·¯å¾„çš„ç®—æ³•è¢«ç§°ä¸ºè·¯ç”±ç®—æ³•ã€‚ä¾‹å¦‚ï¼Œè·¯ç”±ç®—æ³•ä¼šç¡®å®šæ•°æ®åŒ…ä» Host1 æµå‘ Host2 çš„è·¯å¾„ã€‚è·¯ç”±åœ¨ç½‘ç»œå±‚çš„æ§åˆ¶å¹³é¢ Control Plane ä¸­å®ç°(ä¸»è¦åˆ©ç”¨è½¯ä»¶) è½¬å‘æŒ‡çš„æ˜¯è·¯ç”±å™¨åœ¨æœ¬åœ°å°†æ•°æ®åŒ…ä»è¾“å…¥é“¾è·¯æ¥å£è½¬ç§»åˆ°é€‚å½“çš„è¾“å‡ºé“¾è·¯æ¥å£çš„åŠ¨ä½œã€‚è½¬å‘åœ¨éå¸¸çŸ­çš„æ—¶é—´èŒƒå›´å†…å‘ç”Ÿï¼ˆé€šå¸¸æ˜¯å‡ çº³ç§’ï¼‰ï¼Œå› æ­¤é€šå¸¸åœ¨ç¡¬ä»¶ä¸­å®ç°ã€‚è·¯ç”±æŒ‡çš„æ˜¯ç¡®å®šæ•°æ®åŒ…ä»æºåˆ°ç›®çš„åœ°çš„ç«¯åˆ°ç«¯è·¯å¾„çš„ç½‘ç»œèŒƒå›´å†…çš„è¿‡ç¨‹ã€‚è·¯ç”±åœ¨æ›´é•¿çš„æ—¶é—´èŒƒå›´å†…å‘ç”Ÿï¼ˆé€šå¸¸æ˜¯å‡ ç§’é’Ÿï¼‰ï¼Œé€šå¸¸åœ¨è½¯ä»¶ä¸­å®ç°ã€‚ Control Plane: The Traditional Approachæ¯ä¸ªè·¯ç”±å™¨éƒ½æœ‰å•ç‹¬çš„è·¯ç”±ç®—æ³•ç»„ä»¶ï¼Œè·¯ç”±å™¨ä¹‹é—´é€šè¿‡äº¤äº’æ¥å®ç°æ§åˆ¶å¹³é¢ç”±è·¯ç”±ç®—æ³•å†³å®šäº†è·¯ç”±å™¨è½¬å‘è¡¨çš„å†…å®¹ Control Plane: The SDN Approachä¸€ä¸ªåˆ†ç¦»çš„ï¼ˆé€šå¸¸æ˜¯è¿œç¨‹çš„ï¼‰æ§åˆ¶å™¨å’Œè·¯ç”±å™¨æœ¬åœ°çš„æ§åˆ¶ä»£ç† (local control agentsï¼ŒCAs) äº¤äº’ï¼Œç”± remote controller è®¡ç®—å¹¶åˆ†å‘æ¯ä¸ªè·¯ç”±å™¨è¦ä½¿ç”¨çš„è½¬å‘è¡¨è¿œç¨‹æ§åˆ¶å™¨å¯èƒ½åœ¨å…·æœ‰é«˜å¯é æ€§å’Œå†—ä½™çš„è¿œç¨‹æ•°æ®ä¸­å¿ƒä¸­å®ç°ï¼Œå¹¶å¯èƒ½ç”± ISP æˆ–æŸç¬¬ä¸‰æ–¹ç®¡ç†ï¼Œå› ä¸ºè®¡ç®—è½¬å‘è¡¨å¹¶ä¸è·¯ç”±å™¨äº¤äº’çš„æ§åˆ¶å™¨æ˜¯åœ¨è½¯ä»¶ä¸­å®ç°çš„ï¼Œæ•…è¢«ç§°ä¸ºè½¯ä»¶å®šä¹‰ç½‘ç»œ(Software Defined Networking, SDN) Network Service Modelç½‘ç»œæœåŠ¡æ¨¡å‹ï¼ˆnetwork service modelï¼‰å®šä¹‰äº†åˆ†ç»„åœ¨å‘é€ä¸æ¥æ”¶ç«¯ç³»ç»Ÿä¹‹é—´çš„ç«¯åˆ°ç«¯è¿è¾“ç‰¹æ€§ã€‚ æŸäº›åˆ†ç»„äº¤æ¢æœºç§°ä¸ºé“¾è·¯å±‚äº¤æ¢æœºï¼ˆlink-layer switchï¼‰ï¼ŒåŸºäºé“¾è·¯å±‚å¸§ä¸­çš„å­—æ®µå€¼åšå‡ºè½¬å‘å†³å®šï¼Œè¿™äº›äº¤æ¢æœºå› æ­¤è¢«ç§°ä¸ºé“¾è·¯å±‚è®¾å¤‡ï¼›å…¶ä»–åˆ†ç»„äº¤æ¢æœºç§°ä¸ºè·¯ç”±å™¨ï¼ˆrouterï¼‰ï¼ŒåŸºäºç½‘ç»œå±‚æ•°æ®æŠ¥ä¸­çš„é¦–éƒ¨å­—æ®µå€¼åšå‡ºè½¬å‘å†³å®šï¼Œè·¯ç”±å™¨å› æ­¤æ˜¯ç½‘ç»œå±‚è®¾å¤‡ã€‚ ç½‘ç»œå±‚å¯èƒ½æä¾›çš„æœåŠ¡ é’ˆå¯¹å•ä¸ªçš„æ•°æ®æŠ¥ datagramï¼Œå¯æä¾›ä»¥ä¸‹æœåŠ¡ Guaranteed delivery ç¡®ä¿äº¤ä»˜ï¼šç¡®ä¿åˆ†ç»„åˆ°è¾¾ç›®çš„åœ°ã€‚ Guaranteed delivery with bounded delayï¼šæœ€å¤§æ—¶å»¶çš„ä¿è¯ï¼Œä¾‹å¦‚ç¡®ä¿ä¸»æœºåˆ°ä¸»æœºçš„æ—¶å»¶ä¸è¶…è¿‡ 40ms é’ˆå¯¹æ•°æ®åŒ…æµ(flow of datagrams)ï¼Œå¯æä¾›çš„æœåŠ¡æœ‰ In-order packet delivery æœ‰åºåˆ†ç»„äº¤ä»˜ï¼šæŒ‰å‘é€é¡ºåºåˆ°è¾¾ã€‚ Guaranteed minimal bandwidth ç¡®ä¿æœ€å°å¸¦å®½ï¼šå½“å‘é€ä¸»æœºä»¥ä½äºç‰¹å®šæ¯”ç‰¹ç‡çš„é€Ÿç‡å‘é€æ¯”ç‰¹ï¼Œåˆ†ç»„ä¸ä¼šä¸¢å¤±ï¼Œåœ¨ä¸€å®šæ—¶å»¶åˆ°è¾¾ã€‚ Security å®‰å…¨æ€§ï¼šç½‘ç»œå±‚å¯ä»¥åœ¨æºç«¯å¯¹æ‰€æœ‰æ•°æ®æŠ¥è¿›è¡ŒåŠ å¯†ï¼Œå¹¶åœ¨ç›®çš„ç«¯è¿›è¡Œè§£å¯†ï¼Œä»è€Œä¸ºæ‰€æœ‰ä¼ è¾“å±‚çš„æ®µæä¾›ä¿å¯†æ€§ã€‚ äº’è”ç½‘çš„ç½‘ç»œå±‚æä¾›äº†ä¸€ç§å•ä¸€çš„æœåŠ¡ï¼Œç§°ä¸ºå°½åŠ›è€Œä¸ºæœåŠ¡(best-effort service)ã€‚åœ¨å°½åŠ›è€Œä¸ºæœåŠ¡ä¸­ï¼Œæ•°æ®åŒ…æ—¢ä¸èƒ½ä¿è¯æŒ‰ç…§å‘é€çš„é¡ºåºè¢«æ¥æ”¶ï¼Œä¹Ÿä¸èƒ½ä¿è¯æœ€ç»ˆè¢«é€è¾¾ã€‚æ²¡æœ‰å¯¹ç«¯åˆ°ç«¯å»¶è¿Ÿçš„ä¿è¯ï¼Œä¹Ÿæ²¡æœ‰æœ€å°å¸¦å®½çš„ä¿è¯ã€‚ QOS QoS æ¨¡å‹ ä¼˜ç‚¹ ç¼ºç‚¹ Best Effort 1. ç®€å•ï¼Œä¸éœ€è¦å¤æ‚çš„ç½‘ç»œç­–ç•¥æˆ–åè®®ã€‚2. å…è®¸æ•°æ®åŒ…åœ¨ç½‘ç»œä¸­è‡ªç”±æµåŠ¨ï¼Œæ— éœ€é¢„è®¾è·¯å¾„ã€‚3. åœ¨æ— æ‹¥å¡çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æä¾›å¯é çš„æœåŠ¡ã€‚4. å…è®¸æœ€å¤§çš„ç½‘ç»œæ•ˆç‡å’Œæˆæœ¬æ•ˆç›Šã€‚ 1. ä¸å…è®¸èµ„æºé¢„ç•™æˆ–ä»»ä½•å…¶ä»–ä¸ç½‘ç»œç‰¹æ®Šå¤„ç†ç›¸å…³çš„æœºåˆ¶ã€‚2. å¯¹äºå®æ—¶ï¼ˆRTï¼‰æµé‡éœ€æ±‚çš„æ–°å…´åº”ç”¨ï¼Œè¡¨ç°ä¸ä½³ã€‚3. å½“ç½‘ç»œèµ„æºä¸è¶³ä»¥æ»¡è¶³ QoS åº”ç”¨ç¨‹åºçš„éœ€æ±‚æ—¶ï¼Œä¸åº”ä½¿ç”¨æ­¤æ¨¡å‹ã€‚ Integrated Services (IntServ) 1. å…è®¸ç½‘ç»œæµé‡çš„ä¸ªæ€§åŒ–å¤„ç†ã€‚2. ä½¿ç”¨æœåŠ¡ç‰¹å®šçš„é¢„ç•™åè®®ä¸ºç‰¹å®šçš„æ•°æ®æµé¢„ç•™èµ„æºã€‚3. å¯ä»¥å‡†ç¡®é¢„æµ‹å¹¶ä¿è¯å®šä¹‰çš„æ€§èƒ½æ°´å¹³ã€‚ 1. ä¸å¯æ‰©å±•ï¼Œéœ€è¦æ¯”å…¶ä»– QoS æ¨¡å‹ï¼ˆå¦‚ DiffServï¼‰æ›´å¤šçš„ç®¡ç†æ§åˆ¶ã€‚2. å®æ–½æ­¤æ¨¡å‹éœ€è¦ç½‘ç»œä¸­å­˜åœ¨ IntServ èƒ½åŠ›çš„è·¯ç”±å™¨ï¼Œå¹¶ä½¿ç”¨ RSVP è¿›è¡Œç«¯åˆ°ç«¯çš„èµ„æºé¢„ç•™ã€‚3. ç”±äº RSVP æ˜¯ä¸€ä¸ªè½¯çŠ¶æ€åè®®ï¼ŒæŒç»­çš„ä¿¡ä»¤è´Ÿè½½åªä¼šåŠ å‰§å¯æ‰©å±•æ€§é—®é¢˜ã€‚ Differentiated Services (DiffServ) 1. æä¾›ä¸€ç§åŸºäºç±»åˆ«çš„æœåŠ¡ï¼ŒæŸäº›ç±»åˆ«çš„æµé‡å¯ä»¥ä¼˜å…ˆäºå…¶ä»–æµé‡ç±»åˆ«å¾—åˆ°å¤„ç†ã€‚2. é€‚ç”¨äºå¤§å‹ç½‘ç»œï¼Œå› ä¸ºå®ƒä¸éœ€è¦ä¸ºæ¯ä¸ªæµé‡ä¿ç•™ç½‘ç»œèµ„æºã€‚ 1. ä¸èƒ½ä¸ºæ¯ä¸ªæµé‡æä¾›ç²¾ç¡®çš„ QoS ä¿è¯ã€‚2. å¯¹äºéœ€è¦é«˜ç²¾åº¦ QoS ä¿è¯çš„åº”ç”¨ï¼Œå¯èƒ½ä¸æ˜¯æœ€ä½³é€‰æ‹©ã€‚ è™šç”µè·¯ æ•°æ®æŠ¥ ç½‘ç»œæä¾›ç½‘ç»œå±‚çš„æ— è¿æ¥ æœåŠ¡ è™šç”µè·¯ ç½‘ç»œæä¾›ç½‘ç»œå±‚çš„ è¿æ¥ æœåŠ¡ ç±»æ¯”äº TCP/UDP çš„é¢å‘è¿æ¥/ æ— è¿æ¥çš„ä¼ è¾“å±‚æœåŠ¡ï¼š ä»»ä½•ç½‘ç»œä¸­çš„ç½‘ç»œå±‚åªæä¾›ä¸¤ç§æœåŠ¡ä¹‹ä¸€ï¼Œä¸ä¼šåŒæ—¶æä¾›ã€‚ è™šç”µè·¯ç½‘ç»œï¼šæä¾›è¿æ¥æœåŠ¡ã€‚ æ•°æ®æŠ¥ç½‘ç»œï¼šæä¾›æ— è¿æ¥æœåŠ¡ã€‚ ä¼ è¾“å±‚ï¼šé¢å‘è¿æ¥æœåŠ¡åœ¨ç½‘ç»œè¾¹ç¼˜çš„ç«¯ç³»ç»Ÿä¸­å®ç°ã€‚ ç½‘ç»œå±‚ï¼šé¢å‘è¿æ¥æœåŠ¡åœ¨ç«¯ç³»ç»ŸåŠç½‘ç»œæ ¸å¿ƒçš„è·¯ç”±å™¨ä¸­å®ç°ã€‚ å®šä¹‰è™šç”µè·¯(Virtual Circuits)â€œæºä¸»æœº-ç›®çš„ä¸»æœºè·¯å¾„çš„è¡Œä¸ºç±»ä¼¼äºç”µè¯ç½‘ç»œçš„è¡Œä¸ºâ€,æ€§èƒ½ä¸Šç±»ä¼¼,æ²¿ç€æº-ç›®çš„è·¯å¾„çš„ç½‘ç»œè¡Œä¸ºç±»ä¼¼ã€‚ åœ¨æ•°æ®ä¼ è¾“ä¹‹å‰ï¼Œéœ€è¦ä¸ºæ¯ä¸ªå‘¼å«å»ºç«‹è¿æ¥ æ¯ä¸ªåˆ†ç»„æºå¸¦ VC æ ‡è¯†ç¬¦(ä¸æ˜¯ç›®çš„ä¸»æœºåœ°å€) ä½äºâ€œæº-ç›®çš„è·¯å¾„â€ä¸Šçš„æ¯ä¸ªè·¯ç”±å™¨ä¼šç»´æŠ¤ç»è¿‡å®ƒçš„æ¯æ¡è¿æ¥çš„â€œçŠ¶æ€â€ é“¾è·¯å’Œè·¯ç”±å™¨çš„èµ„æº(å¸¦å®½ã€ç¼“å­˜)å¯ä»¥è¢«åˆ†é…ç»™ VC(ä¸“ç”¨èµ„æº) ç‰¹ç‚¹è™šç”µè·¯ç½‘ç»œæºäºç”µè¯äº§ä¸šç•Œï¼ˆé‡‡ç”¨â€œçœŸæ­£â€ç”µè·¯ï¼‰ã€‚å‘¼å«å»ºç«‹åŠæ¯æ¬¡å‘¼å«çš„çŠ¶æ€è¦åœ¨ç½‘ç»œä¸­çš„è·¯ç”±å™¨ä¸Šç»´æŒï¼Œæ¯”é¢å‘æ•°æ®æŠ¥çš„ç½‘ç»œè¦å¤æ‚ã€‚ç½‘ç»œåŠŸèƒ½å¤æ‚ï¼Œç«¯ç³»ç»Ÿè®¾å¤‡ç®€å• Whatâ€™s Inside a Router?å¯¹äºä¸€èˆ¬çš„è·¯ç”±å™¨æ¥è¯´ï¼Œå®ƒä¸»è¦åŒ…å«å››ä¸ªéƒ¨åˆ† è¾“å…¥ç«¯å£ (Input Ports) æ‰§è¡Œç‰©ç†å±‚åŠŸèƒ½ï¼Œç»ˆæ­¢è·¯ç”±å™¨ä¸Šçš„å…¥ç«™ç‰©ç†é“¾æ¥ã€‚ æ‰§è¡Œé“¾è·¯å±‚åŠŸèƒ½ï¼Œä¸å…¥ç«™é“¾æ¥å¦ä¸€ä¾§çš„é“¾è·¯å±‚è¿›è¡Œäº’æ“ä½œã€‚ åœ¨è¾“å…¥ç«¯å£æ‰§è¡ŒæŸ¥æ‰¾åŠŸèƒ½ï¼Œè¿™å°†åœ¨è¾“å…¥ç«¯å£çš„æœ€å³ä¾§çš„æ¡†ä¸­å‘ç”Ÿã€‚åœ¨è¿™é‡Œï¼Œå°†æŸ¥è¯¢è½¬å‘è¡¨ä»¥ç¡®å®šå°†é€šè¿‡äº¤æ¢ç»“æ„è½¬å‘åˆ°å“ªä¸ªè·¯ç”±å™¨è¾“å‡ºç«¯å£çš„åˆ°è¾¾æ•°æ®åŒ…ã€‚ æ§åˆ¶æ•°æ®åŒ…ï¼ˆä¾‹å¦‚ï¼Œæºå¸¦è·¯ç”±åè®®ä¿¡æ¯çš„æ•°æ®åŒ…ï¼‰ä»è¾“å…¥ç«¯å£è½¬å‘åˆ°è·¯ç”±å¤„ç†å™¨ã€‚ äº¤æ¢ç»“æ„ (Switching Fabric) è¿æ¥è·¯ç”±å™¨çš„è¾“å…¥ç«¯å£å’Œè¾“å‡ºç«¯å£ã€‚ è¾“å‡ºç«¯å£ (Output Ports) å­˜å‚¨ä»äº¤æ¢ç»“æ„æ¥æ”¶çš„æ•°æ®åŒ…ï¼Œå¹¶æ‰§è¡Œå¿…è¦çš„é“¾è·¯å±‚å’Œç‰©ç†å±‚åŠŸèƒ½åœ¨å‡ºç«™é“¾æ¥ä¸Šä¼ è¾“è¿™äº›æ•°æ®åŒ…ã€‚ å½“é“¾æ¥æ˜¯åŒå‘çš„æ—¶ï¼Œè¾“å‡ºç«¯å£é€šå¸¸ä¼šä¸åŒä¸€çº¿å¡ä¸Šçš„è¯¥é“¾æ¥çš„è¾“å…¥ç«¯å£é…å¯¹ã€‚ è·¯ç”±å¤„ç†å™¨ (Routing Processor) æ‰§è¡Œæ§åˆ¶å¹³é¢ Data Plane åŠŸèƒ½ åœ¨ä¼ ç»Ÿè·¯ç”±å™¨ä¸­ï¼Œå®ƒæ‰§è¡Œè·¯ç”±åè®®ï¼Œç»´æŠ¤è·¯ç”±è¡¨å’Œé™„åŠ çš„é“¾è·¯çŠ¶æ€ä¿¡æ¯ï¼Œå¹¶ä¸ºè·¯ç”±å™¨è®¡ç®—è½¬å‘è¡¨ã€‚ åœ¨ SDN è·¯ç”±å™¨ä¸­ï¼Œè·¯ç”±å¤„ç†å™¨è´Ÿè´£ä¸è¿œç¨‹æ§åˆ¶å™¨é€šä¿¡ï¼Œä»¥ä¾¿ï¼ˆåœ¨å…¶ä»–æ´»åŠ¨ä¸­ï¼‰æ¥æ”¶ç”±è¿œç¨‹æ§åˆ¶å™¨è®¡ç®—çš„è½¬å‘è¡¨æ¡ç›®ï¼Œå¹¶å°†è¿™äº›æ¡ç›®å®‰è£…åœ¨è·¯ç”±å™¨çš„è¾“å…¥ç«¯å£ä¸­ã€‚ æ‰§è¡Œç½‘ç»œç®¡ç†åŠŸèƒ½ã€‚ Input Port Processing and Destination-Based Forwardingè·¯ç”±å™¨è¾“å…¥ç«¯å£å¤„ç†çš„å·¥ä½œæµç¨‹å¯ä»¥æ¦‚æ‹¬å¦‚ä¸‹ï¼š è¾“å…¥ç«¯å£å¤„ç† ç»ˆæ­¢è·¯ç”±å™¨ä¸Šçš„å…¥ç«™ç‰©ç†é“¾æ¥ã€‚è·¯ç”±å™¨æ ¹æ® forwarding table æ¥æŸ¥æ‰¾è¾“å‡ºç«¯å£ï¼Œåˆ°è¾¾çš„æ•°æ®åŒ…å°†é€šè¿‡äº¤æ¢ç»“æ„è½¬å‘åˆ°è¯¥ç«¯å£ã€‚ è½¬å‘è¡¨çš„æ›´æ–°ï¼šé€šè¿‡è·¯ç”±å¤„ç†å™¨è®¡ç®—å’Œæ›´æ–°è½¬å‘è¡¨ï¼Œæˆ–è€…ä»è¿œç¨‹ SDN æ§åˆ¶å™¨æ¥æ”¶ã€‚ è½¬å‘è¡¨æ˜¯é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„æ€»çº¿ï¼ˆä¾‹å¦‚ï¼ŒPCI æ€»çº¿ï¼‰ä»è·¯ç”±å¤„ç†å™¨å¤åˆ¶åˆ°çº¿å¡(line card)ä¸Šçš„ï¼Œæ¯ä¸ªçº¿å¡éƒ½æœ‰ä¸€ä¸ªè½¬å‘è¡¨çš„å‰¯æœ¬ï¼Œå¯ä»¥åœ¨æ¯ä¸ªè¾“å…¥ç«¯å£æœ¬åœ°åšå‡ºè½¬å‘å†³ç­–ï¼Œæ— éœ€åœ¨æ¯ä¸ªæ•°æ®åŒ…éƒ½è¦è°ƒç”¨è·¯ç”±å¤„ç†å™¨ï¼Œä»è€Œé¿å…äº†é›†ä¸­å¤„ç†çš„ç“¶é¢ˆã€‚ åŸºäºç›®æ ‡åœ°å€çš„è½¬å‘ï¼šåœ¨æœ€ç®€å•çš„æƒ…å†µä¸‹ï¼Œå³å°†åˆ°è¾¾çš„æ•°æ®åŒ…å°†è¢«è½¬å‘åˆ°çš„è¾“å‡ºç«¯å£æ˜¯åŸºäºæ•°æ®åŒ…çš„ç›®æ ‡åœ°å€çš„ã€‚åœ¨ 32 ä½ IP åœ°å€çš„æƒ…å†µä¸‹ï¼Œè½¬å‘è¡¨çš„æš´åŠ›å®ç°å°†ä¸ºæ¯ä¸ªå¯èƒ½çš„ç›®æ ‡åœ°å€æœ‰ä¸€ä¸ªæ¡ç›®ã€‚ç”±äºå¯èƒ½çš„åœ°å€è¶…è¿‡ 40 äº¿ä¸ªï¼Œè¿™ä¸ªé€‰é¡¹å®Œå…¨ä¸å¯èƒ½ã€‚ å®é™…ä¸Šè·¯ç”±å™¨ä¸­ä½¿ç”¨åˆ†ç»„ç›®çš„åœ°å€çš„å‰ç¼€ï¼ˆprefixï¼‰ä¸è¯¥è¡¨ä¸­çš„è¡¨é¡¹è¿›è¡ŒåŒ¹é…ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å½“æœ‰å¤šä¸ªåŒ¹é…é¡¹ç›®æ—¶ï¼Œè¯¥è·¯ç”±å™¨ä½¿ç”¨æœ€é•¿å‰ç¼€åŒ¹é…è§„åˆ™ï¼ˆlongest prefix matching ruleï¼‰ï¼Œå³åœ¨è¯¥è¡¨ä¸­å¯»æ‰¾æœ€é•¿çš„åŒ¹é…é¡¹ï¼Œå¹¶å‘ä¸æœ€é•¿çš„å‰ç¼€åŒ¹é…å…ˆå…³è”çš„é“¾è·¯æ¥å£è½¬å‘åˆ†ç»„ã€‚ prefix Link Interface 11001000 00010111 00010 0 11001000 00010111 00011000 1 11001000 00010111 00011 2 Otherwise 3 ä¸€ä¸ªç«¯ç³»ç»Ÿå‘é€ç»™å¦ä¸€ä¸ªç«¯ç³»ç»Ÿçš„ä¸€æ‰¹åˆ†ç»„å¯èƒ½åœ¨ç½‘ç»œä¸­é€‰æ‹©ä¸åŒçš„è·¯å¾„ï¼Œåˆ°è¾¾çš„é¡ºåºå¯èƒ½ä¸ä¸€è‡´ é‰´äºè½¬å‘è¡¨çš„å­˜åœ¨ï¼ŒæŸ¥æ‰¾åœ¨æ¦‚å¿µä¸Šå¾ˆç®€å• - ç¡¬ä»¶é€»è¾‘åªæ˜¯åœ¨è½¬å‘è¡¨ä¸­æœç´¢æœ€é•¿çš„å‰ç¼€åŒ¹é…ã€‚åœ¨åƒå…†ä¼ è¾“é€Ÿç‡ä¸‹ï¼Œè¿™ç§æŸ¥æ‰¾å¿…é¡»åœ¨çº³ç§’å†…æ‰§è¡Œ,å› æ­¤ï¼Œä¸ä»…å¿…é¡»åœ¨ç¡¬ä»¶ä¸­æ‰§è¡ŒæŸ¥æ‰¾ï¼Œè€Œä¸”éœ€è¦å¯¹å¤§è¡¨è¿›è¡Œå¿«é€ŸæŸ¥æ‰¾çš„ç®—æ³•;è¿˜å¿…é¡»ç‰¹åˆ«æ³¨æ„å†…å­˜è®¿é—®æ—¶é—´ï¼Œä»è€Œåœ¨è®¾è®¡ä¸­åµŒå…¥å¼ç‰‡ä¸Š DRAM å’Œæ›´å¿«çš„ SRAMï¼ˆç”¨ä½œ DRAM ç¼“å­˜ï¼‰å­˜å‚¨å™¨ã€‚å®è·µä¸­ç»å¸¸ä½¿ç”¨ä¸‰æ€å†…å®¹å¯å¯»å€å­˜å‚¨å™¨ï¼ˆTenary Content Address Memoryï¼ŒTCAMï¼‰æ¥æŸ¥æ‰¾ SwitchingSwitch fabric è´Ÿè´£è½¬å‘åŠŸèƒ½ï¼Œå®Œæˆäº¤æ¢çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œä¸»è¦åŒ…æ‹¬ä¸‹é¢å‡ ç§ Memory åœ¨ CPU ç›´æ¥æ§åˆ¶ä¸‹äº¤æ¢çš„ä¼ ç»Ÿè®¡ç®—æœº,æ•°æ®äº¤æ¢çš„æ‰§è¡Œä¸ä¼ ç»Ÿ IO è®¾å¤‡ä¸€è‡´ï¼› æ•°æ®åŒ…å¤åˆ¶åˆ° processor memoryï¼Œprocessor ä» header ä¸­æå–ç›®æ ‡åœ°å€ï¼› é€Ÿåº¦å—å†…å­˜å¸¦å®½é™åˆ¶ï¼Œäº¤æ¢é€Ÿåº¦å—æ€»çº¿å¸¦å®½çš„é€Ÿåº¦é™åˆ¶ (æ¯ä¸ªåˆ†ç»„ç©¿è¿‡ä¸¤æ¬¡æ€»çº¿:Input&gt;Memory&gt;Output),æ•…è‹¥æ€»çº¿å¸¦å®½ä¸ºæ¯ç§’å†™å…¥æˆ–è¯»å‡º B ä¸ªåˆ†ç»„ï¼Œåˆ™æ€»çš„è½¬å‘ååé‡ (åˆ†ç»„ä»è¾“å…¥ç«¯å£è¢«ä¼ é€åˆ°è¾“å‡ºç«¯å£çš„æ€»é€Ÿç‡)å°äº B/2 Bus è¾“å…¥ç«¯å£é€šè¿‡ä¸€æ¡å…±äº«æ€»çº¿å°†åˆ†ç»„ç›´æ¥ä¼ é€åˆ°è¾“å‡ºç«¯å£ï¼Œä¸éœ€è¦é€‰è·¯å¤„ç†å™¨çš„å¹²é¢„ã€‚ æ¯æ¬¡åªèƒ½æœ‰ä¸€ä¸ªåˆ†ç»„é€šè¿‡æ€»çº¿ä¼ é€ã€‚åˆ†ç»„åˆ°è¾¾ä¸€ä¸ªè¾“å…¥ç«¯å£æ—¶ï¼Œè‹¥æ€»çº¿æ­£å¿™ï¼Œä¼šè¢«æš‚æ—¶é˜»å¡ï¼Œåœ¨è¾“å…¥ç«¯å£æ’é˜Ÿ è·¯ç”±å™¨äº¤æ¢å¸¦å®½å—æ€»çº¿é€Ÿç‡é™åˆ¶ã€‚ Interconnection network æ•°æ®æŠ¥åˆ†å‰²æˆå›ºå®šé•¿åº¦ä¿¡å…ƒ, é€šè¿‡äº¤æ¢çŸ©é˜µæ¥äº¤æ¢ä¿¡å…ƒã€‚åˆ°è¾¾è¾“å…¥ç«¯å£çš„åˆ†ç»„æ²¿æ°´å¹³æ€»çº¿ç©¿è¡Œï¼Œç›´è‡³ä¸æ‰€å¸Œæœ›çš„è¾“å‡ºç«¯å£çš„å‚ç›´æ€»çº¿äº¤å‰ç‚¹ï¼š è‹¥è¯¥æ¡å‚ç›´æ€»çº¿ç©ºé—²ï¼Œåˆ™åˆ†ç»„è¢«ä¼ é€åˆ°è¾“å‡ºç«¯å£ï¼› å¦åˆ™ï¼Œè¯¥åˆ°è¾¾çš„åˆ†ç»„è¢«é˜»å¡ï¼Œå¿…é¡»åœ¨è¾“å…¥ç«¯å£æ’é˜Ÿã€‚ Output port processingå–å‡ºå­˜æ”¾åœ¨è¾“å‡ºç«¯å£å†…å­˜ä¸­çš„åˆ†ç»„ï¼Œå¹¶å°†å…¶ä¼ è¾“åˆ°è¾“å‡ºé“¾è·¯ä¸Šã€‚å½“äº¤æ¢ç»“æ„å°†åˆ†ç»„äº¤ä»˜ç»™è¾“å‡ºç«¯å£çš„é€Ÿç‡è¶…è¿‡è¾“å‡ºé“¾è·¯é€Ÿç‡ï¼Œå°±éœ€è¦æ’é˜Ÿä¸ç¼“å­˜ç®¡ç†åŠŸèƒ½ã€‚å½“è¾“å‡ºç«¯å£çš„ç¼“å†²åŒºæº¢å‡ºæ—¶ï¼Œå°±ä¼šå‡ºç°å»¶æ—¶å’Œä¸¢åŒ…ã€‚ When Does Queuing Occuråœ¨è¾“å…¥ç«¯å£å’Œè¾“å‡ºç«¯å£éƒ½å¯ä»¥å½¢æˆåˆ†ç»„é˜Ÿåˆ—ï¼Œéšç€è¿™äº›é˜Ÿåˆ—çš„å¢é•¿ï¼Œè·¯ç”±å™¨çš„ç¼“å­˜ç©ºé—´æœ€ç»ˆå°†ä¼šè€—å°½ï¼Œå¹¶ä¸”å½“æ— å†…å­˜å¯ç”¨äºå­˜å‚¨åˆ°è¾¾çš„åˆ†ç»„æ—¶å°†ä¼šå‡ºç°ä¸¢åŒ…ï¼ˆpacket lossï¼‰ Input Queueingå½“äº¤æ¢ç»“æ„çš„é€Ÿåº¦æ…¢äºè¾“å…¥ç«¯å£çš„é€Ÿåº¦ï¼Œå°±ä¼šåœ¨è¾“å…¥ç«¯å£çš„ç¼“å†²åŒºå‘ç”Ÿæ’é˜Ÿ,ä¼šå¯¼è‡´æ’é˜Ÿå»¶æ—¶å’Œç”±äºè¾“å…¥ç¼“å†²åŒºæº¢å‡ºå¯¼è‡´çš„ä¸¢åŒ…çº¿å¤´é˜»å¡ï¼ˆHead-of-the-Line (HOL) blockingï¼‰: åœ¨é˜Ÿåˆ—å‰é¢çš„è¢«é˜»å¡çš„æ•°æ®æŠ¥ä¼šé˜»æ­¢é˜Ÿåˆ—ä¸­çš„å…¶ä»–æ•°æ®æŠ¥è¢«è½¬å‘ Output Queueingå½“ç»è¿‡äº¤æ¢ç»“æ„åˆ°è¾¾çš„é€Ÿåº¦è¶…è¿‡äº†è¾“å‡ºç«¯å£çš„å¤„ç†çº¿é€Ÿå°±ä¼šå‘ç”Ÿæ’é˜Ÿ,å½“è¾“å‡ºç«¯å£çš„ç¼“å†²åŒºæº¢å‡ºæ—¶å°±ä¼šå‘ç”Ÿä¸¢åŒ… Packet SchedulingFCFS(FIFO)ç»´æŠ¤ä¸€ä¸ª Queueï¼ŒæŒ‰ç…§åˆ°è¾¾é¡ºåºä¾æ¬¡å¤„ç†åˆ†ç»„ Priority Queuingé€šå¸¸æ¯ä¸ª Packet éƒ½æœ‰ä¸€ä¸ªä¼˜å…ˆçº§ï¼Œä¸åŒä¼˜å…ˆçº§çš„ Packet è¢«åˆ†é…åˆ°ä¸åŒçš„é˜Ÿåˆ—ä¸­ï¼Œç„¶åæŒ‰ç…§ä¼˜å…ˆçº§é¡ºåºå¤„ç† Round Robin and Weighted Fari Queuing(WFQ) Round Robin è½®æµæœåŠ¡å°†éœ€è¦è·¯ç”±å‘é€çš„èµ„æºè¿›è¡Œåˆ†ç±»ï¼Œä¸ºæ¯ç§ç±»åˆ«ç”Ÿæˆè‡ªæœ‰çš„ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå‘é€æ—¶è½®æµä»é˜Ÿåˆ—ä¸­é€‰å–é˜Ÿé¦–çš„æ–‡ä»¶åŒ…è¿›è¡Œå‘é€ã€‚å¦‚æœè½®åˆ°æŸä¸ªé˜Ÿåˆ—æ—¶ï¼Œè¯¥é˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è·³è¿‡è¯¥é˜Ÿåˆ—ã€‚ è¿™æ ·çš„æœåŠ¡èƒ½ä¿éšœåœ¨å„ä¸åŒç±»å‹çš„ç½‘ç»œæœåŠ¡ä¸­åˆç†åˆ†é…èµ„æºï¼Œä¸ä¼šè®©æŸä¸€ç½‘ç»œæœåŠ¡å ç”¨è¿‡å¤§çš„å¸¦å®½ä»¥è‡³äºå½±å“å…¶ä»–çš„ç½‘ç»œæœåŠ¡ã€‚æ¯”å¦‚æŸä¸ªä¸‹è½½ç¨‹åºå ç”¨è¿‡å¤šç½‘é€Ÿï¼Œè‡´ä½¿è§†é¢‘æµè§ˆå‡ºç°å¡é¡¿æˆ–æ‰“å¼€ç½‘é¡µé€Ÿåº¦è¿‡æ…¢ã€‚ WFQ æ˜¯åŸºäº Round Robin æ–¹æ³•æ”¹è¿›åè€Œæˆçš„ã€‚å¯¹äºæŸäº›ç½‘ç»œæœåŠ¡ï¼Œå¦‚ç½‘ç»œç”µè¯æˆ–è§†é¢‘ç›´æ’­ï¼Œä¸ºäº†ä¿éšœèƒ½æµç•…è¿›è¡Œï¼Œæ€»æ˜¯éœ€è¦ä¿ç•™ä¸€å®šçš„ä¼˜å…ˆå¸¦å®½ã€‚è¿™æ ·æƒ…å†µä¸‹å°±å¯ä»¥ä½¿ç”¨ Round Robin è½®æµæœåŠ¡çš„å‡çº§ç‰ˆæœ¬ Weighted Fair Quequing(WFQ)åŠ æƒå…¬å¹³é˜Ÿåˆ—ã€‚å…¶ä¸­çš„æ€æƒ³å¾ˆç®€å•ï¼Œè½®æµæœåŠ¡ä¸­å·²ç»æœ‰äº†å„ä¸ªå…¬å¹³é˜Ÿåˆ—ï¼Œéœ€è¦åšçš„å°±æ˜¯å¯¹ä¸€äº›å¸¦å®½æ•æ„Ÿå‹æœåŠ¡è¿›è¡Œæ ‡è®°å¹¶é™„ä»¥ç›¸åº”æƒé‡ $w_i$ï¼ŒæœåŠ¡æ—¶è¿›è¡Œä¾§é‡å°±å¯ä»¥ã€‚ WFQ åœ¨å‘é€æ—¶ä»ç„¶è½®æµä»é˜Ÿåˆ—ä¸­é€‰å–é˜Ÿé¦–æ–‡ä»¶åŒ…ï¼Œä½†é€‰å–çš„æ•°é‡æ ¹æ®æƒé‡ $w_i$ ç¡®å®šï¼Œæƒé‡å¤§çš„æœåŠ¡åœ¨ä¸€æ¬¡å‘é€å¾ªç¯ä¸­å°±èƒ½å¤šå‘é€æ–‡ä»¶åŒ…ï¼Œä»è€Œç¡®ä¿ç›¸åº”çš„æœåŠ¡å¸¦å®½ï¼Œä¿è¯ç½‘ç»œçš„æœåŠ¡è´¨é‡ã€‚ The Internet Protocol (IP): IPv4, Addressing, IPv6, and MoreIPV4 Datagram Format ç‰ˆæœ¬å·ï¼ˆVersionï¼‰ï¼š4bitã€‚æŒ‡å®šäº†æ•°æ®æŠ¥çš„ IP åè®®ç‰ˆæœ¬ã€‚é€šè¿‡æŸ¥çœ‹ç‰ˆæœ¬å·ï¼Œè·¯ç”±å™¨å¯ä»¥ç¡®å®šå¦‚ä½•è§£é‡Š IP æ•°æ®æŠ¥çš„å…¶ä½™éƒ¨åˆ†ã€‚ä¸åŒç‰ˆæœ¬çš„ IP ä½¿ç”¨ä¸åŒçš„æ•°æ®æŠ¥æ ¼å¼ã€‚ é¦–éƒ¨é•¿åº¦ï¼ˆHeader lengthï¼‰ï¼šç¡®å®š IP æ•°æ®æŠ¥ä¸­æœ‰æ•ˆè½½è·,åœ¨æ— é€‰é¡¹ï¼ˆOptionsï¼‰é¦–éƒ¨æ—¶ï¼ŒIP å…·æœ‰ 20Byte çš„é¦–éƒ¨ï¼› æœåŠ¡ç±»å‹ï¼ˆType of serviceï¼‰ï¼šä¸åŒç±»å‹çš„æ•°æ®æŠ¥å¯ä»¥ç›¸äº’åŒºåˆ†ï¼› æ•°æ®æŠ¥é•¿åº¦ï¼ˆDatagram lengthï¼‰ï¼šIP æ•°æ®æŠ¥çš„æ€»é•¿åº¦ï¼ˆé¦–éƒ¨åŠ ä¸Šæ•°æ®ï¼‰ï¼Œä»¥å­—èŠ‚è®¡æ•°ï¼› æ ‡è¯†ï¼ˆIdentifierï¼‰ã€æ ‡å¿—ï¼ˆFlagsï¼‰ã€åˆ†ç‰‡åç§»ï¼ˆFragmentation offsetï¼‰ï¼šä¸€ä¸ªé“¾è·¯å±‚å¸§èƒ½æ‰¿è½½çš„æœ€å¤§æ•°æ®é‡å«ä½œæœ€å¤§ä¼ é€å•å…ƒï¼ˆMaximum Transmission Unitï¼ŒMTUï¼‰ã€‚æ¯ä¸ªæ•°æ®é“¾è·¯æœ‰è‡ªå·±çš„ MTUï¼Œé“¾è·¯ç±»å‹ä¸åŒï¼ŒMTU çš„å€¼ä¹Ÿä¸åŒï¼Œç”¨äº IP åˆ†ç‰‡ï¼›åœ¨å› ç‰¹ç½‘ä¸­ä¸€ä¸ªå¤§çš„åˆ†ç»„å¯èƒ½åœ¨è·¯ç”±å™¨ä¸­è¢«åˆ†å‰²ä¸ºå‡ ä¸ªåˆ†ç‰‡ï¼Œç„¶åç‹¬ç«‹è½¬å‘åˆ°ç›®çš„åœ°ï¼Œåœ¨ç›®çš„åœ°å°†å®ƒä»¬é‡æ–°ç»„è£…ï¼Œç„¶åå°†å…¶æœ‰æ•ˆè½½è·æ•°æ®ã€‚IPV6 ä¸å…è®¸åˆ†ç‰‡ ç”Ÿå­˜æ—¶é—´ï¼ˆTime-to-liveï¼ŒTTLï¼‰ï¼šç¡®ä¿æ•°æ®æ®µä¸ä¼šæ°¸è¿œåœ¨ç½‘ç»œä¸­å¾ªç¯ï¼›æ¯æ¬¡æ•°æ®æŠ¥è¢«è·¯ç”±å™¨å¤„ç†æ—¶ï¼Œè¿™ä¸ªå­—æ®µå°±ä¼šå‡ 1ã€‚å¦‚æœ TTL å­—æ®µè¾¾åˆ° 0ï¼Œè·¯ç”±å™¨å¿…é¡»ä¸¢å¼ƒè¯¥æ•°æ®æŠ¥ã€‚ ä¸Šå±‚åè®®ï¼ˆUpper-layer protocolï¼‰ï¼šIP æ•°æ®æŠ¥åˆ°è¾¾æœ€ç»ˆç›®çš„åœ°æ—¶ä½¿ç”¨ã€‚è¿™ä¸ªå­—æ®µçš„å€¼æŒ‡ç¤ºåº”è¯¥å°†è¯¥ IP æ•°æ®æŠ¥çš„æ•°æ®éƒ¨åˆ†ä¼ é€’ç»™ç‰¹å®šçš„ä¼ è¾“å±‚åè®®ã€‚ä¾‹å¦‚ï¼Œå€¼ 6 è¡¨ç¤ºæ•°æ®éƒ¨åˆ†ä¼ é€’ç»™ TCPï¼Œè€Œå€¼ 17 è¡¨ç¤ºæ•°æ®ä¼ é€’ç»™ UDPã€‚ é¦–éƒ¨æ£€éªŒå’Œï¼ˆHeader checksumï¼‰ï¼šå¸®åŠ©è·¯ç”±å™¨æ£€æµ‹æ”¶åˆ°çš„ IP æ•°æ®æŠ¥ä¸­çš„æ¯”ç‰¹é”™è¯¯ï¼› æºå’Œç›®çš„ IP åœ°å€ï¼ˆSource and Destination IP addressï¼‰ï¼› é€‰é¡¹ï¼ˆOptionsï¼‰ï¼šå…è®¸ IP é¦–éƒ¨è¢«æ‰©å±•ï¼› æ•°æ®ï¼ˆDataï¼‰ï¼šä¸€èˆ¬ä¸ºè¿è¾“å±‚æŠ¥æ–‡æ®µï¼› IPV4 Addressing IP åœ°å€: åˆ†é…ç»™ä¸»æœºæˆ–è·¯ç”±å™¨æ¥å£çš„æ ‡è¯†ç¬¦ æ¥å£: ä¸»æœº/è·¯ç”±å™¨ä¸ç‰©ç†é“¾è·¯ä¹‹é—´çš„è¾¹ç•Œ è·¯ç”±å™¨æœ‰å¤šä¸ªæ¥å£ ä¸»æœºå¯ä»¥æœ‰å¤šä¸ªæ¥å£ æ¯ä¸ªæ¥å£æœ‰ä¸€ä¸ª IP åœ°å€ IPV4 å’Œ IPV6 IPV4ï¼š32 bits(4 Bytes)å¸¸ç”¨ç‚¹åˆ†åè¿›åˆ¶(dotted-decimal notation)è¡¨ç¤ºï¼› IPV6ï¼š128 bits(16 Bytes)å¸¸ç”¨å†’å·åˆ†éš”è¡¨ç¤º 32 æ¯”ç‰¹çš„äºŒè¿›åˆ¶è¡¨ç¤ºå’Œç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºæ³•å°† 4 ä¸ªå­—èŠ‚ä¸­çš„æ¯ä¸€ä¸ªå­—èŠ‚åˆ†åˆ«ç”¨åè¿›åˆ¶æ•°æ¥è¡¨ç¤ºï¼Œ4 ä¸ªåè¿›åˆ¶æ•°ä¹‹é—´ç”¨ . åˆ†éš”ã€‚ä¾‹å¦‚223.1.1.1 = 11011111 00000001 00000001 00000001æ ¹æ®ä¸åŒçš„å–å€¼èŒƒå›´ï¼Œæ—©æœŸå°† IP åœ°å€åˆ†ä¸ºäº”ç±»ã€‚IP åœ°å€ä¸­å‰ 5 ä½ç”¨äºæ ‡è¯† IP åœ°å€çš„ç±»åˆ«ï¼ŒA ç±»åœ°å€çš„ç¬¬ä¸€ä½ä¸ºâ€œ0â€ï¼ŒB ç±»åœ°å€çš„å‰ä¸¤ä½ä¸ºâ€œ10â€ï¼ŒC ç±»åœ°å€çš„å‰ä¸‰ä½ä¸ºâ€œ110â€ï¼ŒD ç±»åœ°å€çš„å‰å››ä½ä¸ºâ€œ1110â€ï¼ŒE ç±»åœ°å€çš„å‰äº”ä½ä¸ºâ€œ11110â€ã€‚å…¶ä¸­ï¼ŒA ç±»ã€B ç±»ä¸ C ç±»åœ°å€ä¸ºåŸºæœ¬çš„ IP åœ°å€ã€‚ A ç±»åœ°å€ï¼šåœ°å€èŒƒå›´ä¸º 1. 0. 0. 1ï¼127.255.255.254å…¨ 0 è¡¨ç¤ºæœ¬åœ°åœ°å€ï¼Œå…¨ 1 è¡¨ç¤ºåœ¨æœ¬åœ°ç½‘ç»œä¸­å‘æ‰€æœ‰æœºå¹¿æ’­ B ç±»åœ°å€ï¼šåœ°å€èŒƒå›´ä¸º 128.0.0.1ï¼191.255.255.254 C ç±»åœ°å€ï¼šåœ°å€èŒƒå›´ä¸º 192.0.0.1ï¼223.255.255.254 ç‰¹æ®Š IP åœ°å€æ®µ æœ¬åœ°å›ç¯åœ°å€127.0.0.1-127.255.255.254æ˜¯é¢„ç•™çš„ä¸€ç»„ IP åœ°å€ï¼Œä¸»è¦æ˜¯ç”¨æ¥è¯†åˆ«ä¸»æœºæœ¬èº«çš„åœ°å€ã€‚ä¹Ÿå«åšâ€œlocalhostâ€ï¼Œä¸€èˆ¬ç”¨æ¥æµ‹è¯•ã€‚ ç§æœ‰åœ°å€ï¼ˆPrivate addressï¼‰10.x.x.x, 172.16.x.x-172.31.x.x, 192.168.x.xä¸‰ä¸ªåœ°å€æ®µè¢«ç§°ä¸ºç§æœ‰ IP åœ°å€æ®µï¼Œä¹Ÿå°±æ˜¯å±€åŸŸç½‘æ‰€ä½¿ç”¨çš„åœ°å€æ®µï¼Œåœ¨å…¬ç½‘ä¸Šä¸èƒ½è¢«è·¯ç”± 0.0.0.0è¿™ä¸ªåœ°å€ä¸¥æ ¼ä¸Šæ¥è¯´éƒ½ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„ IP åœ°å€ã€‚ä¸»è¦æ˜¯ç”¨æ¥æ ‡è¯†ä¸æ¸…æ¥šçš„ç½‘ç»œå’Œä¸»æœºçš„ã€‚ç³»ç»Ÿé‡åˆ°æ— æ³•è¯†åˆ«çš„ç½‘ç»œæˆ–ä¸»æœºçš„æ—¶å€™ä¼šç»Ÿä¸€çš„å½’çº³åˆ°è¿™ä¸ªåœ°å€ 255.255.255.255è¿™ä¸ªåœ°å€æ˜¯å—é™çš„å¹¿æ’­åœ°å€ã€‚ä¸»è¦æŒ‡ä¸€ä¸ªç½‘æ®µå†…çš„æ‰€æœ‰ä¸»æœº IP åœ°å€:ç½‘ç»œå· (é«˜ä½ bits):æŒ‡æ˜ä¸»æœºæ‰€åœ¨ç½‘ç»œçš„ç¼–å·ä¸»æœºå· (ä½ä½ bits):ä½œä¸ºä¸»æœºåœ¨ç½‘ç»œä¸­çš„ç¼–å·ã€‚ ç½‘ç»œå·ç›¸åŒçš„ IP åœ°å€å±äºåŒä¸€ä¸ªç½‘ç»œã€‚è€Œç½‘ç»œè¿˜å¯ä»¥åˆ’åˆ†ä¸ºè‹¥å¹²å­ç½‘ï¼ˆsubnetï¼‰ï¼Œåˆ’åˆ†å­ç½‘çš„æ–¹æ³•æ˜¯ä»ä¸»æœºå·å€Ÿç”¨è‹¥å¹²ä¸ªæ¯”ç‰¹ä½œä¸ºå­ç½‘å·ï¼Œå‰©ä¸‹çš„ä¸»æœºä½ä¸ºä¸»æœºå·ã€‚ å­ç½‘ Subnet: è®¾å¤‡æ¥å£çš„ IP åœ°å€å…·æœ‰åŒæ ·çš„ç½‘ç»œéƒ¨åˆ†;æ²¡æœ‰è·¯ç”±å™¨çš„ä»‹å…¥ï¼Œç‰©ç†ä¸Šèƒ½å¤Ÿç›¸äº’åˆ°è¾¾å­ç½‘æ©ç  Subnet Mask,å­ç½‘æ©ç ç”¨æ¥ç¡®å®šç½‘ç»œåœ°å€ï¼ˆåŒ…æ‹¬ç½‘ç»œå·å’Œå­ç½‘å·ï¼‰å’Œä¸»æœºåœ°å€çš„é•¿åº¦ã€‚å­ç½‘æ©ç é•¿ä¸º 32 ä½æ¯”ç‰¹ï¼Œå…¶ä¸­çš„ 1 å¯¹åº”äº IP åœ°å€ä¸­çš„ç½‘ç»œå·å’Œå­ç½‘å·ï¼Œè€Œå­ç½‘æ©ç ä¸­çš„ 0 å¯¹åº”äºä¸»æœºå·ã€‚æœ‰å…¬å¼$ip_address &amp; subnet_mask = network_address$ ä¸‹å›¾ä¸­ï¼Œä¸€å°è·¯ç”±å™¨ï¼ˆå…·æœ‰ä¸‰ä¸ªæ¥å£ï¼‰ç”¨äºäº’è” 7 å°ä¸»æœºã€‚ å›¾ä¸­å·¦ä¾§çš„ 3 ä¸ªä¸»æœºå’Œå®ƒä»¬è¿æ¥çš„è·¯ç”±å™¨æ¥å£ï¼Œéƒ½æœ‰ä¸€ä¸ªå½¢å¦‚233.1.1.xxxçš„ IP åœ°å€ã€‚ç”¨ IP çš„æœ¯è¯­è¯´ï¼Œäº’è”è¿™ 3 ä¸ªä¸»æœºæ¥å£ä¸ 1 ä¸ªäº’è”ç½‘æ¥å£çš„ç½‘ç»œå½¢æˆä¸€ä¸ªå­ç½‘ï¼ˆsubnetï¼‰ã€‚IP ç¼–å€ä¸ºè¿™ä¸ªå­ç½‘åˆ†é…ä¸€ä¸ªåœ°å€233.1.1.0/24ï¼Œå…¶ä¸­/24è®°æ³•ï¼ŒæŒ‡ç¤º 32 æ¯”ç‰¹ä¸­çš„æœ€å·¦ä¾§ 24 æ¯”ç‰¹å®šä¹‰äº†å­ç½‘åœ°å€ã€‚ ä½¿ç”¨å­ç½‘æ©ç çš„åˆ†ç»„è½¬å‘ä¸åˆ’åˆ†å­ç½‘æ—¶ï¼Œè·¯ç”±è¡¨åªæœ‰ä¸¤é¡¹ï¼šç›®çš„ç½‘ç»œåœ°å€å’Œä¸‹ä¸€è·³åœ°å€ã€‚ä½¿ç”¨å­ç½‘åˆ’åˆ†åï¼Œè·¯ç”±è¡¨ä¸­å°†åŒ…æ‹¬ä¸‰é¡¹ï¼šç›®çš„ç½‘ç»œåœ°å€ã€å­ç½‘æ©ç å’Œä¸‹ä¸€è·³åœ°å€ã€‚ ä¸€ä¸ª A ç±»çš„ IP åœ°å€ï¼Œå¯ä»¥æœ‰ 24bit ç”¨äºåˆ†é…ä¸»æœºåœ°å€ï¼Œå› æ­¤å¯ä»¥æ”¯æŒ$2^24$ä¸ªä¸»æœº(æ³¨æ„ï¼Œå®é™…ä¸Šå¯æ¥å…¥ä¸»æœºè¦-2ï¼Œå› ä¸ºæœ‰ 2 ä¸ªè¦ç•™ç»™ localhost å’Œå¹¿æ’­åœ°å€)ï¼Œä½†æ˜¯ä¸€ä¸ªå®¶åº­æˆ–è€…ç»„ç»‡å¾€å¾€ä¸éœ€è¦è¿™ä¹ˆå¤šçš„åœ°å€ç©ºé—´ï¼Œé€ æˆæµªè´¹ã€‚ä¸€ä¸ª C ç±»çš„ IP åœ°å€ï¼Œåªæœ‰ 8bit ç”¨äºåˆ†é…ä¸»æœºåœ°å€ï¼Œå› æ­¤åªèƒ½æ”¯æŒ 256 ä¸ªä¸»æœºï¼Œåˆä¸å¤ªå¤Ÿç”¨ã€‚å› æ­¤ï¼ŒæŒ‰ä¼ ç»Ÿ IP åœ°å€åˆ†ç±»æ–¹å¼åˆ†é… IP è¢« CIDR æŠ€æœ¯å–ä»£ CIDRï¼Œä¹Ÿè¢«ç§°ä¸ºæ— ç±»åˆ«åŸŸé—´è·¯ç”±é€‰æ‹©ï¼ˆClassless Interdomain Routingï¼ŒCIDRï¼‰, æ¶ˆé™¤äº†ä¼ ç»Ÿçš„ A ç±»ã€B ç±»å’Œ C ç±»åœ°å€çš„æ¦‚å¿µã€‚ä½¿ç”¨æ–œçº¿è®°æ³•ï¼Œåˆç§°ä¸º CIDR è®°æ³•æ¥åŒºåˆ†ç½‘ç»œå‰ç¼€å’Œä¸»æœºå·ï¼Œå³åœ¨ IP åœ°å€åé¢åŠ ä¸Šä¸€ä¸ªæ–œçº¿/ï¼Œæ–œçº¿åé¢ç”¨ä¸€ä¸ªæ•°å­—æŒ‡å®šç½‘ç»œå‰ç¼€çš„é•¿åº¦ã€‚CIDR å°†ç½‘ç»œå‰ç¼€éƒ½ç›¸åŒçš„è¿ç»­çš„ IP åœ°å€ç»„æˆ CIDR åœ°å€å—ã€‚ä¸€ä¸ª CIDR åœ°å€å—å¯ä»¥è¡¨ç¤ºåˆ†ç±» IP çš„å¤šä¸ªåˆ†ç±»åœ°å€ï¼Œè¿™ç§åœ°å€çš„èšåˆç§°ä¸ºè·¯ç”±èšåˆï¼Œåˆç§°ä¸ºæ„é€ è¶…ç½‘(superneting)ã€‚ ä¸‹å›¾ä¸ºä¸€ä¸ªç¤ºä¾‹ï¼Œ ISP è·å¾—åœ°å€å—çš„æ–¹æ³•â€”â€”ä» ICANNï¼ˆInternet Corporation for Assigned Names and Numbersï¼‰ åˆ†é… IP åœ°å€ ç®¡ç† DNS åˆ†é…åŸŸåï¼Œè§£å†³çº çº· ç»„ç»‡æœºæ„å¦‚ä½•è·å– IP åœ°å€? ä» ISP çš„åœ°å€ç©ºé—´ä¸­åˆ’åˆ†ä¸€å—ç»™ç”³è¯·è€… æ‰€æœ‰çš„ IP åœ°å€éƒ½ç”± ICANN è§„åˆ’ï¼Œç„¶åä¸»è¦ç”±å›½é™…ç»„ç»‡ NICï¼ˆNetwork Information Centerï¼‰å…·ä½“è´Ÿè´£ç»Ÿä¸€åˆ†é…ã€‚ç›®å‰å…¨ä¸–ç•Œå…±æœ‰äº”ä¸ªè¿™æ ·çš„ç½‘ç»œä¿¡æ¯ä¸­å¿ƒ(ARIN,LACNIC,RIPE NCC,AFRINIC,APNIC)æˆ‘å›½ç”³è¯· IP åœ°å€è¦é€šè¿‡ APNICï¼ŒAPNIC çš„æ€»éƒ¨è®¾åœ¨æ—¥æœ¬ä¸œäº¬å¤§å­¦ã€‚ç”³è¯·æ—¶è¦è€ƒè™‘ç”³è¯·å“ªä¸€ç±»çš„ IP åœ°å€ï¼Œç„¶åå‘å›½å†…çš„ä»£ç†æœºæ„æå‡ºã€‚ éš‹å”å°ç»ƒ ç°æœ‰ä¸€å…¬å¸å·²è·å¾—ç½‘ç»œå·ä¸º 202.1.1.0/24,å¦‚æœè¯¥å…¬å¸æœ‰ 3 ä¸ªéƒ¨é—¨,ï¼ˆ1ï¼‰å¦‚æœç¬¬ 1 ä¸ªéƒ¨é—¨æœ‰ 60 å°è®¡ç®—æœºï¼Œç¬¬äºŒä¸ªéƒ¨é—¨æœ‰ 20 å°è®¡ç®—æœºï¼Œç¬¬ä¸‰ä¸ªéƒ¨é—¨æœ‰ 16 å°è®¡ç®—æœºï¼Œé—®å¦‚ä½•åˆ†é…åœ°å€?ï¼ˆ2ï¼‰å¦‚æœç¬¬ 1 ä¸ªéƒ¨é—¨æœ‰ 120 å°è®¡ç®—æœºï¼Œç¬¬ 2 ä¸ªéƒ¨é—¨æœ‰ 60 å°è®¡ç®—æœºï¼Œç¬¬ 3 ä¸ªéƒ¨é—¨æœ‰ 60 å°è®¡ç®—æœºï¼Œä½¿ç”¨ä¸Šè¿°æ–¹æ³•å¯ä»¥åˆ†é…åœ°å€å—ï¼Ÿä½¿ç”¨ CIDR æ–¹æ³•å¦‚ä½•åˆ†é…åœ°å€? ï¼ˆ1ï¼‰ä»¥æœ€å¤šå°æ•°çš„éƒ¨é—¨ï¼ˆ60 å°ï¼‰ä¸ºå‡†ï¼Œéœ€è¦çš„æœ€æ¥è¿‘æ•°ä¸º 2^6=64ï¼Œæ•…è¦ä»æœ€åä¸ªå­—èŠ‚å€Ÿ 8-6=2 ä½ï¼Œå­ç½‘åˆ†åˆ«ä¸º 202.1.1.0, 202.1.1.64, 202.1.1.128, 202.1.1.192ï¼Œåœ¨è¿™ 4 ä¸ªå…¶ä¸­ä»»é€‰ 3 ä¸ªå³å¯ã€‚æ©ç å‡ä¸º 255.255.255.192ã€‚ï¼ˆ2ï¼‰è‹¥ä»¥æœ€å¤šå°æ•°çš„éƒ¨é—¨ï¼ˆ120 å°ï¼‰ä¸ºå‡†ï¼Œä»…èƒ½åˆ†ä¸¤ä¸ªå­ç½‘ï¼Œæ— æ³•æ»¡è¶³ã€‚æ•…åº”é‡‡ç”¨ CIDR æ³•ï¼šé¦–å…ˆä»¥æœ€å°éœ€æ±‚å°æ•°éƒ¨é—¨ä¸ºå‡†ï¼ˆ60 å°ï¼‰ï¼Œæ­¤æ—¶ä¸»æœºå·ä½æ•°éœ€è¦ 6 ä½ï¼ˆå› ä¸º 60=&lt;2^6-2ï¼‰ï¼Œåˆ™å­ç½‘å·ä½æ•°ä¸º 8-6=2 ä½ï¼Œç„¶åå°†å­ç½‘åˆ’åˆ†å‡ºæ¥ï¼Œå­ç½‘åˆ†åˆ«ä¸º 202.1.1.0, 202.1.1.64, 202.1.1.128, 202.1.1.192æ¥ä¸‹æ¥ï¼Œéƒ¨é—¨ 2ã€3 å¯ä»¥ç›´æ¥åœ¨ 4 ä¸ªå­ç½‘ä¸­ä»»é€‰ä¸¤ä¸ªï¼Œéƒ¨é—¨ 1 é€‰å‰©ä¸‹ 2 ä¸ªä»¥æ»¡è¶³ 120 å°çš„è¦æ±‚ï¼ˆä½†è¿™ä¸¤ä¸ªå­ç½‘è¦è¿ç»­ï¼Œä»¥ä¾¿ç”¨ CIDR æ³•åˆå¹¶ä¹‹ï¼Œåšè¶…ç½‘ï¼‰ã€‚æ¯”å¦‚ 202.1.1.128ã€202.1.1.192 åˆ†åˆ«ç»™éƒ¨é—¨ 2ã€3ï¼Œéƒ¨é—¨ 1 ç”¨ 202.1.1.0ã€202.1.1.64ï¼ˆ3ï¼‰æœ€åå°†å„éƒ¨é—¨ IP æ®µç”¨ CIDR è¶…ç½‘å½¢å¼æè¿°ï¼Œä»¥ä¾¿å¯¹å¤–å‘å¸ƒï¼šéƒ¨é—¨ 1ï¼š202.1.1.0/25; (æ³¨æ„å«ä¹‰ï¼šè¡¨ç¤ºå‰ 25 ä½æ˜¯ç½‘ç»œå·ï¼Œä¸”æœ€åä¸€ä¸ªå­—èŠ‚æœ€é«˜ä½ä¸º 0ï¼Œåé¢ 7 ä½æ˜¯ä¸»æœºå·)éƒ¨é—¨ 2ï¼š202.1.1.128/26; (æœ€åä¸€ä¸ªå­—èŠ‚æœ€é«˜ä¸¤ä½ä¸º 10ï¼Œåé¢ 6 ä½æ˜¯ä¸»æœºå·)éƒ¨é—¨ 3ï¼š202.1.1.192/26; (æœ€åä¸€ä¸ªå­—èŠ‚æœ€é«˜ä¸¤ä½ä¸º 11ï¼Œåé¢ 6 ä½æ˜¯ä¸»æœºå·) å°† 202.1.1.128ã€202.1.1.192 ç»™éƒ¨é—¨ 1ï¼Œ202.1.1.0ã€202.1.1.64 åˆ†åˆ«ç»™éƒ¨é—¨ 2ã€3 äº¦å¯ã€‚æ­¤æ—¶ç­”æ¡ˆä¸ºï¼šéƒ¨é—¨ 1ï¼š202.1.1.0/26;éƒ¨é—¨ 2ï¼š202.1.1.64/26;éƒ¨é—¨ 3ï¼š202.1.1.128/25 Obtaining a Host Address: The Dynamic Host Configuration Protocolä¸»æœºå¦‚ä½•å¾—åˆ° IP åœ°å€? æ‰‹å·¥æŒ‡å®šï¼ˆä¿å­˜åœ¨ç³»ç»Ÿé…ç½®ä¸­ï¼‰ Windows: æ§åˆ¶é¢æ¿-&gt;ç½‘ç»œ UNIX/LINUX: åœ¨/etc/rc.config ä¸­ï¼Œå¯ä½¿ç”¨ ifconfig å‘½ä»¤é…ç½® DHCP: Dynamic Host Configuration Protocol,è‡ªåŠ¨ä»ä¸€ä¸ª DHCP æœåŠ¡å™¨å¾—åˆ° IP åœ°å€,æ–¹ä¾¿çµæ´» DHCP DHCP æ˜¯åº”ç”¨å±‚åè®®ã€‚å…¶åˆ†é…çš„ä¸ä»…ä»…æ˜¯ IP åœ°å€ï¼Œè¿˜å¯åˆ†é…ï¼š å®¢æˆ·çš„ç¬¬ä¸€è·³è·¯ç”±å™¨çš„åœ°å€ï¼ˆç½‘å…³ï¼‰ DNS æœåŠ¡å™¨çš„ IP åœ°å€æˆ–åŸŸå å­ç½‘æ©ç  æŠ¥æ–‡æ ¼å¼ OP è‹¥æ˜¯ client é€ç»™ server çš„å°åŒ…ï¼Œè®¾ä¸º 1ï¼Œåå‘ä¸º 2ï¼› Htype ç¡¬ä»¶ç±»åˆ«ï¼Œethernet ä¸º 1ï¼› Hlen ç¡¬ä»¶é•¿åº¦ï¼Œethernet ä¸º 6ï¼› Hops è‹¥æ•°æ®åŒ…éœ€ç»è¿‡ router ä¼ é€ï¼Œæ¯ç«™åŠ  1ï¼Œè‹¥åœ¨åŒä¸€ç½‘å†…ï¼Œä¸º 0ï¼› Transaction IDï¼šäº‹åŠ¡ IDï¼Œæ˜¯ä¸ªéšæœºæ•°ï¼Œç”¨äºå®¢æˆ·å’ŒæœåŠ¡å™¨ä¹‹é—´åŒ¹é…è¯·æ±‚å’Œç›¸åº”æ¶ˆæ¯ï¼› Seconds ç”±ç”¨æˆ·æŒ‡å®šçš„æ—¶é—´ï¼ŒæŒ‡å¼€å§‹åœ°å€è·å–å’Œæ›´æ–°è¿›è¡Œåçš„æ—¶é—´ï¼› Flags ä» 0-15bitsï¼Œæœ€å·¦ä¸€ bit ä¸º 1 æ—¶è¡¨ç¤º server å°†ä»¥å¹¿æ’­æ–¹å¼ä¼ é€å°åŒ…ç»™ clientï¼Œå…¶ä½™å°šæœªä½¿ç”¨ï¼› Ciaddr ç”¨æˆ· IP åœ°å€ï¼› Yiaddr å®¢æˆ· IP åœ°å€ï¼› Siaddr ç”¨äº bootstrap è¿‡ç¨‹ä¸­çš„ IP åœ°å€ï¼› Giaddr è½¬å‘ä»£ç†ï¼ˆç½‘å…³ï¼‰IP åœ°å€ï¼› Chaddr client çš„ç¡¬ä»¶åœ°å€ï¼› Sname å¯é€‰ server çš„åç§°ï¼Œä»¥ 0x00 ç»“å°¾ï¼› File å¯åŠ¨æ–‡ä»¶åï¼› Options ï¼Œå‚å•†æ ‡è¯†ï¼Œå¯é€‰çš„å‚æ•°å­—æ®µ Steps DHCP æœåŠ¡å™¨è¢«åŠ¨æ‰“å¼€ UDP ç«¯å£ 67ï¼Œç­‰å¾…å®¢æˆ·ç«¯å‘æ¥çš„æŠ¥æ–‡ã€‚DHCP å®¢æˆ·ç«¯å¯åŠ¨æ—¶,ç”±äºå…¶è¿˜æœªé…ç½® IP åœ°å€,å› æ­¤åªèƒ½ä½¿ç”¨å¹¿æ’­æ–¹å¼å‘é€ Dhcpdiscover åŒ…,å³è¯¥æ•°æ®åŒ…çš„æºåœ°å€ä¸º 0.0.0.0,ç›®æ ‡åœ°å€ä¸º 255.255.255.255 DHCP å®¢æˆ·ä» UDP ç«¯å£ 68 å‘é€ DHCP å‘ç°æŠ¥æ–‡ã€‚ å‡¡æ”¶åˆ° DHCP å‘ç°æŠ¥æ–‡çš„ DHCP æœåŠ¡å™¨ éƒ½å‘å‡º DHCP æä¾›æŠ¥æ–‡ï¼Œå› æ­¤ DHCP å®¢æˆ· å¯èƒ½æ”¶åˆ°å¤šä¸ª DHCP æä¾›æŠ¥æ–‡ DHCP å®¢æˆ·ä»å‡ ä¸ª DHCP æœåŠ¡å™¨ä¸­é€‰æ‹© å…¶ä¸­çš„ä¸€ä¸ªï¼Œå¹¶å‘æ‰€é€‰æ‹©çš„ DHCP æœåŠ¡ å™¨å‘é€ DHCP è¯·æ±‚æŠ¥æ–‡ è¢«é€‰æ‹©çš„ DHCP æœåŠ¡å™¨å‘é€ç¡®è®¤æŠ¥æ–‡ DHCPACKï¼Œå®¢æˆ·è¿›å…¥å·²ç»‘å®šçŠ¶æ€ï¼Œå¹¶å¯ å¼€å§‹ä½¿ç”¨å¾—åˆ°çš„ä¸´æ—¶ IP åœ°å€äº†DHCP å®¢æˆ·ç°åœ¨è¦æ ¹æ®æœåŠ¡å™¨æä¾›çš„ç§Ÿç”¨æœŸ T è®¾ç½®ä¸¤ä¸ªè®¡æ—¶å™¨ T1 å’Œ T2ï¼Œå®ƒä»¬çš„è¶…æ—¶æ—¶é—´åˆ†åˆ«æ˜¯ 0.5T å’Œ 0.875Tã€‚å½“è¶…æ—¶æ—¶é—´åˆ°å°±è¦è¯·æ±‚æ›´æ–°ç§Ÿç”¨æœŸã€‚ ç§Ÿç”¨æœŸè¿‡äº†ä¸€åŠï¼ˆT1 æ—¶é—´åˆ°ï¼‰ï¼ŒDHCP å‘é€è¯·æ±‚æŠ¥æ–‡ DHCPREQUEST è¦æ±‚æ›´æ–°ç§Ÿç”¨æœŸã€‚ DHCP æœåŠ¡å™¨è‹¥ä¸åŒæ„ï¼Œåˆ™å‘å›å¦è®¤æŠ¥æ–‡ DHCPNACKã€‚è¿™æ—¶ DHCP å®¢æˆ·å¿…é¡»ç«‹å³åœæ­¢ä½¿ç”¨åŸæ¥çš„ IP åœ°å€ï¼Œè€Œå¿…é¡»é‡æ–°ç”³è¯· IP åœ°å€ï¼ˆå›åˆ°æ­¥éª¤ 2ï¼‰ DHCP æœåŠ¡å™¨è‹¥åŒæ„ï¼Œåˆ™å‘å›ç¡®è®¤æŠ¥æ–‡ DHCPACKã€‚DHCP å®¢æˆ·å¾—åˆ°äº†æ–°çš„ç§Ÿç”¨æœŸï¼Œé‡æ–°è®¾ç½®è®¡æ—¶å™¨ã€‚è‹¥ DHCP æœåŠ¡å™¨ä¸å“åº”æ­¥éª¤ 6 çš„è¯·æ±‚æŠ¥æ–‡ DHCPREQUESTï¼Œåˆ™åœ¨ç§Ÿç”¨æœŸè¿‡äº† 87.5% æ—¶ï¼ŒDHCP å®¢æˆ·å¿…é¡»é‡æ–°å‘é€è¯·æ±‚æŠ¥æ–‡ DHCPREQUESTï¼ˆé‡å¤æ­¥éª¤ 6ï¼‰ï¼Œç„¶ååˆç»§ç»­åé¢çš„æ­¥éª¤ã€‚ DHCP å®¢æˆ·å¯éšæ—¶æå‰ç»ˆæ­¢æœåŠ¡å™¨æ‰€æä¾›çš„ ç§Ÿç”¨æœŸï¼Œè¿™æ—¶åªéœ€å‘ DHCP æœåŠ¡å™¨å‘é€é‡Š æ”¾æŠ¥æ–‡ DHCPRELEASE å³å¯ã€‚ Network Address Translation (NAT)å¯¹äºå¤–éƒ¨ç½‘ç»œè€Œè¨€ï¼Œæœ¬åœ°ç½‘ç»œä¸­çš„æ‰€æœ‰è®¾å¤‡åªå…±äº«ä¸€ä¸ª IPv4 åœ°å€ã€‚è¿™æ ·åšæœ‰ä»¥ä¸‹å‡ ç‚¹å¥½å¤„ï¼š ä¸éœ€è¦ä» ISP åˆ†é…ä¸€ç³»åˆ—åœ°å€â€”â€” åªè¦ä¸€ä¸ª IP åœ°å€ç”¨äºæ‰€æœ‰è®¾å¤‡ åœ¨æœ¬åœ°ç½‘ç»œï¼Œæ”¹å˜è®¾å¤‡çš„ IP åœ°å€ä¸ç”¨é€šçŸ¥å¤–éƒ¨ä¸–ç•Œ å¯ä»¥å˜æ›´ ISP ï¼Œä¸ç”¨æ”¹å˜æœ¬åœ°ç½‘ç»œçš„è®¾å¤‡çš„åœ°å€ æœ¬åœ°ç½‘ç»œå†…éƒ¨è®¾å¤‡ä¸èƒ½è¢«å¤–éƒ¨ä¸–ç•Œæ˜ç¡®å¯»å€ï¼Œæˆ–æ˜¯ä¸å¯è§ (å¢åŠ äº†å®‰å…¨æ€§) ä½†åŒæ—¶ï¼Œä¸ºä¸å¤–éƒ¨ç½‘ç»œäº¤äº’ï¼Œéœ€è¿›è¡Œç½‘ç»œåœ°å€è½¬æ¢(NAT)ï¼Œæ‰§è¡Œ NATï¼Œè·¯ç”±å™¨ å¤–å‡ºçš„åˆ†ç»„: æŠŠæ¯ä¸ªå¤–å‡ºçš„åˆ†ç»„çš„ (æº IP åœ°å€, ç«¯å£å·) æ›¿æ¢ä¸º (NAT IP åœ°å€, æ–°ç«¯å£å·) åœ¨ NAT è½¬æ¢è¡¨(NAT Translation Table)ä¸­è®°å½•æ¯ä¸ª(æº IP åœ°å€, ç«¯å£å·)åˆ° (NAT IP åœ°å€, æ–°ç«¯å£å·) è½¬æ¢é…å¯¹ è¿›æ¥çš„åˆ†ç»„: å¯¹æ¯ä¸ªè¿›æ¥çš„åˆ†ç»„ï¼Œç”¨ä¿å­˜åœ¨ NAT è¡¨ä¸­çš„å¯¹åº”çš„(æº IP åœ°å€, ç«¯å£å·) æ›¿æ¢åˆ†ç»„ä¸­çš„ç›®çš„åŸŸ ï¼ˆNAT IP åœ°å€, æ–°ç«¯å£å·ï¼‰ Nat çš„ä¸€äº›å±€é™â€”â€”16bit ç«¯å£å·ä½¿å¾—ä¸€ä¸ªå±€åŸŸç½‘åœ°å€å¯ä»¥åŒæ—¶æ”¯æŒ 60,000 ä¸ªå¹¶å‘è¿æ¥! NAT å­˜åœ¨äº‰è®® è·¯ç”±å™¨åªåº”è¯¥å¤„ç†åˆ°ç¬¬ä¸‰å±‚ è¿åäº†ç«¯åˆ°ç«¯ä¸»å¼  åº”ç”¨ç¨‹åºè®¾è®¡è€…åœ¨è®¾è®¡æ—¶ä¸å¾—ä¸å°† NAT åŠ ä»¥è€ƒè™‘ å¦‚ P2P åº”ç”¨ç¨‹åº åº”ä½¿ç”¨ IPv6 æ¥è§£å†³åœ°å€çŸ­ç¼ºé—®é¢˜ ICMPInternet Control Message Protocolï¼ˆICMPï¼Œäº’è”ç½‘æ§åˆ¶æ¶ˆæ¯åè®®ï¼‰ï¼Œè´Ÿè´£åœ¨ç½‘ç»œè®¾å¤‡é—´ä¼ é€’æ§åˆ¶ä¸é”™è¯¯ä¿¡æ¯ï¼Œç¡®ä¿æ•°æ®åŒ…èƒ½å¤Ÿé¡ºåˆ©æŠµè¾¾ç›®çš„åœ°ã€‚äº’è”ç½‘ä¸­ä¸¢åŒ…ã€è·¯ç”±é”™è¯¯ã€ç½‘ç»œæ‹¥å¡ç­‰çŠ¶å†µæ—¶æœ‰å‘ç”Ÿã€‚è¿™æ—¶ï¼ŒICMP ä¾¿å¦‚åŒä¸€ä½ç»éªŒä¸°å¯Œçš„â€œè¯Šæ–­åŒ»ç”Ÿâ€ï¼Œé€šè¿‡å‘é€ç‰¹å®šçš„æ¶ˆæ¯ç±»å‹ï¼Œå¸®åŠ©è¯†åˆ«å¹¶æŠ¥å‘Šè¿™äº›ç½‘ç»œé—®é¢˜ã€‚ ICMP çš„åŸºæœ¬è¿ä½œåŸç†ICMP ä½äº Internet åè®®ï¼ˆIPï¼‰ä¹‹ä¸Šï¼Œå±äº TCP/IP åè®®æ ˆçš„ç½‘ç»œå±‚ã€‚å®ƒå¹¶ä¸ç›´æ¥å‚ä¸æ•°æ®çš„ä¼ è¾“ï¼Œè€Œæ˜¯ä½œä¸º IP åè®®çš„ä¸€ä¸ªè¾…åŠ©å·¥å…·ï¼Œé€šè¿‡å·®é”™æŠ¥å‘Šå’Œè¯¢é—®æœºåˆ¶æ¥å®ç°å…¶åŠŸèƒ½ã€‚ICMP æŠ¥æ–‡é€šå¸¸å°è£…åœ¨ IP æ•°æ®åŒ…å†…ï¼ŒåŒ…å«ç±»å‹ã€ä»£ç å’Œæ ¡éªŒå’Œç­‰å­—æ®µï¼Œç”¨ä»¥åŒºåˆ†ä¸åŒçš„æ¶ˆæ¯ç±»å‹å’Œæä¾›å®Œæ•´æ€§æ£€æŸ¥ã€‚ å·®é”™æŠ¥å‘Šï¼šå½“æ•°æ®åŒ…æ— æ³•åˆ°è¾¾ç›®æ ‡æˆ–é‡åˆ°å…¶ä»–ä¼ è¾“é—®é¢˜æ—¶ï¼Œè·¯ç”±å™¨æˆ–ä¸»æœºå¯ä»¥é€šè¿‡å‘é€ ICMP é”™è¯¯æ¶ˆæ¯ï¼ˆå¦‚â€œç›®æ ‡ä¸å¯è¾¾â€ã€â€œè¶…æ—¶â€ç­‰ï¼‰ç»™æºä¸»æœºï¼Œå‘ŠçŸ¥å‘ç”Ÿäº†ä»€ä¹ˆé—®é¢˜ã€‚ 1234567891011121314151617type code æè¿°0 0 pingåº”ç­” (ping)3 0 ç›®çš„ç½‘ç»œä¸å¯åˆ°è¾¾3 1 ç›®çš„ä¸»æœºä¸å¯åˆ°è¾¾3 2 ç›®çš„åè®®ä¸å¯åˆ°è¾¾3 3 ç›®çš„ç«¯å£ä¸å¯è¾¾åˆ°3 6 ä¸çŸ¥é“çš„ç›®çš„ç½‘ç»œ3 7 ä¸çŸ¥é“çš„ç›®çš„ä¸»æœº4 0 æºç«¯æŠ‘åˆ¶8 0 pingè¯·æ±‚ (ping)9 0 è·¯ç”±å™¨å…¬å‘Š10 0 è·¯ç”±å™¨å‘ç°11 0 TTL è¿‡æœŸ12 0 IPé¦–éƒ¨æŸå ICMP çš„å®ç”¨ä»·å€¼ç½‘ç»œæ•…éšœæ’é™¤ï¼šå¯¹äºç½‘ç»œç®¡ç†å‘˜è€Œè¨€ï¼Œé€šè¿‡åˆ†æ ICMP åé¦ˆçš„ä¿¡æ¯ï¼Œå¯ä»¥è¿…é€Ÿå®šä½ç½‘ç»œæ•…éšœï¼Œæ¯”å¦‚åˆ¤æ–­æ˜¯ç½‘ç»œæ‹¥å¡è¿˜æ˜¯é“¾è·¯æ•…éšœå¯¼è‡´çš„æ•°æ®åŒ…ä¸¢å¤±ã€‚ è·¯å¾„ç›‘æµ‹ä¸æµ‹é‡ï¼šâ€œTracerouteâ€åˆ©ç”¨ ICMP çš„ TTLï¼ˆTime to Liveï¼‰å­—æ®µé€’å‡ç‰¹æ€§ï¼Œé€è·³è¿½è¸ªæ•°æ®åŒ…çš„ä¼ è¾“è·¯å¾„ï¼Œå¸®åŠ©ç†è§£ç½‘ç»œæ‹“æ‰‘ç»“æ„åŠå»¶è¿Ÿæƒ…å†µã€‚ å¯ç”¨æ€§æ£€æŸ¥ï¼šâ€œPingâ€å‘½ä»¤ç®€å•æœ‰æ•ˆï¼Œæˆä¸ºæ£€æµ‹è¿œç¨‹ä¸»æœºæ˜¯å¦å¯è¾¾çš„æ—¥å¸¸å·¥å…·ï¼Œå¹¿æ³›åº”ç”¨äºç½‘ç»œç»´æŠ¤å’ŒæœåŠ¡å™¨ç›‘æ§ä¸­ã€‚ å®‰å…¨è€ƒé‡ä¸é™åˆ¶å°½ç®¡ ICMP å¯¹ç½‘ç»œè¿ç»´è‡³å…³é‡è¦ï¼Œä½†å®ƒä¹Ÿå­˜åœ¨è¢«æ»¥ç”¨çš„é£é™©ï¼Œä¾‹å¦‚ç”¨äº DDoS æ”»å‡»ä¸­çš„ Smurf æ”»å‡»æˆ–æ”¾å¤§æ”»å‡»ã€‚å› æ­¤ï¼Œåˆç†é…ç½®é˜²ç«å¢™ç­–ç•¥ï¼Œå¯¹ ICMP æµé‡è¿›è¡Œé€‚å½“é™åˆ¶å’Œç›‘æ§ï¼Œæ˜¯ä¿éšœç½‘ç»œå®‰å…¨çš„å¿…è¦æªæ–½ã€‚ IPV6 åˆå§‹åŠ¨æœºï¼š 32-bit IPv4 åœ°å€ç©ºé—´å³å°†ç”¨å°½ å…¶ä»–åŠ¨æœºï¼š é¦–éƒ¨æ ¼å¼å¯å¸®åŠ©åŠ é€Ÿå¤„ç†/è½¬å‘ æ”¹å˜é¦–éƒ¨åˆ©äº QoS è¦æ±‚ IPv6 æ•°æ®æŠ¥æ ¼å¼ å›ºå®šé•¿åº¦çš„ 40 å­—èŠ‚é¦–éƒ¨ ä¸å…è®¸åˆ†ç‰‡ IPV6 æŠ¥æ–‡æ ¼å¼ Priority: è¡¨ç¤ºæµä¸­åˆ†ç»„çš„ä¼˜å…ˆçº§Flowlabel: è¡¨ç¤ºåˆ†ç»„åœ¨åŒä¸€ä¸ªâ€œstreamâ€ä¸­ (â€œæµâ€çš„æ¦‚å¿µå°šæœªå®Œå…¨å®šä¹‰)next hdr(header): è¡¨ç¤ºæ•°æ®çš„ä¸Šå±‚åè®® ä¸ IPv4 åŒºåˆ« åˆ æ‰åˆ†ç‰‡/é‡æ–°ç»„è£…ï¼› æ ¡éªŒå’Œ: å…¨éƒ¨å»æ‰ï¼Œå‡å°‘æ¯ä¸€è·³çš„å¤„ç†æ—¶é—´ è™½å…è®¸ Option å­—æ®µ, ä½†æ˜¯ä¸æ˜¯æ ‡å‡†é¦–éƒ¨çš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯ç”¨ä¸‹ä¸€ä¸ªé¦–éƒ¨åŸŸæŒ‡å‡º ICMPv6:æ–°ç‰ˆæœ¬çš„ ICMPå¢åŠ æ¶ˆæ¯ç±»å‹, ä¾‹å¦‚â€œåˆ†ç»„å¤ªå¤§â€å¤šæ’­ç»„ç®¡ç†åŠŸèƒ½ IPV6 åœ°å€è¡¨ç¤º åœ¨ IPv6 ä¸­ï¼Œåœ°å€åˆ†ä¸º 8 ä¸ªæ®µæ¥è¡¨ç¤ºï¼Œæ¯æ®µå…± 4 ä¸ªå­—ç¬¦ å†’å·åå…­è¿›åˆ¶è¡¨ç¤ºæ³•104.220.136.100.255.255.255.255.0.0.18.128.140.10.255.255ç”¨å†’å·åå…­è¿›åˆ¶è¡¨ç¤ºä¸ºï¼š69DC:8864:FFFF:FFFF:0:1280:8C0A:FFFF é›¶å‹ç¼©è¡¨ç¤ºæ³•å¤šä¸ªè¿ç»­çš„0å¯ç”¨::æ›¿æ¢;å½“è®¡ç®—æœºæ‹¿åˆ°è¿™ä¸ªå‹ç¼©åçš„åœ°å€ï¼Œå‘ç°æ¯”æ­£å¸¸çš„ 128 ä½å°‘äº† n ä½ï¼Œè®¡ç®—æœºå°±ä¼šè¯•å›¾åœ¨::çš„åœ°æ–¹è¡¥ä¸Š n ä¸ª 0ï¼Œä»ç»“æœä¸­å¯ä»¥å‘ç°ï¼Œå½“ä¸€ä¸ª IPv6 åœ°å€è¢«å‹ç¼©åï¼Œå¦‚æœè®¡ç®—æœºå‡ºç°ä¸¤ä¸ªæˆ–å¤šä¸ª::çš„æ—¶å€™ï¼Œè®¡ç®—æœºåœ¨å°†åœ°å€è¿˜åŸæ—¶ï¼Œå°±å¯èƒ½å‡ºç°å¤šç§æƒ…å†µã€‚è¿™å°†å¯¼è‡´è®¡ç®—æœºè¿˜åŸåçš„åœ°å€ä¸æ˜¯å‹ç¼©ä¹‹å‰çš„åœ°å€ï¼Œå°†å¯¼è‡´åœ°å€é”™è¯¯ï¼Œæœ€ç»ˆé€šä¿¡å¤±è´¥ã€‚æ‰€ä»¥åœ¨å‹ç¼© IPv6 åœ°å€æ—¶ï¼Œä¸€ä¸ªåœ°å€ä¸­åªèƒ½å‡ºç°ä¸€ä¸ª::FF0C:0:0:0:0:0:B1é›¶å‹ç¼©è¡¨ç¤ºä¸ºï¼šFF0C::B1 ä» IPV4 åˆ° IPV6 è¿‡æ¸¡ä¸¤ç§æ¨èæ–¹æ³•:åŒæ ˆï¼šä¸€äº›è·¯ç”±å™¨å…·æœ‰åŒé‡æ ˆ (v6, v4) èƒ½å¤Ÿåœ¨ä¸¤ç§æ ¼å¼ä¸­è½¬æ¢éš§é“: åœ¨ç©¿è¿‡ IPv4 è·¯ç”±å™¨æ—¶ï¼ŒIPv6 åˆ†ç»„ä½œä¸º IPv4 åˆ†ç»„çš„è´Ÿè½½ Refæµé‡æ§åˆ¶çš„ç›¸å…³ç®—æ³•ä¸æ•°æ®ç»“æ„â€”â€”Round Robin è½®æµæœåŠ¡ï¼ŒWeighted Fair Quequing(WFQ)åŠ æƒå…¬å¹³é˜Ÿåˆ—ä¸ Leaky Bucket æ¼æ¡¶é™æµ","link":"/UESTC/ComputerNetworking/Ch4-1NetworkLayer/"},{"title":"ç½‘ç»œå±‚æ§åˆ¶å¹³é¢ Network Layer:Control Plane","text":"Introductionè·¯ç”±ç®—æ³•ç¡®å®šäº†é€šè¿‡ç½‘ç»œçš„ç«¯åˆ°ç«¯è·¯å¾„ï¼Œè½¬å‘è¡¨ç¡®å®šäº†åœ¨è·¯ç”±å™¨ä¸Šçš„æœ¬åœ°è½¬å‘ï¼Œè½¬å‘è¡¨æ˜¯é“¾æ¥æ•°æ®å¹³é¢ä¸æ§åˆ¶å¹³é¢çš„ä¸»è¦å…ƒç´ ï¼Œæœ¬ç¯‡å°†ä»‹ç»å…¶æ˜¯å¦‚ä½•è®¡ç®—ã€ç»´æŠ¤çš„ æ¯ä¸ªè·¯ç”±å™¨æ§åˆ¶ Per-router controlï¼šæ¯å°è·¯ç”±å™¨æœ‰ä¸€ä¸ªè·¯ç”±é€‰æ‹©ç»„ä»¶ï¼Œç”¨äºä¸å…¶ä»–è·¯ç”±å™¨ä¸­çš„è·¯ç”±é€‰æ‹©ç»„ä»¶é€šä¿¡ï¼Œä»¥è®¡ç®—å…¶è½¬å‘è¡¨çš„å€¼ã€‚ é€»è¾‘é›†ä¸­å¼æ§åˆ¶ Logically centralized controlï¼šé€»è¾‘é›†ä¸­å¼æ§åˆ¶å™¨è®¡ç®—å¹¶åˆ†å‘è½¬å‘è¡¨ä»¥ä¾›æ¯å°è·¯ç”±å™¨ä½¿ç”¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š Routing Algorithmsè·¯ç”±çš„åŸºæœ¬æ¦‚å¿µ é»˜è®¤è·¯ç”±å™¨ï¼šä¸ä¸»æœºç›´æ¥ç›¸è¿çš„è·¯ç”±å™¨ï¼Œåˆå«ç¬¬ä¸€è·³è·¯ç”±å™¨ã€‚æ¯å½“ä¸»æœºå‘é€ä¸€ä¸ªåˆ†ç»„æ—¶ï¼Œéƒ½å…ˆä¼ é€ç»™å®ƒçš„é»˜è®¤è·¯ç”±å™¨ã€‚ æºè·¯ç”±å™¨ï¼šæºä¸»æœºçš„é»˜è®¤è·¯ç”±å™¨ã€‚ ç›®çš„è·¯ç”±å™¨ï¼šç›®çš„ä¸»æœºçš„é»˜è®¤è·¯ç”±å™¨ã€‚ ä»æºä¸»æœºåˆ°ç›®çš„ä¸»æœºçš„é€‰è·¯å½’ç»“ä¸ºä»æºè·¯ç”±å™¨åˆ°ç›®çš„è·¯ç”±å™¨çš„é€‰è·¯ã€‚ è·¯ç”±ç®—æ³•ï¼šæ˜¯ç¡®å®šä¸€ä¸ªåˆ†ç»„ä»æºè·¯ç”±å™¨åˆ°ç›®çš„è·¯ç”±å™¨æ‰€ç»è·¯å¾„çš„ç®—æ³• è·¯ç”±ç®—æ³•çš„å…³é”®ï¼šåœ¨ç»™å®šçš„ä¸€ç»„è·¯ç”±å™¨ä»¥åŠè¿æ¥è·¯ç”±å™¨çš„é“¾è·¯ä¸­ï¼Œæ‰¾åˆ°ä¸€æ¡ä»æºè·¯ç”±å™¨åˆ°ç›®çš„è·¯ç”±å™¨çš„â€œå¥½â€è·¯å¾„ã€‚ ç½‘ç»œçš„æŠ½è±¡å›¾æ¨¡å‹ å›¾$G = (Nï¼ŒE)$è¡¨ç¤º N ä¸ªèŠ‚ç‚¹å’Œ E æ¡è¾¹çš„é›†åˆï¼Œæ¯æ¡è¾¹æ˜¯æ¥è‡ª N çš„ä¸€å¯¹èŠ‚ç‚¹ã€‚Node èŠ‚ç‚¹ï¼šè¡¨ç¤ºè·¯ç”±å™¨(åšå‡ºåˆ†ç»„è½¬å‘åˆ¤å†³çš„ç‚¹)ã€‚å¦‚ $uï¼Œvï¼Œwï¼Œxï¼Œyï¼Œz$Edge è¾¹ï¼šè¿æ¥èŠ‚ç‚¹çš„çº¿æ®µï¼Œè¡¨ç¤ºè·¯ç”±å™¨ä¹‹é—´çš„ç‰©ç†é“¾è·¯ã€‚å¦‚$(uï¼Œv)ã€ (uï¼Œx) ã€(uï¼Œw)ã€â€¦$ Cost å¯ä»¥è¡¨ç¤ºå¯¹åº”é“¾è·¯çš„ç‰©ç†é•¿åº¦ã€æˆ–é“¾è·¯é€Ÿåº¦ã€æˆ–ä¸é“¾è·¯ç›¸å…³çš„è´¹ç”¨ã€‚å®šä¹‰ï¼š$c(xï¼Œy)$ è¡¨ç¤ºä»èŠ‚ç‚¹ x åˆ°èŠ‚ç‚¹ y çš„é“¾è·¯è´¹ç”¨,è§„å®šè‹¥èŠ‚ç‚¹ x ä¸èŠ‚ç‚¹ y ä¸ç›´æ¥ç›¸è¿åˆ™$c(x,y)=\\infty$ Routing Algorithms Classification é›†ä¸­å¼è·¯ç”±é€‰æ‹©ç®—æ³• Centralized Routing Algorithmï¼šç”¨å®Œæ•´ã€å…¨å±€æ€§çš„ç½‘ç»œçŸ¥è¯†è®¡ç®—å‡ºä»æºåˆ°ç›®çš„åœ°ä¹‹é—´çš„æœ€ä½å¼€é”€è·¯å¾„ã€‚å…·æœ‰å…¨å±€çŠ¶æ€ä¿¡æ¯çš„ç®—æ³•å¸¸è¢«ç§°ä½œé“¾è·¯çŠ¶æ€(Link Stateï¼ŒLS)ç®—æ³•ï¼Œå› ä¸ºè¯¥ç®—æ³•å¿…é¡»çŸ¥é“ç½‘ç»œä¸­æ¯æ¡é“¾è·¯çš„å¼€é”€ã€‚ åˆ†å¸ƒå¼è·¯ç”±ç®—æ³• Decentralized Routing Algorithmï¼šè·¯ç”±å™¨ä»¥è¿­ä»£ã€åˆ†å¸ƒå¼è®¡ç®—çš„æ–¹å¼è®¡ç®—å‡ºæœ€ä½å¼€é”€è·¯å¾„ã€‚æ²¡æœ‰èŠ‚ç‚¹æ‹¥æœ‰å…³äºç½‘ç»œé“¾è·¯å¼€é”€çš„å®Œæ•´ä¿¡æ¯ã€‚ä¸€ä¸ªåˆ†æ•£å¼è·¯ç”±é€‰æ‹©ç®—æ³•ä¸ºè·ç¦»å‘é‡(Distance-Vectorï¼ŒDV)ç®—æ³•ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç»´æŠ¤åˆ°ç½‘ç»œä¸­æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹çš„å¼€é”€ä¼°è®¡çš„å‘é‡ã€‚ é™æ€è·¯ç”±ç®—æ³•ï¼šè·¯ç”±ç¡®å®šååŸºæœ¬ä¸å†å˜åŒ–ã€‚åªæœ‰äººå·¥å¹²é¢„è°ƒæ•´æ—¶ï¼Œå¯èƒ½æœ‰ä¸€äº›å˜åŒ–ã€‚ åŠ¨æ€è·¯ç”±ç®—æ³•ï¼šå½“ç½‘ç»œçš„æµé‡è´Ÿè½½æˆ–æ‹“æ‰‘å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè·¯å¾„å¯èƒ½å‘ç”Ÿæ”¹å˜ã€‚å¯ä»¥å‘¨æœŸæ€§åœ°æˆ–ç›´æ¥åœ°å“åº”æ‹“æ‰‘æˆ–é“¾è·¯è´¹ç”¨çš„å˜åŒ–ã€‚æ˜“å—é€‰è·¯å¾ªç¯ã€è·¯ç”±æŒ¯è¡ä¹‹ç±»é—®é¢˜çš„å½±å“ã€‚ Link State Routing Algorithmsé“¾è·¯çŠ¶æ€é€‰è·¯ç®—æ³• åœ¨å®è·µä¸­ï¼Œè¿™ç»å¸¸ç”±é“¾è·¯çŠ¶æ€å¹¿æ’­ï¼ˆlink state broadcastï¼‰ç®—æ³•å®Œæˆã€‚ä¸‹é¢ç»™å‡ºçš„é“¾è·¯çŠ¶æ€è·¯ç”±é€‰æ‹©ç®—æ³•æ˜¯ Dijkstraâ€™s algorithm Dijkstraâ€™s Alogorithm æ‰€æœ‰èŠ‚ç‚¹çŸ¥é“ç½‘ç»œæ‹“æ‰‘ï¼Œä»¥åŠæ¯æ¡é“¾è·¯çš„è´¹ç”¨ä¿¡æ¯ é€šè¿‡é“¾è·¯çŠ¶æ€å¹¿æ’­æ¥å®ç° æ‰€æœ‰èŠ‚ç‚¹æ‹¥æœ‰ç›¸åŒçš„ä¿¡æ¯ è®¡ç®—ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆæºèŠ‚ç‚¹ï¼‰åˆ°æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹çš„æœ€ä½è´¹ç”¨è·¯å¾„ ç»™å‡ºè¯¥èŠ‚ç‚¹çš„è½¬å‘è¡¨ è¿­ä»£ï¼šé€šè¿‡ k æ¬¡è¿­ä»£åå¯ä»¥çŸ¥é“åˆ°è¾¾ k ä¸ªç›®çš„èŠ‚ç‚¹çš„æœ€ä½è´¹ç”¨è·¯å¾„ åŸºæœ¬æ€æƒ³ï¼šä»¥æºèŠ‚ç‚¹ä¸ºèµ·ç‚¹ï¼Œæ¯æ¬¡æ‰¾å‡ºä¸€ä¸ªåˆ°æºèŠ‚ç‚¹çš„è´¹ç”¨æœ€ä½çš„èŠ‚ç‚¹ï¼Œç›´åˆ°æŠŠæ‰€æœ‰çš„ç›®çš„èŠ‚ç‚¹éƒ½æ‰¾åˆ°ä¸ºæ­¢ã€‚ å®šä¹‰ä»¥ä¸‹ç¬¦å· c(x,y): è¡¨ç¤ºä»èŠ‚ç‚¹ x åˆ°èŠ‚ç‚¹ y çš„é“¾è·¯è´¹ç”¨,è§„å®šè‹¥èŠ‚ç‚¹ x ä¸èŠ‚ç‚¹ y ä¸ç›´æ¥ç›¸è¿åˆ™c(x,y)=âˆ D(v)ï¼šåˆ°ç®—æ³•çš„æœ¬æ¬¡è¿­ä»£ï¼Œä»æºèŠ‚ç‚¹åˆ°ç›®çš„èŠ‚ç‚¹ v çš„æœ€ä½å¼€é”€ï¼› p(v)ï¼šä»æºåˆ° v æ²¿ç€å½“å‰æœ€å°å¼€é”€è·¯å¾„çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆv çš„é‚»å±…ï¼‰ï¼› N'ï¼šèŠ‚ç‚¹å­é›†ï¼›å¦‚æœä»æºåˆ° v çš„æœ€ä½å¼€é”€è·¯å¾„å·²ç»ç¡®å®šï¼Œv åœ¨N'ä¸­ u æºèŠ‚ç‚¹ Link-State (LS) Algorithm for Source Node u12345678910111213Initialization: N' = {u} for all nodes v if v is a neighbor of u: then D(v) = c(u,v) else D(v) = âˆwhile N' != N: # ä»N'çš„è¡¥é›†ä¸­æ‰¾ä¸€ä¸ªåˆ°æºèŠ‚ç‚¹è´¹ç”¨æœ€ä½çš„èŠ‚ç‚¹ find w not in N' such that D(w) is a minimum add w to N' update D(v) for each neighbor v of w and not in N': D(v) = min(D(v),D(w)+c(w,v)) ä»¥ä¸Šå›¾ä¸ºä¾‹,è®¡ç®—ä»uåˆ°æ‰€æœ‰å¯èƒ½ç›®çš„èŠ‚ç‚¹çš„æœ€ä½è´¹ç”¨è·¯å¾„ã€‚ç®—æ³•è¿­ä»£å¦‚ä¸‹ æ„å»ºä»æºèŠ‚ç‚¹åˆ°æ‰€æœ‰ç›®çš„èŠ‚ç‚¹çš„è·¯å¾„ å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œéƒ½å¾—åˆ°ä»æºèŠ‚ç‚¹æ²¿ç€å®ƒçš„æœ€ä½è´¹ç”¨è·¯å¾„çš„å‰é©±èŠ‚ç‚¹ï¼› æ¯ä¸ªå‰é©±èŠ‚ç‚¹ï¼Œåˆå¯å¾—åˆ°å®ƒçš„å‰é©±èŠ‚ç‚¹ï¼›ä»¥æ­¤ç»§ç»­ï¼Œå¯ä»¥å¾—åˆ°åˆ°æ‰€æœ‰ç›®çš„èŠ‚ç‚¹çš„å®Œæ•´è·¯å¾„ã€‚å¦‚èŠ‚ç‚¹ z çš„å‰é©±èŠ‚ç‚¹ä¾æ¬¡ä¸ºï¼šp(z)=y,z-&gt;y;p(y)=x,z-&gt;y-&gt;x;p(x)=u,z-&gt;y-&gt;x-&gt;u å¾—å‡ºä»æºèŠ‚ç‚¹ u åˆ°èŠ‚ç‚¹ z çš„æœ€ä½è´¹ç”¨è·¯å¾„ä¸ºï¼šuxyzï¼Œè´¹ç”¨ä¸º 4ã€‚ æ ¹æ®ç›®çš„èŠ‚ç‚¹æ‰¾å‡ºé¡ºåºå’Œå…¶è´¹ç”¨ä»¥åŠå‰é©±èŠ‚ç‚¹ï¼Œå¯ä»¥ç”»å‡ºæºèŠ‚ç‚¹ u åˆ°æ‰€æœ‰ç›®çš„èŠ‚ç‚¹çš„æœ€ä½è´¹ç”¨è·¯å¾„æ ‘ã€‚ æ ¹æ®å¾—åˆ°çš„æ‰€æœ‰ç›®çš„èŠ‚ç‚¹çš„å®Œæ•´è·¯å¾„ï¼Œæˆ–æœ€ä½è´¹ç”¨è·¯å¾„æ ‘ï¼Œå¯ä»¥ç”ŸæˆæºèŠ‚ç‚¹çš„è½¬å‘è¡¨ã€‚è½¬å‘è¡¨å­˜æ”¾ä»æºèŠ‚ç‚¹åˆ°æ¯ä¸ªç›®çš„èŠ‚ç‚¹çš„æœ€ä½è´¹ç”¨è·¯å¾„ä¸Šçš„ä¸‹ä¸€è·³èŠ‚ç‚¹ã€‚å³æŒ‡å‡ºå¯¹äºå‘å¾€æŸä¸ªç›®çš„èŠ‚ç‚¹çš„åˆ†ç»„ï¼Œä»è¯¥èŠ‚ç‚¹å‘å‡ºåçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚ é»˜è®¤è·¯ç”± * ï¼šè¡¨ç¤ºæ‰€æœ‰å…·æœ‰ç›¸åŒâ€œä¸‹ä¸€è·³â€çš„è¡¨é¡¹ã€‚å³å°†â€œä¸‹ä¸€è·³â€ç›¸åŒçš„é¡¹åˆå¹¶ä¸ºä¸€é¡¹ï¼Œç›®çš„èŠ‚ç‚¹ç”¨*è¡¨ç¤ºã€‚ä¼˜å…ˆçº§æœ€ä½ï¼Œè½¬å‘åˆ†ç»„æ—¶ï¼Œå½“æ‰¾ä¸åˆ°å¯¹åº”è¡¨é¡¹æ—¶ï¼Œæ‰ä½¿ç”¨é»˜è®¤è·¯ç”±ã€‚ Dijkstraâ€™s Algorithm å¤æ‚åº¦è®¾ n ä¸ªèŠ‚ç‚¹(é™¤æºèŠ‚ç‚¹)ï¼Œæœ€åæƒ…å†µä¸‹è¦ç»å¤šå°‘æ¬¡è®¡ç®—æ‰èƒ½æ‰¾åˆ°ä»æºèŠ‚ç‚¹åˆ°æ‰€æœ‰ç›®çš„èŠ‚ç‚¹çš„æœ€ä½è´¹ç”¨è·¯å¾„?ç¬¬ä¸€æ¬¡è¿­ä»£ï¼šæœç´¢æ‰€æœ‰çš„ n ä¸ªèŠ‚ç‚¹ä»¥ç¡®å®šæœ€ä½è´¹ç”¨èŠ‚ç‚¹ç¬¬äºŒæ¬¡è¿­ä»£ï¼šæ£€æŸ¥ n-1 ä¸ªèŠ‚ç‚¹ï¼›ç¬¬ä¸‰æ¬¡ï¼šæ£€æŸ¥ n-2 ä¸ªèŠ‚ç‚¹ï¼›ä¾æ¬¡ç±»æ¨ã€‚æ‰€æœ‰è¿­ä»£ä¸­éœ€è¦æœå¯»çš„èŠ‚ç‚¹æ€»æ•°ä¸º $\\frac{n(n+1)}{2}$ç®—æ³•å¤æ‚æ€§ä¸º $O(n^2)$ ä¸”è·¯çº¿ä¸Šçš„æµé‡å˜åŒ–å’Œæ‹¥å¡ä¼šä½¿ LS ç®—æ³•äº§ç”Ÿè·¯ç”±éœ‡è¡ Routing Oscillations The Distance-Vectorï¼ˆDVï¼‰Routing Algorithmè·ç¦»å‘é‡è·¯ç”±ç®—æ³•æœ‰ä»¥ä¸‹ç‰¹å¾ è¿­ä»£ Iterativeï¼šè®¡ç®—è¿‡ç¨‹ä¸€ç›´æŒç»­åˆ°é‚»å±…ä¹‹é—´æ— æ›´å¤šä¿¡æ¯äº¤æ¢ä¸ºæ­¢ã€‚ åˆ†å¸ƒå¼ Distributedï¼šæ¯ä¸ªèŠ‚ç‚¹éƒ½ä»å…¶ç›´æ¥ç›¸è¿é‚»å±…æ¥æ”¶ä¿¡æ¯ï¼Œè¿›è¡Œè®¡ç®—ï¼Œå†å°†è®¡ç®—ç»“æœåˆ†å‘ç»™é‚»å±…ã€‚ å¼‚æ­¥ Asynchronousï¼šä¸è¦æ±‚æ‰€æœ‰èŠ‚ç‚¹ç›¸äº’ä¹‹é—´æ­¥ä¼ä¸€è‡´åœ°æ“ä½œã€‚ è‡ªæˆ‘ç»ˆç»“ Self-terminationï¼šç®—æ³•èƒ½è‡ªè¡Œåœæ­¢ã€‚ Bellman-Ford æ–¹ç¨‹ $$d_x(y)=min_v{c(x,v)+d_v(y)}$$ $d_x(y)$ï¼šèŠ‚ç‚¹ x åˆ°èŠ‚ç‚¹ y çš„æœ€ä½å¼€é”€è·¯å¾„çš„ costã€‚ $v$: èŠ‚ç‚¹ x çš„é‚»å±…èŠ‚ç‚¹ã€‚ $c(x,v)+ d_v(y)$ï¼šx ä¸æŸä¸ªé‚»å±… v ä¹‹é—´çš„ç›´æ¥é“¾è·¯è´¹ç”¨ c(x,v)åŠ ä¸Šé‚»å±… v åˆ° y çš„æœ€å°è´¹ç”¨ã€‚å³ x ç» v åˆ°èŠ‚ç‚¹ y çš„æœ€å°çš„è·¯å¾„è´¹ç”¨ã€‚ $min_v$ ï¼šä»æ‰€æœ‰ç»ç›´æ¥ç›¸è¿é‚»å±…èŠ‚ç‚¹åˆ°èŠ‚ç‚¹ y çš„è´¹ç”¨ä¸­é€‰å–çš„æœ€å°è·¯å¾„è´¹ç”¨ã€‚ Distance-Vector (DV) Algorithm å¯¹æ¯ä¸ªèŠ‚ç‚¹ x: åˆå§‹åŒ– ç­‰å¾… (æ”¶åˆ°æœ¬åœ°é“¾è·¯ä»£ä»·å˜åŒ–æˆ–é‚»å±…æ¥è·ç¦»çŸ¢é‡æ›´æ–°) é‡æ–°è®¡ç®—è·ç¦»çŸ¢é‡,æ›´æ–°è·ç¦»å‘é‡ å¦‚æœåˆ°ä»»ä½•ç›®çš„èŠ‚ç‚¹çš„è·ç¦»çŸ¢é‡å‘ç”Ÿå˜åŒ–, é€šçŸ¥é‚»å±… goto2 ä»ä»¥è¯¥å›¾ä¸ºä¾‹,è®¡ç®—æºèŠ‚ç‚¹uåˆ°ç›®çš„èŠ‚ç‚¹zçš„æœ€ä½è´¹ç”¨è·¯å¾„ã€‚ é‚»å±… vï¼š$d_v(z) = 5ã€c(u,v) = 2$ é‚»å±… wï¼š$d_w(z) = 3ã€c(u,w) = 5$ é‚»å±… xï¼š$d_x(z) = 3ã€c(u,x) = 1$ $$ d_u(z) = min \\{ c(u,v) + d_v(z), c(u,w) + d_w(z) , c(u,x) + d_x(z)\\} \\\\ = min\\{2+5,5+3,1+3\\} = 4 $$ å³æºèŠ‚ç‚¹ u ç»ç›¸é‚»èŠ‚ç‚¹ x åˆ°ç›®çš„èŠ‚ç‚¹ z çš„è·¯å¾„è´¹ç”¨æœ€ä½ï¼Œä¸º 4 èŠ‚ç‚¹çš„è·ç¦»å‘é‡è¡¨ è¡Œï¼šè¯¥èŠ‚ç‚¹çš„è·ç¦»å‘é‡ Dx å’Œå…¶é‚»å±…çš„è·ç¦»å‘é‡ Dv åˆ—ï¼šæ‰€æœ‰ç›®çš„èŠ‚ç‚¹ã€‚ èŠ‚ç‚¹ x çš„è·ç¦»å‘é‡ $D_x$ ï¼Œå³èŠ‚ç‚¹ x åˆ°æ¯ä¸ªç›®çš„èŠ‚ç‚¹ y çš„ä¼°è®¡è´¹ç”¨ï¼› $Dx = [D_x(y) | y \\in N ]$èŠ‚ç‚¹ x æ¯ä¸ªé‚»å±…çš„è·ç¦»å‘é‡ $D_v$ ï¼Œå³ x çš„é‚»å±… v åˆ°æ¯ä¸ªç›®çš„èŠ‚ç‚¹ y çš„ä¼°è®¡è´¹ç”¨ï¼Œ$Dv = [D_v(y)ï¼šy \\in N]$ å¦‚ä½•æ›´æ–°è·ç¦»å‘é‡? æ¯ä¸ªèŠ‚ç‚¹ä¸æ–­å‘é‚»å±…å‘é€å…¶è·ç¦»å‘é‡çš„ copyï¼› å½“èŠ‚ç‚¹ x æ”¶åˆ°ä¸€ä¸ªé‚»å±… v çš„æ–°è·ç¦»å‘é‡ï¼Œå…ˆä¿å­˜ï¼Œå¹¶ç”¨ B-F å…¬å¼æ›´æ–°è‡ªå·±çš„è·ç¦»å‘é‡ï¼š$D_x(y)=min_v{c(x,v)+D_v(y)}$ä»æ‰€æœ‰ç»é‚»å±… v åˆ°èŠ‚ç‚¹ y çš„è´¹ç”¨ä¸­é€‰å–æœ€å°è·¯å¾„è´¹ç”¨ è‹¥è·ç¦»å‘é‡å‘ç”Ÿæ”¹å˜ï¼Œå°†æ–°çš„è·ç¦»å‘é‡é€šçŸ¥ç»™é‚»å±…ã€‚ å½“è·ç¦»å‘é‡ä¸å†å˜åŒ–ï¼Œç®—æ³•ç»ˆæ­¢ï¼Œæ­¤æ—¶$D_x(y)$æ”¶æ•›åˆ°$d_x(y)$ï¼Œå³å¾—åˆ°èŠ‚ç‚¹ x åˆ°èŠ‚ç‚¹ y çš„æœ€ä½è´¹ç”¨è·¯å¾„ã€‚ å¤šæ¬¡é‡å¤ä»é‚»å±…æ¥æ”¶æ›´æ–°è·ç¦»å‘é‡ã€é‡æ–°è®¡ç®—é€‰è·¯è¡¨é¡¹ã€å¹¶å‘é‚»å±…å‘é€æ›´æ–°é€šçŸ¥çš„è¿‡ç¨‹ï¼Œç›´åˆ°æ²¡æœ‰æ›´æ–°æŠ¥æ–‡ ç®—æ³•è¿›å…¥é™æ­¢çŠ¶æ€ï¼Œç›´åˆ°æŸä¸ªé“¾è·¯è´¹ç”¨å‘ç”Ÿæ”¹å˜ä¸ºæ­¢ã€‚ Distance-Vector Algorithm: Link-Cost Changes and Link Failureå½“ä¸€ä¸ªèŠ‚ç‚¹æ£€æµ‹åˆ°ä»å®ƒåˆ°é‚»å±…çš„é“¾è·¯è´¹ç”¨å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±æ›´æ–°å…¶è·ç¦»å‘é‡ï¼Œå¦‚æœæœ€ä½è´¹ç”¨è·¯å¾„çš„è´¹ç”¨å‘ç”Ÿå˜åŒ–ï¼Œé€šçŸ¥å…¶é‚»å±…ã€‚ æŸé“¾è·¯è´¹ç”¨å‡å°‘æ—¶æƒ…å†µå¦‚å›¾æ‰€ç¤ºï¼Œå½“ y åˆ° x çš„é“¾è·¯è´¹ç”¨ä» 4 å˜ä¸º 1 çš„æƒ…å†µã€‚ t0ï¼šy æ£€æµ‹åˆ° x çš„é“¾è·¯è´¹ç”¨ä» 4 å˜ä¸º 1ï¼Œæ›´æ–°å…¶è·ç¦»å‘é‡ï¼Œå¹¶é€šçŸ¥å…¶é‚»å±… zï¼› t1ï¼šz æ”¶åˆ°æ¥è‡ª y çš„æ›´æ–°æŠ¥æ–‡ï¼Œå¹¶æ›´æ–°è‡ªå·±çš„è·ç¦»è¡¨ï¼Œæ­¤æ—¶åˆ°èŠ‚ç‚¹ x çš„æœ€ä½è´¹ç”¨å‡ä¸º 2ï¼Œå¹¶é€šçŸ¥å…¶é‚»å±… yï¼› t2ï¼šy æ”¶åˆ°æ¥è‡ª z çš„æ›´æ–°æŠ¥æ–‡ï¼Œå¹¶æ›´æ–°è‡ªå·±çš„è·ç¦»è¡¨ï¼Œæ­¤æ—¶åˆ°èŠ‚ç‚¹ x çš„æœ€ä½è´¹ç”¨ä¸å˜ä»ä¸º 1ã€‚ä¸å‘é€æ›´æ–°æŠ¥æ–‡ï¼Œç®—æ³•é™æ­¢ã€‚å½“ x ä¸ y ä¹‹é—´è´¹ç”¨å‡å°‘ï¼ŒDV ç®—æ³•åªéœ€ä¸¤æ¬¡è¿­ä»£åˆ°è¾¾é™æ­¢çŠ¶æ€ã€‚èŠ‚ç‚¹ä¹‹é—´é“¾è·¯è´¹ç”¨å‡å°‘çš„â€œå¥½æ¶ˆæ¯â€åœ¨ç½‘ç»œä¸­èƒ½è¿…é€Ÿä¼ æ’­,å³ good news travels fast æŸé“¾è·¯è´¹ç”¨å¢åŠ æ—¶æƒ…å†µå‡è®¾ x ä¸ y ä¹‹é—´çš„é“¾è·¯è´¹ç”¨ä» 4 å¢åŠ åˆ° 60é“¾è·¯è´¹ç”¨å˜åŒ–å‰$D_y(x)=4 ï¼ŒD_y(z)=1ï¼Œ D_z(y)=1ï¼ŒD_z(x)=5$ t0 ï¼šy æ£€æµ‹åˆ°é“¾è·¯è´¹ç”¨ä» 4 å˜ä¸º 60ã€‚æ›´æ–°åˆ° x çš„æœ€ä½è·¯å¾„è´¹ç”¨$D_y(x)=min{c(y,x)+ D_x(x), c(y,z)+ D_z(x)}=min{60+0,1+5}=6$æ­¤æ—¶ $D_y(x)=6 ï¼ŒD_y(z)=1ï¼Œ D_z(y)=1ï¼ŒD_z(x)=5$ç»èŠ‚ç‚¹ z åˆ° x è´¹ç”¨æœ€ä½ï¼Œæ­¤æ–°è´¹ç”¨é”™è¯¯ï¼Œå‘ç»™èŠ‚ç‚¹ zã€‚ t1 ï¼šz æ”¶åˆ°æ–°è´¹ç”¨ï¼Œæ›´æ–°å…¶åˆ° x çš„æœ€ä½è·¯å¾„è´¹ç”¨$D_z(x )=min{ c(z,x)+ D_x(x), c(z,y)+ D_y(x)}=min{50+0,1+6}=7$æ­¤æ—¶ $D_y(x)=6 ï¼ŒD_y(z)=1ï¼Œ D_z(y)=1ï¼ŒD_z(x)=7$ç»èŠ‚ç‚¹ y åˆ° x è´¹ç”¨æœ€ä½ï¼Œå‘ç»™èŠ‚ç‚¹ yã€‚ t2ï¼šy æ”¶åˆ°æ–°è´¹ç”¨ï¼Œæ›´æ–°åˆ° x çš„æœ€ä½è·¯å¾„è´¹ç”¨$D_y(x )=min{c(y,x)+ D_x(x), c(y,z)+ D_z(x)}=min{60+0,1+7}=8$ç»èŠ‚ç‚¹ z åˆ° x è´¹ç”¨æœ€ä½ï¼Œå‘ç»™èŠ‚ç‚¹ zã€‚â€¦â€¦èŠ‚ç‚¹ y æˆ– z çš„æœ€ä½è´¹ç”¨ä¸æ–­æ›´æ–°ã€‚äº§ç”Ÿé€‰è·¯å›ç¯(routing loop)ï¼šä¸ºåˆ°è¾¾ xï¼Œ y é€šè¿‡ z é€‰è·¯ï¼Œz åˆé€šè¿‡ y é€‰è·¯ã€‚å³ç›®çš„åœ°ä¸º x çš„åˆ†ç»„åˆ°è¾¾ y æˆ– z åï¼Œå°†åœ¨è¿™ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´ä¸åœåœ°æ¥å›åå¤ï¼Œç›´åˆ°è½¬å‘è¡¨å‘ç”Ÿæ”¹å˜ä¸ºæ­¢ã€‚ä¸Šè¿°å¾ªç¯å°†æŒç»­ 44 æ¬¡è¿­ä»£ (y ä¸ z ä¹‹é—´çš„æŠ¥æ–‡äº¤æ¢)ï¼Œç›´åˆ° z æœ€ç»ˆç®—å‡ºå®ƒç»ç”± y çš„è·¯å¾„è´¹ç”¨å¤§äº 50 ä¸ºæ­¢ã€‚å¹¶ç¡®å®šï¼šz åˆ° x çš„æœ€ä½è´¹ç”¨è·¯å¾„ï¼šzxy åˆ° x çš„æœ€ä½è´¹ç”¨è·¯å¾„ï¼šyzxè¯´æ˜ï¼šé“¾è·¯è´¹ç”¨å¢åŠ çš„â€œåæ¶ˆæ¯â€ä¼ æ’­å¾ˆæ…¢,å³ bad news travels slowå½“é“¾è·¯è´¹ç”¨å¢åŠ å¾ˆå¤§ï¼Œä¼šå‡ºç°æ— ç©·è®¡æ•°(count-to-infinity)é—®é¢˜ã€‚å¦‚é“¾è·¯è´¹ç”¨ c(yï¼Œx)å˜ä¸º 10000ï¼Œc(zï¼Œx)å˜ä¸º 9999 æ—¶ã€‚ Distance-Vector Algorithm: Adding Poisoned Reverseé’ˆå¯¹ä¸Šé¢çš„é—®é¢˜ï¼Œå¼•å‡ºæ¯’æ€§é€†è½¬ï¼ˆpoisoned reverseï¼‰æ€æƒ³ï¼šå¦‚æœ z é€šè¿‡ y è·¯ç”±é€‰æ‹©ç›®çš„åœ° xï¼Œåˆ™ z å°†é€šå‘Š yï¼Œå®ƒåˆ° x çš„è·ç¦»æ˜¯æ— ç©·å¤§ï¼Œä¹Ÿå°±æ˜¯ z å°†é€šå‘Š$D_z(x)=\\infin$ã€‚æ¯’æ€§é€†è½¬å¯ä»¥å®Œå…¨è§£å†³è®¡æ•°åˆ°æ— ç©·çš„é—®é¢˜å—ï¼Ÿä¸èƒ½ï¼Œå¦‚æœä¸‰ä¸ªä»¥ä¸ŠèŠ‚ç‚¹çš„ç¯è·¯ï¼Œåˆ™ä¸èƒ½è¢«æ¯’æ€§é€†è½¬æŠ€æœ¯æ£€æµ‹ A Comparison of LS and DV Routing Algorithmsæ¶ˆæ¯å¤æ‚åº¦LS ç®—æ³•ï¼šçŸ¥é“ç½‘ç»œæ¯æ¡é“¾è·¯çš„è´¹ç”¨ï¼Œéœ€å‘é€ $O(nE)$ä¸ªæŠ¥æ–‡ï¼›å½“ä¸€æ¡é“¾è·¯çš„è´¹ç”¨å˜åŒ–æ—¶ï¼Œå¿…é¡»é€šçŸ¥æ‰€æœ‰èŠ‚ç‚¹DV ç®—æ³•ï¼šè¿­ä»£æ—¶ï¼Œä»…åœ¨ä¸¤ä¸ªç›´æ¥ç›¸è¿é‚»å±…ä¹‹é—´äº¤æ¢æŠ¥æ–‡ï¼›å½“é“¾è·¯è´¹ç”¨æ”¹å˜æ—¶ï¼Œåªæœ‰è¯¥é“¾è·¯ç›¸è¿çš„èŠ‚ç‚¹çš„æœ€ä½è´¹ç”¨è·¯å¾„å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰ä¼ æ’­å·²æ”¹å˜çš„é“¾è·¯è´¹ç”¨æ”¶æ•›é€Ÿåº¦LS ç®—æ³•ï¼šéœ€è¦ $O(nE)$ä¸ªæŠ¥æ–‡å’Œ $O(n^2)$çš„æœå¯»ï¼Œå¯èƒ½ä¼šæŒ¯è¡DV ç®—æ³•ï¼šæ”¶æ•›è¾ƒæ…¢ã€‚å¯èƒ½ä¼šé‡åˆ°é€‰è·¯å›ç¯ï¼Œæˆ–è®¡æ•°åˆ°æ— ç©·çš„é—®é¢˜ã€‚å¥å£®æ€§å½“ä¸€å°è·¯ç”±å™¨å‘ç”Ÿæ•…éšœã€æ“ä½œé”™è¯¯æˆ–å—åˆ°ç ´åæ—¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µ?LS ç®—æ³•ï¼šè·¯ç”±å™¨å‘å…¶è¿æ¥çš„ä¸€æ¡é“¾è·¯å¹¿æ’­ä¸æ­£ç¡®è´¹ç”¨ï¼Œè·¯ç”±è®¡ç®—åŸºæœ¬ç‹¬ç«‹ï¼ˆä»…è®¡ç®—è‡ªå·±çš„è½¬å‘è¡¨ï¼‰ï¼Œæœ‰ä¸€å®šå¥å£®æ€§ã€‚DV ç®—æ³•ï¼šä¸€ä¸ªèŠ‚ç‚¹å¯å‘ä»»æ„æˆ–æ‰€æœ‰ç›®çš„èŠ‚ç‚¹å‘å¸ƒå…¶ä¸æ­£ç¡®çš„æœ€ä½è´¹ç”¨è·¯å¾„ï¼Œä¸€ä¸ªèŠ‚ç‚¹çš„è®¡ç®—å€¼ä¼šä¼ é€’ç»™å®ƒçš„é‚»å±…ï¼Œå¹¶é—´æ¥åœ°ä¼ é€’ç»™é‚»å±…çš„é‚»å±…ã€‚ä¸€ä¸ªä¸æ­£ç¡®çš„è®¡ç®—å€¼ä¼šæ‰©æ•£åˆ°æ•´ä¸ªç½‘ç»œã€‚ Intra-AS Routing in the Internet: OSPFè¿„ä»Šä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„è·¯ç”±ç ”ç©¶éƒ½æ˜¯ç†æƒ³åŒ–çš„ï¼š æ‰€æœ‰è·¯ç”±å™¨ä¸€æ ·çš„ ç½‘ç»œæ˜¯ â€œå¹³é¢çš„â€ å®é™…ä¸­å¹¶ä¸æ˜¯è¿™æ ·çš„ã€‚äº’è”ç½‘åœ¨è§„æ¨¡ä¸Šå…·æœ‰ 20 äº¿ä¸ªèŠ‚ç‚¹ï¼Œè·¯ç”±è¡¨ä¸­ä¸å¯èƒ½å­˜å‚¨æ‰€æœ‰çš„èŠ‚ç‚¹è€Œè·¯ç”±è¡¨çš„ä¿¡æ¯äº¤æ¢ä¹Ÿå°†æ·¹æ²¡æ•°æ®é“¾è·¯ éšç€è·¯ç”±å™¨è§„æ¨¡å¢å¤§å’Œç®¡ç†è‡ªæ²»çš„è¦æ±‚ï¼Œå¯ä»¥é€šè¿‡å°†è·¯ç”±å™¨ç»„ç»‡è¿›è‡ªæ²»ç³»ç»Ÿï¼ˆAutonomous Systemï¼ŒASï¼‰æ¥è§£å†³ã€‚åœ¨ä¸€ä¸ªè‡ªæ²»ç³»ç»Ÿå†…è¿è¡Œçš„è·¯ç”±ç®—æ³•å«åšè‡ªæ²»ç³»ç»Ÿå†…éƒ¨è·¯ç”±é€‰æ‹©åè®®ï¼ˆintra-autonomous system routing protocolï¼‰ï¼Œä¸åŒè‡ªæ²»ç³»ç»Ÿå†…çš„è·¯ç”±å™¨å¯ä»¥è¿è¡Œä¸åŒçš„åŒºåŸŸå†…è·¯ç”±åè®®","link":"/UESTC/ComputerNetworking/Ch4-2NetworkLayer/"},{"title":"è¿è¾“å±‚ TransportLayer Part â… ","text":"Introduction and Transport-Layer ServicesRelationship Between Transport and Network Layersè¿è¾“å±‚åè®®ä¸ºè¿è¡Œåœ¨ä¸åŒçš„ä¸»æœºä¸Šçš„åº”ç”¨è¿›ç¨‹ä¹‹é—´æä¾›äº†é€»è¾‘é€šä¿¡ï¼ˆlogic communicationï¼‰åŠŸèƒ½ä¼ è¾“å±‚åè®®è¿è¡Œåœ¨ç«¯ç³»ç»Ÿè€Œéè·¯ç”±å™¨ å‘é€æ–¹: å°†ä»å‘é€åº”ç”¨ç¨‹åºæ¥æ”¶åˆ°çš„æŠ¥æ–‡è½¬æ¢æˆä¼ è¾“å±‚åˆ†ç»„(segment)ä¼ é€’ç»™ç½‘ç»œå±‚ æ¥å—æ–¹: å°†æ•°æ®æ®µé‡æ–°ç»„è£…æˆæŠ¥æ–‡ä¼ é€’åˆ°åº”ç”¨å±‚ ä¼ è¾“å±‚: è¿›ç¨‹ä¹‹é—´çš„é€»è¾‘é€šä¿¡;ä¼ è¾“å±‚å»ºç«‹åœ¨ç½‘ç»œå±‚ä¹‹ä¸Šï¼Œè´Ÿè´£ç«¯åˆ°ç«¯çš„é€šä¿¡ä¼šè¯å’Œæ•°æ®çš„å¯é ä¼ è¾“ã€‚ä¼ è¾“å±‚ä½¿ç”¨ç«¯å£å·æ¥åŒºåˆ†ä¸»æœºä¸Šçš„ä¸åŒåº”ç”¨ç¨‹åºï¼Œå¹¶ç¡®ä¿æ•°æ®è¢«æ­£ç¡®åœ°å‘é€åˆ°æ¥æ”¶åº”ç”¨ç¨‹åºã€‚ç½‘ç»œå±‚: ä¸»æœºä¹‹é—´çš„é€»è¾‘é€šä¿¡; ç½‘ç»œå±‚è´Ÿè´£å¤„ç†æ•°æ®åŒ…çš„å‘é€å’Œè·¯ç”±ï¼ŒåŒ…æ‹¬ IP åœ°å€å¤„ç†å’Œè·¯ç”±é€‰æ‹©ã€‚ç½‘ç»œå±‚çš„ä¸»è¦ç›®æ ‡æ˜¯ç¡®å®šå¦‚ä½•å°†æ•°æ®ä»æºä¸»æœºä¼ è¾“åˆ°ç›®æ ‡ä¸»æœºï¼Œå³ä½¿è¿™ä¸¤å°ä¸»æœºåœ¨ç‰©ç†ä¸Šå¯èƒ½ç›¸éš”å¾ˆè¿œï¼Œå¹¶ä¸”åœ¨å®ƒä»¬ä¹‹é—´å¯èƒ½å­˜åœ¨å¤šä¸ªä¸­é—´èŠ‚ç‚¹ï¼ˆè·¯ç”±å™¨ï¼‰ã€‚ç½‘ç»œå±‚çš„ä¸€ä¸ªå…³é”®åè®®æ˜¯äº’è”ç½‘åè®®ï¼ˆIPï¼‰ï¼Œå®ƒå®šä¹‰äº†æ•°æ®åŒ…çš„æ ¼å¼å’Œåœ°å€ã€‚ Overview of the Transport Layer in the InternetInternet çš„ä¼ è¾“å±‚åè®®æœ‰ä¸¤ä¸ª:ä¼ è¾“æ§åˆ¶åè®® TCP,Transmission COntrol Protocol: æä¾›äº†ä¸€ç§å¯é çš„ã€é¢å‘è¿æ¥çš„æœåŠ¡ã€‚ç”¨æˆ·æ•°æ®æŠ¥åè®® UDP,User Datagram Protocol:æä¾›ä¸å¯é ã€æ— è¿æ¥çš„æœåŠ¡ ç½‘ç»œå±‚çš„ IP åè®®(Internet Protocol)æä¾›äº†ä¸€ç§ä¸å¯é çš„ã€æ— è¿æ¥çš„æœåŠ¡;IP çš„æœåŠ¡æ¨¡å‹æ˜¯å°½åŠ›è€Œä¸ºäº¤ä»˜æœåŠ¡ï¼ˆbest-effort delivery serviceï¼‰ UDP å’Œ TCP æœ€åŸºæœ¬çš„è´£ä»»æ˜¯ï¼Œå°†ä¸¤ä¸ªç«¯ç³»ç»Ÿé—´ IP çš„äº¤ä»˜æœåŠ¡æ‰©å±•ä¸ºè¿è¡Œåœ¨ç«¯ç³»ç»Ÿä¸Šçš„ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´çš„äº¤ä»˜æœåŠ¡ã€‚å°†ä¸»æœºé—´äº¤ä»˜æ‰©å±•åˆ°è¿›ç¨‹é—´äº¤ä»˜è¢«ç§°ä¸ºè¿è¾“å±‚çš„å¤šè·¯å¤ç”¨ï¼ˆtransport-layer multiplexingï¼‰ä¸å¤šè·¯åˆ†è§£ï¼ˆdemultiplexingï¼‰ã€‚ Multiplexing and Demultiplexing è¿è¾“å±‚çš„å¤šè·¯å¤ç”¨ä¸å¤šè·¯åˆ†è§£ï¼Œä¹Ÿå°±æ˜¯å°†ç”±ç½‘ç»œå±‚æä¾›çš„ä¸»æœºåˆ°ä¸»æœºçš„äº¤ä»˜æœåŠ¡å»¶ä¼¸åˆ°ä¸ºè¿è¡Œåœ¨ä¸»æœºä¸Šçš„åº”ç”¨ç¨‹åºæä¾›è¿›ç¨‹åˆ°è¿›ç¨‹çš„æœåŠ¡ã€‚ä¸€ä¸ªè¿›ç¨‹ï¼ˆä½œä¸ºç½‘ç»œåº”ç”¨çš„ä¸€éƒ¨åˆ†ï¼‰æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå¥—æ¥å­—ï¼ˆsocketï¼‰ï¼Œå®ƒç›¸å½“äºä»ç½‘ç»œå‘è¿›ç¨‹ä¼ é€’æ•°æ®å’Œä»è¿›ç¨‹å‘ç½‘ç»œä¼ é€’æ•°æ®çš„é—¨æˆ·ã€‚ä¸‹å›¾ä¸ºè¿›ç¨‹äº¤ä»˜è¿‡ç¨‹ï¼š å¤šè·¯å¤ç”¨ï¼ˆMultiplexingï¼‰ï¼šåœ¨æºä¸»æœºä»ä¸åŒå¥—æ¥å­—ä¸­æ”¶é›†æ•°æ®å—ï¼Œå¹¶ä¸ºæ¯ä¸ªæ•°æ®å—å°è£…ä¸Šé¦–éƒ¨ä¿¡æ¯ï¼ˆè¿™å°†åœ¨ä»¥åç”¨äºåˆ†è§£ï¼‰ä»è€Œç”ŸæˆæŠ¥æ–‡æ®µï¼Œç„¶åå°†æŠ¥æ–‡ä¼ é€’åˆ°ç½‘ç»œå±‚ï¼› å¤šè·¯åˆ†è§£ï¼ˆDemultiplexingï¼‰ï¼šå®ƒæ˜¯å¤šè·¯å¤ç”¨çš„é€†è¿‡ç¨‹;åœ¨æ¥æ”¶ç«¯ï¼Œè¿è¾“å±‚æ£€æŸ¥è¿™äº›å­—æ®µï¼Œæ ‡è¯†å‡ºæ¥æ”¶å¥—æ¥å­—ï¼Œè¿›è€Œå°†æŠ¥æ–‡æ®µå®šå‘åˆ°è¯¥å¥—æ¥å­—ï¼Œå³å°†è¿è¾“å±‚æŠ¥æ–‡æ®µçš„æ•°æ®äº¤ä»˜åˆ°æ­£ç¡®çš„å¥—æ¥å­—çš„å·¥ä½œï¼› ä¸»æœºæ”¶åˆ° IP æ•°æ®æŠ¥(IP Datagram),æ¯ä¸ª IP æ•°æ®æŠ¥ä¸­æœ‰æº IP åœ°å€å’Œç›®çš„ IP åœ°å€,æ¯ä¸ªæ•°æ®æŠ¥æ¬è¿ä¸€ä¸ªæ•°æ®æ®µ,æ•°æ®æ®µä¸­æœ‰æºç«¯å£å·å’Œç›®çš„ç«¯å£å·,è¿™æ ·å°±å¯ä»¥å°†æ•°æ®æ®µäº¤ä»˜ç»™æ­£ç¡®çš„ Socketã€‚ è¿è¾“å±‚å¤šè·¯å¤ç”¨è¦æ±‚: å¥—æ¥å­—ç”±å”¯ä¸€æ ‡è¯†ç¬¦ï¼› æ¯ä¸ªæŠ¥æ–‡æ®µé€šè¿‡æºç«¯å£å·å­—æ®µï¼ˆsource port number fieldï¼‰å’Œç›®çš„ç«¯å£å·å­—æ®µï¼ˆdestination port number fieldï¼‰æ¥æŒ‡ç¤ºè¯¥æŠ¥æ–‡æ®µæ‰€è¦äº¤ä»˜çš„å¥—æ¥å­—ï¼› ç«¯å£å·æ˜¯ä¸€ä¸ª 16 æ¯”ç‰¹çš„æ•°ï¼Œå…¶å¤§å°åœ¨ 0~65535ä¹‹é—´ã€‚0~1023èŒƒå›´çš„ç«¯å£å·ç§°ä¸ºå‘¨çŸ¥ç«¯å£å·ï¼ˆwell-know port numberï¼‰ï¼Œæ˜¯å—é™åˆ¶çš„ã€‚ UDP çš„ Socket è¡¨ç¤º(source portï¼Œ dest port) TCP çš„ Socket è¡¨ç¤º(source IPï¼Œ source portï¼Œ dest IPï¼Œ dest port) Connectionless Transport: UDPUDP Segment Structureä½¿ç”¨ UDP æ—¶ï¼Œåœ¨å‘é€æŠ¥æ–‡æ®µä¹‹å‰ï¼Œå‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„è¿é€å±‚å®ä½“ä¹‹é—´æ²¡æœ‰æ¡æ‰‹ï¼ŒUDP è¢«ç§°ä¸ºæ— è¿æ¥çš„ connectionless;UDP åªåœ¨ IP çš„æ•°æ®æŠ¥æœåŠ¡ä¹‹ä¸Šå¢åŠ äº†å¾ˆå°‘ä¸€ç‚¹çš„åŠŸèƒ½ï¼Œå³ç«¯å£çš„åŠŸèƒ½å’Œå·®é”™æ£€æµ‹çš„åŠŸèƒ½ã€‚ æ˜¯æ— è¿æ¥çš„ï¼Œå³å‘é€æ•°æ®ä¹‹å‰ä¸éœ€è¦å»ºç«‹è¿æ¥(no connection establishment) ç®€å•: åœ¨å‘é€è€…æ¥å—è€…ä¹‹é—´ä¸éœ€è¦è¿æ¥çŠ¶æ€(no connection state) æ²¡æœ‰æ‹¥å¡æ§åˆ¶ï¼Œå¾ˆé€‚åˆå¤šåª’ä½“é€šä¿¡çš„è¦æ±‚,UDP èƒ½å¤Ÿç”¨å°½å¯èƒ½å¿«çš„é€Ÿåº¦ä¼ é€’(no congestion control) UDP çš„é¦–éƒ¨å¼€é”€å°ï¼Œåªæœ‰ 8 ä¸ªå­—èŠ‚(small header size) æ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€å’Œå¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡ UDP æ˜¯é¢å‘æŠ¥æ–‡çš„ã€‚å‘é€æ–¹ UDP å¯¹åº”ç”¨ç¨‹åºäº¤ä¸‹æ¥çš„æŠ¥æ–‡ï¼Œåœ¨æ·»åŠ é¦–éƒ¨åå°±å‘ä¸‹äº¤ä»˜ IP å±‚ã€‚UDP å¯¹åº”ç”¨å±‚äº¤ä¸‹æ¥çš„æŠ¥æ–‡ï¼Œæ—¢ä¸åˆå¹¶ï¼Œä¹Ÿä¸æ‹†åˆ†ï¼Œè€Œæ˜¯ä¿ç•™è¿™äº›æŠ¥æ–‡çš„è¾¹ç•Œã€‚åº”ç”¨å±‚äº¤ç»™ UDP å¤šé•¿çš„æŠ¥æ–‡ï¼ŒUDP å°±ç…§æ ·å‘é€ï¼Œå³ä¸€æ¬¡å‘é€ä¸€ä¸ªæŠ¥æ–‡ã€‚æ¥æ”¶æ–¹ UDP å¯¹ IP å±‚äº¤ä¸Šæ¥çš„ UDP ç”¨æˆ·æ•°æ®æŠ¥ï¼Œåœ¨å»é™¤é¦–éƒ¨åå°±åŸå°ä¸åŠ¨åœ°äº¤ä»˜ä¸Šå±‚çš„åº”ç”¨è¿›ç¨‹ï¼Œä¸€æ¬¡äº¤ä»˜ä¸€ä¸ªå®Œæ•´çš„æŠ¥æ–‡ã€‚åº”ç”¨ç¨‹åºå¿…é¡»é€‰æ‹©åˆé€‚å¤§å°çš„æŠ¥æ–‡ã€‚è™½ç„¶ UDP ç”¨æˆ·æ•°æ®æŠ¥åªèƒ½æä¾›ä¸å¯é çš„äº¤ä»˜ï¼Œä½† UDP åœ¨æŸäº›æ–¹é¢æœ‰å…¶ç‰¹æ®Šçš„ä¼˜ç‚¹ã€‚ UDP é¦–éƒ¨æœ‰ 8 ä¸ªå­—èŠ‚ï¼Œç”± 4 ä¸ªå­—æ®µæ„æˆï¼Œæ¯ä¸ªå­—æ®µéƒ½æ˜¯ä¸¤ä¸ªå­—èŠ‚ï¼š 1.æºç«¯å£ï¼š æºç«¯å£å·ï¼Œéœ€è¦å¯¹æ–¹å›ä¿¡æ—¶é€‰ç”¨ï¼Œä¸éœ€è¦æ—¶å…¨éƒ¨ç½® 0. 2.ç›®çš„ç«¯å£ï¼šç›®çš„ç«¯å£å·ï¼Œåœ¨ç»ˆç‚¹äº¤ä»˜æŠ¥æ–‡çš„æ—¶å€™éœ€è¦ç”¨åˆ°ã€‚ 3.é•¿åº¦ï¼šUDP çš„æ•°æ®æŠ¥çš„é•¿åº¦ï¼ˆåŒ…æ‹¬é¦–éƒ¨å’Œæ•°æ®ï¼‰å…¶æœ€å°å€¼ä¸º 8ï¼ˆåªæœ‰é¦–éƒ¨ï¼‰ 4.æ ¡éªŒå’Œï¼šæ£€æµ‹ UDP æ•°æ®æŠ¥åœ¨ä¼ è¾“ä¸­æ˜¯å¦æœ‰é”™ï¼Œæœ‰é”™åˆ™ä¸¢å¼ƒ,è¯¥å­—æ®µæ˜¯å¯é€‰çš„ï¼Œå½“æºä¸»æœºä¸æƒ³è®¡ç®—æ ¡éªŒå’Œï¼Œåˆ™ç›´æ¥ä»¤è¯¥å­—æ®µå…¨ä¸º 0.å½“ä¼ è¾“å±‚ä» IP å±‚æ”¶åˆ° UDP æ•°æ®æŠ¥æ—¶ï¼Œå°±æ ¹æ®é¦–éƒ¨ä¸­çš„ç›®çš„ç«¯å£ï¼ŒæŠŠ UDP æ•°æ®æŠ¥é€šè¿‡ç›¸åº”çš„ç«¯å£ï¼Œä¸Šäº¤ç»™åº”ç”¨è¿›ç¨‹ã€‚å¦‚æœæ¥æ”¶æ–¹ UDP å‘ç°æ”¶åˆ°çš„æŠ¥æ–‡ä¸­çš„ç›®çš„ç«¯å£å·ä¸æ­£ç¡®ï¼ˆä¸å­˜åœ¨å¯¹åº”ç«¯å£å·çš„åº”ç”¨è¿›ç¨‹ï¼‰ï¼Œå°±ä¸¢å¼ƒè¯¥æŠ¥æ–‡ï¼Œå¹¶ç”± ICMP å‘é€â€œç«¯å£ä¸å¯è¾¾â€å·®é”™æŠ¥æ–‡ç»™å¯¹æ–¹ã€‚ ä¼ªé¦–éƒ¨ä¸­ 17 æ˜¯åè®®ä»£å·ï¼Œè¡¨ç¤º UDPä¼ªé¦–éƒ¨çš„ä½œç”¨ç¬¬ä¸€ï¼Œé€šè¿‡ä¼ªé¦–éƒ¨çš„ IP åœ°å€æ£€éªŒï¼ŒUDP å¯ä»¥ç¡®è®¤è¯¥æ•°æ®æŠ¥æ˜¯ä¸æ˜¯å‘é€ç»™æœ¬æœº IP åœ°å€çš„ï¼›ç¬¬äºŒï¼Œé€šè¿‡ä¼ªé¦–éƒ¨çš„åè®®å­—æ®µæ£€éªŒï¼ŒUDP å¯ä»¥ç¡®è®¤ IP æœ‰æ²¡æœ‰æŠŠä¸åº”è¯¥ä¼ ç»™ UDP è€Œåº”è¯¥ä¼ ç»™åˆ«çš„é«˜å±‚çš„æ•°æ®æŠ¥ä¼ ç»™äº† UDPã€‚ ä¼ªé¦–éƒ¨åŒ…æ‹¬äº† IPv4 å¤´éƒ¨ä¸­çš„ä¸€äº›ä¿¡æ¯ï¼Œä½†å®ƒå¹¶ä¸æ˜¯å‘é€ IP æ•°æ®åŒ…æ—¶ä½¿ç”¨çš„ IP æ•°æ®åŒ…çš„å¤´éƒ¨ã€‚æ¥æ”¶ä¸»æœºåœ¨æ”¶åˆ° UDP æŠ¥æ–‡ä»¥åï¼Œä» IP é¦–éƒ¨è·æ‚‰ IP åœ°å€ä¿¡æ¯æ„é€  UDP ä¼ªé¦–éƒ¨ã€‚åœ¨è¿›è¡Œæ ¡éªŒå’Œè®¡ç®—ã€‚è¯†åˆ«ä¸€ä¸ªé€šä¿¡åº”ç”¨éœ€è¦ 5 ä¸ªå› ç´ ã€‚â€æº IP åœ°å€â€ã€â€ç›®æ ‡ IP åœ°å€â€ã€â€æºç«¯å£â€ã€â€ç›®æ ‡ç«¯å£â€ã€â€åè®®å·â€ã€‚UDP é¦–éƒ¨åªåŒ…å«äº†ï¼ˆæºç«¯å£å’Œç›®æ ‡ç«¯å£ï¼‰ï¼Œç”¨æ­¤æ¥æ ¡éªŒï¼Œå¦‚æœå…¶ä»–ä¸‰é¡¹ä¿¡æ¯è¢«ç ´åï¼Œææœ‰å¯èƒ½å¯¼è‡´åº”æ”¶åŒ…åº”ç”¨æ”¶ä¸åˆ°ï¼Œä¸åº”è¯¥æ”¶åŒ…çš„åº”ç”¨æ”¶åˆ°ã€‚ä¸ºæ­¤ï¼Œæœ‰å¿…è¦åœ¨é€šä¿¡ä¸­ï¼ŒéªŒè¯è¿™ 5 é¡¹çš„è¯†åˆ«ç æ˜¯å¦æ­£ç¡®ï¼Œå°±å¼•å…¥äº†ä¼ªé¦–éƒ¨çš„æ¦‚å¿µã€‚ UDP ChecksumUDP/IP ç¡¬ä»¶åè®®æ ˆè®¾è®¡ï¼ˆä¸‰ï¼‰ï¼šæ ¡éªŒ Sender:å°†æ•°æ®æ®µçœ‹æˆ 16bit çš„æ•´æ•°åºåˆ—æ ¡éªŒå’Œ: æ•°æ®æ®µå†…å®¹ç›¸åŠ  (1 çš„è¡¥ç å’Œï¼Œå³åç )å‘é€è€…å°†æ ¡éªŒå’Œå€¼æ”¾å…¥ UDP çš„æ ¡éªŒå’ŒåŸŸReceiverè®¡ç®—æ¥æ”¶åˆ°æ•°æ®æ®µçš„æ ¡éªŒå’Œæ£€æŸ¥ è®¡ç®—çš„æ ¡éªŒå’Œæ˜¯å¦ç­‰äºæ ¡éªŒå’ŒåŸŸä¸­çš„å€¼:NO â€“ æ£€æµ‹åˆ°é”™è¯¯YES â€“ æ²¡æœ‰æ£€æµ‹åˆ°é”™è¯¯,ä½†æ˜¯å¯èƒ½æ˜¯é”™è¯¯çš„ Principles of Reliable Data Transfer[Ch3-1DataLinkLayer#å¯é ä¼ è¾“ Reliable Transmission] å¯é æ•°æ®ä¼ è¾“çš„æ¡†æ¶ï¼šä¸ºä¸Šå±‚å®ä½“æä¾›çš„æœåŠ¡æŠ½è±¡æ˜¯ï¼šæ•°æ®å¯ä»¥é€šè¿‡ä¸€æ¡å¯é çš„ä¿¡é“è¿›è¡Œä¼ è¾“ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š rdt: reliable data transfer Building a Reliable Data Transfer ProtocolReliable Data Transfer over a Perfectly Reliable Channel: rdt1.0å‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„è¡¨ç¤ºä½¿ç”¨æœ‰é™çŠ¶æ€æœºï¼ˆFinite-State Machineï¼ŒFSMï¼‰å®šä¹‰ï¼Œå¦‚æœå¯¹ä¸€ä¸ªäº‹ä»¶æ²¡æœ‰åŠ¨ä½œï¼Œæˆ‘ä»¬å°†åœ¨æ¨ªçº¿ä¸Šæ–¹æˆ–ä¸‹æ–¹ä½¿ç”¨ç¬¦å·$\\Lambda$ï¼Œä»¥è¡¨ç¤ºå‘ç”Ÿè¿™ä¸ªäº‹ä»¶åä¸è¿›è¡Œå¤„ç†ã€‚æˆ‘ä»¬è€ƒè™‘æœ€ç®€å•çš„æƒ…å†µï¼Œå³åº•å±‚ä¿¡é“æ˜¯å®Œå…¨å¯é çš„ï¼Œæˆ‘ä»¬ç§°è¯¥åè®®ä¸º rdt1.0ï¼Œå‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„ FSM å®šä¹‰å¦‚ä¸‹ï¼š Reliable Data Transfer over a Channel with Bit Errors: rdt2.0 ä¸‹å±‚ä¿¡é“å¯èƒ½è®©ä¼ è¾“åˆ†ç»„ä¸­çš„ bit å—æŸ æ ¡éªŒå’Œå°†æ£€æµ‹åˆ° bit é”™è¯¯ é—®é¢˜: å¦‚ä½•ä»é”™è¯¯ä¸­æ¢å¤ ç¡®è®¤(ACKs): æ¥æ”¶æ–¹æ˜ç¡®å‘Šè¯‰å‘é€æ–¹ åˆ†ç»„æ¥æ”¶æ­£ç¡® å¦è®¤ (NAKs):æ¥æ”¶æ–¹æ˜ç¡®å‘Šè¯‰å‘é€æ–¹ åˆ†ç»„æ¥æ”¶å‡ºé”™ å‘é€æ–¹æ”¶åˆ° NAK åé‡å‘è¿™ä¸ªåˆ†ç»„ åœ¨ rdt2.0 ä¸­çš„æ–°æœºåˆ¶ (åœ¨ rdt1.0 ä¸­æ²¡æœ‰çš„): å·®é”™æ£€æµ‹ æ¥æ”¶æ–¹åé¦ˆ: æ§åˆ¶ä¿¡æ¯ (ACK,NAK) rcvr-&gt;sender å®é™…ä¸Šçš„åº•å±‚ä¿¡é“æ˜¯å¯èƒ½å‡ºç°æ¯”ç‰¹å—æŸçš„ï¼›åœ¨åˆ†ç»„ä¼ è¾“ã€ä¼ æ’­æˆ–ç¼“å­˜çš„è¿‡ç¨‹ä¸­ï¼Œè¿™ç§æ¯”ç‰¹å·®é”™é€šå¸¸ä¼šå‡ºç°åœ¨ç½‘ç»œçš„ç‰©ç†éƒ¨ä»¶ä¸­ã€‚åœ¨æ¥æ”¶æ–¹å¾—åˆ°æ¯”ç‰¹å·®é”™çš„ä¿¡æ¯æ—¶ï¼Œéœ€è¦å‘é€æ–¹è¿›è¡Œé‡ä¼ ã€‚åœ¨è®¡ç®—æœºç½‘ç»œç¯å¢ƒä¸­ï¼ŒåŸºäºè¿™ç§é‡ä¼ æœºåˆ¶çš„å¯é æ•°æ®ä¼ è¾“åè®®ç§°ä¸ºè‡ªåŠ¨é‡ä¼ è¯·æ±‚ï¼ˆAutomatic Repeat reQuestï¼ŒARQï¼‰åè®®ã€‚ARQ åè®®ä¸­è¿˜éœ€è¦å¦å¤–ä¸‰ç§åè®®æ¥å¤„ç†å­˜åœ¨æ¯”ç‰¹å·®é”™çš„æƒ…å†µï¼š Error Detectionï¼šå‘é€æ–¹åŒæ—¶å‘é€æ£€æµ‹å’Œï¼ˆchecksumï¼‰åˆ°æ¥æ”¶ç«¯åˆ¤æ–­æ˜¯å¦å‡ºç°æ¯”ç‰¹å·®é”™ï¼› Receiver feedbackï¼š è‚¯å®šç¡®è®¤ï¼ˆACKnowledgementï¼ŒACKï¼‰ï¼šæ¥æ”¶æ–¹å‘Šè¯‰å‘é€æ–¹åŒ…æ•°æ®æ— å·®é”™ï¼› å¦å®šç¡®è®¤ï¼ˆNegative AcKnowledgementï¼ŒNAKï¼‰ï¼šæ¥æ”¶æ–¹å‘Šè¯‰å‘é€æ–¹åŒ…æ•°æ®æœ‰é”™è¯¯ï¼› Retransmissionï¼šæ¥æ”¶æ–¹æ”¶åˆ°æœ‰å·®é”™çš„åˆ†ç»„æ—¶ï¼Œå‘é€æ–¹å°†é‡ä¼ è¯¥åˆ†ç»„æ–‡ï¼› rdt2.0 ä¸­ï¼Œå½“å‘é€æ–¹ä¸ºWait for ACK or NAKçŠ¶æ€æ—¶ï¼Œå®ƒä¸èƒ½å†æ¥æ”¶ä¸Šå±‚ä¼ æ¥çš„æ•°æ®ï¼Œå³rdt_send()äº‹ä»¶ä¸èƒ½å†å‡ºç°ï¼›ç›´åˆ°æ¥æ”¶åˆ° ACK å¹¶ç¦»å¼€è¯¥çŠ¶æ€ï¼Œæ‰èƒ½å†æ¬¡æ¥æ”¶ä¸Šå±‚ä¼ æ¥çš„æ•°æ®ã€‚å› æ­¤ï¼Œrdt2.0 ä¹Ÿè¢«ç§°ä¸ºåœç­‰åè®®ï¼ˆstop-and-wait protocolï¼‰ã€‚ rdt2.0åè®®å­˜åœ¨è‡´å‘½çš„ç¼ºé™·ï¼Œå®ƒå¹¶æ²¡æœ‰è€ƒè™‘ ACK å’Œ NAK å—æŸçš„æƒ…å†µ,ä¸€ä¸ªå›°éš¾çš„é—®é¢˜æ˜¯åè®®è¯¥å¦‚ä½• ä»é”™è¯¯ä¸­æ¢å¤ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå°±æ˜¯åœ¨æ•°æ®åˆ†ç»„ä¸­æ·»åŠ ä¸€æ–°å­—æ®µï¼Œè®©å‘é€æ–¹å¯¹å…¶æ•°æ®åˆ†ç»„ç¼–å·(ç¼–å·å ç”¨ 1bitï¼Œä¸º 0/1)ï¼Œå³å°†å‘é€æ•°æ®åˆ†ç»„çš„åºå·ï¼ˆsequence numberï¼‰æ”¾åœ¨è¯¥å­—æ®µã€‚äºæ˜¯ï¼Œæ¥æ”¶æ–¹åªéœ€è¦æ£€æŸ¥åºå·å³å¯ç¡®å®šæ”¶åˆ°çš„åˆ†ç»„æ˜¯å¦ä¸€æ¬¡é‡ä¼ ã€‚ rdt2.2: ä¸€ä¸ªä¸è¦ NAK çš„åè®®;åŒ rdt2.1 ä¸€æ ·çš„åŠŸèƒ½, åªç”¨ ACKs ä¸ç”¨ NAKã€‚å¦‚æœä¸Šä¸ªæŠ¥æ–‡æ¥æ”¶æ­£ç¡®æ¥æ”¶æ–¹å‘é€ ACK;æ¥æ”¶æ–¹å¿…é¡»æ˜ç¡®åŒ…å«è¢«ç¡®è®¤çš„æŠ¥æ–‡çš„åºå·ï¼›å¦‚æœæ¥å—åˆ°å—æŸçš„æ•°æ®ï¼Œé‚£å°±å‘é€ä¸€ä¸ª ACKï¼Œåºå·ä¸ºæœ€åä¸€ä¸ªæ­£ç¡®çš„æ•°æ®åŒ…çš„åºå·ã€‚å‘é€æ–¹æ”¶åˆ°é‡å¤ ACK(duplicate ACK)ç­‰åŒäºæ”¶åˆ° NAK,å°†é‡å‘å½“å‰æŠ¥æ–‡ Reliable Data Transfer over a Lossy Channel with Bit Errors: rdt3.0æ–°å‡è®¾: ä¸‹å±‚ä¿¡é“è¿˜è¦ä¸¢å¤±æŠ¥æ–‡ (æ•°æ®æˆ–è€… ACKs);æ ¡éªŒå’Œ, åºå·, ç¡®è®¤, é‡å‘å°†ä¼šæœ‰å¸®åŠ©ï¼Œä½†æ˜¯ä¸å¤Ÿå¼•å…¥å€’è®¡æ•°å®šæ—¶å™¨ï¼ˆcountdown timerï¼‰ï¼Œå®ç°åŸºäºæ—¶é—´çš„é‡ä¼ æœºåˆ¶ï¼›åªæœ‰åœ¨å®šæ—¶å™¨è¶…æ—¶æ—¶æ‰è§¦å‘é‡å‘ å› ä¸ºåˆ†ç»„åºå·åœ¨ 0 å’Œ 1 ä¹‹é—´äº¤æ›¿ï¼Œå› æ­¤ rdt3.0ä¹Ÿè¢«ç§°ä¸ºæ¯”ç‰¹äº¤æ›¿åè®®ï¼ˆalternating-bit protocolï¼‰ã€‚è¿è¡Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š Pipelined Reliable Data Transfer Protocolssender ä¿¡é“åˆ©ç”¨ç‡$U_{sender}=\\frac{L/R}{RTT+L/R}$ Stop-and-Wait æ–¹å¼å‘é€æ–¹ä¿¡é“åˆ©ç”¨ç‡å¾ˆä½ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯æµæ°´çº¿åŒ–ï¼ˆpipeliningï¼‰ï¼Œå³å‘é€æ–¹å¯ä»¥å‘é€å¤šä¸ªåˆ†ç»„ï¼Œè€Œä¸éœ€è¦ç­‰å¾…æ¥æ”¶æ–¹çš„ç¡®è®¤ã€‚ GBN &amp; SRRef[Ch3-1DataLinkLayer#å›é€€ N å¸§åè®® Go-Back-N Protocol][Ch3-1DataLinkLayer#é€‰æ‹©é‡ä¼ åè®® Selective Repeat Protocol]","link":"/UESTC/ComputerNetworking/Ch5-1TransportLayer/"},{"title":"åº”ç”¨å±‚ ApplicationLayer Part â… ","text":"Principles of Network ApplicationsNetwork application architectureåº”ç”¨ç¨‹åºä½“ç³»ç»“æ„ï¼ˆapplication architectureï¼‰ç”±åº”ç”¨ç¨‹åºç ”å‘è€…è®¾è®¡ï¼Œè§„å®šäº†å¦‚ä½•åœ¨å„ç§ç«¯ç³»ç»Ÿä¸Šç»„ç»‡è¯¥åº”ç”¨ç¨‹åºã€‚ç°ä»£ç½‘ç»œåº”ç”¨ç¨‹åºä¸­æ‰€ä½¿ç”¨çš„ä¸¤ç§ä¸»æµä½“ç³»ç»“æ„ï¼šthe client-server architecture å’Œ the peer-to-peer (P2P) architecture. Client-Server Architecture Server æ€»æ˜¯åœ¨çº¿ï¼ˆalways on hostï¼‰ï¼› æ°¸ä¹…çš„ IP åœ°å€ï¼ˆpermanent IP addressï¼‰ï¼› é…ç½®åœ¨æ•°æ®ä¸­å¿ƒï¼ˆoften in data centersï¼‰ï¼› Client ä¸æœåŠ¡å™¨æ²Ÿé€šè”ç³»ï¼› è¢«é—´æ­‡æ€§ï¼ˆintermittentlyï¼‰çš„è¿æ¥ï¼› æ‹¥æœ‰åŠ¨æ€åœ°å€ï¼› å®¢æˆ·ä¹‹é—´ä¸ç›´æ¥è”ç³»ï¼› P2P Architecture æ²¡æœ‰æ€»æ˜¯æ‰“å¼€çš„æœåŠ¡å™¨ ä»»æ„ä¸€å¯¹ä¸»æœº(peer)ç›´æ¥ç›¸äº’é€šä¿¡ å¯¹ç­‰æ–¹é—´æ­‡è¿æ¥å¹¶ä¸”å¯ä»¥æ”¹å˜ IP åœ°å€ è‡ªæˆ‘å¯æ‰©å±•æ€§ self-scalability P2P (Peer-to-Peer) ç½‘ç»œçš„è‡ªæˆ‘å¯æ‰©å±•æ€§ï¼ˆself-scalabilityï¼‰æ˜¯æŒ‡ç½‘ç»œçš„èƒ½åŠ›ï¼Œéšç€å‚ä¸èŠ‚ç‚¹æ•°é‡çš„å¢åŠ ï¼Œå…¶æ€§èƒ½å’Œæ•ˆç‡ä¸ä¼šæ˜¾è‘—ä¸‹é™ï¼Œç”šè‡³å¯èƒ½ä¼šæé«˜ã€‚è¿™ç§ç‰¹æ€§æ˜¯ç”± P2P ç½‘ç»œçš„åˆ†æ•£æ€§å’Œå»ä¸­å¿ƒåŒ–ç‰¹æ€§èµ‹äºˆçš„ã€‚åœ¨è®¸å¤šä¼ ç»Ÿçš„å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å‹ä¸­ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šé›†ä¸­åˆ°ä¸€å°æˆ–å‡ å°æœåŠ¡å™¨ä¸Šï¼Œéšç€ç”¨æˆ·æ•°é‡çš„å¢åŠ ï¼ŒæœåŠ¡å™¨å¯èƒ½ä¼šé­å—è¿‡è½½ï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚ç„¶è€Œï¼Œåœ¨ P2P ç½‘ç»œä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥æˆä¸ºæ•°æ®çš„æä¾›è€…å’Œæ¶ˆè´¹è€…ï¼Œå› æ­¤è´Ÿè½½å¯ä»¥åœ¨æ‰€æœ‰çš„èŠ‚ç‚¹ä¸Šè¿›è¡Œåˆ†å¸ƒï¼Œä½¿å¾—ç½‘ç»œèƒ½å¤Ÿæ›´å¥½åœ°æ‰©å±•ã€‚ç„¶è€Œï¼Œè¿™å¹¶ä¸æ„å‘³ç€ P2P ç½‘ç»œæ²¡æœ‰æ‰©å±•æ€§é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œå½“ç½‘ç»œè§„æ¨¡å˜å¾—éå¸¸å¤§æ—¶ï¼ŒæŸ¥æ‰¾å’Œè·¯ç”±å¯èƒ½ä¼šå˜å¾—å¤æ‚å’Œæ˜‚è´µã€‚å› æ­¤ï¼Œéœ€è¦ä½¿ç”¨é«˜æ•ˆçš„æŸ¥æ‰¾å’Œè·¯ç”±ç®—æ³•ï¼Œä¾‹å¦‚åˆ†å¸ƒå¼å“ˆå¸Œè¡¨ï¼ˆDHTï¼‰ï¼Œæ¥ç¡®ä¿ç½‘ç»œçš„å¯æ‰©å±•æ€§ã€‚ C/S ä¸ P2P æ··åˆçš„ä½“ç³»ç»“æ„ Processes CommunicatingClient And Server Process è¿›ç¨‹ï¼šè¿è¡Œåœ¨ç«¯ç³»ç»Ÿä¸­çš„ç¨‹åº[ProcessVsThread#Definition] åŒä¸€ä¸»æœºä¸Šçš„ä¸¤ä¸ªè¿›ç¨‹é€šè¿‡å†…éƒ¨è¿›ç¨‹é€šä¿¡æœºåˆ¶è¿›è¡Œé€šä¿¡ ä¸åŒä¸»æœºä¸Šçš„è¿›ç¨‹é€šè¿‡äº¤æ¢æŠ¥æ–‡(message)ç›¸äº’é€šä¿¡ å®¢æˆ·è¿›ç¨‹ï¼šå‘èµ·é€šä¿¡çš„è¿›ç¨‹ï¼›æœåŠ¡è¿›ç¨‹ï¼šåœ¨ä¼šè¯å¼€å§‹æ—¶ç­‰å¾…è”ç³»çš„è¿›ç¨‹ï¼› The Interface Between the Process and the Computer Networkå¤§å¤šæ•°åº”ç”¨ç¨‹åºç”±è®¸å¤šäº’ç›¸é€šä¿¡çš„è¿›ç¨‹å¯¹(pairs of communicating processes)ç»„æˆ,ä»»ä½•ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´å‘é€çš„æŠ¥æ–‡éƒ½éœ€è¦ç»ç”±åº•å±‚çš„ç½‘ç»œ;å¥—æ¥å­— Socketä½œä¸ºè½¯ä»¶æ¥å£,å‘è¿›ç¨‹æä¾›å‘é€å’Œæ¥å—æŠ¥æ–‡åŠŸèƒ½ ç”±äºè¯¥å¥—æ¥å­—æ˜¯å»ºç«‹ç½‘ç»œåº”ç”¨çš„å¯ç¼–ç¨‹æ¥å£ï¼Œå› æ­¤å¥—æ¥å­—è¢«ç§°ä¸ºåº”ç”¨ç¨‹åºå’Œç½‘ç»œä¹‹é—´çš„åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼ˆApplication Programming Interfaceï¼ŒAPIï¼‰ã€‚ Addressing Processes IP Address ç”¨äºå”¯ä¸€æ ‡è¯† Internet ä¸Šçš„ä¸»æœº Port ç”¨äºæ ‡è¯†ç›®çš„ä¸»æœºçš„æ¥å—è¿›ç¨‹ å‘é€è¿›ç¨‹è¿˜å¿…é¡»è¯†åˆ«åœ¨ä¸»æœºä¸­è¿è¡Œçš„æ¥æ”¶è¿›ç¨‹ï¼ˆæ›´å…·ä½“åœ°è¯´ï¼Œæ˜¯æ¥æ”¶ä¿¡æ¯çš„ Socketï¼‰ã€‚è¿™ä¸ªä¿¡æ¯æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºé€šå¸¸ä¸€ä¸ªä¸»æœºå¯èƒ½è¿è¡Œç€è®¸å¤šç½‘ç»œåº”ç”¨ã€‚ç›®æ ‡ç«¯å£å·å°±æ˜¯ä¸ºäº†è¿™ä¸ªç›®çš„è€Œè®¾ç«‹çš„ã€‚ä¸€äº›æµè¡Œçš„åº”ç”¨å·²ç»è¢«åˆ†é…äº†ç‰¹å®šçš„ç«¯å£å·ã€‚ä¾‹å¦‚ï¼ŒWeb æœåŠ¡å™¨è¢«æ ‡è¯†ä¸º 80 å·ç«¯å£ã€‚é‚®ä»¶æœåŠ¡å™¨è¿›ç¨‹ï¼ˆä½¿ç”¨ SMTP åè®®ï¼‰è¢«æ ‡è¯†ä¸º 25 å·ç«¯å£ã€‚ Transport Services Available to Applications Reliable Data Transfer ä¸€äº›åº”ç”¨éœ€è¦ 100%å¯é æ•°æ®ä¼ è¾“,å¦‚é‡‘èåº”ç”¨ loss-tolerant applications å…è®¸ä¸¢åŒ…(loss),å¸¸è§çš„æœ‰å¤šåª’ä½“åº”ç”¨,å¦‚è§†é¢‘é€šè¯ç­‰ Throughout å…·æœ‰ååé‡è¦æ±‚æ˜¯åº”ç”¨ç¨‹åºè¢«ç§°ä¸ºå¸¦å®½æ•æ„Ÿçš„åº”ç”¨ï¼ˆbandwidth-sensitive applicationï¼‰ï¼› å¼¹æ€§åº”ç”¨ï¼ˆelastic applicationï¼‰èƒ½å¤Ÿæ ¹æ®å½“æ—¶å¯ç”¨çš„å¸¦å®½æˆ–å¤šæˆ–å°‘åœ°åˆ©ç”¨å¯ä¾›ä½¿ç”¨çš„ååé‡ï¼› Timing ä½å»¶æ—¶ï¼ˆlow delayï¼‰è¦æ±‚ï¼› Security ä¼ è¾“æ•°æ®çš„ Cryption&amp;Decryption Confidentiality(ä¿å¯†æ€§) æ•°æ®å®Œæ•´æ€§ Data Integrity ç»ˆç«¯éªŒè¯ end-point authentication Application Data Loss Throughtput Time-Senstive æ–‡ä»¶ä¼ è¾“ No loss elastic no ç”µå­é‚®ä»¶ No loss elastic no Web No loss elastic no å®æ—¶éŸ³é¢‘/è§†é¢‘ Loss-tolernet éŸ³é¢‘: å‡  kbps-1Mbps yes,100 msec å­˜å‚¨éŸ³é¢‘/è§†é¢‘ Loss-tolernet è§†é¢‘:10kbps-5Mbps yes, å‡ ç§’ äº¤äº’å¼æ¸¸æˆ Loss-tolernet è§†é¢‘:10kbps-5Mbps yesy, 100 msec å³æ—¶è®¯æ¯ No loss å‡  kbps ä»¥ä¸Š elastic yes and no Transport Services Provided by the Internet TCP æœåŠ¡ é¢å‘è¿æ¥çš„æœåŠ¡ï¼ˆconnection-orientedï¼‰ï¼šæŠ¥æ–‡å¼€å§‹æµåŠ¨ä¹‹å‰ï¼ŒTCP è®©å®¢æˆ·å’ŒæœåŠ¡å™¨äº’ç›¸äº¤æ¢è¿è¾“å±‚æ§åˆ¶ä¿¡æ¯ï¼ˆæ¡æ‰‹é˜¶æ®µï¼‰ï¼Œæ¡æ‰‹é˜¶æ®µåï¼Œä¸€æ¡ TCP è¿æ¥ï¼ˆTCP connectionï¼‰å°±åœ¨ä¸¤æ¡è¿›ç¨‹çš„å¥—æ¥å­—ä¹‹é—´å»ºç«‹ï¼› å¯é çš„æ•°æ®ä¼ é€æœåŠ¡ï¼ˆreliable transportï¼‰ï¼šæ— å·®åˆ«ã€æŒ‰é€‚å½“é¡ºåºäº¤ä»˜æ‰€æœ‰å‘é€çš„æ•°æ®ï¼› æ‹¥å¡æ§åˆ¶æœºåˆ¶ï¼ˆcongestion controlï¼‰ å®‰å…¨å¥—æ¥å­—å±‚ï¼ˆSecure Sockets Layerï¼ŒSSLï¼‰æä¾›äº†å…³é”®çš„è¿›ç¨‹åˆ°è¿›ç¨‹çš„å®‰å…¨æ€§æœåŠ¡ğŸš¥http + SSL = https UDP æœåŠ¡ æ— è¿æ¥ å°½æœ€å¤§åŠªåŠ›äº¤ä»˜ é¢å‘æŠ¥æ–‡ æ— æ‹¥å¡æ§åˆ¶ æ”¯æŒä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€å’Œå¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡ é¦–éƒ¨å¼€é”€å° Application Layer Protocols**åº”ç”¨å±‚åè®®(Application Layer Protocols)**å®šä¹‰äº†åœ¨ä¸åŒç«¯ç³»ç»Ÿä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åºè¿›ç¨‹å¦‚ä½•ç›¸äº’ä¼ é€’æ¶ˆæ¯ã€‚å…·ä½“æ¥è¯´ï¼Œåº”ç”¨å±‚åè®®å®šä¹‰äº†ï¼š äº¤æ¢çš„æ¶ˆæ¯ç±»å‹ï¼Œä¾‹å¦‚ï¼Œè¯·æ±‚æ¶ˆæ¯å’Œå“åº”æ¶ˆæ¯ æŠ¥æ–‡ç±»å‹çš„è¯­æ³•ï¼šæŠ¥æ–‡ä¸­çš„å„ä¸ªå­—æ®µåŠå…¶è¯¦ç»†æè¿° å­—æ®µçš„è¯­ä¹‰ï¼Œå³åŒ…å«åœ¨å­—æ®µä¸­çš„ä¿¡æ¯çš„å«ä¹‰ è¿›ç¨‹ä½•æ—¶ã€å¦‚ä½•å‘é€æŠ¥æ–‡åŠå¯¹æŠ¥æ–‡è¿›è¡Œå“åº” åº”ç”¨å±‚åè®®æ ¹æ®å…¶æ˜¯å¦å…¬å¼€å¯ä¾›æ‰€æœ‰äººä½¿ç”¨ï¼Œå¯ä»¥åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼šå…¬å…±é¢†åŸŸåè®®å’Œä¸“ç”¨åè®®: å…¬å…±é¢†åŸŸåè®®:ç”± RFC æ–‡æ¡£å®šä¹‰,å¯ä¾›æ‰€æœ‰äººä½¿ç”¨,ä¾‹å¦‚ HTTP,SMTP,POP3 ä¸“ç”¨åè®®:ç”±å…¬å¸æˆ–ç»„ç»‡å®šä¹‰,ä¾‹å¦‚ Skype, KaZaA RFCï¼Œå…¨ç§°æ˜¯ Request for Commentsï¼ˆå¾æ±‚æ„è§ä¹¦ï¼‰ï¼Œæ˜¯ç”±äº’è”ç½‘å·¥ç¨‹ä»»åŠ¡ç»„ï¼ˆIETFï¼‰å‡ºç‰ˆçš„ä¸€ç³»åˆ—å¤‡å¿˜å½•ï¼Œç”¨äºæè¿°ã€è§„å®šæˆ–è€…å»ºè®®äº’è”ç½‘æ ‡å‡†ã€åè®®ã€ç¨‹åºã€æˆ–è€…æ¦‚å¿µã€‚RFC æ–‡æ¡£æ˜¯äº’è”ç½‘æŠ€æœ¯å’Œåè®®çš„ä¸»è¦æ¥æºï¼ŒåŒ…æ‹¬äº†è¯¸å¦‚ TCP/IPã€HTTPã€SMTP ç­‰æ ¸å¿ƒäº’è”ç½‘åè®®çš„è§„èŒƒã€‚RFC æ–‡æ¡£çš„å†…å®¹å¯ä»¥æ˜¯äº’è”ç½‘ç¤¾åŒºçš„å…±è¯†ã€å·¥ä½œå°ç»„çš„äº§å“ã€ä¸ªäººçš„è§‚ç‚¹ï¼Œæˆ–è€…åªæ˜¯ä¸ºäº†è·å–å…¬ä¼—çš„åé¦ˆã€‚RFC æ–‡æ¡£ä¸€æ—¦å‘å¸ƒï¼Œç¼–å·å°±ä¸å†æ”¹å˜ï¼Œå¦‚æœéœ€è¦å¯¹ RFC è¿›è¡Œä¿®æ”¹æˆ–è€…æ›´æ–°ï¼Œä¼šä»¥æ–°çš„ RFC ç¼–å·å‘å¸ƒã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå°½ç®¡ RFC æ˜¯â€å¾æ±‚æ„è§ä¹¦â€çš„ç¼©å†™ï¼Œä½†æ˜¯å¤§éƒ¨åˆ† RFC æ–‡æ¡£å®é™…ä¸Šæ˜¯äº’è”ç½‘æ ‡å‡†çš„å®˜æ–¹è§„èŒƒï¼Œè€Œä¸ä»…ä»…æ˜¯å¾æ±‚æ„è§çš„ææ¡ˆã€‚ Network Applications The Web and HTTPOverview of HTTP ç½‘é¡µ WebPageï¼Œæˆ–ç§° Documentç”±è®¸å¤šå¯¹è±¡ Objectç»„æˆã€‚ å¯¹è±¡å°±æ˜¯æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯ HTML æ–‡ä»¶, JPEG å›¾åƒ, Java applet, éŸ³é¢‘æ–‡ä»¶â€¦ å¤šæ•°ç½‘é¡µç”±å•ä¸ªåŸºæœ¬ HTML æ–‡ä»¶ base HTMLå’Œè‹¥å¹²ä¸ªæ‰€å¼•ç”¨çš„å¯¹è±¡æ„æˆ æ¯ä¸ªå¯¹è±¡è¢«ä¸€ä¸ª ç»Ÿä¸€èµ„æºå®šä½ç¬¦ URL Uniform Resource Locatorå¯»å€ Web æµè§ˆå™¨ï¼ˆWeb browserï¼‰å®ç°äº† HTTP çš„å®¢æˆ·ç«¯ï¼›Web æœåŠ¡å™¨ï¼ˆWeb serverï¼‰å®ç°äº† HTTP çš„æœåŠ¡å™¨ç«¯ï¼› HTTP ä½¿ç”¨ TCP ä½œä¸ºè¿è¾“åè®®ï¼› HTTP è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHyperText Transfer Protocolï¼‰ å› ä¸º HTTP æœåŠ¡å™¨ä¸ç»´æŠ¤å®¢æˆ·å…ˆå‰çš„çŠ¶æ€ä¿¡æ¯ï¼Œ æ˜¯æ— çŠ¶æ€åè®®ï¼ˆstateless protocolï¼‰ï¼› ç»´æŠ¤çŠ¶æ€çš„åè®®éå¸¸å¤æ‚ å¿…é¡»ç»´æŠ¤è¿‡å»å†å² (çŠ¶æ€ä¿¡æ¯) å¦‚æœ server/client å´©æºƒ, å®ƒä»¬å„è‡ªçš„çŠ¶æ€è§†å›¾å¯èƒ½ä¸ä¸€è‡´, å› æ­¤å¿…é¡»ä¿æŒåè°ƒä¸€è‡´ã€‚ 12http://www.someschool.edu/someDept/pic.gifğŸ‘†ğŸ»åè®® ğŸ‘†ğŸ»ä¸»æœºå ğŸ‘†ğŸ»è·¯å¾„å Non-Persistent and Persistent ConnectionséæŒä¹… HTTP è¿æ¥ æ¯ä¸ª TCP è¿æ¥ä¸Šåªä¼ é€ä¸€ä¸ªå¯¹è±¡ï¼Œä¸‹è½½å¤šä¸ªå¯¹è±¡éœ€è¦å»ºç«‹å¤šä¸ª TCP è¿æ¥ HTTP/1.0 ä½¿ç”¨éæŒä¹… HTTP è¿æ¥ æŒä¹… HTTP è¿æ¥ ä¸€ä¸ª TCP è¿æ¥ä¸Šå¯ä»¥ä¼ é€å¤šä¸ªå¯¹è±¡ HTTP/1.1 é»˜è®¤ä½¿ç”¨æŒä¹… HTTP è¿æ¥ å¾€è¿”æ—¶é—´ï¼ˆRound-Trip Timeï¼ŒRTTï¼‰å®šä¹‰ï¼šè¯¥æ—¶é—´æ˜¯æŒ‡ä¸€ä¸ªçŸ­åˆ†ç»„ä»å®¢æˆ·åˆ°æœåŠ¡å™¨ç„¶ååœ¨è¿”å›å®¢æˆ·æ‰€éœ€è¦çš„æ—¶é—´ï¼›[Ch1-NetworkOverview#å¾€è¿”æ—¶é—´ Round Trip Time] HTTP Message Formatç»ˆç«¯è¾“å…¥curl -v &quot;https://baidu.com&quot;æˆ–ä½¿ç”¨ wireshark ç­‰æŠ“åŒ…å·¥å…·å¯ä»¥ 12345678910111213141516171819202122232425262728293031 curl -v &quot;https://baidu.com&quot;* Host baidu.com:443 was resolved.* IPv6: (none)* IPv4: 110.242.68.66, 39.156.66.10* Trying 110.242.68.66:443...* Connected to baidu.com (110.242.68.66) port 443* schannel: disabled automatic use of client certificate* ALPN: curl offers http/1.1* ALPN: server accepted http/1.1* using HTTP/1.x&gt; GET / HTTP/1.1&gt; Host: baidu.com&gt; User-Agent: curl/8.6.0&gt; Accept: */*&gt;&lt; HTTP/1.1 302 Moved Temporarily&lt; Server: bfe/1.0.8.18&lt; Date: Wed, 27 Mar 2024 07:08:02 GMT&lt; Content-Type: text/html&lt; Content-Length: 161&lt; Connection: keep-alive&lt; Location: http://www.baidu.com/&lt;&lt;html&gt;&lt;head&gt;&lt;title&gt;302 Found&lt;/title&gt;&lt;/head&gt;&lt;body bgcolor=&quot;white&quot;&gt;&lt;center&gt;&lt;h1&gt;302 Found&lt;/h1&gt;&lt;/center&gt;&lt;hr&gt;&lt;center&gt;bfe/1.0.8.18&lt;/center&gt;&lt;/body&gt;&lt;/html&gt;* Connection #0 to host baidu.com left intact HTTP Request Message12345GET /somedir/page.html HTTP/1.1Host: www.someschool.eduConnection: closeUser-agent: Mozilla/5.0Accept-language: fr è¯·æ±‚è¡Œ request lineè¯·æ±‚æŠ¥æ–‡çš„ç¬¬ä¸€è¡Œ,å…¶æœ‰ 3 ä¸ªå­—æ®µï¼šæ–¹æ³•å­—æ®µã€URL å­—æ®µå’Œ HTTP ç‰ˆæœ¬å­—æ®µï¼› æ–¹æ³•åŒ…å«GET,POST,HEAD,PUT,DELETEï¼› é¦–éƒ¨è¡Œ header line è¯·æ±‚è¡Œåç»§çš„è¡Œå«ä½œ HTTP Response Message123456789HTTP/1.1 200 OKConnectionï¼šcloseDate: Sat, 06 Aug 2011 12:00:15 GMTServer: Apache/1.3.0 (Unix)Last-Modified: Thu, 22 Jun 2011 â€¦...Content-Length: 6821Content-Type: text/htmldata data data data data ... çŠ¶æ€è¡Œ status lineå“åº”æŠ¥æ–‡çš„ç¬¬ä¸€è¡Œ,å…¶æœ‰ 3 ä¸ªå­—æ®µï¼šHTTP ç‰ˆæœ¬å­—æ®µã€çŠ¶æ€ç å­—æ®µå’ŒçŠ¶æ€ç çŸ­è¯­å­—æ®µï¼› é¦–éƒ¨è¡Œ header line å“åº”è¡Œåç»§çš„è¡Œå«ä½œ HTTP çŠ¶æ€ç 1xx ï¼ˆä¿¡æ¯æ€§çŠ¶æ€ç ï¼‰ï¼šè¡¨ç¤ºæœåŠ¡å™¨å·²ç»æ¥æ”¶åˆ°è¯·æ±‚ï¼Œæ­£åœ¨å¤„ç†ã€‚ 100 Continue: æœåŠ¡å™¨å·²æ”¶åˆ°è¯·æ±‚çš„åˆå§‹éƒ¨åˆ†ï¼Œå®¢æˆ·ç«¯åº”ç»§ç»­å‘é€å…¶ä½™éƒ¨åˆ†ã€‚ 101 Switching Protocols: æœåŠ¡å™¨å·²ç»ç†è§£å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¹¶å°†åˆ‡æ¢åˆ°æ›´é€‚åˆçš„åè®®è¿›è¡Œé€šä¿¡ã€‚ 2xx ï¼ˆæˆåŠŸçŠ¶æ€ç ï¼‰ï¼šè¡¨ç¤ºè¯·æ±‚å·²æˆåŠŸå¤„ç†ã€‚ 200 OK: è¯·æ±‚æˆåŠŸï¼Œè¿”å›æ‰€è¯·æ±‚çš„å†…å®¹ã€‚ 201 Created: è¯·æ±‚æˆåŠŸï¼Œå¹¶åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„èµ„æºã€‚ 202 Accepted: è¯·æ±‚å·²è¢«æ¥å—ï¼Œä½†å°šæœªå¤„ç†å®Œæˆã€‚ 204 No Content: è¯·æ±‚æˆåŠŸï¼Œä½†æœåŠ¡å™¨æ²¡æœ‰è¿”å›ä»»ä½•å†…å®¹ã€‚ 3xx ï¼ˆé‡å®šå‘çŠ¶æ€ç ï¼‰ï¼šè¡¨ç¤ºéœ€è¦è¿›ä¸€æ­¥æ“ä½œä»¥å®Œæˆè¯·æ±‚ã€‚ 301 Moved Permanently: è¢«è¯·æ±‚çš„èµ„æºå·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ï¼Œå¹¶ä¸”å°†æ¥çš„è¯·æ±‚åº”ä½¿ç”¨æ–°çš„ URLã€‚ 302 Found: è¢«è¯·æ±‚çš„èµ„æºæš‚æ—¶ç§»åŠ¨åˆ°äº†æ–°ä½ç½®ã€‚ 304 Not Modified: èµ„æºæœªè¢«ä¿®æ”¹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜çš„ç‰ˆæœ¬ã€‚ 4xx ï¼ˆå®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç ï¼‰ï¼šè¡¨ç¤ºå®¢æˆ·ç«¯å‘é€äº†é”™è¯¯çš„è¯·æ±‚ã€‚ 400 Bad Request: å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚è¯­æ³•é”™è¯¯ã€‚ 401 Unauthorized: è¯·æ±‚éœ€è¦èº«ä»½éªŒè¯ã€‚ 403 Forbidden: æœåŠ¡å™¨æ‹’ç»äº†è¯·æ±‚ï¼Œå®¢æˆ·ç«¯æ²¡æœ‰æƒé™è®¿é—®è¯·æ±‚çš„èµ„æºã€‚ 404 Not Found: è¯·æ±‚çš„èµ„æºåœ¨æœåŠ¡å™¨ä¸Šæœªæ‰¾åˆ°ã€‚ 5xx ï¼ˆæœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç ï¼‰ï¼šè¡¨ç¤ºæœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿäº†é”™è¯¯ã€‚ 500 Internal Server Error: æœåŠ¡å™¨åœ¨æ‰§è¡Œè¯·æ±‚æ—¶é‡åˆ°äº†æœªçŸ¥çš„é”™è¯¯ã€‚ 502 Bad Gateway: ä½œä¸ºä»£ç†æˆ–ç½‘å…³çš„æœåŠ¡å™¨æ”¶åˆ°æ— æ•ˆçš„å“åº”ã€‚ 503 Service Unavailable: æœåŠ¡å™¨æš‚æ—¶æ— æ³•å¤„ç†è¯·æ±‚ï¼Œé€šå¸¸æ˜¯ç”±äºè¿‡è½½æˆ–ç»´æŠ¤ã€‚ User-Server Interaction: Cookieså‰é¢æåˆ° HTTP æœåŠ¡å™¨ä¸ºæ— çŠ¶æ€çš„ï¼Œè€Œä¸€ä¸ª Web ç«™ç‚¹é€šå¸¸å¸Œæœ›èƒ½å¤Ÿè¯†åˆ«ç”¨æˆ·ï¼Œå¯èƒ½æ˜¯å› ä¸ºæœåŠ¡å™¨å¸Œæœ›é™åˆ¶ç”¨æˆ·çš„è®¿é—®ï¼Œæˆ–è€…å› ä¸ºå®ƒå¸Œæœ›æŠŠå†…å®¹ä¸ç”¨æˆ·èº«ä»½è”ç³»èµ·æ¥ã€‚ä¸ºæ­¤ï¼ŒHTTP ä½¿ç”¨äº† cookie(æœ€åˆè¢«ç§°ä½œ magic cookie)ğŸªMagic_cookie cookie technology has four components: a cookie header line in the HTTP response message; a cookie header line in the HTTP request message; a cookie file kept on the userâ€™s end system and managed by the userâ€™s browser a back-end database at the Web site. Cookies è·Ÿè¸ªç”¨æˆ·cookies å…è®¸ç½‘ç«™æ›´åŠ äº†è§£ä½ ä½ å¯ä»¥æä¾›åå­—å’Œ e-mail ç»™ç½‘ç«™å¹¿å‘Šå…¬å¸é€šè¿‡ç½‘ç«™è·å¾—ä¿¡æ¯Cookies ä¸é€‚åˆæ¸¸åŠ¨ç”¨æˆ·Cookie å¯ç”¨äºï¼šè·Ÿè¸ªç”¨æˆ·åœ¨ç»™å®šç½‘ç«™ä¸Šçš„è¡Œä¸ºï¼ˆç¬¬ä¸€æ–¹ cookieï¼‰åœ¨å¤šä¸ªç½‘ç«™ä¸Šè·Ÿè¸ªç”¨æˆ·è¡Œä¸ºï¼ˆç¬¬ä¸‰æ–¹ cookieï¼‰ï¼Œè€Œæ— éœ€ç”¨æˆ·é€‰æ‹©è®¿é—®è·Ÿè¸ªå™¨ç½‘ç«™ï¼è·Ÿè¸ªå¯èƒ½å¯¹ç”¨æˆ·ä¸å¯è§ï¼šå¯èƒ½æ˜¯ä¸€ä¸ªä¸å¯è§çš„é“¾æ¥é€šè¿‡ Cookie è¿›è¡Œçš„ç¬¬ä¸‰æ–¹è·Ÿè¸ªï¼šåœ¨ Firefoxã€Safari æµè§ˆå™¨ä¸­é»˜è®¤ç¦ç”¨ï¼Œå°†äº 2023 å¹´åœ¨ Chrome æµè§ˆå™¨ä¸­ç¦ç”¨ Web Caching(proxy server)Web ç¼“å­˜å™¨ Web cache,ä¹Ÿç§°ä»£ç†æœåŠ¡å™¨ proxy serverï¼Œè®¾è®¡å®ƒçš„ç›®æ ‡æ˜¯ä»£è¡¨åˆå§‹ Web æœåŠ¡å™¨ï¼ˆorigin serverï¼‰æ»¡è¶³ HTTP è¯·æ±‚;ä¸€èˆ¬çš„ï¼ŒWeb ç¼“å­˜å™¨æ—¢æ˜¯æœåŠ¡å™¨åˆæ˜¯å®¢æˆ·æœº,å…¸å‹çš„ç¼“å­˜å™¨ç”± ISP æä¾›ï¼ˆå¤§å­¦ã€å…¬å¸æˆ–å±…æ°‘ ISPï¼‰;å¼•å…¥ Weh ç¼“å­˜å™¨å‡å°‘äº†å¯¹å®¢æˆ·æœºè¯·æ±‚çš„å“åº”æ—¶é—´,å†…éƒ¨ç½‘ç»œä¸æ¥å…¥é“¾è·¯ä¸Šçš„é€šä¿¡é‡,å¹¶ä»æ•´ä½“ä¸Šå¤§å¤§é™ä½å› ç‰¹ç½‘ä¸Šçš„ Web æµé‡ å¦‚å›¾,åŠ å…¥ cache å,å®¢æˆ·ç«¯è¯·æ±‚çš„å¯¹è±¡å¯èƒ½åœ¨ç¼“å­˜å™¨ä¸­(ç§°ä½œç¼“å­˜å‘½ä¸­),ç¼“å­˜å™¨ç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯;å›¾ä¸­æ¥å…¥é“¾è·¯(access link)çš„é€Ÿç‡ä¸º 15Mbps,è¿œä½äºå±€åŸŸç½‘çš„ç½‘ç»œé€Ÿç‡,$total delay = LAN delay + access dalay + Internet delay$,å¯è§æ¥å…¥æ—¶å»¶ä¸ºè¯¥ä¾‹ä¸­æå‡ä¼ æ’­é€Ÿç‡çš„ç“¶é¢ˆ;å¯é€‰æ‹©æ›´å¿«çš„æ¥å…¥é“¾è·¯,ä½†è¿™éœ€è¦æ›´å¤šçš„è´¹ç”¨;è€Œç¼“å­˜å™¨å¯ä»¥å‡å°‘æ¥å…¥é“¾è·¯ä¸Šçš„æµé‡,ä»è€Œå‡å°‘æ¥å…¥æ—¶å»¶,åŒæ—¶è´¹ç”¨ç›¸å¯¹è¾ƒä½ LAN delay: åœ¨å±€åŸŸç½‘ä¸­ä¼ è¾“ä¸€ä¸ªæŠ¥æ–‡æ‰€éœ€çš„æ—¶é—´Access delay: åœ¨ä¸¤ä¸ªè·¯ç”±å™¨ä¹‹é—´ä¼ è¾“ä¸€ä¸ªæŠ¥æ–‡æ‰€éœ€çš„æ—¶é—´Internet delay: åœ¨å› ç‰¹ç½‘ä¸­ä¼ è¾“ä¸€ä¸ªæŠ¥æ–‡æ‰€éœ€çš„æ—¶é—´ Request Steps: æµè§ˆå™¨åˆ›å»ºä¸€ä¸ªåˆ° Web ç¼“å­˜å™¨çš„ TCP è¿æ¥ï¼Œå¹¶å‘ Web ç¼“å­˜å™¨ä¸­çš„å¯¹è±¡å‘é€ä¸€ä¸ª HTTP è¯·æ±‚ï¼› Web ç¼“å­˜å™¨è¿›è¡Œæ£€æŸ¥ï¼Œçœ‹çœ‹æœ¬åœ°æ˜¯å¦å­˜å‚¨è¯¥å¯¹è±¡å‰¯æœ¬ã€‚å¦‚æœæœ‰ï¼ŒWeb ç¼“å­˜å™¨å‘å®¢æˆ·è¿”å›è¯¥å¯¹è±¡ï¼› å¦‚æœç¼“å­˜å™¨ä¸­æ²¡æœ‰è¯¥å¯¹è±¡ï¼Œå®ƒå°±æ‰“å¼€ä¸€ä¸ªä¸è¯¥å¯¹è±¡çš„åˆå§‹æœåŠ¡å™¨çš„ TCP è¿æ¥ã€‚Web ç¼“å­˜å™¨å‘åˆå§‹æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œå¹¶å¾—åˆ°åˆå§‹æœåŠ¡å™¨çš„å“åº”ï¼› å½“ Web ç¼“å­˜å™¨æ¥å—å¯¹è±¡åï¼Œåœ¨æœ¬åœ°åˆ›å»ºç»™å¯¹è±¡çš„å‰¯æœ¬ï¼Œå¹¶å‘å®¢æˆ·å‘é€å“åº”æŠ¥æ–‡è¿”å›è¯¥å¯¹è±¡ï¼›é€šè¿‡ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œï¼ˆContent Distribution Networkï¼ŒCDNï¼‰ï¼ŒWeb ç¼“å­˜å™¨æ­£åœ¨å› ç‰¹ç½‘ä¸­å‘æŒ¥ç€è¶Šæ¥è¶Šé‡è¦çš„ä½œç”¨ã€‚[Ch6-2ApplicationLayer#Content Distribution Networks] å°½ç®¡é«˜é€Ÿç¼“å­˜å™¨èƒ½å‡å°‘ç”¨æˆ·æ„Ÿå—åˆ°çš„å“åº”æ—¶é—´ï¼Œä½†å¼•å…¥äº†ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼Œå³å­˜æ”¾åœ¨ç¼“å­˜å™¨ä¸­çš„å‰¯æœ¬å¯èƒ½é™ˆæ—§çš„ã€‚ä¸ºéªŒè¯ç¼“å­˜å™¨ä¸­çš„å‰¯æœ¬æ˜¯å¦ä»ç„¶æœ‰æ•ˆï¼Œä½ å¯ä»¥ä½¿ç”¨æ¡ä»¶ GET è¯·æ±‚,å‚ç…§å¦‚ä¸‹ python ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647import socket# å®šä¹‰æŠ¥æ–‡å†…å®¹å’Œé¦–éƒ¨request = &quot;GET /index.html HTTP/1.1\\r\\n&quot;request += &quot;Host: www.baidu.com\\r\\n&quot;request += &quot;If-Modified-Since: Sat, 01 Jan 2022 00:00:00 GMT\\r\\n&quot;request += &quot;Connection: close\\r\\n\\r\\n&quot;# åˆ›å»ºå¥—æ¥å­—å¹¶è¿æ¥ç›®æ ‡æœåŠ¡å™¨s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)s.connect(('www.baidu.com', 80))# å‘é€æŠ¥æ–‡s.send(request.encode())response = b&quot;&quot;while True: data = s.recv(4096) if not data: break response += dataprint(response.decode())s.close()[OUTPUT]HTTP/1.1 200 OKAccept-Ranges: bytesCache-Control: no-cacheContent-Length: 9508Content-Type: text/htmlDate: Fri, 29 Mar 2024 13:00:29 GMTP3p: CP=&quot; OTI DSP COR IVA OUR IND COM &quot;P3p: CP=&quot; OTI DSP COR IVA OUR IND COM &quot;Pragma: no-cacheServer: BWS/1.1Set-Cookie: BAIDUID=E79C6BEF6A7F8AA35FBC1FD6742520D8:FG=1; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.comSet-Cookie: BIDUPSID=E79C6BEF6A7F8AA35FBC1FD6742520D8; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.comSet-Cookie: PSTM=1711717229; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.comSet-Cookie: BAIDUID=E79C6BEF6A7F8AA30F2B2E6688EB66DE:FG=1; max-age=31536000; expires=Sat, 29-Mar-25 13:00:29 GMT; domain=.baidu.com; path=/; version=1; comment=bdTraceid: 1711717229235279668210477533425964763324Vary: Accept-EncodingX-Ua-Compatible: IE=Edge,chrome=1X-Xss-Protection: 1;mode=blockConnection: close# html filedata data ... data HTTP/2HTTP1.1ï¼š åœ¨å•ä¸ª TCP è¿æ¥ä¸Šå¼•å…¥äº†å¤šä¸ªæµæ°´çº¿ GET æœåŠ¡å™¨æŒ‰é¡ºåºå“åº” GET è¯·æ±‚ï¼ˆFCFS: first-come-first-served schedulingï¼‰ å¯¹äº FCFSï¼Œå°å¯¹è±¡å¯èƒ½å¿…é¡»åœ¨å¤§å¯¹è±¡åé¢ç­‰å¾…ä¼ è¾“ head-of-line(HOL)blocking, çº¿å¤´é˜»å¡ HOL ä¸¢å¤±æ¢å¤ï¼ˆé‡æ–°ä¼ è¾“ä¸¢å¤±çš„ TCP æ®µï¼‰å¯¹å¯¹è±¡ä¼ è¾“æ—¶é—´çš„å½±å“ HTTP/2:[RFC 7540ï¼Œ2015] å¢åŠ äº†æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€å¯¹è±¡çš„çµæ´»æ€§ æ–¹æ³•ã€çŠ¶æ€ä»£ç ã€å¤§å¤šæ•°å¤´å­—æ®µä¸ HTTP1.1 ç›¸æ¯”æ²¡æœ‰å˜åŒ– åŸºäºå®¢æˆ·ç«¯æŒ‡å®šçš„å¯¹è±¡ä¼˜å…ˆçº§çš„è¯·æ±‚å¯¹è±¡çš„ä¼ è¾“é¡ºåºï¼ˆä¸ä¸€å®šæ˜¯ FCFSï¼‰ å°†æœªè¯·æ±‚çš„å¯¹è±¡æ¨é€åˆ°å®¢æˆ·ç«¯ å°†å¯¹è±¡åˆ’åˆ†ä¸ºå¸§ frames ä»¥å‡å°‘ HOL é˜»å¡ è¯¦ç»†åˆ†æ http2 å’Œ http1.1 åŒºåˆ« HTTP/3ï¼šé€šè¿‡ UDP å¢åŠ äº†å®‰å…¨æ€§ã€æ¯ä¸ªå¯¹è±¡çš„é”™è¯¯å’Œæ‹¥å¡æ§åˆ¶ï¼ˆæ›´å¤šçš„æµæ°´çº¿æ“ä½œï¼‰ Electronic Mail in the Interneté‚®ç®±ç³»ç»Ÿçš„ 3 ä¸ªä¸»è¦ç»„æˆéƒ¨åˆ†: ç”¨æˆ·ä»£ç† user agents å…è®¸ç”¨æˆ·é˜…è¯»,å›å¤,è½¬å‘,ä¿å­˜,ç¼–è¾‘é‚®ä»¶ï¼› æœåŠ¡å™¨ä¸Šå­˜å‚¨çš„ä¼ å…¥å’Œä¼ å‡ºçš„æ¶ˆæ¯ï¼› ä¾‹å¦‚ï¼šOutlook, foxmail ç­‰ é‚®ä»¶æœåŠ¡å™¨ mail servers é‚®ç®±ï¼ˆmailboxï¼‰åŒ…æ‹¬ç”¨æˆ·ä¼ å…¥çš„æ¶ˆæ¯ï¼› æŠ¥æ–‡é˜Ÿåˆ—ï¼ˆmessage queueï¼‰ä¸­ä¸ºå¾…å‘é€çš„é‚®ä»¶æŠ¥æ–‡ï¼› ç®€å•é‚®ä»¶ä¼ é€åè®® SMTP SMTPSMTP æœåŠ¡æ¦‚è¿°SMTPï¼ˆSimple Mail Transfer Protocolï¼‰æ˜¯ä¸€ç§ç”¨äºç”µå­é‚®ä»¶ä¼ è¾“çš„æ ‡å‡†åè®®ã€‚å®ƒå®šä¹‰äº†ç”µå­é‚®ä»¶å®¢æˆ·ç«¯ï¼ˆå¦‚é‚®ä»¶ç¨‹åºï¼‰å’Œé‚®ä»¶æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡è§„åˆ™ï¼Œä»¥ä¾¿å¯é åœ°å°†é‚®ä»¶ä»å‘é€æ–¹ä¼ é€’åˆ°æ¥æ”¶æ–¹ã€‚ SMTP ä½¿ç”¨æŒä¹…è¿æ¥ SMTP è¦æ±‚é‚®ä»¶æ¶ˆæ¯(header &amp; body)å¿…é¡»æ˜¯ 7-bit ASCII SMTP æœåŠ¡å™¨ä½¿ç”¨ CRLF.CRLF æ¥åˆ¤æ–­é‚®ä»¶æ¶ˆæ¯çš„ç»“æŸ ç”¨æˆ·ä»£ç†ä¸å‘é€æœåŠ¡å™¨çš„è¿æ¥ï¼šç”¨æˆ·ä»£ç†ï¼ˆä¾‹å¦‚ç”µå­é‚®ä»¶å®¢æˆ·ç«¯ï¼‰ä½¿ç”¨ SMTP åè®®ä¸å‘é€æœåŠ¡å™¨å»ºç«‹è¿æ¥ã€‚è¿æ¥è¿‡ç¨‹åŒ…æ‹¬èº«ä»½éªŒè¯å’Œåè®®æ¡æ‰‹ç­‰æ­¥éª¤ã€‚ç”¨æˆ·ä»£ç†æäº¤é‚®ä»¶ï¼šç”¨æˆ·ä»£ç†å°†é‚®ä»¶å‘é€åˆ°å‘é€æœåŠ¡å™¨ã€‚é‚®ä»¶çš„å†…å®¹ã€æ”¶ä»¶äººã€å‘ä»¶äººç­‰ä¿¡æ¯è¢«æ‰“åŒ…æˆä¸€ä¸ª SMTP æ¶ˆæ¯ã€‚ å‘é€æœåŠ¡å™¨çš„é‚®ä»¶ä¼ é€’ï¼šå‘é€æœåŠ¡å™¨æ¥æ”¶åˆ°ç”¨æˆ·ä»£ç†æäº¤çš„é‚®ä»¶åï¼Œå¼€å§‹æ ¹æ®æ”¶ä»¶äººçš„ç”µå­é‚®ä»¶åœ°å€ç¡®å®šé‚®ä»¶çš„è·¯ç”±ã€‚å®ƒå¯èƒ½ä¼šé€šè¿‡ DNS æŸ¥æ‰¾ MX è®°å½•æ¥æ‰¾åˆ°ç›®æ ‡é‚®ä»¶æœåŠ¡å™¨ï¼Œå¹¶å°†é‚®ä»¶è½¬å‘ç»™ç›®æ ‡é‚®ä»¶æœåŠ¡å™¨ã€‚ ç›®æ ‡é‚®ä»¶æœåŠ¡å™¨çš„æ¥æ”¶ä¸å­˜å‚¨ï¼šç›®æ ‡é‚®ä»¶æœåŠ¡å™¨æ¥æ”¶åˆ°é‚®ä»¶åå°†å…¶å­˜å‚¨ï¼Œå¹¶ç­‰å¾…ç”¨æˆ·ä»£ç†æˆ–æ¥æ”¶å™¨ä»¥åç»­åè®®ï¼ˆå¦‚ POP3 æˆ– IMAPï¼‰è¯·æ±‚è·å–é‚®ä»¶ã€‚ ç”¨æˆ·ä»£ç†æ”¶å–é‚®ä»¶ï¼šç”¨æˆ·ä»£ç†ä½¿ç”¨ POP3 æˆ– IMAP åè®®ä»æ¥æ”¶æœåŠ¡å™¨ä¸Šä¸‹è½½é‚®ä»¶ï¼Œå¹¶å°†é‚®ä»¶æ˜¾ç¤ºåœ¨ç”¨æˆ·ç•Œé¢ä¸Šä¾›ç”¨æˆ·æŸ¥çœ‹å’Œç®¡ç†ã€‚ SMAP ä¸ HTTP çš„åŒºåˆ« ç‰¹æ€§ SMTP HTTP åè®®ç±»å‹ æ¨åè®® push protocol æ‹‰åè®® pull protocol æ•°æ®ç¼–ç  è¦æ±‚é‡‡ç”¨ 7 æ¯”ç‰¹ ASCII ç æ ¼å¼ ä¸å— 7 æ¯”ç‰¹ ASCII ç é™åˆ¶ æ¶ˆæ¯ä¼ é€’ å‘é€æ–‡ä»¶çš„æœºå™¨å‘èµ· TCP è¿æ¥ æ¥æ”¶æ–‡ä»¶çš„æœºå™¨å‘èµ· TCP è¿æ¥ æŠ¥æ–‡å°è£… æ‰€æœ‰æŠ¥æ–‡å¯¹è±¡æ”¾åœ¨ä¸€ä¸ªæŠ¥æ–‡ä¸­ æ¯ä¸ªå¯¹è±¡å°è£…åœ¨ä¸åŒçš„ HTTP å“åº”æŠ¥æ–‡ä¸­ Mail Message Formatä¸€èˆ¬æ ¼å¼å¦‚ä¸‹ï¼š 123456To:å‘ä»¶äººåœ°å€From:æ”¶ä»¶äººåœ°å€Subject:é‚®ä»¶ä¸»é¢˜...é‚®ä»¶æ­£æ–‡ MIME: Multipurpose Internet mail Extensions å¤šç”¨é€”å› ç‰¹ç½‘é‚®ä»¶æ‰©å±•, RFC 2045, 2046;å¢æ·»é¢å¤–çš„ä¿¡å¤´å¤´éƒ¨å£°æ˜ MIME content-type,å®ç°å¤šåª’ä½“é‚®ä»¶ 1234567891011From: alice@crepes.frTo: bob@hamburger.eduSubject: Picture of yummy crepe.MIME-Version: 1.0Content-Transfer-Encoding: base64Content-Type: image/jpegbase64 encoded data ....................................base64 encoded data Mail Access Protocolsæ”¶ä»¶äººçš„ç”¨æˆ·ä»£ç†ä¸èƒ½ä½¿ç”¨ SMTP å¾—åˆ°æŠ¥æ–‡ï¼Œå› ä¸ºå–å¾—æŠ¥æ–‡æ˜¯ä¸€ä¸ª pull æ“ä½œï¼Œè€Œ SMTP åè®®æ˜¯ä¸€ä¸ª push åè®®ã€‚é€šè¿‡å¼•ç”¨ä¸€ä¸ªç‰¹æ®Šçš„é‚®ä»¶è®¿é—®åè®®æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¯¥åè®®å°†æ”¶ä»¶äººé‚®ä»¶æœåŠ¡å™¨ä¸Šçš„æŠ¥æ–‡ä¼ é€ç»™ä»–çš„æœ¬åœ° SMTP: é€’é€/å­˜å‚¨é‚®ä»¶æ¶ˆæ¯åˆ°æ¥æ”¶è€…é‚®ä»¶æœåŠ¡å™¨ é‚®ä»¶è®¿é—®åè®®: ä»æœåŠ¡å™¨è·å–é‚®ä»¶æ¶ˆæ¯ POP3: Post Office Protocol-Version3 é‚®å±€åè®®[RFC 1939]110 ç«¯å£å·èº«ä»½è®¤è¯ (ä»£ç† &lt;â€“&gt;æœåŠ¡å™¨) å¹¶ ä¸‹è½½é‚®ä»¶æ¶ˆæ¯ IMAP: Internet Message Access Protocol [RFC 3501] 143 ç«¯å£æ›´å¤šåŠŸèƒ½ç‰¹å¾,å…è®¸ç”¨æˆ·åƒå¯¹å¾…æœ¬åœ°é‚®ç®±é‚£æ ·æ“çºµè¿œç¨‹é‚®ç®±çš„é‚®ä»¶ HTTP: Hotmail , Yahoo! Mail, etc. POP3 VS IMAP ç‰¹æ€§ POP3 IMAP é‚®ä»¶å­˜å‚¨ ä¸‹è½½é‚®ä»¶è‡³æœ¬åœ°å®¢æˆ·ç«¯ åœ¨æœåŠ¡å™¨ä¸Šä¿ç•™é‚®ä»¶å‰¯æœ¬ é‚®ä»¶åŒæ­¥ å•è®¾å¤‡ä¸Šçš„é‚®ä»¶åˆ é™¤æ“ä½œä¸ä¼šåŒæ­¥æ›´æ–° å¤šè®¾å¤‡ä¸Šçš„é‚®ä»¶æ“ä½œåŒæ­¥æ›´æ–° é‚®ä»¶ç®¡ç† ä»…æ”¯æŒç®€å•çš„é‚®ä»¶æ”¶å‘æ“ä½œ æ”¯æŒå¤æ‚çš„é‚®ä»¶ç®¡ç†åŠŸèƒ½","link":"/UESTC/ComputerNetworking/Ch6-1ApplicationLayer/"},{"title":"åº”ç”¨å±‚ ApplicationLayer Part â…¡","text":"DNSâ€”â€”The Internetâ€™s Directory ServiceServices Provided by DNSè¯†åˆ«ä¸»æœºçš„ä¸¤ç§æ–¹å¼ï¼šé€šè¿‡hostnameæˆ–è€…IP addressã€‚äººä»¬å–œæ¬¢è®°å¿†ä¸»æœºåæ ‡è¯†æ–¹å¼ï¼Œè€Œè·¯ç”±å™¨å–œæ¬¢å®šé•¿çš„ã€æœ‰ç€å±‚æ¬¡ç»“æ„çš„ IP åœ°å€ã€‚DNS æä¾›äº†ä¸€ç§å°†ä¸»æœºåè½¬æ¢ä¸º IP åœ°å€çš„æœåŠ¡ã€‚ DNS(Domain Name System),åŸŸåç³»ç»Ÿ åˆ†å¸ƒå¼æ•°æ®åº“ï¼šä¸€ä¸ªç”±åˆ†å±‚ DNS æœåŠ¡å™¨å®ç°çš„åˆ†å¸ƒå¼æ•°æ®åº“ åº”ç”¨å±‚åè®®ï¼šDNS æœåŠ¡å™¨å®ç°åŸŸåè½¬æ¢,åŸŸå/åœ°å€è½¬æ¢;DNS åè®®è¿è¡Œåœ¨ UDPä¹‹ä¸‹ï¼Œä½¿ç”¨ 53å·ç«¯å£ï¼› DNS æœåŠ¡å™¨æä¾›çš„åŠŸèƒ½ ä¸»æœºååˆ° IP åœ°å€çš„è½¬æ¢ï¼ˆhostname to IP address translationï¼‰ï¼› ä¸»æœºåˆ«åï¼ˆhost aliasingï¼‰ï¼šä¸€ä¸ªä¸»æœºå¯ä»¥æœ‰ä¸€ä¸ªè§„èŒƒä¸»æœºåå’Œå¤šä¸ªä¸»æœºåˆ«å,åº”ç”¨ç¨‹åºè°ƒç”¨ DNS è·å–ä¸»æœºåˆ«åå¯¹åº”çš„è§„èŒƒä¸»æœºåï¼ˆcanonical hostnameï¼‰ä»¥åŠä¸»æœºçš„ IP åœ°å€ï¼› é‚®ä»¶æœåŠ¡å™¨åˆ«åï¼ˆmail server aliasingï¼‰ï¼› è´Ÿè½½åˆ†é…ï¼ˆload distributionï¼‰ï¼šç¹å¿™çš„ç«™ç‚¹è¢«å†—ä½™åˆ†å¸ƒåœ¨å¤šå°æœåŠ¡å™¨ä¸Šï¼Œæ¯å°æœåŠ¡å™¨è¿è¡Œåœ¨ä¸åŒçš„ç«¯ç³»ç»Ÿä¸Šï¼Œæ¯ä¸ªéƒ½æœ‰ç€ä¸åŒçš„ IP åœ°å€ã€‚ç”±äºè¿™äº›å†—ä½™çš„ Web æœåŠ¡å™¨ï¼Œä¸€ä¸ª IP åœ°å€é›†åˆå¯¹åº”ä¸€ä¸ªè§„èŒƒä¸»æœºåã€‚å½“å®¢æˆ·å¯¹æ˜ å°„åˆ°æŸå¤„åˆ°æŸåœ°å€é›†åˆçš„åå­—å‘å‡ºä¸€ä¸ª DNS è¯·æ±‚æ—¶ï¼Œè¯¥æœåŠ¡å™¨ç”¨ IP åœ°å€çš„æ•´ä¸ªé›†åˆè¿›è¡Œå“åº”ï¼Œä½†åœ¨æ¯ä¸ªå›ç­”ä¸­å¾ªç¯è¿™äº›åœ°å€æ¬¡åºã€‚å› ä¸ºå®¢æˆ·é€šå¸¸æ€»æ˜¯å‘ IP åœ°å€æ’åœ¨æœ€å‰é¢çš„æœåŠ¡å™¨å‘é€ HTTP è¯·æ±‚æŠ¥æ–‡ï¼Œæ‰€ä»¥ DNS å°±åœ¨æ‰€æœ‰è¿™äº›å†—ä½™çš„ Web æœåŠ¡å™¨ä¹‹é—´å¾ªç¯åˆ†é…äº†è´Ÿè½½ï¼› Overview of How DNS Worksé›†ä¸­å¼è®¾è®¡çš„é—®é¢˜ å•ç‚¹æ•…éšœï¼ˆa single point of failureï¼‰ï¼› é€šä¿¡å®¹é‡ï¼ˆtraffic volumeï¼‰ï¼› è¿œè·ç¦»çš„é›†ä¸­å¼æ•°æ®åº“ï¼ˆdistant centralized databaseï¼‰ï¼› ç»´æŠ¤ï¼ˆmaintenanceï¼‰ï¼› åˆ†å¸ƒå¼ DNS æœåŠ¡å™¨çš„å±‚æ¬¡ç»“æ„ Root DNS servers:è´Ÿè´£è®°å½•é¡¶çº§åŸŸåæœåŠ¡å™¨çš„ä¿¡æ¯ Top-Level Domain DNS servers:è´Ÿè´£é¡¶çº§åŸŸå com, org, net, edu, etc, å’Œæ‰€æœ‰å›½å®¶çš„é¡¶çº§åŸŸå uk, fr, ca, jp. Authoritative DNS servers:åœ¨å› ç‰¹ç½‘ä¸Šå…·æœ‰å…¬å…±å¯è®¿é—®ä¸»æœºï¼ˆå¦‚ Web æœåŠ¡å™¨å’Œé‚®ä»¶æœåŠ¡å™¨ï¼‰çš„æ¯ä¸ªç»„ç»‡æœºæ„å¿…é¡»æä¾›å…¬å…±å¯è®¿é—®çš„ DNS è®°å½•ï¼Œè¿™äº›è®°å½•å°†è¿™äº›ä¸»æœºçš„åå­—æ˜ å°„ä¸º IP åœ°å€ã€‚ç»„ç»‡æœºæ„çš„æƒå¨ DNS æœåŠ¡å™¨è´Ÿè´£ä¿å­˜è¿™äº› DNS è®°å½•ã€‚ Local DNS servers:ä¸¥æ ¼æ¥è¯´ä¸å±äºè¯¥æœåŠ¡å™¨çš„å±‚æ¬¡ç»“æ„,æ¯ä¸ª ISPï¼ˆå¦‚å±…æ°‘åŒº ISPã€å…¬å¸ã€å¤§å­¦ï¼‰éƒ½æœ‰ä¸€ä¸ªæœ¬åœ° DNS,ä¹Ÿå«é»˜è®¤æœåŠ¡å™¨,å½“ä¸»æœºå‘å‡º DNS è¯·æ±‚æ—¶ï¼Œè¯¥è¯·æ±‚è¢«å‘å¾€æœ¬åœ° DNS æœåŠ¡å™¨,å®ƒèµ·ç€ä»£ç†çš„ä½œç”¨ï¼Œè½¬å‘è¯·æ±‚åˆ°å±‚æ¬¡ç»“æ„ä¸­ã€‚ PS:ä½ å¯ä»¥é€šè¿‡ipconfig /allå‘½ä»¤æŸ¥çœ‹æœ¬åœ° DNS æœåŠ¡å™¨çš„åœ°å€ã€‚ 123456789101112131415Wireless LAN adapter WLAN:Connection-specific DNS Suffix . :Description . . . . . . . . . . . : Intel(R) Wi-Fi 6 AX200 160MHzPhysical Address. . . . . . . . . : 48-51-C5-27-0C-9FDHCP Enabled. . . . . . . . . . . : YesAutoconfiguration Enabled . . . . : YesIPv4 Address. . . . . . . . . . . : 113.54.231.1(Preferred)Subnet Mask . . . . . . . . . . . : 255.255.224.0Lease Obtained. . . . . . . . . . : Thursday, March 28, 2024 12:25:52 PMLease Expires . . . . . . . . . . : Thursday, March 28, 2024 3:16:27 PMDefault Gateway . . . . . . . . . : 113.54.224.1DHCP Server . . . . . . . . . . . : 113.54.224.1DNS Servers . . . . . . . . . . . : 202.112.14.21202.112.14.11NetBIOS over Tcpip. . . . . . . . : Enabled DNS æŸ¥è¯¢æ–¹æ³•é€’å½’ Recursive Queryï¼šå®¢æˆ·ç«¯åªå‘ä¸€æ¬¡è¯·æ±‚ï¼Œè¦æ±‚å¯¹æ–¹ç»™å‡ºæœ€ç»ˆç»“æœã€‚è¿­ä»£ Iterated Quertï¼šå®¢æˆ·ç«¯å‘å‡ºä¸€æ¬¡è¯·æ±‚ï¼Œå¯¹æ–¹å¦‚æœæ²¡æœ‰æˆæƒå›ç­”ï¼Œå®ƒå°±ä¼šè¿”å›ä¸€ä¸ªèƒ½è§£ç­”è¿™ä¸ªæŸ¥è¯¢çš„å…¶å®ƒåç§°æœåŠ¡å™¨åˆ—è¡¨ DNS ç¼“å­˜ ä¸€æ—¦åå­—æœåŠ¡å™¨è·å¾— DNS æ˜ å°„, å®ƒå°†ç¼“å­˜è¯¥æ˜ å°„åˆ°å±€éƒ¨å†…å­˜ æœåŠ¡å™¨åœ¨ä¸€å®šæ—¶é—´åå°†ä¸¢å¼ƒç¼“å­˜çš„ä¿¡æ¯ æœ¬åœ° DNS æœåŠ¡å™¨å¯ä»¥ç¼“å­˜ TLD æœåŠ¡å™¨çš„ IP åœ°å€ å› æ­¤æ ¹ DNS æœåŠ¡å™¨ä¸ä¼šè¢«ç»å¸¸è®¿é—® æƒå¨ DNS æœåŠ¡å™¨è®°å½•æ›´æ–°ï¼šIETF åŠ¨æ€æ›´æ–°/é€šæŠ¥æœºåˆ¶ DNS Records and MessagesDNS Resource RecordsDNS æœåŠ¡å™¨ä¸­å­˜å‚¨äº†å¤§é‡çš„èµ„æºè®°å½•â€”â€”Resource Record(RR),RR æ˜¯ä¸€ä¸ªåŒ…å«äº†ä¸‹åˆ—å­—æ®µçš„ 4 å…ƒç»„(name, value, type, ttl) DNS Messages Identification æ ‡è¯†ç¬¦: 16 ä½ï¼ŒæŸ¥è¯¢å’Œåº”ç­”æŠ¥æ–‡ä½¿ç”¨ç›¸åŒçš„æ ‡è¯†ç¬¦ Flags æ ‡å¿—:æœ‰è‹¥å¹²ä¸ªæ ‡å¿—æ„æˆï¼Œåˆ†åˆ«æ ‡è¯†ä¸åŒçš„åŠŸèƒ½ æŸ¥è¯¢/åº”ç­”ï¼0/ 1 æŸ¥è¯¢å¸Œæœ›æ˜¯/éé€’å½’æŸ¥è¯¢ï¼1/0 åº”ç­”å¯/å¦è·å¾—(æ”¯æŒ)é€’å½’æŸ¥è¯¢ï¼1/0 åº”ç­”æ˜¯/å¦æ¥è‡ªæƒå¨åå­—æœåŠ¡å™¨ï¼1/ 0 Questions é—®é¢˜éƒ¨åˆ†:æŸ¥è¯¢çš„ Name, type Answers å›ç­”éƒ¨åˆ†:å¯¹äºæŸ¥è¯¢,åº”ç­”çš„èµ„æºè®°å½•å¯ä»¥å¤šä¸ªèµ„æºè®°å½•ï¼Œç”±äºå¯ä»¥æœ‰å¤šä¸ª IP åœ°å€ Authority æƒå¨éƒ¨åˆ†:åŸŸå¯¹åº”çš„æƒå¨åå­—æœåŠ¡å™¨çš„ä¿¡æ¯ Additional information é™„åŠ ä¿¡æ¯éƒ¨åˆ†:æƒå¨åå­—æœåŠ¡å™¨çš„ IP åœ°å€ç­‰å…¶ä»–æœ‰å¸®åŠ©çš„è®°å½•. 1234567891011121314151617181920212223import dns.messageimport dns.query# åˆ›å»ºä¸€ä¸ª DNS æŸ¥è¯¢æŠ¥æ–‡å¯¹è±¡query = dns.message.make_query(&quot;baidu.com&quot;, dns.rdatatype.ANY)# å‘é€ DNS æŸ¥è¯¢å¹¶æ¥æ”¶å“åº”æŠ¥æ–‡,è®¾ç½®DNSæœåŠ¡å™¨çš„IPåœ°å€ä¸º202.112.14.21response = dns.query.tcp(query, &quot;202.112.14.21&quot;)# æ‰“å°è¾“å‡ºæŠ¥æ–‡çš„ä¿¡æ¯print(f&quot;Identification: {response.id}&quot;)print(f&quot;Flags: {response.flags}&quot;)print(f&quot;Questions: {response.question}&quot;)print(f&quot;Answers: {response.answer}&quot;)print(f&quot;Authority: {response.authority}&quot;)print(f&quot;Additional information: {response.additional}&quot;)[OUTPUT]Identification: 41532Flags: 33152Questions: [&lt;DNS baidu.com. IN ANY RRset: []&gt;]Answers: [&lt;DNS baidu.com. IN A RRset: [&lt;110.242.68.66&gt;, &lt;39.156.66.10&gt;]&gt;, &lt;DNS baidu.com. IN NS RRset: [&lt;ns7.baidu.com.&gt;, &lt;ns2.baidu.com.&gt;, &lt;dns.baidu.com.&gt;, &lt;ns3.baidu.com.&gt;, &lt;ns4.baidu.com.&gt;]&gt;]Authority: []Additional information: [&lt;DNS dns.baidu.com. IN A RRset: [&lt;110.242.68.134&gt;]&gt;, &lt;DNS ns2.baidu.com. IN A RRset: [&lt;220.181.33.31&gt;]&gt;, &lt;DNS ns3.baidu.com. IN A RRset: [&lt;153.3.238.93&gt;, &lt;36.155.132.78&gt;]&gt;, &lt;DNS ns4.baidu.com. IN A RRset: [&lt;111.45.3.226&gt;, &lt;14.215.178.80&gt;]&gt;, &lt;DNS ns7.baidu.com. IN A RRset: [&lt;180.76.76.92&gt;]&gt;, &lt;DNS ns7.baidu.com. IN AAAA RRset: [&lt;240e:bf:b801:1002:0:ff:b024:26de&gt;, &lt;240e:940:603:4:0:ff:b01b:589a&gt;]&gt;] Peer-to-Peer File Distribution æ²¡æœ‰æ€»æ˜¯åœ¨çº¿çš„æœåŠ¡å™¨ ä»»æ„ç«¯ç³»ç»Ÿä¹‹é—´ç›´æ¥é€šä¿¡ å¯¹ç­‰æ–¹ä¹‹é—´å¯ä»¥é—´æ–­è¿æ¥å¹¶å¯ä»¥æ”¹å˜ IP åœ°å€ BitTorrentBitTorrent æ˜¯ä¸€ç§ç”¨äºé«˜æ•ˆåˆ†å‘æ–‡ä»¶çš„åè®®å’ŒæŠ€æœ¯ã€‚å®ƒæ˜¯ä¸€ç§ç‚¹å¯¹ç‚¹ï¼ˆP2Pï¼‰æ–‡ä»¶å…±äº«åè®®ï¼Œå…è®¸ç”¨æˆ·åœ¨äº’è”ç½‘ä¸Šåˆ†äº«å’Œä¸‹è½½æ–‡ä»¶ã€‚ ç›¸æ¯”äºä¼ ç»Ÿçš„æ–‡ä»¶ä¸‹è½½æ–¹å¼ï¼ŒBitTorrent é‡‡ç”¨äº†ä¸€ç§åˆ†å¸ƒå¼çš„ä¸‹è½½æ¨¡å¼ï¼Œä½¿å¾—æ–‡ä»¶å¯ä»¥åŒæ—¶ä»å¤šä¸ªæ¥æºä¸‹è½½ï¼Œä»è€Œæé«˜äº†ä¸‹è½½é€Ÿåº¦å’Œå¯é æ€§ã€‚BitTorrent åè®®çš„æ ¸å¿ƒæ€æƒ³æ˜¯è®©ä¸‹è½½è€…åŒæ—¶å……å½“ä¸Šä¼ è€…ï¼Œå³å°†ä¸‹è½½å¥½çš„æ–‡ä»¶å—åˆ†äº«ç»™å…¶ä»–ä¸‹è½½è€…ï¼Œä»è€Œå®ç°æ–‡ä»¶çš„é«˜æ•ˆä¼ è¾“ã€‚ ä»¥ä¸‹æ˜¯ BitTorrent çš„å·¥ä½œåŸç†ï¼š ç§å­æ–‡ä»¶ï¼ˆTorrent Fileï¼‰çš„åˆ›å»ºå’Œåˆ†äº«ï¼šå¯¹äºè¦è¢«å…±äº«çš„æ–‡ä»¶ï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªç§å­æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åŒ…å«äº†æ–‡ä»¶çš„å…ƒæ•°æ®å’Œè·Ÿè¸ªå™¨ï¼ˆTrackerï¼‰çš„ä¿¡æ¯ã€‚è·Ÿè¸ªå™¨æ˜¯åè°ƒä¸‹è½½è€…ä¹‹é—´è¿æ¥çš„æœåŠ¡å™¨ï¼Œå¸®åŠ©ä¸‹è½½è€…æ‰¾åˆ°å…¶ä»–å‚ä¸æ–‡ä»¶å…±äº«çš„äººã€‚è¿™ä¸ªç§å­æ–‡ä»¶è¢«åˆ†äº«ç»™å…¶ä»–ç”¨æˆ·ã€‚ Peers çš„è¿æ¥å’Œæ•°æ®äº¤æ¢ï¼šä¸‹è½½è€…ï¼ˆä¹Ÿç§°ä¸º Peerï¼‰é€šè¿‡ BitTorrent å®¢æˆ·ç«¯è¿æ¥åˆ°è·Ÿè¸ªå™¨ï¼Œå¹¶è·å–å‚ä¸å…±äº«æ–‡ä»¶çš„å…¶ä»– Peer çš„ä¿¡æ¯ã€‚ç„¶åï¼Œä¸‹è½½è€…ä¸è¿™äº› Peer å»ºç«‹è¿æ¥ï¼Œå¼€å§‹äº¤æ¢æ–‡ä»¶å—ã€‚ä¸‹è½½è€…ä¸ä»…ä»ä¸Šä¼ è€…ä¸‹è½½æ–‡ä»¶å—ï¼Œä¹ŸåŒæ—¶å°†è‡ªå·±å·²ç»ä¸‹è½½å¥½çš„æ–‡ä»¶å—åˆ†äº«ç»™å…¶ä»–ä¸‹è½½è€…ã€‚ åˆ†å—ä¸‹è½½å’Œæ ¡éªŒï¼šæ–‡ä»¶è¢«åˆ†æˆå°å—ï¼ˆé€šå¸¸ä¸º 256KB æˆ– 512KBï¼‰ï¼Œä¸‹è½½è€…é€šè¿‡ä¸å…¶ä»– Peer äº¤æ¢æ–‡ä»¶å—æ¥é€æ­¥ä¸‹è½½æ–‡ä»¶ã€‚æ¯ä¸ªæ–‡ä»¶å—éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œä»¥ä¾¿ä¸‹è½½è€…ä¹‹é—´è¿›è¡Œæ­£ç¡®çš„æ•°æ®äº¤æ¢ã€‚ä¸‹è½½è€…è¿˜ä¼šè¿›è¡Œæ ¡éªŒï¼Œç¡®ä¿ä¸‹è½½çš„æ–‡ä»¶å—çš„å®Œæ•´æ€§å’Œå‡†ç¡®æ€§ã€‚ åšç§ï¼ˆSeedingï¼‰ï¼šå½“ä¸‹è½½è€…å®Œå…¨è·å¾—æ•´ä¸ªæ–‡ä»¶åï¼Œä»–ä»¬å¯ä»¥é€‰æ‹©ç»§ç»­å°†æ–‡ä»¶ä¿æŒåœ¨ BitTorrent ç½‘ç»œä¸­ä½œä¸ºç§å­ç»§ç»­åˆ†äº«ç»™å…¶ä»–ä¸‹è½½è€…ï¼Œè¿™ç§°ä¸ºåšç§ã€‚é€šè¿‡åšç§ï¼Œæ›´å¤šçš„ç”¨æˆ·å¯ä»¥ä»ä»–ä»¬é‚£é‡Œä¸‹è½½æ–‡ä»¶ï¼Œä»è€Œä¿ƒè¿›æ•´ä¸ªç½‘ç»œçš„ç¨³å®šæ€§å’Œå¯æ‰©å±•æ€§ã€‚ Video Streaming and Content Distribution NetworksHTTP Streaming And DASHHTTP æµæ‰€æœ‰å®¢æˆ·æ¥å—åˆ°ç›¸åŒç¼–ç çš„è§†é¢‘ï¼Œä½†å¯¹ä¸åŒç”¨æˆ·æˆ–è€…ä¸åŒæ—¶é—´ï¼Œå®¢æˆ·å¯ç”¨çš„å¸¦å®½å¤§å°æœ‰å¾ˆå¤§ä¸åŒã€‚HTTP çš„åŠ¨æ€é€‚åº”æ€§æµï¼ˆDynamic Adaptive Streaming over HTTPï¼ŒDASHï¼‰ï¼šè§†é¢‘ç¼–ç æˆå‡ ä¸ªä¸åŒçš„ç‰ˆæœ¬ï¼Œå…¶ä¸­æ¯ä¸ªç‰ˆæœ¬å…·æœ‰ä¸åŒçš„æ¯”ç‰¹ç‡ï¼Œå¯¹åº”äºä¸åŒçš„è´¨é‡æ°´å¹³ã€‚å®¢æˆ·åŠ¨æ€åœ°è¯·æ±‚æ¥è‡ªä¸åŒç‰ˆæœ¬ä¸”é•¿åº¦ä¸ºå‡ ç§’çš„è§†é¢‘æ®µæ•°æ®å—ã€‚ æ¯ä¸ªè§†é¢‘ç‰ˆæœ¬å­˜å‚¨åœ¨ HTTP æœåŠ¡å™¨ä¸­ï¼Œæ¯ä¸ªç‰ˆæœ¬éƒ½æœ‰ä¸€ä¸ªä¸åŒçš„ URLã€‚HTTP æœåŠ¡å™¨ä¹Ÿæœ‰ä¸€ä¸ªå‘Šç¤ºæ–‡ä»¶ï¼ˆmanifest fileï¼‰ï¼Œä¸ºæ¯ä¸ªç‰ˆæœ¬æä¾›äº†ä¸€ä¸ª URL åŠå…¶æ¯”ç‰¹ç‡ã€‚ Content Distribution Networkså¦‚ä½•ä»æµ·é‡çš„è§†é¢‘ä¸­ï¼ŒæŒ‘é€‰å‡ºæŸäº›å†…å®¹ï¼Œé‡‡ç”¨æµçš„æ–¹å¼å‘é€ç»™æˆåƒä¸Šä¸‡çš„ç”¨æˆ·?CDN ä½¿ç”¨å¤šå°åˆ†å¸ƒåœ¨å…¨çƒå„åœ°çš„æœåŠ¡å™¨ï¼ˆè¿™äº›æœåŠ¡å™¨è¢«ç§°ä¸ºè¾¹ç¼˜èŠ‚ç‚¹ï¼‰ï¼Œè¿™äº›æœåŠ¡å™¨å­˜å‚¨äº†ç½‘ç«™ä¸­å†…å®¹çš„å‰¯æœ¬ã€‚å½“ç”¨æˆ·è¯·æ±‚è®¿é—®ç½‘ç«™æ—¶ï¼ŒCDN ä¼šæ ¹æ®ç”¨æˆ·çš„åœ°ç†ä½ç½®ï¼Œé€‰æ‹©è·ç¦»ç”¨æˆ·æœ€è¿‘çš„è¾¹ç¼˜èŠ‚ç‚¹æ¥å“åº”è¯·æ±‚ã€‚ Private CDN ç§æœ‰ CDN æ˜¯ç”±å•ä¸ªç»„ç»‡æˆ–ä¼ä¸šè‡ªå·±å»ºç«‹å’Œç®¡ç†çš„å†…å®¹åˆ†å‘ç½‘ç»œã€‚å®ƒé€šå¸¸ç”±è¯¥ç»„ç»‡æˆ–ä¼ä¸šåœ¨è‡ªå·±çš„æ•°æ®ä¸­å¿ƒæˆ–äº‘ç¯å¢ƒä¸­æ¶è®¾æœåŠ¡å™¨èŠ‚ç‚¹ï¼Œç”¨äºå­˜å‚¨å’Œåˆ†å‘è‡ªå·±çš„å†…å®¹ã€‚ç§æœ‰ CDN çš„ä¼˜åŠ¿åœ¨äºå¯¹å†…å®¹çš„æ§åˆ¶æƒå’Œå®‰å…¨æ€§æ›´é«˜ã€‚ Third-party CDN ç¬¬ä¸‰æ–¹ CDN æ˜¯ç”±ä¸“ä¸šçš„ CDN æä¾›å•†è¿è¥å’Œç®¡ç†çš„ç½‘ç»œåŸºç¡€è®¾æ–½ã€‚è¿™äº›æä¾›å•†æ‹¥æœ‰å…¨çƒåˆ†å¸ƒçš„æœåŠ¡å™¨èŠ‚ç‚¹ï¼Œå¹¶ä¸ºå„ç§ç½‘ç«™å’Œåº”ç”¨æä¾›å†…å®¹åˆ†å‘æœåŠ¡ã€‚ç¬¬ä¸‰æ–¹ CDN é€šè¿‡åœ¨å…¨çƒå„åœ°éƒ¨ç½²æœåŠ¡å™¨èŠ‚ç‚¹ï¼Œå°†ç«™ç‚¹æˆ–åº”ç”¨çš„é™æ€å’ŒåŠ¨æ€å†…å®¹ç¼“å­˜åˆ°ç¦»ç”¨æˆ·è¿‘çš„èŠ‚ç‚¹ï¼Œå¹¶é€šè¿‡æ™ºèƒ½è·¯ç”±å’Œè´Ÿè½½å‡è¡¡ï¼Œå°†ç”¨æˆ·çš„è¯·æ±‚å¼•å¯¼åˆ°æœ€è¿‘çš„èŠ‚ç‚¹ã€‚ CDN Operation: When a browser in a userâ€™s host is instructed to retrieve a specific video (identified by a URL), the CDN must intercept(æˆªè·) the request so that it can Determine a suitable CDN server cluster(é›†ç¾¤) for thatclient at that time Redirect the clientâ€™s request to a server in that cluster. è®¸å¤š CDN åˆ©ç”¨ DNS æˆªè·ç”¨æˆ·è¯·æ±‚å¹¶å°†ç”¨æˆ·é‡å®šå‘åˆ°æœ€è¿‘çš„ CDN æœåŠ¡å™¨ã€‚ å¦‚ä¸‹æ˜¯ä¸€ä¸ªç”¨æˆ·è®¿é—® NetCinema ç½‘é¡µä¸­è§†é¢‘çš„è¿‡ç¨‹ï¼š ç”¨æˆ·è®¿é—® NetCinema çš„ç½‘é¡µã€‚ å½“ç”¨æˆ·ç‚¹å‡»é“¾æ¥http://video.netcinema.com/6Y7B23Væ—¶ï¼Œç”¨æˆ·çš„ä¸»æœºä¼šå‘é€ä¸€ä¸ªå¯»æ‰¾video.netcinema.comçš„ DNS æŸ¥è¯¢ã€‚ ç”¨æˆ·çš„æœ¬åœ° DNS æœåŠ¡å™¨ï¼ˆLDNSï¼‰å°† DNS æŸ¥è¯¢è½¬å‘åˆ° NetCinema çš„æƒå¨ DNS æœåŠ¡å™¨ï¼Œè¯¥æœåŠ¡å™¨æ³¨æ„åˆ°ä¸»æœºåvideo.netcinema.comä¸­çš„å­—ç¬¦ä¸² videoã€‚ä¸ºäº†å°† DNS æŸ¥è¯¢äº¤ç»™ KingCDNï¼ŒNetCinema çš„æƒå¨ DNS æœåŠ¡å™¨ä¸è¿”å› IP åœ°å€ï¼Œè€Œæ˜¯è¿”å› KingCDN åŸŸä¸­çš„ä¸»æœºåï¼Œä¾‹å¦‚a1105.kingcdn.com DNS æŸ¥è¯¢è¿›å…¥ KingCDN çš„ç§æœ‰ DNS åŸºç¡€è®¾æ–½;ç”¨æˆ·çš„ LDNS ç„¶åå‘é€æŸ¥è¯¢a1105.kingcdn.comçš„è¯·æ±‚;KingCDN çš„ DNS ç³»ç»ŸæŒ‡å®šåˆé€‚çš„ KingCDN å†…å®¹æœåŠ¡å™¨,å°†å…¶ IP åœ°å€è¿”å›ç»™ LDNSã€‚ LDNS å°†æä¾›å†…å®¹çš„ CDN èŠ‚ç‚¹çš„ IP åœ°å€è½¬å‘ç»™ç”¨æˆ·çš„ä¸»æœºã€‚ ä¸€æ—¦å®¢æˆ·ç«¯æ”¶åˆ° KingCDN å†…å®¹æœåŠ¡å™¨çš„ IP åœ°å€ï¼Œå®ƒå°±ä¼šä¸è¯¥ IP åœ°å€çš„æœåŠ¡å™¨å»ºç«‹ TCP è¿æ¥ï¼Œå¹¶å‘å‡ºä¸€ä¸ª HTTP GET è¯·æ±‚è·å–è§†é¢‘ã€‚å¦‚æœä½¿ç”¨ DASHï¼ŒæœåŠ¡å™¨ä¼šé¦–å…ˆå‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªæ¸…å•æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ª URL åˆ—è¡¨ï¼Œæ¯ä¸ªç‰ˆæœ¬çš„è§†é¢‘å¯¹åº”ä¸€ä¸ª URLï¼Œå®¢æˆ·ç«¯ä¼šåŠ¨æ€åœ°ä»ä¸åŒçš„ç‰ˆæœ¬ä¸­é€‰æ‹©å—ã€‚ Socket Programming: Creating Network Applications","link":"/UESTC/ComputerNetworking/Ch6-2ApplicationLayer/"},{"title":"è¿è¾“å±‚ TransportLayer Part â…¡","text":"Connection-Oriented Transport: TCPTCP Connection é¢å‘è¿æ¥ connection-orientedï¼šç›¸äº’å‘é€é¢„å¤‡æŠ¥æ–‡æ®µï¼Œä»¥å»ºç«‹ç¡®ä¿æ•°æ®ä¼ è¾“çš„å‚æ•°ï¼› å…¨åŒå·¥æœåŠ¡ full-duplex serviceï¼šå¦‚æœä¸€å°ä¸»æœºä¸Šçš„è¿›ç¨‹ A ä¸å¦ä¸€å°ä¸»æœºä¸Šçš„è¿›ç¨‹ B å­˜åœ¨ä¸€æ¡ TCP è¿æ¥ï¼Œé‚£ä¹ˆåº”ç”¨å±‚æ•°æ®å°±å¯ä»¥åœ¨ä»è¿›ç¨‹ B æµå‘è¿›ç¨‹ A çš„åŒæ—¶ï¼Œä¹Ÿä»è¿›ç¨‹ A æµå‘è¿›ç¨‹ Bï¼› ç‚¹å¯¹ç‚¹ point-to-pointï¼šå³åœ¨å•ä¸ªå‘é€æ–¹ä¸å•ä¸ªæ¥æ”¶æ–¹ä¹‹é—´çš„è¿æ¥ï¼› ä¸‰æ¬¡æ¡æ‰‹ three-way handshakeï¼šå®¢æˆ·å…ˆå‘é€ä¸€ä¸ªç‰¹æ®Š TCP æŠ¥æ–‡æ®µï¼ŒæœåŠ¡å™¨ç”¨å¦ä¸€ä¸ªç‰¹æ®Šçš„ TCP æŠ¥æ–‡æ®µæ¥å“åº”ï¼Œæœ€åå®¢æˆ·å†ç”¨ç¬¬ä¸‰ä¸ªç‰¹æ®ŠæŠ¥æ–‡æ®µä½œä¸ºå“åº”ã€‚ æµé‡æ§åˆ¶ Traffic controlï¼šTCP é€šè¿‡æµé‡æ§åˆ¶æœºåˆ¶æ¥ç¡®ä¿å‘é€æ–¹ä¸ä¼šæ·¹æ²¡æ¥æ”¶æ–¹ï¼› å®¢æˆ·è¿›ç¨‹é€šè¿‡å¥—æ¥å­—ï¼ŒTCP ä¼šå°†è¦å‘é€çš„æ•°æ®å¼•å¯¼åˆ°è¯¥è¿æ¥çš„å‘é€ç¼“å­˜ï¼ˆsend bufferï¼‰ï¼Œå‘é€ç¼“å­˜æ˜¯å‘èµ·ä¸‰æ¬¡æ¡æ‰‹æœŸé—´è®¾ç½®çš„ç¼“å­˜ä¹‹ä¸€ï¼ŒTCP å‘é€ç¼“å­˜ä¸æ¥æ”¶ç¼“å­˜å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š TCP Segment Structure æºç«¯å£å’Œç›®çš„ç«¯å£å­—æ®µ Source Port Dest Port: å„å  2 å­—èŠ‚ã€‚ç«¯å£æ˜¯è¿è¾“å±‚ä¸åº”ç”¨å±‚çš„æœåŠ¡æ¥å£ã€‚è¿è¾“å±‚çš„å¤ç”¨å’Œåˆ†ç”¨åŠŸèƒ½éƒ½è¦é€šè¿‡ç«¯å£æ‰èƒ½å®ç° åºå·å­—æ®µ Sequence number: å  4 å­—èŠ‚ã€‚TCP è¿æ¥ä¸­ä¼ é€çš„æ•°æ®æµä¸­çš„æ¯ä¸€ä¸ªå­—èŠ‚éƒ½ç¼–ä¸Šä¸€ä¸ªåºå·ã€‚åºå·å­—æ®µçš„å€¼åˆ™æŒ‡çš„æ˜¯æœ¬æŠ¥æ–‡æ®µæ‰€å‘é€çš„æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå· ç¡®è®¤å·å­—æ®µ Acknowledge number: å  4 å­—èŠ‚ï¼Œæ˜¯æœŸæœ›æ”¶åˆ°å¯¹æ–¹çš„ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå· æ•°æ®åç§»(é¦–éƒ¨é•¿åº¦) header length å  4 ä½ï¼Œå®ƒæŒ‡å‡º TCP æŠ¥æ–‡æ®µçš„æ•°æ®èµ·å§‹å¤„è·ç¦» TCP æŠ¥æ–‡æ®µçš„èµ·å§‹å¤„æœ‰å¤šè¿œã€‚â€œæ•°æ®åç§»â€çš„å•ä½æ˜¯ 32 ä½å­—ï¼ˆä»¥ 4 å­—èŠ‚ä¸ºè®¡ç®—å•ä½ï¼‰ ä¿ç•™å­—æ®µ Unused: å  8 ä½ï¼Œä¿ç•™ä¸ºä»Šåä½¿ç”¨ï¼Œä½†ç›®å‰åº”ç½®ä¸º 0 æ ‡è¯†å­—æ®µ flag field å  6bit URG (Urgent Pointer field significant)ï¼šå½“è®¾ç½®ä¸º 1 æ—¶ï¼Œè¡¨ç¤ºç´§æ€¥æŒ‡é’ˆå­—æ®µæœ‰æ„ä¹‰ï¼Œå³ TCP æŠ¥æ–‡æ®µä¸­å­˜åœ¨ç´§æ€¥æ•°æ®ï¼Œéœ€è¦ä¼˜å…ˆä¼ é€ã€‚ ACK (Acknowledgement field significant)ï¼šå½“è®¾ç½®ä¸º 1 æ—¶ï¼Œè¡¨ç¤ºç¡®è®¤å·å­—æ®µæœ‰æ•ˆã€‚TCP ä½¿ç”¨ ACK æ ‡å¿—å’Œç¡®è®¤å·å­—æ®µæ¥å®ç°å¯é ä¼ è¾“ï¼Œç¡®è®¤å¯¹æ–¹å‘é€çš„æ•°æ®å·²ç»æˆåŠŸæ¥æ”¶ã€‚ PSH (Push Function)ï¼šå½“è®¾ç½®ä¸º 1 æ—¶ï¼Œè¡¨ç¤ºæ¥æ”¶æ–¹åº”ç«‹å³å°†è¿™ä¸ªæŠ¥æ–‡æ®µäº¤ç»™åº”ç”¨å±‚ï¼Œè€Œä¸æ˜¯ç­‰å¾…ç¼“å†²åŒºæ»¡åå†äº¤ä»˜ã€‚ RST (Reset the connection)ï¼šå½“è®¾ç½®ä¸º 1 æ—¶ï¼Œè¡¨ç¤ºè¿æ¥å‡ºç°ä¸¥é‡é—®é¢˜ï¼Œéœ€è¦ç«‹å³é‡ç½®ï¼Œå³ç»ˆæ­¢å½“å‰è¿æ¥ã€‚ SYN (Synchronize sequence numbers)ï¼šåœ¨å»ºç«‹è¿æ¥æ—¶ä½¿ç”¨ã€‚å½“ SYN æ ‡å¿—è®¾ç½®ä¸º 1ï¼Œè€Œ ACK æ ‡å¿—ä¸º 0 æ—¶ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µã€‚å¦‚æœ SYN å’Œ ACK éƒ½ä¸º 1ï¼Œè¡¨ç¤ºå¯¹æ–¹å·²ç¡®è®¤è¿æ¥è¯·æ±‚ï¼Œæ­¤æ—¶è¿æ¥å»ºç«‹ã€‚ FIN (Finish,No more data from sender)ï¼šå½“è®¾ç½®ä¸º 1 æ—¶ï¼Œè¡¨ç¤ºæ­¤æ–¹å·²ç»æ²¡æœ‰æ•°æ®è¦å‘é€ï¼Œå¸Œæœ›å…³é—­è¿æ¥ã€‚ å®è·µä¸­ï¼ŒPSHï¼ŒURGï¼ŒUrgent data pointer ä¸è¢«å¹¿æ³›ä½¿ç”¨åœ¨ RFC 3168 ä¸­æ·»åŠ äº†ä¸¤ä¸ªæ–°çš„æ ‡å¿—ï¼ˆECE å’Œ CWRï¼‰ï¼ŒCWRï¼šCWR æ ‡å¿—ä¸åé¢çš„ ECE æ ‡å¿—éƒ½ç”¨äº IP é¦–éƒ¨çš„ ECN å­—æ®µï¼ŒECE æ ‡å¿—ä¸º 1 æ—¶ï¼Œåˆ™é€šçŸ¥å¯¹æ–¹å·²å°†æ‹¥å¡çª—å£ç¼©å°ï¼›ECEï¼šè‹¥å…¶å€¼ä¸º 1 åˆ™ä¼šé€šçŸ¥å¯¹æ–¹ï¼Œä»å¯¹æ–¹åˆ°è¿™è¾¹çš„ç½‘ç»œæœ‰é˜»å¡ã€‚åœ¨æ”¶åˆ°æ•°æ®åŒ…çš„ IP é¦–éƒ¨ä¸­ ECN ä¸º 1 æ—¶å°† TCP é¦–éƒ¨ä¸­çš„ ECE è®¾ä¸º 1ï¼› çª—å£å­—æ®µ Receiver window: å  2 å­—èŠ‚ï¼Œç”¨æ¥è®©å¯¹æ–¹è®¾ç½®å‘é€çª—å£çš„ä¾æ®ï¼Œå•ä½ä¸ºå­—èŠ‚ã€‚ æ£€éªŒå’Œ Internet checksum:å  2 å­—èŠ‚ã€‚æ£€éªŒå’Œå­—æ®µæ£€éªŒçš„èŒƒå›´åŒ…æ‹¬é¦–éƒ¨å’Œæ•°æ®è¿™ä¸¤éƒ¨åˆ†ã€‚åœ¨è®¡ç®—æ£€éªŒå’Œæ—¶ï¼Œè¦åœ¨ TCP æŠ¥æ–‡æ®µçš„å‰é¢åŠ ä¸Š 12 å­—èŠ‚çš„ä¼ªé¦–éƒ¨ã€‚ ç´§æ€¥æŒ‡é’ˆå­—æ®µ Urgent data pointer å  16 ä½ï¼ŒæŒ‡å‡ºåœ¨æœ¬æŠ¥æ–‡æ®µä¸­ç´§æ€¥æ•°æ®å…±æœ‰å¤šå°‘ä¸ªå­—èŠ‚ï¼ˆç´§æ€¥æ•°æ®æ”¾åœ¨æœ¬æŠ¥æ–‡æ®µæ•°æ®çš„æœ€å‰é¢ï¼‰ã€‚ å¡«å……å­—æ®µ è¿™æ˜¯ä¸ºäº†ä½¿æ•´ä¸ªé¦–éƒ¨é•¿åº¦æ˜¯ 4 å­—èŠ‚çš„æ•´æ•°å€ã€‚ Seq number and ACK numberæŠ¥æ–‡æ®µçš„åºå·(Sequence number)å’Œç¡®è®¤å·(Acknowledgement number)æ˜¯ TCP æä¾›å¯é æ•°æ®ä¼ è¾“çš„å…³é”®ã€‚å…¶ä¸­åºå·æŒ‡æ•°æ®æ®µä¸­ç¬¬ä¸€ä¸ªå­—èŠ‚åœ¨æ•°æ®æµä¸­çš„ä½ç½®ç¼–å·ï¼Œç¡®è®¤å·æŒ‡æœŸæœ›ä»å¦å¤–ä¸€è¾¹æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªå­—èŠ‚çš„åºå·ã€‚TCP ä¸ºå…¨åŒå·¥é€šä¿¡ï¼Œå› æ­¤æ¯ä¸ªæ–¹å‘çš„æ•°æ®æµéƒ½æœ‰è‡ªå·±çš„åºå·å’Œç¡®è®¤å·ã€‚ å‡è®¾æœ‰ä¸¤å°ä¸»æœºï¼Œä¸»æœº A å¯åŠ¨äº†ä¸€ä¸ªä¸ä¸»æœº B çš„ Telnet ä¼šè¯ã€‚å› ä¸ºä¸»æœº A å¯åŠ¨äº†ä¼šè¯ï¼Œæ‰€ä»¥å®ƒè¢«æ ‡è®°ä¸ºå®¢æˆ·ç«¯ï¼Œä¸»æœº B è¢«æ ‡è®°ä¸ºæœåŠ¡å™¨ã€‚ç”¨æˆ·ï¼ˆåœ¨å®¢æˆ·ç«¯ï¼‰è¾“å…¥çš„æ¯ä¸ªå­—ç¬¦éƒ½ä¼šè¢«å‘é€åˆ°è¿œç¨‹ä¸»æœºï¼›è¿œç¨‹ä¸»æœºå°†ä¼šå‘é€å›æ¯ä¸ªå­—ç¬¦çš„å‰¯æœ¬ï¼Œè¿™äº›å­—ç¬¦å°†ä¼šæ˜¾ç¤ºåœ¨ Telnet ç”¨æˆ·çš„å±å¹•ä¸Šã€‚è¿™ç§â€œå›æ˜¾â€ç”¨äºç¡®ä¿ Telnet ç”¨æˆ·çœ‹åˆ°çš„å­—ç¬¦å·²ç»åœ¨è¿œç¨‹ç«™ç‚¹è¢«æ¥æ”¶å¹¶å¤„ç†ã€‚å› æ­¤ï¼Œæ¯ä¸ªå­—ç¬¦åœ¨ç”¨æˆ·æŒ‰ä¸‹é”®ç›˜åˆ°å­—ç¬¦åœ¨ç”¨æˆ·çš„ç›‘è§†å™¨ä¸Šæ˜¾ç¤ºçš„æ—¶é—´å†…ï¼Œéƒ½ä¼šåœ¨ç½‘ç»œä¸Šä¼ è¾“ä¸¤æ¬¡ç°åœ¨å‡è®¾ç”¨æˆ·è¾“å…¥äº†ä¸€ä¸ªå•ç‹¬çš„å­—æ¯ï¼Œâ€˜Câ€™ï¼Œç„¶åå»æ‹¿å’–å•¡ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œè¿™é‡Œæˆ‘ä»¬å‡è®¾å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„èµ·å§‹åºåˆ—å· ISN åˆ†åˆ«æ˜¯ 42 å’Œ 79ã€‚ä¸€ä¸ªæ®µçš„åºåˆ—å·æ˜¯æ•°æ®å­—æ®µä¸­ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºåˆ—å·ã€‚å› æ­¤ï¼Œä»å®¢æˆ·ç«¯å‘é€çš„ç¬¬ä¸€ä¸ªæ®µçš„åºåˆ—å·å°†æ˜¯ 42ï¼›ä»æœåŠ¡å™¨å‘é€çš„ç¬¬ä¸€ä¸ªæ®µçš„åºåˆ—å·å°†æ˜¯ 79ã€‚å›å¿†ä¸€ä¸‹ï¼Œç¡®è®¤å·æ˜¯ä¸»æœºæ­£åœ¨ç­‰å¾…çš„ä¸‹ä¸€ä¸ªæ•°æ®å­—èŠ‚çš„åºåˆ—å·ã€‚åœ¨ TCP è¿æ¥å»ºç«‹ä½†åœ¨ä»»ä½•æ•°æ®å‘é€ä¹‹å‰ï¼Œå®¢æˆ·ç«¯æ­£åœ¨ç­‰å¾…å­—èŠ‚ 79ï¼ŒæœåŠ¡å™¨æ­£åœ¨ç­‰å¾…å­—èŠ‚ 42 åœ¨ TCP ä¸­ï¼Œæ¯ä¸€ä¸ªæ–°çš„è¿æ¥éƒ½ä¼šä»ä¸€ä¸ªéšæœºçš„èµ·å§‹åºåˆ—å·ï¼ˆISN, Initial Sequence Numberï¼‰å¼€å§‹ã€‚ISN æ˜¯åœ¨ TCP ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹çš„ç¬¬ä¸€æ­¥ä¸­ç”±è¿æ¥çš„å‘èµ·æ–¹ç¡®å®šã€‚å®é™…çš„ TCP è¿æ¥ä¸­ï¼Œèµ·å§‹åºåˆ—å·ä¼šæ˜¯ä¸€ä¸ªéšæœºçš„ã€32 ä½çš„æ•°å€¼ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ 42 å’Œ 79 åªæ˜¯ä¸ºäº†ç®€åŒ–è®¨è®ºã€‚ä¸ºä»€ä¹ˆè¦ç”¨éšæœº ISN?ä¸€æ–¹é¢æ˜¯ä¸ºäº†é˜²æ­¢è¿æ¥å¤±æ•ˆå SOCKET è¢«é‡ç”¨ä½¿å¾—ä»¥å‰æ®‹ç•™çš„åŒ…è¢«é”™è¯¯çš„æ¥å—ï¼›å¦ä¸€æ–¹é¢æ˜¯ä¸ºäº†é˜²æ­¢é»‘å®¢è½»æ˜“çš„çŸ¥é“åºåˆ—å·ä¹‹ååˆ¶é€  tcp åºåˆ—å·æ”»å‡»ï¼Œä¸è¿‡å³ä½¿è¿™æ · tcp åºåˆ—å·æ”»å‡»ä¹Ÿæ˜¯æœ‰åŠæ³•è¿›è¡Œçš„ï¼Œæ‰€ä»¥æœ‰å¾ˆå¤š tcp åºåˆ—å·çš„ç”Ÿæˆç®—æ³•è¢«æå‡ºå’Œæ”¹è¿›ã€‚ å¦‚å›¾æ‰€ç¤ºï¼Œå‘é€äº†ä¸‰ä¸ªæ®µã€‚ç¬¬ä¸€ä¸ªæ®µä»å®¢æˆ·ç«¯å‘é€åˆ°æœåŠ¡å™¨ï¼Œå…¶æ•°æ®å­—æ®µä¸­åŒ…å«å­—æ¯â€˜Câ€™çš„ 1 å­—èŠ‚ ASCII è¡¨ç¤ºã€‚æ­£å¦‚æˆ‘ä»¬åˆšæ‰æè¿°çš„ï¼Œè¿™ä¸ªç¬¬ä¸€ä¸ªæ®µçš„åºåˆ—å·å­—æ®µä¸­æœ‰ 42ã€‚å¦å¤–ï¼Œå› ä¸ºå®¢æˆ·ç«¯è¿˜æ²¡æœ‰ä»æœåŠ¡å™¨æ¥æ”¶åˆ°ä»»ä½•æ•°æ®ï¼Œæ‰€ä»¥è¿™ä¸ªç¬¬ä¸€ä¸ªæ®µçš„ç¡®è®¤å·å­—æ®µä¸­ä¼šæœ‰ 79ã€‚ ç¬¬äºŒä¸ªæ®µä»æœåŠ¡å™¨å‘é€åˆ°å®¢æˆ·ç«¯ã€‚å®ƒæœ‰ä¸¤ä¸ªç›®çš„ã€‚é¦–å…ˆï¼Œå®ƒç¡®è®¤äº†æœåŠ¡å™¨æ¥æ”¶åˆ°çš„æ•°æ®ã€‚é€šè¿‡åœ¨ç¡®è®¤å­—æ®µä¸­æ”¾å…¥ 43ï¼ŒæœåŠ¡å™¨å‘Šè¯‰å®¢æˆ·ç«¯å®ƒå·²ç»æˆåŠŸæ¥æ”¶äº†ç›´åˆ°å­—èŠ‚ 42 çš„æ‰€æœ‰å†…å®¹ï¼Œç°åœ¨æ­£åœ¨ç­‰å¾…å­—èŠ‚ 43 åŠå…¶åçš„æ•°æ®ã€‚è¿™ä¸ªæ®µçš„ç¬¬äºŒä¸ªç›®çš„æ˜¯å›æ˜¾å­—æ¯â€˜Câ€™ã€‚å› æ­¤ï¼Œè¿™ä¸ªç¬¬äºŒä¸ªæ®µçš„æ•°æ®å­—æ®µä¸­æœ‰å­—æ¯â€˜Câ€™çš„ ASCII è¡¨ç¤ºã€‚è¿™ä¸ªç¬¬äºŒä¸ªæ®µçš„åºåˆ—å·æ˜¯ 79ï¼Œè¿™æ˜¯è¿™ä¸ª TCP è¿æ¥çš„æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯æ•°æ®æµçš„åˆå§‹åºåˆ—å·ï¼Œå› ä¸ºè¿™æ˜¯æœåŠ¡å™¨å‘é€çš„ç¬¬ä¸€ä¸ªæ•°æ®å­—èŠ‚ã€‚æ³¨æ„ï¼Œå¯¹å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨æ•°æ®çš„ç¡®è®¤æ˜¯åœ¨æºå¸¦æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯æ•°æ®çš„æ®µä¸­è¿›è¡Œçš„ï¼›è¿™ä¸ªç¡®è®¤è¢«è¯´æˆæ˜¯åœ¨æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯çš„æ•°æ®æ®µä¸Šçš„æå¸¦ç¡®è®¤ã€‚ å›æ˜¾ Echo Protocol é€šå¸¸ç”¨äºç½‘ç»œæµ‹è¯•å’Œæ•…éšœæ’æŸ¥ã€‚å®ƒæ˜¯ä¸€ç§ç®€å•çš„åè®®ï¼Œå®¢æˆ·ç«¯å‘é€ç»™æœåŠ¡å™¨çš„ä»»ä½•æ•°æ®ï¼ŒæœåŠ¡å™¨éƒ½ä¼šåŸå°ä¸åŠ¨åœ°å‘é€å›æ¥ã€‚è¿™ç§æœºåˆ¶å¯ä»¥ç”¨äºæµ‹è¯•ç½‘ç»œè¿æ¥çš„è´¨é‡ï¼ŒåŒ…æ‹¬å»¶è¿Ÿã€æ•°æ®åŒ…ä¸¢å¤±ç‡ç­‰ã€‚å®ƒåœ¨ RFC 862 ä¸­æœ‰è¯¦ç»†çš„æè¿°ã€‚ç„¶è€Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒTCP Echo å¹¶ä¸å¸¸ç”¨ï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šè¢«åˆ©ç”¨è¿›è¡Œæ‹’ç»æœåŠ¡æ”»å‡»ï¼ˆDenial of Service attackï¼ŒDoS attackï¼‰ ç¬¬ä¸‰ä¸ªæ®µä»å®¢æˆ·ç«¯å‘é€åˆ°æœåŠ¡å™¨ã€‚å®ƒçš„å”¯ä¸€ç›®çš„æ˜¯ç¡®è®¤å®ƒä»æœåŠ¡å™¨æ¥æ”¶åˆ°çš„æ•°æ®ã€‚ï¼ˆå›å¿†ä¸€ä¸‹ï¼Œç¬¬äºŒä¸ªæ®µåŒ…å«äº†ä»æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯çš„æ•°æ®â€”â€”å­—æ¯â€˜Câ€™ã€‚ï¼‰è¿™ä¸ªæ®µçš„æ•°æ®å­—æ®µæ˜¯ç©ºçš„ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œç¡®è®¤æ²¡æœ‰ä¸ä»»ä½•å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„æ•°æ®æå¸¦ï¼‰ã€‚è¿™ä¸ªæ®µçš„ç¡®è®¤å·å­—æ®µä¸­æœ‰ 80ï¼Œå› ä¸ºå®¢æˆ·ç«¯å·²ç»æ¥æ”¶äº†ç›´åˆ°å­—èŠ‚åºåˆ—å· 79 çš„å­—èŠ‚æµï¼Œç°åœ¨æ­£åœ¨ç­‰å¾…å­—èŠ‚ 80 åŠå…¶åçš„æ•°æ®ã€‚ä½ å¯èƒ½ä¼šè§‰å¾—å¥‡æ€ªï¼Œè¿™ä¸ªæ®µä¹Ÿæœ‰ä¸€ä¸ªåºåˆ—å·ï¼Œè™½ç„¶æ®µä¸­æ²¡æœ‰æ•°æ®ã€‚ä½†æ˜¯ï¼Œå› ä¸º TCP æœ‰ä¸€ä¸ªåºåˆ—å·å­—æ®µï¼Œæ‰€ä»¥è¿™ä¸ªæ®µéœ€è¦æœ‰ä¸€äº›åºåˆ—å·ã€‚ TCPï¼Œå°±åƒæˆ‘ä»¬åœ¨ 3.4 èŠ‚ä¸­çš„ rdt åè®®ä¸€æ ·ï¼Œä½¿ç”¨è¶…æ—¶/é‡ä¼ æœºåˆ¶æ¥ä»ä¸¢å¤±çš„æ®µä¸­æ¢å¤ã€‚è™½ç„¶è¿™åœ¨æ¦‚å¿µä¸Šå¾ˆç®€å•ï¼Œä½†æ˜¯å½“æˆ‘ä»¬åœ¨å®é™…çš„åè®®å¦‚ TCP ä¸­å®ç°è¶…æ—¶/é‡ä¼ æœºåˆ¶æ—¶ï¼Œä¼šå‡ºç°è®¸å¤šå¾®å¦™çš„é—®é¢˜ã€‚ä¹Ÿè®¸æœ€æ˜æ˜¾çš„é—®é¢˜æ˜¯è¶…æ—¶é—´éš”çš„é•¿åº¦ã€‚æ˜¾ç„¶ï¼Œè¶…æ—¶åº”è¯¥å¤§äºè¿æ¥çš„å¾€è¿”æ—¶é—´ï¼ˆRTTï¼‰ï¼Œå³ä»å‘é€ä¸€ä¸ªæ®µåˆ°å®ƒè¢«ç¡®è®¤çš„æ—¶é—´ã€‚å¦åˆ™ï¼Œä¼šå‘é€ä¸å¿…è¦çš„é‡ä¼ ã€‚ä½†æ˜¯è¶…æ—¶åº”è¯¥å¤§å¤šå°‘ï¼Ÿé¦–å…ˆåº”è¯¥å¦‚ä½•ä¼°è®¡ RTTï¼Ÿæ˜¯å¦åº”è¯¥ä¸æ¯ä¸ªæœªç¡®è®¤çš„æ®µå…³è”ä¸€ä¸ªå®šæ—¶å™¨ï¼Ÿ Round-Trip Time Estimation and Timeoutå¦‚ä½•ä¼°è®¡å¾€è¿”æ—¶é—´ æ ·æœ¬ RTT(SampleRTT): æµ‹é‡ä»æŠ¥æ–‡æ®µå‘é€åˆ°æ”¶åˆ°ç¡®è®¤çš„æ—¶é—´EstimatedRTT TCP ç»´æŒçš„ SampleRTT å‡å€¼ï¼Œå…¶æ›´æ–°æ–¹å¼å¦‚ä¸‹:$\\alpha$ æ¨èå€¼ä¸º 0.125 $$EstimatedRTT=(1-\\alpha)\\times EstimatedRTT+\\alpha\\times SampleRTT$$ ä¸Šè¿°å¹³å‡æ–¹æ³•è¢«ç§°ä¸ºæŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡ï¼ˆExponential Weighted Moving Averageï¼ŒEWMAï¼‰ RTT åå·®(RTT Deviation,DevRTT)ï¼Œç”¨äºä¼°ç®— SampleRTT ä¸€èˆ¬ä¼šåç¦» EstimatedRTT çš„ç¨‹åº¦ï¼š$\\beta$ æ¨èå€¼ä¸º 0.25 $$DevRTT=(1-\\beta)\\times DevRTT+\\beta\\times |SampleRTT-EstimatedRTT|$$ Timeout æ—¶é—´è®¾ç½®è¶…æ—¶é—´éš”åº”è¯¥å¤§äºç­‰äº EstimatedRTT ä»¥é¿å…ä¸å¿…è¦çš„é‡ä¼ ã€‚åŒæ—¶è¦è€ƒè™‘åˆ° RTT çš„å˜åŒ–ï¼Œå› æ­¤è¦åŠ ä¸Š RTT åå·® $$TimeoutInterval = EstimatedRTT + 4\\times DevRTT$$ åˆå§‹æ—¶$TimeoutInterval$è®¾ç½®ä¸º 1s ç¬¬ä¸€ä¸ªæ ·æœ¬ RTT è·å¾—åï¼Œ $EstimatedRTT=SampleRTTï¼ŒDevRTT=SampleRTT/2$ $TimeoutInterval =EstimatedRTT + max (G, K*DevRTT)$ ï¼ˆK=4ï¼ŒG æ˜¯ç”¨æˆ·è®¾ç½®çš„æ—¶é—´ç²’åº¦ï¼‰ Reliable Data TransferTCP åœ¨ IP ä¸å¯é æœåŠ¡ä¹‹ä¸Šåˆ›å»ºäº†ä¸€ç§å¯é æ•°æ®ä¼ è¾“æœåŠ¡ï¼ˆreliable data transfer service,rdtï¼‰ã€‚ä¸ºäº†å‡å°‘å¤šä¸ªå®šæ—¶å™¨ç®¡ç†å¸¦æ¥çš„ç›¸å½“å¤§çš„å¼€é”€ï¼ŒTCP åœ¨å³ä½¿æœ‰å¤šä¸ªå·²å‘é€ä½†æœªç¡®è®¤çš„æŠ¥æ–‡æ®µçš„æƒ…å†µä¸‹ï¼Œå®šæ—¶å™¨çš„ç®¡ç†è¿‡ç¨‹ä»…ä½¿ç”¨å•ä¸€çš„å®šæ—¶å™¨ã€‚ç®€åŒ–çš„ TCP å‘é€æ–¹å¦‚ä¸‹ 1234567891011121314151617181920212223242526272829/* Assume sender is not constrained by TCP flow or congestion control, that data from above is less than MSS in size, and that data transfer is in one direction only. */NextSeqNum=InitialSeqNumber // è¡¨ç¤ºä¸‹ä¸€ä¸ªè¦å‘é€çš„æ•°æ®æ®µçš„åºåˆ—å·SendBase=InitialSeqNumber // è¡¨ç¤ºå·²å‘é€ä½†å°šæœªè¢«ç¡®è®¤çš„æœ€æ—©çš„æ•°æ®æ®µçš„åºåˆ—å·loop (forever) { switch(event) event: data received from application above create TCP segment with sequence number NextSeqNum if (timer currently not running) start timer pass segment to IP NextSeqNum=NextSeqNum+length(data) break; event: timer timeout retransmit not-yet-acknowledged segment with smallest sequence number start timer break; event: ACK received, with ACK field value of y if (y &gt; SendBase) { SendBase=y if (there are currently any not-yet-acknowledged segments) start timer } break;} /* end of loop forever */ ç®€åŒ–çš„ TCP å‘é€æ–¹ data received from application above: å½“ä»ä¸Šå±‚åº”ç”¨æ¥æ”¶åˆ°æ•°æ®æ—¶ï¼Œåˆ›å»ºä¸€ä¸ª TCP Segmentï¼Œå…¶åºåˆ—å·ä¸º NextSeqNumï¼Œå¦‚æœæ²¡æœ‰å¯åŠ¨å®šæ—¶å™¨ï¼Œåˆ™å¯åŠ¨å®šæ—¶å™¨ï¼Œç„¶åå°†è¯¥æ®µä¼ é€’ç»™ IP å±‚ä»¥è¿›è¡Œä¼ è¾“ï¼ŒNextSeqNum += length(data) timer timeout: å½“å®šæ—¶å™¨è¶…æ—¶æ—¶ï¼ˆè¿™é€šå¸¸æ„å‘³ç€ä¸€ä¸ª TCP æ®µä¸¢å¤±äº†ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰åœ¨é¢„æœŸçš„æ—¶é—´å†…æ”¶åˆ° ACKï¼‰ï¼Œä¼šé‡æ–°ä¼ è¾“åºåˆ—å·æœ€å°çš„å°šæœªç¡®è®¤çš„æ®µï¼Œç„¶åé‡æ–°å¯åŠ¨å®šæ—¶å™¨ ACK received, with ACK field value of y: å½“æ”¶åˆ°ä¸€ä¸ª ACK æ—¶ï¼Œå¦‚æœ ACK å­—æ®µçš„å€¼ y å¤§äº SendBaseï¼Œåˆ™æ›´æ–° SendBase ä¸º yã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å·²ç»æ”¶åˆ°äº†åºåˆ—å·å°äºæˆ–ç­‰äº y çš„æ‰€æœ‰æ®µçš„ç¡®è®¤ã€‚ç„¶åï¼Œå¦‚æœè¿˜æœ‰å°šæœªç¡®è®¤çš„æ®µï¼Œå°±å¯åŠ¨å®šæ—¶å™¨ Retransmission Scenarios å½“å‘ç”Ÿ timeout äº‹ä»¶æ—¶ï¼ŒTCP é‡ä¼ æ—¶éƒ½ä¼šå°†ä¸‹ä¸€æ¬¡çš„ timeout é—´éš”è®¾ä¸ºå…ˆå‰å€¼çš„ä¸¤å€ï¼›å½“å‘ç”Ÿå…¶ä»–ä¸¤ä¸ªäº‹ä»¶è®¡æ—¶å™¨é‡å¯æ—¶ï¼ŒTimeoutIntervalç”±æœ€è¿‘çš„ EstimatedRTTå€¼ä¸ DevRTTå€¼æ¨ç®—å¾—åˆ°ã€‚è¿™ç§ä¿®æ”¹æä¾›äº†ä¸€ä¸ªå½¢å¼å—é™çš„æ‹¥å¡æ§åˆ¶,åœ¨æ‹¥å¡æ—¶æœŸï¼Œå¦‚æœæºç»§ç»­åšæŒé‡æ–°ä¼ è¾“æ•°æ®åŒ…ï¼Œæ‹¥å¡å¯èƒ½ä¼šå˜å¾—æ›´,é€šè¿‡å»¶é•¿è¶…æ—¶æ—¶é—´ï¼ŒTCP å¯ä»¥å‡å°‘é‡ä¼ çš„æ¬¡æ•°ï¼Œä»è€Œå‡å°‘æ‹¥å¡ã€‚å¦‚ä¸‹å›¾ p2 æ‰€ç¤ºï¼ŒSeq92 è¶…æ—¶é‡ä¼ ï¼ŒTimeoutInterval åŠ å€ï¼Œ$TimeoutInterval \\lt Seq100 Transport Time \\lt 2 \\times TimeoutInterval $, ä»è€Œ Seq100 ä¸ä¼šè¢«é‡ä¼  ç´¯è®¡ç¡®è®¤æœºåˆ¶é¿å…äº†é‡ä¼ ç¬¬ä¸€ä¸ªæ®µï¼Œå¦‚ä¸‹å›¾ p3 æ‰€ç¤ºï¼ŒSeq92 å’Œ Seq100 å·²ç»è¢«ç¡®è®¤ï¼Œè™½ç„¶ ACK100 ä¸¢å¤±ï¼Œä½† ACK120 è¢«æ¥æ”¶ï¼Œç”±äºç´¯è®¡ç¡®è®¤æœºåˆ¶ï¼ŒSeq92 å’Œ Seq100 éƒ½è¢«ç¡®è®¤ï¼Œå› æ­¤ä¸ä¼šè¢«é‡ä¼  > p1: Retransmission due to a lost acknowledgment > p2ï¼šSegment 100 not retransmitted > p3: A cumulative acknowledgment avoids retransmission of the first segmen Fast Retransmit å½“æ¯”æœŸæœ›åºå·å¤§çš„å¤±åºæŠ¥æ–‡æ®µåˆ°è¾¾ï¼Œæ¥æ”¶æ–¹ç«‹å³å‘é€å†—ä½™ ACKï¼ˆduplicate ACKï¼‰ï¼ŒæŒ‡æ˜ä¸‹ä¸€ä¸ªæœŸå¾…å­—èŠ‚çš„åºå·å¦‚æœå‘é€æ–¹æ”¶åˆ°ä¸€ä¸ªç¡®è®¤åå†æ”¶åˆ° 3 ä¸ªå¯¹åŒæ ·æŠ¥æ–‡æ®µçš„ç¡®è®¤ï¼Œå‘é€æ–¹åº”æ„è¯†åˆ°ä¸å¯¹åŠ²ã€‚ç”Ÿæˆä¸‰ä¸ªé‡å¤ ACKï¼Œæ˜¯å› ä¸ºæ¥æ”¶æ–¹å­˜åœ¨ç¼ºå¤±æŠ¥æ–‡æ®µï¼›äºæ˜¯å¯åŠ¨å¿«é€Ÿé‡ä¼ (fast retransmit): åœ¨å®šæ—¶å™¨è¶…æ—¶ä¹‹å‰é‡å‘ä¸¢å¤±çš„æŠ¥æ–‡æ®µ 12345678910111213event: ACK received, with ACK field value of yif (y &gt; SendBase) { SendBase = y if (there are currently not-yet-acknowledged segments) start timer }else { increment count of dup ACKs received for y if (count of dup ACKs received for y == 3) { resend segment with sequence number y }} GBN or SR TCP é”™è¯¯æ¢å¤æœºåˆ¶æ˜¯ GBNï¼ˆGo-Back-Nï¼‰åè®®è¿˜æ˜¯ SRï¼ˆSelective Repeatï¼‰åè®®ï¼Ÿ TCP çš„ç¡®è®¤æ˜¯ç´¯ç§¯çš„ï¼Œæ­£ç¡®æ¥æ”¶ä½†æ˜¯é¡ºåºé”™è¯¯çš„æ®µå¹¶ä¸ä¼šè¢«æ¥æ”¶è€…å•ç‹¬ç¡®è®¤ã€‚å› æ­¤ï¼ŒTCP å‘é€è€…åªéœ€è¦ç»´æŠ¤ä¼ è¾“ä½†æœªç¡®è®¤çš„å­—èŠ‚çš„æœ€å°åºåˆ—å·ï¼ˆSendBaseï¼‰å’Œä¸‹ä¸€ä¸ªè¦å‘é€çš„å­—èŠ‚çš„åºåˆ—å·ï¼ˆNextSeqNumï¼‰ã€‚ä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´ï¼ŒTCP çœ‹èµ·æ¥å¾ˆåƒä¸€ä¸ª GBN é£æ ¼çš„åè®®ã€‚ä½†æ˜¯ TCP å’Œ GBN ä¹‹é—´æœ‰ä¸€äº›æ˜¾è‘—çš„å·®å¼‚ã€‚è®¸å¤š TCP å®ç°ä¼šç¼“å­˜(buffer)æ­£ç¡®æ¥æ”¶ä½†é¡ºåºé”™è¯¯çš„ Segment [Stevens 1994]ã€‚å¯¹ TCP çš„ä¸€é¡¹æè®®ä¿®æ”¹ï¼Œæ‰€è°“çš„é€‰æ‹©æ€§ç¡®è®¤ [RFC 2018]ï¼Œå…è®¸ TCP æ¥æ”¶è€…é€‰æ‹©æ€§åœ°ç¡®è®¤é¡ºåºé”™è¯¯çš„æ®µï¼Œè€Œä¸æ˜¯åªæ˜¯ç´¯ç§¯åœ°ç¡®è®¤æœ€åæ­£ç¡®æ¥æ”¶çš„ï¼Œé¡ºåºæ­£ç¡®çš„æ®µã€‚å½“ä¸é€‰æ‹©æ€§é‡ä¼ ç»“åˆä½¿ç”¨ï¼ŒTCP çœ‹èµ·æ¥å¾ˆåƒæˆ‘ä»¬çš„é€šç”¨ SR åè®®ã€‚å› æ­¤ï¼ŒTCP çš„é”™è¯¯æ¢å¤æœºåˆ¶å¯èƒ½æœ€å¥½è¢«åˆ†ç±»ä¸º GBN å’Œ SR åè®®çš„æ··åˆä½“ã€‚ Flow ControlTCP é€šè¿‡è®©å‘é€æ–¹ç»´æŠ¤ä¸€ä¸ªç§°ä¸ºæ¥æ”¶çª—å£ï¼ˆreceive windowï¼‰çš„å˜é‡æ¥æä¾›æµé‡æ§åˆ¶ã€‚é€šä¿—çš„è¯´ï¼Œæ¥æ”¶çª—å£ç”¨äºç»™å‘é€æ–¹ä¸€ä¸ªæŒ‡ç¤ºâ€”â€”è¯¥æ¥æ”¶æ–¹è¿˜æœ‰å¤šå°‘å¯ç”¨çš„ç¼“å­˜ç©ºé—´ã€‚å› ä¸º TCP æ˜¯å…¨åŒå·¥é€šä¿¡ï¼Œåœ¨è¿æ¥ä¸¤ç«¯çš„å‘é€æ–¹éƒ½å„è‡ªç»´æŠ¤ä¸€ä¸ªæ¥æ”¶çª—å£ã€‚æ¥æ”¶çª—å£ï¼ˆrwndï¼‰å’Œæ¥æ”¶ç¼“å­˜ï¼ˆRcvBufferï¼‰å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š é€šè¿‡ TCP è¿æ¥çš„ä¸»æœºéƒ½ä¼šä¸ºè¿æ¥è®¾ç½®ä¸€ä¸ªæ¥æ”¶ç¼“å†²åŒºã€‚å½“ TCP è¿æ¥æ¥æ”¶åˆ°æ­£ç¡®ä¸”é¡ºåºæ­£ç¡®çš„å­—èŠ‚æ—¶ï¼Œå®ƒä¼šå°†æ•°æ®æ”¾å…¥æ¥æ”¶ç¼“å†²åŒº(TCP data in buffer)ã€‚ç›¸å…³çš„åº”ç”¨ç¨‹åºè¿›ç¨‹(Application process )å°†ä»è¿™ä¸ªç¼“å†²åŒºè¯»å–æ•°æ®ã€‚è¿›ç¨‹ä» buffer ä¸­è¯»å–æ•°æ®çš„æ—¶æœºæ˜¯ä¸ç¡®å®šçš„ï¼Œå¯èƒ½åœ¨æ•°æ®åˆ°è¾¾çš„ç¬é—´è¯»å–ï¼Œä¹Ÿå¯èƒ½åœ¨æ•°æ®åˆ°è¾¾å¾ˆä¹…ä¹‹åæ‰å°è¯•è¯»å–æ•°æ®ã€‚å¦‚æœåº”ç”¨ç¨‹åºè¯»å–æ•°æ®çš„é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ï¼Œå‘é€è€…å¾ˆå®¹æ˜“é€šè¿‡è¿‡å¿«åœ°å‘é€è¿‡å¤šçš„æ•°æ®æ¥æº¢å‡ºè¿æ¥çš„æ¥æ”¶ç¼“å†²åŒºã€‚ TCP ä¸ºå…¶åº”ç”¨ç¨‹åºæä¾›äº†ä¸€ç§æµé‡æ§åˆ¶æœåŠ¡ Flow Controlï¼Œä»¥æ¶ˆé™¤å‘é€è€…æº¢å‡ºæ¥æ”¶è€…ç¼“å†²åŒºçš„å¯èƒ½æ€§ã€‚å› æ­¤ï¼Œæµé‡æ§åˆ¶æ˜¯ä¸€ç§é€Ÿåº¦åŒ¹é…æœåŠ¡(åŒ¹é…å‘é€è€…å‘é€çš„é€Ÿç‡ä¸æ¥æ”¶åº”ç”¨ç¨‹åºè¯»å–çš„é€Ÿç‡)ã€‚ å¦‚å‰æ‰€è¿°ï¼Œç”±äº IP ç½‘ç»œå†…çš„æ‹¥å¡ï¼ŒTCP å‘é€è€…ä¹Ÿå¯èƒ½è¢«èŠ‚æµ(throttled)ï¼›è¿™ç§ç§°ä¸ºæ‹¥å¡æ§åˆ¶ Congestion Controlã€‚å°½ç®¡æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶é‡‡å–çš„è¡ŒåŠ¨ç›¸ä¼¼ï¼ˆå³èŠ‚æµå‘é€è€…ï¼‰ï¼Œä½†å®ƒä»¬æ˜¾ç„¶æ˜¯å‡ºäºéå¸¸ä¸åŒçš„åŸå› ã€‚ TCP é€šè¿‡è®©å‘é€è€…ç»´æŠ¤ä¸€ä¸ªå«åš receive window çš„å˜é‡æ¥æä¾›æµé‡æ§åˆ¶ã€‚æ¥æ”¶çª—å£ç”¨äºå‘Šè¯‰ sender å…³äº receiver æœ‰å¤šå°‘å¯ç”¨ç¼“å†²åŒºç©ºé—´çš„ä¿¡æ¯ã€‚å› ä¸º TCP æ˜¯å…¨åŒå·¥çš„ï¼Œè¿æ¥çš„æ¯ä¸€ä¾§çš„å‘é€è€…éƒ½ç»´æŠ¤ä¸€ä¸ªç‹¬ç«‹çš„æ¥æ”¶çª—å£ã€‚è®©æˆ‘ä»¬åœ¨æ–‡ä»¶ä¼ è¾“çš„ä¸Šä¸‹æ–‡ä¸­ç ”ç©¶æ¥æ”¶çª—å£ã€‚ å‡è®¾ä¸»æœº A æ­£åœ¨é€šè¿‡ TCP è¿æ¥å‘ä¸»æœº B å‘é€ä¸€ä¸ªå¤§æ–‡ä»¶ã€‚ä¸»æœº B ä¸ºè¿™ä¸ªè¿æ¥åˆ†é…ä¸€ä¸ªæ¥æ”¶ç¼“å†²åŒºï¼›è¡¨ç¤ºå…¶å¤§å°ä¸º RcvBufferã€‚ä¸æ—¶åœ°ï¼Œä¸»æœº B çš„åº”ç”¨ç¨‹åºè¿›ç¨‹ä»ç¼“å†²åŒºä¸­è¯»å–æ•°æ®ã€‚å®šä¹‰ä»¥ä¸‹å˜é‡ï¼š LastByteReadï¼šè¿™æ˜¯åº”ç”¨ç¨‹åºä»æ¥æ”¶ç¼“å†²åŒºä¸­è¯»å–çš„æ•°æ®æµçš„æœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·ã€‚æ¢å¥è¯è¯´ï¼Œè¿™æ˜¯åº”ç”¨ç¨‹åºæœ€åè¯»å–çš„æ•°æ®çš„å­—èŠ‚åºå·ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ LastByteRead çš„å€¼ä¸º 1000ï¼Œé‚£ä¹ˆæ„å‘³ç€åº”ç”¨ç¨‹åºå·²ç»è¯»å–äº†åºå·ä¸º 1 åˆ° 1000 çš„å­—èŠ‚ã€‚ LastByteRcvdï¼šè¿™æ˜¯å·²ç»ä»ç½‘ç»œåˆ°è¾¾å¹¶è¢«æ”¾å…¥ä¸»æœº B çš„æ¥æ”¶ç¼“å†²åŒºçš„æ•°æ®æµçš„æœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·ã€‚æ¢å¥è¯è¯´ï¼Œè¿™æ˜¯æœ€åä¸€ä¸ªè¢«æ¥æ”¶å¹¶æ”¾å…¥ç¼“å†²åŒºçš„æ•°æ®çš„å­—èŠ‚åºå·ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ LastByteRcvd çš„å€¼ä¸º 1500ï¼Œé‚£ä¹ˆæ„å‘³ç€å·²ç»æ¥æ”¶äº†åºå·ä¸º 1 åˆ° 1500 çš„å­—èŠ‚ï¼Œå¹¶ä¸”è¿™äº›å­—èŠ‚å·²ç»è¢«æ”¾å…¥äº†æ¥æ”¶ç¼“å†²åŒºã€‚ $LastByteRcvd - LastByteRead$å³ä¸ºåº”ç”¨ç¨‹åºæœªè¯»å–çš„æ•°æ®é‡ï¼Œå®ƒå­˜æ”¾äº Buffer ä¸­ å› ä¸º TCP ä¸å…è®¸æº¢å‡ºåˆ†é…çš„ç¼“å†²åŒºï¼Œæˆ‘ä»¬å¿…é¡»æœ‰ $LastByteRcvd â€“ LastByteRead \\lt RcvBuffer$æ¥æ”¶çª—å£ï¼Œè¡¨ç¤ºä¸º rwndï¼Œè®¾ç½®ä¸ºç¼“å†²åŒºçš„ç©ºé—²ç©ºé—´ï¼š$rwnd = RcvBuffer â€“ (LastByteRcvd â€“ LastByteRead)$ï¼Œå› ä¸ºç©ºé—²ç©ºé—´éšæ—¶é—´å˜åŒ–ï¼Œrwnd æ˜¯åŠ¨æ€å˜åŒ–çš„ã€‚ è¿æ¥å¦‚ä½•ä½¿ç”¨å˜é‡ rwnd æ¥æä¾›æµé‡æ§åˆ¶æœåŠ¡å‘¢ï¼Ÿ ä¸»æœº B é€šè¿‡åœ¨æ¯ä¸ªå‘é€ç»™ A çš„ Segment çš„æ¥æ”¶çª—å£å­—æ®µ(Receieve Window)ä¸­æ”¾ç½®å…¶ rwnd çš„å½“å‰å€¼ï¼Œå‘Šè¯‰ä¸»æœº A è¿æ¥ç¼“å†²åŒºä¸­æœ‰å¤šå°‘ç©ºé—²ç©ºé—´ã€‚æœ€åˆï¼Œä¸»æœº B è®¾ç½®$rwnd = RcvBuffer$ã€‚æ³¨æ„ï¼Œè¦å®ç°è¿™ä¸€ç‚¹ï¼Œä¸»æœº B å¿…é¡»è·Ÿè¸ªå‡ ä¸ªç‰¹å®šäºè¿æ¥çš„å˜é‡ã€‚ åè¿‡æ¥ï¼Œä¸»æœº A è·Ÿè¸ªä¸¤ä¸ªå˜é‡ï¼ŒLastByteSent å’Œ LastByteAckedã€‚è¿™ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„å·®å€¼ $LastByteSent â€“ LastByteAcked$ è¡¨ç¤º A å·²å‘é€ä½†æœªè¢«ç¡®è®¤çš„æ•°æ®çš„é‡ã€‚é€šè¿‡ä¿æŒæœªç¡®è®¤çš„æ•°æ®é‡å°äº rwnd çš„å€¼ï¼Œä¸»æœº A å¯ä»¥ç¡®ä¿å®ƒæ²¡æœ‰æº¢å‡ºæ¥æ”¶è€…çš„ç¼“å†²åŒºã€‚ è¿™ä¸ªæ–¹æ¡ˆæœ‰ä¸€ä¸ªå°çš„æŠ€æœ¯é—®é¢˜ã€‚ä¸ºäº†çœ‹åˆ°è¿™ä¸€ç‚¹ï¼Œå‡è®¾ä¸»æœº B çš„æ¥æ”¶ç¼“å†²åŒºå˜æ»¡äº†ï¼Œæ‰€ä»¥ rwnd = 0ã€‚åœ¨å‘ä¸»æœº A å¹¿å‘Š rwnd = 0 åï¼Œå‡è®¾ B æ²¡æœ‰ä»»ä½•æ•°æ®è¦å‘é€ç»™ Aã€‚ç°åœ¨è€ƒè™‘ä¼šå‘ç”Ÿä»€ä¹ˆã€‚å½“ B çš„åº”ç”¨ç¨‹åºè¿›ç¨‹æ¸…ç©ºç¼“å†²åŒºæ—¶ï¼ŒTCP ä¸ä¼šå‘ä¸»æœº A å‘é€æ–°çš„æ®µå’Œæ–°çš„ rwnd å€¼ï¼›å®é™…ä¸Šï¼Œåªæœ‰å½“ TCP æœ‰æ•°æ®è¦å‘é€ï¼Œæˆ–è€…æœ‰ç¡®è®¤è¦å‘é€æ—¶ï¼Œæ‰ä¼šå‘ä¸»æœº A å‘é€æ®µã€‚å› æ­¤ï¼Œä¸»æœº A æ°¸è¿œä¸ä¼šè¢«é€šçŸ¥ä¸»æœº B çš„æ¥æ”¶ç¼“å†²åŒºå·²ç»æœ‰äº†ä¸€äº›ç©ºé—´â€”â€”ä¸»æœº A è¢«é˜»å¡äº†ï¼Œä¸èƒ½å†ä¼ è¾“ä»»ä½•æ•°æ®ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒTCP è§„èŒƒè¦æ±‚ä¸»æœº A å¾—çŸ¥ B çš„æ¥æ”¶çª—å£ä¸ºé›¶æ—¶ç»§ç»­å‘é€å¸¦æœ‰ä¸€ä¸ªæ•°æ®å­—èŠ‚çš„æ®µã€‚è¿™äº›æ®µå°†è¢« B ç¡®è®¤ã€‚æœ€ç»ˆï¼Œç¼“å†²åŒºå°†å¼€å§‹æ¸…ç©ºï¼Œç¡®è®¤å°†åŒ…å«ä¸€ä¸ªéé›¶çš„ rwnd å€¼ã€‚Flow Control Animations UDP ä¸æä¾›æµé‡æ§åˆ¶ï¼Œå› æ­¤ï¼Œç”±äºç¼“å†²åŒºæº¢å‡ºï¼Œæ¥æ”¶è€…å¯èƒ½ä¼šä¸¢å¤±æ®µã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ä»ä¸»æœº A çš„ä¸€ä¸ªè¿›ç¨‹å‘é€ä¸€ç³»åˆ— UDP æ®µåˆ°ä¸»æœº B çš„ä¸€ä¸ªè¿›ç¨‹ã€‚å¯¹äºå…¸å‹çš„ UDP å®ç°ï¼ŒUDP ä¼šå°†æ®µé™„åŠ åœ¨ä¸€ä¸ªæœ‰é™å¤§å°çš„ç¼“å†²åŒºä¸­ï¼Œè¿™ä¸ªç¼“å†²åŒºâ€œä½äºâ€ç›¸åº”çš„å¥—æ¥å­—ä¹‹å‰ã€‚è¿›ç¨‹ä¸€æ¬¡ä»ç¼“å†²åŒºä¸­è¯»å–ä¸€ä¸ªå®Œæ•´çš„æ®µã€‚å¦‚æœè¿›ç¨‹ä»ç¼“å†²åŒºä¸­è¯»å–æ®µçš„é€Ÿåº¦ä¸å¤Ÿå¿«ï¼Œç¼“å†²åŒºå°†æº¢å‡ºï¼Œæ®µå°†è¢«ä¸¢å¼ƒã€‚ Flow Controlä¾‹é¢˜ Q: ä¸»æœºç”²å’Œä¸»æœºä¹™ä¹‹é—´å·²å»ºç«‹ä¸€ä¸ªTCPè¿æ¥ï¼ŒTCPæœ€å¤§æ®µé•¿åº¦ä¸º1000å­—èŠ‚ï¼Œè‹¥ä¸»æœºç”²çš„å½“å‰æ‹¥å¡çª—å£ä¸º5000å­—èŠ‚ï¼Œåœ¨ä¸»æœºç”²å‘ä¸»æœºä¹™è¿æ¥å‘é€2ä¸ªæœ€å¤§æ®µåï¼ŒæˆåŠŸæ”¶åˆ°ä¸»æœºä¹™å‘é€çš„ç¬¬ä¸€æ®µçš„ç¡®è®¤æ®µï¼Œç¡®è®¤æ®µä¸­é€šå‘Šçš„æ¥æ”¶çª—å£å¤§å°ä¸º3000å­—èŠ‚ï¼Œåˆ™æ­¤æ—¶ä¸»æœºç”²è¿˜å¯ä»¥å‘ä¸»æœºä¹™å‘é€çš„æœ€å¤§å­—èŠ‚æ•°æ˜¯ï¼ŸA: ç¬¬ä¸€ä¸ªæ®µçš„ACKæ®µä¸­é€šå‘Šçš„æ¥æ”¶çª—å£rwndå¤§å°ä¸º3000å­—èŠ‚ï¼Œå³è¡¨æ˜åœ¨æ¥å—åˆ°ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µåï¼Œè¿˜æœ‰2000å­—èŠ‚çš„ç¼“å­˜ç©ºé—´å¯ç”¨ã€‚ ç”±äºå‘é€æ–¹å‘é€äº†äºŒä¸ªæŠ¥æ–‡æ®µï¼Œç¬¬äºŒä¸ªæ®µå°†å ç”¨å‰©ä¸‹çš„3000å­—èŠ‚ä¸­çš„1000å­—èŠ‚ï¼Œå³ä¸€å…±è¿˜æœ‰ 3000-1000=2000å­—èŠ‚ï¼Œmin{2000,CongestionWindowSize} = 2000,æ‰€ä»¥æ­¤æ—¶ä¸»æœºç”²è¿˜å¯ä»¥å‘ä¸»æœºä¹™å‘é€çš„æœ€å¤§å­—èŠ‚æ•°æ˜¯2000Byte TCP Connection ManagementHow a TCP connection is established and torn down? three-way handshakeå‡è®¾ä¸€ä¸ªä¸»æœºï¼ˆå®¢æˆ·ç«¯ï¼‰ä¸Šçš„è¿›ç¨‹å¸Œæœ›ä¸å¦ä¸€ä¸ªä¸»æœºï¼ˆæœåŠ¡å™¨ï¼‰ä¸Šçš„è¿›ç¨‹å»ºç«‹è¿æ¥ã€‚å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºé¦–å…ˆé€šçŸ¥å®¢æˆ·ç«¯çš„ TCP å®ƒå¸Œæœ›ä¸æœåŠ¡å™¨ä¸­çš„è¿›ç¨‹å»ºç«‹è¿æ¥ã€‚ç„¶åï¼Œå®¢æˆ·ç«¯çš„ TCP æŒ‰ç…§ä»¥ä¸‹æ–¹å¼ä¸æœåŠ¡å™¨çš„ TCP å»ºç«‹è¿æ¥ï¼š Step 1ï¼šå®¢æˆ·ç«¯ TCP é¦–å…ˆå‘æœåŠ¡å™¨ TCP å‘é€ä¸€ä¸ªç‰¹æ®Šçš„ TCP æ®µã€‚è¿™ä¸ªç‰¹æ®Šæ®µä¸­ä¸åŒ…å«åº”ç”¨å±‚æ•°æ®ã€‚ä½†æ˜¯æ®µå¤´éƒ¨(Segment Header)ä¸­çš„ SYN æ ‡å¿—ä½ï¼Œè¢«è®¾ç½®ä¸º 1ã€‚å› æ­¤ï¼Œè¿™ä¸ªç‰¹æ®Šæ®µè¢«ç§°ä¸º SYN Segmentã€‚æ­¤å¤–ï¼Œå®¢æˆ·ç«¯éšæœºé€‰æ‹©ä¸€ä¸ªåˆå§‹åºåˆ—å·ï¼ˆclient_isnï¼‰ï¼Œå¹¶å°†æ­¤å·ç æ”¾å…¥åˆå§‹ TCP SYN æ®µçš„åºåˆ—å·å­—æ®µä¸­ã€‚æ­¤æ®µè¢«å°è£…åœ¨ä¸€ä¸ª IP æ•°æ®æŠ¥ä¸­å¹¶å‘é€åˆ°æœåŠ¡å™¨ Step 2ï¼šä¸€æ—¦åŒ…å« TCP SYN æ®µçš„ IP æ•°æ®æŠ¥åˆ°è¾¾æœåŠ¡å™¨ä¸»æœºï¼ŒæœåŠ¡å™¨å°† TCP SYN æ®µä»æ•°æ®æŠ¥ä¸­æå–å‡ºæ¥ï¼Œä¸ºè¿æ¥åˆ†é… TCP ç¼“å†²åŒºå’Œå˜é‡ï¼Œå¹¶å‘å®¢æˆ·ç«¯ TCP å‘é€è¿æ¥ç¡®è®¤æ®µã€‚è¿™ä¸ªè¿æ¥ç¡®è®¤æ®µä¹Ÿä¸åŒ…å«åº”ç”¨å±‚æ•°æ®ã€‚ç„¶è€Œï¼Œå®ƒåœ¨æ®µå¤´éƒ¨åŒ…å«ä¸‰ä¸ªé‡è¦çš„ä¿¡æ¯ã€‚é¦–å…ˆï¼ŒSYN ä½è¢«è®¾ç½®ä¸º 1ã€‚å…¶æ¬¡ï¼ŒTCP æ®µå¤´éƒ¨çš„ç¡®è®¤å­—æ®µè¢«è®¾ç½®ä¸º client_isn+1ã€‚æœ€åï¼ŒæœåŠ¡å™¨é€‰æ‹©è‡ªå·±çš„åˆå§‹åºåˆ—å·ï¼ˆserver_isnï¼‰å¹¶å°†æ­¤å€¼æ”¾å…¥ TCP æ®µå¤´éƒ¨çš„åºåˆ—å·å­—æ®µä¸­ã€‚è¿™ä¸ªè¿æ¥ç¡®è®¤æ®µå®é™…ä¸Šåœ¨è¯´ï¼Œâ€œæˆ‘æ”¶åˆ°äº†ä½ çš„ SYN åŒ…ï¼Œè¦æ±‚ä»¥ä½ çš„åˆå§‹åºåˆ—å· client_isn å¼€å§‹ä¸€ä¸ªè¿æ¥ã€‚æˆ‘åŒæ„å»ºç«‹è¿™ä¸ªè¿æ¥ã€‚æˆ‘çš„åˆå§‹åºåˆ—å·æ˜¯ server_isnã€‚â€è¿™ä¸ªè¿æ¥ç¡®è®¤æ®µè¢«ç§°ä¸º SYNACK æ®µã€‚ Step 3ï¼šæ”¶åˆ° SYNACK æ®µåï¼Œå®¢æˆ·ç«¯ä¹Ÿä¸ºè¿æ¥åˆ†é…ç¼“å†²åŒºå’Œå˜é‡ã€‚ç„¶åï¼Œå®¢æˆ·ç«¯ä¸»æœºå‘æœåŠ¡å™¨å‘é€å¦ä¸€ä¸ªæ®µï¼›è¿™ä¸ªæœ€åçš„æ®µç¡®è®¤äº†æœåŠ¡å™¨çš„è¿æ¥ç¡®è®¤æ®µï¼ˆå®¢æˆ·ç«¯é€šè¿‡å°†å€¼ server_isn+1 æ”¾å…¥ TCP æ®µå¤´éƒ¨çš„ç¡®è®¤å­—æ®µä¸­æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼‰ã€‚SYN ä½è¢«è®¾ç½®ä¸ºé›¶ï¼Œå› ä¸ºè¿æ¥å·²ç»å»ºç«‹ã€‚ç¬¬ä¸‰æ¬¡æ¡æ‰‹æ—¶å®¢æˆ·ç«¯å¯ä»¥åœ¨æŠ¥æ–‡ä¸­åŠ å…¥æ•°æ® ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ä¸‰æ¬¡æ¡æ‰‹ï¼ˆThree-Way Handshakeï¼‰æ˜¯ TCP/IP åè®®ä¸­å»ºç«‹è¿æ¥çš„è¿‡ç¨‹ï¼Œå…¶ä¸»è¦ç›®çš„æ˜¯åœ¨ä¸¤ä¸ª TCP èŠ‚ç‚¹ä¹‹é—´å»ºç«‹ä¸€ä¸ªå¯é çš„è¿æ¥ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› ï¼šç¡®è®¤åŒæ–¹çš„æ¥æ”¶ä¸å‘é€èƒ½åŠ›ï¼šä¸‰æ¬¡æ¡æ‰‹ç¡®ä¿äº†åŒæ–¹éƒ½æœ‰å‘é€å’Œæ¥æ”¶æ•°æ®çš„èƒ½åŠ›ã€‚å½“å®¢æˆ·ç«¯å‘é€ SYN åŒ…ç»™æœåŠ¡å™¨æ—¶ï¼Œè¿™è¡¨æ˜å®¢æˆ·ç«¯æœ‰å‘é€æ•°æ®çš„èƒ½åŠ›ï¼›å½“æœåŠ¡å™¨å›åº” SYN-ACK åŒ…ç»™å®¢æˆ·ç«¯æ—¶ï¼Œè¿™è¡¨æ˜æœåŠ¡å™¨æœ‰æ¥æ”¶å’Œå‘é€æ•°æ®çš„èƒ½åŠ›ï¼›å½“å®¢æˆ·ç«¯å†å›åº” ACK åŒ…ç»™æœåŠ¡å™¨æ—¶ï¼Œè¿™è¡¨æ˜å®¢æˆ·ç«¯æœ‰æ¥æ”¶æ•°æ®çš„èƒ½åŠ›ã€‚é˜²æ­¢è¿‡æœŸçš„è¿æ¥è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨ï¼šå¦‚æœåªæœ‰ä¸€æ¬¡æ¡æ‰‹ï¼Œé‚£ä¹ˆè¿‡æœŸçš„è¿æ¥è¯·æ±‚å¯èƒ½ä¼šå¯¼è‡´æœåŠ¡å™¨é”™è¯¯åœ°æ‰“å¼€è¿æ¥ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå®¢æˆ·ç«¯å‘é€äº†ä¸€ä¸ªè¿æ¥è¯·æ±‚ï¼Œä½†æ˜¯å› ä¸ºç½‘ç»œå»¶è¿Ÿï¼Œè¿™ä¸ªè¯·æ±‚æ™šåˆ°äº†ï¼Œè€Œåœ¨æ­¤æœŸé—´ï¼Œå®¢æˆ·ç«¯å·²ç»å…³é—­äº†è¿æ¥ï¼Œé‚£ä¹ˆå¦‚æœæœåŠ¡å™¨æ¥æ”¶åˆ°è¿™ä¸ªè¿‡æœŸçš„è¯·æ±‚ï¼Œå°±ä¼šé”™è¯¯åœ°æ‰“å¼€ä¸€ä¸ªå·²ç»ä¸å­˜åœ¨çš„è¿æ¥ã€‚è€Œä¸‰æ¬¡æ¡æ‰‹å¯ä»¥é˜²æ­¢è¿™ç§æƒ…å†µï¼Œå› ä¸ºå³ä½¿æœåŠ¡å™¨æ¥æ”¶åˆ°äº†è¿‡æœŸçš„ç¬¬ä¸€ä¸ª SYN åŒ…ï¼Œä½†æ˜¯åœ¨æ²¡æœ‰æ”¶åˆ°æœ€åä¸€ä¸ª ACK åŒ…ä¹‹å‰ï¼ŒæœåŠ¡å™¨æ˜¯ä¸ä¼šæ‰“å¼€è¿æ¥çš„ã€‚åˆå§‹åŒ–åºåˆ—å·ï¼šæ¯ä¸ª TCP è¿æ¥éƒ½æœ‰å„è‡ªç‹¬ç«‹çš„åºåˆ—å·ï¼Œè¿™äº›åºåˆ—å·åœ¨è¿æ¥è¿‡ç¨‹ä¸­è¢«åˆå§‹åŒ–ã€‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½åœ¨ SYN åŒ…ä¸­å‘é€è‡ªå·±çš„åˆå§‹åºåˆ—å·ï¼Œè¿™æ ·ï¼ŒåŒæ–¹éƒ½èƒ½çŸ¥é“å¯¹æ–¹çš„åˆå§‹åºåˆ—å·ï¼Œä»¥ä¾¿åç»­çš„æ•°æ®ä¼ è¾“ã€‚ four-way handshake Step 1: å®¢æˆ·å‘é€ TCP FIN æ§åˆ¶æŠ¥æ–‡æ®µåˆ°æœåŠ¡å™¨ Step 2: æœåŠ¡å™¨æ¥æ”¶ FIN, å›å¤ ACK. è¿›å…¥åŠå…³é—­è¿æ¥çŠ¶æ€ï¼› Step 3: æœåŠ¡å™¨å‘é€ FIN åˆ°å®¢æˆ·ï¼Œå®¢æˆ·æ¥æ”¶ FIN, å›å¤ ACKï¼Œè¿›å…¥ â€œtime waitâ€çŠ¶æ€ç­‰å¾…ç»“æŸæ—¶é‡Šæ”¾è¿æ¥èµ„æº Step 4: æœåŠ¡å™¨æ¥æ”¶ ACK. è¿æ¥å…³é—­. ä¸ºä»€ä¹ˆéœ€è¦å››æ¬¡æŒ¥æ‰‹ï¼Œè€Œä¸æ˜¯ä¸¤æ¬¡æˆ–è€…ä¸‰æ¬¡å‘¢ï¼Ÿè¿™æ˜¯å› ä¸º TCP æ˜¯ä¸€ä¸ªå…¨åŒå·¥åè®®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°æ®å¯ä»¥åœ¨ä¸¤ä¸ªæ–¹å‘ä¸ŠåŒæ—¶ä¼ è¾“ã€‚å› æ­¤ï¼Œæ¯ä¸ªæ–¹å‘éƒ½éœ€è¦ä¸€ä¸ª FIN å’Œä¸€ä¸ª ACKã€‚A éœ€è¦å‘Šè¯‰ B å®ƒå·²ç»æ²¡æœ‰æ•°æ®è¦å‘é€äº†ï¼ˆFIN-1ï¼‰ï¼Œå¹¶ä¸”éœ€è¦ç¡®è®¤ B å·²ç»çŸ¥é“è¿™ä¸€ç‚¹ï¼ˆACK-2ï¼‰ã€‚åŒæ ·ï¼ŒB ä¹Ÿéœ€è¦å‘Šè¯‰ A å®ƒå·²ç»æ²¡æœ‰æ•°æ®è¦å‘é€äº†ï¼ˆFIN-2ï¼‰ï¼Œå¹¶ä¸”éœ€è¦ç¡®è®¤ A å·²ç»çŸ¥é“è¿™ä¸€ç‚¹ï¼ˆACK-1ï¼‰ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å››æ¬¡æŒ¥æ‰‹æ¥å…³é—­ä¸€ä¸ª TCP è¿æ¥ã€‚ TCP State Principles of Congestion Controlæ‹¥å¡ Congestionä»ä¿¡æ¯è§’åº¦çœ‹: â€œå¤ªå¤šæºä¸»æœºå‘é€å¤ªå¤šçš„æ•°æ®ï¼Œé€Ÿåº¦å¤ªå¿«ä»¥è‡³äºç½‘ç»œæ¥ä¸åŠå¤„ç†â€è¡¨ç°:ä¸¢å¤±åˆ†ç»„ (è·¯ç”±å™¨çš„ç¼“å†²åŒºæº¢å‡º)é•¿å»¶è¿Ÿ (åœ¨è·¯ç”±å™¨çš„ç¼“å†²åŒºæ’é˜Ÿ) æµé‡æ§åˆ¶ä¸»è¦ç›®çš„æ˜¯é˜²æ­¢å‘é€ç«¯å‘é€è¿‡å¤šçš„æ•°æ®ï¼Œä»è€Œæº¢å‡ºæ¥æ”¶ç«¯çš„ç¼“å†²åŒºã€‚æ‹¥å¡æ§åˆ¶çš„ç›®æ ‡æ˜¯é˜²æ­¢è¿‡å¤šçš„æ•°æ®å¡«å……ç½‘ç»œï¼Œä»¥é¿å…ç½‘ç»œæ‹¥å¡ã€‚å½“ç½‘ç»œä¸­çš„æ•°æ®åŒ…è¿‡å¤šï¼Œè¶…è¿‡äº†ç½‘ç»œçš„æ‰¿è½½èƒ½åŠ›ï¼Œå°±ä¼šå¯¼è‡´ç½‘ç»œæ‹¥å¡ã€‚ç½‘ç»œæ‹¥å¡å¯èƒ½å¯¼è‡´æ•°æ®åŒ…çš„ä¸¢å¤±ï¼Œè¿›è€Œå¼•å‘å‘é€ç«¯çš„è¶…æ—¶é‡ä¼ ï¼Œè¿™åè¿‡æ¥åˆä¼šåŠ å‰§ç½‘ç»œæ‹¥å¡ï¼Œå½¢æˆæ¶æ€§å¾ªç¯ã€‚ The Causes and the Costs of Congestion å½“åˆ†ç»„çš„åˆ°è¾¾é€Ÿç‡æ¥è¿‘é“¾è·¯å®¹é‡æ—¶ï¼Œåˆ†ç»„ç»å†å·¨å¤§çš„æ’é˜Ÿæ—¶å»¶ï¼› å‘é€æ–¹åœ¨é‡åˆ°å¤§æ—¶å»¶æ—¶æ‰€è¿›è¡Œçš„ä¸å¿…è¦é‡ä¼ ä¼šå¼•èµ·è·¯ç”±å™¨åˆ©ç”¨å…¶é“¾è·¯å¸¦å®½æ¥è½¬å‘ä¸å¿…è¦çš„åˆ†ç»„å‰¯æœ¬ï¼› å½“ä¸€ä¸ªåˆ†ç»„æ²¿ä¸€æ¡è·¯å¾„è¢«ä¸¢å¼ƒæ—¶ï¼Œæ¯ä¸ªä¸Šæ¸¸è·¯ç”±å™¨ç”¨äºè½¬å‘è¯¥åˆ†ç»„åˆ°ä¸¢å¼ƒè¯¥åˆ†ç»„è€Œä½¿ç”¨çš„ä¼ è¾“å®¹é‡æœ€ç»ˆè¢«æµªè´¹æ‰ï¼› Approaches to Congestion Controlç«¯åˆ°ç«¯æ‹¥å¡æ§åˆ¶ End-to-end congestion controlåœ¨ç«¯åˆ°ç«¯æ‹¥å¡æ§åˆ¶æ–¹æ³•ä¸­ï¼Œç½‘ç»œå±‚æ²¡æœ‰ä¸ºè¿è¾“å±‚æ‹¥å¡æ§åˆ¶æ˜¾ç¤ºæ”¯æŒã€‚å³ä½¿ç½‘ç»œä¸­å­˜åœ¨æ‹¥å¡ï¼Œç«¯ç³»ç»Ÿä¹Ÿå¿…é¡»é€šè¿‡å¯¹ç½‘ç»œè¡Œä¸ºçš„è§‚å¯Ÿæ¥åˆ¤æ–­ï¼›ç½‘ç»œè¾…åŠ©çš„æ‹¥å¡æ§åˆ¶ Network-assisted congestion controlç½‘ç»œè¾…åŠ©çš„æ‹¥å¡æ§åˆ¶ä¸­ï¼Œè·¯ç”±å™¨å‘å‘é€æ–¹æä¾›å…³äºç½‘ç»œä¸­æ‹¥å¡çŠ¶æ€çš„æ˜¾ç¤ºåé¦ˆä¿¡æ¯ï¼› TCP Congestion ControlTCP é‡‡å–çš„æ–¹æ³•æ˜¯è®©æ¯ä¸ªå‘é€è€…æ ¹æ®æ„ŸçŸ¥åˆ°çš„ç½‘ç»œæ‹¥å¡æƒ…å†µæ¥é™åˆ¶å…¶å‘é€æµé‡çš„é€Ÿç‡ã€‚å¦‚æœ TCP å‘é€è€…æ„ŸçŸ¥åˆ°è‡ªå·±å’Œç›®çš„åœ°ä¹‹é—´çš„è·¯å¾„ä¸Šå‡ ä¹æ²¡æœ‰æ‹¥å¡ï¼Œé‚£ä¹ˆ TCP å‘é€è€…ä¼šå¢åŠ å…¶å‘é€é€Ÿç‡ï¼›å¦‚æœå‘é€è€…æ„ŸçŸ¥åˆ°è·¯å¾„ä¸Šå­˜åœ¨æ‹¥å¡ï¼Œé‚£ä¹ˆå‘é€è€…ä¼šé™ä½å…¶å‘é€é€Ÿç‡ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•å¼•å‡ºäº†ä¸‰ä¸ªé—®é¢˜ã€‚é¦–å…ˆï¼ŒTCP å‘é€è€…å¦‚ä½•é™åˆ¶å…¶å‘å…¶è¿æ¥å‘é€æµé‡çš„é€Ÿç‡ï¼Ÿå…¶æ¬¡ï¼ŒTCP å‘é€è€…å¦‚ä½•æ„ŸçŸ¥åˆ°è‡ªå·±å’Œç›®çš„åœ°ä¹‹é—´çš„è·¯å¾„ä¸Šå­˜åœ¨æ‹¥å¡ï¼Ÿç¬¬ä¸‰ï¼Œå‘é€è€…åº”è¯¥ä½¿ç”¨ä»€ä¹ˆç®—æ³•æ¥æ ¹æ®æ„ŸçŸ¥åˆ°çš„ç«¯åˆ°ç«¯æ‹¥å¡æ¥æ”¹å˜å…¶å‘é€é€Ÿç‡ï¼Ÿ å¦‚ä½•é™åˆ¶é€Ÿç‡å‰æ–‡è®²åˆ°æ¯ä¸ª TCP è¿æ¥çš„ä¸¤ç«¯éƒ½æœ‰ä¸€ä¸ªæ¥æ”¶ç¼“å†²åŒºï¼Œä¸€ä¸ªå‘é€ç¼“å†²åŒºï¼Œä»¥åŠå‡ ä¸ªå˜é‡ï¼ˆLastByteReadï¼Œrwnd ç­‰ï¼‰ã€‚å®ç°æ‹¥å¡æ§ï¼Œï¼Œéœ€è¦ç»´æŠ¤ä¸€ä¸ªé¢å¤–çš„å˜é‡ï¼Œå³æ‹¥å¡çª—å£ congestion window,è®°ä¸º cwndï¼Œå¯¹ TCP å‘é€è€…å¯ä»¥å‘ç½‘ç»œå‘é€æµé‡çš„é€Ÿç‡æ–½åŠ äº†çº¦æŸã€‚ $$ LastByteSent-LastByteACKed\\le \\min\\{CongWin,RcvWindow\\} \\\\ å¤§ä½“ä¸Šæœ‰ rate = \\frac{CongWin}{RTT} Bytes/sec $$ ä¸Šé¢çš„çº¦æŸé™åˆ¶äº†å‘é€è€…å¤„æœªç¡®è®¤çš„æ•°æ®é‡ï¼Œå› æ­¤é—´æ¥åœ°é™åˆ¶äº†å‘é€è€…çš„å‘é€é€Ÿç‡ã€‚ å¦‚ä½•æ„ŸçŸ¥æ‹¥å¡å½“å­˜åœ¨è¿‡åº¦æ‹¥å¡æ—¶ï¼Œè·¯å¾„ä¸Šçš„ä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰è·¯ç”±å™¨ç¼“å†²åŒºä¼šæº¢å‡ºï¼Œå¯¼è‡´ä¸€ä¸ªæ•°æ®æŠ¥ï¼ˆåŒ…å«ä¸€ä¸ª TCP æ®µï¼‰è¢«ä¸¢å¼ƒã€‚ä¸¢å¼ƒçš„æ•°æ®æŠ¥åè¿‡æ¥å¯¼è‡´å‘é€è€…å¤„å‡ºç°ä¸€ä¸ªä¸¢å¤±äº‹ä»¶â€”â€”è¦ä¹ˆè¶…æ—¶ï¼Œè¦ä¹ˆæ¥æ”¶åˆ°ä¸‰ä¸ªé‡å¤ ACKâ€”â€”è¿™è¢«å‘é€è€…è§†ä¸ºå‘é€è€…åˆ°æ¥æ”¶è€…è·¯å¾„ä¸Šå­˜åœ¨æ‹¥å¡çš„æŒ‡ç¤ºã€‚ å› ä¸º TCP ä½¿ç”¨ç¡®è®¤æ¥è§¦å‘ï¼ˆæˆ–æ—¶é’Ÿï¼‰å…¶æ‹¥å¡çª—å£å¤§å°çš„å¢åŠ ï¼Œæ‰€ä»¥ TCP è¢«ç§°ä¸ºè‡ªè®¡æ—¶(self-clocking)ã€‚TCP åŸºäºæœ¬åœ°ä¿¡æ¯è®¾ç½®å®ƒä»¬çš„å‘é€é€Ÿç‡çš„æŒ‡å¯¼æ€§åŸåˆ™ï¼š ä¸€ä¸ªä¸¢å¤±çš„æŠ¥æ–‡æ®µè¡¨æ„å‘³ç€æ‹¥å¡ï¼ŒTCP å‘é€æ–¹åœ¨ä¸¢å¤±äº‹ä»¶å‘ç”Ÿåé™ä½å‘é€é€Ÿç‡ (é€šè¿‡å‡å°‘ CongWin) ä¸€ä¸ªç¡®è®¤æŠ¥æ–‡æ®µæŒ‡ç¤ºè¯¥ç½‘ç»œæ­£åœ¨å‘æ¥æ”¶æ–¹äº¤ä»˜å‘é€æ–¹çš„æŠ¥æ–‡æ®µï¼Œå› æ­¤ï¼Œå½“å¯¹å…ˆå‰æœªç¡®è®¤æŠ¥æ–‡æ®µçš„ç¡®è®¤åˆ°è¾¾æ—¶ï¼Œèƒ½å¤Ÿå¢åŠ å‘é€æ–¹çš„é€Ÿç‡ï¼› æ¢æ±‚å¸¦å®½ Bandwidth probing. æ‹¥å¡æ§åˆ¶ç®—æ³•å®ç° æ‹¥å¡æ§åˆ¶ç®—æ³•ä¸»è¦åŒ…æ‹¬æ…¢å¯åŠ¨ï¼ˆslow-startï¼‰ã€æ‹¥å¡é¿å…ï¼ˆcongestion avoidanceï¼‰ã€å¿«é€Ÿæ¢å¤ï¼ˆfast recoveryï¼‰ åœ¨æ…¢å¯åŠ¨ï¼ˆslow-startï¼‰çŠ¶æ€ï¼Œcwndçš„åˆå§‹å€¼ä¸º 1 ä¸ª MSSï¼Œ æ¯å½“ä¼ è¾“çš„æŠ¥æ–‡æ®µé¦–æ¬¡è¢«ç¡®è®¤å°±å¢åŠ  1 ä¸ª MSSã€‚TCP å‘é€é€Ÿç‡èµ·å§‹å¾ˆæ…¢ï¼Œä½†åœ¨æ…¢å¯åŠ¨é˜¶æ®µä»¥æŒ‡æ•°å¢é•¿ï¼Œå°½å¿«è¾¾åˆ°æœŸå¾…çš„é€Ÿç‡ï¼Œæ•…å°†ä»¥ 2 çš„æŒ‡æ•°æ–¹å¼å¢åŠ é€Ÿç‡ï¼Œç›´åˆ°äº§ç”Ÿä¸¢å¤±äº‹ä»¶ï¼Œæˆ–è€… cwnd å¤§äºç­‰äº ssthresd(è¿›å…¥ Congestion Avoidance æ¨¡å¼),cwnd ä¼šç”±æŒ‡æ•°å¢é•¿å˜ä¸ºçº¿æ€§å¢é•¿ MSS: Maximum Segment Size, ä¸€ä¸ª TCP æŠ¥æ–‡æ®µçš„æœ€å¤§é•¿åº¦ssthresh: slow start threshold, æ…¢å¯åŠ¨é˜ˆå€¼ å¦‚æœå­˜åœ¨ä¸€ä¸ªç”±è¶…æ—¶æŒ‡ç¤ºçš„ä¸¢åŒ…äº‹ä»¶ï¼ŒTCP å‘é€æ–¹å°† cwnd(Congestion Window)è®¾ç½®ä¸º 1 å¹¶é‡æ–°å¼€å§‹æ…¢å¯åŠ¨è¿‡ç¨‹ã€‚å¹¶å°†å˜é‡ ssthreshè®¾ç½®ä¸º cwnd/2æ”¶åˆ°ä¸‰ä¸ªé‡å¤çš„ç¡®è®¤æ—¶,å°†å˜é‡ ssthreshè®¾ç½®ä¸º cwnd/2, cwndè®¾ç½®ä¸º ssthresh(æ›´æ–°åçš„) + 3MSSï¼Œå¹¶è¿›å…¥å¿«é€Ÿæ¢å¤çŠ¶æ€ æ€ä¹ˆç†è§£ä¸åŒçš„ä¸¢åŒ…äº‹ä»¶ï¼Ÿ3 ä¸ªé‡å¤çš„ ACKs è¡¨æ˜ç½‘ç»œå…·æœ‰ä¼ è¾“ä¸€äº›æ•°æ®æ®µçš„èƒ½åŠ›åœ¨ä¸‰ä¸ªé‡å¤çš„ç¡®è®¤ä¹‹å‰è¶…æ—¶ï¼Œè¡¨æ˜ç½‘ç»œä¸å…·å¤‡ä¼ è¾“æ•°æ®æ®µçš„èƒ½åŠ›ä¸Šè¿°ä¸º TCP Reno ç‰ˆæœ¬çš„å†…å®¹ï¼Œåœ¨ TCP Tahoe ç‰ˆæœ¬é‡Œï¼Œæ— è®ºè¶…æ—¶è¿˜æ˜¯ä¸‰ä¸ªé‡å¤ï¼Œéƒ½ç›´æ¥å°† CongWin ç½®ä¸º 1 ä¸ª MSS ä¸‰ä¸ªçŠ¶æ€å˜æ¢ FSM å¦‚ä¸‹å›¾ï¼š TCP AIMD(Additive-increase,multiplicative-decrease)å‘é€æ–¹å¢åŠ ä¼ è¾“é€Ÿç‡ï¼ˆçª—å£å¤§å°ï¼‰ï¼Œæ¢æµ‹å¯ç”¨å¸¦å®½ï¼Œç›´åˆ°å‘ç”Ÿä¸¢åŒ…äº‹ä»¶ä¹˜æ€§é€’å‡: å‘ç”Ÿä¸¢åŒ…äº‹ä»¶åå°†æ‹¥å¡çª—å£å‡åŠåŠ æ€§é€’å¢: æ¯ä¸ª RTT å†…å¦‚æœæ²¡æœ‰ä¸¢å¤±äº‹ä»¶å‘ç”Ÿï¼Œæ‹¥å¡çª—å£å¢åŠ ä¸€ä¸ª MSS Congestion Controlä¾‹é¢˜ Q ä¸»æœºç”²å’Œä¸»æœºä¹™å·²å»ºç«‹äº† TCP è¿æ¥ï¼Œç”²å§‹ç»ˆä»¥ MSS=1KB å¤§å°çš„æ®µå‘é€æ•°æ®ï¼Œå¹¶ä¸€ç›´æœ‰æ•°æ®å‘é€ï¼›ä¹™æ¯æ”¶åˆ°ä¸€ä¸ªæ•°æ®æ®µéƒ½ä¼šå‘å‡ºä¸€ä¸ªæ¥æ”¶çª—å£ä¸º 10KB çš„ç¡®è®¤æ®µã€‚è‹¥ç”²åœ¨ t æ—¶åˆ»å‘ç”Ÿè¶…æ—¶æ—¶æ‹¥å¡çª—å£ä¸º 8KBï¼Œåˆ™ä» t æ—¶åˆ»èµ·ï¼Œä¸å†å‘ç”Ÿè¶…æ—¶çš„æƒ…å†µä¸‹ï¼Œç»è¿‡ 10 ä¸ª RTT åï¼Œç”²çš„å‘é€çª—å£æ˜¯A ssthresh è¢«è®¾å®šä¸º 8 çš„ä¸€åŠå³ 4ï¼Œæ‹¥å¡çª—å£è¢«è®¾ä¸º 1KB;æ‹¥å¡çª—å£ç» 10 ä¸ª RTT ä¾æ¬¡å˜åŒ–ä¸º 2ã€4ï¼ˆæœªè¶…è¿‡ ssthresh å€¼ä¹‹å‰ä»¥æŒ‡æ•°çº§å¢é•¿ï¼Œåé¢è¶…è¿‡ ssthresh ä¹‹åä»¥æ•°é‡çº§å¢é•¿ï¼‰ã€5ã€6ã€7ã€8ã€9ã€10ã€11ã€12ï¼Œæœ€ç»ˆè¾¾åˆ° 12KB;è€Œæµé‡æ§åˆ¶çš„è§’åº¦å‡ºå‘ï¼Œæ¥å—çª—å£æ’ä¸º 10KB,å‘é€æ–¹çš„å‘é€çª—å£=min(æ‹¥å¡çª—å£ï¼Œæ¥æ”¶çª—å£),æ•…æœ€åç­”æ¡ˆæ˜¯ 10KB æ€»ç»“ å½“ CongWin ä½äºé˜€å€¼, å‘é€æ–¹å¤„äºæ…¢å¯åŠ¨é˜¶æ®µ, çª—å£æŒ‡æ•°å¢é•¿. å½“ CongWin é«˜äºé˜€å€¼, å‘é€æ–¹å¤„äºæ‹¥å¡é¿å…é˜¶æ®µ, çª—å£çº¿æ€§å¢é•¿. å½“ä¸‰ä¸ªé‡å¤çš„ ACK å‡ºç°æ—¶,é˜€å€¼ç½®ä¸º CongWin/2 å¹¶ä¸” CongWin ç½®ä¸ºé˜€å€¼åŠ ä¸Š 3 ä¸ª MSS å¹¶è¿›å…¥å¿«é€Ÿæ¢å¤é˜¶æ®µï¼Œæ­¤æ—¶æ¯æ”¶åˆ°ä¸€ä¸ªé‡å¤çš„ ACK æ‹¥å¡çª—å£å¢åŠ  1MSSï¼Œå¦‚æœæ”¶åˆ°æ–°çš„ ACK åˆ™ cwnd = ssthresh å½“è¶…æ—¶å‘ç”Ÿæ—¶ ï¼Œé˜€å€¼ç½®ä¸º CongWin/2 å¹¶ä¸” CongWin ç½®ä¸º 1 MSS. TCP å¹³å‡ååé‡å‡è®¾å¿½ç•¥æ…¢å¯åŠ¨å‡è®¾åœ¨ä¸¢å¤±å‘ç”Ÿæ—¶ï¼Œè®¾ W æ˜¯çª—å£å¤§å°å¦‚æœçª—å£ä¸º W, ååé‡æ˜¯ W/RTTä¸¢å¤±å‘ç”Ÿå, çª—å£é™ä¸º W/2, ååé‡ä¸º W/2RTT.å¹³å‡ååé‡ä¸º 0 .75 W/RTT TCP CUBICCUBIC æ˜¯ä¸€ç§ TCP æ‹¥å¡æ§åˆ¶ç®—æ³•ï¼Œå®ƒæ˜¯ Linux å†…æ ¸çš„é»˜è®¤æ‹¥å¡æ§åˆ¶ç®—æ³•ã€‚CUBIC ä¸»è¦ç”¨äºé•¿è·ç¦»ã€é«˜å¸¦å®½ç½‘ç»œï¼Œå®ƒçš„ç›®æ ‡æ˜¯æ›´å……åˆ†åœ°åˆ©ç”¨å¯ç”¨å¸¦å®½ï¼ŒåŒæ—¶ä¿æŒç½‘ç»œçš„ç¨³å®šæ€§ã€‚ CUBIC çš„å…³é”®ç‰¹æ€§æ˜¯å®ƒçš„æ‹¥å¡çª—å£è°ƒæ•´å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯æ—¶é—´çš„ä¸‰æ¬¡ç«‹æ–¹å‡½æ•°ã€‚è¿™ä¸ä¼ ç»Ÿçš„ TCP æ‹¥å¡æ§åˆ¶ç®—æ³•ï¼ˆå¦‚ TCP Reno æˆ– TCP NewRenoï¼‰ä¸åŒï¼Œåè€…ä½¿ç”¨çº¿æ€§æˆ–è€…äºŒæ¬¡å‡½æ•°æ¥è°ƒæ•´æ‹¥å¡çª—å£ã€‚ CUBIC çš„å·¥ä½œåŸç†å¦‚ä¸‹ï¼š å½“ç½‘ç»œå‡ºç°æ‹¥å¡ï¼ˆä¾‹å¦‚ï¼Œä¸¢å¤±äº†ä¸€ä¸ªæ•°æ®åŒ…ï¼‰æ—¶ï¼ŒCUBIC ä¼šå‡å°å…¶æ‹¥å¡çª—å£ï¼Œå°±åƒå…¶ä»– TCP æ‹¥å¡æ§åˆ¶ç®—æ³•ä¸€æ ·ã€‚ å½“ç½‘ç»œæ²¡æœ‰æ‹¥å¡æ—¶ï¼ŒCUBIC ä¸ä¼šåƒä¼ ç»Ÿçš„ TCP ç®—æ³•é‚£æ ·çº¿æ€§åœ°å¢åŠ å…¶æ‹¥å¡çª—å£ã€‚ç›¸åï¼Œå®ƒä¼šæ ¹æ®æ—¶é—´çš„ç«‹æ–¹å‡½æ•°æ¥å¢åŠ æ‹¥å¡çª—å£ã€‚è¿™æ„å‘³ç€åœ¨ç½‘ç»œæ¡ä»¶è‰¯å¥½æ—¶ï¼ŒCUBIC å¯ä»¥æ›´å¿«åœ°å¢åŠ å…¶å‘é€é€Ÿç‡ã€‚ å½“ç½‘ç»œå†æ¬¡å‡ºç°æ‹¥å¡æ—¶ï¼ŒCUBIC ä¼šå†æ¬¡å‡å°å…¶æ‹¥å¡çª—å£ï¼Œä½†æ˜¯å‡å°çš„é€Ÿåº¦ä¼šæ¯”ä¸Šæ¬¡æ…¢ã€‚è¿™ä½¿å¾— CUBIC èƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”ç½‘ç»œçš„å˜åŒ–ï¼Œé¿å…è¿‡åº¦ååº”ã€‚ CUBIC çš„è¿™äº›ç‰¹æ€§ä½¿å…¶åœ¨é«˜å¸¦å®½ã€é•¿è·ç¦»çš„ç½‘ç»œç¯å¢ƒä¸­è¡¨ç°å¾—éå¸¸å‡ºè‰²ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå®ƒè¢«é€‰ä¸º Linux å†…æ ¸çš„é»˜è®¤æ‹¥å¡æ§åˆ¶ç®—æ³•ã€‚","link":"/UESTC/ComputerNetworking/Ch5-2TransportLayer/"},{"title":"Glossary Of Networks","text":"OSI Modelå®ä½“ ä»»ä½•å¯å‘é€æˆ–æ¥å—ä¿¡æ¯çš„ç¡¬ä»¶æˆ–è½¯ä»¶è¿›ç¨‹å¯¹ç­‰å®ä½“ æ”¶å‘åŒæ–¹å±‚æ¬¡ç›¸åŒä¸­çš„å®ä½“åè®® Protocol æ§åˆ¶ä¸¤ä¸ªå¯¹ç­‰å®ä½“è¿›è¡Œé€»è¾‘é€šä¿¡çš„è§„åˆ™çš„é›†åˆåè®®ä¸‰è¦ç´ ï¼š è¯­æ³•ï¼šå®šä¹‰æ‰€äº¤æ¢ä¿¡æ¯çš„æ ¼å¼ è¯­ä¹‰ï¼šå®šä¹‰æ”¶å‘åŒæ–¹æ‰€è¦å®Œæˆçš„æ“ä½œ åŒæ­¥ï¼šå®šä¹‰æ”¶å‘åŒå‘çš„æ—¶åºå…³ç³»æœåŠ¡ Service åœ¨åè®®çš„æ§åˆ¶ä¸‹,ä¸¤ä¸ªå¯¹ç­‰å®ä½“é—´çš„é€»è¾‘é€šä¿¡ä½¿å¾—æœ¬å±‚èƒ½å¤Ÿå‘ä¸Šå±‚æä¾›çš„åŠŸèƒ½;è¦å®ç°æœ¬å±‚çš„åŠŸèƒ½,åˆéœ€è¦ä½¿ç”¨ä¸‹å±‚æä¾›çš„æœåŠ¡æœåŠ¡è®¿é—®ç‚¹ åœ¨ç»Ÿä¸€ç³»ç»Ÿä¸­ç›¸é‚»ä¸¤å±‚çš„å®ä½“äº¤æ¢ä¿¡æ¯çš„é€»è¾‘æ¥å£,ç”¨äºåŒºåˆ†ä¸åŒçš„æœåŠ¡ç±»å‹; æ•°æ®é“¾è·¯å±‚çš„æœåŠ¡è®¿é—®ç‚¹ä¸ºå¸§çš„ç±»å‹å­—æ®µ ç½‘ç»œå±‚çš„æœåŠ¡è®¿é—®ç‚¹ä¸º IP æ•°æ®æŠ¥é¦–éƒ¨ä¸­çš„åè®®å­—æ®µ è¿è¾“å±‚çš„æœåŠ¡è®¿é—®ç‚¹ä¸ºç«¯å£å·åè®®æ•°æ®å•å…ƒ PDU å¯¹ç­‰å±‚æ¬¡ä¹‹é—´ä¼ é€çš„æ•°æ®åŒ…æœåŠ¡æ•°æ®å•å…ƒ SDU åŒä¸€ç³»ç»Ÿå†…,å±‚é—´äº¤æ¢çš„æ•°æ®åŒ…å¤šä¸ª SDU å¯ä»¥ç»„æˆä¸€ä¸ª PDU,ä¹Ÿå¯ä»¥å°†ä¸€ä¸ª SDU åˆ†æˆå¤šä¸ª PDU Physical Layeræœºæ¢°ç‰¹æ€§ Mechanical Characteristics å®šä¹‰ç‰©ç†è¿æ¥ç‰¹æ€§,åŒ…æ‹¬ é‡‡ç”¨çš„è§„æ ¼,æ¥å£å½¢çŠ¶,å¼•çº¿æ•°ç›®,æ’åˆ—æƒ…å†µ,å¼•è„šæ•°é‡ç”µæ°”ç‰¹æ€§ Electrical Characteristics ä¼ è¾“äºŒè¿›åˆ¶æ—¶,ä¼ è¾“ä¿¡å·çš„ç”µå‹èŒƒå›´,é˜»æŠ—åŒ¹é…,ä¼ è¾“é€Ÿç‡,è·ç¦»é™åˆ¶åŠŸèƒ½ç‰¹æ€§ Functional Characteristics æè¿°ç”µå¹³çš„æ„ä¹‰,æ¥å£éƒ¨ä»¶,ä¿¡å·çº¿ç”¨é€”ç­‰è¿‡ç¨‹ç‰¹æ€§ Procedural Characteristics è§„å®š å„ä¸ªç‰©ç†çº¿è·¯å·¥ä½œè§„ç¨‹,æ—¶åºå…³ç³» ç”µæ°”ç‰¹æ€§æ ¹æ®ç”µå‹ç¡®å®šç”µå¹³,åŠŸèƒ½ç‰¹æ€§åˆ™æ˜¯æ ¹æ®ç”µå¹³ç¡®å®šä¿¡å·çš„æ„ä¹‰ ä¿¡é“ Channel,ä¿¡é“ä¸ç­‰äºç”µè·¯ï¼Œä¿¡é“è¡¨ç¤ºå‘æŸä¸€æ–¹å‘ä¼ é€ä¿¡æ¯çš„åª’ä½“ï¼Œä¸€æ¡é€šä¿¡ç”µè·¯é€šå¸¸åŒ…å«ä¸€æ¡å‘é€ä¿¡é“å’Œä¸€æ¡æ¥å—ä¿¡é“ã€‚ä¸¥æ ¼æ¥è¯´ï¼Œä¼ è¾“åª’ä½“ä¸èƒ½å’Œä¿¡é“åˆ’ç­‰å·,å¯¹äºå•å·¥ä¼ è¾“ï¼Œä¼ è¾“åª’ä½“åªåŒ…å«ä¸€ä¸ªä¿¡é“ï¼Œè¦ä¹ˆæ˜¯å‘é€ä¿¡é“ï¼Œè¦ä¹ˆæ˜¯æ¥æ”¶ä¿¡é“ã€‚å¯¹äºåŠåŒå·¥å’Œå…¨åŒå·¥ï¼Œä¼ è¾“åª’ä½“ä¸­è¦åŒ…å«ä¸¤ä¸ªä¿¡é“ï¼Œä¸€ä¸ªå‘é€ä¿¡é“ï¼Œå¦ä¸€ä¸ªæ˜¯æ¥æ”¶ä¿¡é“ã€‚å¦‚æœä½¿ç”¨ä¿¡é“å¤ç”¨æŠ€æœ¯ï¼Œä¸€æ¡ä¼ è¾“åª’ä½“è¿˜å¯ä»¥åŒ…å«å¤šä¸ªä¿¡é“ æ•°æ® (data) â€”â€” è¿é€æ¶ˆæ¯çš„å®ä½“ ä¿¡å· (signal) â€”â€” æ•°æ®çš„ç”µæ°”çš„æˆ–ç”µç£çš„è¡¨ç° æ¨¡æ‹Ÿä¿¡å· (analogous signal) â€”â€” ä»£è¡¨æ¶ˆæ¯çš„å‚æ•°çš„å–å€¼æ˜¯è¿ç»­çš„ æ•°å­—ä¿¡å· (digital signal) â€”â€” ä»£è¡¨æ¶ˆæ¯çš„å‚æ•°çš„å–å€¼æ˜¯ç¦»æ•£çš„ ç å…ƒ (code) â€”â€” åœ¨ä½¿ç”¨æ—¶é—´åŸŸï¼ˆæˆ–ç®€ç§°ä¸ºæ—¶åŸŸï¼‰çš„æ³¢å½¢è¡¨ç¤ºæ•°å­—ä¿¡å·æ—¶ï¼Œä»£è¡¨ä¸åŒç¦»æ•£æ•°å€¼çš„åŸºæœ¬æ³¢å½¢ åŸºå¸¦ä¿¡å·ï¼ˆå³åŸºæœ¬é¢‘å¸¦ä¿¡å·ï¼‰â€”â€” æ¥è‡ªä¿¡æºçš„ä¿¡å·ã€‚åƒè®¡ç®—æœºè¾“å‡ºçš„ä»£è¡¨å„ç§æ–‡å­—æˆ–å›¾åƒæ–‡ä»¶çš„æ•°æ®ä¿¡å·éƒ½å±äºåŸºå¸¦ä¿¡å·åŸºå¸¦ä¿¡å·å¾€å¾€åŒ…å«æœ‰è¾ƒå¤šçš„ä½é¢‘æˆåˆ†ï¼Œç”šè‡³æœ‰ç›´æµæˆåˆ†ï¼Œè€Œè®¸å¤šä¿¡é“å¹¶ä¸èƒ½ä¼ è¾“è¿™ç§ä½é¢‘åˆ†é‡æˆ–ç›´æµåˆ†é‡ã€‚å› æ­¤å¿…é¡»å¯¹åŸºå¸¦ä¿¡å·è¿›è¡Œè°ƒåˆ¶ (modulation) ç¼–ç Encoding æ˜¯å°†ä¿¡æ¯è½¬åŒ–ä¸ºç‰¹å®šæ ¼å¼ä»¥ä¾¿ä¼ è¾“å’Œå­˜å‚¨çš„è¿‡ç¨‹ã€‚åœ¨æ•°å­—é€šä¿¡ä¸­ï¼Œä¿¡æ¯é€šå¸¸ä»¥äºŒè¿›åˆ¶å½¢å¼è¡¨ç¤ºï¼Œå³ç”±ä¸€ä¸² 0 å’Œ 1 ç»„æˆã€‚å¸¸è§çš„ç¼–ç æ–¹å¼åŒ…æ‹¬ä¸å½’é›¶ç¼–ç ï¼ˆNRZï¼‰ã€éå½’é›¶ç¼–ç ï¼ˆRZï¼‰ã€æ›¼åˆ‡æ–¯ç‰¹ç¼–ç ç­‰ã€‚ä¸å½’é›¶ç¼–ç å°†æ¯ä¸ªäºŒè¿›åˆ¶ä½è¡¨ç¤ºä¸ºä¸€å®šçš„ç”µå¹³ï¼Œä½ç”µå¹³è¡¨ç¤º 0ï¼Œé«˜ç”µå¹³è¡¨ç¤º 1ï¼›éå½’é›¶ç¼–ç åœ¨æ¯ä¸ªäºŒè¿›åˆ¶ä½çš„ä¸­é—´è¿˜æ·»åŠ äº†ä¸€ä¸ªä¸­é—´ç”µå¹³ï¼Œä»¥è¡¨ç¤º 0 æˆ– 1 çš„è¾¹ç•Œï¼›æ›¼åˆ‡æ–¯ç‰¹ç¼–ç å°†æ¯ä¸ªäºŒè¿›åˆ¶ä½åˆ†æˆä¸¤ä¸ªæ—¶é—´é—´éš”ï¼Œæ¯ä¸ªæ—¶é—´é—´éš”è¡¨ç¤º 0 æˆ– 1ã€‚ è°ƒåˆ¶Modulation æ˜¯å°†æ•°å­—ä¿¡å·è½¬åŒ–ä¸ºæ¨¡æ‹Ÿä¿¡å·çš„è¿‡ç¨‹ï¼Œä½¿å¾—ä¿¡å·èƒ½å¤Ÿåœ¨ä¼ è¾“ä»‹è´¨ä¸­ä¼ æ’­ã€‚æ¨¡æ‹Ÿä¿¡å·é€šå¸¸ä½¿ç”¨è¿ç»­çš„å˜åŒ–æ¥è¡¨ç¤ºä¿¡æ¯ï¼Œå¦‚æ­£å¼¦æ³¢æˆ–æ–¹æ³¢ã€‚è°ƒåˆ¶æŠ€æœ¯å¯ä»¥å°†æ•°å­—ä¿¡å·è½¬åŒ–ä¸ºç‰¹å®šé¢‘ç‡èŒƒå›´å†…çš„æ¨¡æ‹Ÿä¿¡å·ï¼Œä»¥æ–¹ä¾¿ä¼ è¾“å’Œæ¥æ”¶ã€‚å¸¸è§çš„è°ƒåˆ¶æŠ€æœ¯åŒ…æ‹¬æŒ¯å¹…è°ƒåˆ¶ï¼ˆAMï¼‰ã€é¢‘ç‡è°ƒåˆ¶ï¼ˆFMï¼‰å’Œç›¸ä½è°ƒåˆ¶ï¼ˆPMï¼‰ç­‰ã€‚æŒ¯å¹…è°ƒåˆ¶é€šè¿‡æ”¹å˜æ¨¡æ‹Ÿä¿¡å·çš„å¹…åº¦æ¥è¡¨ç¤ºæ•°å­—ä¿¡å·çš„ 0 å’Œ 1ï¼›é¢‘ç‡è°ƒåˆ¶é€šè¿‡æ”¹å˜æ¨¡æ‹Ÿä¿¡å·çš„é¢‘ç‡æ¥è¡¨ç¤ºæ•°å­—ä¿¡å·çš„ 0 å’Œ 1ï¼›ç›¸ä½è°ƒåˆ¶é€šè¿‡æ”¹å˜æ¨¡æ‹Ÿä¿¡å·çš„ç›¸ä½æ¥è¡¨ç¤ºæ•°å­—ä¿¡å·çš„ 0 å’Œ 1ã€‚Ref: ç¼–ç å’Œè°ƒåˆ¶ Data Link Layeré“¾è·¯ Link æŒ‡ä»ä¸€ä¸ªç»“ç‚¹åˆ°ç›¸é‚»ç»“ç‚¹çš„ä¸€æ®µç‰©ç†çº¿è·¯ï¼Œä¸­é—´æ²¡æœ‰å…¶ä»–çš„äº¤æ¢ç»“ç‚¹æ•°æ®é“¾è·¯ Data Link æŠŠå®ç°é€šä¿¡åè®®çš„ç¡¬ä»¶å’Œè½¯ä»¶åŠ åˆ°é“¾è·¯ä¸Šï¼Œå°±æ„æˆäº†æ•°æ®é“¾è·¯Frame,å¸§,æ•°æ®é“¾è·¯å±‚çš„ä¼ è¾“å•ä½,ç”±æ•°æ®éƒ¨åˆ†å’Œæ§åˆ¶éƒ¨åˆ†ç»„æˆACK,ç¡®è®¤å¸§,æ¥æ”¶æ–¹æ”¶åˆ°å¸§å,è¿”å›ä¸€ä¸ªç¡®è®¤å¸§,è¡¨ç¤ºå·²ç»æ”¶åˆ°å¸§NAK,å¦å®šç¡®è®¤å¸§,æ¥æ”¶æ–¹æ”¶åˆ°å¸§å,è¿”å›ä¸€ä¸ªå¦å®šç¡®è®¤å¸§,è¡¨ç¤ºå¸§å‡ºé”™,è¦æ±‚é‡å‘ OthersURL,Uniform Resource Locator,ç»Ÿä¸€èµ„æºå®šä½ç¬¦,äº’è”ç½‘ä¸Šç”¨æ¥æ ‡è¯†èµ„æºçš„åœ°å€ã€‚ç½‘ç»œä¸Šçš„æ‰€æœ‰èµ„æºéƒ½é  URL æ¥å®šä½ï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶å°±å¯¹åº”ç€ä¸€ä¸ª URLï¼Œå°±åƒæ˜¯è·¯å¾„åœ°å€ã€‚ç†è®ºä¸Šï¼Œæ–‡ä»¶èµ„æºå’Œ URL ä¸€ä¸€å¯¹åº”ã€‚å®é™…ä¸Šä¹Ÿæœ‰ä¾‹å¤–ï¼Œæ¯”å¦‚æŸäº› URL æŒ‡å‘çš„æ–‡ä»¶å·²ç»è¢«é‡å®šä½åˆ°å¦ä¸€ä¸ªä½ç½®ï¼Œè¿™æ ·å°±æœ‰å¤šä¸ª URL æŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶ã€‚","link":"/UESTC/ComputerNetworking/GlossaryOfNetwork/"},{"title":"æ“ä½œç³»ç»Ÿæ¦‚è®º","text":"OS çš„å®šä¹‰å½“å‰å¯¹äº OS è¿˜æ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„ã€é€‚ç”¨çš„å®šä¹‰å®šä¹‰ 1:æ“ä½œç³»ç»Ÿæ˜¯ä¸€ç»„æ§åˆ¶å’Œç®¡ç†è®¡ç®—æœºè½¯ç¡¬ä»¶èµ„æºã€åˆç†åœ°å¯¹å„ç±»ä½œä¸šè¿›è¡Œè°ƒåº¦ä»¥åŠæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨çš„ç¨‹åºé›†åˆå®šä¹‰ 2:æ“ä½œç³»ç»Ÿæ˜¯ä½äºç¡¬ä»¶å±‚(HAL)ä¹‹ä¸Šï¼Œæ‰€æœ‰å…¶å®ƒç³»ç»Ÿè½¯ä»¶å±‚ä¹‹ä¸‹çš„ä¸€ä¸ªç³»ç»Ÿè½¯ä»¶ï¼Œä½¿å¾—ç®¡ç†ç³»ç»Ÿä¸­çš„å„ç§è½¯ä»¶å’Œç¡¬ä»¶èµ„æºå¾—ä»¥å……åˆ†åˆ©ç”¨ï¼Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨è®¡ç®—æœºç³»ç»Ÿ æ“ä½œç³»ç»Ÿçš„ç›®æ ‡å’Œä½œç”¨ç›®æ ‡ æ–¹ä¾¿æ€§:æ“ä½œç³»ç»Ÿä½¿è®¡ç®—æœºæ›´æ˜“äºä½¿ç”¨ã€‚ æœ‰æ•ˆæ€§:æ“ä½œç³»ç»Ÿå…è®¸ä»¥æ›´æœ‰æ•ˆçš„æ–¹å¼ä½¿ç”¨è®¡ç®—æœºç³»ç»Ÿèµ„æºã€‚ æé«˜ç³»ç»Ÿèµ„æºåˆ©ç”¨ç‡ æé«˜ç³»ç»Ÿçš„ååé‡ å¯æ‰©å±•æ€§:åœ¨æ“ä½œç³»ç»Ÿä¸­,å…è®¸æœ‰æ•ˆåœ°å¼€å‘ï¼Œæµ‹è¯•å’Œå¼•è¿›æ–°çš„ç³»ç»ŸåŠŸèƒ½ã€‚ å¼€æ”¾æ€§:å®ç°åº”ç”¨ç¨‹åºçš„å¯ç§»æ¤æ€§å’Œäº’æ“ä½œæ€§,è¦æ±‚å…·æœ‰ç»Ÿä¸€çš„å¼€æ”¾çš„ç¯å¢ƒã€‚ ä½œç”¨ OS ä½œä¸ºç”¨æˆ·ä¸è®¡ç®—æœºç¡¬ä»¶ç³»ç»Ÿä¹‹é—´çš„æ¥å£ è®¡ç®—æœºç”¨æˆ·éœ€è¦çš„ç”¨æˆ·å‘½ä»¤ ï¼šç”± OS å®ç°çš„æ‰€æœ‰ç”¨æˆ·å‘½ä»¤æ‰€æ„æˆçš„é›†åˆå¸¸è¢«ç§°ä¸º OS çš„ Interface(ç”¨æˆ·æ¥å£)ï¼›æœ‰æ—¶ä¹Ÿç§°ä¸ºå‘½ä»¤æ¥å£ã€‚å‘½ä»¤çš„è¡¨ç¤ºå½¢å¼ï¼š - å­—ç¬¦å½¢å¼ï¼šè¾ƒçµæ´»ä½†å› ç¹çè€Œéš¾è®°ï¼› - èœå•å½¢å¼ï¼šè¯•å›¾åœ¨å­—ç¬¦ç»ˆç«¯ä¸Šæä¾›å‹å¥½çš„ç”¨æˆ·ç•Œé¢ - å›¾å½¢å½¢å¼ï¼šå› ç›´è§‚è€Œæ˜“è®°ä½†ä¸çµæ´»ã€‚ åº”ç”¨è½¯ä»¶éœ€è¦çš„ System Call(ç³»ç»Ÿè°ƒç”¨)ï¼šç”± OS å®ç°çš„æ‰€æœ‰ç³»ç»Ÿè°ƒç”¨æ‰€æ„æˆçš„é›†åˆè¢«äººä»¬ç§°ä¸ºç¨‹åºæ¥å£æˆ–åº”ç”¨ç¼–ç¨‹æ¥å£(Application Programming Interface,API) æ“ä½œç³»ç»Ÿåº”éšè—å¤æ‚çš„ã€å›°éš¾çš„ã€ä¸‘é™‹çš„ã€ç‰¹æ®Šçš„ç¡¬ä»¶ç»†èŠ‚ï¼Œå‘ˆç°ç»™ç¨‹åºï¼ˆç¨‹åºå‘˜ï¼‰è‰¯å¥½ã€æ¸…æ™°ã€ä¼˜é›…ã€ä¸€è‡´çš„æŠ½è±¡æ“ä½œç³»ç»Ÿçš„ä»»åŠ¡å°±æ˜¯åˆ›å»ºå¥½çš„æŠ½è±¡ï¼Œå¹¶å®ç°å’Œç®¡ç†å®ƒæ‰€åˆ›å»ºçš„æŠ½è±¡ OS ä½œä¸ºè®¡ç®—æœºç³»ç»Ÿèµ„æºçš„ç®¡ç†è€…(è½¯ç¡¬ä»¶èµ„æº) å¤„ç†æœºç®¡ç†ï¼Œ ç”¨äºåˆ†é…å’Œæ§åˆ¶å¤„ç†æœºï¼› å­˜å‚¨å™¨ç®¡ç†ï¼Œä¸»è¦è´Ÿè´£å†…å­˜çš„åˆ†é…ä¸å›æ”¶ï¼› I/O è®¾å¤‡ç®¡ç†ï¼Œè´Ÿè´£ I/O è®¾å¤‡çš„åˆ†é…ä¸æ“çºµï¼› æ–‡ä»¶ç®¡ç†ï¼Œè´Ÿè´£æ–‡ä»¶çš„å­˜å–ã€å…±äº«å’Œä¿æŠ¤ã€‚ å¯¹äºå¤šç”¨æˆ·ç³»ç»Ÿï¼Œéœ€è¦ç®¡ç†å…±äº«èµ„æºï¼Œé¿å…å‘ç”Ÿå†²çªã€‚ æ“ä½œç³»ç»Ÿçš„ä»»åŠ¡æ˜¯åœ¨ç›¸äº’ç«äº‰çš„ç¨‹åºä¹‹é—´æœ‰åºåœ°æ§åˆ¶å¯¹ç¡¬ä»¶è®¾å¤‡çš„åˆ†é…èµ„æºç®¡ç†åŒ…æ‹¬ç”¨ä»¥ä¸‹ä¸¤ç§ä¸åŒçš„æ–¹å¼å®ç°å¤šè·¯å¤ç”¨ï¼ˆå…±äº«ï¼‰èµ„æº åœ¨æ—¶é—´ä¸Šå¤ç”¨ï¼šå½“ä¸€ç§èµ„æºåœ¨æ—¶é—´ä¸Šå¤ç”¨æ—¶ï¼Œä¸åŒçš„ç¨‹åºâ€œè½®æµâ€å®ç”¨å®ƒï¼›ä¾‹å¦‚ CPUã€æ‰“å°æœºç­‰ åœ¨ç©ºé—´ä¸Šå¤ç”¨ï¼šæ¯ä¸ªå®¢æˆ·éƒ½å¾—åˆ°èµ„æºçš„ä¸€éƒ¨åˆ†ï¼›ä¾‹å¦‚å†…å­˜ã€ç£ç›˜ç­‰ OS ç”¨ä½œæ‰©å……æœºå™¨è£¸æœºï¼šå®Œå…¨æ— è½¯ä»¶çš„è®¡ç®—æœºç³»ç»Ÿã€‚æ“ä½œç³»ç»Ÿç”¨æ¥æ‰©å……æœºå™¨åŠŸèƒ½ï¼Œä½¿å…¶ä¾¿äºä½¿ç”¨;åœ¨è£¸æœºä¸Šè¦†ç›–ç®¡ç†è½¯ä»¶ï¼Œå®ç°å¯¹è®¾å¤‡çš„æ“ä½œï¼Œå¹¶å‘ä¸Šæä¾›ä¸€ç»„æ“ä½œå‘½ä»¤;éšè—å¯¹è®¾å¤‡æ“ä½œçš„å…·ä½“ç»†èŠ‚ï¼Œå®ç°å¯¹ç¡¬ä»¶æ“ä½œçš„å¤šä¸ªå±‚æ¬¡çš„æŠ½è±¡ã€‚é€šå¸¸æŠŠè¦†ç›–äº†è½¯ä»¶çš„æœºå™¨ç§°ä¸ºæ‰©å……æœºå™¨æˆ–è™šæœºå™¨ æ“ä½œç³»ç»Ÿçš„å‘å±•è¿‡ç¨‹ æ— æ“ä½œç³»ç»Ÿé‡‡ç”¨äººå·¥æ“ä½œæ–¹å¼: ä¸€å°è®¡ç®—æœºçš„æ‰€æœ‰èµ„æºç”±ç”¨æˆ·ç‹¬å ï¼Œé™ä½äº†è®¡ç®—æœºèµ„æºåˆ©ç”¨ç‡ï¼Œäººæ“ä½œæ…¢ï¼Œå‡ºç°äº†ä¸¥é‡çš„äººæœºçŸ›ç›¾ã€‚ç¼ºç‚¹ï¼šç”¨æˆ·ç‹¬å å…¨æœº,CPU ç­‰å¾…äººå·¥æ“ä½œ å•é“æ‰¹å¤„ç†æ“ä½œç³»ç»ŸSingle-programming System:ç³»ç»Ÿå¯¹ä½œä¸šçš„å¤„ç†éƒ½æ˜¯æˆæ‰¹è¿›è¡Œçš„ï¼Œä¸”åœ¨å†…å­˜ä¸­å§‹ç»ˆä»…å­˜ä¸€é“ä½œä¸šè¿è¡Œï¼Œè¿è¡Œç»“æŸæˆ–å‡ºé”™ï¼Œæ‰è‡ªåŠ¨è°ƒå¦ä¸€é“ä½œä¸šè¿è¡Œï¼Œæ•…ç§°ä¸ºå•é“æ‰¹å¤„ç†ç³»ç»Ÿã€‚å•é“æ‰¹å¤„ç†ç³»ç»Ÿä¸»è¦ç‰¹å¾ï¼šè‡ªåŠ¨æ€§ã€é¡ºåºæ€§ã€å•é“æ€§ã€‚å•é“æ‰¹å¤„ç†ç³»ç»Ÿä¸»è¦ä¼˜ç‚¹ï¼šå‡å°‘äººå·¥æ“ä½œï¼Œè§£å†³äº†ä½œä¸šçš„è‡ªåŠ¨æ¥ç»­ã€‚å•é“æ‰¹å¤„ç†ç³»ç»Ÿä¸»è¦ç¼ºç‚¹ï¼šå¹³å‡å‘¨è½¬æ—¶é—´é•¿ï¼Œæ²¡æœ‰äº¤äº’èƒ½åŠ›ã€‚ å¤šé“æ‰¹å¤„ç†æ“ä½œç³»ç»ŸMulti-programming System: åœ¨å†…å­˜ä¸­å­˜æ”¾å¤šé“ä½œä¸šè¿è¡Œï¼Œè¿è¡Œç»“æŸæˆ–å‡ºé”™ï¼Œè‡ªåŠ¨è°ƒåº¦å†…å­˜ä¸­çš„å¦ä¸€é“ä½œä¸šè¿è¡Œã€‚å¤šé“æ‰¹å¤„ç†ç³»ç»Ÿä¸»è¦ç‰¹å¾ï¼šå¤šé“æ€§ã€æ— åºæ€§ã€è°ƒåº¦æ€§ï¼ˆè¿›ç¨‹è°ƒåº¦å’Œä½œä¸šè°ƒåº¦ï¼‰ã€‚å¤šé“æ‰¹å¤„ç†çš„ä¸»è¦ä¼˜ç‚¹ï¼šæé«˜äº†èµ„æºåˆ©ç”¨ç‡å’Œååèƒ½åŠ›ã€‚å¤šé“æ‰¹å¤„ç†çš„ä¸»è¦ç¼ºç‚¹ï¼šå¹³å‡å‘¨è½¬æ—¶é—´é•¿ï¼Œæ²¡æœ‰äº¤äº’èƒ½åŠ›ã€‚å¤šé“æ‰¹å¤„ç†ç³»ç»Ÿéœ€è¦è§£å†³çš„ 5 ä¸ªé—®é¢˜ å¤„ç†æœºç®¡ç†ï¼šåˆ†é…å’Œæ§åˆ¶ CPUã€‚ å­˜å‚¨å™¨ç®¡ç†ï¼šå†…å­˜åˆ†é…ä¸å›æ”¶ I/O è®¾å¤‡ç®¡ç†ï¼šI/O è®¾å¤‡çš„åˆ†é…ä¸æ“çºµã€‚ æ–‡ä»¶ç®¡ç†ï¼šæ–‡ä»¶çš„å­˜å–ã€å…±äº«å’Œä¿æŠ¤ã€‚ ä½œä¸šç®¡ç†ï¼šå¦‚ä½•ç»„ç»‡ä½œä¸šè¿è¡Œã€‚ Multi-programming System vs Single-programing Systemå•é“ç³»ç»Ÿæ˜¯æŒ‡ä¸€æ¬¡åªèƒ½è¿è¡Œä¸€ä¸ªç¨‹åºçš„ç³»ç»Ÿã€‚åœ¨å•é“ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªä½œä¸šï¼ˆJobï¼‰æŒ‰é¡ºåºæ‰§è¡Œï¼Œç›´åˆ°å®Œæˆåæ‰èƒ½å¼€å§‹ä¸‹ä¸€ä¸ªä½œä¸šã€‚å¤šé“ç³»ç»Ÿå…è®¸åŒæ—¶è¿è¡Œå¤šä¸ªç¨‹åºã€‚åœ¨å¤šé“ç³»ç»Ÿä¸­ï¼Œå¤šä¸ªä½œä¸šå¯ä»¥åŒæ—¶è¿›å…¥å†…å­˜å¹¶å¹¶å‘æ‰§è¡Œã€‚æ“ä½œç³»ç»Ÿé€šè¿‡ä»»åŠ¡è°ƒåº¦ç®—æ³•å†³å®šå“ªä¸ªä½œä¸šè·å¾—å¤„ç†å™¨æ—¶é—´ï¼Œä»¥å®ç°ä½œä¸šé—´çš„åˆ‡æ¢å’Œå…±äº«èµ„æºã€‚è¿™æ ·å¯ä»¥æé«˜ç³»ç»Ÿèµ„æºåˆ©ç”¨ç‡å’Œååé‡ã€‚ åˆ†æ—¶æ“ä½œç³»ç»Ÿ(time-sharing OS):æ—¶é—´å…±äº«æ“ä½œç³»ç»Ÿæ˜¯ä¸€ç§å…è®¸å¤šä¸ªç”¨æˆ·åŒæ—¶å…±äº«ç³»ç»Ÿèµ„æºçš„æ“ä½œç³»ç»Ÿã€‚åœ¨è¿™ç§æ“ä½œç³»ç»Ÿä¸­ï¼ŒCPU æ—¶é—´è¢«åˆ†å‰²æˆå¾®å°çš„ç‰‡æ®µï¼Œå¹¶ä¾æ¬¡åˆ†é…ç»™æ¯ä¸ªç”¨æˆ·ï¼Œä½¿å¾—æ¯ä¸ªç”¨æˆ·éƒ½æ„Ÿè§‰åˆ°ä»–ä»¬ç‹¬å äº†æ•´ä¸ªç³»ç»Ÿã€‚è¿™ç§æ“ä½œç³»ç»Ÿçš„ä¸»è¦ç›®æ ‡æ˜¯æœ€å¤§åŒ– CPU çš„åˆ©ç”¨ç‡å’Œå“åº”æ—¶é—´ã€‚ ç‰¹ç‚¹ å¤šè·¯æ€§ï¼šä¸€ä¸ªä¸»æœºä¸å¤šä¸ªç»ˆç«¯ç›¸è¿ï¼› ç‹¬ç«‹æ€§ï¼šå½¼æ­¤ç‹¬ç«‹æ“ä½œï¼Œäº’ä¸å¹²æ‰°ï¼› åŠæ—¶æ€§ï¼šç³»ç»Ÿèƒ½åœ¨å¾ˆçŸ­çš„æ—¶é—´å¾—åˆ°å›ç­”ï¼› äº¤äº’æ€§ï¼šèƒ½å®ç°äººæœºå¯¹è¯ï¼ˆåŒºåˆ«äºæ‰¹å¤„ç†ç³»ç»Ÿï¼‰ï¼› å…¸å‹ç³»ç»Ÿ Multics (MIT) UNIX å®æ—¶æ“ä½œç³»ç»Ÿ(real time OS):æ˜¯è®¡ç®—æœºåŠæ—¶å“åº”å¤–éƒ¨äº‹ä»¶çš„è¯·æ±‚ï¼Œåœ¨è§„å®šçš„æ—¶é—´å†…å®Œæˆå¯¹è¯¥äº‹ä»¶çš„å¤„ç†ï¼Œå¹¶æ§åˆ¶æ‰€æœ‰å®æ—¶è®¾å¤‡å’Œå®æ—¶ä»»åŠ¡åè°ƒä¸€è‡´çš„è¿è¡Œ ç‰¹ç‚¹ å¤šè·¯æ€§ï¼šèƒ½å¯¹å¤šä¸ªå¯¹è±¡è¿›è¡Œæ§åˆ¶ ç‹¬ç«‹æ€§ï¼šç‹¬ç«‹è¿è¡Œï¼Œä¸æ··æ·†ï¼Œä¸ç ´å äº¤äº’æ€§ï¼šä»…é™äºè®¿é—®ç³»ç»Ÿä¸­æŸäº›ç‰¹å®šçš„ä¸“ç”¨æœåŠ¡ç¨‹åº å¯é æ€§ï¼šé«˜å¯é æ€§ï¼Œåº”å…·æœ‰å¤šçº§å®¹é”™é˜²æŠ¤èƒ½åŠ› åŠæ—¶æ€§ï¼šæ§åˆ¶å¯¹è±¡å¿…é¡»åœ¨æˆªæ­¢æ—¶é—´å†…å®Œæˆ åˆ†ç±» ä»»åŠ¡æ‰§è¡Œæ˜¯å¦ä¸ºå‘¨æœŸæ€§æ¥åˆ’åˆ†å‘¨æœŸæ€§å®æ—¶ä»»åŠ¡éå‘¨æœŸæ€§å®æ—¶ä»»åŠ¡ æŒ‰æˆªæ­¢æ—¶é—´æ¥åˆ’åˆ†ç¡¬å®æ—¶ä»»åŠ¡è½¯å®æ—¶ä»»åŠ¡ æ“ä½œç³»ç»Ÿçš„åŸºæœ¬ç‰¹å¾ç°ä»£ OS çš„å››ä¸ªåŸºæœ¬ç‰¹å¾ï¼š å¹¶å‘æ€§ï¼ˆæœ€é‡è¦çš„ç‰¹å¾ï¼‰ å…±äº«æ€§ è™šæ‹Ÿæ€§ å¼‚æ­¥æ€§ å¹¶å‘æ˜¯æœ€é‡è¦çš„ç‰¹å¾ï¼Œå…¶å®ƒç‰¹å¾éƒ½ä»¥å¹¶å‘ä¸ºå‰æ å¹¶å‘ ConcurrencyKey: åŒºåˆ†å¹¶å‘ Concurrency&amp;å¹¶è¡Œ Parallelism åŒºåˆ†è¿›ç¨‹ Process&amp;çº¿ç¨‹ Thread&amp;ç¨‹åº Program å…±äº« Sharingå…±äº«ï¼šæ˜¯æŒ‡ç³»ç»Ÿä¸­çš„èµ„æºå¯ä¾›å†…å­˜ä¸­å¤šä¸ªå¹¶å‘æ‰§è¡Œçš„è¿›ç¨‹å…±åŒä½¿ç”¨ã€‚ äº’æ–¥å…±äº«ï¼ˆExclusive Sharingï¼‰ï¼šåœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨èµ„æºã€‚å½“ä¸€ä¸ªè¿›ç¨‹æ­£åœ¨ä½¿ç”¨èµ„æºæ—¶ï¼Œå…¶ä»–è¿›ç¨‹å¿…é¡»ç­‰å¾…ã€‚è¿™ç§æ–¹å¼é€šå¸¸ç”¨äºé‚£äº›ä¸èƒ½åŒæ—¶è¢«å¤šä¸ªè¿›ç¨‹å…±äº«çš„èµ„æºï¼Œä¾‹å¦‚æ‰“å°æœºã€ç£å¸¦é©±åŠ¨å™¨ç­‰ã€‚ åˆ†æ—¶å…±äº«ï¼ˆTime-Sharingï¼‰ï¼šåœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œèµ„æºåœ¨å¤šä¸ªè¿›ç¨‹ä¹‹é—´è¿›è¡Œåˆ‡æ¢ï¼Œæ¯ä¸ªè¿›ç¨‹åœ¨ä¸€æ®µæ—¶é—´å†…ç‹¬å èµ„æºã€‚é€šè¿‡å¿«é€Ÿåˆ‡æ¢ï¼Œå¯ä»¥ä½¿å¾—ç”¨æˆ·æ„Ÿè§‰åˆ°ä»–ä»¬ä¼¼ä¹åœ¨åŒæ—¶ä½¿ç”¨èµ„æºã€‚è¿™ç§æ–¹å¼é€šå¸¸ç”¨äºé‚£äº›å¯ä»¥è¢«å¤šä¸ªè¿›ç¨‹å…±äº«çš„èµ„æºï¼Œä¾‹å¦‚ CPUã€å†…å­˜ç­‰ã€‚ åŒæ—¶å…±äº«ï¼ˆConcurrent Sharingï¼‰ï¼šåœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œå¤šä¸ªè¿›ç¨‹å¯ä»¥åŒæ—¶è®¿é—®èµ„æºï¼Œè€Œæ— éœ€ç­‰å¾…ã€‚è¿™ç§æ–¹å¼é€šå¸¸ç”¨äºé‚£äº›å¯ä»¥è¢«å¤šä¸ªè¿›ç¨‹åŒæ—¶è¯»å–çš„èµ„æºï¼Œä¾‹å¦‚æ–‡ä»¶ã€æ•°æ®åº“ç­‰ã€‚ è™šæ‹Ÿå…±äº«ï¼ˆVirtual Sharingï¼‰ï¼šåœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªèµ„æºçš„è™šæ‹Ÿå‰¯æœ¬ï¼Œä½¿å¾—æ¯ä¸ªè¿›ç¨‹éƒ½æ„Ÿè§‰åˆ°ä»–ä»¬ç‹¬å äº†èµ„æºã€‚è¿™ç§æ–¹å¼é€šå¸¸ç”¨äºé‚£äº›å¯ä»¥è¢«å¤åˆ¶çš„èµ„æºï¼Œä¾‹å¦‚è™šæ‹Ÿå†…å­˜ã€è™šæ‹Ÿæœºç­‰ã€‚ è™šæ‹Ÿæ€§ Virtualizationè™šæ‹Ÿï¼šæ˜¯æŒ‡é€šè¿‡æŸç§æŠ€æœ¯æŠŠä¸€ä¸ªç‰©ç†å®ä½“å˜ä¸ºï¼ˆæ˜ å°„ä¸ºï¼‰è‹¥å¹²ä¸ªé€»è¾‘ä¸Šçš„å¯¹åº”ç‰©ã€‚æ—¶åˆ†å¤ç”¨æŠ€æœ¯è™šæ‹Ÿå¤„ç†æœºï¼šåˆ†æ—¶å®ç°è™šæ‹Ÿè®¾å¤‡ï¼šSPOOLING æŠ€æœ¯ç©ºåˆ†å¤ç”¨æŠ€æœ¯è™šæ‹Ÿç£ç›˜æŠ€æœ¯ï¼šé€»è¾‘åˆ†åŒºè™šæ‹Ÿå­˜å‚¨å™¨ï¼šè™šæ‹Ÿå­˜å‚¨ç®¡ç†å®ç° å¼‚æ­¥æ€§ Asynchronyå¼‚æ­¥ å¤šé“ç¨‹åºç¯å¢ƒä¸‹ç¨‹åºï¼ˆè¿›ç¨‹ï¼‰ä»¥å¼‚æ­¥çš„æ–¹å¼æ‰§è¡Œï¼Œæ¯é“ç¨‹åºåœ¨ä½•æ—¶æ‰§è¡Œã€å„è‡ªæ‰§è¡Œçš„é¡ºåºã€å®Œæˆæ—¶é—´éƒ½æ˜¯ä¸ç¡®å®šçš„ï¼Œä¹Ÿæ˜¯ä¸å¯é¢„çŸ¥çš„ã€‚ æ“ä½œç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½æ“ä½œç³»ç»Ÿçš„ä¸»è¦ä»»åŠ¡æ˜¯ä¸ºå¤šé“ç¨‹åºçš„è¿è¡Œæä¾›è‰¯å¥½çš„è¿è¡Œç¯å¢ƒï¼Œä»¥ä¿è¯å¤šé“ç¨‹åºèƒ½æœ‰æ¡ä¸ç´Šåœ°ã€é«˜æ•ˆåœ°è¿è¡Œï¼Œå¹¶èƒ½æœ€å¤§ç¨‹åº¦åœ°æé«˜ç³»ç»Ÿä¸­å„ç§èµ„æºçš„åˆ©ç”¨ç‡å’Œæ–¹ä¾¿ç”¨æˆ·çš„ä½¿ç”¨ã€‚ æ“ä½œç³»ç»Ÿåº”å…·æœ‰äº”æ–¹é¢çš„åŠŸèƒ½ï¼š å¤„ç†æœºç®¡ç†ï¼ˆCPUï¼‰ å­˜å‚¨å™¨ç®¡ç† è®¾å¤‡ç®¡ç† æ–‡ä»¶ç®¡ç† æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨çš„ç”¨æˆ·æ¥å£ã€‚ å¤„ç†æœºç®¡ç†åŠŸèƒ½æŒ‰ç…§ä¸€å®šçš„ç®—æ³•æŠŠå¤„ç†æœºåˆ†é…ç»™è¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰ï¼Œå¹¶å¯¹å…¶è¿›è¡Œæœ‰æ•ˆçš„ç®¡ç†å’Œæ§åˆ¶ è¿›ç¨‹æ§åˆ¶ä¸»è¦åŠŸèƒ½ï¼šä¸ºä½œä¸šåˆ›å»ºè¿›ç¨‹ã€æ’¤æ¶ˆï¼ˆç»ˆæ­¢ï¼‰å·²ç»“æŸçš„è¿›ç¨‹ï¼Œä»¥åŠæ§åˆ¶è¿›ç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­çš„çŠ¶æ€è½¬æ¢ã€‚ è¿›ç¨‹åŒæ­¥å’Œäº’æ–¥ä¸»è¦ä»»åŠ¡æ˜¯ä¸ºå¤šä¸ªè¿›ç¨‹(å«çº¿ç¨‹)çš„è¿è¡Œè¿›è¡Œåè°ƒã€‚è¿›ç¨‹äº’æ–¥æ–¹å¼ï¼šè¿™æ˜¯æŒ‡è¯¸è¿›ç¨‹åœ¨å¯¹ä¸´ç•Œèµ„æºè¿›è¡Œè®¿é—®æ—¶ï¼Œåº”é‡‡ç”¨äº’æ–¥æ–¹å¼ã€‚è¿›ç¨‹åŒæ­¥æ–¹å¼ï¼šæŒ‡åœ¨ç›¸äº’åˆä½œå»å®Œæˆå…±åŒä»»åŠ¡çš„è¯¸è¿›ç¨‹é—´ï¼Œç”±åŒæ­¥æœºæ„å¯¹å®ƒä»¬çš„æ‰§è¡Œæ¬¡åºåŠ ä»¥åè°ƒã€‚ï¼ˆä¿¡å·é‡æœºåˆ¶ï¼‰ è¿›ç¨‹é€šä¿¡ è¿›ç¨‹è°ƒåº¦ å­˜å‚¨å™¨ç®¡ç†åŠŸèƒ½ä¸ºå¤šé“ç¨‹åºçš„è¿è¡Œæä¾›è‰¯å¥½çš„ç¯å¢ƒï¼Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨å­˜å‚¨å™¨ï¼Œæé«˜å­˜å‚¨å™¨çš„åˆ©ç”¨ç‡ä»¥åŠèƒ½ä»é€»è¾‘ä¸Šæ‰©å……å†…å­˜ã€‚ å†…å­˜åˆ†é…å†…å­˜åˆ†é…çš„ä¸¤ç§æ–¹å¼ ï¼š é™æ€åˆ†é…æ–¹å¼ï¼šæ¯ä¸ªä½œä¸šçš„å†…å­˜ç©ºé—´æ˜¯åœ¨ä½œä¸šè£…å…¥æ—¶ç¡®å®šã€‚è¿è¡Œæ—¶ä¸å¯å†ç”³è¯·æ–°çš„å†…å­˜ç©ºé—´ï¼Œä¹Ÿä¸å…è®¸ä½œä¸šåœ¨å†…å­˜ä¸­â€œç§»åŠ¨â€ã€‚ åŠ¨æ€åˆ†é…æ–¹å¼ï¼šæ¯ä¸ªä½œä¸šçš„å†…å­˜ç©ºé—´æ˜¯åœ¨ä½œä¸šè£…å…¥æ—¶ç¡®å®šã€‚ä½†å…è®¸ä½œä¸šåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ç»§ç»­ç”³è¯·æ–°çš„é™„åŠ å†…å­˜ç©ºé—´ï¼Œä»¥é€‚åº”ç¨‹åºå’Œæ•°æ®çš„åŠ¨æ€å¢é•¿ï¼Œä¹Ÿå…è®¸ä½œä¸šåœ¨å†…å­˜ä¸­â€œç§»åŠ¨â€ã€‚ å†…å­˜åˆ†é…çš„ä¸»è¦ä»»åŠ¡æ˜¯ï¼š ä¸ºæ¯é“ç¨‹åºåˆ†é…å†…å­˜ç©ºé—´ï¼Œä½¿å®ƒä»¬â€œå„å¾—å…¶æ‰€â€ã€‚ æé«˜å­˜å‚¨å™¨çš„åˆ©ç”¨ç‡ï¼Œå°½é‡å‡å°‘ä¸å¯ç”¨çš„å†…å­˜ç©ºé—´ï¼ˆç¢ç‰‡ï¼‰ã€‚ å…è®¸æ­£åœ¨è¿è¡Œçš„ç¨‹åºç”³è¯·é™„åŠ çš„å†…å­˜ç©ºé—´ï¼Œä»¥é€‚åº”ç¨‹åºå’Œæ•°æ®åŠ¨æ€å¢é•¿çš„éœ€è¦ã€‚ å†…å­˜ä¿æŠ¤ç¡®ä¿æ¯é“ç”¨æˆ·ç¨‹åºéƒ½åªåœ¨è‡ªå·±çš„å†…å­˜ç©ºé—´å†…è¿è¡Œï¼Œå½¼æ­¤äº’ä¸å¹²æ‰°ã€‚ç»ä¸å…è®¸ç”¨æˆ·ç¨‹åºè®¿é—®æ“ä½œç³»ç»Ÿçš„ç¨‹åºå’Œæ•°æ®ï¼Œä¹Ÿä¸å…è®¸ç”¨æˆ·ç¨‹åºè½¬ç§»åˆ°éå…±äº«çš„å…¶å®ƒç”¨æˆ·ç¨‹åºä¸­å»æ‰§è¡Œã€‚ åœ°å€æ˜ å°„ä¸ºä¿è¯ç¨‹åºèƒ½æ­£ç¡®è¿è¡Œï¼Œå­˜å‚¨å™¨ç®¡ç†å¿…é¡»æä¾›åœ°å€æ˜ å°„åŠŸèƒ½ï¼Œå³èƒ½å¤Ÿå°†åœ°å€ç©ºé—´ä¸­çš„é€»è¾‘åœ°å€è½¬æ¢ä¸ºå†…å­˜ç©ºé—´ä¸­ä¸ä¹‹å¯¹åº”çš„ç‰©ç†åœ°å€ã€‚è¯¥åŠŸèƒ½åº”åœ¨ç¡¬ä»¶çš„æ”¯æŒä¸‹å®Œæˆ å†…å­˜æ‰©å……å€ŸåŠ©äºè™šæ‹Ÿå­˜å‚¨æŠ€æœ¯ï¼Œä»é€»è¾‘ä¸Šæ‰©å……å†…å­˜å®¹é‡ è®¾å¤‡ç®¡ç†åŠŸèƒ½å®Œæˆç”¨æˆ·è¿›ç¨‹æå‡ºçš„ I/O è¯·æ±‚ï¼›ä¸ºç”¨æˆ·è¿›ç¨‹åˆ†é…å…¶æ‰€éœ€çš„ I/O è®¾å¤‡ï¼›æé«˜ CPU å’Œ I/O è®¾å¤‡çš„åˆ©ç”¨ç‡ï¼›æé«˜ I/O é€Ÿåº¦ï¼›æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨ I/O è®¾å¤‡ã€‚ ç¼“å†²ç®¡ç†ï¼šæœ‰æ•ˆåœ°ç¼“å’Œ CPU å’Œ I/O è®¾å¤‡é€Ÿåº¦ä¸åŒ¹é…çš„çŸ›ç›¾ ï¼Œæé«˜ CPU çš„åˆ©ç”¨ç‡ã€‚ è®¾å¤‡åˆ†é…ï¼šæ ¹æ® I/O è¯·æ±‚ï¼Œåˆ†é…å…¶æ‰€éœ€çš„è®¾å¤‡ã€‚ è®¾å¤‡å¤„ç†ï¼šè®¾å¤‡å¤„ç†ç¨‹åºåˆç§°ä¸ºè®¾å¤‡é©±åŠ¨ç¨‹åºã€‚ æ–‡ä»¶ç®¡ç†åŠŸèƒ½ä¸»è¦ä»»åŠ¡ï¼šå¯¹ç”¨æˆ·æ–‡ä»¶å’Œç³»ç»Ÿæ–‡ä»¶è¿›è¡Œç®¡ç†ï¼Œä»¥æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨ï¼Œå¹¶ä¿è¯æ–‡ä»¶çš„å®‰å…¨æ€§ã€‚ æ–‡ä»¶å­˜å‚¨ç©ºé—´çš„ç®¡ç† ç›®å½•ç®¡ç† æ–‡ä»¶çš„è¯»/å†™ç®¡ç†å’Œä¿æŠ¤ æ“ä½œç³»ç»Ÿä¸ç”¨æˆ·ä¹‹é—´çš„æ¥å£ç”¨æˆ·æ¥å£,ç”± OS å®ç°çš„æ‰€æœ‰ç”¨æˆ·å‘½ä»¤æ‰€æ„æˆçš„é›†åˆå¸¸è¢«äººä»¬ç§°ä¸º OS çš„ Interface(ç”¨æˆ·æ¥å£)ï¼›æœ‰æ—¶ä¹Ÿç§°ä¸ºå‘½ä»¤æ¥å£ã€‚è¯¥æ¥å£åˆè¿›ä¸€æ­¥åˆ†ä¸ºè”æœºç”¨æˆ·æ¥å£ã€è„±æœºç”¨æˆ·æ¥å£å’Œå›¾å½¢ç”¨æˆ·æ¥å£ä¸‰ç§ã€‚ç¨‹åºæ¥å£ï¼Œç”± OS å®ç°çš„æ‰€æœ‰ç³»ç»Ÿè°ƒç”¨æ‰€æ„æˆçš„é›†åˆè¢«äººä»¬ç§°ä¸ºç¨‹åºæ¥å£æˆ–åº”ç”¨ç¼–ç¨‹æ¥å£(Application Programming Interface,API)ã€‚ç¨‹åºæ¥å£æ˜¯ä¸ºç”¨æˆ·ç¨‹åºåœ¨æ‰§è¡Œä¸­è®¿é—®ç³»ç»Ÿèµ„æºè€Œè®¾ç½®çš„ï¼Œæ˜¯ç”¨æˆ·ç¨‹åºå–å¾—æ“ä½œç³»ç»ŸæœåŠ¡çš„å”¯ä¸€é€”å¾„ã€‚ æ“ä½œç³»ç»Ÿçš„ç»“æ„è®¾è®¡æ“ä½œç³»ç»Ÿæ˜¯ä¸€ä¸ªå¤§å‹ç³»ç»Ÿè½¯ä»¶ï¼Œå…¶ç»“æ„å·²ç»å†äº†å››ä»£çš„å˜é©ï¼š ç¬¬ä¸€ä»£çš„ OS æ˜¯æ— ç»“æ„çš„ ç¬¬äºŒä»£ OS é‡‡ç”¨äº†æ¨¡å—å¼ç»“æ„ ç¬¬ä¸‰ä»£æ˜¯å±‚æ¬¡å¼ç»“æ„ ç°ä»£ OS ç»“æ„æ˜¯å¾®å†…æ ¸ç»“æ„ æ¨¡å—åŒ–ç»“æ„ï¼ˆæ¨¡å—-æ¥å£æ³•ï¼‰ä½¿ç”¨åˆ†å—ç»“æ„çš„ç³»ç»ŸåŒ…å«è‹¥å¹² moduleï¼›å…¶ä¸­ï¼Œæ¯ä¸ªæ¨¡å—å®ç°ä¸€ç»„åŸºæœ¬æ¦‚å¿µä»¥åŠä¸å…¶ç›¸å…³çš„åŸºæœ¬å±æ€§ã€‚ å—ä¸å—ä¹‹é—´çš„ç›¸äº’å…³ç³» æ‰€æœ‰å„å—çš„å®ç°å‡å¯ä»¥ä»»æ„å¼•ç”¨å…¶å®ƒå„å—æ‰€æä¾›çš„æ¦‚å¿µåŠå±æ€§ã€‚ ä¼˜ç‚¹æé«˜äº† OS è®¾è®¡çš„æ­£ç¡®æ€§ã€å¯ç†è§£æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚å¢å¼ºäº† OS çš„å¯é€‚åº”æ€§ã€‚åŠ é€Ÿäº† OS çš„å¼€å‘è¿‡ç¨‹ã€‚ ç¼ºç‚¹å¯¹æ¨¡å—çš„åˆ’åˆ†åŠå¯¹æ¥å£çš„è§„å®šè¦ç²¾ç¡®æè¿°å¾ˆå›°éš¾ã€‚ä»åŠŸèƒ½è§‚ç‚¹æ¥åˆ’åˆ†æ¨¡å—æ—¶ï¼Œæœªèƒ½å°†å…±äº«èµ„æºå’Œç‹¬å èµ„æºåŠ ä»¥åŒºåˆ«ã€‚ å±‚æ¬¡ç»“æ„ä½¿ç”¨åˆ†å±‚ç³»ç»Ÿç»“æ„åŒ…å«è‹¥å¹² layerï¼ˆå±‚ï¼‰ï¼›å…¶ä¸­ï¼Œæ¯ä¸€å±‚å®ç°ä¸€ç»„åŸºæœ¬æ¦‚å¿µä»¥åŠä¸å…¶ç›¸å…³çš„åŸºæœ¬å±æ€§ã€‚ å±‚ä¸å±‚ä¹‹é—´çš„ç›¸äº’å…³ç³» æ‰€æœ‰å„å±‚çš„å®ç°ä¸ä¾èµ–å…¶ä»¥ä¸Šå„å±‚æ‰€æä¾›çš„æ¦‚å¿µåŠå…¶å±æ€§ï¼Œåªä¾èµ–å…¶ç›´æ¥ä¸‹å±‚æ‰€æä¾›çš„æ¦‚å¿µåŠå±æ€§ï¼› æ¯ä¸€å±‚å‡å¯¹å…¶ä¸Šå„å±‚éšè—å…¶ä¸‹å„å±‚çš„å­˜åœ¨ã€‚ å±‚æ¬¡çš„è®¾ç½®æ—¶åº”è€ƒè™‘çš„å› ç´  ç¨‹åºåµŒå¥— é€šå¸¸ OS çš„æ¯ä¸ªåŠŸèƒ½çš„å®ç°ï¼Œå¹¶éæ˜¯åªç”¨ä¸€ä¸ªç¨‹åºä¾¿èƒ½å®Œæˆçš„ï¼Œè€Œæ˜¯è¦ç»ç”±è‹¥å¹²ä¸ªè½¯ä»¶å±‚æ‰æœ‰å¯èƒ½å®Œæˆï¼Œå› æ­¤å®ç° OS æ—¶ï¼Œåº”è€ƒè™‘æ¯ä¸ªåŠŸèƒ½å¯èƒ½å½¢æˆçš„ç¨‹åºåµŒå¥—ã€‚ è¿è¡Œé¢‘ç‡ å°†é‚£äº›ç»å¸¸æ´»è·ƒçš„æ¨¡å—æ”¾åœ¨æœ€æ¥è¿‘ç¡¬ä»¶çš„å±‚ å…¬ç”¨æ¨¡å— æŠŠä¾›å¤šç§èµ„æºç®¡ç†ç¨‹åºè°ƒç”¨çš„å…¬ç”¨æ¨¡å—ï¼Œè®¾ç½®åœ¨æœ€ä½å±‚ï¼Œä»¥ä¾¿è°ƒç”¨ã€‚ ç”¨æˆ·æ¥å£ å‘½ä»¤æ¥å£ã€ç¨‹åºæ¥å£ä»¥åŠå›¾å½¢ç”¨æˆ·æ¥å£ã€‚è¿™äº›æ¥å£åº”è®¾ç½®åœ¨ OS çš„æœ€é«˜å±‚ï¼Œç›´æ¥æä¾›ç»™ç”¨æˆ·ä½¿ç”¨ã€‚ å¾®å†…æ ¸æŠ€æœ¯æ‰€è°“å¾®å†…æ ¸æŠ€æœ¯ï¼Œæ˜¯æŒ‡ç²¾å¿ƒè®¾è®¡çš„ã€èƒ½å®ç°ç°ä»£ OS æ ¸å¿ƒåŠŸèƒ½çš„å°å‹å†…æ ¸ï¼Œå®ƒä¸ä¸€èˆ¬çš„ OS(ç¨‹åº)ä¸åŒï¼Œ å®ƒæ›´å°æ›´ç²¾ç‚¼ï¼Œå®ƒä¸ä»…è¿è¡Œåœ¨æ ¸å¿ƒæ€ï¼Œè€Œä¸”å¼€æœºåå¸¸é©»å†…å­˜ï¼Œ å®ƒä¸ä¼šå› å†…å­˜ç´§å¼ è€Œè¢«æ¢å‡ºå†…å­˜ã€‚å½“å‰æ¯”è¾ƒæµè¡Œçš„ã€èƒ½æ”¯æŒå¤šå¤„ç†æœºè¿è¡Œçš„ OS å‡ ä¹å…¨éƒ¨éƒ½é‡‡ç”¨äº†å¾®å†…æ ¸ç»“æ„ï¼Œå¦‚ Mach OSï¼Œwindows 2000 å¾®å†…æ ¸æ‰€æä¾›çš„åŠŸèƒ½ï¼Œé€šå¸¸éƒ½æ˜¯ä¸€äº›æœ€åŸºæœ¬çš„åŠŸèƒ½ï¼Œå¦‚è¿›ç¨‹ç®¡ç†ã€ä½çº§å­˜å‚¨å™¨ç®¡ç†ã€ä¸­æ–­å’Œé™·å…¥å¤„ç†ã€è¿›ç¨‹é—´é€šä¿¡ã€ä½çº§ I/O åŠŸèƒ½ å¾®å†…æ ¸ç‰¹ç‚¹ è¶³å¤Ÿå°çš„å†…æ ¸ã€‚ åŸºäºå®¢æˆ·/æœåŠ¡å™¨æ¨¡å¼ åº”ç”¨â€œæœºåˆ¶ä¸ç­–ç•¥åˆ†ç¦»â€åŸç† é‡‡ç”¨é¢å‘å¯¹è±¡æŠ€æœ¯","link":"/UESTC/OS/Ch1-1OSIntroduction/"},{"title":"è¿›ç¨‹çš„æè¿°åŠæ§åˆ¶","text":"å‰é©±å›¾å’Œç¨‹åºæ‰§è¡Œ Precedence Graph and Program Executionå‰é©±å›¾ Precedence Graphå‰è¶‹å›¾(Precedence Graph):ä¸€ä¸ªæœ‰å‘æ— å¾ªç¯å›¾ DAG(Directed Acyclic Graph)ï¼Œç”¨äºæè¿°è¿›ç¨‹ä¹‹é—´æ‰§è¡Œçš„å‰åå…³ç³»ã€‚å›¾ä¸­çš„æ¯ä¸ªç»“ç‚¹å¯ç”¨äºè¡¨ç¤ºä¸€æ¡è¯­å¥ã€ä¸€ä¸ªç¨‹åºæ®µç­‰ï¼›ç»“ç‚¹é—´çš„æœ‰å‘è¾¹è¡¨ç¤ºåœ¨ä¸¤ä¸ªç»“ç‚¹ä¹‹é—´å­˜åœ¨çš„å‰è¶‹å…³ç³»ã€‚åˆå§‹ç»“ç‚¹(InitialNode) å‰è¶‹å›¾ä¸­æ²¡æœ‰å‰è¶‹çš„ç»“ç‚¹ç»ˆæ­¢ç»“ç‚¹(FinalNode) å‰è¶‹å›¾ä¸­æ²¡æœ‰åç»§çš„ç»“ç‚¹ â†’={(Pi, Pj)|Pi must complete before Pj may start} (Pi, Pj)âˆˆâ†’ æˆ– Piâ†’Pj Piæ˜¯Pjçš„ç›´æ¥å‰è¶‹ï¼ŒPjæ˜¯Piçš„ç›´æ¥åç»§ã€‚ è‹¥ä¸€ä¸ªç¨‹åºç”±è‹¥å¹²ç¨‹åºæ®µï¼ˆå³æ“ä½œï¼‰ç»„æˆï¼Œè€Œè¿™äº›æ“ä½œå¿…é¡»æŒ‰ç…§æŸç§å…ˆåæ¬¡åºæ‰§è¡Œï¼Œè¿™ç±»æ‰§è¡Œè¿‡ç¨‹å°±æ˜¯ç¨‹åºçš„é¡ºåºæ‰§è¡Œã€‚ ç¨‹åºæ‰§è¡Œ Program Executionç¨‹åºæ‰§è¡Œæ–¹å¼ é¡ºåºæ‰§è¡Œâ€”å•é“æ‰¹å¤„ç†ç³»ç»Ÿ å¹¶å‘æ‰§è¡Œâ€“å¤šé“æ‰¹å¤„ç†ç³»ç»Ÿ åº”ç”¨çº§å¹¶å‘æ˜¯æŒ‡è‹¥å¹²åº”ç”¨ç¨‹åºçš„å¹¶å‘æ‰§è¡Œã€‚ ç³»ç»Ÿçº§å¹¶å‘æ˜¯æŒ‡æ“ä½œç³»ç»Ÿè‡ªèº«è½¯ä»¶çš„å¹¶å‘æ‰§è¡Œã€‚ é¡ºåºæ‰§è¡Œ è‹¥ä¸€ä¸ªç¨‹åºç”±è‹¥å¹²ç¨‹åºæ®µï¼ˆå³æ“ä½œï¼‰ç»„æˆï¼Œè€Œè¿™äº›æ“ä½œå¿…é¡»æŒ‰ç…§æŸç§å…ˆåæ¬¡åºæ‰§è¡Œï¼Œè¿™ç±»æ‰§è¡Œè¿‡ç¨‹å°±æ˜¯ç¨‹åºçš„é¡ºåºæ‰§è¡Œ é¡ºåºæ€§ï¼šå¤„ç†æœºçš„æ“ä½œä¸¥æ ¼æŒ‰ç…§ç¨‹åºæ‰€è§„å®šçš„é¡ºåºæ‰§è¡Œã€‚ å°é—­æ€§ï¼šç¨‹åºè¿è¡Œæ—¶ç‹¬å å…¨æœºèµ„æºï¼Œç¨‹åºä¸€æ—¦å¼€å§‹æ‰§è¡Œï¼Œå…¶æ‰§è¡Œç»“æœä¸å—å¤–ç•Œå› ç´ å½±å“ã€‚ å¯å†ç°æ€§ï¼šåªè¦ç¨‹åºæ‰§è¡Œæ—¶çš„ç¯å¢ƒå’Œåˆå§‹æ¡ä»¶ç›¸åŒï¼Œéƒ½å°†è·å¾—ç›¸åŒçš„ç»“æœã€‚ å¹¶å‘æ‰§è¡Œçš„ç‰¹å¾ é—´æ–­æ€§ï¼šç”±äºå®ƒä»¬å…±äº«ç³»ç»Ÿèµ„æºï¼Œä»¥åŠä¸ºå®ŒæˆåŒä¸€é¡¹ä»»åŠ¡è€Œç›¸äº’åˆä½œï¼Œè‡´ä½¿åœ¨è¿™äº›å¹¶å‘æ‰§è¡Œçš„ç¨‹åºä¹‹é—´ï¼Œå½¢æˆäº†ç›¸äº’åˆ¶çº¦çš„å…³ç³»ï¼Œå¯¼è‡´å¹¶å‘ç¨‹åºå…·æœ‰â€œæ‰§è¡Œâ€”â€”æš‚åœâ€”â€”æ‰§è¡Œâ€è¿™ç§é—´æ–­æ€§çš„æ´»åŠ¨è§„å¾‹ã€‚ å¤±å»å°é—­æ€§ï¼šæ˜¯å¤šä¸ªç¨‹åºå…±äº«ç³»ç»Ÿä¸­çš„å„ç§èµ„æºï¼Œå› è€Œè¿™äº›èµ„æºçš„çŠ¶æ€å°†ç”±å¤šä¸ªç¨‹åºæ¥æ”¹å˜ï¼Œè‡´ä½¿ç¨‹åºçš„è¿è¡Œå·²å¤±å»äº†å°é—­æ€§ã€‚ ä¸å¯å†ç°æ€§ï¼šç¨‹åºåœ¨å¹¶å‘æ‰§è¡Œæ—¶ï¼Œç”±äºå¤±å»äº†å°é—­æ€§ï¼Œå¯¼è‡´ä¸å¯å†ç°æ€§ ã€‚ è¿›ç¨‹çš„æè¿° ProcessDefinition,Features,Components,Statesä¸ºä»€ä¹ˆå¼•å…¥è¿›ç¨‹? å¹¶å‘æ‰§è¡Œï¼šè¿›ç¨‹ä½¿å¾—å¤šä¸ªä»»åŠ¡å¯ä»¥åœ¨åŒä¸€æ—¶é—´æ®µå†…äº¤æ›¿æ‰§è¡Œï¼Œè¿™ç§å¹¶å‘æ‰§è¡Œä½¿å¾— CPU å¯ä»¥åœ¨ç­‰å¾…ä¸€ä¸ªä»»åŠ¡çš„ IO æ“ä½œå®Œæˆæ—¶æ‰§è¡Œå¦ä¸€ä¸ªä»»åŠ¡ï¼Œä»è€Œæé«˜äº†ç³»ç»Ÿçš„æ•ˆç‡å’Œååé‡ã€‚ç‹¬ç«‹æ€§ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„ç§æœ‰åœ°å€ç©ºé—´ï¼Œè¿™æ„å‘³ç€ä¸€ä¸ªè¿›ç¨‹ä¸èƒ½ç›´æ¥è®¿é—®å¦ä¸€ä¸ªè¿›ç¨‹çš„å†…å­˜ã€‚è¿™ç§å†…å­˜ä¿æŠ¤æœºåˆ¶æœ‰åŠ©äºé˜²æ­¢ä¸€ä¸ªè¿›ç¨‹æ„å¤–æˆ–æ¶æ„åœ°å¹²æ‰°å¦ä¸€ä¸ªè¿›ç¨‹ã€‚ç®€åŒ–ç¼–ç¨‹æ¨¡å‹ï¼šåœ¨æ²¡æœ‰è¿›ç¨‹çš„æƒ…å†µä¸‹ï¼Œç¨‹åºå‘˜å¿…é¡»æ‰‹åŠ¨ç®¡ç†å¤šä»»åŠ¡æ‰§è¡Œå’Œèµ„æºåˆ†é…ã€‚æœ‰äº†è¿›ç¨‹ï¼Œè¿™äº›ä»»åŠ¡å°±ç”±æ“ä½œç³»ç»Ÿè‡ªåŠ¨å¤„ç†ï¼Œç¨‹åºå‘˜å¯ä»¥ä¸“æ³¨äºåº”ç”¨ç¨‹åºçš„é€»è¾‘ã€‚èµ„æºç®¡ç†ï¼šè¿›ç¨‹æ˜¯èµ„æºåˆ†é…å’Œç®¡ç†çš„åŸºæœ¬å•ä½ã€‚æ“ä½œç³»ç»Ÿå¯ä»¥æ ¹æ®æ¯ä¸ªè¿›ç¨‹çš„éœ€è¦å’Œä¼˜å…ˆçº§åˆ†é…èµ„æºï¼Œå¦‚ CPU æ—¶é—´ã€å†…å­˜ç©ºé—´ç­‰ã€‚ [ProcessvsThread#Process] è¿›ç¨‹æ§åˆ¶å— PCBPCB æ˜¯æ“ä½œç³»ç»Ÿä¸­ç”¨äºæè¿°è¿›ç¨‹çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒæ˜¯æ“ä½œç³»ç»Ÿä¸­æœ€é‡è¦çš„æ•°æ®ç»“æ„ä¹‹ä¸€ã€‚PCB ä¸­åŒ…å«äº†è¿›ç¨‹çš„æ‰€æœ‰ä¿¡æ¯ï¼Œæ˜¯æ“ä½œç³»ç»Ÿå¯¹è¿›ç¨‹è¿›è¡Œæ§åˆ¶å’Œç®¡ç†çš„æ•°æ®ç»“æ„ã€‚å®ƒåŒ…å«ä»¥ä¸‹ä¸»è¦ä¿¡æ¯ï¼š è¿›ç¨‹æ ‡è¯†ç¬¦ä¿¡æ¯ å¤„ç†æœºçš„çŠ¶æ€ä¿¡æ¯ è¿›ç¨‹çš„è°ƒåº¦ä¿¡æ¯ è¿›ç¨‹æ§åˆ¶ä¿¡æ¯ PCB çš„ä¸»è¦ä¿¡æ¯ è¿›ç¨‹æ ‡è¯†ç¬¦ PID è¿›ç¨‹æ ‡è¯†ç¬¦ç”¨äºå”¯ä¸€åœ°æ ‡è¯†ä¸€ä¸ªè¿›ç¨‹ã€‚ä¸€ä¸ªè¿›ç¨‹é€šå¸¸æœ‰ä¸¤ç§æ ‡è¯†ç¬¦ï¼š å†…éƒ¨æ ‡è¯†ç¬¦ã€‚ä¸ºæ¯ä¸€ä¸ªè¿›ç¨‹èµ‹äºˆä¸€ä¸ªå”¯ä¸€çš„æ•°å­—æ ‡è¯†ç¬¦ï¼Œé€šå¸¸æ˜¯è¿›ç¨‹çš„åºå·ã€‚è®¾ç½®å†…éƒ¨æ ‡è¯†ç¬¦ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿æ“ä½œç³»ç»Ÿä½¿ç”¨ã€‚ å¤–éƒ¨æ ‡è¯†ç¬¦ã€‚å®ƒç”±åˆ›å»ºè€…æä¾›ï¼Œé€šå¸¸æ˜¯ç”±å­—æ¯ã€æ•°å­—ç»„æˆï¼Œå¾€å¾€æ˜¯ç”±ç”¨æˆ·ï¼ˆè¿›ç¨‹ï¼‰åœ¨è®¿é—®è¯¥è¿›ç¨‹æ—¶ä½¿ç”¨ã€‚ å¤„ç†æœºçŠ¶æ€ä¿¡æ¯ Processor State Information å¤„ç†æœºçŠ¶æ€ä¿¡æ¯ä¸»è¦æ˜¯ç”±å¤„ç†æœºçš„å„ç§å¯„å­˜å™¨çš„å†…å®¹ç»„æˆçš„ã€‚ä¾‹å¦‚: é€šç”¨å¯„å­˜å™¨ï¼Œåˆç§°ä¸ºç”¨æˆ·å¯è§†å¯„å­˜å™¨ã€‚ æŒ‡ä»¤è®¡æ•°å™¨ PCï¼Œå…¶ä¸­å­˜æ”¾äº†è¦è®¿é—®çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ã€‚ ç¨‹åºçŠ¶æ€å­— PSWï¼Œå…¶ä¸­å«æœ‰çŠ¶æ€ä¿¡æ¯ï¼Œå¦‚æ¡ä»¶ç ã€æ‰§è¡Œæ–¹å¼ã€ä¸­æ–­å±è”½æ ‡å¿—ç­‰ ç”¨æˆ·æ ˆæŒ‡é’ˆ SPï¼Œç”¨äºå­˜æ”¾ç³»ç»Ÿè°ƒç”¨å‚æ•°åŠè°ƒç”¨åœ°å€ã€‚æ ˆæŒ‡é’ˆæŒ‡å‘è¯¥æ ˆçš„æ ˆé¡¶ã€‚ è¿›ç¨‹è°ƒåº¦ä¿¡æ¯ Scheduling Information åœ¨ PCB ä¸­è¿˜å­˜æ”¾ä¸€äº›ä¸è¿›ç¨‹è°ƒåº¦å’Œè¿›ç¨‹å¯¹æ¢æœ‰å…³çš„ä¿¡æ¯ã€‚ è¿›ç¨‹çŠ¶æ€ã€‚æŒ‡æ˜è¿›ç¨‹çš„å½“å‰çŠ¶æ€ è¿›ç¨‹ä¼˜å…ˆçº§ã€‚ äº‹ä»¶ã€‚æ˜¯æŒ‡è¿›ç¨‹ç”±æ‰§è¡ŒçŠ¶æ€è½¬å˜ä¸ºé˜»å¡çŠ¶æ€æ‰€ç­‰å¾…å‘ç”Ÿçš„äº‹ä»¶ï¼Œå³é˜»å¡åŸå› ã€‚ å…¶å®ƒä¿¡æ¯ã€‚å¦‚ï¼šè¿›ç¨‹å·²ç­‰å¾… CPU çš„æ—¶é—´æ€»å’Œã€è¿›ç¨‹å·²æ‰§è¡Œçš„æ—¶é—´æ€»å’Œç­‰ï¼›å¯å‚è€ƒlinux kernel sched.h task_structç»“æ„ è¿›ç¨‹æ§åˆ¶ä¿¡æ¯ Process Control Information ç¨‹åºå’Œæ•°æ®çš„åœ°å€ è¿›ç¨‹çš„ç¨‹åºå’Œæ•°æ®æ‰€åœ¨çš„å†…å­˜æˆ–å¤–å­˜åœ°å€ã€‚ è¿›ç¨‹åŒæ­¥å’Œé€šä¿¡æœºåˆ¶ å®ç°è¿›ç¨‹åŒæ­¥å’Œè¿›ç¨‹é€šä¿¡æ—¶å¿…éœ€çš„æœºåˆ¶ï¼Œå¦‚æ¶ˆæ¯é˜Ÿåˆ—æŒ‡é’ˆã€ä¿¡å·é‡ç­‰ã€‚ èµ„æºæ¸…å• è¿›ç¨‹æ‰€éœ€çš„å…¨éƒ¨èµ„æºåŠå·²ç»åˆ†é…åˆ°è¯¥è¿›ç¨‹çš„èµ„æºçš„æ¸…å•ï¼› é“¾æ¥æŒ‡é’ˆ æœ¬é˜Ÿåˆ—ä¸‹ä¸€ä¸ªè¿›ç¨‹çš„ PCB çš„é¦–åœ°å€ã€‚ PCB çš„ç»„ç»‡æ–¹å¼ çº¿æ€§æ–¹å¼:æŠŠç³»ç»Ÿä¸­æ‰€æœ‰çš„ PCB éƒ½ç»„ç»‡åœ¨ä¸€å¼ çº¿æ€§è¡¨ä¸­ã€‚ é“¾æ¥æ–¹å¼:æŠŠå…·æœ‰åŒä¸€çŠ¶æ€çš„ PCBï¼Œç”¨å…¶ä¸­çš„é“¾æ¥æŒ‡é’ˆé“¾æ¥æˆä¸€ä¸ªé˜Ÿåˆ—ã€‚(é€šå¸¸ï¼Œå¯æ ¹æ®ç­‰å¾…äº‹ä»¶çš„ä¸åŒï¼Œç»„ç»‡å¤šä¸ªä¸åŒçš„é˜»å¡é˜Ÿåˆ—,å¦‚ç­‰å¾…æ‰“å°æœºå’Œç­‰å¾…å†…å­˜ç­‰) ç´¢å¼•æ–¹å¼:ç›¸åŒçŠ¶æ€çš„è¿›ç¨‹ PCB ç»„ç»‡åœ¨ä¸€å¼ è¡¨æ ¼ä¸­ï¼Œç³»ç»Ÿæ ¹æ®æ‰€æœ‰è¿›ç¨‹çš„çŠ¶æ€å»ºç«‹å‡ å¼ ç´¢å¼•è¡¨ï¼Œç³»ç»Ÿåˆ†åˆ«è®°è½½å„ PCB è¡¨æ ¼çš„èµ·å§‹åœ°å€å› ä¸ºè¿›ç¨‹çš„ä¸»è¦æ“ä½œå°±æ˜¯æ’å…¥å’Œåˆ é™¤ï¼Œå› æ­¤ï¼Œé“¾æ¥æ–¹å¼ä½¿ç”¨æ›´å¤šä¸€äº› PCB çš„ä½œç”¨è¿›ç¨‹æ§åˆ¶å—çš„ä½œç”¨æ˜¯ä½¿ä¸€ä¸ªåœ¨å¤šé“ç¨‹åºç¯å¢ƒä¸‹ä¸èƒ½ç‹¬ç«‹è¿è¡Œçš„ç¨‹åºï¼ˆå«æ•°æ®ï¼‰ï¼Œæˆä¸ºä¸€ä¸ªèƒ½ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½(è¿›ç¨‹)ã€‚åœ¨è¿›ç¨‹çš„æ•´ä¸ªç”Ÿå‘½æœŸä¸­ï¼Œæ“ä½œç³»ç»Ÿæ€»æ˜¯é€šè¿‡ PCB å¯¹è¿›ç¨‹è¿›è¡Œæ§åˆ¶çš„ã€‚æ‰€ä»¥è¯´ï¼ŒPCB æ˜¯è¿›ç¨‹å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—ã€‚OS æ˜¯æ ¹æ® PCB æ¥å¯¹å¹¶å‘æ‰§è¡Œçš„è¿›ç¨‹è¿›è¡Œæ§åˆ¶å’Œç®¡ç†çš„ï¼Œå¦‚ï¼šè¿›ç¨‹åˆ›å»ºï¼šåˆ†é…è¿›ç¨‹æ§åˆ¶å—è¿›ç¨‹è°ƒåº¦ï¼šä¿å­˜å’Œè¯»å–è¿›ç¨‹æ§åˆ¶å—è¿›ç¨‹æ’¤é”€ï¼šå›æ”¶è¿›ç¨‹æ§åˆ¶å— è¿›ç¨‹æ§åˆ¶ Process Controlå®šä¹‰è¿›ç¨‹æ§åˆ¶ Process Control:æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ã€‚åŒ…æ‹¬è¿›ç¨‹çš„åˆ›å»º,ç»ˆæ­¢,è°ƒåº¦,çŠ¶æ€è½¬æ¢,åŒæ­¥,é€šä¿¡ç­‰ã€‚è¿›ç¨‹æ§åˆ¶ä¸€èˆ¬æ˜¯ç”± OS å†…æ ¸ä¸­çš„ä¸€ç»„åŸè¯­æ¥å®ç°çš„ã€‚åŸè¯­ Primitive:æ“ä½œç³»ç»Ÿå†…æ ¸æˆ–å¾®æ ¸æä¾›æ ¸å¤–è°ƒç”¨çš„è¿‡ç¨‹æˆ–å‡½æ•°ç§°ä¸ºåŸè¯­,å…¶ç”±è‹¥å¹²æ¡æŒ‡ä»¤æ„æˆï¼Œç”¨äºå®Œæˆç‰¹å®šåŠŸèƒ½çš„ä¸€æ®µç¨‹åºã€‚åŸè¯­åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸å…è®¸è¢«ä¸­æ–­ã€‚åŸå­æ“ä½œ Atom Operationï¼šæ‰§è¡Œä¸­ä¸èƒ½è¢«å…¶å®ƒè¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰æ‰“æ–­çš„æ“ä½œå°±å«åŸå­æ“ä½œã€‚å½“è¯¥æ¬¡æ“ä½œä¸èƒ½å®Œæˆçš„æ—¶å€™ï¼Œå¿…é¡»å›åˆ°æ“ä½œä¹‹å‰çš„çŠ¶æ€ï¼ŒåŸå­æ“ä½œä¸å¯æ‹†åˆ†ã€‚å†…æ ¸ Kernel:è®¡ç®—æœºç¡¬ä»¶çš„ç¬¬ä¸€å±‚æ‰©å……è½¯ä»¶ï¼Œä¸ºç³»ç»Ÿå¯¹è¿›ç¨‹æ§åˆ¶ã€å­˜å‚¨å™¨ç®¡ç†ç­‰æä¾›æœ‰æ•ˆçš„æœºåˆ¶ã€‚å†…æ ¸å¸¸é©»å†…å­˜ï¼Œç´§é ç¡¬ä»¶ï¼Œè¿è¡Œæ•ˆç‡è¾ƒé«˜ã€‚åœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¸­ï¼Œå†…æ ¸æ‰€åŒ…å«çš„åŠŸèƒ½ä¸å°½ç›¸åŒï¼Œä½†ä¸€èˆ¬åº”åŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼šæ”¯æ’‘åŠŸèƒ½:ä¸­æ–­å¤„ç†,æ—¶é’Ÿç®¡ç†,åŸè¯­æ“ä½œèµ„æºç®¡ç†åŠŸèƒ½:è¿›ç¨‹ç®¡ç†,å­˜å‚¨å™¨ç®¡ç†,è®¾å¤‡ç®¡ç† è¿›ç¨‹çš„åˆ›å»ºä¸ç»ˆæ­¢è¿›ç¨‹åˆ›å»ºåŸè¯­æ‰§è¡Œçš„æ“ä½œ: ç”³è¯·ç©ºç™½ PCBã€‚ ä¸ºæ–°è¿›ç¨‹åˆ†é…èµ„æºã€‚ åˆå§‹åŒ–è¿›ç¨‹æ§åˆ¶å—ã€‚ åˆå§‹åŒ–æ ‡è¯†ä¿¡æ¯ã€‚ åˆå§‹åŒ–å¤„ç†æœºçŠ¶æ€ä¿¡æ¯ã€‚ä½¿ç¨‹åºè®¡æ•°å™¨æŒ‡å‘ç¨‹åºçš„å…¥å£åœ°å€ï¼Œä½¿æ ˆæŒ‡é’ˆæŒ‡å‘æ ˆé¡¶ï¼› åˆå§‹åŒ–å¤„ç†æœºæ§åˆ¶ä¿¡æ¯ï¼šè¿›ç¨‹çš„çŠ¶æ€ã€ä¼˜å…ˆçº§ã€‚ å°†æ–°è¿›ç¨‹æ’å…¥å°±ç»ªé˜Ÿåˆ—ï¼Œå¯åŠ¨è°ƒåº¦ã€‚ å¼•èµ·è¿›ç¨‹åˆ›å»ºçš„ä¸»è¦äº‹ä»¶ ç”¨æˆ·ç™»å½•ä½œä¸šè°ƒåº¦æä¾›æœåŠ¡åº”ç”¨è¯·æ±‚ å¼•èµ·è¿›ç¨‹ç»ˆæ­¢çš„äº‹ä»¶ æ­£å¸¸ç»“æŸã€‚ å¼‚å¸¸ç»“æŸï¼š è¶Šç•Œé”™è¯¯ã€‚ ä¿æŠ¤é”™ã€‚ éæ³•æŒ‡ä»¤ã€‚ ç‰¹æƒæŒ‡ä»¤é”™ã€‚ è¿è¡Œè¶…æ—¶ã€‚ ç­‰å¾…è¶…æ—¶ã€‚ ç®—æœ¯è¿ç®—é”™ã€è¢« 0 é™¤ï¼š I/O æ•…éšœã€‚ å¤–ç•Œå¹²é¢„:å¤–ç•Œå¹²é¢„å¹¶éæŒ‡åœ¨æœ¬è¿›ç¨‹è¿è¡Œä¸­å‡ºç°äº†å¼‚å¸¸äº‹ä»¶ï¼Œè€Œæ˜¯æŒ‡è¿›ç¨‹åº”å¤–ç•Œçš„è¯·æ±‚è€Œç»ˆæ­¢è¿è¡Œã€‚ æ“ä½œå‘˜æˆ–æ“ä½œç³»ç»Ÿå¹²é¢„ã€‚ç”±äºæŸç§åŸå› ï¼Œä¾‹å¦‚ï¼Œå‘ç”Ÿäº†æ­»é”ï¼Œç”±æ“ä½œå‘˜æˆ–æ“ä½œç³»ç»Ÿç»ˆæ­¢è¯¥è¿›ç¨‹ï¼› çˆ¶è¿›ç¨‹è¯·æ±‚ç»ˆæ­¢è¯¥è¿›ç¨‹ï¼› å½“çˆ¶è¿›ç¨‹ç»ˆæ­¢æ—¶ï¼ŒOS ä¹Ÿå°†ä»–çš„æ‰€æœ‰å­å­™è¿›ç¨‹ç»ˆæ­¢ã€‚ è¿›ç¨‹çš„ç»ˆæ­¢è¿‡ç¨‹ æ ¹æ®è¢«ç»ˆæ­¢è¿›ç¨‹çš„ PID æ‰¾åˆ°å®ƒçš„ PCBï¼Œä»ä¸­è¯»å‡ºè¯¥è¿›ç¨‹çš„çŠ¶æ€ã€‚ è‹¥è¢«ç»ˆæ­¢è¿›ç¨‹æ­£å¤„äºæ‰§è¡ŒçŠ¶æ€ï¼Œåº”ç«‹å³ç»ˆæ­¢è¯¥è¿›ç¨‹çš„æ‰§è¡Œï¼Œé‡æ–°è¿›è¡Œè°ƒåº¦ã€‚ è‹¥è¯¥è¿›ç¨‹è¿˜æœ‰å­å­™è¿›ç¨‹ï¼Œç«‹å³å°†å…¶æ‰€æœ‰å­å­™è¿›ç¨‹ç»ˆæ­¢ã€‚ å°†è¢«ç»ˆæ­¢è¿›ç¨‹æ‰€æ‹¥æœ‰çš„å…¨éƒ¨èµ„æºï¼Œå½’è¿˜ç»™å…¶çˆ¶è¿›ç¨‹ï¼Œæˆ–è€…å½’è¿˜ç»™ç³»ç»Ÿã€‚ å°†è¢«ç»ˆæ­¢è¿›ç¨‹çš„ PCB ä»æ‰€åœ¨é˜Ÿåˆ—ä¸­ç§»å‡º è¿›ç¨‹çš„é˜»å¡ä¸å”¤é†’ Block and Wakeupå¼•èµ·è¿›ç¨‹é˜»å¡çš„åŸå›  è¯·æ±‚ç³»ç»ŸæœåŠ¡ã€‚ å¯åŠ¨æŸç§æ“ä½œï¼šå¦‚ I/O æ“ä½œã€‚ æ–°æ•°æ®å°šæœªåˆ°è¾¾ã€‚ æ— æ–°å·¥ä½œå¯åš è¿›ç¨‹é˜»å¡çš„è¿‡ç¨‹ å¤„äºè¿è¡ŒçŠ¶æ€çš„è¿›ç¨‹ï¼Œåœ¨å…¶è¿è¡Œè¿‡ç¨‹ä¸­æœŸå¾…æŸä¸€äº‹ä»¶å‘ç”Ÿï¼Œå¦‚ç­‰å¾…é”®ç›˜è¾“å…¥ã€ç­‰å¾…ç£ç›˜æ•°æ®ä¼ è¾“å®Œæˆã€ç­‰å¾…å…¶å®ƒè¿›ç¨‹å‘é€æ¶ˆæ¯ï¼Œå½“è¢«ç­‰å¾…çš„äº‹ä»¶æœªå‘ç”Ÿæ—¶ï¼Œç”±è¿›ç¨‹è‡ªå·±æ‰§è¡Œé˜»å¡åŸè¯­ blockï¼Œä½¿è‡ªå·±ç”±è¿è¡Œæ€å˜ä¸ºé˜»å¡æ€ã€‚å¯è§ï¼Œè¿›ç¨‹çš„é˜»å¡æ˜¯è¿›ç¨‹è‡ªèº«çš„ä¸€ç§ä¸»åŠ¨è¡Œä¸ºã€‚ æ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ï¼Œå½“å‘ç°ä¸Šè¿°æŸäº‹ä»¶æ—¶ï¼Œç”±äºæ— æ³•ç»§ç»­æ‰§è¡Œï¼Œäºæ˜¯è¿›ç¨‹ä¾¿é€šè¿‡è°ƒç”¨é˜»å¡åŸè¯­blockæŠŠè‡ªå·±é˜»å¡ï¼›ï¼ˆé˜»å¡æ˜¯ä¸»åŠ¨è¡Œä¸ºï¼‰ æŠŠè¿›ç¨‹æ§åˆ¶å—ä¸­çš„ç°è¡ŒçŠ¶æ€ç”±runningæ”¹ä¸ºblockedï¼Œå¹¶å°† PCB æ’å…¥é˜»å¡é˜Ÿåˆ—ï¼› è½¬è°ƒåº¦ç¨‹åºè¿›è¡Œé‡æ–°è°ƒåº¦ï¼Œå°†å¤„ç†æœºåˆ†é…ç»™å¦ä¸€å°±ç»ªè¿›ç¨‹ï¼Œå¹¶è¿›è¡Œåˆ‡æ¢ã€‚ è¿›ç¨‹çš„å”¤é†’è¿‡ç¨‹ å½“è¢«é˜»å¡è¿›ç¨‹æ‰€æœŸå¾…çš„äº‹ä»¶å‡ºç°æ—¶ï¼Œä¾‹å¦‚ï¼Œå½“è¿›ç¨‹æå‡º I/O è¯·æ±‚æ—¶ï¼Œè¿›ç¨‹ä¼šè¿›å…¥åˆ°é˜»å¡çŠ¶æ€ï¼Œä½†æ˜¯ä¸èƒ½è®©è¿™ä¸ªè¿›ç¨‹ä¸€ç›´å¤„äºé˜»å¡çŠ¶æ€ï¼Œç­‰åˆ°å…¶ I/O æ“ä½œå®Œæˆæ—¶ï¼Œé‚£ä¹ˆç³»ç»Ÿå°±è¦é‡‡ç”¨å”¤é†’åŸè¯­ wakeup å”¤é†’è¿™ä¸ªå¤„äºé˜»å¡çš„è¿›ç¨‹ï¼Œä»¥ä½¿å®ƒç»§ç»­æ‰§è¡Œã€‚ å½“è¢«é˜»å¡è¿›ç¨‹æ‰€æœŸå¾…çš„äº‹ä»¶å‡ºç°æ—¶ï¼Œåˆ™ç”±æœ‰å…³è¿›ç¨‹ï¼ˆæ¯”å¦‚ï¼Œç”¨å®Œå¹¶é‡Šæ”¾äº†è¯¥ I/O è®¾å¤‡çš„è¿›ç¨‹ï¼‰è°ƒç”¨å”¤é†’åŸè¯­ wakeup()ï¼Œå°†ç­‰å¾…è¯¥äº‹ä»¶çš„è¿›ç¨‹å”¤é†’ã€‚ï¼ˆå”¤é†’æ˜¯ä¸€ç§è¢«åŠ¨è¡Œä¸ºï¼‰ å”¤é†’åŸè¯­çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯ï¼šæŠŠè¢«é˜»å¡çš„è¿›ç¨‹ä»ç­‰å¾…è¯¥äº‹ä»¶çš„é˜»å¡é˜Ÿåˆ—ä¸­ç§»å‡ºå°†å…¶ PCB ä¸­çš„ç°è¡ŒçŠ¶æ€ç”±é˜»å¡æ”¹ä¸ºå°±ç»ªå°†è¯¥ PCB æ’å…¥åˆ°å°±ç»ªé˜Ÿåˆ—ä¸­ç­‰å¾… CPU è°ƒåº¦ è¿›ç¨‹çš„æŒ‚èµ·ä¸æ¿€æ´» Suspend and Activeå½“æœ‰å¼•èµ·è¿›ç¨‹æŒ‚èµ·çš„äº‹ä»¶ï¼Œç³»ç»Ÿåˆ©ç”¨æŒ‚èµ·åŸè¯­suspendï¼ˆï¼‰å°†æŒ‡å®šè¿›ç¨‹æˆ–è€…å¤„äºé˜»å¡çŠ¶æ€çš„è¿›ç¨‹æŒ‚èµ·ã€‚å½“æœ‰å‘ç”Ÿæ¿€æ´»è¿›ç¨‹çš„äº‹ä»¶å‘ç”Ÿï¼Œè‹¥è¯¥è¿›ç¨‹åœ¨å¤–å­˜ä¸­å·²æœ‰è¶³å¤Ÿçš„ç©ºé—´æ—¶ï¼Œå¯å°†åœ¨å¤–å­˜ä¸Šå¤„äºé™æ­¢å°±ç»ªçš„è¿›ç¨‹ä»å¤–å­˜è°ƒå…¥å†…å­˜ï¼Œç³»ç»Ÿåˆ©ç”¨æ¿€æ´»åŸè¯­active()å°†æŒ‡å®šè¿›ç¨‹æ¿€æ´» è¿›ç¨‹çš„æŒ‚èµ·å½“å‡ºç°äº†å¼•èµ·è¿›ç¨‹æŒ‚èµ·çš„äº‹ä»¶æ—¶ï¼Œç³»ç»Ÿå°†åˆ©ç”¨æŒ‚èµ·åŸè¯­suspend()å°†æŒ‡å®šè¿›ç¨‹æŒ‚èµ·æˆ–å¤„äºé˜»å¡çŠ¶æ€çš„è¿›ç¨‹æŒ‚èµ·ã€‚ï¼ˆæŒ‚èµ·æ˜¯ä¸»åŠ¨è¡Œä¸ºï¼‰è°ƒç”¨æŒ‚èµ·åŸè¯­çš„è¿›ç¨‹åªèƒ½æŒ‚èµ·è‡ªå·±æˆ–å…¶å­å­™è¿›ç¨‹;å†…æ ¸çš„ sleep()å‡½æ•°æ˜¯åœ¨æŒ‚èµ·åŸè¯­çš„åŸºç¡€ä¸Šåˆ©ç”¨å®šæ—¶å™¨å®ç°çš„ã€‚ æŒ‚èµ·åŸè¯­çš„æ‰§è¡Œè¿‡ç¨‹ æ£€æŸ¥å°†è¦è¢«æŒ‚èµ·çš„è¿›ç¨‹çš„çŠ¶æ€runningï¼šå°†è¯¥è¿›ç¨‹çš„ PCB ä¸­çš„ç°è¡ŒçŠ¶æ€ç”±runningæ”¹ä¸ºready suspend,è®¾ç½® CPU è°ƒåº¦æ ‡å¿—ä¸ºçœŸï¼›ready: PCB ä¸­çš„ç°è¡ŒçŠ¶æ€ç”±runningæ”¹ä¸ºready suspendï¼›blockedï¼šå°†è¯¥è¿›ç¨‹çš„ PCB ä¸­çš„ç°è¡ŒçŠ¶æ€ç”±blockedæ”¹ä¸ºblocked suspendï¼› å°†è¢«æŒ‚èµ·è¿›ç¨‹çš„ PCB å¤åˆ¶åˆ°æŒ‡å®šçš„å†…å­˜åŒºåŸŸã€‚ è‹¥å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œåˆ™è½¬å‘è°ƒåº¦ç¨‹åºé‡æ–°è°ƒåº¦ Ex:è¯·åˆ¤æ–­ä¸‹åˆ—è¯´æ³•å“ªäº›çš„æ­£ç¡®çš„ï¼Ÿ è¿›ç¨‹å¯ä»¥ç”±è‡ªå·±åˆ›å»º(âŒ,è¿›ç¨‹å¯ä»¥åˆ›å»ºå­è¿›ç¨‹,ä½†ä¸èƒ½è‡ªå·±åˆ›å»ºè‡ªå·±) è¿›ç¨‹å¯ä»¥ç”±è‡ªå·±é˜»å¡ è¿›ç¨‹å¯ä»¥ç”±è‡ªå·±æŒ‚èµ· è¿›ç¨‹å¯ä»¥ç”±è‡ªå·±æ¿€æ´» è¿›ç¨‹å¯ä»¥ç”±è‡ªå·±å”¤é†’ è¿›ç¨‹å¯ä»¥ç”±è‡ªå·±æ’¤æ¶ˆ","link":"/UESTC/OS/Ch2-1ProcessContorl/"},{"title":"ProcessSync","text":"è¿›ç¨‹çš„åŒæ­¥å®šä¹‰ Definitionæ¯ä¸€ä¸ªè¿›ç¨‹å…·æœ‰é¡ºåºæ€§ï¼Œä½†æ˜¯åœ¨å¤šé“ç¨‹åºè®¾è®¡ç³»ç»Ÿä¸­ï¼Œå¤šä¸ªè¿›ç¨‹è¦ç«äº‰ï¼Œè½®æµå ç”¨å¤„ç†å™¨ã€‚æœ‰ä¸¤ä¸ªè¿›ç¨‹ A å’Œ Bï¼Œå®ƒä»¬å„è‡ªé¡ºåºæ‰§è¡Œæ—¶çš„æ“ä½œåºåˆ—å¦‚ä¸‹ï¼šè¿›ç¨‹ A ï¼š a1ï¼Œa2ï¼Œa3ï¼Œâ€¦ï¼Œamè¿›ç¨‹ B ï¼š b1ï¼Œb2ï¼Œb3ï¼Œâ€¦ï¼Œbmåœ¨å¤šé“ç¨‹åºè®¾è®¡ç³»ç»Ÿä¸­ï¼Œå¤„ç†å™¨å¯èƒ½æ‰§è¡Œçš„æ“ä½œåºåˆ—a1ï¼Œ b1 ï¼Œa2ï¼Œ b2 ï¼Œa3ï¼Œ b3 â€¦a1ï¼Œ a2ï¼Œ b1 ï¼Œa3 ï¼Œb2 ï¼Œb3 â€¦ è¿›ç¨‹çš„å¹¶å‘æ€§:åœ¨ä¸€ä¸ªè¿›ç¨‹çš„å·¥ä½œæ²¡æœ‰å®Œæˆä¹‹å‰ï¼Œå¦ä¸€ä¸ªè¿›ç¨‹å°±å¯ä»¥å¼€å§‹å·¥ä½œï¼Œè¿™äº›è¿›ç¨‹å°±ç§°ä¸ºå¯åŒæ—¶æ‰§è¡Œçš„ã€‚æˆ–è€…ç§°å®ƒä»¬å…·æœ‰å¹¶å‘æ€§ï¼Œå¹¶ä¸”æŠŠå¯åŒæ—¶æ‰§è¡Œçš„è¿›ç¨‹ç§°ä¸ºå¹¶å‘è¿›ç¨‹ã€‚ å¦‚æœä¸€ä¸ªè¿›ç¨‹çš„æ‰§è¡Œä¸å½±å“å¦ä¸€ä¸ªè¿›ç¨‹çš„æ‰§è¡Œç»“æœï¼Œä¹Ÿä¸ä¾èµ–å¦ä¸€ä¸ªè¿›ç¨‹çš„è¿›å±•æƒ…å†µï¼Œå³å®ƒä»¬æ˜¯å„è‡ªç‹¬ç«‹çš„ï¼Œåˆ™ç§°è¿™äº›è¿›ç¨‹ç›¸äº’ä¹‹é—´æ˜¯æ— å…³çš„ã€‚ å¦‚æœä¸€ä¸ªè¿›ç¨‹çš„æ‰§è¡Œè¦ä¾èµ–å…¶ä»–è¿›ç¨‹çš„è¿›å±•çŠ¶å†µï¼Œæˆ–è€…å¯èƒ½ä¼šå½±å“å…¶ä»–è¿›ç¨‹çš„æ‰§è¡Œç»“æœï¼Œåˆ™è¯´è¿™äº›è¿›ç¨‹æ˜¯æœ‰äº¤äº’çš„ã€‚ å¯¹äºæœ‰äº¤äº’çš„å¹¶å‘è¿›ç¨‹æ¥è¯´ï¼Œå¹¶å‘ä¼šç ´åâ€œå°é—­æ€§â€å’Œâ€œå¯å†ç°æ€§â€ è¿›ç¨‹äº’æ–¥:å¤šä¸ªè¿›ç¨‹ä¸èƒ½åŒæ—¶ä½¿ç”¨åŒä¸€ä¸ªèµ„æºï¼ŒæŸä¸ªè¿›ç¨‹ä½¿ç”¨è¯¥èµ„æºæ—¶ï¼Œå…¶ä»–è¿›ç¨‹å¿…é¡»ç­‰å¾…ã€‚è¿›ç¨‹åŒæ­¥:å¤šä¸ªè¿›ç¨‹çš„è°ƒç”¨å­˜åœ¨æ—¶åºå…³ç³»ï¼ŒæŸäº›è¿›ç¨‹çš„æ‰§è¡Œå¿…é¡»å…ˆäºå¦ä¸€äº›è¿›ç¨‹ã€‚è¿›ç¨‹é€šä¿¡:å¤šä¸ªè¿›ç¨‹ä¹‹é—´ä¼ é€’æ¶ˆæ¯ã€‚ é—®é¢˜å¼•å…¥ Introç”±äºè¿›ç¨‹äº¤æ›¿ä¿®æ”¹äº†å…±äº«å˜é‡é€ æˆç»“æœå¯èƒ½ä¸æ­£ç¡®ã€‚ 123456789101112131415 ç”Ÿäº§è€… æ¶ˆè´¹è€… register1âˆ¶ = counter; register2âˆ¶= counter; register1âˆ¶= register1+1; register2âˆ¶ = register2-1; counterâˆ¶= register1; counterâˆ¶ = register2;å‡è®¾ï¼šcounterçš„å½“å‰å€¼æ˜¯5ã€‚æ— è®ºç”Ÿäº§è€…å…ˆæ‰§è¡Œï¼Œè¿˜æ˜¯æ¶ˆè´¹è€…å…ˆæ‰§è¡Œï¼Œç»“æœéƒ½æ˜¯5.ä½†æ˜¯ï¼Œå¦‚æœæŒ‰ä¸‹è¿°é¡ºåºæ‰§è¡Œï¼š register1 âˆ¶ = counter; (register1 = 5) register1 âˆ¶ = register1 + 1; (register1 =6) register2 âˆ¶ = counter; (register2 = 5) register2 âˆ¶ = register2 - 1; (register2=4) counter âˆ¶ = register 1; (counter=6) counter âˆ¶ = register2; (counter=4)Counterçš„å€¼æœ€ç»ˆä¸º4ã€‚ä¸¤æ¬¡ç»“æœä¸ä¸€è‡´ï¼Œç¨‹åºæ‰§è¡Œå¤±å»äº†å†ç°æ€§ æœ‰äº¤äº’çš„å¹¶å‘è¿›ç¨‹æ‰§è¡Œæ—¶å‡ºç°ä¸æ—¶é—´æœ‰å…³(time-dependent,å³ä¸è¿›ç¨‹è°ƒåº¦çš„é¡ºåºæœ‰å…³)çš„é”™è¯¯ï¼Œå…¶æ ¹æœ¬åŸå› æ˜¯å¯¹å…±äº«èµ„æºï¼ˆå˜é‡ï¼‰çš„ä½¿ç”¨ä¸å—é™ï¼Œä¸ºäº†ä½¿å¹¶å‘è¿›ç¨‹èƒ½æ­£ç¡®åœ°æ‰§è¡Œï¼Œå¿…é¡»å¯¹å…±äº«å˜é‡çš„ä½¿ç”¨åŠ ä»¥é™åˆ¶ã€‚ è¿›ç¨‹ç«äº‰èµ„æºé¦–å…ˆå¿…é¡»è§£å†³â€œäº’æ–¥â€é—®é¢˜ã€‚æŸäº›èµ„æºå¿…é¡»äº’æ–¥ä½¿ç”¨ï¼Œå¦‚æ‰“å°æœºã€å…±äº«å˜é‡ã€è¡¨æ ¼ã€æ–‡ä»¶ç­‰ã€‚è¿™ç±»èµ„æºåˆç§°ä¸ºä¸´ç•Œèµ„æº critical resourceï¼Œè®¿é—®ä¸´ç•Œèµ„æºçš„é‚£æ®µä»£ç ç§°ä¸ºä¸´ç•ŒåŒº critical sectionã€‚ä»»ä½•æ—¶åˆ»ï¼Œåªå…è®¸ä¸€ä¸ªè¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒºï¼Œä»¥æ­¤å®ç°è¿›ç¨‹å¯¹ä¸´ç•Œèµ„æºçš„äº’æ–¥è®¿é—®ã€‚ å¯æŠŠä¸€ä¸ªè®¿é—®ä¸´ç•Œèµ„æºçš„å¾ªç¯è¿›ç¨‹æè¿°å¦‚ä¸‹ï¼š 12345678910111213repeat entry section critical section exit section remainder sectionuntil false&lt;entry section&gt;:åˆ¤æ–­æ˜¯å¦å¯ä»¥è¿›å…¥ä¸´ç•ŒåŒºï¼Œå¦‚æœå¯ä»¥è¿›å…¥ï¼Œåˆ™å¿…é¡»è®¾ç½®ä¸´ç•ŒåŒºä½¿ç”¨æ ‡å¿—ï¼Œé˜»æ­¢å…¶å®ƒåæ¥çš„è¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒºã€‚&lt;critical section&gt;:è¿›å…¥ä¸´ç•ŒåŒºï¼Œä½¿ç”¨ä¸´ç•Œèµ„æºã€‚&lt;exit section&gt;:å½“ä¸´ç•ŒåŒºå†…çš„è¿›ç¨‹æ‰§è¡Œå®Œæ¯•å¹¶é€€å‡ºä¸´ç•ŒåŒºæ—¶ï¼Œåœ¨â€œé€€å‡ºåŒºâ€ä¿®æ”¹ä¸´ç•ŒåŒºä½¿ç”¨æ ‡å¿—ï¼Œå¹¶è´Ÿè´£å”¤é†’é˜»å¡é˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªè¿›ç¨‹ï¼Œè®©å…¶è¿›å…¥ä¸´ç•ŒåŒºã€‚&lt;remainder section&gt;:å…¶å®ƒä»£ç  é˜»å¡é˜Ÿåˆ— Blocking Queue:å½“ä¸€ä¸ªè¿›ç¨‹è¯•å›¾è¿›å…¥ä¸´ç•ŒåŒºï¼Œè€Œä¸´ç•ŒåŒºå·²ç»è¢«å…¶å®ƒè¿›ç¨‹å ç”¨æ—¶ï¼Œè¯¥è¿›ç¨‹å¿…é¡»ç­‰å¾…ï¼Œç›´åˆ°ä¸´ç•ŒåŒºç©ºé—²ä¸ºæ­¢ã€‚è¿™äº›ç­‰å¾…è¿›ç¨‹çš„é˜Ÿåˆ—ç§°ä¸ºé˜»å¡é˜Ÿåˆ—ã€‚æ­»é” Deadlock:å½“ä¸¤ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹äº’ç›¸ç­‰å¾…å¯¹æ–¹é‡Šæ”¾èµ„æºï¼Œè€Œå¯¼è‡´å®ƒä»¬éƒ½æ— æ³•ç»§ç»­æ‰§è¡Œæ—¶ï¼Œç§°ä¸ºæ­»é”ã€‚ ä¸´ç•ŒåŒºä½¿ç”¨åŸåˆ™(äº’æ–¥æ¡ä»¶) ç©ºé—²è®©è¿›Entry Allowed WHen Free:å¦‚æœä¸´ç•ŒåŒºç©ºé—²ï¼Œåˆ™åªè¦æœ‰è¿›ç¨‹ç”³è¯·å°±ç«‹å³è®©å…¶è¿›å…¥ å¿™åˆ™ç­‰å¾…Bust Then Wait:æ¯æ¬¡ä»…å…è®¸ä¸€ä¸ªè¿›ç¨‹å¤„äºä¸´ç•ŒåŒº æœ‰é™ç­‰å¾…Limited Waiting:è¿›ç¨‹åªèƒ½åœ¨ä¸´ç•ŒåŒºå†…é€—ç•™æœ‰é™æ—¶é—´ï¼Œä¸å¾—ä½¿å…¶ä»–è¿›ç¨‹åœ¨ä¸´ç•ŒåŒºå¤–æ— é™æœŸç­‰å¾… è®©æƒç­‰å¾…Yeilding While Waiting:å½“è¿›ç¨‹ä¸èƒ½è¿›å…¥è‡ªå·±çš„ä¸´ç•ŒåŒºæ—¶ï¼Œåº”ç«‹å³é‡Šæ”¾å¤„ç†æœºï¼Œä»¥å…è¿›ç¨‹å¤„äºâ€œå¿™ç­‰â€çŠ¶æ€ ä¿¡å·é‡ Semaphore1965 å¹´ï¼Œè·å…°çš„ E.W.Dijkstra æå‡ºäº†ä¿¡å·é‡åŒæ­¥æœºåˆ¶ç”¨äºè¿›ç¨‹åŒæ­¥,ç°å¹¿æ³›åº”ç”¨äºå­˜åœ¨ä¸´ç•Œèµ„æºå’Œä¸´ç•ŒåŒºæ§åˆ¶çš„åœºåˆä¿¡å·é‡æ˜¯ä¸€ä¸ªä¸€èˆ¬çš„é”,ä¿¡å·é‡å³ä¿¡å·çš„æ•°é‡;å¼€é”å®é™…ä¸Šå°±æ˜¯å‘ä¸€ä¸ªä¿¡å·,ç­‰å¾…é”æ‰“å¼€å°±æ˜¯ç­‰å¾…ä¸€ä¸ªä¿¡å·é”: {0,1} ä¿¡å·é‡: {-âˆ, â€¦ , -2, -1, 0, 1, 2, â€¦ , âˆ} ä¿¡å·é‡æŒ‰ç…§åŠŸèƒ½æ¥åˆ†ï¼š äº’æ–¥ä¿¡å·é‡ï¼šç”¨äºç”³è¯·æˆ–é‡Šæ”¾èµ„æºçš„ä½¿ç”¨æƒï¼Œå¸¸åˆå§‹åŒ–ä¸º 1ã€‚ èµ„æºä¿¡å·é‡ï¼šç”¨äºç”³è¯·æˆ–å½’è¿˜èµ„æºï¼Œå¯ä»¥åˆå§‹åŒ–ä¸ºå¤§äº 1 çš„æ­£æ•´æ•°ï¼Œè¡¨ç¤ºç³»ç»Ÿä¸­æŸç±»èµ„æºçš„å¯ç”¨ä¸ªæ•°ã€‚æŒ‰ç…§ä¿¡å·é‡æœºåˆ¶çš„å‘å±•åˆ†ä¸ºï¼š æ•´å½¢ä¿¡å·é‡ è®°å½•å‹ä¿¡å·é‡ AND å‹ä¿¡å·é‡ ä¿¡å·é‡é›† In computer science, a semaphore is a variable or abstract data type used to control access to a common resource by multiple threads and avoid critical section problems in a concurrent system such as a multitasking operating system. Semaphores are a type of synchronization primitive. A trivial semaphore is a plain variable that is changed (for example, incremented or decremented, or toggled) depending on programmer-defined conditions.The semaphore concept was invented by Dutch computer scientist Edsger Dijkstra in 1962 or 1963, when Dijkstra and his team were developing an operating system for the Electrologica X8. That system eventually became known as the THE multiprogramming system. ä¸¤ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹å¯ä»¥é€šè¿‡ä¼ é€’ä¿¡å·è¿›è¡Œåˆä½œï¼Œå¯ä»¥è¿«ä½¿è¿›ç¨‹åœ¨æŸä¸ªä½ç½®æš‚æ—¶åœæ­¢æ‰§è¡Œï¼ˆé˜»å¡ç­‰å¾…ï¼‰ï¼Œç›´åˆ°å®ƒæ”¶åˆ°ä¸€ä¸ªå¯ä»¥â€œå‘å‰æ¨è¿›â€çš„ä¿¡å·ï¼ˆè¢«å”¤é†’ï¼‰ã€‚ç›¸åº”åœ°ï¼Œå°†å®ç°ä¿¡å·ç¯ä½œç”¨çš„å˜é‡ç§°ä¸ºä¿¡å·é‡ã€‚ æ•´å½¢ä¿¡å·é‡ Integer Semaphoreå®šä¹‰ä¸ºä¸€ä¸ªæ•´å½¢é‡, ç”¨æ¥è¡¨ç¤ºç©ºé—²èµ„æºçš„æ•°ç›®;ä»…èƒ½é€šè¿‡ä¸¤ä¸ªæ ‡å‡†çš„åŸå­æ“ä½œ wait(s),signal(s)æ¥è®¿é—®å®ƒ,åˆç§°ä¸ºP æ“ä½œå’Œ V æ“ä½œ Proberen(è·å…°è¯­ï¼Œæ„ä¸ºâ€œå°è¯•â€): wait(s) æ“ä½œç”¨äºç”³è¯·èµ„æºï¼ˆæˆ–ä½¿ç”¨æƒï¼‰ï¼Œè¿›ç¨‹æ‰§è¡Œ wait åŸè¯­æ—¶ï¼Œå¯èƒ½ä¼šé˜»å¡è‡ªå·±ï¼›while S &lt;= 0 do no-op; S--; // ç”³è¯·èµ„æº Verhogen(è·å…°è¯­ï¼Œæ„ä¸ºâ€œå¢åŠ â€): signal(s)æ“ä½œç”¨äºé‡Šæ”¾èµ„æºï¼ˆæˆ–å½’è¿˜èµ„æºä½¿ç”¨æƒï¼‰ï¼Œè¿›ç¨‹æ‰§è¡Œ signal åŸè¯­æ—¶ï¼Œæœ‰è´£ä»»å”¤é†’ä¸€ä¸ªé˜»å¡è¿›ç¨‹ã€‚S++; // é‡Šæ”¾èµ„æº Note å¿…é¡»æˆå¯¹ä½¿ç”¨ waitå’Œ signalåŸè¯­ waitã€signal åŸè¯­ä¸èƒ½å‡ºç°æ¬¡åºé”™è¯¯ã€é‡å¤æˆ–é—æ¼ é—æ¼ wait åŸè¯­åˆ™ä¸èƒ½ä¿è¯äº’æ–¥è®¿é—® é—æ¼ signal åŸè¯­åˆ™ä¸èƒ½åœ¨ä½¿ç”¨ä¸´ç•Œèµ„æºä¹‹åå°†å…¶é‡Šæ”¾ è®°å½•å‹ä¿¡å·é‡ Record Semaphoreè®°å½•å‹ä¿¡å·é‡æœºåˆ¶ï¼Œæ˜¯ä¸€ç§ä¸å­˜åœ¨å¿™ç­‰ç°è±¡çš„è¿›ç¨‹åŒæ­¥æœºåˆ¶ã€‚æ“ä½œç³»ç»Ÿå†…æ ¸ä»¥ç³»ç»Ÿè°ƒç”¨å½¢å¼æä¾› waitå’Œ signalåŸè¯­ï¼Œåº”ç”¨ç¨‹åºé€šè¿‡è¯¥ç³»ç»Ÿè°ƒç”¨å®ç°è¿›ç¨‹é—´çš„äº’æ–¥ã€‚å·¥ç¨‹å®è·µè¯æ˜ï¼Œåˆ©ç”¨ä¿¡å·é‡æ–¹æ³•å®ç°è¿›ç¨‹äº’æ–¥æ˜¯é«˜æ•ˆçš„ï¼Œä¸€ç›´è¢«å¹¿æ³›é‡‡ç”¨ã€‚ è®°å½•å‹ä¿¡å·é‡çš„æ•°æ®ç»“æ„ 123456789101112131415#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;// é“¾è¡¨èŠ‚ç‚¹ï¼Œç”¨äºè¡¨ç¤ºç­‰å¾…é˜Ÿåˆ—ä¸­çš„è¿›ç¨‹typedef struct Node { int pid; // è¿›ç¨‹ID struct Node* next; // æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ} Node;// è®°å½•å‹ä¿¡å·é‡typedef struct { // valueçš„åˆå€¼è¡¨ç¤ºç³»ç»Ÿä¸­æŸç±»èµ„æºçš„æ•°ç›®ï¼Œ valueçš„åˆå§‹å€¼&gt;1æ—¶ï¼Œç§°ä¸ºèµ„æºä¿¡å·é‡ï¼Œ valueçš„åˆå§‹å€¼=1æ—¶ï¼Œç§°ä¸ºäº’æ–¥ä¿¡å·é‡ int value; Node* listOfProcess; // ä¿¡å·é‡çš„é˜»å¡é˜Ÿåˆ—} RecordSemaphore; â€œå¿™ç­‰â€ï¼ˆBusy Waitingï¼‰æ˜¯ä¸€ç§è¿›ç¨‹åŒæ­¥ç­–ç•¥ä¸­çš„ç°è±¡ï¼Œä¹Ÿè¢«ç§°ä¸ºâ€è‡ªæ—‹ç­‰å¾…â€ã€‚å½“ä¸€ä¸ªè¿›ç¨‹è¯•å›¾è¿›å…¥ä¸€ä¸ªè¢«å…¶ä»–è¿›ç¨‹å ç”¨çš„ä¸´ç•ŒåŒºæ—¶ï¼Œå¦‚æœä½¿ç”¨äº†å¿™ç­‰ç­–ç•¥ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿›ç¨‹ä¼šåœ¨ä¸€ä¸ªå¾ªç¯ä¸­ä¸æ–­æ£€æŸ¥ä¸´ç•ŒåŒºæ˜¯å¦å¯ç”¨ï¼Œç›´åˆ°å®ƒå˜ä¸ºå¯ç”¨çŠ¶æ€ã€‚æ¢å¥è¯è¯´ï¼Œè¿›ç¨‹åœ¨ç­‰å¾…æœŸé—´ä¿æŒæ´»è·ƒï¼Œå¹¶æ¶ˆè€— CPU æ—¶é—´ï¼Œè€Œä¸æ˜¯è¢«æŒ‚èµ·æˆ–è½¬ç§»åˆ°ç­‰å¾…çŠ¶æ€ã€‚è™½ç„¶å¿™ç­‰å¯ä»¥åœ¨æŸäº›æƒ…å†µä¸‹ï¼ˆå¦‚ç­‰å¾…æ—¶é—´é¢„æœŸéå¸¸çŸ­ï¼‰æä¾›å¾ˆå¥½çš„å“åº”æ—¶é—´ï¼Œä½†å®ƒé€šå¸¸è¢«è§†ä¸ºä¸€ç§æ•ˆç‡ä½ä¸‹çš„ç­–ç•¥ï¼Œå› ä¸ºå®ƒæµªè´¹äº† CPU çš„è®¡ç®—èƒ½åŠ›ï¼Œå°¤å…¶æ˜¯åœ¨ç­‰å¾…æ—¶é—´è¾ƒé•¿çš„æƒ…å†µä¸‹ã€‚ä¸æ­¤ç›¸åï¼Œè®°å½•å‹ä¿¡å·é‡æœºåˆ¶ï¼ˆBlocking or Sleeping Semaphore Mechanismï¼‰å…è®¸è¿›ç¨‹åœ¨ç­‰å¾…è¿›å…¥ä¸´ç•ŒåŒºæ—¶è¿›å…¥ç¡çœ çŠ¶æ€ï¼Œä»è€Œä¸æ¶ˆè€— CPU æ—¶é—´ã€‚å½“ä¸´ç•ŒåŒºå¯ç”¨æ—¶ï¼Œè¿›ç¨‹ä¼šè¢«å”¤é†’ã€‚è¿™ç§æ–¹æ³•æ›´æœ‰æ•ˆï¼Œä½†å¯èƒ½å¯¼è‡´ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ï¼Œå› ä¸ºç³»ç»Ÿéœ€è¦åœ¨è¿è¡Œå’Œç­‰å¾…çš„è¿›ç¨‹ä¹‹é—´åˆ‡æ¢ã€‚ è®°å½•å‹ä¿¡å·é‡çš„ Pï¼ŒV æ“ä½œ wait(s)å’Œ signal(s) s.value&gt;=0 æ—¶ï¼Œs.queue ä¸ºç©ºï¼›s.value&lt;0 æ—¶ï¼Œs.value çš„ ç»å¯¹å€¼ä¸º s.queue ä¸­ç­‰å¾…è¿›ç¨‹çš„ä¸ªæ•°s.value åˆå§‹å€¼ä¸º 1 æ—¶ï¼Œç§°ä¸ºäº’æ–¥ä¿¡å·é‡ï¼›s.value åˆå§‹å€¼&gt;1 æ—¶ï¼Œç§°ä¸ºèµ„æºä¿¡å·é‡ã€‚å½“ä»…æœ‰ä¸¤ä¸ªå¹¶å‘è¿›ç¨‹å…±äº«ä¸´ç•Œèµ„æºæ—¶ï¼Œäº’æ–¥ä¿¡å·é‡ä»…èƒ½å–å€¼ 1ã€0ã€ï¼1ã€‚å…¶ä¸­ï¼Œ s.value=1, è¡¨ç¤ºæ— è¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒº s.value=0ï¼Œè¡¨ç¤ºå·²æœ‰ä¸€ä¸ªè¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒº s.value=-1,åˆ™è¡¨ç¤ºå·²æœ‰ä¸€è¿›ç¨‹æ­£åœ¨ç­‰å¾…è¿›å…¥ä¸´ç•ŒåŒºå½“ç”¨ s æ¥å®ç° n ä¸ªè¿›ç¨‹çš„äº’æ–¥æ—¶ï¼Œs.value çš„å–å€¼èŒƒå›´ä¸º 1 ï½-(n-1) 123456789101112void wait(RecordSemaphore* s) { s-&gt;value--; if (s-&gt;value &lt; 0) { block(s-&gt;listOfProcess); //è¿›ç¨‹é˜»å¡, è¿›å…¥S.Lé˜Ÿåˆ—ï¼› }}void singal(RecordSemaphore* s) { s-&gt;value++; if (s-&gt;value &lt;= 0) { // s-&gt;value=0æ—¶,åˆ™åœ¨s-&gt;value++ä¹‹å‰value=-1,å³æœ‰1ä¸ªè¿›ç¨‹åœ¨ç­‰å¾… wakeup(s-&gt;listOfProcess); // å”¤é†’é˜»å¡é˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªè¿›ç¨‹ }} AND å‹ä¿¡å·é‡ AND Semaphoreå¦‚æœä¸€ä¸ªè¿›ç¨‹éœ€è¦äº‹å…ˆè·å¾—ä¸€ä¸ªæˆ–å¤šä¸ªå…±äº«èµ„æºåæ‰èƒ½æ‰§è¡Œä»»åŠ¡ã€‚ä¾‹å¦‚ï¼š 123process A: process B:wait(Dmutex); wait(Emutex);wait(Emutex); wait(Dmutex); æœ€åï¼Œè¿›ç¨‹ A å’Œ B å°±å¤„äºåƒµæŒçŠ¶æ€ï¼Œåœ¨æ— å¤–åŠ›ä½œç”¨ä¸‹ï¼Œä¸¤ä¸ªè¿›ç¨‹éƒ½æ— æ³•ä»åƒµæŒçŠ¶æ€ä¸­è§£è„±å‡ºæ¥ï¼Œè¿™æ­¤ A å’Œ B è¿›å…¥æ­»é”çŠ¶æ€ã€‚ AND åŒæ­¥æœºåˆ¶çš„åŸºæœ¬æ€æƒ³ï¼šå°†è¿›ç¨‹åœ¨æ•´ä¸ªè¿è¡Œè¿‡ç¨‹ä¸­éœ€è¦çš„æ‰€æœ‰èµ„æºï¼Œä¸€æ¬¡æ€§å…¨éƒ½åœ°åˆ†é…ç»™è¿›ç¨‹ï¼Œå¾…è¿›ç¨‹ä½¿ç”¨å®Œåå†ä¸€èµ·é‡Šæ”¾ã€‚åªè¦å°šæœ‰ä¸€ä¸ªèµ„æºæœªèƒ½åˆ†é…ç»™è¿›ç¨‹ï¼Œå…¶å®ƒæ‰€æœ‰å¯èƒ½ä¸ºä¹‹åˆ†é…çš„èµ„æºï¼Œä¹Ÿä¸åˆ†é…ç»™ä»–ã€‚åŸå­æ“ä½œï¼šæ‰€æœ‰èµ„æºè¦ä¹ˆå…¨éƒ¨åˆ†é…åˆ°è¿›ç¨‹ï¼Œè¦ä¹ˆä¸€ä¸ªä¹Ÿä¸åˆ†é… .åœ¨ wait æ“ä½œä¸­ï¼Œå¢åŠ äº†ä¸€ä¸ªâ€œANDâ€æ¡ä»¶ï¼Œæ•…ç§°ä¸º ANDåŒæ­¥ï¼Œæˆ–ç§°ä¸º åŒæ—¶waitæ“ä½œ. 1234567891011121314151617181920212223242526272829void Swait(S1, S2, â€¦, Sn) { //PåŸè¯­ï¼› if (S1 â‰¥1 and S2 â‰¥ 1 â€¦ Sn â‰¥ 1) {//æ»¡è¶³èµ„æºè¦æ±‚æ—¶çš„å¤„ç†ï¼› for (i = 1; i &lt;= n; ++i){ // waitçš„å¤„ç†æ˜¯så…ˆå‡1ï¼Œå†åˆ¤æ–­æ˜¯å¦&lt;0ï¼Œè‹¥æ˜¯å°±è¿›å…¥é˜»å¡é˜Ÿåˆ—ã€‚å¦‚æœè¦ä¸é˜»å¡ï¼Œåˆ™sçš„åˆå§‹å€¼éœ€è¦&gt;=1 // Swaitä¸waitçš„å¤„ç†ä¸åŒï¼Œè¿™é‡Œæ˜¯åœ¨ç¡®ä¿¡å¯æ»¡è¶³èµ„æºè¦æ±‚æ—¶ï¼Œæ‰è¿›è¡Œå‡1æ“ä½œ Si=Si-1; } } else { /*æŸäº›èµ„æºä¸å¤Ÿæ—¶çš„å¤„ç†ï¼› è¿›ç¨‹è¿›å…¥ç¬¬ä¸€ä¸ªå°äº1çš„ä¿¡å·é‡çš„é˜»å¡é˜Ÿåˆ— ; æ¢å¤PCå¯„å­˜å™¨ä¸ºSwaitå¼€å§‹æ—¶çš„çŠ¶æ€ï¼›*/ }}void Ssignal(S1, S2, â€¦, Sn){ for (i = 1; i &lt;= n; i++){ Si++; //é‡Šæ”¾å ç”¨çš„èµ„æºï¼› for (each process P waiting in Si.L){ //æ£€æŸ¥æ¯ç§èµ„æºçš„é˜»å¡é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰è¿›ç¨‹ï¼› //ä»é˜»å¡é˜Ÿåˆ—Si.queueä¸­å–å‡ºè¿›ç¨‹P; P = Si.queue.getHead(); if(åˆ¤æ–­Pæ˜¯å¦é€šè¿‡Swaitä¸­çš„æµ‹è¯•){//æ³¨:ä¸signalä¸åŒï¼Œéœ€é‡æ–°åˆ¤æ–­è¿›ç¨‹Pè¿›å…¥å°±ç»ªé˜Ÿåˆ—; break; }else{ //æœªé€šè¿‡æ£€æŸ¥ï¼ˆèµ„æºä¸å¤Ÿç”¨ï¼‰æ—¶çš„å¤„ç†ï¼› è¿›ç¨‹Pè¿›å…¥æŸé˜»å¡é˜Ÿåˆ—ï¼›//ç„¶åç»§ç»­å¾ªç¯åˆ¤æ–­ä¸‹ä¸€ä¸ªè¿›ç¨‹ } } } } ä¿¡å·é‡é›† Semaphore Setåœ¨è®°å½•å‹ä¿¡å·é‡æœºåˆ¶ä¸­ï¼Œwait(S)æˆ– signal(S)æ“ä½œä»…èƒ½å¯¹ä¿¡å·é‡æ–½ä»¥åŠ  1 æˆ–å‡ 1 æ“ä½œï¼Œæ„å‘³ç€æ¯æ¬¡åªèƒ½è·å¾—æˆ–é‡Šæ”¾ä¸€ä¸ªå•ä½çš„ä¸´ç•Œèµ„æºã€‚åœ¨æ¯æ¬¡åˆ†é…æ—¶ï¼Œé‡‡ç”¨ä¿¡å·é‡é›†æ¥æ§åˆ¶ï¼Œå¯ä»¥åˆ†é…å¤šä¸ªå•ä½çš„èµ„æºã€‚ 1234567891011121314151617181920//Siâ€”i ç±»èµ„æºç°æœ‰æ•°é‡ï¼›tiâ€”i ç±»èµ„æºçš„åˆ†é…ä¸‹é™å€¼ï¼›diâ€”ç”³è¯·i ç±»èµ„æºæ•°é‡;void Swait ( S1, t1, d1; ... ; Sn, tn, dn ){ if (S1 â‰¥ t1 and S2 â‰¥ t2 â€¦ Sn â‰¥ tn) { for (i = 1; i &lt;= n; i++){ Si=Si-di; } } else { //å‡è®¾é¦–å…ˆå‘ç° Sj &lt; tjï¼Œè¿›ç¨‹è¿›å…¥Sj.Lé˜Ÿåˆ—ï¼› //è¿›ç¨‹æŠ•å…¥ä¸Sjç›¸å…³çš„é˜»å¡é˜Ÿåˆ— //æ¢å¤PCå¯„å­˜å™¨ä¸ºSwaitå¼€å§‹æ—¶çš„çŠ¶æ€ï¼› //å¯åŠ¨è¿›ç¨‹è°ƒåº¦ç¨‹åºï¼Œè°ƒåº¦å…¶å®ƒè¿›ç¨‹æ‰§è¡Œï¼› }}//siâ€”i ç±»èµ„æºç°æœ‰æ•°ï¼›diâ€”i ç±»èµ„æºé‡Šæ”¾æ•°é‡ ;void Ssignal ( S1, d1; ... ; Sn, dn ){ for (i = 1; i &lt;= n; i++){ Si=Si+di; } //æŠŠä¸Siæœ‰å…³é˜Ÿåˆ—ä¸­çš„è¿›ç¨‹ç§»å…¥å°±ç»ªé˜Ÿåˆ—} â€œä¿¡å·é‡é›†æœºåˆ¶â€å¯ä»¥ç”¨äºå„ç§æƒ…å†µçš„èµ„æºåˆ†é…å’Œé‡Šæ”¾ï¼Œå‡ ç§ç‰¹æ®Šæƒ…å†µï¼š Swait(S, d, d)è¡¨ç¤ºæ¯æ¬¡ç”³è¯· d ä¸ªèµ„æºï¼Œå½“å°‘äº d ä¸ªæ—¶ï¼Œä¾¿ä¸åˆ†é… Swait(S, 1, 1)è¡¨ç¤ºä¸€èˆ¬çš„è®°å½•å‹äº’æ–¥ä¿¡å·é‡ï¼ˆS=1 æ—¶ï¼‰æˆ–èµ„æºä¿¡å·é‡ï¼ˆS&gt;1 æ—¶ï¼‰ Swait(S, 1, 0)å¯ä½œä¸ºä¸€ä¸ªå¯æ§å¼€å…³ï¼ˆå½“ Sï‚³1 æ—¶ï¼Œå…è®¸å¤šä¸ªè¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒºï¼›å½“ S=0 æ—¶ï¼Œç¦æ­¢ä»»ä½•è¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒºï¼‰ ä¿¡å·é‡çš„åº”ç”¨åˆ©ç”¨ä¿¡å·é‡å®ç°è¿›ç¨‹äº’æ–¥ä¸ºä½¿å¤šä¸ªè¿›ç¨‹èƒ½äº’æ–¥åœ°è®¿é—®æŸä¸´ç•Œèµ„æºï¼Œåªé¡»ä¸ºè¯¥èµ„æºè®¾ç½®ä¸€äº’æ–¥ä¿¡å·é‡ mutexï¼Œå¹¶è®¾å…¶åˆå§‹å€¼ä¸º 1ï¼Œç„¶åå°†å„è¿›ç¨‹è®¿é—®è¯¥èµ„æºçš„ä¸´ç•ŒåŒº CS ç½®äº waitï¼ˆmutexï¼‰å’Œ signalï¼ˆmutexï¼‰æ“ä½œä¹‹é—´å³å¯ã€‚åˆ©ç”¨ä¿¡å·é‡æ¥æè¿°å‰è¶‹ï¼ˆåˆä½œï¼‰å…³ç³»å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªä»»åŠ¡ A å’Œ Bï¼Œå…¶ä¸­ä»»åŠ¡ B ä¾èµ–äºä»»åŠ¡ A çš„å®Œæˆã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªåˆå§‹å€¼ä¸º 0 çš„ä¿¡å·é‡æ¥æè¿°è¿™ç§å‰é©±å…³ç³»ã€‚å…·ä½“çš„æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼šä»»åŠ¡ A åœ¨å®Œæˆåï¼Œæ‰§è¡Œä¸€ä¸ªä¿¡å·é‡çš„ V æ“ä½œï¼ˆsignalï¼‰ï¼Œå°†ä¿¡å·é‡çš„å€¼åŠ  1ã€‚ä»»åŠ¡ B åœ¨å¼€å§‹å‰ï¼Œæ‰§è¡Œä¸€ä¸ªä¿¡å·é‡çš„ P æ“ä½œï¼ˆwaitï¼‰ã€‚å¦‚æœä¿¡å·é‡çš„å€¼å¤§äº 0ï¼Œé‚£ä¹ˆå°†ä¿¡å·é‡çš„å€¼å‡ 1 å¹¶ç»§ç»­æ‰§è¡Œã€‚å¦‚æœä¿¡å·é‡çš„å€¼ç­‰äº 0ï¼Œé‚£ä¹ˆä»»åŠ¡ B å°†é˜»å¡ï¼Œç›´åˆ°ä¿¡å·é‡çš„å€¼å¤§äº 0ã€‚ parbegin å’Œ parend æ˜¯å¹¶å‘ç¼–ç¨‹ä¸­ç”¨æ¥è¡¨ç¤ºå¹¶è¡Œå¼€å§‹å’Œå¹¶è¡Œç»“æŸçš„å…³é”®å­— ä¾‹ï¼šç”¨ And ä¿¡å·é‡æ¥æè¿°å¦‚ä¸‹çš„å‰è¶‹å›¾ 123456789Var a,b,c,d,e,f,g: semaphore: 0,0,0,0,0,0,0;Parbegin begin S1; Ssignal(a,b); end; begin wait(a); S2; Ssignal(c,d); end; begin wait(b); S3; signal(e); end; begin wait(c); S4; signal(f); end; begin wait(d); S5; signal(g); end; begin Swait(e,f,g); S6; end;Parend; ç¡¬ä»¶åŒæ­¥æœºåˆ¶ Hardware Synchronization Mechanismåˆ©ç”¨è®¡ç®—æœºç¡¬ä»¶æŒ‡ä»¤è§£å†³ä¸´ç•ŒåŒºé—®é¢˜å¯¹ä¸´ç•ŒåŒºç®¡ç†å°†æ ‡è¯†çœ‹åšä¸€ä¸ªé”ï¼Œâ€œé”å¼€â€è¿›å…¥ï¼Œâ€œé”å…³â€ç­‰å¾…ã€‚åˆå§‹æ‰“å¼€ï¼Œæ¯ä¸ªè¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹å¿…é¡»å¯¹é”è¿›è¡Œæµ‹è¯•ã€‚æµ‹è¯•å’Œå…³é”æ“ä½œå¿…é¡»è¿ç»­ï¼ˆåŸå­æ“ä½œï¼‰ è™½ç„¶å¯ä»¥åˆ©ç”¨è½¯ä»¶æ–¹æ³•è§£å†³è¯¸è¿›ç¨‹äº’æ–¥è¿›å…¥ä¸´ç•ŒåŒºçš„é—®é¢˜ï¼Œä½†æœ‰ä¸€å®šéš¾åº¦ï¼Œå¹¶ä¸”å­˜åœ¨å¾ˆå¤§çš„å±€é™æ€§ï¼Œå› è€Œç°åœ¨å·²å¾ˆå°‘é‡‡ç”¨ã€‚ç›¸åº”åœ°ï¼Œç›®å‰è®¸å¤šè®¡ç®—æœºå·²æä¾›äº†ä¸€äº›ç‰¹æ®Šçš„ç¡¬ä»¶æŒ‡ä»¤ï¼Œå…è®¸å¯¹ä¸€ä¸ªå­—ä¸­çš„å†…å®¹è¿›è¡Œæ£€æµ‹å’Œä¿®æ­£ï¼Œæˆ–è€…æ˜¯å¯¹ä¸¤ä¸ªå­—çš„å†…å®¹è¿›è¡Œäº¤æ¢ç­‰ã€‚å¯åˆ©ç”¨è¿™äº›ç‰¹æ®Šçš„æŒ‡ä»¤æ¥è§£å†³ä¸´ç•ŒåŒºé—®é¢˜ã€‚ å…³ä¸­æ–­ åˆ©ç”¨ Test-and-Set æŒ‡ä»¤å®ç°äº’æ–¥ åˆ©ç”¨ Swap æŒ‡ä»¤å®ç°è¿›ç¨‹äº’æ–¥ å…³ä¸­æ–­å®ç°äº’æ–¥ Disable Interruptsä¸­æ–­æ˜¯æŒ‡è®¡ç®—æœºåœ¨æ‰§è¡ŒæœŸé—´ï¼Œç³»ç»Ÿå†…å‘ç”Ÿä»»ä½•éå¯»å¸¸çš„æˆ–éé¢„æœŸçš„æ€¥éœ€å¤„ç†äº‹ä»¶ï¼Œä½¿å¾— CPU æš‚æ—¶ä¸­æ–­å½“å‰æ­£åœ¨æ‰§è¡Œçš„ç¨‹åºè€Œè½¬å»æ‰§è¡Œç›¸åº”çš„äº‹ä»¶å¤„ç†ç¨‹åºï¼Œå¾…å¤„ç†å®Œæ¯•ååˆè¿”å›åŸæ¥è¢«ä¸­æ–­å¤„ç»§ç»­æ‰§è¡Œæˆ–è°ƒåº¦æ–°çš„è¿›ç¨‹æ‰§è¡Œçš„è¿‡ç¨‹ã€‚ä¸­æ–­å¤„ç†æ˜¯æŒ‡ CPU å“åº”ä¸­æ–­ï¼Œè½¬å…¥ä¸­æ–­å¤„ç†ç¨‹åºï¼Œç³»ç»Ÿå¼€å§‹å¤„ç†ä¸­æ–­ã€‚ä¸­æ–­å“åº”æ˜¯æŒ‡ CPU æ”¶åˆ°ä¸­æ–­è¯·æ±‚åè½¬å‘ç›¸åº”çš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚å¼€ä¸­æ–­å°±æ˜¯æŒ‡ç³»ç»Ÿå¯ä»¥åœ¨è¿ç»­è¿è¡Œæ—¶ä¸­æ–­ï¼Œå»è¿è¡Œä¸­æ–­æœåŠ¡å‡½æ•°å…³ä¸­æ–­å°±æ˜¯æŒ‡å…³é—­ç³»ç»Ÿä¸­æ–­ï¼Œç³»ç»Ÿä¸å“åº”å…¶ä»–çš„ä¸­æ–­ï¼Œä¸å…è®¸ç³»ç»Ÿæ‰“æ–­è¿ç»­çš„è¿è¡Œ å…³ä¸­æ–­è¿›å…¥é”æµ‹è¯•å‰å…³é—­ä¸­æ–­ï¼Œå®Œæˆé”æµ‹è¯•å¹¶ä¸Šé”åæ‰“å¼€ä¸­æ–­è¿›ç¨‹åœ¨ä¸´ç•ŒåŒºæ—¶è®¡ç®—æœºç³»ç»Ÿä¸å“åº”ä¸­æ–­ï¼Œä¸ä¼šå¼•å‘è°ƒåº¦ Pros And Cons å…³ä¸­æ–­æ˜¯å®ç°äº’æ–¥çš„æœ€ç®€å•çš„æ–¹æ³•ä¹‹ä¸€ã€‚ æ»¥ç”¨å…³ä¸­æ–­æƒåŠ›å¯èƒ½å¯¼è‡´ä¸¥é‡åæœï¼› å…³ä¸­æ–­æ—¶é—´è¿‡é•¿ï¼Œä¼šå½±å“ç³»ç»Ÿæ•ˆç‡ï¼Œé™åˆ¶äº†å¤„ç†å™¨äº¤å‰æ‰§è¡Œç¨‹åºçš„èƒ½åŠ›ï¼› å…³ä¸­æ–­æ–¹æ³•ä¹Ÿä¸é€‚ç”¨äºå¤š CPU ç³»ç»Ÿï¼Œå› ä¸ºåœ¨ä¸€ä¸ªå¤„ç†å™¨ä¸Šå…³ä¸­æ–­å¹¶ä¸èƒ½é˜²æ­¢è¿›ç¨‹åœ¨å…¶å®ƒå¤„ç†å™¨ä¸Šæ‰§è¡Œç›¸åŒçš„ä¸´ç•Œæ®µä»£ç ã€‚ 1234567891011121314151617181920212223extern bool are_interrupts_enabled();void atomic_operation(void (*operation)()) { start_atomic_operation(); operation(); end_atomic_operation(are_interrupts_enabled());}void start_atomic_operation() { // å¦‚æœä¸­æ–­æ˜¯å¼€å¯çš„ï¼Œé‚£ä¹ˆå…³é—­ä¸­æ–­ if (are_interrupts_enabled()) { disable_interrupts(); }}void end_atomic_operation(bool were_interrupts_enabled) { // å¦‚æœåœ¨åŸå­æ“ä½œå¼€å§‹ä¹‹å‰ä¸­æ–­æ˜¯å¼€å¯çš„ï¼Œé‚£ä¹ˆé‡æ–°å¼€å¯ä¸­æ–­ if (were_interrupts_enabled) { enable_interrupts(); return; } enable_interrupts();} Test And Set æŒ‡ä»¤å®ç°äº’æ–¥è¿™æ˜¯ä¸€ç§å€ŸåŠ© TS(Test-and-Set)ç¡¬ä»¶æŒ‡ä»¤ä»¥å®ç°äº’æ–¥çš„æ–¹æ³•ã€‚åœ¨è®¸å¤šè®¡ç®—æœºä¸­éƒ½æä¾›äº†è¿™ç§æŒ‡ä»¤ã€‚ lock=falseè¡¨ç¤ºèµ„æºç©ºé—²ï¼Œ*lock=TUREè¡¨ç¤ºèµ„æºæ­£åœ¨è¢«ä½¿ç”¨ã€‚å½“èµ„æºè¢«ä½¿ç”¨æ—¶ï¼ŒTS è¿”å› tureï¼Œåˆ™ while TSï¼ˆ&amp;lock)ï¼›è¯­å¥æ¡ä»¶ä¸ºçœŸä¼šä¸€ç›´å¾ªç¯ç­‰å¾…ã€‚ è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªå®ç°äº†ç®€å•çš„è‡ªæ—‹é”ï¼ˆspinlockï¼‰çš„ä¾‹å­ï¼Œä½¿ç”¨äº†ä¸€ä¸ªç§°ä¸º Test-and-Setï¼ˆTSï¼‰çš„åŸå­æ“ä½œã€‚è‡ªæ—‹é”æ˜¯ä¸€ç§ç”¨äºåŒæ­¥çš„ä½çº§åˆ«çš„åŸå­æ“ä½œï¼Œé€šå¸¸ç”¨äºä¿æŠ¤çŸ­æœŸçš„ä¸´ç•ŒåŒºï¼ˆcritical sectionï¼‰ã€‚è‡ªæ—‹é”å¯èƒ½ä¼šå¯¼è‡´èµ„æºæµªè´¹ï¼Œå› ä¸ºåœ¨ç­‰å¾…è·å–é”çš„è¿‡ç¨‹ä¸­ï¼Œçº¿ç¨‹å¹¶ä¸ä¼šé‡Šæ”¾ CPUï¼Œè€Œæ˜¯ä¼šä¸€ç›´å¿™ç­‰å¾…ã€‚å› æ­¤ï¼Œè‡ªæ—‹é”é€šå¸¸åªç”¨äºä¿æŠ¤éå¸¸çŸ­æœŸçš„ä¸´ç•ŒåŒºã€‚å¯¹äºä¿æŠ¤é•¿æœŸçš„ä¸´ç•ŒåŒºï¼Œé€šå¸¸ä¼šä½¿ç”¨å…¶ä»–çš„åŒæ­¥æœºåˆ¶ï¼Œå¦‚äº’æ–¥é”ï¼ˆmutexï¼‰ã€‚ 123456789101112131415boolen TS(boolen *lock){ boolean old; old = *lock; *lock =TURE; return old;}do{ â€¦ while TS( &amp;lock); critical section; lock :=FALSE; remainder section;}while(TRUE); åˆ©ç”¨ Swap æŒ‡ä»¤å®ç°è¿›ç¨‹äº’æ–¥è¯¥æŒ‡ä»¤ç§°ä¸ºå¯¹æ¢æŒ‡ä»¤ï¼Œåœ¨ Intel 80x86ä¸­åˆç§°ä¸º XCHGæŒ‡ä»¤ï¼Œç”¨äºäº¤æ¢ä¸¤ä¸ªå­—çš„å†…å®¹ã€‚ ç®¡ç¨‹ Moniterè™½ç„¶ä¿¡å·é‡æœºåˆ¶æ˜¯ä¸€ç§æ—¢æ–¹ä¾¿ã€åˆæœ‰æ•ˆçš„è¿›ç¨‹åŒæ­¥æœºåˆ¶ï¼Œä½†æ¯ä¸ªè¦è®¿é—®ä¸´ç•Œèµ„æºçš„è¿›ç¨‹éƒ½å¿…é¡»è‡ªå¤‡åŒæ­¥æ“ä½œ waitï¼ˆSï¼‰å’Œ signalï¼ˆsï¼‰ã€‚è¿™å°±ä½¿å¤§é‡çš„åŒæ­¥æ“ä½œåˆ†æ•£åœ¨å„ä¸ªè¿›ç¨‹ä¸­ã€‚è¿™ä¸ä»…ç»™ç³»ç»Ÿçš„ç®¡ç†å¸¦æ¥äº†éº»çƒ¦ï¼Œè€Œä¸”è¿˜ä¼šå› åŒæ­¥æ“ä½œçš„ä½¿ç”¨ä¸å½“è€Œå¯¼è‡´ç³»ç»Ÿæ­»é”ã€‚è¿™æ ·ï¼Œåœ¨è§£å†³ä¸Šè¿°é—®é¢˜çš„è¿‡ç¨‹ä¸­ï¼Œä¾¿äº§ç”Ÿäº†ä¸€ç§æ–°çš„è¿›ç¨‹åŒæ­¥å·¥å…·â€”â€”ç®¡ç¨‹ ã€‚ Monitors are a higher-level synchronization construct that simplifies process synchronization by providing a high-level abstraction for data access and synchronization. Monitors are implemented as programming language constructs, typically in object-oriented languages, and provide mutual exclusion, condition variables, and data encapsulation in a single construct.Moniter-Ref ç»å…¸åŒæ­¥é—®é¢˜ Classic Synchronization Problems ç”Ÿäº§è€…/æ¶ˆè´¹è€…é—®é¢˜ Producer-Consumer Problem å“²å­¦å®¶è¿›é¤é—®é¢˜ Dining Philosophers Problem è¯»è€…/å†™è€…é—®é¢˜ Readers-Writers Problem Producer-Consumer Problemç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…æ˜¯ä¸€ä¸ªå¹¿ä¹‰çš„æ¦‚å¿µï¼Œå¯ä»¥ä»£è¡¨ä¸€ç±»å…·æœ‰ç›¸åŒå±æ€§çš„è¿›ç¨‹ã€‚ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…è¿›ç¨‹å…±äº«ä¸€ä¸ªå¤§å°å›ºå®šçš„ç¼“å†²æ± ;ä¸€ä¸ªæˆ–å¤šä¸ªç”Ÿäº§è€…ç”Ÿäº§æ•°æ®ï¼Œå¹¶å°†ç”Ÿäº§çš„æ•°æ®å­˜å…¥ç¼“å†²æ± ;ä¸€ä¸ªæˆ–å¤šä¸ªæ¶ˆè´¹è€…ä»ç¼“å†²æ± ä¸­å–æ•°æ®ã€‚ å¿…é¡»ä½¿ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…äº’æ–¥è¿›å…¥ç¼“å†²åŒºã€‚å³ï¼ŒæŸæ—¶åˆ»åªå…è®¸ä¸€ä¸ªå®ä½“ï¼ˆç”Ÿäº§è€…æˆ–æ¶ˆè´¹è€…ï¼‰è®¿é—®ç¼“å†²åŒºï¼Œç”Ÿäº§è€…äº’æ–¥æ¶ˆè´¹è€…å’Œå…¶å®ƒä»»ä½•ç”Ÿäº§è€…ã€‚ç”Ÿäº§è€…ä¸èƒ½å‘æ»¡ç¼“å†²æ± å†™æ•°æ®ï¼Œæ¶ˆè´¹è€…ä¹Ÿä¸èƒ½åœ¨ç©ºç¼“å†²æ± ä¸­å–æ•°æ®ï¼Œå³ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…å¿…é¡»åŒæ­¥ã€‚ æ¶‰åŠä¸¤ç±»è¿›ç¨‹ï¼šç”Ÿäº§è€…è¿›ç¨‹å’Œæ¶ˆè´¹è€…è¿›ç¨‹éœ€è¦ä¿è¯ä»¥ä¸‹åŒæ­¥å…³ç³»ï¼š å¤šä¸ªè¿›ç¨‹äº’æ–¥åœ°è®¿é—®å…¬å…±ç¼“å†²æ± ï¼›äº’æ–¥ä¿¡å·é‡ mutex ä¸èƒ½å‘æ»¡çš„ç¼“å†²æ± ä¸­æ·»åŠ äº§å“ï¼›å¯ç”¨çš„ç©ºèµ„æºä¿¡å·é‡ empty ä¸èƒ½ä»ç©ºçš„ç¼“å†²æ± ä¸­æå–äº§å“ã€‚å¯ç”¨çš„æ»¡èµ„æºä¿¡å·é‡ fullfull + empty=N æ¯ä¸ªè¿›ç¨‹ä¸­å„ä¸ª wait æ“ä½œçš„æ¬¡åºæ˜¯é‡è¦çš„ï¼šå…ˆæ£€æŸ¥èµ„æºæ•°ç›®ï¼Œå†æ£€æŸ¥æ˜¯å¦äº’æ–¥.å¦åˆ™å¯èƒ½æ­»é”å¦‚ï¼šproducer å…ˆç”³è¯·äº’æ–¥ï¼Œè¿›å…¥åï¼Œç”³è¯·ç©ºèµ„æºï¼Œå‘ç°ç©ºèµ„æºä¸å¯ç”¨ï¼Œå¿…é¡»ç­‰å¾… comsumer å…ˆç”³è¯·æ»¡èµ„æºï¼Œä½¿ç”¨åé‡Šæ”¾å‡ºæ¥ã€‚ä½†æ­¤æ—¶ï¼Œç”±äº producer å ç”¨äº†äº’æ–¥èµ„æºï¼Œå› æ­¤ consumer æ— æ³•è¿›å…¥ã€‚æ•…è€Œé™·å…¥æ­»é”çŠ¶æ€ Dining Philosophers Problemäº”ä¸ªå“²å­¦å®¶äº”åªç­·å­ï¼Œå“²å­¦å®¶å¾ªç¯åšç€æ€è€ƒå’Œåƒé¥­çš„åŠ¨ä½œï¼Œåƒé¥­ç¨‹åºæ˜¯ï¼šå…ˆå–å·¦è¾¹ç­·å­ï¼Œå†å–å³è¾¹ç­·å­ï¼Œå†åƒé¥­ï¼Œå†æ”¾ç­·å­ã€‚ è‡³å¤šåªå…è®¸å››ä¸ªå“²å­¦å®¶åŒæ—¶è¿›é¤,ä»¥ä¿è¯è‡³å°‘æœ‰ä¸€ä¸ªå“²å­¦å®¶èƒ½å¤Ÿè¿›é¤,æœ€ç»ˆæ€»ä¼šé‡Šæ”¾å‡ºä»–æ‰€ä½¿ç”¨è¿‡çš„ä¸¤æ”¯ç­·å­,ä»è€Œå¯ä½¿æ›´å¤šçš„å“²å­¦å®¶è¿›é¤ã€‚ åœ¨å“²å­¦å®¶è¿›é¤é—®é¢˜ä¸­ï¼Œè¦æ±‚æ¯ä¸ªå“²å­¦å®¶å…ˆè·å¾—ä¸¤ä¸ªä¸´ç•Œèµ„æº(ç­·å­)åæ–¹èƒ½è¿›é¤ï¼Œè¿™åœ¨æœ¬è´¨ä¸Šå°±æ˜¯å‰é¢æ‰€ä»‹ç»çš„ AND åŒæ­¥é—®é¢˜ï¼Œæ•…ç”¨ AND ä¿¡å·é‡æœºåˆ¶å¯è·å¾—æœ€ç®€æ´çš„è§£æ³•,ä¸”å¯é¿å…æ­»é”ã€‚ è§„å®šå¥‡æ•°å·çš„å“²å­¦å®¶å…ˆæ‹¿èµ·ä»–å·¦è¾¹çš„ç­·å­,ç„¶åå†å»æ‹¿ä»–å³è¾¹çš„ç­·å­;è€Œå¶æ•°å·çš„å“²å­¦å®¶åˆ™ç›¸å.æŒ‰æ­¤è§„å®š,å°†æ˜¯ 2,3 å·å“²å­¦å®¶ç«äº‰ 3 å·ç­·å­,4,5 å·å“²å­¦å®¶ç«äº‰ 5 å·ç­·å­.å³ä¸‰ä¸ªå“²å­¦å®¶éƒ½ ç«äº‰å¥‡æ•°å·ç­·å­,è·å¾—å,å†å»ç«äº‰å¶æ•°å·ç­·å­,æœ€åæ€»ä¼š 1 ä¸ªå“²å­¦å®¶èƒ½è·å¾—ä¸¤æ”¯ç­·å­è€Œè¿›é¤. Readers-Writers Problemè¯¥é—®é¢˜ä¸ºå¤šä¸ªè¿›ç¨‹è®¿é—®ä¸€ä¸ªå…±äº«æ•°æ®åŒºå»ºç«‹äº†ä¸€ä¸ªé€šç”¨æ¨¡å‹ï¼Œå¦‚æ•°æ®åº“ã€æ–‡ä»¶ã€å†…å­˜åŒºåŠä¸€ç»„å¯„å­˜å™¨ç­‰æ•°æ®ã€‚è‹¥å¹²è¯»è¿›ç¨‹åªèƒ½è¯»æ•°æ®ï¼Œè‹¥å¹²å†™è¿›ç¨‹åªèƒ½å†™æ•°æ®ã€‚ ä¾‹å¦‚ï¼Œä¸€ä¸ªè”ç½‘å”®ç¥¨ç³»ç»Ÿï¼Œæ•°æ®çš„æŸ¥è¯¢å’Œæ›´æ–°éå¸¸é¢‘ç¹ï¼Œä¸å¯é¿å…ä¼šå‡ºç°å¤šä¸ªè¿›ç¨‹è¯•å›¾æŸ¥è¯¢æˆ–ä¿®æ”¹ï¼ˆè¯»/å†™ï¼‰å…¶ä¸­æŸä¸€æ¡æ•°æ®çš„æƒ…å½¢ã€‚å¤šä¸ªè¿›ç¨‹åŒæ—¶è¯»ä¸€æ¡è®°å½•æ˜¯å¯ä»¥çš„ã€‚å¦‚æœä¸€ä¸ªè¿›ç¨‹æ­£åœ¨æ›´æ–°æ•°æ®åº“ä¸­çš„æŸæ¡è®°å½•ï¼Œåˆ™æ‰€æœ‰å…¶ä»–è¿›ç¨‹éƒ½ä¸èƒ½è®¿é—®ï¼ˆè¯»æˆ–å†™ï¼‰è¯¥è®°å½•ï¼Œå¦åˆ™å¯èƒ½ä¼šå°†åŒä¸€ä¸ªåº§ä½é”€å”®å¤šæ¬¡ã€‚ è¯»è€…/å†™è€…è¿›ç¨‹æ»¡è¶³çš„æ¡ä»¶ å…è®¸å¤šä¸ªè¯»è€…è¿›ç¨‹å¯ä»¥åŒæ—¶è¯»æ•°æ®ï¼› ä¸å…è®¸å¤šä¸ªå†™è€…è¿›ç¨‹åŒæ—¶å†™æ•°æ®ï¼Œå³åªèƒ½äº’æ–¥å†™æ•°æ®ï¼› è‹¥æœ‰å†™è€…è¿›ç¨‹æ­£åœ¨å†™æ•°æ®ï¼Œåˆ™ä¸å…è®¸è¯»è€…è¿›ç¨‹è¯»æ•°æ®ã€‚ Solåˆ©ç”¨è®°å½•å‹ä¿¡å·é‡è§£å†³è¯»è€…-å†™è€…é—®é¢˜åˆ©ç”¨ä¿¡å·é‡é›†è§£å†³è¯»è€…-å†™è€…é—®é¢˜ Exercies EX1ä¸‰ä¸ªè¿›ç¨‹ P1ï¼ŒP2ï¼ŒP3 åä½œè§£å†³æ–‡ä»¶æ‰“å°é—®é¢˜ï¼ŒP1 å°†æ–‡ä»¶è®°å½•ä»ç£ç›˜è¯»å…¥å†…å­˜çš„ç¼“å†²åŒº 1ï¼Œæ¯æ‰§è¡Œä¸€æ¬¡è¯»ä¸€ä¸ªè®°å½•ï¼›P2 å°†ç¼“å†²åŒº 1 çš„å†…å®¹å–å‡ºæ”¾åˆ°ç¼“å†²åŒº 2 ä¸­ï¼›P3 å°†ç¼“å†²åŒº 2 çš„å†…å®¹æ‰“å°å‡ºæ¥ï¼Œæ¯æ‰§è¡Œä¸€æ¬¡æ‰“å°ä¸€ä¸ªè®°å½•ã€‚ç¼“å†²åŒºçš„å¤§å°å’Œä¸€ä¸ªè®°å½•å¤§å°ä¸€æ ·ã€‚ç”¨ Pã€V æ“ä½œæ¥ä¿è¯æ–‡ä»¶çš„æ­£ç¡®æ‰“å°ã€‚å¼•ç”³æœ‰ä¸‰ä¸ªè¿›ç¨‹ A1ã€A2ã€A3ï¼Œå®ƒä»¬å…±äº«ä¸¤ä¸ªç¼“å†²åŒº B1 å’Œ B2ã€‚ç¼“å†²åŒº B1 ä¸­å¯ä»¥å­˜æ”¾ n ä»¶äº§å“ï¼Œç¼“å†²åŒº B2 ä¸­å¯ä»¥å­˜æ”¾ m ä»¶äº§å“ã€‚è¿›ç¨‹ A1 æ¯æ¬¡ç”Ÿäº§ä¸€ä»¶äº§å“ï¼Œå¹¶æŠŠäº§å“å­˜å…¥ç¼“å†²åŒº B1ã€‚è¿›ç¨‹ A2 æ¯æ¬¡ç”Ÿäº§ä¸€ä»¶äº§å“ï¼Œå¹¶æŠŠäº§å“å­˜å…¥ç¼“å†²åŒº B2ã€‚è¿›ç¨‹ A3 æ¯æ¬¡ä»ç¼“å†²åŒº B2 ä¸­å–ä¸€ä»¶äº§å“åŒºæ¶ˆè´¹ã€‚ä¸ºäº†é˜²æ­¢æŠŠäº§å“å­˜å…¥å·²æ»¡çš„ç¼“å†²ï¼Œæˆ–è€…ä»ç©ºç¼“å†²ä¸­å–äº§å“ï¼Œæˆ–é‡å¤å–ä¸€äº§å“ï¼Œç”¨ PV æ“ä½œå®ç°å®ƒä»¬çš„ç›¸äº’åˆ¶çº¦å…³ç³»ã€‚ EX2æŸå·¥å‚æœ‰ä¸€ä¸ªå¯ä»¥å­˜æ”¾è®¾å¤‡çš„ä»“åº“ï¼Œæ€»å…±å¯ä»¥å­˜æ”¾ 8 å°è®¾å¤‡ã€‚ç”Ÿäº§éƒ¨é—¨ç”Ÿäº§çš„æ¯ä¸€å°è®¾å¤‡éƒ½å¿…é¡»å…¥åº“ï¼Œé”€å”®éƒ¨é—¨å¯ä»¥ä»ä»“åº“ä¸­æå‡ºè®¾å¤‡ä¾›åº”å®¢æˆ·ã€‚è®¾å¤‡å‡º/å…¥åº“éœ€è¦å€ŸåŠ©è¿è¾“å·¥å…·ï¼Œç°åªæœ‰ä¸€å¥—è¿è¾“å·¥å…·ï¼Œæ¯æ¬¡åªèƒ½è¿ä¸€å°è®¾å¤‡è¯·è®¾è®¡ç”Ÿäº§éƒ¨é—¨å’Œé”€å”®éƒ¨é—¨è¿›ç¨‹ã€‚ EX3æ¡Œä¸Šæ”¾ä¸€ä¸ªç›˜å­ï¼Œæ¯æ¬¡åªèƒ½æ”¾ä¸€ä¸ªæ°´æœï¼Œçˆ¸çˆ¸åƒç›˜å­é‡Œæ”¾è‹¹æœï¼Œå¦ˆå¦ˆå‘ç›˜å­é‡Œæ”¾æ©˜å­ï¼Œå¥³å„¿ä¸“åƒè‹¹æœ,å„¿å­ä¸“åƒæ©˜å­ã€‚ç›˜å­ç©ºçš„æ—¶å€™çˆ¸çˆ¸æˆ–å¦ˆå¦ˆæ‰èƒ½å‘ç›˜å­é‡Œé¢æ”¾ä¸€ä¸ªæ°´æœï¼Œä»…å½“ç›˜å­é‡Œæœ‰è‡ªå·±éœ€è¦çš„æ°´æœæ—¶æ‰å¯å–ä¸€ä¸ªæ°´æœã€‚æŠŠçˆ¸çˆ¸ã€å¦ˆå¦ˆã€å„¿å­ã€å¥³å„¿çœ‹åšå››ä¸ªè¿›ç¨‹ï¼Œç”¨ PV æ“ä½œè¿›è¡Œç®¡ç†ï¼Œä½¿è¿™å››ä¸ªè¿›ç¨‹èƒ½æ­£ç¡®åœ°å¹¶å‘æ‰§è¡Œã€‚å¼•ç”³å¦‚æœç›˜å­çš„å®¹é‡æ”¹ä¸º 2ï¼Œä¸”ä»»ä½•æ—¶åˆ»åªå…è®¸çˆ¸çˆ¸ã€å¦ˆå¦ˆã€å¥³å„¿ã€å„¿å­ä¸­çš„ä¸€ä¸ªè¿›ç¨‹å»è®¿é—®ç›˜å­ï¼ˆæ”¾æˆ–è€…å–ï¼‰ã€‚ RefSemaphore-wikipediahttps://www.cnblogs.com/youxin/p/3586577.htmlMoniter","link":"/UESTC/OS/Ch2-2ProcessSync/"},{"title":"Thread","text":"çº¿ç¨‹æ¦‚è¿°Introä¸ºä½¿ç¨‹åºèƒ½å¹¶å‘æ‰§è¡Œï¼Œç³»ç»Ÿå¿…é¡»è¿›è¡Œä»¥ä¸‹çš„ä¸€ç³»åˆ—æ“ä½œ:åˆ›å»ºè¿›ç¨‹ æ’¤æ¶ˆè¿›ç¨‹ è¿›ç¨‹åˆ‡æ¢ç”±äºè¿›ç¨‹æ˜¯ä¸€ä¸ªèµ„æºçš„æ‹¥æœ‰è€…ï¼Œå› æ­¤åœ¨åˆ›å»ºã€æ’¤é”€å’Œåˆ‡æ¢ä¸­ï¼Œç³»ç»Ÿå¿…é¡»ä¸ºæ­¤ä»˜å‡ºè¾ƒå¤§çš„æ—¶é—´å’Œç©ºé—´çš„å¼€é”€ã€‚å¦‚ä½•ä½¿å¤šä¸ªç¨‹åºæ›´å¥½çš„å¹¶å‘æ‰§è¡Œï¼ŒåŒæ—¶åˆèƒ½å‡å°‘ç³»ç»Ÿå¼€é”€ï¼Ÿ è¿›ç¨‹çš„æ¦‚å¿µä½“ç°å‡ºä¸¤ä¸ªç‰¹ç‚¹ï¼š èµ„æºæ‰€æœ‰æƒï¼šä¸€ä¸ªè¿›ç¨‹åŒ…æ‹¬ä¸€ä¸ªä¿å­˜è¿›ç¨‹æ˜ åƒçš„è™šåœ°å€ç©ºé—´ï¼Œå¹¶ä¸”éšæ—¶åˆ†é…å¯¹èµ„æºçš„æ§åˆ¶æˆ–æ‰€æœ‰æƒï¼ŒåŒ…æ‹¬å†…å­˜ã€I/O é€šé“ã€I/O è®¾å¤‡ã€æ–‡ä»¶ç­‰ã€‚ è°ƒåº¦ï¼æ‰§è¡Œï¼šè¿›ç¨‹æ˜¯è¢«æ“ä½œç³»ç»Ÿè°ƒåº¦çš„å®ä½“ã€‚ è°ƒåº¦å’Œåˆ†æ´¾çš„éƒ¨åˆ†é€šå¸¸ç§°ä¸ºçº¿ç¨‹æˆ–è½»å‹è¿›ç¨‹ï¼ˆlightweight processï¼‰ï¼Œè€Œèµ„æºæ‰€æœ‰æƒçš„éƒ¨åˆ†é€šå¸¸ç§°ä¸ºè¿›ç¨‹ çº¿ç¨‹å…·æœ‰è®¸å¤šä¼ ç»Ÿè¿›ç¨‹æ‰€å…·æœ‰çš„ç‰¹å¾ï¼Œæ‰€ä»¥åˆç§°ä¸ºè½»å‹è¿›ç¨‹(Light-Weight Process) ï¼Œç›¸åº”åœ°æŠŠä¼ ç»Ÿè¿›ç¨‹ç§°ä¸ºé‡å‹è¿›ç¨‹(Heavy-Weight Process)ï¼Œä¼ ç»Ÿè¿›ç¨‹ç›¸å½“äºåªæœ‰ä¸€ä¸ªçº¿ç¨‹çš„ä»»åŠ¡ã€‚åœ¨å¼•å…¥äº†çº¿ç¨‹çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œé€šå¸¸ä¸€ä¸ªè¿›ç¨‹éƒ½æ‹¥æœ‰è‹¥å¹²ä¸ªçº¿ç¨‹ï¼Œè‡³å°‘ä¹Ÿæœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚ History 60 å¹´ä»£ï¼šæå‡ºè¿›ç¨‹(Process)æ¦‚å¿µï¼Œåœ¨ OS ä¸­ä¸€ç›´éƒ½æ˜¯ä»¥è¿›ç¨‹ä½œä¸ºèƒ½æ‹¥æœ‰èµ„æºå’Œç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½çš„ã€‚ 80 å¹´ä»£ä¸­æœŸï¼šæå‡ºçº¿ç¨‹ï¼ˆThreadï¼‰æ¦‚å¿µï¼Œçº¿ç¨‹æ˜¯æ¯”è¿›ç¨‹æ›´å°çš„èƒ½ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½ï¼Œç›®çš„æ˜¯æé«˜ç³»ç»Ÿå†…ç¨‹åºå¹¶å‘æ‰§è¡Œçš„ç¨‹åº¦ï¼Œè¿›ä¸€æ­¥æé«˜ç³»ç»Ÿçš„ååé‡ã€‚ 90 å¹´ä»£ï¼šå¤šå¤„ç†æœºç³»ç»Ÿå¾—åˆ°è¿…é€Ÿå‘å±•ï¼Œçº¿ç¨‹èƒ½æ¯”è¿›ç¨‹æ›´å¥½åœ°æé«˜ç¨‹åºçš„å¹¶è¡Œæ‰§è¡Œç¨‹åº¦ï¼Œå……åˆ†å‘æŒ¥å¤šå¤„ç†æœºçš„ä¼˜è¶Šæ€§ã€‚ çº¿ç¨‹çš„å…±äº«é—®é¢˜è¿›ç¨‹å†…çš„æ‰€æœ‰çº¿ç¨‹å…±äº«è¿›ç¨‹çš„å¾ˆå¤šèµ„æº,è€Œè¿™ç§å…±äº«åˆå¸¦æ¥äº†åŒæ­¥é—®é¢˜ 1234567çº¿ç¨‹é—´å…±äº« çº¿ç¨‹ç§æœ‰è¿›ç¨‹æŒ‡ä»¤ çº¿ç¨‹IDå…¨å±€å˜é‡ å¯„å­˜å™¨é›†åˆï¼ˆåŒ…æ‹¬PCå’Œæ ˆæŒ‡é’ˆï¼‰æ‰“å¼€çš„æ–‡ä»¶ æ ˆï¼ˆç”¨äºå­˜æ”¾å±€éƒ¨å˜é‡ï¼‰ä¿¡å·å¤„ç†ç¨‹åº ä¿¡å·æ©ç å½“å‰å·¥ä½œç›®å½• ä¼˜å…ˆçº§ç”¨æˆ·ID çº¿ç¨‹çš„äº’æ–¥é—®é¢˜å¯¹å…¨å±€å˜é‡è¿›è¡Œè®¿é—®çš„åŸºæœ¬æ­¥éª¤ å°†å†…å­˜å•å…ƒä¸­çš„æ•°æ®è¯»å…¥å¯„å­˜å™¨ å¯¹å¯„å­˜å™¨ä¸­çš„å€¼è¿›è¡Œè¿ç®— å°†å¯„å­˜å™¨ä¸­çš„å€¼å†™å›å†…å­˜å•å…ƒ çº¿ç¨‹çš„å±æ€§ è½»å‹å®ä½“ çº¿ç¨‹è‡ªå·±åŸºæœ¬ä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æºï¼Œåªæ‹¥æœ‰å°‘é‡å¿…ä¸å¯å°‘çš„èµ„æºï¼šTCBï¼Œç¨‹åºè®¡æ•°å™¨ã€ä¸€ç»„å¯„å­˜å™¨ã€æ ˆã€‚ ç‹¬ç«‹è°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ åœ¨å¤šçº¿ç¨‹ OS ä¸­,çº¿ç¨‹æ˜¯ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½,å› è€Œä¹Ÿæ˜¯ç‹¬ç«‹è°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ã€‚ å¯å¹¶å‘æ‰§è¡Œ åŒä¸€è¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹ä¹‹é—´å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œä¸€ä¸ªçº¿ç¨‹å¯ä»¥åˆ›å»ºå’Œæ’¤æ¶ˆå¦ä¸€ä¸ªçº¿ç¨‹ã€‚ å…±äº«è¿›ç¨‹èµ„æº å®ƒå¯ä¸åŒå±ä¸€ä¸ªè¿›ç¨‹çš„å…¶å®ƒçº¿ç¨‹å…±äº«è¿›ç¨‹æ‰€æ‹¥æœ‰çš„å…¨éƒ¨èµ„æºã€‚ çº¿ç¨‹ä¸è¿›ç¨‹çš„æ¯”è¾ƒRef[Ch2-1ProcessContorl#è¿›ç¨‹çš„æè¿° Process][ProcessvsThread#Comparison] çº¿ç¨‹çš„æ§åˆ¶Create/Terminate Threadçº¿ç¨‹çš„åˆ›å»ºï¼š åœ¨å¤šçº¿ç¨‹ OS ç¯å¢ƒä¸‹ï¼Œåº”ç”¨ç¨‹åºåœ¨å¯åŠ¨æ—¶ï¼Œé€šå¸¸ä»…æœ‰ä¸€ä¸ªâ€œåˆå§‹åŒ–çº¿ç¨‹â€çº¿ç¨‹åœ¨æ‰§è¡Œã€‚ åœ¨åˆ›å»ºæ–°çº¿ç¨‹æ—¶ï¼Œéœ€è¦åˆ©ç”¨ä¸€ä¸ªçº¿ç¨‹åˆ›å»ºå‡½æ•°(æˆ–ç³»ç»Ÿè°ƒç”¨)ï¼Œå¹¶æä¾›ç›¸åº”çš„å‚æ•°ã€‚ å¦‚æŒ‡å‘çº¿ç¨‹ä¸»ç¨‹åºçš„å…¥å£æŒ‡é’ˆã€å †æ ˆçš„å¤§å°ï¼Œä»¥åŠç”¨äºè°ƒåº¦çš„ä¼˜å…ˆçº§ç­‰ã€‚ åœ¨çº¿ç¨‹åˆ›å»ºå‡½æ•°æ‰§è¡Œå®Œåï¼Œå°†è¿”å›ä¸€ä¸ªçº¿ç¨‹æ ‡è¯†ç¬¦ä¾›ä»¥åä½¿ç”¨ã€‚ çº¿ç¨‹çš„ç»ˆæ­¢ï¼š çº¿ç¨‹å®Œæˆäº†è‡ªå·±çš„å·¥ä½œåè‡ªæ„¿é€€å‡ºï¼› æˆ–çº¿ç¨‹åœ¨è¿è¡Œä¸­å‡ºç°é”™è¯¯æˆ–ç”±äºæŸç§åŸå› è€Œè¢«å…¶å®ƒçº¿ç¨‹å¼ºè¡Œç»ˆæ­¢ã€‚ çº¿ç¨‹çš„ä¸‰ç§ç»ˆæ­¢æ–¹å¼ çº¿ç¨‹ä»å¯åŠ¨ä¾‹ç¨‹å‡½æ•°ä¸­è¿”å›ï¼Œå‡½æ•°è¿”å›å€¼ä½œä¸ºçº¿ç¨‹çš„é€€å‡ºç  çº¿ç¨‹è¢«åŒä¸€è¿›ç¨‹ä¸­çš„å…¶ä»–çº¿ç¨‹å–æ¶ˆ çº¿ç¨‹åœ¨ä»»æ„å‡½æ•°ä¸­è°ƒç”¨ pthread_exit å‡½æ•°ç»ˆæ­¢æ‰§è¡Œ çº¿ç¨‹é—´çš„åŒæ­¥ä¸é€šä¿¡äº’æ–¥é” Mutexäº’æ–¥é”æ˜¯ä¸€ç§æ¯”è¾ƒç®€å•çš„ã€ç”¨äºå®ç°è¿›ç¨‹é—´å¯¹èµ„æºäº’æ–¥è®¿é—®çš„æœºåˆ¶ã€‚ç”±äºæ“ä½œäº’æ–¥é”çš„æ—¶é—´å’Œç©ºé—´å¼€é”€éƒ½è¾ƒä½ï¼Œå› è€Œè¾ƒé€‚åˆäºé«˜é¢‘åº¦ä½¿ç”¨çš„å…³é”®å…±äº«æ•°æ®å’Œç¨‹åºæ®µã€‚äº’æ–¥é”å¯ä»¥æœ‰ä¸¤ç§çŠ¶æ€ï¼Œ å³å¼€é”(unlock)å’Œå…³é”(lock)çŠ¶æ€ã€‚ ä¸Šé”çš„ä¸¤ç§æ–¹å¼ é˜»å¡æ–¹å¼ 12345//ç”¨æ¥é”ä½äº’æ–¥ä½“å˜é‡ã€‚å¦‚æœå‚æ•° mutex æ‰€æŒ‡çš„äº’æ–¥ä½“å·²ç»è¢«é”ä½äº†ï¼Œé‚£ä¹ˆå‘å‡ºè°ƒç”¨çš„çº¿ç¨‹å°†è¢«é˜»å¡ç›´åˆ°å…¶ä»–çº¿ç¨‹å¯¹ mutex è§£é”ã€‚lock(mutex)è®¿é—®unlock(mutex) éé˜»å¡æ–¹å¼ 123ifï¼ˆtrylockï¼‰ thenelse//å¦‚æœäº’æ–¥ä½“å·²ç»è¢«ä¸Šé”ï¼Œè¯¥è°ƒç”¨ä¸ä¼šé˜»å¡ç­‰å¾…ï¼Œè€Œä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ä»£ç ã€‚ æ¡ä»¶å˜é‡ Condition Variableåœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œæ¡ä»¶å˜é‡æ˜¯ä¸€ç§åŒæ­¥æœºåˆ¶ï¼Œç”¨äºåœ¨æŸä¸ªç‰¹å®šæ¡ä»¶å˜ä¸ºçœŸæ—¶å”¤é†’ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ã€‚æ¡ä»¶å˜é‡é€šå¸¸ä¸äº’æ–¥é”ï¼ˆmutexï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œä»¥ç¡®ä¿çº¿ç¨‹åœ¨æ£€æŸ¥æ¡ä»¶å’Œå¯¹æ¡ä»¶è¿›è¡Œç­‰å¾…æ—¶ä¸ä¼šå‘ç”Ÿç«äº‰æ¡ä»¶ã€‚ ä»¥ä¸‹æ˜¯æ¡ä»¶å˜é‡åœ¨æ§åˆ¶çº¿ç¨‹åŒæ­¥ä¸­çš„ä¸€èˆ¬ç”¨æ³•ï¼š ç­‰å¾…æ¡ä»¶ï¼šå½“çº¿ç¨‹éœ€è¦ç­‰å¾…æŸä¸ªæ¡ä»¶å˜ä¸ºçœŸæ—¶ï¼Œå®ƒä¼šé¦–å…ˆè·å–ä¸æ¡ä»¶å˜é‡ç›¸å…³è”çš„äº’æ–¥é”ã€‚ç„¶åï¼Œå®ƒä¼šæ£€æŸ¥æ¡ä»¶æ˜¯å¦å·²ç»æ»¡è¶³ã€‚å¦‚æœæ¡ä»¶æœªæ»¡è¶³ï¼Œçº¿ç¨‹ä¼šè°ƒç”¨æ¡ä»¶å˜é‡çš„ç­‰å¾…æ–¹æ³•ï¼ˆä¾‹å¦‚åœ¨ Java ä¸­çš„ Condition.await()ï¼‰ã€‚è¿™å°†é‡Šæ”¾äº’æ–¥é”ï¼Œå¹¶ä½¿çº¿ç¨‹è¿›å…¥ç¡çœ çŠ¶æ€ï¼Œç­‰å¾…æ¡ä»¶å˜ä¸ºçœŸã€‚ æ”¹å˜æ¡ä»¶ï¼šå½“çº¿ç¨‹æ”¹å˜å¯èƒ½ä¼šå½±å“æ¡ä»¶çš„çŠ¶æ€çš„æ•°æ®æ—¶ï¼Œå®ƒä¼šé¦–å…ˆè·å–äº’æ–¥é”ï¼Œç„¶åä¿®æ”¹æ•°æ®ã€‚ä¿®æ”¹å®Œæˆåï¼Œå®ƒä¼šè°ƒç”¨æ¡ä»¶å˜é‡çš„å”¤é†’æ–¹æ³•ï¼ˆä¾‹å¦‚åœ¨ Java ä¸­çš„ Condition.signal()æˆ– Condition.signalAll()ï¼‰ï¼Œä»¥å”¤é†’æ­£åœ¨ç­‰å¾…è¯¥æ¡ä»¶çš„æ‰€æœ‰çº¿ç¨‹ã€‚ç„¶åï¼Œå®ƒä¼šé‡Šæ”¾äº’æ–¥é”ã€‚ å“åº”å”¤é†’ï¼šå½“çº¿ç¨‹è¢«å”¤é†’æ—¶ï¼ˆå³ï¼Œå®ƒä»ç­‰å¾…æ–¹æ³•è¿”å›æ—¶ï¼‰ï¼Œå®ƒä¼šé‡æ–°è·å–äº’æ–¥é”ï¼Œå¹¶å†æ¬¡æ£€æŸ¥æ¡ä»¶ã€‚è¿™æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œæ¡ä»¶å¯èƒ½åœ¨çº¿ç¨‹è¢«å”¤é†’å’Œçº¿ç¨‹å®é™…è¿è¡Œä¹‹é—´çš„æ—¶é—´å†…å‘ç”Ÿå˜åŒ–ã€‚ ä½¿ç”¨æ¡ä»¶å˜é‡å¯ä»¥ä½¿çº¿ç¨‹åœ¨ç­‰å¾…æŸä¸ªæ¡ä»¶æ—¶ä¸å¿…è¿›è¡Œå¿™ç­‰å¾…ï¼ˆå³ï¼Œä¸æ–­åœ°æ£€æŸ¥æ¡ä»¶æ˜¯å¦å·²ç»æ»¡è¶³ï¼‰ã€‚è¿™å¯ä»¥å¤§å¤§æé«˜ç³»ç»Ÿçš„æ•ˆç‡ï¼Œå› ä¸ºçº¿ç¨‹åœ¨ç­‰å¾…æ—¶ä¸ä¼šæ¶ˆè€— CPU èµ„æºã€‚ ä¿¡å·é‡æœºåˆ¶ ç§ç”¨ä¿¡å·é‡(private semaphore)ã€‚å½“æŸçº¿ç¨‹éœ€åˆ©ç”¨ä¿¡å·é‡æ¥å®ç°åŒä¸€è¿›ç¨‹ä¸­å„çº¿ç¨‹ä¹‹é—´çš„åŒæ­¥æ—¶ï¼Œå¯è°ƒç”¨åˆ›å»ºä¿¡å·é‡çš„å‘½ä»¤æ¥åˆ›å»ºä¸€ç§ç”¨ä¿¡å·é‡ï¼Œå…¶æ•°æ®ç»“æ„å­˜æ”¾åœ¨åº”ç”¨ç¨‹åºçš„åœ°å€ç©ºé—´ä¸­ã€‚ç§ç”¨ä¿¡å·é‡å±äºç‰¹å®šçš„è¿›ç¨‹æ‰€æœ‰ï¼ŒOS å¹¶ä¸çŸ¥é“ç§ç”¨ä¿¡å·é‡çš„å­˜åœ¨ï¼Œå› æ­¤ï¼Œä¸€æ—¦å‘ç”Ÿç§ç”¨ä¿¡å·é‡çš„å ç”¨è€…å¼‚å¸¸ç»“æŸæˆ–æ­£å¸¸ç»“æŸï¼Œä½†å¹¶æœªé‡Šæ”¾è¯¥ä¿¡å·é‡æ‰€å æœ‰ç©ºé—´çš„æƒ…å†µæ—¶ï¼Œç³»ç»Ÿå°†æ— æ³•ä½¿å®ƒæ¢å¤ä¸º 0(ç©º)ï¼Œä¹Ÿä¸èƒ½å°†å®ƒä¼ é€ç»™ä¸‹ä¸€ä¸ªè¯·æ±‚å®ƒçš„çº¿ç¨‹ã€‚ å…¬ç”¨ä¿¡å·é‡(public semaphore)ã€‚å…¬ç”¨ä¿¡å·é‡æ˜¯ä¸ºå®ç°ä¸åŒè¿›ç¨‹é—´æˆ–ä¸åŒè¿›ç¨‹ä¸­å„çº¿ç¨‹ä¹‹é—´çš„åŒæ­¥è€Œè®¾ç½®çš„ã€‚æœ‰ç€ä¸€ä¸ªå…¬å¼€çš„åå­—ä¾›æ‰€æœ‰çš„è¿›ç¨‹ä½¿ç”¨ï¼Œæ•…ç§°ä¸ºå…¬ç”¨ä¿¡å·é‡ã€‚å…¶æ•°æ®ç»“æ„æ˜¯å­˜æ”¾åœ¨å—ä¿æŠ¤çš„ç³»ç»Ÿå­˜å‚¨åŒºä¸­ï¼Œç”± OS ä¸ºå®ƒåˆ†é…ç©ºé—´å¹¶è¿›è¡Œç®¡ç†ï¼Œæ•…ä¹Ÿç§°ä¸ºç³»ç»Ÿä¿¡å·é‡å¦‚æœä¿¡å·é‡çš„å æœ‰è€…åœ¨ç»“æŸæ—¶æœªé‡Šæ”¾è¯¥å…¬ç”¨ä¿¡å·é‡ï¼Œåˆ™ OS ä¼šè‡ªåŠ¨å°†è¯¥ä¿¡å·é‡ç©ºé—´å›æ”¶ï¼Œå¹¶é€šçŸ¥ä¸‹ä¸€è¿›ç¨‹ã€‚å› æ­¤å…¬ç”¨ä¿¡å·é‡æ˜¯ä¸€ç§æ¯”è¾ƒå®‰å…¨çš„åŒæ­¥æœºåˆ¶ çº¿ç¨‹çš„å®ç°æ–¹å¼å„ç±»çº¿ç¨‹çš„å®ç°ç»†èŠ‚ï¼Œå…¶ä¸­ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯æ ¸å¿ƒ ç”¨æˆ·çº§çº¿ç¨‹ User-Level Threads ç”¨æˆ·çº§çº¿ç¨‹ä»…å­˜åœ¨äºç”¨æˆ·ç©ºé—´ä¸­ã€‚å¯¹äºè¿™ç§çº¿ç¨‹çš„åˆ›å»ºã€æ’¤æ¶ˆã€çº¿ç¨‹ä¹‹é—´çš„åŒæ­¥ä¸é€šä¿¡ç­‰åŠŸèƒ½ï¼Œéƒ½æ— é¡»å†…æ ¸æ¥å®ç°ã€‚ å¯¹äºç”¨æˆ·çº§çº¿ç¨‹çš„åˆ‡æ¢ï¼Œé€šå¸¸æ˜¯å‘ç”Ÿåœ¨ä¸€ä¸ªåº”ç”¨è¿›ç¨‹çš„è¯¸å¤šçº¿ç¨‹ä¹‹é—´ï¼Œè¿™æ—¶ï¼Œä¹ŸåŒæ ·æ— é¡»å†…æ ¸çš„æ”¯æŒã€‚ç”±äºåˆ‡æ¢çš„è§„åˆ™è¿œæ¯”è¿›ç¨‹è°ƒåº¦å’Œç®¡ç†çš„è§„åˆ™ç®€å•ï¼Œå› è€Œä½¿çº¿ç¨‹çš„åˆ‡æ¢é€Ÿåº¦ç‰¹åˆ«å¿«ã€‚å¯è§ï¼Œè¿™ç§çº¿ç¨‹æ˜¯ä¸å†…æ ¸æ— å…³çš„ ç”±åº”ç”¨ç¨‹åºå®Œæˆæ‰€æœ‰çº¿ç¨‹çš„ç®¡ç†çº¿ç¨‹åº“(ç”¨æˆ·ç©ºé—´)ï¼šé€šè¿‡ä¸€ç»„ç®¡ç†çº¿ç¨‹çš„å‡½æ•°åº“æ¥æä¾›ä¸€ä¸ªçº¿ç¨‹è¿è¡Œç®¡ç†ç³»ç»Ÿï¼ˆè¿è¡Œç³»ç»Ÿï¼‰ å†…æ ¸ä¸çŸ¥é“çº¿ç¨‹çš„å­˜åœ¨ çº¿ç¨‹åˆ‡æ¢ä¸éœ€è¦æ ¸å¿ƒæ€ç‰¹æƒ è°ƒåº¦ç®—æ³•å¯ä»¥æ˜¯è¿›ç¨‹ä¸“ç”¨çš„ Pros And Cons: çº¿ç¨‹åˆ‡æ¢ä¸è°ƒç”¨å†…æ ¸ è°ƒåº¦æ˜¯åº”ç”¨ç¨‹åºç‰¹å®šçš„ï¼šå¯ä»¥é€‰æ‹©æœ€å¥½çš„ç®—æ³• å¯è¿è¡Œåœ¨ä»»ä½•æ“ä½œç³»ç»Ÿä¸Šï¼ˆåªéœ€è¦çº¿ç¨‹åº“ï¼‰ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªä¸æ”¯æŒçº¿ç¨‹çš„ OS ä¸Šå®ç° å½“çº¿ç¨‹æ‰§è¡Œä¸€ä¸ªç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œè¯¥çº¿ç¨‹åŠå…¶æ‰€å±è¿›ç¨‹å†…çš„æ‰€æœ‰çº¿ç¨‹éƒ½ä¼šè¢«é˜»å¡ã€‚ å¤šçº¿ç¨‹åº”ç”¨ä¸èƒ½åˆ©ç”¨å¤šå¤„ç†æœºè¿›è¡Œå¤šé‡å¤„ç†ã€‚ ç”¨æˆ·çº§çº¿ç¨‹å®ç° ç”¨æˆ·çº§çº¿ç¨‹æ˜¯åœ¨ç”¨æˆ·ç©ºé—´å®ç°çš„ã€‚æ‰€æœ‰ç”¨æˆ·çº§çº¿ç¨‹éƒ½å…·æœ‰ç›¸åŒçš„æ•°æ®ç»“æ„ï¼Œå®ƒä»¬éƒ½è¿è¡Œåœ¨ä¸€ä¸ªä¸­é—´ç³»ç»Ÿä¸Šã€‚ å½“å‰æœ‰ä¸¤ç§æ–¹å¼å®ç°çš„ä¸­é—´ç³»ç»Ÿï¼š è¿è¡Œæ—¶ç³»ç»Ÿï¼ˆåˆç§°ä¸ºçº¿ç¨‹åº“ï¼‰ç”¨äºç®¡ç†å’Œæ§åˆ¶çº¿ç¨‹çš„å‡½æ•°çš„é›†åˆï¼ŒåŒ…æ‹¬åˆ›å»ºã€æ’¤æ¶ˆçº¿ç¨‹å‡½æ•°ã€çº¿ç¨‹åŒæ­¥å’Œé€šä¿¡å‡½æ•°ã€çº¿ç¨‹è°ƒåº¦å‡½æ•°ç­‰ã€‚ç”¨æˆ·çº§çº¿ç¨‹ä¸èƒ½ç›´æ¥åˆ©ç”¨ç³»ç»Ÿè°ƒç”¨ï¼Œå¿…é¡»é€šè¿‡è¿è¡Œæ—¶ç³»ç»Ÿé—´æ¥åˆ©ç”¨ç³»ç»Ÿè°ƒç”¨ã€‚ å†…æ ¸æ§åˆ¶çº¿ç¨‹è¿™ç§çº¿ç¨‹åˆç§°ä¸ºè½»å‹è¿›ç¨‹ LWPï¼ˆLight Weight Processï¼‰æ¯ä¸ªè¿›ç¨‹éƒ½å¯æ‹¥æœ‰å¤šä¸ª LWPï¼Œæ¯ä¸ª LWP éƒ½æœ‰è‡ªå·±çš„ TCBï¼Œå…¶ä¸­åŒ…æ‹¬çº¿ç¨‹æ ‡è¯†ç¬¦ã€ä¼˜å…ˆçº§ã€çŠ¶æ€ã€æ ˆå’Œå±€éƒ¨å­˜å‚¨åŒºç­‰LWP å¯é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥è·å¾—å†…æ ¸æä¾›çš„æœåŠ¡ï¼Œå½“ä¸€ä¸ªç”¨æˆ·çº§çº¿ç¨‹è¿è¡Œæ—¶ï¼Œåªè¦å°†å®ƒè¿æ¥åˆ°ä¸€ä¸ª LWP ä¸Šï¼Œå®ƒä¾¿å…·æœ‰äº†å†…æ ¸æ”¯æŒçº¿ç¨‹çš„æ‰€æœ‰å±æ€§ å†…æ ¸æ”¯æŒçº¿ç¨‹ Kernel Supported Threads å†…æ ¸æ”¯æŒçº¿ç¨‹ï¼Œæ˜¯åœ¨å†…æ ¸çš„æ”¯æŒä¸‹è¿è¡Œçš„ï¼Œå³æ— è®ºæ˜¯ç”¨æˆ·è¿›ç¨‹ä¸­çš„çº¿ç¨‹ï¼Œè¿˜æ˜¯ç³»ç»Ÿè¿›ç¨‹ä¸­çš„çº¿ç¨‹ï¼Œä»–ä»¬çš„åˆ›å»ºã€æ’¤æ¶ˆå’Œåˆ‡æ¢ç­‰ï¼Œæ˜¯ä¾é å†…æ ¸å®ç°çš„ã€‚ åœ¨å†…æ ¸ç©ºé—´ä¸­ä¸ºæ¯ä¸€ä¸ªå†…æ ¸æ”¯æŒçº¿ç¨‹è®¾ç½®äº†ä¸€ä¸ªçº¿ç¨‹æ§åˆ¶å— TCBï¼Œ å†…æ ¸æ˜¯æ ¹æ®è¯¥æ§åˆ¶å—è€Œæ„ŸçŸ¥æŸçº¿ç¨‹çš„å­˜åœ¨çš„ï¼Œå¹¶å¯¹å…¶åŠ ä»¥æ§åˆ¶ã€‚ Pros and Cons åœ¨å¤šå¤„ç†å™¨ç³»ç»Ÿä¸­ï¼Œå†…æ ¸èƒ½å¤ŸåŒæ—¶è°ƒåº¦åŒä¸€è¿›ç¨‹ä¸­å¤šä¸ªçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œï¼› å¦‚æœè¿›ç¨‹ä¸­çš„ä¸€ä¸ªçº¿ç¨‹è¢«é˜»å¡äº†ï¼Œå†…æ ¸å¯ä»¥è°ƒåº¦è¯¥è¿›ç¨‹ä¸­çš„å…¶å®ƒçº¿ç¨‹å æœ‰å¤„ç†å™¨è¿è¡Œï¼Œä¹Ÿå¯ä»¥è¿è¡Œå…¶å®ƒè¿›ç¨‹ä¸­çš„çº¿ç¨‹ï¼› å†…æ ¸æ”¯æŒçº¿ç¨‹å…·æœ‰å¾ˆå°çš„æ•°æ®ç»“æ„å’Œå †æ ˆï¼Œçº¿ç¨‹çš„åˆ‡æ¢æ¯”è¾ƒå¿«ï¼Œåˆ‡æ¢å¼€é”€å°ï¼› å†…æ ¸æœ¬èº«ä¹Ÿå¯ä»¥é‡‡ç”¨å¤šçº¿ç¨‹æŠ€æœ¯ï¼Œå¯ä»¥æé«˜ç³»ç»Ÿçš„æ‰§è¡Œé€Ÿåº¦å’Œæ•ˆç‡ã€‚ å¯¹äºçº¿ç¨‹åˆ‡æ¢è€Œè¨€ï¼Œå…¶æ¨¡å¼åˆ‡æ¢çš„å¼€é”€è¾ƒå¤§åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œä»ä¸€ä¸ªçº¿ç¨‹åˆ‡æ¢åˆ°å¦ä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œéœ€è¦ä»ç”¨æˆ·æ€è½¬åˆ°å†…æ ¸æ€å†è½¬åˆ°ç”¨æˆ·æ€è¿›è¡Œï¼Œè¿™æ˜¯å› ä¸ºç”¨æˆ·è¿›ç¨‹çš„çº¿ç¨‹åœ¨ç”¨æˆ·æ€è¿è¡Œï¼Œè€Œçº¿ç¨‹è°ƒåº¦å’Œç®¡ç†æ˜¯åœ¨å†…æ ¸å®ç°çš„ï¼Œç³»ç»Ÿå¼€é”€è¾ƒå¤§ã€‚ å’Œç”¨æˆ·çº§ç›¸æ¯”ï¼Œå†…æ ¸æ”¯æŒçº¿ç¨‹æœ‰ä»€ä¹ˆä¸åŒ?ç”±å†…æ ¸å®Œæˆçº¿ç¨‹çš„åˆ›å»ºã€è°ƒåº¦ç­‰ä¸»è¦å·¥ä½œä»æ˜¯ä¿å­˜ç°åœº,ä½†ä¿å­˜ä½ç½®ä¸ºå†…æ ¸æ ˆæ¯ä¸ªæ‰§è¡Œåºåˆ—éœ€æœ‰ä¸¤ä¸ªæ ˆ: ç”¨æˆ·æ ˆ+å†…æ ¸æ ˆç”¨æˆ·æ ˆï¼šæ™®é€šçš„å‡½æ•°è°ƒç”¨å†…æ ¸æ ˆï¼šç³»ç»Ÿè°ƒç”¨ã€ä¸­æ–­å¤„ç† å†…æ ¸æ”¯æŒçº¿ç¨‹çš„å®ç° åœ¨ä»…è®¾ç½®äº†å†…æ ¸æ”¯æŒçº¿ç¨‹çš„ OS ä¸­ï¼Œä¸€ç§å¯èƒ½çš„çº¿ç¨‹æ§åˆ¶æ–¹æ³•æ˜¯ï¼Œç³»ç»Ÿåœ¨åˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹æ—¶ï¼Œä¾¿ä¸ºå®ƒåˆ†é…ä¸€ä¸ªä»»åŠ¡æ•°æ®åŒº PTDA(Per Task Data Area),å…¶ä¸­åŒ…æ‹¬è‹¥å¹²ä¸ªçº¿ç¨‹æ§åˆ¶å— TCB ç©ºé—´ã€‚TCB åŒ…å«äº†çº¿ç¨‹çš„å„ç§ä¿¡æ¯ï¼Œå¦‚çº¿ç¨‹çš„çŠ¶æ€ï¼ˆè¿è¡Œã€å°±ç»ªã€é˜»å¡ç­‰ï¼‰ã€å¯„å­˜å™¨çš„å€¼ã€æ ˆæŒ‡é’ˆã€ä¼˜å…ˆçº§ã€çº¿ç¨‹ ID ç­‰ã€‚æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„ TCBã€‚ åœ¨åˆ›å»ºæ–°è¿›ç¨‹æ—¶ï¼Œç³»ç»Ÿä¼šä¸ºè¯¥è¿›ç¨‹çš„ PTDA é¢„åˆ†é…è‹¥å¹²ä¸ª TCB ç©ºé—´,ç”¨æ¥å­˜æ”¾è¯¥è¿›ç¨‹å°†è¦åˆ›å»ºçš„çº¿ç¨‹çš„ TCBã€‚å½“è¿›ç¨‹åˆ›å»ºæ–°çº¿ç¨‹æ—¶ï¼Œä¸€ä¸ªç©ºé—²çš„ TCB ä¼šè¢«å–å‡ºå¹¶å¡«å……è¯¥çº¿ç¨‹çš„ä¿¡æ¯ã€‚å½“çº¿ç¨‹ç»“æŸæ—¶ï¼Œå…¶ TCB ä¼šè¢«å›æ”¶å¹¶æ”¾å›åˆ°ç©ºé—²çš„ TCB æ± ä¸­ã€‚ é€šè¿‡è¿™ç§æ–¹å¼ï¼Œç³»ç»Ÿå¯ä»¥æœ‰æ•ˆåœ°ç®¡ç†å’Œè°ƒåº¦çº¿ç¨‹ã€‚æ¯æ¬¡çº¿ç¨‹åˆ‡æ¢æ—¶ï¼Œç³»ç»Ÿåªéœ€è¦ä¿å­˜å½“å‰çº¿ç¨‹çš„çŠ¶æ€åˆ°å…¶ TCB ä¸­ï¼Œç„¶åä»ä¸‹ä¸€ä¸ªçº¿ç¨‹çš„ TCB ä¸­æ¢å¤å…¶çŠ¶æ€ï¼Œå°±å¯ä»¥å®ç°çº¿ç¨‹çš„åˆ‡æ¢ã€‚ Exercises EX1è¿›ç¨‹ A åŒ…å«äº† 1 ä¸ªç”¨æˆ·çº§çº¿ç¨‹$t_{1}$ï¼Œè¿›ç¨‹ B åŒ…å«äº† 100 ä¸ªç”¨æˆ·çº§çº¿ç¨‹$t_{i},i \\in (1,100)$ï¼Œ$t_1$è¿è¡Œçš„æ—¶é—´å’Œ$t_i$çš„è¿è¡Œæ—¶é—´æ˜¯å¦ä¸€æ ·ï¼Ÿä¸ä¸€æ ·ï¼Œ$t_1$è¿è¡Œçš„æ—¶é—´æ˜¯$t_{i}$çš„ 100 å€,è¿›ç¨‹ B è·å¾— CPU çš„æ—¶é—´ä¸è¿›ç¨‹ A çš„ç›¸ç­‰EX2è‹¥è¿›ç¨‹ A å’Œè¿›ç¨‹ B ä¸­çš„çº¿ç¨‹éƒ½æ˜¯å†…æ ¸æ”¯æŒçº¿ç¨‹ï¼Œä¸¤è€…çš„è¿è¡Œæ—¶é—´æ˜¯å¦ä¸€æ ·ï¼Ÿ$t_1=t_i$,è¿›ç¨‹ B è·å¾— CPU çš„æ—¶é—´æ˜¯è¿›ç¨‹ A çš„ 100 å€Explanationå½“ä¸€ä¸ªç³»ç»Ÿè®¾ç½®äº†ç”¨æˆ·çº§çº¿ç¨‹æ—¶ï¼Œè™½ç„¶æ¯ä¸ªè¿›ç¨‹å¯èƒ½æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œä½†å¯¹äºæ“ä½œç³»ç»Ÿå†…æ ¸æ¥è¯´ï¼Œå®ƒåªçœ‹åˆ°è¿›ç¨‹ï¼Œè€Œçœ‹ä¸åˆ°è¿›ç¨‹å†…éƒ¨çš„çº¿ç¨‹ã€‚å› æ­¤ï¼Œå†…æ ¸çš„è°ƒåº¦ä»ç„¶æ˜¯ä»¥è¿›ç¨‹ä¸ºå•ä½è¿›è¡Œçš„ã€‚åœ¨é‡‡ç”¨æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šå…¬å¹³åœ°å°†å¤„ç†å™¨æ—¶é—´åˆ†é…ç»™æ¯ä¸ªè¿›ç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½ä¼šè½®æµè·å¾—ä¸€å®šçš„å¤„ç†å™¨æ—¶é—´ï¼ˆæ—¶é—´ç‰‡ï¼‰æ¥æ‰§è¡Œã€‚è¿™ç¡®ä¿äº†å„ä¸ªè¿›ç¨‹ä¹‹é—´çš„å…¬å¹³æ€§ã€‚è€Œè¿è¡Œå†…æ ¸æ”¯æŒçº¿ç¨‹æ—¶,æ“ä½œç³»ç»Ÿå†…æ ¸æ˜¯å¯ä»¥çœ‹åˆ°è¿›ç¨‹å†…éƒ¨çš„çº¿ç¨‹çš„ã€‚å› æ­¤ï¼Œå†…æ ¸çš„è°ƒåº¦æ˜¯ä»¥çº¿ç¨‹ä¸ºå•ä½è¿›è¡Œçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šè½®æµè·å¾—ä¸€å®šçš„å¤„ç†å™¨æ—¶é—´ï¼ˆæ—¶é—´ç‰‡ï¼‰æ¥æ‰§è¡Œã€‚è¿™ç¡®ä¿äº†å„ä¸ªçº¿ç¨‹ä¹‹é—´çš„å…¬å¹³æ€§ã€‚","link":"/UESTC/OS/Ch2-4Thread/"},{"title":"Interprocess Communication","text":"è¿›ç¨‹é€šä¿¡çš„ç±»å‹ Types Of IPCOverviewä½çº§é€šä¿¡ï¼šè¿›ç¨‹ä¹‹é—´çš„äº’æ–¥å’ŒåŒæ­¥ï¼Œç”±äºå…¶æ‰€äº¤æ¢çš„ä¿¡æ¯é‡å°‘è€Œè¢«å½’ç»“ä¸ºä½çº§é€šä¿¡ã€‚ä¿¡å·é‡æœºåˆ¶ä½œä¸ºåŒæ­¥å·¥å…·æ˜¯å“æœ‰æˆæ•ˆçš„ï¼Œä½†ä½œä¸ºé€šä¿¡å·¥å…·ï¼Œåˆ™ä¸å¤Ÿç†æƒ³ï¼Œä¸»è¦è¡¨ç°åœ¨ä¸‹è¿°ä¸¤æ–¹é¢ï¼š æ•ˆç‡ä½ï¼Œç”Ÿäº§è€…æ¯æ¬¡åªèƒ½å‘ç¼“å†²æ± æŠ•æ”¾ä¸€ä¸ªäº§å“(æ¶ˆæ¯)ï¼Œæ¶ˆè´¹è€…æ¯æ¬¡åªèƒ½ä»ç¼“å†²åŒºä¸­å–å¾—ä¸€ä¸ªæ¶ˆæ¯ï¼› é€šä¿¡å¯¹ç”¨æˆ·ä¸é€æ˜ã€‚ é«˜çº§é€šä¿¡ï¼šæ˜¯æŒ‡ç”¨æˆ·å¯ç›´æ¥åˆ©ç”¨æ“ä½œç³»ç»Ÿæ‰€æä¾›çš„ä¸€ç»„é€šä¿¡å‘½ä»¤é«˜æ•ˆåœ°ä¼ é€å¤§é‡æ•°æ®çš„ä¸€ç§é€šä¿¡æ–¹å¼ã€‚å¸¸ç”¨çš„é«˜çº§é€šä¿¡æ–¹å¼æœ‰ : å…±äº«å­˜å‚¨å™¨ç³»ç»Ÿï¼šåœ¨å†…å­˜ä¸­åˆ†é…ä¸€ç‰‡ç©ºé—´ä½œä¸ºå…±äº«å­˜å‚¨åŒº ç®¡é“é€šä¿¡ï¼šå†™è€…å‘ç®¡é“æ–‡ä»¶ä¸­å†™å…¥æ•°æ®ï¼›è¯»è€…ä»è¯¥æ–‡ä»¶ä¸­è¯»å‡ºæ•°æ® æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿï¼šä»¥æ¶ˆæ¯ï¼ˆMessageï¼‰ä¸ºå•ä½åœ¨è¿›ç¨‹é—´è¿›è¡Œæ•°æ®äº¤æ¢ ç›´æ¥é€šä¿¡æ–¹å¼ é—´æ¥é€šä¿¡æ–¹å¼ å®¢æˆ·æœº-æœåŠ¡å™¨ç³»ç»Ÿ å…±äº«å­˜å‚¨å™¨ç³»ç»Ÿ Shared-Memory System åŸºäºå…±äº«æ•°æ®ç»“æ„çš„é€šä¿¡æ–¹å¼è¯¸è¿›ç¨‹å…±ç”¨æŸäº›æ•°æ®ç»“æ„ï¼Œå€Ÿä»¥å®ç°è¯¸è¿›ç¨‹é—´çš„ä¿¡æ¯äº¤æ¢ã€‚å¦‚åœ¨ç”Ÿäº§è€…â€”æ¶ˆè´¹è€…é—®é¢˜ä¸­ï¼Œå°±æ˜¯ç”¨æœ‰ç•Œç¼“å†²åŒºè¿™ç§æ•°æ®ç»“æ„æ¥å®ç°é€šä¿¡çš„ã€‚è¿™ç§é€šä¿¡æ–¹å¼æ˜¯ä½æ•ˆçš„ï¼Œåªé€‚äºä¼ é€’ç›¸å¯¹å°‘é‡çš„æ•°æ®ã€‚ åŸºäºå…±äº«å­˜å‚¨åŒºçš„é€šä¿¡æ–¹å¼ç”±æ“ä½œç³»ç»Ÿåœ¨å†…å­˜ä¸­åˆ’åˆ†å‡ºä¸€å—åŒºåŸŸä½œä¸ºå…±äº«å­˜å‚¨åŒºã€‚è¿›ç¨‹åœ¨é€šä¿¡å‰å‘æ“ä½œç³»ç»Ÿç”³è¯·å…±äº«å­˜å‚¨åŒºä¸­çš„ä¸€ä¸ªåˆ†åŒºã€‚ç„¶åï¼Œç”³è¯·è¿›ç¨‹æŠŠè·å¾—çš„å…±äº«å­˜å‚¨åˆ†åŒºè¿æ¥åˆ°æœ¬è¿›ç¨‹ä¸Šï¼Œæ­¤åä¾¿å¯è±¡è¯»/å†™æ™®é€šå­˜å‚¨å™¨ä¸€æ ·åœ°è¯»/å†™å…±äº«å­˜å‚¨åˆ†åŒºã€‚è¯¥æ–¹å¼ä¸‹ï¼Œé€šä¿¡è¿›ç¨‹ä¹‹é—´çš„åŒæ­¥ä¸äº’æ–¥è®¿é—®å…±äº«å­˜å‚¨åŒºç”±è¿›ç¨‹è´Ÿè´£ã€‚ ç®¡é“é€šä¿¡ Pipe Communicationæ‰€è°“â€œç®¡é“â€ï¼Œæ˜¯æŒ‡ç”¨äºè¿æ¥ä¸€ä¸ªè¯»è¿›ç¨‹å’Œä¸€ä¸ªå†™è¿›ç¨‹ä»¥å®ç°ä»–ä»¬ä¹‹é—´é€šä¿¡çš„ä¸€ä¸ªå…±äº«æ–‡ä»¶ï¼Œåˆå pipe æ–‡ä»¶ã€‚å‘ç®¡é“(å…±äº«æ–‡ä»¶)æä¾›è¾“å…¥çš„å‘é€è¿›ç¨‹ Writerï¼Œ ä»¥å­—ç¬¦æµ Character Streamå½¢å¼å°†å¤§é‡çš„æ•°æ®å†™å…¥ç®¡é“ï¼›æ¥å—ç®¡é“è¾“å‡ºçš„æ¥æ”¶è¿›ç¨‹ Readerï¼Œåˆ™ä»ç®¡é“ä¸­è¯»æ•°æ®ã€‚ç”±äºå‘é€è¿›ç¨‹å’Œæ¥æ”¶è¿›ç¨‹æ˜¯åˆ©ç”¨ç®¡é“è¿›è¡Œé€šä¿¡çš„ï¼Œæ•…åˆç§°ä¸ºç®¡é“é€šä¿¡ã€‚è¿™ç§æ–¹å¼é¦–åˆ›äº UNIX ç³»ç»Ÿï¼Œç”±äºå®ƒèƒ½æœ‰æ•ˆåœ°ä¼ é€å¤§é‡æ•°æ®ï¼Œå› è€Œåˆè¢«å¼•å…¥åˆ°è®¸å¤šå…¶å®ƒæ“ä½œç³»ç»Ÿä¸­ã€‚ ä¸ºäº†åè°ƒåŒæ–¹çš„é€šä¿¡ï¼Œç®¡é“æœºåˆ¶å¿…é¡»æä¾›ä»¥ä¸‹ä¸‰æ–¹é¢çš„åè°ƒèƒ½åŠ›ï¼š äº’æ–¥ï¼Œå³å½“ä¸€ä¸ªè¿›ç¨‹æ­£åœ¨å¯¹ pipe æ‰§è¡Œè¯»/å†™æ“ä½œæ—¶ï¼Œå…¶å®ƒ(å¦ä¸€)è¿›ç¨‹å¿…é¡»ç­‰å¾…ã€‚ åŒæ­¥ï¼ŒæŒ‡å½“å†™(è¾“å…¥)è¿›ç¨‹æŠŠä¸€å®šæ•°é‡(å¦‚ 4KB)çš„æ•°æ®å†™å…¥ pipeï¼Œä¾¿å»ç¡çœ ç­‰å¾…ï¼Œ ç›´åˆ°è¯»(è¾“å‡º)è¿›ç¨‹å–èµ°æ•°æ®åï¼Œå†æŠŠä»–å”¤é†’ã€‚å½“è¯»è¿›ç¨‹è¯»ç©º pipe æ—¶ï¼Œä¹Ÿåº”ç¡çœ ç­‰å¾…ï¼Œç›´è‡³å†™è¿›ç¨‹å°†æ•°æ®å†™å…¥ç®¡é“åï¼Œæ‰å°†ä¹‹å”¤é†’ã€‚ ç¡®å®šå¯¹æ–¹æ˜¯å¦å­˜åœ¨ï¼Œåªæœ‰ç¡®å®šäº†å¯¹æ–¹å·²å­˜åœ¨æ—¶ï¼Œæ‰èƒ½è¿›è¡Œé€šä¿¡ã€‚ Linux å‘½åç®¡é“éå¸¸é€‚åˆåŒä¸€æœºå™¨ä¸Šä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´ä¼ é€’æ•°æ®ï¼Œå…¶å½¢å¼ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯è¯»å–ä¸å†™å…¥æ—¶éµå¾ª FIFO çš„åŸåˆ™ã€‚ 123#define FIFO_NAME &quot;/tmp/my_fifo&quot;#define BUFFER_SIZE PIPE_BUFmkfifo(FIFO_NAME,0777); æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿ Message-Passing Systemåº”ç”¨æœ€å¹¿æ³›çš„è¿›ç¨‹é€šä¿¡æœºåˆ¶,è¿›ç¨‹é—´æ•°æ®äº¤æ¢ä»¥æ ¼å¼åŒ–çš„ä¿¡æ¯ Message ä¸ºå•ä½ç¨‹åºå‘˜ä½¿ç”¨é€šä¿¡åŸè¯­å®Œæˆé€šä¿¡ï¼Œå…¶å®ç°ç»†èŠ‚è¢«éšè—ï¼Œç®€åŒ–äº†é€šä¿¡ç¨‹åºçš„ç¼–å†™å¤æ‚æ€§å¾®å†…æ ¸ä¸æœåŠ¡å™¨ç¨‹åºçš„é€šä¿¡é‡‡ç”¨æœ¬æœºåˆ¶ï¼Œå¯æ»¡è¶³å¤šå¤„ç†æœº OSã€åˆ†å¸ƒå¼ OSã€è®¡ç®—æœºç½‘ç»œçš„é€šä¿¡è¦æ±‚ æ¶ˆæ¯ä¼ é€’é€šä¿¡çš„å®ç°æ–¹æ³• ç›´æ¥é€šä¿¡æ–¹å¼ send(),receive() é—´æ¥é€šä¿¡æ–¹å¼ ä¿¡ç®± ç›´æ¥é€šä¿¡æ–¹å¼æŒ‡å‘é€è¿›ç¨‹åˆ©ç”¨ OS æä¾›çš„å‘é€å‘½ä»¤,ç›´æ¥æŠŠæ¶ˆæ¯å‘é€ç»™ç›®æ ‡è¿›ç¨‹ã€‚é€šå¸¸ï¼Œç³»ç»Ÿæä¾›ä¸‹è¿°ä¸¤ç§ç±»å‹çš„é€šä¿¡å‘½ä»¤(åŸè¯­)ï¼š å¯¹ç§°å¯»å€æ–¹å¼ Symmetric AddressingSend(Receiver, Message);Receive(Sender, Message);ä¾‹å¦‚ï¼ŒåŸè¯­Send(P2, m1)è¡¨ç¤ºå°†æ¶ˆæ¯ m1 å‘é€ç»™æ¥æ”¶è¿›ç¨‹ P2; è€ŒåŸè¯­Receive(P1ï¼Œm1)åˆ™è¡¨ç¤ºæ¥æ”¶ç”± P1 å‘æ¥çš„æ¶ˆæ¯ m1 éå¯¹ç§°å¯»å€æ–¹å¼ Asymmetric AddressingSend(P, Message);å‘é€ä¸€ä¸ªæ¶ˆæ¯ç»™æ¥æ”¶è¿›ç¨‹ Pï¼›Receive(id,Message);æ¥æ”¶æ¥è‡ªä»»ä½•è¿›ç¨‹çš„æ¶ˆæ¯ï¼Œè¿›ç¨‹ id ä¸å›ºå®š åˆ©ç”¨ç›´æ¥é€šä¿¡åŸè¯­ï¼Œæ¥è§£å†³ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜ï¼šå½“ç”Ÿäº§è€…ç”Ÿäº§å‡ºä¸€ä¸ªäº§å“(æ¶ˆæ¯)åï¼Œä¾¿ç”¨ Send åŸè¯­å°†æ¶ˆæ¯å‘é€ç»™æ¶ˆè´¹è€…è¿›ç¨‹ï¼›è€Œæ¶ˆè´¹è€…è¿›ç¨‹åˆ™åˆ©ç”¨ Receive åŸè¯­æ¥å¾—åˆ°ä¸€ä¸ªæ¶ˆæ¯ã€‚å¦‚æœæ¶ˆæ¯å°šæœªç”Ÿäº§å‡ºæ¥ï¼Œæ¶ˆè´¹è€…å¿…é¡»ç­‰å¾…ï¼Œç›´è‡³ç”Ÿäº§è€…è¿›ç¨‹å°†æ¶ˆæ¯å‘é€è¿‡æ¥ 123456789101112repeat â€¦ produce an item in nextp; â€¦ send(consumer, nextp); until false;repeat receive(producer, nextc); â€¦ consume the item in nextc; until false; æ¶ˆæ¯ç¼“å†²é˜Ÿåˆ—é€šä¿¡æœºåˆ¶ å‘é€è¿›ç¨‹åˆ©ç”¨ send åŸè¯­å°†æ¶ˆæ¯ç›´æ¥å‘é€ç»™æ¥æ”¶è¿›ç¨‹çš„æ¶ˆæ¯ç¼“å†²é˜Ÿåˆ—ï¼›æ¥æ”¶è¿›ç¨‹åˆ©ç”¨ receive åŸè¯­æ¥æ”¶æ¶ˆæ¯ï¼›ç”¨äºæœ¬åœ°è¿›ç¨‹é€šä¿¡ã€‚ Send å‘é€è¿›ç¨‹åœ¨åˆ©ç”¨å‘é€åŸè¯­å‘é€æ¶ˆæ¯ä¹‹å‰ï¼Œåº”å…ˆåœ¨è‡ªå·±çš„å†…å­˜ç©ºé—´ï¼Œè®¾ç½®ä¸€å‘é€åŒºaï¼ŒæŠŠå¾…å‘é€çš„æ¶ˆæ¯æ­£æ–‡ã€å‘é€è¿›ç¨‹æ ‡è¯†ç¬¦ã€æ¶ˆæ¯é•¿åº¦ç­‰ä¿¡æ¯å¡«å…¥å…¶ä¸­ï¼Œç„¶åè°ƒç”¨å‘é€åŸè¯­ï¼ŒæŠŠæ¶ˆæ¯å‘é€ç»™ç›®æ ‡(æ¥æ”¶)è¿›ç¨‹ã€‚ å‘é€åŸè¯­é¦–å…ˆæ ¹æ®å‘é€åŒºaä¸­æ‰€è®¾ç½®çš„æ¶ˆæ¯é•¿åº¦a.sizeæ¥ç”³è¯·ä¸€ç¼“å†²åŒºiï¼Œæ¥ç€ï¼ŒæŠŠå‘é€åŒºaä¸­çš„ä¿¡æ¯å¤åˆ¶åˆ°ç¼“å†²åŒºiä¸­ã€‚ä¸ºäº†èƒ½å°†iæŒ‚åœ¨æ¥æ”¶è¿›ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—mqä¸Šï¼Œåº”å…ˆè·å¾—æ¥æ”¶è¿›ç¨‹çš„å†…éƒ¨æ ‡è¯†ç¬¦jï¼Œç„¶åå°†iæŒ‚åœ¨j.mqä¸Šã€‚ ç”±äºè¯¥é˜Ÿåˆ—å±äºä¸´ç•Œèµ„æº, æ•…åœ¨æ‰§è¡Œinsertæ“ä½œçš„å‰åï¼Œéœ€è¦æ‰§è¡Œwaitå’Œsignalæ“ä½œ Receive æ¥æ”¶è¿›ç¨‹è°ƒç”¨æ¥æ”¶åŸè¯­receive(b)ï¼Œä»è‡ªå·±çš„æ¶ˆæ¯é˜Ÿåˆ—mqä¸­,æ‘˜ä¸‹ç¬¬ä¸€ä¸ªæ¶ˆæ¯ç¼“å†²åŒº i,å¹¶å°†å…¶ä¸­çš„æ•°æ®å¤åˆ¶åˆ°ä»¥ b ä¸ºé¦–å€çš„æŒ‡å®šæ¶ˆæ¯æ¥æ”¶åŒºå†… å®Œæˆæ¶ˆæ¯çš„æ¥æ”¶åæ¥æ”¶è¿›ç¨‹è¿”å›åˆ°ç”¨æˆ·æ€ç»§ç»­è¿›è¡Œ æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿå®ç°ä¸­çš„è‹¥å¹²é—®é¢˜ é€šä¿¡é“¾è·¯(communication link)ä¸ºä½¿åœ¨å‘é€è¿›ç¨‹å’Œæ¥æ”¶è¿›ç¨‹ä¹‹é—´èƒ½è¿›è¡Œé€šä¿¡ï¼Œå¿…é¡»åœ¨ä¸¤è€…ä¹‹é—´å»ºç«‹ä¸€æ¡é€šä¿¡é“¾è·¯ã€‚æœ‰ä¸¤ç§æ–¹å¼å»ºç«‹é€šä¿¡é“¾è·¯ã€‚ ç¬¬ä¸€ç§æ–¹å¼ï¼šç”±å‘é€è¿›ç¨‹åœ¨é€šä¿¡ä¹‹å‰ï¼Œç”¨æ˜¾å¼çš„â€œå»ºç«‹è¿æ¥â€å‘½ä»¤(åŸè¯­)è¯·æ±‚ç³»ç»Ÿä¸ºä¹‹å»ºç«‹ä¸€æ¡é€šä¿¡é“¾è·¯ï¼›åœ¨é“¾è·¯ä½¿ç”¨å®Œåï¼Œä¹Ÿç”¨æ˜¾å¼æ–¹å¼æ‹†é™¤é“¾è·¯ã€‚è¿™ç§æ–¹å¼ä¸»è¦ç”¨äºè®¡ç®—æœºç½‘ç»œä¸­ ç¬¬äºŒç§æ–¹å¼: å‘é€è¿›ç¨‹æ— é¡»æ˜ç¡®æå‡ºå»ºç«‹é“¾è·¯çš„è¯·æ±‚ï¼Œåªé¡»åˆ©ç”¨ç³»ç»Ÿæä¾›çš„å‘é€å‘½ä»¤(åŸè¯­)ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åœ°ä¸ºä¹‹å»ºç«‹ä¸€æ¡é“¾è·¯ã€‚è¿™ç§æ–¹å¼ä¸»è¦ç”¨äºå•æœºç³»ç»Ÿä¸­ã€‚ æ ¹æ®é€šä¿¡é“¾è·¯çš„è¿æ¥æ–¹æ³•ï¼Œåˆå¯æŠŠé€šä¿¡é“¾è·¯åˆ†ä¸ºä¸¤ç±»ï¼š ç‚¹å¯¹ç‚¹è¿æ¥é€šä¿¡é“¾è·¯ï¼Œè¿™æ—¶çš„ä¸€æ¡é“¾è·¯åªè¿æ¥ä¸¤ä¸ªç»“ç‚¹(è¿›ç¨‹)ï¼› å¤šç‚¹è¿æ¥é“¾è·¯ï¼ŒæŒ‡ç”¨ä¸€æ¡é“¾è·¯è¿æ¥å¤šä¸ª(n ï¼ 2)ç»“ç‚¹(è¿›ç¨‹)ã€‚è€Œæ ¹æ®é€šä¿¡æ–¹å¼çš„ä¸åŒï¼Œåˆ™åˆå¯æŠŠé“¾è·¯åˆ†æˆä¸¤ç§ï¼š å•å‘é€šä¿¡é“¾è·¯ï¼Œåªå…è®¸å‘é€è¿›ç¨‹å‘æ¥æ”¶è¿›ç¨‹å‘é€æ¶ˆæ¯ï¼› åŒå‘é“¾è·¯ï¼Œæ—¢å…è®¸ç”±è¿›ç¨‹ A å‘è¿›ç¨‹ B å‘é€æ¶ˆæ¯ï¼Œä¹Ÿå…è®¸è¿›ç¨‹ B åŒæ—¶å‘è¿›ç¨‹ A å‘é€æ¶ˆæ¯ã€‚ æ¶ˆæ¯çš„æ ¼å¼ å®šé•¿æ¶ˆæ¯åœ¨æŸäº› OS ä¸­ï¼Œæ¶ˆæ¯æ˜¯é‡‡ç”¨æ¯”è¾ƒçŸ­çš„å®šé•¿æ¶ˆæ¯æ ¼å¼ï¼Œè¿™å‡å°‘äº†å¯¹æ¶ˆæ¯çš„å¤„ç†å’Œå­˜å‚¨å¼€é”€ã€‚ å˜é•¿æ¶ˆæ¯åœ¨æœ‰çš„ OS ä¸­ï¼Œé‡‡ç”¨å¦ä¸€ç§å˜é•¿çš„æ¶ˆæ¯æ ¼å¼ï¼Œå³è¿›ç¨‹æ‰€å‘é€æ¶ˆæ¯çš„é•¿åº¦æ˜¯å¯å˜çš„ã€‚ç³»ç»Ÿåœ¨å¤„ç†å’Œå­˜å‚¨å˜é•¿æ¶ˆæ¯æ—¶ï¼Œé¡»ä»˜å‡ºæ›´å¤šçš„å¼€é”€ï¼Œä½†æ–¹ä¾¿äº†ç”¨æˆ·ã€‚æ³¨æ„ï¼šè¿™ä¸¤ç§æ¶ˆæ¯æ ¼å¼å„æœ‰å…¶ä¼˜ç¼ºç‚¹ï¼Œæ•…åœ¨å¾ˆå¤šç³»ç»Ÿ(åŒ…æ‹¬è®¡ç®—æœºç½‘ç»œ)ä¸­ï¼Œæ˜¯åŒæ—¶éƒ½ç”¨çš„ã€‚ è¿›ç¨‹åŒæ­¥æ–¹å¼è¿›ç¨‹é—´é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—é€šä¿¡ï¼Œåˆ™è¿›ç¨‹ä¹‹é—´éœ€åŒæ­¥ï¼Œå…¶åŒæ­¥æ–¹å¼æœ‰ä¸‰ç§ï¼š å‘é€è¿›ç¨‹é˜»å¡,æ¥æ”¶è¿›ç¨‹é˜»å¡ï¼šè¿›ç¨‹é—´æ±‡åˆåŒæ­¥ï¼Œæœ‰æ¶ˆæ¯æ—¶ä¼ é€’ï¼Œæ— æ¶ˆæ¯æ—¶åŒæ—¶é˜»å¡ã€‚ å‘é€è¿›ç¨‹ä¸é˜»å¡,æ¥æ”¶è¿›ç¨‹é˜»å¡ï¼šå‘é€è€…å°½å¿«å‘é€æ¶ˆæ¯ï¼Œæ¥æ”¶è€…å¹³æ—¶é˜»å¡æ”¶åˆ°æ¶ˆæ¯æ‰å”¤é†’ï¼Œä¾‹å¦‚å¤šä¸ªç”¨æˆ·å…±äº«ä¸€ä¸ªæ‰“å°æœåŠ¡ã€‚ å‘é€è¿›ç¨‹å’Œæ¥æ”¶è¿›ç¨‹å‡ä¸é˜»å¡ï¼šå‘é€è€…å’Œæ¥æ”¶è€…å‡å¿™äºè‡ªèº«äº‹åŠ¡ï¼Œç›´åˆ°æ— æ³•ç»§ç»­æ‰é˜»å¡ã€‚ä¾‹å¦‚å‘é€è¿›ç¨‹å’Œæ¥æ”¶è¿›ç¨‹é—´å…³è”ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚ é—´æ¥é€šä¿¡æ–¹å¼ä¿¡ç®±æ˜¯é—´æ¥é€šä¿¡æ–¹å¼çš„ä¸€ç§å®ç°ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”¨äºè¿›ç¨‹é—´é€šä¿¡ã€‚ ä¿¡ç®±çš„åˆ›å»ºå’Œæ’¤æ¶ˆ:è¿›ç¨‹å¯åˆ©ç”¨ä¿¡ç®±åˆ›å»ºåŸè¯­æ¥å»ºç«‹ä¸€ä¸ªæ–°ä¿¡ç®±ã€‚åˆ›å»ºè€…è¿›ç¨‹åº”ç»™å‡ºä¿¡ç®±åå­—ã€ä¿¡ç®±å±æ€§(å…¬ç”¨ã€ç§ç”¨æˆ–å…±äº«)ï¼›å¯¹äºå…±äº«ä¿¡ç®±ï¼Œè¿˜åº”ç»™å‡ºå…±äº«è€…çš„åå­—ã€‚å½“è¿›ç¨‹ä¸å†éœ€è¦è¯»ä¿¡ç®±æ—¶ï¼Œå¯ç”¨ä¿¡ç®±æ’¤æ¶ˆåŸè¯­å°†ä¹‹æ’¤æ¶ˆã€‚æ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶:å½“è¿›ç¨‹ä¹‹é—´è¦åˆ©ç”¨ä¿¡ç®±è¿›è¡Œé€šä¿¡æ—¶ï¼Œå¿…é¡»ä½¿ç”¨å…±äº«ä¿¡ç®±ï¼Œå¹¶åˆ©ç”¨ç³»ç»Ÿæä¾›çš„ä¸‹è¿°é€šä¿¡åŸè¯­è¿›è¡Œé€šä¿¡ã€‚Send(mailbox, message); å°†ä¸€ä¸ªæ¶ˆæ¯å‘é€åˆ°æŒ‡å®šä¿¡ç®±ï¼›Receive(mailbox, message); ä»æŒ‡å®šä¿¡ç®±ä¸­æ¥æ”¶ä¸€ä¸ªæ¶ˆæ¯ï¼› ä¿¡ç®±å®šä¹‰ä¸ºä¸€ç§æ•°æ®ç»“æ„ã€‚åœ¨é€»è¾‘ä¸Šï¼Œå¯ä»¥å°†å…¶åˆ†ä¸ºä¿¡ç®±å¤´ MailboxHeader å’Œä¿¡ç®±ä½“ MailboxBody ä¸¤éƒ¨åˆ† ä¿¡ç®±å¯ç”±æ“ä½œç³»ç»Ÿåˆ›å»ºï¼Œä¹Ÿå¯ç”±ç”¨æˆ·è¿›ç¨‹åˆ›å»ºï¼Œåˆ›å»ºè€…æ˜¯ä¿¡ç®±çš„æ‹¥æœ‰è€…ã€‚æ®æ­¤ï¼Œå¯æŠŠä¿¡ç®±åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼š ç§ç”¨ä¿¡ç®± ç”¨æˆ·è¿›ç¨‹å¯ä¸ºè‡ªå·±å»ºç«‹ä¸€ä¸ªæ–°ä¿¡ç®±ï¼Œå¹¶ä½œä¸ºè¯¥è¿›ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚ä¿¡ç®±çš„æ‹¥æœ‰è€…æœ‰æƒä»ä¿¡ç®±ä¸­è¯»å–æ¶ˆæ¯ï¼Œå…¶ä»–ç”¨æˆ·åˆ™åªèƒ½å°†è‡ªå·±æ„æˆçš„æ¶ˆæ¯å‘é€åˆ°è¯¥ä¿¡ç®±ä¸­ã€‚è¿™ç§ç§ç”¨ä¿¡ç®±å¯é‡‡ç”¨å•å‘é€šä¿¡é“¾è·¯çš„ä¿¡ç®±æ¥å®ç°ã€‚å½“æ‹¥æœ‰è¯¥ä¿¡ç®±çš„è¿›ç¨‹ç»“æŸæ—¶ï¼Œä¿¡ç®±ä¹Ÿéšä¹‹æ¶ˆå¤±ã€‚ å…¬ç”¨ä¿¡ç®± ç”±æ“ä½œç³»ç»Ÿåˆ›å»ºï¼Œå¹¶æä¾›ç»™ç³»ç»Ÿä¸­çš„æ‰€æœ‰æ ¸å‡†è¿›ç¨‹ä½¿ç”¨ã€‚è¿›ç¨‹æ—¢å¯æŠŠæ¶ˆæ¯å‘é€åˆ°è¯¥ä¿¡ç®±ä¸­ï¼Œä¹Ÿå¯ä»ä¿¡ç®±ä¸­è¯»å–å‘é€ç»™è‡ªå·±çš„æ¶ˆæ¯ã€‚æ˜¾ç„¶ï¼Œå…¬ç”¨ä¿¡ç®±åº”é‡‡ç”¨åŒå‘é€šä¿¡é“¾è·¯çš„ä¿¡ç®±æ¥å®ç°ã€‚é€šå¸¸ï¼Œå…¬ç”¨ä¿¡ç®±åœ¨ç³»ç»Ÿè¿è¡ŒæœŸé—´å§‹ç»ˆå­˜åœ¨ã€‚ å…±äº«ä¿¡ç®± ç”±æŸè¿›ç¨‹åˆ›å»ºï¼Œåœ¨åˆ›å»ºæ—¶æˆ–åˆ›å»ºåï¼ŒæŒ‡æ˜å®ƒæ˜¯å¯å…±äº«çš„ï¼ŒåŒæ—¶é¡»æŒ‡å‡ºå…±äº«è¿›ç¨‹(ç”¨æˆ·)çš„åå­—ã€‚ä¿¡ç®±çš„æ‹¥æœ‰è€…å’Œå…±äº«è€…ï¼Œéƒ½æœ‰æƒä»ä¿¡ç®±ä¸­å–èµ°å‘é€ç»™è‡ªå·±çš„æ¶ˆæ¯ã€‚ åœ¨åˆ©ç”¨ä¿¡ç®±é€šä¿¡æ—¶ï¼Œåœ¨å‘é€è¿›ç¨‹å’Œæ¥æ”¶è¿›ç¨‹ä¹‹é—´ï¼Œå­˜åœ¨ä»¥ä¸‹å››ç§å…³ç³»ï¼š ä¸€å¯¹ä¸€å…³ç³» è¿™æ—¶å¯ä¸ºå‘é€è¿›ç¨‹å’Œæ¥æ”¶è¿›ç¨‹å»ºç«‹ä¸€æ¡ä¸¤è€…ä¸“ç”¨çš„é€šä¿¡é“¾è·¯ï¼Œä½¿ä¸¤è€…ä¹‹é—´çš„äº¤äº’ä¸å—å…¶ä»–è¿›ç¨‹çš„å¹²æ‰° å¤šå¯¹ä¸€å…³ç³» å…è®¸æä¾›æœåŠ¡çš„è¿›ç¨‹ä¸å¤šä¸ªç”¨æˆ·è¿›ç¨‹ä¹‹é—´è¿›è¡Œäº¤äº’ï¼Œä¹Ÿç§°ä¸ºå®¢æˆ·/æœåŠ¡å™¨äº¤äº’(client/server interaction) ä¸€å¯¹å¤šå…³ç³» å…è®¸ä¸€ä¸ªå‘é€è¿›ç¨‹ä¸å¤šä¸ªæ¥æ”¶è¿›ç¨‹è¿›è¡Œäº¤äº’ï¼Œä½¿å‘é€è¿›ç¨‹å¯ç”¨å¹¿æ’­æ–¹å¼ï¼Œå‘æ¥æ”¶è€…(å¤šä¸ª)å‘é€æ¶ˆæ¯ å¤šå¯¹å¤šå…³ç³»ã€‚å…è®¸å»ºç«‹ä¸€ä¸ªå…¬ç”¨ä¿¡ç®±ï¼Œè®©å¤šä¸ªè¿›ç¨‹éƒ½èƒ½å‘ä¿¡ç®±ä¸­æŠ•é€’æ¶ˆæ¯ï¼›ä¹Ÿå¯ä»ä¿¡ç®±ä¸­å–èµ°å±äºè‡ªå·±çš„æ¶ˆæ¯ å®¢æˆ·æœº-æœåŠ¡å™¨ç³»ç»Ÿ Client-Server Systemå¥—æ¥å­— SocketSocket å®šä¹‰Windows Sockets æ˜¯ä¸ºä¸Šå±‚åº”ç”¨ç¨‹åºæä¾›çš„ä¸€ç§æ ‡å‡†ç½‘ç»œæ¥å£ï¼Œä¸»è¦ç”¨äºç½‘ç»œä¸­çš„æ•°æ®é€šä¿¡ã€‚ä¸Šå±‚åº”ç”¨ç¨‹åºä¸ç”¨å…³å¿ƒ Winsock çš„å®ç°ç»†èŠ‚ï¼Œå®ƒä¸ºä¸Šå±‚åº”ç”¨ç¨‹åºæä¾›é€æ˜çš„æœåŠ¡ã€‚Windows Sockets è§„èŒƒä»¥ U.C. Berkeley å¤§å­¦ BSD UNIX ä¸­æµè¡Œçš„ Socket æ¥å£ä¸ºèŒƒä¾‹å®šä¹‰äº†ä¸€å¥— microsoft Windows ä¸‹ç½‘ç»œç¼–ç¨‹æ¥å£ã€‚å®ƒä¸ä»…åŒ…å«äº†äººä»¬æ‰€ç†Ÿæ‚‰çš„ Berkeley Socket é£æ ¼çš„åº“å‡½æ•°ï¼›ä¹ŸåŒ…å«äº†ä¸€ç»„é’ˆå¯¹ Windows çš„æ‰©å±•åº“å‡½æ•°ï¼Œä»¥ä½¿ç¨‹åºå‘˜èƒ½å……åˆ†åœ°åˆ©ç”¨ Windows æ¶ˆæ¯é©±åŠ¨æœºåˆ¶è¿›è¡Œç¼–ç¨‹ã€‚ TCP/IP TCP/IP åè®®çš„æ ¸å¿ƒéƒ¨åˆ†æ˜¯ä¼ è¾“å±‚åè®®(TCPã€UDP)ï¼Œç½‘ç»œå±‚åè®®(IP)å’Œç‰©ç†æ¥å£å±‚ï¼Œè¿™ä¸‰å±‚é€šå¸¸æ˜¯åœ¨æ“ä½œç³»ç»Ÿå†…æ ¸ä¸­å®ç°ã€‚å› æ­¤ç”¨æˆ·ä¸€èˆ¬ä¸æ¶‰åŠã€‚ç¼–ç¨‹æ—¶ï¼Œç¼–ç¨‹ç•Œé¢æœ‰ä¸¤ç§å½¢å¼ï¼šç”±å†…æ ¸ç›´æ¥æä¾›çš„ç³»ç»Ÿè°ƒç”¨ï¼›ä½¿ç”¨ä»¥åº“å‡½æ•°æ–¹å¼æä¾›çš„å„ç§å‡½æ•°ã€‚å‰è€…ä¸ºæ ¸å†…å®ç°ï¼Œåè€…ä¸ºæ ¸å¤–å®ç°ã€‚ç”¨æˆ·æœåŠ¡è¦é€šè¿‡æ ¸å¤–çš„åº”ç”¨ç¨‹åºæ‰èƒ½å®ç°ï¼Œæ‰€ä»¥è¦ä½¿ç”¨å¥—æ¥å­—(socket)æ¥å®ç°ã€‚ TCP/IP åè®®ä¸ WinSock çš„å…³ç³» WinSock ä¸æ˜¯ä¸€ç§ç½‘ç»œåè®®ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªç½‘ç»œç¼–ç¨‹æ¥å£ï¼Œå¯ä»¥æŠŠå®ƒå½“ä½œä¸€äº›åè®®çš„å°è£…ã€‚WinSock å°±æ˜¯ TCP/IP åè®®çš„ä¸€ç§å°è£…ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨ WinSock çš„æ¥å£å‡½æ•°æ¥è°ƒç”¨ TCP/IP çš„å„ç§åŠŸèƒ½.ä¾‹å¦‚æƒ³ç”¨ TCP/IP åè®®å‘é€æ•°æ®ï¼Œå°±å¯ä»¥ä½¿ç”¨ WinSock çš„æ¥å£å‡½æ•° Send()æ¥è°ƒç”¨ TCP/IP çš„å‘é€æ•°æ®åŠŸèƒ½ï¼Œè‡³äºå…·ä½“æ€ä¹ˆå‘é€æ•°æ®ï¼ŒWinSock å·²ç»å¸®ç”¨æˆ·å°è£…å¥½äº†è¿™ç§åŠŸèƒ½ã€‚ è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ RPCè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ RPC(Remote Procedure Call)ï¼Œæ˜¯ä¸€ä¸ªé€šä¿¡åè®®ï¼Œç”¨äºé€šè¿‡ç½‘ç»œè¿æ¥çš„ç³»ç»Ÿã€‚è¯¥åè®®å…è®¸è¿è¡Œäºä¸€å°ä¸»æœº(æœ¬åœ°)ç³»ç»Ÿä¸Šçš„è¿›ç¨‹è°ƒç”¨å¦ä¸€å°ä¸»æœº(è¿œç¨‹)ç³»ç»Ÿä¸Šçš„è¿›ç¨‹ï¼Œè€Œå¯¹ç¨‹åºå‘˜è¡¨ç°ä¸ºå¸¸è§„çš„è¿‡ç¨‹è°ƒç”¨ï¼Œæ— éœ€é¢å¤–åœ°ä¸ºæ­¤ç¼–ç¨‹ã€‚å¦‚æœæ¶‰åŠçš„è½¯ä»¶é‡‡ç”¨é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œé‚£ä¹ˆè¿œç¨‹è¿‡ç¨‹è°ƒç”¨äº¦å¯ç§°åšè¿œç¨‹æ–¹æ³•è°ƒç”¨ã€‚RPC ä¸»è¦æ˜¯ä¸ºäº†è§£å†³çš„ä¸¤ä¸ªé—®é¢˜ï¼š è§£å†³åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒæœåŠ¡ä¹‹é—´çš„è°ƒç”¨é—®é¢˜ã€‚ è¿œç¨‹è°ƒç”¨æ—¶ï¼Œè¦èƒ½å¤Ÿåƒæœ¬åœ°è°ƒç”¨ä¸€æ ·æ–¹ä¾¿ï¼Œè®©è°ƒç”¨è€…æ„ŸçŸ¥ä¸åˆ°è¿œç¨‹è°ƒç”¨çš„é€»è¾‘ Steps è°ƒç”¨å®¢æˆ·ç«¯å­˜æ ¹ï¼›æ‰§è¡Œä¼ é€å‚æ•° è°ƒç”¨æœ¬åœ°ç³»ç»Ÿå†…æ ¸å‘é€ç½‘ç»œæ¶ˆæ¯ æ¶ˆæ¯ä¼ é€åˆ°è¿œç¨‹ä¸»æœº æœåŠ¡å™¨å­˜æ ¹å¾—åˆ°æ¶ˆæ¯å¹¶å–å‡ºå‚æ•° æ‰§è¡Œè¿œç¨‹è¿‡ç¨‹ æ‰§è¡Œçš„è¿‡ç¨‹å°†ç»“æœè¿”å›æœåŠ¡å™¨å­˜æ ¹ æœåŠ¡å™¨å­˜æ ¹å°è£…ç»“æœï¼Œè°ƒç”¨è¿œç¨‹ç³»ç»Ÿå†…æ ¸ æ¶ˆæ¯ä¼ å›æœ¬åœ°ä¸»æœº å®¢æˆ·å­˜æ ¹ä»å†…æ ¸æ¥æ”¶æ¶ˆæ¯ å®¢æˆ·æ¥æ”¶å­˜æ ¹è¿”å›çš„æ•°æ®","link":"/UESTC/OS/Ch2-3InterprocessCommunication/"},{"title":"Storage Management Part â… ","text":"å­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æ„å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„æ¦‚è¿°ä¸ºèƒ½æ›´å¤šçš„å­˜æ”¾å¹¶æ›´å¿«åœ°å¤„ç†ç”¨æˆ·ä¿¡æ¯ï¼Œç›®å‰è®¸å¤šè®¡ç®—æœºæŠŠå­˜å‚¨å™¨åˆ†ä¸ºä¸‰çº§ã€‚ é«˜é€Ÿç¼“å­˜ Cacheï¼šK å­—èŠ‚ã€é«˜é€Ÿã€æ˜‚è´µã€æ˜“å˜çš„ å†…å­˜ RAMï¼š M æˆ– G å­—èŠ‚ã€ä¸­é€Ÿã€ä¸­ç­‰ä»·æ ¼ã€æ˜“å˜çš„ ç£ç›˜ï¼šG æˆ– T å­—èŠ‚ã€ä½é€Ÿã€ä»·å»‰ã€ä¸æ˜“å˜çš„ å¯„å­˜å™¨ã€é«˜é€Ÿç¼“å­˜ã€ä¸»å­˜å‚¨å™¨å’Œç£ç›˜ç¼“å­˜å‡å±äºæ“ä½œç³»ç»Ÿå­˜å‚¨ç®¡ç†çš„ç®¡è¾–èŒƒç•´ï¼Œæ‰ç”µåå®ƒä»¬å­˜å‚¨çš„ä¿¡æ¯ä¸å†å­˜åœ¨ã€‚ç£ç›˜å’Œå¯ç§»åŠ¨å­˜å‚¨ä»‹è´¨å±äºè®¾å¤‡ç®¡ç†çš„ç®¡è¾–èŒƒç•´ï¼Œå®ƒä»¬å­˜å‚¨çš„ä¿¡æ¯å°†è¢«é•¿æœŸä¿å­˜ã€‚ ä¸»å­˜å‚¨å™¨ä¸å¯„å­˜å™¨ ä¸»å­˜å‚¨å™¨ï¼ˆå†…å­˜ï¼Œä¸»å­˜ï¼Œå¯æ‰§è¡Œå­˜å‚¨å™¨ï¼‰ç”¨äºä¿å­˜è¿›ç¨‹è¿è¡Œæ—¶çš„ç¨‹åºå’Œæ•°æ®ã€‚CPU çš„æ§åˆ¶éƒ¨ä»¶åªèƒ½ä»ä¸»å­˜ä¸­å–å¾—æŒ‡ä»¤å’Œæ•°æ®åˆ° CPU å¯„å­˜å™¨ï¼ŒåŒæ ·ï¼ŒCPU å¯„å­˜å™¨ä¸­çš„æ•°æ®å¯å­˜å…¥ä¸»å­˜ã€‚CPU ä¸å¤–è®¾äº¤æ¢æ•°æ®å¿…é¡»ä¾æ‰˜äºä¸»å­˜ã€‚ å¯„å­˜å™¨å¯„å­˜å™¨è®¿é—®é€Ÿåº¦æœ€å¿«ï¼Œä¸ CPU åè°ƒå·¥ä½œã€‚é«˜é€Ÿç¼“å­˜ä¸ç£ç›˜ç¼“å­˜CPU å¯¹é«˜é€Ÿç¼“å­˜çš„è®¿é—®ï¼Œå…¶é€Ÿåº¦æ¯”è®¿é—®ä¸»å­˜å¿«ï¼Œæ¯”è®¿é—®å¯„å­˜å™¨æ…¢ã€‚æ ¹æ®ç¨‹åºæ‰§è¡Œçš„å±€éƒ¨æ€§åŸç†ï¼Œå°†ä¸»å­˜ä¸­ä¸€äº›ç»å¸¸è®¿é—®çš„æ•°æ®å­˜æ”¾åœ¨é«˜é€Ÿç¼“å­˜ä¸­ï¼Œå‡å°‘è®¿é—®ä¸»å­˜çš„æ¬¡æ•°ï¼Œæé«˜ç¨‹åºçš„æ‰§è¡Œé€Ÿåº¦ã€‚æœ‰äº›è®¡ç®—æœºç³»ç»Ÿè®¾ç½®äº†ä¸¤çº§é«˜é€Ÿç¼“å­˜ï¼Œå³ï¼Œä¸€çº§é«˜é€Ÿç¼“å­˜ä¸äºŒçº§é«˜é€Ÿç¼“å­˜ã€‚ å±€éƒ¨æ€§åŸç†ï¼ˆLocality Principleï¼‰æŒ‡åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ•°æ®å’ŒæŒ‡ä»¤çš„è®¿é—®å­˜åœ¨ä¸€å®šçš„ç©ºé—´å’Œæ—¶é—´ä¸Šçš„å±€éƒ¨æ€§ç‰¹ç‚¹ã€‚å…¶ä¸­ï¼Œæ—¶é—´å±€éƒ¨æ€§æ˜¯æŒ‡ä¸€ä¸ªæ•°æ®é¡¹æˆ–æŒ‡ä»¤åœ¨ä¸€æ®µæ—¶é—´å†…è¢«åå¤ä½¿ç”¨çš„ç‰¹ç‚¹ï¼Œç©ºé—´å±€éƒ¨æ€§æ˜¯æŒ‡ä¸€ä¸ªæ•°æ®é¡¹æˆ–æŒ‡ä»¤åœ¨ä¸€æ®µæ—¶é—´å†…ä¸å…¶ç›¸é‚»çš„æ•°æ®é¡¹æˆ–æŒ‡ä»¤è¢«åå¤ä½¿ç”¨çš„ç‰¹ç‚¹ã€‚åœ¨åˆ†é¡µæœºåˆ¶ä¸­ï¼Œé¡µè¡¨çš„ä½œç”¨æ˜¯å°†è™šæ‹Ÿåœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€ï¼Œä»è€Œå®Œæˆå†…å­˜è®¿é—®ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå±€éƒ¨æ€§åŸç†çš„ä½œç”¨ä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼šæ—¶é—´å±€éƒ¨æ€§ï¼šç”±äºç¨‹åºä¸­å­˜åœ¨ä¸€å®šçš„å¾ªç¯æˆ–è€…é‡å¤æ“ä½œï¼Œå› æ­¤ä¼šåå¤è®¿é—®åŒä¸€ä¸ªé¡µæˆ–ä¸€äº›ç‰¹å®šçš„é¡µï¼Œè¿™å°±ä½“ç°äº†æ—¶é—´å±€éƒ¨æ€§çš„ç‰¹ç‚¹ã€‚ä¸ºäº†åˆ©ç”¨æ—¶é—´å±€éƒ¨æ€§ï¼Œåˆ†é¡µæœºåˆ¶ä¸­é€šå¸¸é‡‡ç”¨ç¼“å­˜æœºåˆ¶æ¥æé«˜é¡µé¢çš„å‘½ä¸­ç‡ï¼Œå³å°†æœ€è¿‘è®¿é—®è¿‡çš„ä¸€äº›é¡µæ”¾å…¥ç¼“å­˜ä¸­ï¼Œå¦‚æœä¸‹ä¸€æ¬¡è®¿é—®çš„é¡µå·²ç»åœ¨ç¼“å­˜ä¸­ï¼Œå°±ä¸éœ€è¦å†æ¬¡è®¿é—®å†…å­˜ï¼Œè€Œæ˜¯ç›´æ¥ä»ç¼“å­˜ä¸­è¯»å–ã€‚ç©ºé—´å±€éƒ¨æ€§ï¼šç”±äºç¨‹åºä¸­æ•°æ®å’ŒæŒ‡ä»¤çš„è®¿é—®é€šå¸¸æ˜¯å…·æœ‰ä¸€å®šçš„ç©ºé—´è¿ç»­æ€§çš„ï¼Œå› æ­¤å½“è®¿é—®æŸä¸ªé¡µæ—¶ï¼Œå¾€å¾€ä¼šé¡ºå¸¦è®¿é—®å…¶ç›¸é‚»çš„ä¸€äº›é¡µã€‚ä¸ºäº†åˆ©ç”¨ç©ºé—´å±€éƒ¨æ€§ï¼Œåˆ†é¡µæœºåˆ¶ä¸­é€šå¸¸é‡‡ç”¨é¢„å–æŠ€æœ¯æ¥é¢„å…ˆå°†ç›¸é‚»çš„ä¸€äº›é¡µè¯»å…¥å†…å­˜ç¼“å­˜ä¸­ï¼Œä»¥ä¾¿åœ¨æœªæ¥è®¿é—®æ—¶èƒ½å¤Ÿç›´æ¥ä½¿ç”¨ï¼Œä»è€Œæé«˜è®¿é—®é€Ÿåº¦ã€‚æ€»ä¹‹ï¼Œå±€éƒ¨æ€§åŸç†æ˜¯è®¡ç®—æœºä½“ç³»ç»“æ„è®¾è®¡çš„é‡è¦åŸåˆ™ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯è®¸å¤šä¼˜åŒ–ç®—æ³•çš„åŸºç¡€ã€‚åœ¨åˆ†é¡µæœºåˆ¶ä¸­ï¼Œåˆ©ç”¨æ—¶é—´å±€éƒ¨æ€§å’Œç©ºé—´å±€éƒ¨æ€§ï¼Œé‡‡ç”¨ç¼“å­˜å’Œé¢„å–æŠ€æœ¯ï¼Œå¯ä»¥æé«˜é¡µé¢çš„å‘½ä¸­ç‡ï¼Œä»è€Œæé«˜å†…å­˜è®¿é—®æ•ˆç‡ é«˜é€Ÿç¼“å­˜ä¸ç£ç›˜ç¼“å­˜ é«˜é€Ÿç¼“å­˜CPU å¯¹é«˜é€Ÿç¼“å­˜çš„è®¿é—®ï¼Œå…¶é€Ÿåº¦æ¯”è®¿é—®ä¸»å­˜å¿«ï¼Œæ¯”è®¿é—®å¯„å­˜å™¨æ…¢ã€‚æ ¹æ®ç¨‹åºæ‰§è¡Œçš„å±€éƒ¨æ€§åŸç†ï¼Œå°†ä¸»å­˜ä¸­ä¸€äº›ç»å¸¸è®¿é—®çš„æ•°æ®å­˜æ”¾åœ¨é«˜é€Ÿç¼“å­˜ä¸­ï¼Œå‡å°‘è®¿é—®ä¸»å­˜çš„æ¬¡æ•°ï¼Œæé«˜ç¨‹åºçš„æ‰§è¡Œé€Ÿåº¦ã€‚æœ‰äº›è®¡ç®—æœºç³»ç»Ÿè®¾ç½®äº†ä¸¤çº§é«˜é€Ÿç¼“å­˜ï¼Œå³ï¼Œä¸€çº§é«˜é€Ÿç¼“å­˜ä¸äºŒçº§é«˜é€Ÿç¼“å­˜ã€‚ ç£ç›˜ç¼“å­˜å†…å­˜ä¸­ä¸€å—å­˜å‚¨åŒºï¼Œå¯¹åº”äºæŸå›ºå®šç£ç›˜ï¼Œä¸´æ—¶å­˜å‚¨ç£ç›˜æ•°æ®ï¼ˆå¦‚ï¼Œæ•°æ®é¢„å–ï¼‰ å­˜å‚¨å™¨ç®¡ç†çš„ç›®çš„å’ŒåŠŸèƒ½æ“ä½œç³»ç»Ÿè´Ÿè´£åè°ƒè¿™äº›å­˜å‚¨å™¨çš„ä½¿ç”¨ä¸‰çº§å­˜å‚¨å™¨ï¼Œä»ç¼“å­˜åˆ°å†…å­˜åˆ°å¤–å­˜ï¼Œå…¶å®¹é‡æ„ˆæ¥æ„ˆå¤§ï¼Œè€Œè®¿é—®æ•°æ®çš„é€Ÿåº¦åˆ™æ„ˆæ¥æ„ˆæ…¢ï¼Œä»·æ ¼ä¹Ÿæ„ˆæ¥æ„ˆä¾¿å®œã€‚ç”¨æˆ·çš„ç¨‹åºåœ¨è¿è¡Œæ—¶åº”å­˜æ”¾åœ¨ä¸»å­˜ä¸­ï¼Œä»¥ä¾¿å¤„ç†æœºè®¿é—®ã€‚ä¸ºå°½å¯èƒ½åˆ©ç”¨ CPUï¼Œè¦æ±‚ç›´æ¥å­˜å–å†…å­˜çš„é€Ÿåº¦å°½é‡å¿«åˆ°ä¸ CPU å–æŒ‡é€Ÿåº¦ç›¸åŒ¹é…ï¼Œå®¹é‡å¤§åˆ°èƒ½è£…ä¸‹å½“å‰è¿è¡Œçš„ç¨‹åºä¸æ•°æ®ç”±äºä¸»å­˜å®¹é‡å’Œé€Ÿåº¦æœ‰é™ã€‚æ‰€ä»¥æŠŠé‚£äº›ä¸é©¬ä¸Šä½¿ç”¨çš„ç¨‹åºã€æ•°æ®æ”¾åœ¨å¤–éƒ¨å­˜å‚¨å™¨(åˆç§°è¾…å­˜)ä¸­ã€‚å½“ç”¨åˆ°æ—¶å†æŠŠå®ƒä»¬è¯»å…¥ä¸»å­˜ã€‚ ä¸»å­˜å‚¨å™¨çš„åˆ†é…å’Œç®¡ç†ï¼šæŒ‰ç”¨æˆ·è¦æ±‚æŠŠé€‚å½“çš„å­˜å‚¨ç©ºé—´åˆ†é…ç»™ç›¸åº”çš„ä½œä¸šã€‚ä¸€ä¸ªæœ‰æ•ˆçš„å­˜å‚¨åˆ†é…æœºåˆ¶ï¼Œåº”åœ¨ç”¨æˆ·è¯·æ±‚æ—¶èƒ½ä½œå‡ºå¿«é€Ÿçš„å“åº”ï¼Œåˆ†é…ç›¸åº”çš„å­˜å‚¨ç©ºé—´ï¼›åœ¨ç”¨æˆ·ä¸å†ä½¿ç”¨å®ƒæ—¶ï¼Œåº”ç«‹å³å›æ”¶ï¼Œä»¥ä¾›å…¶ä»–ç”¨æˆ·ä½¿ç”¨ã€‚ä¸ºæ­¤ï¼Œè¿™ä¸ªå­˜å‚¨åˆ†é…æœºåˆ¶åº”å…·æœ‰å¦‚ä¸‹åŠŸèƒ½ï¼š(1)è®°ä½æ¯ä¸ªå­˜å‚¨åŒºåŸŸçš„çŠ¶æ€ï¼šå“ªäº›æ˜¯å·²åˆ†é…çš„ï¼Œå“ªäº›æ˜¯å¯ä»¥ç”¨ä½œåˆ†é…çš„ã€‚(2)å®æ–½åˆ†é…ï¼šåœ¨ç³»ç»Ÿç¨‹åºæˆ–ç”¨æˆ·æå‡ºç”³è¯·æ—¶ï¼ŒæŒ‰æ‰€éœ€çš„é‡ç»™äºˆåˆ†é…ï¼›ä¿®æ”¹ç›¸åº”çš„åˆ†é…è®°å½•è¡¨ã€‚(3)æ¥å—ç³»ç»Ÿæˆ–ç”¨æˆ·é‡Šæ”¾çš„å­˜å‚¨åŒºåŸŸï¼šå¹¶ç›¸åº”åœ°ä¿®æ”¹åˆ†é…è®°å½•è¡¨ã€‚ æé«˜ä¸»å­˜å‚¨å™¨çš„åˆ©ç”¨ç‡ï¼šä½¿å¤šé“ç¨‹åºèƒ½åŠ¨æ€åœ°å…±äº«ä¸»å­˜ï¼Œæœ€å¥½èƒ½å…±äº«ä¸»å­˜ä¸­çš„ä¿¡æ¯ â€œæ‰©å……â€ä¸»å­˜å®¹é‡ï¼šè¿™æ˜¯å€ŸåŠ©äºæä¾›è™šæ‹Ÿå­˜å‚¨å™¨æˆ–å…¶å®ƒè‡ªåŠ¨è¦†ç›–æŠ€æœ¯æ¥è¾¾åˆ°çš„ã€‚å³ä¸ºç”¨æˆ·æä¾›æ¯”ä¸»å­˜çš„å­˜å‚¨ç©ºé—´è¿˜å¤§çš„åœ°å€ç©ºé—´ å­˜å‚¨ä¿æŠ¤ï¼šç¡®ä¿å„é“ç”¨æˆ·ä½œä¸šéƒ½åœ¨æ‰€åˆ†é…çš„å­˜å‚¨åŒºå†…æ“ä½œï¼Œäº’ä¸å¹²æ‰°ã€‚å³è¦é˜²æ­¢ä¸€é“ä½œä¸šç”±äºå‘ç”Ÿé”™è¯¯è€ŒæŸå®³å…¶å®ƒä½œä¸šï¼Œç‰¹åˆ«éœ€è¦é˜²æ­¢ç ´åå…¶ä¸­çš„ç³»ç»Ÿç¨‹åºã€‚è¿™ä¸ªé—®é¢˜ä¸èƒ½ç”¨ç‰¹æƒæŒ‡ä»¤æ¥åŠ ä»¥è§£å†³ï¼Œè€Œå¿…é¡»ç”±ç¡¬ä»¶æä¾›ä¿æŠ¤åŠŸèƒ½ï¼Œå¹¶ç”±è½¯ä»¶é…åˆå®ç° å­˜å‚¨åˆ†é…çš„ä¸‰ç§æ–¹å¼å­˜å‚¨åˆ†é…ï¼Œè§£å†³å¤šé“ä½œä¸šä¹‹é—´å…±äº«ä¸»å­˜çš„é—®é¢˜ã€‚ç¡®å®šä»€ä¹ˆæ—¶å€™ï¼Œä»¥ä»€ä¹ˆæ–¹å¼ï¼ŒæŠŠä¸€ä¸ªä½œä¸šçš„å…¨éƒ¨ä¿¡æ¯æˆ–ä½œä¸šè¿è¡Œæ—¶é¦–å…ˆéœ€è¦çš„ä¿¡æ¯åˆ†é…åˆ°ä¸»å­˜ä¸­ï¼Œå¹¶ä½¿è¿™äº›é—®é¢˜å¯¹ç”¨æˆ·æ¥è¯´å°½å¯èƒ½æ˜¯é€æ˜çš„ã€‚ â€œå¯¹ç”¨æˆ·é€æ˜â€ï¼ˆUser Transparencyï¼‰æ˜¯ä¸€ç§è®¡ç®—æœ¯è¯­ï¼Œå®ƒæŒ‡çš„æ˜¯ç”¨æˆ·åœ¨ä½¿ç”¨ç³»ç»Ÿæˆ–æœåŠ¡æ—¶ï¼Œä¸éœ€è¦å…³å¿ƒæˆ–ç†è§£å…¶èƒŒåçš„å¤æ‚å®ç°ç»†èŠ‚ã€‚æ¢å¥è¯è¯´ï¼Œç³»ç»Ÿæˆ–æœåŠ¡çš„å¤æ‚æ€§å¯¹ç”¨æˆ·æ˜¯â€é€æ˜â€çš„ã€‚ è§£å†³å­˜å‚¨åˆ†é…é—®é¢˜çš„ä¸‰ç§æ–¹å¼ï¼š ç›®å‰ï¼Œç»å¤§å¤šæ•°è®¡ç®—æœºç³»ç»Ÿéƒ½é‡‡ç”¨é™æ€æˆ–åŠ¨æ€å­˜å‚¨åˆ†é…æ–¹å¼ ç›´æ¥æŒ‡å®šæ–¹å¼ï¼šç¨‹åºå‘˜åœ¨ç¼–ç¨‹åºæ—¶ï¼Œæˆ–ç¼–è¯‘ç¨‹åº(æ±‡ç¼–ç¨‹åº)å¯¹æºç¨‹åºè¿›è¡Œç¼–è¯‘(æ±‡ç¼–)æ—¶ï¼Œä½¿ç”¨å®é™…å­˜å‚¨åœ°å€ã€‚ åœ¨å¤šé“ç¨‹åºç¯å¢ƒä¸‹ï¼Œåº”ä¿è¯å„ä½œä¸šæ‰€ç”¨çš„åœ°å€äº’ä¸é‡å ã€‚åœ¨å¤šé“ç¨‹åºå‘å±•çš„åˆæœŸï¼Œé€šå¸¸æŠŠå­˜å‚¨ç©ºé—´åˆ’åˆ†æˆè‹¥å¹²ä¸ªå›ºå®šçš„ä¸åŒå¤§å°åˆ†åŒºï¼Œå¹¶å¯¹ä¸åŒçš„ä½œä¸šæŒ‡å®šç›¸åº”çš„åˆ†åŒºã€‚å› æ­¤ï¼Œå¯¹ç¼–ç¨‹äººå‘˜æˆ–å¯¹ç¼–è¯‘ç¨‹åºè€Œè¨€ï¼Œå­˜å‚¨å™¨çš„å¯ç”¨ç©ºé—´æ˜¯å¯çŸ¥çš„ é‡‡ç”¨ç›´æ¥æŒ‡å®šæ–¹å¼åˆ†é…çš„å‰ææ˜¯ï¼šå­˜å‚¨å™¨çš„å¯ç”¨å®¹é‡(ç©ºé—´)å·²ç»ç»™å®šæˆ–è€…å¯ä»¥æŒ‡å®šï¼Œè¿™å¯¹å•ç”¨æˆ·è®¡ç®—æœºç³»ç»Ÿæ˜¯ä¸æˆé—®é¢˜çš„ è¿™ç§åˆ†é…æ–¹å¼çš„å®è´¨æ˜¯ï¼šç”±ç¼–ç¨‹äººå‘˜åœ¨ç¼–å†™ç¨‹åºæ—¶ï¼Œæˆ–ç”±ç¼–è¯‘ç¨‹åºç¼–è¯‘æºç¨‹åºæ—¶ï¼Œå¯¹ä¸€ä¸ªä½œä¸šçš„æ‰€æœ‰ä¿¡æ¯ç¡®å®šåœ¨ä¸»å­˜å­˜å‚¨ç©ºé—´ä¸­çš„ä½ç½®ã€‚å› æ­¤ï¼Œè¿™ç§ç›´æ¥æŒ‡å®šæ–¹å¼çš„å­˜å‚¨åˆ†é…æ–¹æ¡ˆï¼Œä¸ä»…ç”¨æˆ·æ„Ÿåˆ°ä¸ä¾¿ï¼Œè€Œä¸”å­˜å‚¨ç©ºé—´çš„åˆ©ç”¨ä¹Ÿä¸é‚£ä¹ˆæœ‰æ•ˆ é™æ€åˆ†é…æ–¹å¼(Static Allocation)ç”¨æˆ·åœ¨ç¼–ç¨‹æ—¶ï¼Œæˆ–ç”±ç¼–è¯‘ç¨‹åºäº§ç”Ÿçš„ç›®çš„ç¨‹åºï¼Œå‡å¯ä»å…¶åœ°å€ç©ºé—´çš„é›¶åœ°å€å¼€å§‹ï¼›å½“è£…é…ç¨‹åºå¯¹å…¶è¿›è¡Œè¿æ¥è£…å…¥æ—¶æ‰ç¡®å®šå®ƒä»¬åœ¨ä¸»å­˜ä¸­çš„ç›¸åº”ä½ç½®ï¼Œä»è€Œç”Ÿæˆå¯æ‰§è¡Œç¨‹åºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå­˜å‚¨åˆ†é…æ˜¯åœ¨è£…å…¥æ—¶å®ç°çš„ã€‚é™æ€åˆ†é…ç­–ç•¥çš„å­˜å‚¨ç®¡ç†å¾ˆç®€å•ï¼Œä½†åœ¨å¤šé“ç¨‹åºç³»ç»Ÿä¸­ä¸èƒ½æœ‰æ•ˆåœ°å…±äº«å­˜å‚¨å™¨èµ„æºè¿™ç§é™æ€å­˜å‚¨åˆ†é…æ–¹å¼çš„ç‰¹ç‚¹æ˜¯ï¼š åœ¨ä¸€ä¸ªä½œä¸šè£…å…¥æ—¶å¿…é¡»åˆ†é…å…¶è¦æ±‚çš„å…¨éƒ¨å­˜å‚¨é‡ï¼› å¦‚æœæ²¡æœ‰è¶³å¤Ÿçš„å­˜å‚¨ç©ºé—´ï¼Œå°±ä¸èƒ½è£…å…¥è¯¥ä½œä¸šï¼› ä¸€æ—¦ä¸€ä¸ªä½œä¸šè¿›å…¥å†…å­˜åï¼Œåœ¨å…¶é€€å‡ºç³»ç»Ÿä¹‹å‰ï¼Œå®ƒä¸€ç›´å ç”¨ç€åˆ†é…ç»™å®ƒçš„å…¨éƒ¨å­˜å‚¨ç©ºé—´ï¼› ä½œä¸šåœ¨æ•´ä¸ªè¿è¡Œè¿‡ç¨‹ä¸­ä¸èƒ½åœ¨å†…å­˜ä¸­â€œæ¬å®¶â€ã€ä¹Ÿä¸èƒ½å†ç”³è¯·å­˜å‚¨é‡ã€‚ åŠ¨æ€åˆ†é…æ–¹å¼(Dynamic Allocation)ï¼šåŠ¨æ€åˆ†é…æ˜¯ä¸€ç§æ›´åŠ æœ‰æ•ˆçš„ä½¿ç”¨ä¸»å­˜å‚¨å™¨çš„æ–¹æ³•ã€‚è¿™ç§åŠ¨æ€å­˜å‚¨åˆ†é…æ–¹å¼çš„ç‰¹ç‚¹æ˜¯ï¼š ä½œä¸šåœ¨å­˜å‚¨ç©ºé—´ä¸­çš„ä½ç½®ï¼Œä¹Ÿæ˜¯åœ¨å…¶è£…å…¥æ—¶ç¡®å®šçš„ï¼› åœ¨å…¶æ‰§è¡Œè¿‡ç¨‹ä¸­å¯æ ¹æ®éœ€è¦ç”³è¯·é™„åŠ çš„å­˜å‚¨ç©ºé—´ï¼› ä¸€ä¸ªä½œä¸šå·²å ç”¨çš„éƒ¨åˆ†å­˜å‚¨åŒºåŸŸä¸å†éœ€è¦æ—¶ï¼Œå¯ä»¥è¦æ±‚å½’è¿˜ç»™ç³»ç»Ÿã€‚å³ï¼šè¿™ç§å­˜å‚¨åˆ†é…æœºåˆ¶èƒ½æ¥å—ä¸å¯é¢„æµ‹çš„åˆ†é…å’Œé‡Šæ”¾å­˜å‚¨åŒºåŸŸçš„è¯·æ±‚ï¼Œå®ç°ä¸ªåˆ«å­˜å‚¨åŒºåŸŸçš„åˆ†é…å’Œå›æ”¶ï¼› å­˜å‚¨åŒºåŸŸçš„å¤§å°æ˜¯å¯å˜çš„ï¼› å…è®¸ä½œä¸šåœ¨å†…å­˜ä¸­â€œæ¬å®¶â€ã€‚ åŸºæœ¬æ¦‚å¿µé€»è¾‘åœ°å€ï¼ˆç›¸å¯¹åœ°å€ï¼Œè™šåœ°å€ï¼‰ Logical Addressç”¨æˆ·çš„ç¨‹åºç»è¿‡æ±‡ç¼–æˆ–ç¼–è¯‘åå½¢æˆç›®æ ‡ä»£ç ï¼Œç›®æ ‡ä»£ç é€šå¸¸é‡‡ç”¨ç›¸å¯¹åœ°å€çš„å½¢å¼ï¼Œå…¶é¦–åœ°å€ä¸º 0ï¼Œå…¶ä½™æŒ‡ä»¤ä¸­çš„åœ°å€éƒ½ç›¸å¯¹äºé¦–åœ°å€è€Œç¼–å€ã€‚ä¸èƒ½ç”¨é€»è¾‘åœ°å€åœ¨å†…å­˜ä¸­è¯»å–ä¿¡æ¯ç‰©ç†åœ°å€ï¼ˆç»å¯¹åœ°å€ï¼Œå®åœ°å€ï¼‰Physical Addresså†…å­˜ä¸­å­˜å‚¨å•å…ƒçš„åœ°å€ï¼Œå¯ç›´æ¥å¯»å€åç©ºé—´ namespaceæ˜¯ä¸€ç§å°è£…æˆ–ç»„ç»‡ä»£ç çš„æ–¹å¼ï¼Œå®ƒå¯ä»¥å°†ä¸€ç»„æ ‡è¯†ç¬¦ï¼ˆå¦‚å˜é‡ã€å‡½æ•°ã€ç±»ã€æ¨¡å—ç­‰ï¼‰åŒ…å«åœ¨ä¸€ä¸ªåä¸ºå‘½åç©ºé—´çš„èŒƒå›´å†…åœ°å€ç©ºé—´ Address Spaceç¨‹åºç”¨æ¥è®¿é—®ä¿¡æ¯æ‰€ç”¨åœ°å€å•å…ƒçš„é›†åˆï¼Œæ˜¯é€»è¾‘ï¼ˆç›¸å¯¹ï¼‰åœ°å€çš„é›†åˆï¼Œç”±ç¼–è¯‘ç¨‹åºç”Ÿæˆã€‚å­˜å‚¨ç©ºé—´ Storage Spaceä¸»å­˜ä¸­ç‰©ç†å•å…ƒçš„é›†åˆã€‚è¿™äº›å•å…ƒçš„ç¼–å·ç§°ç‰©ç†åœ°å€æˆ–ç»å¯¹åœ°å€ã€‚å­˜å‚¨ç©ºé—´çš„å¤§å°æ˜¯ç”±ä¸»å­˜çš„å®é™…å®¹é‡å†³å®šçš„ã€‚ åœ°å€ç©ºé—´æ˜¯é€»è¾‘åœ°å€çš„é›†åˆï¼›å­˜å‚¨ç©ºé—´æ˜¯ç‰©ç†åœ°å€çš„é›†åˆã€‚ä¸€ä¸ªæ˜¯â€œè™šâ€çš„æ¦‚å¿µï¼Œä¸€ä¸ªæ˜¯â€œå®â€çš„ç‰©ä½“ã€‚ä¸€ä¸ªç¼–è¯‘å¥½çš„ç›®æ ‡ç¨‹åºå­˜åœ¨äºå®ƒè‡ªå·±çš„åœ°å€ç©ºé—´ä¸­ï¼Œå½“è¦å®ƒåœ¨è®¡ç®—æœºä¸Šè¿è¡Œæ—¶ï¼Œæ‰æŠŠå®ƒè£…å…¥å­˜å‚¨ç©ºé—´ã€‚ä¸€ä¸ªä½œä¸šåœ¨ç¼–è¯‘ã€è£…å…¥å‰åå­˜åœ¨äºä¸åŒçš„ç©ºé—´ã€‚ ç¨‹åºçš„è£…å…¥å’Œé“¾æ¥å°†ä¸€ä¸ªç”¨æˆ·æºç¨‹åºå˜ä¸ºä¸€ä¸ªå¯åœ¨å†…å­˜ä¸­æ‰§è¡Œçš„ç¨‹åºï¼Œé€šå¸¸è¦ç»è¿‡ä¸‹åˆ—å‡ æ­¥ï¼š é¢„å¤„ç†ï¼ˆPreprocessingï¼‰ï¼šè¿™æ˜¯ç¼–è¯‘è¿‡ç¨‹çš„ç¬¬ä¸€æ­¥ï¼Œä¸»è¦å¤„ç†æºä»£ç ä¸­çš„é¢„å¤„ç†å™¨æŒ‡ä»¤ã€‚ä¾‹å¦‚ï¼ŒC å’Œ C++è¯­è¨€ä¸­çš„#includeå’Œ#defineç­‰ã€‚é¢„å¤„ç†å™¨å°†å¤„ç†è¿™äº›æŒ‡ä»¤ï¼Œå¦‚æ‰©å±•åŒ…å«æ–‡ä»¶ï¼Œæ›¿æ¢å®å®šä¹‰ç­‰ï¼Œç”Ÿæˆä¸€ä¸ªé¢„å¤„ç†åçš„æºä»£ç æ–‡ä»¶ã€‚ ç¼–è¯‘ï¼ˆCompilationï¼‰ï¼šåœ¨è¿™ä¸ªé˜¶æ®µï¼Œç¼–è¯‘å™¨å°†é¢„å¤„ç†åçš„æºä»£ç è½¬æ¢ä¸ºæ±‡ç¼–è¯­è¨€ã€‚ç¼–è¯‘å™¨åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šè¿›è¡Œè¯æ³•åˆ†æã€è¯­æ³•åˆ†æã€è¯­ä¹‰åˆ†æå’Œä¼˜åŒ–ç­‰æ“ä½œã€‚ç¼–è¯‘å™¨è¿˜ä¼šæ£€æŸ¥æºä»£ç ä¸­çš„é”™è¯¯ï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„é”™è¯¯å’Œè­¦å‘Šä¿¡æ¯ã€‚ æ±‡ç¼–ï¼ˆAssemblyï¼‰ï¼šæ±‡ç¼–é˜¶æ®µå°†ç¼–è¯‘é˜¶æ®µç”Ÿæˆçš„æ±‡ç¼–ä»£ç è½¬æ¢ä¸ºæœºå™¨è¯­è¨€ä»£ç ï¼Œä¹Ÿå°±æ˜¯ç›®æ ‡ä»£ç ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯ç”±æ±‡ç¼–å™¨å®Œæˆçš„ã€‚æ¯ä¸€æ¡æ±‡ç¼–è¯­è¨€æŒ‡ä»¤é€šå¸¸ä¼šè¢«è½¬æ¢ä¸ºä¸€æ¡æœºå™¨è¯­è¨€æŒ‡ä»¤ã€‚ é“¾æ¥ï¼ˆLinkingï¼‰ï¼šé“¾æ¥é˜¶æ®µæ˜¯å°†æ‰€æœ‰çš„ç›®æ ‡ä»£ç å’Œå¿…è¦çš„åº“å‡½æ•°é“¾æ¥åœ¨ä¸€èµ·ï¼Œç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚é“¾æ¥å™¨ä¼šå¤„ç†æºä»£ç ä¸­çš„å¤–éƒ¨ç¬¦å·å¼•ç”¨ï¼Œå°†å®ƒä»¬ä¸æ­£ç¡®çš„åœ°å€æˆ–è€…ç¬¦å·ç»‘å®šåœ¨ä¸€èµ·ã€‚ è£…å…¥ï¼ˆLoadingï¼‰ï¼šå½“ç¨‹åºè¿è¡Œæ—¶ï¼ŒåŠ è½½å™¨ï¼ˆLoaderï¼‰çš„ä»»åŠ¡æ˜¯å°†å¯æ‰§è¡Œæ–‡ä»¶ä»ç¡¬ç›˜åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç„¶åå¼€å§‹æ‰§è¡Œã€‚åŠ è½½å™¨è¿˜è´Ÿè´£è§£æç¨‹åºå¯¹åŠ¨æ€åº“çš„ä¾èµ–ï¼Œå¹¶å°†è¿™äº›åº“åŠ è½½åˆ°å†…å­˜ä¸­ã€‚ ç¨‹åºçš„è£…å…¥æ ¹æ®å­˜å‚¨ç©ºé—´çš„åˆ†é…æ–¹å¼ï¼Œå°†ä¸€ä¸ªè£…å…¥æ¨¡å—è£…å…¥å†…å­˜æ—¶ï¼Œå¯é‡‡ç”¨ä¸‰ç§æ–¹å¼ï¼š ç»å¯¹è£…å…¥æ–¹å¼Absolute Loading Modeï¼šåœ¨ç¼–è¯‘æ—¶ï¼Œå¦‚æœçŸ¥é“ç¨‹åºå°†é©»ç•™åœ¨å†…å­˜çš„å…·ä½“ä½ç½®ï¼Œé‚£ä¹ˆç¼–è¯‘ç¨‹åºå°†äº§ç”Ÿ**å®é™…å­˜å‚¨åœ°å€(ç»å¯¹åœ°å€)**çš„ç›®æ ‡ä»£ç ã€‚è£…å…¥ç¨‹åºæŒ‰ç…§è£…å…¥æ¨¡å—ä¸­çš„åœ°å€ï¼Œå°†ç¨‹åºå’Œæ•°æ®è£…å…¥å†…å­˜ã€‚ è£…å…¥æ¨¡å—è¢«è£…å…¥å†…å­˜åï¼Œç”±äºç¨‹åºä¸­çš„é€»è¾‘åœ°å€ä¸å®é™…å†…å­˜åœ°å€å®Œå…¨ç›¸åŒï¼Œæ•…ä¸éœ€å¯¹ç¨‹åºå’Œæ•°æ®çš„åœ°å€è¿›è¡Œä¿®æ”¹ã€‚ é€šå¸¸åœ¨ç¨‹åºä¸­é‡‡ç”¨ç¬¦å·åœ°å€ï¼Œç„¶ååœ¨ç¼–è¯‘æˆ–æ±‡ç¼–æ—¶ï¼Œå†å°†è¿™äº›ç¬¦å·åœ°å€è½¬æ¢ä¸ºç»å¯¹åœ°å€ã€‚ é™æ€é‡å®šä½è£…å…¥æ–¹å¼Static Relocation Loading Modeï¼šåœ°å€å˜æ¢æ˜¯åœ¨è£…å…¥å†…å­˜æ—¶ä¸€æ¬¡å®Œæˆçš„ï¼Œä¸”ä»¥åä¸èƒ½ç§»åŠ¨ã€‚ä¸€èˆ¬æƒ…å†µä¸‹,ç‰©ç†åœ°å€=ç›¸å¯¹åœ°å€+å†…å­˜ä¸­çš„èµ·å§‹åœ°å€é€‚ç”¨äºå¤šé“ç¨‹åºç¯å¢ƒï¼Œå¯ä»¥å°†è£…å…¥æ¨¡å—è£…å…¥åˆ°å†…å­˜ä¸­ä»»ä½•å…è®¸çš„ä½ç½®ã€‚ ä¼˜ç‚¹ï¼šä¸éœ€ç¡¬ä»¶æ”¯æŒï¼Œå¯ä»¥è£…å…¥æœ‰é™å¤šé“ç¨‹åºã€‚ ç¼ºç‚¹ï¼šä¸€ä¸ªç¨‹åºé€šå¸¸éœ€è¦å ç”¨è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œç¨‹åºè£…å…¥å†…å­˜åä¸èƒ½ç§»åŠ¨ï¼Œä¸æ˜“å®ç°å…±äº«ã€‚ åŠ¨æ€é‡å®šä½è£…å…¥æ–¹å¼/åŠ¨æ€è¿è¡Œæ—¶è£…å…¥æ–¹å¼Dynamic Run-time Loadingè£…å…¥ç¨‹åºå°†è£…å…¥æ¨¡å—è£…å…¥å†…å­˜åï¼Œå¹¶ä¸ç«‹å³æŠŠè£…å…¥æ¨¡å—ä¸­çš„ç›¸å¯¹åœ°å€è½¬æ¢ä¸ºç»å¯¹åœ°å€ï¼Œè€Œæ˜¯æŠŠåœ°å€è½¬æ¢æ¨è¿Ÿåˆ°ç¨‹åºæ‰§è¡Œæ—¶è¿›è¡Œã€‚åœ¨ç¡¬ä»¶åœ°å€å˜æ¢æœºæ„çš„æ”¯æŒä¸‹ï¼Œéšç€å¯¹æ¯æ¡æŒ‡ä»¤æˆ–æ•°æ®çš„è®¿é—®è‡ªåŠ¨è¿›è¡Œåœ°å€å˜æ¢ï¼Œæ•…ç§°ä¸ºåŠ¨æ€é‡å®šä½æœ€ç®€å•çš„åŠæ³•æ˜¯åˆ©ç”¨ä¸€ä¸ªé‡å®šä½å¯„å­˜å™¨(RR)ã€‚è¯¥å¯„å­˜å™¨çš„å€¼æ˜¯ç”±è¿›ç¨‹è°ƒåº¦ç¨‹åºæ ¹æ®ä½œä¸šåˆ†é…åˆ°çš„å­˜å‚¨ç©ºé—´èµ·å§‹åœ°å€æ¥è®¾å®šçš„ã€‚åœ¨å…·æœ‰è¿™ç§åœ°å€å˜æ¢æœºæ„çš„è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œå½“æ‰§è¡Œä½œä¸šæ—¶ï¼Œä¸æ˜¯æ ¹æ® CPU ç»™å‡ºçš„æœ‰æ•ˆåœ°å€å»è®¿é—®ä¸»å­˜ï¼Œè€Œæ˜¯å°†æœ‰æ•ˆåœ°å€ä¸é‡å®šä½å¯„å­˜å™¨ä¸­çš„å†…å®¹ç›¸åŠ åå¾—åˆ°çš„åœ°å€ä½œä¸ºè®¿é—®ä¸»å­˜çš„åœ°å€é‡‡ç”¨åŠ¨æ€é‡å®šä½æŠ€æœ¯åï¼Œç¨‹åºä¸­æ‰€æœ‰æŒ‡ä»¤å’Œæ•°æ®çš„å®é™…åœ°å€æ˜¯åœ¨è¿è¡Œè¿‡ç¨‹ä¸­æœ€åè®¿é—®çš„æ—¶åˆ»ç¡®å®šçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä½œä¸šè¿è¡Œè¿‡ç¨‹ä¸­ä¸´æ—¶ç”³è¯·åˆ†é…é™„åŠ çš„å­˜å‚¨åŒºåŸŸæˆ–é‡Šæ”¾å·²å ç”¨çš„éƒ¨åˆ†å­˜å‚¨ç©ºé—´æ˜¯å…è®¸çš„ã€‚ ä¸»è¦ä¼˜ç‚¹â‘  ä¸»å­˜çš„ä½¿ç”¨æ›´åŠ çµæ´»æœ‰æ•ˆã€‚è¿™é‡Œï¼Œä¸€ä¸ªç”¨æˆ·çš„ä½œä¸šä¸ä¸€å®šè¦åˆ†é…åœ¨ä¸€ä¸ªè¿ç»­çš„å­˜å‚¨åŒºï¼Œå› è€Œå¯ä»¥ä½¿ç”¨è¾ƒå°çš„åˆ†é…å•ä½ã€‚è€Œä¸”ï¼Œåœ¨ä½œä¸šå¼€å§‹ä¹‹å‰ä¹Ÿä¸ä¸€å®šæŠŠå®ƒçš„åœ°å€ç©ºé—´å…¨éƒ¨è£…å…¥ä¸»å­˜ï¼Œè€Œå¯ä»¥åœ¨ä½œä¸šæ‰§è¡ŒæœŸé—´å“åº”è¯·æ±‚åŠ¨æ€åœ°è¿›è¡Œåˆ†é…ã€‚â‘¡ å‡ ä¸ªä½œä¸šå…±äº«ä¸€ç¨‹åºæ®µçš„å•ä¸ªå‰¯æœ¬æ¯”è¾ƒå®¹æ˜“ã€‚â‘¢ æœ‰å¯èƒ½å‘ç”¨æˆ·æä¾›ä¸€ä¸ªæ¯”ä¸»å­˜çš„å­˜å‚¨ç©ºé—´å¤§å¾—å¤šçš„åœ°å€ç©ºé—´ã€‚å› è€Œæ— éœ€ç”¨æˆ·æ¥è€ƒè™‘è¦†ç›–ç»“æ„ï¼Œè€Œç”±ç³»ç»Ÿæ¥è´Ÿè´£å…¨éƒ¨çš„å­˜å‚¨ç®¡ç†ã€‚ ä¸»è¦ç¼ºç‚¹â‘  éœ€è¦é™„åŠ ç¡¬ä»¶æ”¯æŒï¼›â‘¡ å®ç°å­˜å‚¨å™¨ç®¡ç†çš„è½¯ä»¶æ¯”è¾ƒå¤æ‚ã€‚ ç¨‹åºçš„é“¾æ¥é“¾æ¥ç¨‹åºçš„åŠŸèƒ½ï¼Œæ˜¯å°†ç»è¿‡ç¼–è¯‘åæ‰€å¾—åˆ°çš„ä¸€ç»„ç›®æ ‡æ¨¡å—ä»¥åŠå®ƒä»¬æ‰€éœ€è¦çš„åº“å‡½æ•°ï¼Œè£…é…æˆä¸€ä¸ªå®Œæ•´çš„è£…å…¥æ¨¡å—ã€‚è¿æ¥ç¨‹åºæŒ‰å„ä¸ªæ¨¡å—çš„ç›¸å¯¹åœ°å€ä¾æ¬¡æ„æˆç»Ÿä¸€çš„ä»0å·å•å…ƒå¼€å§‹ç¼–å€çš„é€»è¾‘åœ°å€ç©ºé—´æ ¹æ®é“¾æ¥æ—¶é—´çš„ä¸åŒï¼Œå¯æŠŠé“¾æ¥åˆ†æˆå¦‚ä¸‹ä¸‰ç§ï¼š é™æ€é“¾æ¥ Static Linkingåœ¨ç¨‹åºè¿è¡Œä¹‹å‰ï¼Œå…ˆå°†å„ç›®æ ‡æ¨¡å—åŠå®ƒä»¬æ‰€éœ€çš„åº“å‡½æ•°ï¼Œé“¾æ¥æˆä¸€ä¸ªå®Œæ•´çš„è£…å…¥æ¨¡å—ï¼ˆåˆç§°æ‰§è¡Œæ¨¡å—ï¼‰ï¼Œä»¥åä¸å†æ‹†å¼€ã€‚å°†å‡ ä¸ªç›®æ ‡é“¾æ¥è£…é…æˆä¸€ä¸ªè£…å…¥æ¨¡å—æ—¶ï¼Œéœ€è§£å†³ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š å°†ç›¸å¯¹åœ°å€è¿›è¡Œä¿®æ”¹ã€‚å³å°†é™¤ç¬¬ä¸€ä¸ªæ¨¡å—å¤–çš„ç›¸å¯¹åœ°å€ä¿®æ”¹æˆè£…å…¥æ¨¡å—ä¸­çš„ç›¸åº”çš„ç›¸å¯¹åœ°å€ å˜æ¢å¤–éƒ¨è°ƒç”¨ç¬¦å·ã€‚å³å°†æ¯ä¸ªæ¨¡å—ä¸­æ‰€ç”¨çš„å¤–éƒ¨è°ƒç”¨ç¬¦å·ï¼Œéƒ½å˜æ¢ä¸ºç›¸å¯¹åœ°å€ã€‚è¿™ç§å…ˆè¿›è¡Œé“¾æ¥æ‰€å½¢æˆçš„ä¸€ä¸ªå®Œæ•´çš„è£…å…¥æ¨¡å—ï¼Œåˆç§°ä¸ºå¯æ‰§è¡Œæ–‡ä»¶Prosï¼šé€‚ç”¨èŒƒå›´å¹¿ï¼Œä¸å¿…æ‹…å¿ƒç”¨æˆ·æœºå™¨ç¼ºå°‘æŸä¸ªåº“å‡½æ•°Consï¼šä¿®æ”¹æˆ–æ›´æ–°æŸä¸ªç›®æ ‡æ¨¡å—æ—¶ï¼Œéœ€è¦é‡æ–°æ‰“å¼€è£…å…¥æ¨¡å—ï¼Œæ•ˆç‡ä½ä¸”å¾ˆå¤šæ—¶å€™ä¸å¯è¡Œï¼›é™æ€é“¾æ¥çš„æ¯ä¸ªæ¨¡å—éƒ½è¦æœ‰ç›®æ ‡æ¨¡å—çš„å‰¯æœ¬ï¼Œæ— æ³•å®ç°å…±äº«ï¼Œæµªè´¹ç©ºé—´ è£…å…¥æ—¶åŠ¨æ€é“¾æ¥Load-Time Dynamic Linkingç”¨æˆ·æºç¨‹åºç»ç¼–è¯‘åæ‰€å¾—åˆ°çš„ç›®æ ‡æ¨¡å—ï¼Œæ˜¯åœ¨è£…å…¥å†…å­˜æ—¶ï¼Œè¾¹è£…å…¥è¾¹é“¾æ¥çš„ã€‚å³åœ¨è£…å…¥ä¸€ä¸ªç›®æ ‡æ¨¡å—æ—¶ï¼Œè‹¥å‘ç”Ÿä¸€ä¸ªå¤–éƒ¨æ¨¡å—è°ƒç”¨ï¼Œå°†å¼•èµ·è£…å…¥ç¨‹åºå»æ‰¾å‡ºç›¸åº”çš„å¤–éƒ¨ç›®æ ‡æ¨¡å—ï¼Œå¹¶å°†å…¶è£…å…¥å†…å­˜ã€‚ Prosï¼šä¾¿äºè½¯ä»¶ç‰ˆæœ¬çš„ä¿®æ”¹å’Œæ›´æ–°,åªéœ€ä¿®æ”¹å„ä¸ªç›®æ ‡æ¨¡å—ï¼Œä¸å¿…å°†è£…å…¥æ¨¡å—æ‹†å¼€ï¼Œéå¸¸æ–¹ä¾¿;ä¾¿äºå®ç°ç›®æ ‡æ¨¡å—å…±äº«ã€‚å³å¯ä»¥å°†ä¸€ä¸ªç›®æ ‡æ¨¡å—é“¾æ¥åˆ°å‡ ä¸ªåº”ç”¨æ¨¡å—ä¸­ï¼Œä»è€Œå®ç°å¤šä¸ªåº”ç”¨ç¨‹åºå¯¹è¯¥æ¨¡å—çš„å…±äº«ã€‚ è¿è¡Œæ—¶åŠ¨æ€é“¾æ¥(Run-Time Dynamic Linking)ç›®å‰æœ€å¸¸ä½¿ç”¨çš„é“¾æ¥æ–¹å¼,é‡‡ç”¨è£…å…¥æ—¶åŠ¨æ€é“¾æ¥æ–¹å¼ï¼Œè™½ç„¶å¯å°†ä¸€ä¸ªè£…å…¥æ¨¡å—è£…å…¥åˆ°å†…å­˜çš„ä»»ä½•åœ°æ–¹ï¼Œä½†è£…å…¥æ¨¡å—çš„ç»“æ„æ˜¯é™æ€çš„ï¼Œè¡¨ç°åœ¨ï¼š è¿›ç¨‹ï¼ˆç¨‹åºï¼‰åœ¨æ•´ä¸ªæ‰§è¡ŒæœŸé—´ï¼Œè£…å…¥æ¨¡å—æ˜¯ä¸æ”¹å˜çš„ï¼› æ¯æ¬¡è¿è¡Œæ—¶çš„è£…å…¥æ¨¡å—æ˜¯ç›¸åŒçš„ã€‚å¹¶ä¸”äº‹å…ˆæ— æ³•çŸ¥é“æœ¬æ¬¡è¦è¿è¡Œå“ªäº›æ¨¡å—ï¼Œåªèƒ½å°†æ‰€æœ‰å¯èƒ½è¦è¿è¡Œçš„æ¨¡å—åœ¨è£…å…¥æ—¶å…¨éƒ¨é“¾æ¥åœ¨ä¸€èµ·ï¼Œè€Œå®é™…ä¸Šå¾€å¾€æœ‰äº›ç›®æ ‡æ¨¡å—æ ¹æœ¬ä¸ä¼šè¿è¡Œã€‚é‡‡ç”¨è¿è¡Œæ—¶åŠ¨æ€é“¾æ¥å¯å°†æŸäº›ç›®æ ‡æ¨¡å—çš„é“¾æ¥æ¨è¿Ÿåˆ°æ‰§è¡Œæ—¶æ‰è¿›è¡Œï¼Œå³åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè‹¥å‘ç°ä¸€ä¸ªè¢«è°ƒç”¨æ¨¡å—å°šæœªè£…å…¥å†…å­˜æ—¶ï¼Œç”± OS å»æ‰¾åˆ°è¯¥æ¨¡å—ï¼Œå°†å®ƒè£…å…¥å†…å­˜ï¼Œå¹¶é“¾æ¥åˆ°è°ƒç”¨æ¨¡å—ä¸Šã€‚ è¿è¡Œæ—¶åŠ¨æ€é“¾æ¥çš„å·¥ä½œåŸç†å¦‚ä¸‹ï¼š åŠ è½½é˜¶æ®µï¼šå½“ç¨‹åºå¯åŠ¨æ—¶ï¼ŒåŠ¨æ€é“¾æ¥å™¨ï¼ˆåœ¨ Unix-like ç³»ç»Ÿä¸­é€šå¸¸æ˜¯ ld.so æˆ– ld-linux.soï¼Œåœ¨ Windows ç³»ç»Ÿä¸­æ˜¯ kernel32.dllï¼‰ä¼šåŠ è½½ç¨‹åºéœ€è¦çš„åŠ¨æ€é“¾æ¥åº“ï¼ˆDLLï¼‰æˆ–å…±äº«å¯¹è±¡ï¼ˆSOï¼‰æ–‡ä»¶ã€‚è¿™äº›åº“æ–‡ä»¶åŒ…å«ç¨‹åºéœ€è¦çš„å‡½æ•°å’Œæ•°æ®ã€‚ é“¾æ¥é˜¶æ®µï¼šåœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œå½“ç¨‹åºç¬¬ä¸€æ¬¡è°ƒç”¨æŸä¸ªåº“å‡½æ•°æ—¶ï¼ŒåŠ¨æ€é“¾æ¥å™¨ä¼šæŸ¥æ‰¾è¿™ä¸ªå‡½æ•°åœ¨å†…å­˜ä¸­çš„å®é™…åœ°å€ï¼Œå¹¶å°†è¿™ä¸ªåœ°å€å†™å…¥ç¨‹åºçš„å…¨å±€åç§»è¡¨ï¼ˆGOTï¼‰æˆ–ç¨‹åºæŸ¥æ‰¾è¡¨ï¼ˆPLTï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºâ€œè§£æâ€ã€‚ è¿è¡Œé˜¶æ®µï¼šä¸€æ—¦å‡½æ•°åœ°å€è¢«è§£æï¼Œç¨‹åºå°±å¯ä»¥ç›´æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œè€Œä¸éœ€è¦å†æ¬¡é€šè¿‡åŠ¨æ€é“¾æ¥å™¨ã€‚å¦‚æœç¨‹åºå†æ¬¡è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå®ƒä¼šç›´æ¥ä» GOT æˆ– PLT ä¸­è·å–å‡½æ•°çš„åœ°å€ã€‚ è¿è¡Œæ—¶åŠ¨æ€é“¾æ¥çš„ä¼˜ç‚¹åŒ…æ‹¬ï¼š ä¸»è¦ä¼˜ç‚¹:å‡¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æœªè¢«ç”¨åˆ°çš„ç›®æ ‡æ¨¡å—ï¼Œéƒ½ä¸ä¼šè¢«è°ƒå…¥å†…å­˜å’Œè¢«é“¾æ¥åˆ°è£…å…¥æ¨¡å—ä¸Šï¼Œè¿™æ ·ä¸ä»…å¯åŠ å¿«ç¨‹åºçš„è£…å…¥è¿‡ç¨‹ï¼Œè€Œä¸”å¯èŠ‚çœå¤§é‡çš„å†…å­˜ç©ºé—´ã€‚ èŠ‚çœå†…å­˜ï¼šå› ä¸ºå¤šä¸ªç¨‹åºå¯ä»¥å…±äº«åŒä¸€ä¸ªåº“çš„å•ä¸ªå‰¯æœ¬ã€‚ æ¨¡å—åŒ–ï¼šç¨‹åºå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ è½½å’Œå¸è½½æ¨¡å—ï¼Œè¿™ä½¿å¾—ç¨‹åºæ›´åŠ çµæ´»å’Œå¯æ‰©å±•ã€‚ ç‰ˆæœ¬æ§åˆ¶ï¼šå¯ä»¥åœ¨ä¸é‡æ–°ç¼–è¯‘ç¨‹åºçš„æƒ…å†µä¸‹æ›´æ–°åº“ã€‚ è¿è¡Œæ—¶åŠ¨æ€é“¾æ¥çš„ç¼ºç‚¹åŒ…æ‹¬ï¼š æ€§èƒ½å¼€é”€ï¼šåŠ¨æ€é“¾æ¥å’Œè§£æéœ€è¦æ—¶é—´ï¼Œå°¤å…¶æ˜¯åœ¨ç¨‹åºç¬¬ä¸€æ¬¡è°ƒç”¨åº“å‡½æ•°æ—¶ã€‚ å…¼å®¹æ€§é—®é¢˜ï¼šå¦‚æœåº“çš„æ–°ç‰ˆæœ¬å’Œæ—§ç‰ˆæœ¬ä¸å…¼å®¹ï¼Œé‚£ä¹ˆä½¿ç”¨è¿™ä¸ªåº“çš„ç¨‹åºå¯èƒ½ä¼šå‡ºé”™ã€‚ è¿ç»­åˆ†é…å­˜å‚¨ç®¡ç†æ–¹å¼è¿ç»­åˆ†é…æŒ‡ä¸ºç”¨æˆ·ç¨‹åºåˆ†é…ä¸€ä¸ªè¿ç»­çš„å†…å­˜ç©ºé—´ã€‚ç¨‹åºç©ºé—´æœ¬æ¥å°±æ˜¯è¿ç»­çš„,ç”¨è¿ç»­çš„å†…å­˜è£…å…¥è¿ç»­çš„ç¨‹åºï¼Œå‡å°‘ç®¡ç†å·¥ä½œçš„éš¾åº¦è¿ç»­åˆ†é…æœ‰ä¸‰ç§æ–¹å¼ï¼š å•ä¸€è¿ç»­åˆ†é…æ–¹å¼å•ç”¨æˆ·ç³»ç»Ÿåœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œåªæœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨å†…å­˜ï¼Œæ•…å†…å­˜åˆ†é…ç®¡ç†ååˆ†ç®€å•ï¼Œå†…å­˜åˆ©ç”¨ç‡ä½ã€‚å†…å­˜åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼Œä¸€ä¸ªä¾›æ“ä½œç³»ç»Ÿä½¿ç”¨ï¼Œä¸€ä¸ªä¾›ç”¨æˆ·ä½¿ç”¨. åˆ†åŒºå¼åˆ†é…æ–¹å¼ç³»ç»ŸæŠŠå†…å­˜ç”¨æˆ·åŒºåˆ’åˆ†ä¸ºè‹¥å¹²åˆ†åŒºï¼Œåˆ†åŒºå¤§å°å¯ä»¥ç›¸ç­‰ï¼Œä¹Ÿå¯ä»¥ä¸ç­‰ã€‚ä¸€ä¸ªè¿›ç¨‹å æ®ä¸€ä¸ªåˆ†åŒºã€‚è¿™æ˜¯æ—©æœŸç”¨äºå¤šé“ç¨‹åºçš„ä¸€ç§è¾ƒç®€å•çš„å­˜å‚¨ç®¡ç†æ–¹å¼ã€‚å®ƒåˆå¯ä»¥åˆ†ä¸ºï¼š å›ºå®šåˆ†åŒº åŠ¨æ€ï¼ˆå¯å˜ï¼‰åˆ†åŒº å¯é‡å®šä½åˆ†åŒºåˆ†é…(æ±¤å­ç€›) å•ä¸€è¿ç»­åˆ†é…å†…å­˜ä¸­ä»…é©»ç•™ä¸€é“ç”¨æˆ·ç¨‹åºï¼Œæ•´ä¸ªç”¨æˆ·åŒºä¸ºä¸€ä¸ªç”¨æˆ·ç‹¬å ã€‚å†…å­˜åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼šç³»ç»ŸåŒºï¼Œç”¨æˆ·åŒºã€‚åº”ç”¨ç¨‹åºè£…å…¥åˆ°ç”¨æˆ·åŒºï¼Œå¯ä½¿ç”¨ç”¨æˆ·åŒºå…¨éƒ¨ç©ºé—´ã€‚æœ€ç®€å•ï¼Œé€‚ç”¨äºå•ç”¨æˆ·ã€å•ä»»åŠ¡çš„ OSã€‚ ä¼˜ç‚¹ï¼šæ˜“äºç®¡ç†ã€‚ ç¼ºç‚¹ï¼šå¯¹è¦æ±‚å†…å­˜ç©ºé—´å°‘çš„ç¨‹åºï¼Œé€ æˆå†…å­˜æµªè´¹ï¼›ç¨‹åºå…¨éƒ¨è£…å…¥ï¼Œå¾ˆå°‘ä½¿ç”¨çš„ç¨‹åºéƒ¨åˆ†ä¹Ÿå ç”¨å†…å­˜ã€‚ä¾‹å¦‚ï¼šDOS 2.0 ä»¥ä¸‹çš„ DOS æ“ä½œç³»ç»Ÿé‡‡ç”¨å•ä¸€è¿ç»­åŒºåŸŸä¸»å­˜ç®¡ç†æ–¹æ³•ã€‚ ğŸŒŸ å†…å­˜ç¢ç‰‡å†…éƒ¨ç¢ç‰‡ Internal Fragmentï¼šåˆ†é…ç»™ç”¨æˆ·ä½†ç”¨æˆ·æ²¡æœ‰ä½¿ç”¨çš„ç©ºé—´ï¼Œå³å¤šåˆ†é…çš„ç©ºé—´ã€‚åˆ†é…ç»™è¿›ç¨‹çš„å†…å­˜ç©ºé—´æ¯”è¿›ç¨‹æ‰€éœ€çš„å†…å­˜ç©ºé—´å¤§ï¼Œä½†æœªä½¿ç”¨çš„éƒ¨åˆ†ä¸èƒ½å†åˆ†é…ç»™å…¶ä»–è¿›ç¨‹ï¼Œé€ æˆå†…éƒ¨ç¢ç‰‡ã€‚å¤–éƒ¨ç¢ç‰‡ External Fragmentï¼šæ²¡æœ‰åˆ†é…ä½†æ— æ³•åˆ†é…çš„ç©ºé—´ï¼Œå³å¤ªå°è€Œæ— æ³•åˆ†é…çš„ç©ºé—´ã€‚ç›¸é‚»å·²åˆ†é…å†…å­˜ç©ºé—´çš„ç©ºé—²åŒºåŸŸå¤ªå°ï¼Œä¸èƒ½åˆ†é…ç»™éœ€è¦çš„è¿›ç¨‹ï¼Œé€ æˆå¤–éƒ¨ç¢ç‰‡ã€‚ å›ºå®šåˆ†åŒºåˆ†é…å›ºå®šåˆ†åŒºåˆ†é…æ€æƒ³ï¼šå°†å†…å­˜ç”¨æˆ·ç©ºé—´åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªå›ºå®šå¤§å°çš„åŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸç§°ä¸ºä¸€ä¸ªåˆ†åŒºï¼ˆregionï¼‰ï¼Œåœ¨æ¯ä¸ªåˆ†åŒºä¸­åªè£…å…¥ä¸€é“ä½œä¸š ï¼Œä»è€Œæ”¯æŒå¤šé“ç¨‹åºå¹¶å‘è®¾è®¡ã€‚ç”±äºè¿™äº›å­˜å‚¨åŒºåŸŸæ˜¯åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶åˆ’å®šçš„ï¼Œåœ¨ç”¨æˆ·ä½œä¸šè£…å…¥åŠè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå…¶åŒºåŸŸçš„å¤§å°å’Œè¾¹ç•Œæ˜¯ä¸èƒ½æ”¹å˜çš„ã€‚å›ºå®šå¼åˆ†åŒºçš„åˆ’åˆ†æ–¹æ³•æœ‰ä¸¤ç§ï¼š(1)åˆ†åŒºå¤§å°ç›¸ç­‰(2)åˆ†åŒºå¤§å°ä¸ç­‰ä¸ºäº†å®ç°è¿™ç§å›ºå®šåˆ†åŒºçš„åˆ†é…ï¼Œç³»ç»Ÿéœ€è¦å»ºç«‹ä¸€å¼ åˆ†åŒºè¯´æ˜è¡¨ã€‚è¿™ä¸ªåˆ†åŒºè¯´æ˜è¡¨æŒ‡å‡ºå¯ç”¨äºåˆ†é…çš„åˆ†åŒºæ•°ä»¥åŠæ¯ä¸ªåŒºçš„å¤§å°ã€èµ·å§‹åœ°å€åŠçŠ¶æ€(æ˜¯å¦å·²è¢«åˆ†é…)å†…å­˜åˆ†é…è¿‡ç¨‹å½“æœ‰ä½œä¸šè¦è£…å…¥å†…å­˜æ—¶ï¼Œå†…å­˜åˆ†é…ç¨‹åºæ£€ç´¢åˆ†åŒºè¯´æ˜è¡¨ï¼Œä»ä¸­æ‰¾å‡ºä¸€ä¸ªå°šæœªä½¿ç”¨çš„æ»¡è¶³å¤§å°è¦æ±‚çš„åˆ†åŒºåˆ†é…ç»™è¯¥ä½œä¸šï¼Œç„¶åä¿®æ”¹åˆ†åŒºçš„çŠ¶æ€ï¼›å¦‚æœæ‰¾ä¸åˆ°åˆé€‚çš„åˆ†åŒºå°±æ‹’ç»ä¸ºè¯¥ä½œä¸šåˆ†é…å†…å­˜ã€‚ å†…å­˜ä¸­å·²åˆ†é…ç»™ç”¨æˆ·ä½†æœªè¢«åˆ©ç”¨çš„åŒºåŸŸç§°ä¸º â€œå†…é›¶å¤´â€ï¼ˆå†…éƒ¨ç¢ç‰‡ï¼Œå†…ç¢ç‰‡ï¼‰;å›ºå®šåˆ†åŒºåˆ†é…æœ‰å†…é›¶å¤´äº§ç”Ÿ ä¼˜ç‚¹ï¼šæ˜“äºå®ç°ï¼Œå¼€é”€å° ç¼ºç‚¹ï¼šå†…ç¢ç‰‡é€ æˆæµªè´¹ï¼›åˆ†åŒºæ€»æ•°å›ºå®šï¼Œé™åˆ¶äº†å¹¶å‘æ‰§è¡Œçš„ç¨‹åºæ•°ç›®ï¼›å­˜å‚¨ç©ºé—´çš„åˆ©ç”¨ç‡å¤ªä½ã€‚ç°åœ¨çš„æ“ä½œç³»ç»Ÿå‡ ä¹ä¸ç”¨å®ƒäº†ã€‚ åŠ¨æ€åˆ†åŒºåˆ†é…åŠ¨æ€åˆ†åŒºåˆ†é…æ˜¯æŒ‡æ ¹æ®è¿›ç¨‹çš„å®é™…éœ€è¦ï¼ŒåŠ¨æ€åœ°ä¸ºä¹‹åˆ†é…è¿ç»­çš„å†…å­˜ç©ºé—´ã€‚å³åˆ†åŒºçš„è¾¹ç•Œå¯ä»¥ç§»åŠ¨ï¼Œåˆ†åŒºçš„å¤§å°æ˜¯å¯å˜çš„ã€‚åŠ¨æ€åˆ†åŒºåˆæœ‰ä¸¤ç§ä¸åŒé€‰æ‹©ï¼Œä¸€ç§æ˜¯åˆ†åŒºçš„æ•°ç›®å›ºå®šå¤§å°å¯å˜ï¼Œè€Œå¦ä¸€ç§åˆ™å…è®¸åˆ†åŒºçš„æ•°ç›®å’Œå¤§å°éƒ½å¯å˜ã€‚ ä¸ºäº†è¯´æ˜å®ƒä»¬ä¹‹é—´çš„é‡è¦å·®å¼‚ï¼Œæˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªå…·æœ‰ 256K å­—èŠ‚å­˜å‚¨å™¨çš„ç³»ç»Ÿã€‚ ç¬¬ä¸€ç§æ–¹æ¡ˆ(åˆ†åŒºæ•°ç›®å›ºå®š)ï¼šå‡å®šç³»ç»Ÿåˆå§‹åŒ–æ—¶è§„å®šæŠŠå­˜å‚¨ç©ºé—´åˆ’åˆ†ä¸º 8 ä¸ªåˆ†åŒº;åœ¨ä¸‹å›¾(a)ä¸­ç”¨é—®å·(?)æ¥è¡¨ç¤ºå®ƒä»¬ã€‚åœ¨ç³»ç»Ÿè¿è¡Œä¸€æ®µæ—¶é—´åï¼Œå·²æœ‰ 192K å­˜å‚¨ç©ºé—´åˆ†é…ç»™ 7 ä¸ªä½œä¸šï¼Œå‰©ä¸‹ 64K è¿˜æœªåˆ†é…ï¼Œå¦‚ä¸‹å›¾(b)æ‰€ç¤ºã€‚ç°åœ¨ï¼Œåˆæœ‰ä¸¤ä¸ªä½œä¸š P å’Œ Q å‡†å¤‡è°ƒå…¥ï¼Œå®ƒä»¬æ¯ä¸ªéœ€è¦ 32K å­˜å‚¨ç©ºé—´ã€‚æ˜¾ç„¶ï¼Œæˆ‘ä»¬æœ‰è¶³å¤Ÿçš„å­˜å‚¨ç©ºé—´ã€‚å´æ²¡æœ‰è¶³å¤Ÿæ•°çš„å­˜å‚¨åŒºåŸŸ(ç›®å‰åªæœ‰ä¸€ä¸ªå¯ç”¨)ã€‚å› æ­¤ï¼Œåªèƒ½å…è®¸ä¸€ä¸ªä½œä¸š(å¦‚ P)è¢«è°ƒå…¥ï¼Œå¦‚ä¸‹å›¾(c)æ‰€ç¤ºã€‚ç¬¬äºŒç§æ–¹æ¡ˆ(åˆ†åŒºæ•°ç›®å¯å˜)ï¼šæœ€åˆï¼Œæ²¡æœ‰å»ºç«‹ä»»ä½•åˆ†åŒºï¼Œæ•´ä¸ªå¯ç”¨çš„å­˜å‚¨ç©ºé—´ç”¨ä¸€ä¸ªé—®å·æ¥è¡¨ç¤ºï¼›ä¹‹åï¼Œå‘ç”Ÿä¸Šè¿°æ‰€è¯´åœ¨ç³»ç»Ÿè¿è¡Œä¸€æ®µæ—¶é—´åï¼Œå·²æœ‰ 192K å­˜å‚¨ç©ºé—´åˆ†é…ç»™ 7 ä¸ªä½œä¸šï¼Œå‰©ä¸‹ 64K è¿˜æœªåˆ†é…çš„æƒ…å†µï¼Œå¦‚å›¾(b)ï¼›ç°åœ¨ï¼Œæˆ‘ä»¬åœ¨å‰©ä¸‹çš„ 64K å­˜å‚¨ç©ºé—´ä¸­ï¼Œå¯ä»¥åˆ›å»ºä¸¤ä¸ªåˆ†åŒºï¼Œåˆ†åˆ«è£…å…¥ä½œä¸š P å’Œ Qï¼Œå¦‚å›¾(c)ã€‚æ˜¾ç„¶ï¼Œæ­¤æ–¹æ¡ˆæ¯”ç¬¬ä¸€ä¸ªæ–¹æ¡ˆæ›´çµæ´»ï¼Œå†…å­˜åˆ©ç”¨ç‡æ›´é«˜ã€‚ åŠ¨æ€åˆ†åŒºåˆ†é…ç®—æ³•å®ç°åŠ¨æ€åˆ†åŒºåˆ†é…ï¼Œé€šå¸¸æœ‰ä¸¤ç§æ•°æ®ç»“æ„ï¼šç©ºé—²åˆ†åŒºè¡¨å’Œç©ºé—²åˆ†åŒºé“¾ã€‚ ç®—æ³• ç³»ç»Ÿè¿è¡Œä¸€æ®µæ—¶é—´åï¼Œåœ¨æ•´ä¸ªå­˜å‚¨ç©ºé—´å†…å°†å‡ºç°è®¸å¤šå¤§å°ä¸ç­‰çš„åŒºåŸŸï¼Œæœ‰çš„ä»è¢«ä½œä¸šè¿›ç¨‹å ç”¨ï¼Œæœ‰çš„åˆ™å› ä½œä¸šå·²é€€å‡ºç³»ç»Ÿè€Œæˆä¸ºå¯ç”¨äºå†åˆ†é…çš„åŒºåŸŸã€‚ç°åœ¨å‡è®¾æœ‰ä¸€ä¸ªæ–°çš„ä½œä¸šéœ€è°ƒå…¥ä¸»å­˜ï¼Œå¦‚ä½•ä¸ºå…¶é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„åŒºåŸŸï¼Ÿ åŸºäºé¡ºåºæœç´¢ æœ€ä½³é€‚åº”ç®—æ³•(Best Fit) æœ€åé€‚åº”ç®—æ³•(Worst Fit) é¦–æ¬¡é€‚åº”ç®—æ³•(First Fit) å¾ªç¯é¦–æ¬¡é€‚åº”ç®—æ³•(Next Fit) åŸºäºç´¢å¼•æœç´¢ å¿«é€Ÿé€‚åº”ç®—æ³•(Quick Fit) ä¼™ä¼´ç³»ç»Ÿ æœ€ä½³é€‚åº”ç®—æ³• Best fit: BFå°±æ˜¯ä¸ºä¸€ä½œä¸šé€‰æ‹©åˆ†åŒºæ—¶æ€»æ˜¯å¯»æ‰¾å…¶å¤§å°æœ€æ¥è¿‘ä½œä¸šæ‰€è¦æ±‚çš„å­˜å‚¨åŒºåŸŸã€‚å³ï¼šæŠŠä½œä¸šæ”¾å…¥è¿™æ ·çš„åˆ†åŒºåå‰©ä¸‹çš„å†…éƒ¨ç¢ç‰‡æœ€å°ã€‚ä¸ºäº†åŠ å¿«æŸ¥æ‰¾é€Ÿåº¦ï¼Œåº”å°†å­˜å‚¨ç©ºé—´ä¸­æ‰€æœ‰çš„ç©ºç™½åŒºæŒ‰å…¶å¤§å°é€’å¢çš„é¡ºåºé“¾æ¥èµ·æ¥ï¼Œç»„æˆä¸€ç©ºç™½åŒºé“¾(Free List)ã€‚ä¼˜ç‚¹ï¼š å¦‚æœå­˜å‚¨ç©ºé—´ä¸­å…·æœ‰æ­£å¥½æ˜¯æ‰€è¦æ±‚å¤§å°çš„å­˜å‚¨ç©ºç™½åŒºï¼Œåˆ™å¿…ç„¶è¢«é€‰ä¸­ï¼› å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„ç©ºç™½åŒºï¼Œä¹Ÿåªå¯¹æ¯”è¦æ±‚ç¨å¤§çš„ç©ºç™½åŒºè¿›è¡Œåˆ’åˆ†ï¼Œè€Œç»ä¸ä¼šå»åˆ’åˆ†ä¸€ä¸ªæ›´å¤§çš„ç©ºç™½åŒºã€‚å› æ­¤ï¼Œå…¶åé‡åˆ°å¤§ä½œä¸šåˆ°æ¥æ—¶ï¼Œä½œä¸šè¦æ±‚çš„å­˜å‚¨åŒºåŸŸå°±æ¯”è¾ƒå®¹æ˜“å¾—åˆ°æ»¡è¶³ã€‚ ç¼ºç‚¹ï¼š é‡‡ç”¨æœ€ä½³é€‚åº”ç®—æ³•ï¼Œåœ¨æ¯æ¬¡åˆ†é…æ—¶ï¼Œæ€»æ˜¯äº§ç”Ÿæœ€å°çš„ç©ºç™½åŒºã€‚å› æ­¤ï¼Œç»è¿‡ä¸€æ®µæ—¶æœŸåï¼Œå­˜å‚¨ç©ºé—´ä¸­å¯èƒ½ç•™è®¸å¤šè¿™æ ·çš„ç©ºç™½åŒºï¼Œç”±äºå…¶å¤ªå°è€Œæ— æ³•ä½¿ç”¨ã€‚ä¸ºäº†æ”¹å–„è¿™ç§æƒ…å†µï¼Œåœ¨è¯¥ç®—æ³•ä¸­è®¾ç½®ä¸€å‚æ•° Gï¼Œç”¨å®ƒæ¥ç¡®å®šæœ€å°åˆ†åŒºçš„å¤§å°ã€‚å½“é€‰æ‹©ä¸€ä¸ªåˆ†åŒºæ—¶ï¼Œå¦‚æœé€‰ä¸­çš„ç©ºç™½åŒºä¸è¦æ±‚çš„å¤§å°ä¹‹å·®å°äº Gï¼Œåˆ™ä¸å†å¯¹å®ƒåˆ’åˆ†ï¼Œè€ŒæŠŠæ•´ä¸ªè¿™ä¸ªç©ºç™½åŒºåˆ†é…ç»™ç”³è¯·çš„ä½œä¸šã€‚ åœ¨å›æ”¶ä¸€ä¸ªåˆ†åŒºæ—¶ï¼Œä¸ºäº†æŠŠå®ƒæ’å…¥åˆ°ç©ºç™½åŒºé“¾ä¸­åˆé€‚çš„ä½ç½®ä¸Šä¹Ÿé¢‡ä¸ºè´¹æ—¶ã€‚æ‰€ä»¥ï¼Œè¿™ç§ç®—æ³•ä¹çœ‹èµ·æ¥æ˜¯æœ€ä½³çš„ï¼Œå…¶å®åˆ™ä¸ç„¶ã€‚ æœ€åé€‚åº”ç®—æ³• Worst fit: WFä¸æœ€ä½³é€‚åº”ç®—æ³•ç›¸åï¼Œå®ƒåœ¨ä¸ºä½œä¸šé€‰æ‹©å­˜å‚¨åŒºåŸŸæ—¶ï¼Œæ€»æ˜¯å¯»æ‰¾æœ€å¤§çš„ç©ºç™½åŒºã€‚åœ¨åˆ’åˆ†åå‰©ä¸‹çš„ç©ºç™½åŒºä¹Ÿæ˜¯æœ€å¤§çš„ï¼Œå› è€Œå¯¹ä»¥åçš„åˆ†é…å¾ˆå¯èƒ½ä»ç„¶æ˜¯æœ‰ç”¨çš„ï¼Œè¿™æ˜¯è¯¥ç®—æ³•çš„ä¸€ä¸ªä¼˜ç‚¹ã€‚ä½†æ˜¯ï¼Œç”±äºæœ€å¤§çš„ç©ºç™½å—æ€»æ˜¯é¦–å…ˆè¢«åˆ†é…è€Œè¿›è¡Œåˆ’åˆ†ï¼Œå½“æœ‰å¤§çš„ä½œä¸šæ—¶ï¼Œå…¶å­˜å‚¨ç©ºé—´çš„ç”³è¯·å¾€å¾€å¾—ä¸åˆ°æ»¡è¶³ï¼Œè¿™æ˜¯è¯¥ç®—æ³•çš„ä¸€ä¸ªç¼ºç‚¹ã€‚ä¸ºäº†æ”¯æŒè¿™ä¸ªç®—æ³•çš„å®ç°ï¼Œç©ºç™½å—åº”ä»¥å¤§å°é€’å‡çš„é¡ºåºé“¾æ¥èµ·æ¥ã€‚ é¦–æ¬¡é€‚åº”ç®—æ³• First fit: FFBF å’Œ WF å„æœ‰å…¶åˆ©å¼Šã€‚é¦–æ¬¡é€‚åº”ç®—æ³•æ˜¯å¯¹å®ƒä»¬è¿›è¡ŒæŠ˜è¡·è€ƒè™‘åè®¾è®¡å‡ºæ¥çš„ã€‚æ¯ä¸ªç©ºç™½åŒºæŒ‰å…¶åœ¨å­˜å‚¨ç©ºé—´ä¸­åœ°å€é€’å¢çš„é¡ºåºé“¾åœ¨ä¸€èµ·ï¼Œå³æ¯ä¸ªåç»§ç©ºç™½åŒºçš„èµ·å§‹åœ°å€æ€»æ˜¯æ¯”å‰è€…çš„å¤§ã€‚åœ¨ä¸ºä½œä¸šåˆ†é…å­˜å‚¨åŒºåŸŸæ—¶ï¼Œä»è¿™ä¸ªç©ºç™½åŒºé“¾çš„å§‹ç«¯å¼€å§‹æŸ¥æ‰¾ï¼Œé€‰æ‹©ç¬¬ä¸€ä¸ªè¶³ä»¥æ»¡è¶³è¯·æ±‚çš„ç©ºç™½å—ï¼Œè€Œä¸ç®¡å®ƒç©¶ç«Ÿæœ‰å¤šå¤§ã€‚å’Œä¸Šè¿°ç®—æ³•ä¸€æ ·ï¼Œè¿™ä¸ªé€‰æ‹©çš„ç©ºç™½åŒºè¢«åˆ†æˆä¸¤éƒ¨åˆ†ã€‚ä¸€éƒ¨åˆ†ä¸è¯·æ±‚çš„å¤§å°ç›¸ç­‰ï¼Œåˆ†é…ç»™ä½œä¸šï¼›å‰©ä¸‹çš„éƒ¨åˆ†ç•™åœ¨ç©ºç™½åŒºé“¾ä¸­ã€‚æ˜¾ç„¶ï¼Œè¿™ä¸ªç®—æ³•å€¾å‘äºä¼˜å…ˆåˆ©ç”¨å­˜å‚¨ç©ºé—´ä¸­ä½å€éƒ¨åˆ†çš„ç©ºç™½åŒºã€‚ ä¸»è¦ä¼˜ç‚¹ç®—æ³•ç®€å•ï¼ŒæŸ¥æ‰¾é€Ÿåº¦å¿«ï¼›ç•™åœ¨é«˜å€éƒ¨åˆ†çš„å¤§çš„ç©ºç™½åŒºè¢«åˆ’åˆ†çš„æœºä¼šè¾ƒå°‘ï¼Œå› è€Œåœ¨å¤§ä½œä¸šåˆ°æ¥æ—¶ä¹Ÿæ¯”è¾ƒå®¹æ˜“å¾—åˆ°æ»¡è¶³ã€‚ä¸»è¦ç¼ºç‚¹ï¼šè¿™ç§ç®—æ³•å¸¸å¸¸åˆ©ç”¨ä¸€ä¸ªå¤§çš„ç©ºç™½åŒºé€‚åº”å°ä½œä¸šçš„è¯·æ±‚ï¼Œä»è€Œç•™ä¸‹ä¸€äº›è¾ƒå°çš„æ— æ³•ç”¨çš„ç©ºç™½åŒº(å¤–éƒ¨ç¢ç‰‡)ï¼Œå­˜å‚¨ç©ºé—´åˆ©ç”¨ç‡ä¸é«˜ï¼›è€Œä¸”ï¼Œç”±äºæ‰€æœ‰çš„è¯·æ±‚éƒ½æ˜¯ä»ç©ºç™½åŒºé“¾çš„å§‹ç«¯å¼€å§‹æŸ¥æ‰¾ï¼Œå› è€Œè¿™äº›å°è€Œæ— ç”¨çš„ç©ºç™½åŒºé›†ä¸­åœ¨è¿™ä¸ªé“¾çš„å‰ç«¯ï¼Œç›¸åº”åœ°ï¼Œä¸€äº›è¾ƒå¤§ç©ºç™½åŒºåœ¨é“¾çš„å°¾ç«¯æ‰èƒ½å‘ç°ï¼Œè¿™ç§æƒ…å†µå°†ä½¿æ‰¾åˆ°åˆé€‚ç©ºç™½åŒºçš„é€Ÿåº¦é™ä½ã€‚ ä¸‹æ¬¡(å¾ªç¯é¦–æ¬¡)é€‚åº”ç®—æ³• Next fit: NFä¸ºäº†å…‹æœä¸Šè¿°ç¼ºç‚¹ï¼Œåˆè®¾è®¡äº†ä¸€ç§ç§°ä¸ºâ€œä¸‹æ¬¡â€é€‚åº”çš„ç®—æ³•ï¼Œå®ƒå®é™…ä¸Šæ˜¯é¦–æ¬¡é€‚åº”ç®—æ³•çš„ä¸€ç§å˜å½¢ï¼Œæ•…ä¹Ÿè¢«ç§°ä¸ºå¸¦æ—‹è½¬æŒ‡é’ˆçš„é¦–æ¬¡é€‚åº”ç®—æ³•(Next Fit with Roving Pointer)ä¸ºæ­¤ï¼Œæˆ‘ä»¬æŠŠå­˜å‚¨ç©ºé—´ä¸­ç©ºç™½åŒºæ„æˆä¸€ä¸ªå¾ªç¯é“¾ã€‚æ¯æ¬¡ä¸ºå­˜å‚¨è¯·æ±‚æŸ¥æ‰¾åˆé€‚çš„åˆ†åŒºæ—¶ï¼Œæ€»æ˜¯ä»ä¸Šæ¬¡æŸ¥æ‰¾ç»“æŸçš„åœ°æ–¹å¼€å§‹ï¼Œåªè¦æ‰¾åˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„ç©ºç™½åŒºï¼Œå°±å°†å®ƒåˆ’åˆ†ååˆ†é…å‡ºå»ã€‚æ˜¾ç„¶ï¼Œé‡‡ç”¨è¿™ä¸€ç­–ç•¥åï¼Œå­˜å‚¨ç©ºé—´çš„åˆ©ç”¨æ›´åŠ å‡è¡¡ï¼Œè€Œä¸è‡³äºä½¿å°çš„ç©ºç™½åŒºé›†ä¸­äºå­˜å‚¨å™¨çš„ä¸€ç«¯ã€‚ä½†æ˜¯ï¼Œåœ¨å­˜å‚¨å™¨çš„å¦ä¸€ç«¯ä¹Ÿä¸å¯èƒ½ä¿ç•™å¤§çš„ç©ºç™½å—ï¼Œå› æ­¤ï¼Œå½“éœ€è¦è·å¾—ç›¸å½“å¤§çš„ç©ºç™½åŒºæ—¶ï¼Œèƒ½æ»¡è¶³çš„å¯èƒ½æ€§å‡å°‘äº†ã€‚ å¿«é€Ÿé€‚åº”ç®—æ³• Quik fit:QFå°†ç©ºé—²åˆ†åŒºæ ¹æ®å…¶å®¹é‡å¤§å°è¿›è¡Œåˆ†ç±»ï¼Œå¯¹äºæ¯ä¸€ç±»å…·æœ‰ç›¸åŒå®¹é‡çš„æ‰€æœ‰ç©ºé—²åˆ†åŒºï¼Œå•ç‹¬è®¾ç«‹ä¸€ä¸ªç©ºé—²åˆ†åŒºé“¾è¡¨ã€‚è¿™æ ·ï¼Œç³»ç»Ÿä¸­å­˜åœ¨å¤šä¸ªç©ºé—²åˆ†åŒºé“¾è¡¨ï¼›åŒæ—¶ï¼Œåœ¨å†…å­˜ä¸­è®¾ç«‹ä¸€å¼ ç®¡ç†åˆ†åŒºç±»å‹ï¼Œå¹¶è®°å½•äº†è¯¥ç±»å‹ç©ºé—²åˆ†åŒºé“¾è¡¨è¡¨å¤´çš„ç´¢å¼•è¡¨ï¼Œè¯¥è¡¨çš„æ¯ä¸€ä¸ªè¡¨é¡¹è®°å½•äº†å¯¹åº”ç±»å‹ç©ºé—²åˆ†åŒºé“¾è¡¨è¡¨å¤´çš„æŒ‡é’ˆã€‚åˆ†é…è¿‡ç¨‹ï¼šæ ¹æ®è¿›ç¨‹çš„é•¿åº¦ï¼Œå¯»æ‰¾åˆ°èƒ½å®¹çº³å®ƒçš„æœ€å°ç©ºé—²åˆ†åŒºé“¾è¡¨ï¼Œå¹¶å–ä¸‹ç¬¬ä¸€å—è¿›è¡Œåˆ†é…å³å¯ä¼˜ç‚¹ æŸ¥æ‰¾æ•ˆç‡é«˜ã€‚ è¯¥ç®—æ³•åœ¨è¿›è¡Œç©ºé—²åˆ†åŒºåˆ†é…æ—¶ï¼Œä¸ä¼šå¯¹ä»»ä½•åˆ†åŒºäº§ç”Ÿåˆ†å‰²ï¼Œæ‰€ä»¥èƒ½ä¿ç•™å¤§çš„åˆ†åŒºï¼Œæ»¡è¶³å¯¹å¤§ç©ºé—´çš„éœ€æ±‚ï¼Œä¹Ÿä¸ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚ ç¼ºç‚¹ åœ¨åˆ†åŒºå½’è¿˜ä¸»å­˜æ—¶ç®—æ³•å¤æ‚ï¼Œç³»ç»Ÿå¼€é”€è¾ƒå¤§ã€‚ è¯¥ç®—æ³•åœ¨åˆ†é…ç©ºé—²åˆ†åŒºæ—¶æ˜¯ä»¥è¿›ç¨‹ä¸ºå•ä½ï¼Œä¸€ä¸ªåˆ†åŒºåªå±äºä¸€ä¸ªè¿›ç¨‹ï¼Œå› æ­¤åœ¨ä¸ºè¿›ç¨‹æ‰€åˆ†é…çš„ä¸€ä¸ªåˆ†åŒºä¸­ï¼Œæˆ–å¤šæˆ–å°‘åœ°å­˜åœ¨ä¸€å®šçš„æµªè´¹ã€‚ç©ºé—²åˆ†åŒºåˆ’åˆ†è¶Šç»†ï¼Œæµªè´¹åˆ™è¶Šä¸¥é‡ï¼Œ ä¾‹é¢˜ åˆ†åŒºåˆ†é…æ“ä½œæ¶‰åŠåŠ¨æ€åˆ†åŒºçš„ä¸»è¦æ“ä½œæœ‰åˆ†é…å†…å­˜å’Œå›æ”¶å†…å­˜ã€‚è¿™äº›æ“ä½œæ˜¯åœ¨ç¨‹åºæ¥å£ä¸­é€šè¿‡ç³»ç»Ÿè°ƒç”¨å‘å‡ºçš„ã€‚ åˆ†é…å†…å­˜ï¼šå‘æ“ä½œç³»ç»Ÿæå‡ºä¸€ç‰¹å®šå­˜å‚¨é‡çš„è¯·æ±‚ã€‚é€šå¸¸ï¼Œå®ƒå¹¶ä¸è¦æ±‚è¿™ä¸ªåˆ†é…çš„å­˜å‚¨åŒºåŸŸé™äºç‰¹å®šçš„ä½ç½®ï¼Œä½†æ˜¯ï¼Œè¿™ä¸ªåŒºåŸŸå¿…é¡»æ˜¯è¿ç»­çš„ã€‚OS åˆ©ç”¨æŸç§åˆ†é…ç®—æ³•ï¼Œä»ç©ºé—²åˆ†åŒºé“¾(è¡¨)ä¸­æ‰¾åˆ°æ‰€éœ€å¤§å°çš„åˆ†åŒºã€‚ è¯·æ±‚çš„åˆ†åŒºå¤§å°ä¸º u.size è¡¨ä¸­æ¯ä¸ªç©ºé—²åˆ†åŒºçš„å¤§å°ä¸º m.size size æ˜¯äº‹å…ˆè§„å®šçš„ä¸å†åˆ‡å‰²çš„å‰©ä½™åˆ†åŒºçš„å¤§å° å›æ”¶å†…å­˜è¿›ç¨‹ç”¨äºå½’è¿˜ä¸€ä¸ªä¸å†éœ€ç”¨çš„å­˜å‚¨åŒºåŸŸã€‚ å½“è¿›ç¨‹è¿è¡Œå®Œæ¯•é‡Šæ”¾å†…å­˜æ—¶ï¼Œç³»ç»Ÿæ ¹æ®å›æ”¶åŒºçš„é¦–å€ï¼Œä»ç©ºé—²åŒºé“¾(è¡¨)ä¸­æ‰¾åˆ°ç›¸åº”çš„æ’å…¥ç‚¹ã€‚ åœ¨å›æ”¶ä¸€ä¸ªåˆ†åŒºæ—¶ï¼Œä¸€ä¸ªå›æ”¶çš„åˆ†åŒºä¸ç©ºç™½åŒºé‚»æ¥çš„æƒ…å†µæœ‰å››ç§ï¼Œå¯¹è¿™å››ç§æƒ…å†µåˆ†åˆ«ä½œå¦‚ä¸‹å¤„ç†ï¼š å›æ”¶åŒºä¸æ’å…¥ç‚¹çš„å‰ä¸€ä¸ªç©ºé—²åˆ†åŒº F1 ç›¸é‚»æ¥ã€‚æ­¤æ—¶åº”å°†å›æ”¶åŒºä¸æ’å…¥ç‚¹çš„å‰ä¸€åˆ†åŒºåˆå¹¶(é€šè¿‡ä¿®æ”¹å…¶å‰ä¸€åˆ†åŒº F1 çš„å¤§å°ï¼Œä¸å¿…ä¸ºå›æ”¶åŒºåˆ†é…æ–°è¡¨ç°) å›æ”¶åŒºä»…ä¸ä¸‹é¢çš„ç©ºç™½åŒºé‚»æ¥ï¼Œåˆå¹¶åä»ä¸ºç©ºç™½åŒº F2ï¼Œä½†å…¶èµ·å§‹åœ°å€å’Œå¤§å°å‡éœ€æ”¹å˜ã€‚ç”¨å›æ”¶åŒºçš„é¦–å€ä½œä¸ºæ–°ç©ºé—²åŒºçš„é¦–å€ï¼Œå¤§å°ä¸ºä¸¤è€…ä¹‹å’Œ å›æ”¶åŒºä¸ä¸Šã€ä¸‹é¢çš„ç©ºç™½åŒºé‚»æ¥æ­¤æ—¶å°†ä¸‰ä¸ªåˆ†åŒºåˆå¹¶ï¼Œä½¿ç”¨ F1 çš„è¡¨é¡¹å’Œ F1 çš„é¦–å€ï¼Œå–æ¶ˆ F2 çš„è¡¨é¡¹ï¼Œå¤§å°ä¸ºä¸‰è€…ä¹‹å’Œã€‚ å›æ”¶åŒºä¸ä¸Šã€ä¸‹é¢çš„ç©ºç™½åŒºå‡ä¸é‚»æ¥ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåº”ä¸ºå›æ”¶åŒºå•ç‹¬å»ºç«‹ä¸€æ–°è¡¨é¡¹ï¼Œå¡«å†™å›æ”¶åŒºçš„é¦–å€å’Œå¤§å°ï¼Œå¹¶æ ¹æ®é¦–åœ°å€æ’å…¥åˆ°ç©ºé—²é“¾ä¸­çš„é€‚å½“ä½ç½®ã€‚ ä¼™ä¼´ç³»ç»Ÿ Buddy Systemå›ºå®šåˆ†åŒºå’ŒåŠ¨æ€åˆ†åŒºéƒ½å­˜åœ¨å†…éƒ¨ç¢ç‰‡å’Œå¤–éƒ¨ç¢ç‰‡çš„é—®é¢˜ã€‚ä¼™ä¼´ç³»ç»Ÿæ˜¯ä¸€ç§è§£å†³å†…éƒ¨ç¢ç‰‡é—®é¢˜çš„æ–¹æ³•ã€‚ åœ¨ä¼™ä¼´ç³»ç»Ÿä¸­ï¼Œå¯ç”¨å†…å­˜å—çš„å¤§å°ä¸º$2^k (1\\le k\\le m)$å…¶ä¸­$2^1$è¡¨ç¤ºåˆ†é…çš„æœ€å°å—å°ºå¯¸ï¼Œ$2^m$è¡¨ç¤ºåˆ†é…çš„æœ€å¤§å—å°ºå¯¸ï¼Œé€šå¸¸æ˜¯å¯ä¾›åˆ†é…çš„æ•´ä¸ªå†…å­˜ç©ºé—´å¤§å°ã€‚å¯¹ç©ºé—²åŒºæŒ‰ç…§å¤§å°åˆ†ç±»ï¼Œç›¸åŒå¤§å°çš„åˆ†åŒºé“¾æ¥ä¸ºä¸€ä¸ªåŒå‘ç©ºé—²é“¾è¡¨ï¼›æœ€å¤šå¯å½¢æˆ k ä¸ªé“¾è¡¨ã€‚ è¿›ç¨‹è¯·æ±‚å¤§å°ä¸º n çš„å­˜å‚¨ç©ºé—´ï¼š æ‰¾åˆ° iï¼Œä½¿å¾—$2^{i-1}\\lq n &lt; 2^i$ åœ¨ç©ºé—²åˆ†åŒºå¤§å°ä¸º$2^i$çš„é“¾è¡¨ä¸­æŸ¥æ‰¾ï¼Œè‹¥æ‰¾åˆ°ï¼Œåˆ™åˆ†é…ï¼› å¦‚æœæ²¡æ‰¾åˆ°ï¼Œä»$2^{i+1}$çš„é“¾è¡¨ä¸­æŸ¥æ‰¾ï¼Œæ‰¾åˆ°åï¼Œå°†å…¶åˆ†è£‚ä¸ºä¸¤ä¸ªå¤§å°ç›¸ç­‰çš„ä¼™ä¼´ï¼Œå…¶ä¸­ä¸€ä¸ªåˆ†é…ç»™è¿›ç¨‹ï¼Œå¦ä¸€ä¸ªæ’å…¥åˆ°$2^i$ç›¸åº”çš„é“¾è¡¨ä¸­ã€‚ å¦‚æœä»ç„¶æ²¡æ‰¾åˆ°ï¼Œåˆ™ç»§ç»­æŸ¥æ‰¾æ›´å¤§çš„é“¾è¡¨ï¼Œç›´åˆ°æ‰¾åˆ°æˆ–è€…æŸ¥æ‰¾å®Œæ‰€æœ‰é“¾è¡¨ã€‚ > åˆ†å‰²åŠå›æ”¶åˆå¹¶åˆ†åŒºéœ€è¦æ—¶é—´å¼€é”€ï¼Œå¤šç”¨äºå¤šå¤„ç†æœºç³»ç»Ÿä¸­ã€‚ å“ˆå¸Œç®—æ³•åˆ©ç”¨å“ˆå¸Œå¿«é€ŸæŸ¥æ‰¾çš„ä¼˜ç‚¹ï¼Œä»¥åŠç©ºé—²åˆ†åŒºåœ¨å¯åˆ©ç”¨ç©ºé—´è¡¨ä¸­çš„åˆ†å¸ƒè§„å¾‹ï¼Œå»ºç«‹å“ˆå¸Œå‡½æ•°ï¼Œæ„é€ ä¸€å¼ å“ˆå¸Œè¡¨ï¼Œä»¥ç©ºé—²åˆ†åŒºå¤§å°ä¸ºå…³é”®å­—ï¼Œæ¯ä¸€ä¸ªè¡¨é¡¹è®°å½•äº†ä¸€ä¸ªå¯¹åº”çš„ç©ºé—²åˆ†åŒºé“¾è¡¨è¡¨å¤´æŒ‡é’ˆã€‚å½“è¿›è¡Œç©ºé—²åˆ†åŒºåˆ†é…æ—¶ï¼Œæ ¹æ®æ‰€éœ€ç©ºé—²åˆ†åŒºå¤§å°ï¼Œé€šè¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—ï¼Œå³å¾—åˆ°åœ¨å“ˆå¸Œè¡¨ä¸­çš„ä½ç½®ï¼Œä»ä¸­å¾—åˆ°ç›¸åº”çš„ç©ºé—²åˆ†åŒºé“¾è¡¨ï¼Œå®ç°æœ€ä½³åˆ†é…ç­–ç•¥ã€‚ å¯é‡å®šä½åˆ†åŒºåˆ†é…ç´§å‡‘ Compactionå¯å˜å¼åˆ†åŒºåˆ†é…ç­–ç•¥æ˜¯åœ¨è£…å…¥ä½œä¸šæ—¶æ ¹æ®å…¶è¦æ±‚é‡ä¸ºå…¶åˆ’å®šç›¸åº”çš„åŒºåŸŸã€‚è¿™ç§åˆ†é…ç­–ç•¥ï¼Œæ¶ˆé™¤äº†å›ºå®šå¼åˆ†åŒºåˆ†é…é€ æˆçš„â€œå†…é›¶å¤´â€ï¼Œä½†ä¸å¯é¿å…åœ°åœ¨å­˜å‚¨ç©ºé—´ä¸­é€ æˆâ€œå¤–é›¶å¤´â€ï¼Œä¸ºäº†è¿›ä¸€æ­¥æé«˜å­˜å‚¨å™¨çš„åˆ©ç”¨ç‡ï¼Œå¿…é¡»è®¾æ³•å‡å°‘ç”±äºå¤–é›¶å¤´é€ æˆçš„æµªè´¹ã€‚ ä¸€ä¸ªæœ€ç®€å•è€Œç›´è§‚çš„è§£å†³é›¶å¤´é—®é¢˜çš„åŠæ³•æ˜¯ï¼Œå®šæ—¶åœ°æˆ–è€…åœ¨å†…å­˜ç´§å¼ æ—¶ï¼ŒæŠŠå­˜å‚¨ç©ºé—´ä¸­çš„ç©ºç™½åŒºåˆå¹¶ä¸ºä¸€ä¸ªå¤§çš„è¿ç»­åŒºã€‚å®ç°æ–¹æ³•å°†å†…å­˜ä¸­çš„æ‰€æœ‰ä½œä¸šè¿›è¡Œç§»åŠ¨ï¼Œä½¿å®ƒä»¬å…¨éƒ½ç›¸é‚»æ¥ï¼Œè¿™æ ·ï¼Œå¯æŠŠåŸæ¥åˆ†æ•£çš„å¤šä¸ªå°åˆ†åŒºåˆæˆä¸€ä¸ªå¤§åˆ†åŒºã€‚è¿™ç§æŠ€æœ¯ç§°ä¸ºå­˜å‚¨å™¨çš„ç´§å‡‘Compactionã€‚æŠŠä¸€ä¸ªä½œä¸šä»ä¸€ä¸ªå­˜å‚¨åŒºåŸŸç§»åŠ¨åˆ°å¦ä¸€ä¸ªå­˜å‚¨åŒºåŸŸï¼Œéœ€è¦å¯¹ä½œä¸šä¸­çš„æŸäº›åœ°å€éƒ¨åˆ†å’Œåœ°å€å¸¸æ•°ç­‰è¿›è¡Œè°ƒæ•´ã€‚ä¸€ä¸ªè¾ƒå®ç”¨ä¸”å¯è¡Œçš„åŠæ³•æ˜¯é‡‡ç”¨åŠ¨æ€é‡å®šä½æŠ€æœ¯ã€‚ä¸€ä¸ªä½œä¸šåœ¨ä¸»å­˜ä¸­ç§»åŠ¨åï¼Œåªè¦æ”¹å˜é‡å®šä½å¯„å­˜å™¨ä¸­çš„å†…å®¹å³å¯ã€‚ åŠ¨æ€é‡å®šä½ Dynamic Relocationåœ¨åŠ¨æ€è¿è¡Œæ—¶è£…å…¥çš„æ–¹å¼ä¸­ï¼Œä½œä¸šè£…å…¥å†…å­˜åçš„æ‰€æœ‰åœ°å€éƒ½ä»ç„¶æ˜¯ç›¸å¯¹åœ°å€ï¼Œå°†ç›¸å¯¹åœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€çš„å·¥ä½œï¼Œè¢«æ¨è¿Ÿåˆ°ç¨‹åºæŒ‡ä»¤è¦çœŸæ­£æ‰§è¡Œæ—¶è¿›è¡Œã€‚ç¨‹åºåœ¨æ‰§è¡Œæ—¶ï¼ŒçœŸæ­£è®¿é—®çš„å†…å­˜åœ°å€æ˜¯ç›¸å¯¹åœ°å€ä¸é‡å®šä½å¯„å­˜å™¨ä¸­çš„åœ°å€ç›¸åŠ è€Œå½¢æˆçš„ã€‚ Refdata-flair memory-management-in-computer","link":"/UESTC/OS/Ch4-1StorageManagement/"},{"title":"The Dead Lock","text":"äº§ç”Ÿæ­»é”çš„åŸå› å’Œå¿…è¦æ¡ä»¶æ­»é”ç›¸å…³å®šä¹‰æ°¸ä¹…ï¼ˆå¯é‡ç”¨ï¼‰æ€§èµ„æº å¯æŠ¢å æ€§èµ„æº: æ˜¯æŒ‡æŸè¿›ç¨‹åœ¨è·å¾—è¿™ç±»èµ„æºåï¼Œè¯¥èµ„æºå¯ä»¥å†è¢«å…¶ä»–è¿›ç¨‹æˆ–ç³»ç»Ÿå‰¥å¤º ä¸å¯æŠ¢å æ€§èµ„æº: å½“ç³»ç»ŸæŠŠè¿™ç±»èµ„æºåˆ†é…ç»™æŸè¿›ç¨‹åï¼Œå°±ä¸èƒ½å¼ºè¡Œæ”¶å›ï¼Œåªèƒ½åœ¨è¿›ç¨‹ç”¨å®Œåè‡ªè¡Œé‡Šæ”¾ã€‚ä¸´æ—¶æ€§ï¼ˆæ¶ˆè€—æ€§ï¼‰èµ„æº åªå¯ä½¿ç”¨ä¸€æ¬¡çš„èµ„æº æ­»é” Dead Lockï¼šå¦‚æœä¸€ç»„è¿›ç¨‹ä¸­çš„æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½åœ¨ç­‰å¾…ä»…ç”±è¯¥ç»„è¿›ç¨‹ä¸­çš„å…¶å®ƒè¿›ç¨‹æ‰èƒ½å¼•å‘çš„äº‹ä»¶ï¼Œé‚£ä¹ˆè¯¥ç»„è¿›ç¨‹æ˜¯æ­»é”çš„ã€‚ æ­»é”ä¼šé€ æˆè¿›ç¨‹æ— æ³•æ‰§è¡Œ æ­»é”ä¼šé€ æˆç³»ç»Ÿèµ„æºçš„æå¤§æµªè´¹(èµ„æºæ²¡æ³•é‡Šæ”¾) äº§ç”Ÿæ­»é”çš„åŸå›  ç«äº‰èµ„æº è¿›ç¨‹é—´æ¨è¿›é¡ºåºä¸å½“ äº§ç”Ÿæ­»é”çš„å¿…è¦æ¡ä»¶ äº’æ–¥æ¡ä»¶:è¿›ç¨‹å¯¹åˆ†é…åˆ°çš„èµ„æºè¿›è¡Œæ’å®ƒæ€§ä½¿ç”¨ è¯·æ±‚å’Œä¿æŒæ¡ä»¶:è¿›ç¨‹å·²ç»ä¿æŒäº†è‡³å°‘ä¸€ä¸ªèµ„æºï¼Œä½†åˆæå‡ºäº†æ–°çš„èµ„æºè¦æ±‚ï¼Œè€Œè¯¥èµ„æºåˆè¢«å…¶ä»–è¿›ç¨‹å æœ‰ï¼Œè¯·æ±‚è¿›ç¨‹é˜»å¡ï¼Œä½†å¯¹å·²ç»è·å¾—çš„èµ„æºä¸é‡Šæ”¾ ä¸å‰¥å¤ºæ¡ä»¶:è¿›ç¨‹å·²è·å¾—çš„èµ„æºåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½è¢«å‰¥å¤ºï¼Œåªèƒ½åœ¨ä½¿ç”¨å®Œæ—¶è‡ªå·±é‡Šæ”¾ ç¯è·¯ç­‰å¾…æ¡ä»¶:å‘ç”Ÿæ­»é”æ—¶ï¼Œå¿…ç„¶å­˜åœ¨è¿›ç¨‹â€”èµ„æºçš„ç¯å½¢é“¾ èµ„æºåˆ†é…å›¾èµ„æºåˆ†é…å›¾ Resource Allocation Graph(RAG)ï¼šç”¨æ¥æè¿°è¿›ç¨‹å’Œèµ„æºä¹‹é—´çš„å…³ç³»ï¼Œä»¥åŠèµ„æºä¹‹é—´çš„ç«äº‰å…³ç³»ã€‚å®ƒæ˜¯æœ‰å‘å›¾ï¼Œè¯´æ˜äº†ç³»ç»Ÿèµ„æºã€è¿›ç¨‹çŠ¶æ€ï¼Œå…¶ä¸­æ¯ä¸ªèµ„æºã€è¿›ç¨‹ç”¨èŠ‚ç‚¹è¡¨ç¤ºï¼Œåœ†ç‚¹è¡¨ç¤ºèµ„æºçš„ä¸€ä¸ªç¤ºä¾‹ï¼Œä¸€ä¸ªèµ„æºå¯æ‹¥æœ‰å¤šä¸ªå®ä¾‹ 1.ç«äº‰ä¸å¯æŠ¢å æ€§èµ„æºå¼•èµ·æ­»é” 2.ç«äº‰ä¸´æ—¶æ€§èµ„æºå¼•èµ·è¿›è¡Œæ­»é”ä¸´æ—¶æ€§èµ„æºï¼Œå¯ä»¥åˆ›é€ ï¼ˆç”Ÿäº§ï¼‰å’Œæ’¤æ¶ˆï¼ˆæ¶ˆè€—ï¼‰çš„èµ„æºï¼Œä¹Ÿç§°ä¹‹ä¸ºæ¶ˆè€—æ€§èµ„æºï¼Œå¦‚ä¿¡å·é‡ã€æ¶ˆæ¯ã€buffer ä¸­çš„æ•°æ®ç­‰èµ„æºä¾‹å¦‚ï¼šS1ã€S2 å’Œ S3 æ˜¯ä¸´æ—¶æ€§èµ„æºï¼Œæ˜¯ç”±è¿›ç¨‹ P1ã€P2 å’Œ P3 äº§ç”Ÿçš„æ¶ˆæ¯ã€‚å¦‚æœæ¶ˆæ¯é€šä¿¡å¤„ç†é¡ºåºä¸å½“ä¹Ÿä¼šå‘ç”Ÿæ­»é”ã€‚ 3. è¿›ç¨‹æ¨è¿›é¡ºåºä¸å½“å¼•èµ·æ­»é”è”åˆè¿›ç¨‹å›¾(Joint Progress Diagram)è®°å½•å…±äº«èµ„æºçš„å¤šä¸ªè¿›ç¨‹çš„æ‰§è¡Œè¿›å±• ç«äº‰èµ„æºï¼Œæœªå¿…äº§ç”Ÿæ­»é”ã€‚æ˜¯å¦äº§ç”Ÿæ­»é”ï¼Œè¿˜å–å†³äºåŠ¨æ€æ‰§è¡Œå’Œåº”ç”¨ç¨‹åºç»†èŠ‚ 12P: ç”³è¯·Aï¼Œç”³è¯·Bï¼Œé‡Šæ”¾Aï¼Œé‡Šæ”¾BQ: ç”³è¯·Bï¼Œç”³è¯·Aï¼Œé‡Šæ”¾Bï¼Œé‡Šæ”¾A é¢„é˜²æ­»é”çš„æ–¹æ³• é¢„é˜²æ­»é” Deadlock Preventionï¼šè®¾ç½®æŸäº›é™åˆ¶æ¡ä»¶ï¼Œç ´åå››ä¸ªå¿…è¦æ¡ä»¶ä¸­çš„ä¸€ä¸ªæˆ–å‡ ä¸ªã€‚ä¼˜ç‚¹ï¼šå®¹æ˜“å®ç°ç¼ºç‚¹:ç³»ç»Ÿèµ„æºåˆ©ç”¨ç‡å’Œååé‡é™ä½ é¿å…æ­»é” Deadlock Avoidanceï¼šåœ¨èµ„æºçš„åŠ¨æ€åˆ†é…è¿‡ç¨‹ç”¨æŸç§æ–¹æ³•é˜²æ­¢ç³»ç»Ÿè¿›å…¥ä¸å®‰å…¨çŠ¶æ€ã€‚ä¼˜ç‚¹ï¼šè¾ƒå¼±é™åˆ¶æ¡ä»¶å¯è·å¾—è¾ƒé«˜ç³»ç»Ÿèµ„æºåˆ©ç”¨ç‡å’Œååé‡ã€‚ç¼ºç‚¹ï¼šæœ‰ä¸€å®šå®ç°éš¾åº¦ã€‚æ­»é”é¿å…çš„ä¸¤ç§æ–¹æ³•ï¼š è‹¥ä¸€ä¸ªè¿›ç¨‹çš„è¯·æ±‚ä¼šå¯¼è‡´æ­»é”ï¼Œåˆ™ä¸å¯åŠ¨è¿›ç¨‹ è‹¥ä¸€ä¸ªè¿›ç¨‹å¢åŠ çš„èµ„æºè¯·æ±‚ä¼šå¯¼è‡´æ­»é”ï¼Œåˆ™ä¸å…è®¸è¿™ä¸€èµ„æºåˆ†é… æ£€æµ‹æ­»é” Deadlock Detectionï¼šé¢„å…ˆä¸é‡‡å–ä»»ä½•é™åˆ¶ï¼Œä¹Ÿä¸æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦å·²è¿›å…¥ä¸å®‰å…¨åŒºï¼Œé€šè¿‡è®¾ç½®æ£€æµ‹æœºæ„ï¼Œæ£€æµ‹å‡ºæ­»é”åè§£é™¤ã€‚ è§£é™¤æ­»é” Unlocking deadlockï¼šå¸¸ç”¨æ’¤æ¶ˆæˆ–æŒ‚èµ·ä¸€äº›è¿›ç¨‹ï¼Œå›æ”¶ä¸€äº›èµ„æºã€‚ é¢„é˜²æ­»é”å’Œé¿å…æ­»é”æ˜¯ä¸¤ç§ä¸åŒçš„æ¦‚å¿µï¼Œä¸¤è€…éƒ½æ˜¯äº‹å…ˆé˜²èŒƒæ­»é”çš„å‘ç”Ÿï¼Œä½†æ˜¯æ–¹æ³•ä¸åŒã€‚é¢„é˜²æ­»é”æ˜¯åœ¨ç³»ç»Ÿè®¾è®¡æ—¶å°±è€ƒè™‘åˆ°æ­»é”çš„å¯èƒ½æ€§ï¼Œé‡‡å–æªæ–½é¿å…æ­»é”çš„å‘ç”Ÿï¼Œè€Œé¿å…æ­»é”æ˜¯åœ¨ç³»ç»Ÿè¿è¡Œæ—¶ï¼Œæ ¹æ®ç³»ç»Ÿçš„çŠ¶æ€ï¼Œé‡‡å–æªæ–½é¿å…æ­»é”çš„å‘ç”Ÿã€‚ é¢„é˜²æ­»é”ï¼šç ´åæ­»é”çš„å¿…è¦æ¡ä»¶ï¼Œæ–½åŠ çš„æ¡ä»¶æ¯”è¾ƒä¸¥æ ¼ï¼Œå¯èƒ½ä¼šå½±å“åˆ°è¿›ç¨‹çš„å¹¶å‘æ‰§è¡Œã€‚é¿å…æ­»é”ï¼šèµ„æºåŠ¨æ€åˆ†é…ï¼Œæ–½åŠ çš„é™åˆ¶æ¡ä»¶è¾ƒå¼±ä¸€äº›ï¼Œæœ‰åˆ©äºè¿›ç¨‹çš„å¹¶å‘æ‰§è¡Œã€‚ æ‘’å¼ƒè¯·æ±‚å’Œä¿æŒæ¡ä»¶ç¬¬ä¸€ç§åè®®ï¼šç³»ç»Ÿè¦æ±‚æ‰€æœ‰è¿›ç¨‹ä¸€æ¬¡æ€§ç”³è¯·æ‰€éœ€çš„å…¨éƒ¨èµ„æºï¼Œåªè¦æœ‰ä¸€ç§èµ„æºè¦æ±‚ä¸èƒ½æ»¡è¶³ï¼Œå³ä½¿æ˜¯å·²æœ‰çš„å…¶å®ƒå„èµ„æºï¼Œä¹Ÿå…¨éƒ¨ä¸åˆ†é…ç»™è¯¥è¿›ç¨‹ï¼Œè€Œè®©å…¶ç­‰å¾… ä¼˜ç‚¹ï¼šç®€å•ã€æ˜“äºå®ç°ä¸”å¾ˆå®‰å…¨ã€‚ ç¼ºç‚¹ï¼šèµ„æºä¸¥é‡æµªè´¹ï¼›è¿›ç¨‹å»¶è¿Ÿè¿è¡Œã€‚ ç¬¬äºŒç§åè®®ï¼šå…è®¸ä¸€ä¸ªè¿›ç¨‹åªè·å¾—è¿è¡ŒåˆæœŸæ‰€éœ€çš„èµ„æºåä¾¿å¼€å§‹è¿è¡Œã€‚è¿›ç¨‹è¿è¡Œè¿‡ç¨‹ä¸­å†é€æ­¥é‡Šæ”¾å·²åˆ†é…ç»™è‡ªå·±çš„ã€ä¸”å·²ä½¿ç”¨å®Œæ¯•çš„å…¨éƒ¨èµ„æºï¼Œç„¶åå†è¯·æ±‚æ–°çš„æ‰€éœ€èµ„æºä¼˜ç‚¹ï¼šä½¿è¿›ç¨‹æ›´å¿«åœ°å®Œæˆä»»åŠ¡ï¼Œæé«˜è®¾å¤‡çš„åˆ©ç”¨ç‡ï¼Œå‡å°‘è¿›ç¨‹å‘ç”Ÿé¥¥é¥¿çš„æ¦‚ç‡ æ‘’å¼ƒä¸å‰¥å¤ºæ¡ä»¶è¿›ç¨‹åœ¨éœ€è¦èµ„æºæ—¶æ‰æå‡ºè¯·æ±‚ï¼Œä¸€ä¸ªå·²ç»ä¿æŒäº†æŸäº›èµ„æºçš„è¿›ç¨‹ï¼Œå†æå‡ºæ–°çš„èµ„æºè¦æ±‚è€Œä¸èƒ½ç«‹å³å¾—åˆ°æ»¡è¶³æ—¶ï¼Œå¿…é¡»é‡Šæ”¾å·²ç»ä¿æŒçš„æ‰€æœ‰èµ„æºï¼Œå¾…ä»¥åéœ€è¦æ—¶å†é‡æ–°ç”³è¯·ã€‚Cons:å®ç°å¤æ‚ï¼Œä»£ä»·å¤§ï¼›å»¶é•¿äº†è¿›ç¨‹çš„å‘¨è½¬æ—¶é—´ï¼Œå¢åŠ ç³»ç»Ÿå¼€é”€ï¼Œé™ä½ç³»ç»Ÿååé‡ã€‚ æ‘’å¼ƒç¯è·¯ç­‰å¾…æ¡ä»¶ç³»ç»Ÿå°†æ‰€æœ‰èµ„æºæŒ‰ç±»å‹è¿›è¡Œçº¿æ€§æ’é˜Ÿï¼ˆå¸¸ç”¨-ä¸å¸¸ç”¨ï¼‰ï¼Œå¹¶èµ‹äºˆä¸åŒçš„åºå·ã€‚æ‰€æœ‰è¿›ç¨‹å¯¹èµ„æºçš„è¯·æ±‚å¿…é¡»ä¸¥æ ¼æŒ‰èµ„æºåºå·é€’å¢çš„æ¬¡åºæå‡ºï¼ŒæŒ‰åºå·é€’å‡çš„æ¬¡åºé‡Šæ”¾ å‡è®¾æˆ‘ä»¬çš„ç³»ç»Ÿæœ‰ä¸‰ç§èµ„æºï¼šAã€Bã€Cï¼Œæˆ‘ä»¬å°†å®ƒä»¬æŒ‰ç…§ä½¿ç”¨é¢‘ç‡è¿›è¡Œæ’åºï¼Œå¾—åˆ°çš„åºåˆ—æ˜¯ Aï¼ˆæœ€å¸¸ç”¨ï¼‰-&gt; B -&gt; Cï¼ˆæœ€ä¸å¸¸ç”¨ï¼‰ã€‚ç„¶åï¼Œæˆ‘ä»¬ç»™æ¯ç§èµ„æºåˆ†é…ä¸€ä¸ªåºå·ï¼šA=1ï¼ŒB=2ï¼ŒC=3ã€‚åœ¨è¿™ç§ç­–ç•¥ä¸‹ï¼Œæ‰€æœ‰çš„è¿›ç¨‹å¿…é¡»æŒ‰ç…§èµ„æºåºå·é€’å¢çš„é¡ºåºè¯·æ±‚èµ„æº,æŒ‰ç…§èµ„æºåºå·é€’å‡çš„é¡ºåºé‡Šæ”¾èµ„æºã€‚ é¿å…æ­»é”çš„æ–¹æ³•å®‰å…¨çŠ¶æ€:æ˜¯æŒ‡ç³»ç»Ÿèƒ½æŒ‰æŸç§è¿›ç¨‹é¡ºåº ã€ˆP1, P2, â€¦, Pnã€‰ï¼Œæ¥ä¸ºæ¯ä¸ªè¿›ç¨‹ Pi åˆ†é…å…¶æ‰€éœ€èµ„æºï¼Œç›´è‡³æ»¡è¶³æ¯ä¸ªè¿›ç¨‹å¯¹èµ„æºçš„æœ€å¤§éœ€æ±‚ï¼Œä½¿æ¯ä¸ªè¿›ç¨‹éƒ½å¯é¡ºåˆ©åœ°å®Œæˆ,åˆ™ç§°è¿™æ˜¯ä¸€ä¸ªå®‰å…¨åºåˆ—ã€‚å®‰å…¨åºåˆ—çš„å®è´¨æ˜¯:åºåˆ—ä¸­çš„æ¯ä¸€ä¸ªè¿›ç¨‹ Pi åˆ°è¿è¡Œå®Œæˆå°šéœ€çš„èµ„æºé‡ä¸è¶…è¿‡ç³»ç»Ÿå½“å‰å‰©ä½™çš„èµ„æºé‡ä¸æ‰€æœ‰åœ¨å®ƒä¹‹å‰çš„è¿›ç¨‹ P1, P2, â€¦, Pi-1 æ‰€å ç”¨çš„èµ„æºé‡ä¹‹å’Œã€‚å¦‚æœç³»ç»Ÿæ— æ³•æ‰¾åˆ°è¿™æ ·ä¸€ä¸ªå®‰å…¨åºåˆ—ï¼Œåˆ™ç§°ç³»ç»Ÿå¤„äºä¸å®‰å…¨çŠ¶æ€ã€‚ å¹¶éæ‰€æœ‰ä¸å®‰å…¨çŠ¶æ€éƒ½æ˜¯æ­»é”çŠ¶æ€ï¼Œä½†å½“ç³»ç»Ÿè¿›å…¥ä¸å®‰å…¨çŠ¶æ€åï¼Œä¾¿å¯èƒ½æœ‰è¿›å…¥æ­»é”çŠ¶æ€ã€‚ ç³»ç»Ÿå¤„äºå®‰å…¨çŠ¶æ€æ—¶ï¼Œä¸ä¼šè¿›å…¥æ­»é”çŠ¶æ€ã€‚ æ­»é”é¿å…ç­–ç•¥å¹¶ä¸èƒ½ç¡®åˆ‡çš„é¢„æµ‹æ­»é”ï¼Œä»…ä»…æ˜¯é¢„æ–™æ­»é”çš„å¯èƒ½æ€§å¹¶ç¡®ä¿æ°¸è¿œä¸ä¼šå‡ºç°è¿™ç§å¯èƒ½æ€§ã€‚æ­»é”é¿å…æ¯”æ­»é”é¢„é˜²é™åˆ¶å°‘ï¼Œä½†ä½¿ç”¨ä¸­ä¹Ÿæœ‰è®¸å¤šé™åˆ¶ï¼š å¿…é¡»äº‹å…ˆå£°æ˜æ¯ä¸ªè¿›ç¨‹è¯·æ±‚çš„æœ€å¤§èµ„æºã€‚ è€ƒè™‘çš„è¿›ç¨‹å¿…é¡»æ˜¯æ— å…³çš„ï¼Œæ‰§è¡Œçš„é¡ºåºå¿…é¡»æ²¡æœ‰ä»»ä½•åŒæ­¥çš„è¦æ±‚ã€‚ åˆ†é…çš„èµ„æºæ•°ç›®å¿…é¡»æ˜¯å›ºå®šçš„ã€‚ åœ¨å æœ‰èµ„æºæ—¶ï¼Œè¿›ç¨‹ä¸èƒ½é€€å‡ºã€‚ ğŸŒŸ é“¶è¡Œå®¶ç®—æ³•æ€æƒ³ æ­»é”é¿å…ç­–ç•¥Bankerâ€™s Alogorithm é“¶è¡Œå®¶ç®—æ³•çš„åŸºæœ¬æ€æƒ³é¿å…æ­»é”çš„å…³é”®åœ¨äºå¦‚ä½•å‡†ç¡®çš„é¢„æµ‹æ˜¯å¦ä¼šå‡ºç°æ­»é”ï¼Œä»è€Œé¿å…æ­»é”ã€‚æœ€æœ‰ä»£è¡¨æ€§çš„é¿å…æ­»é”çš„ç®—æ³•æ˜¯ Dijkstra åœ¨ 1965 å¹´æå‡ºçš„é“¶è¡Œå®¶ç®—æ³•ã€‚è¯¥ç®—æ³•å¯ç”¨äºé“¶è¡Œå‘æ”¾ä¸€ç¬”è´·æ¬¾å‰ï¼Œé¢„æµ‹è¯¥ç¬”è´·æ¬¾æ˜¯å¦ä¼šå¼•èµ·é“¶è¡Œèµ„é‡‘å‘¨è½¬é—®é¢˜ã€‚é“¶è¡Œçš„èµ„é‡‘å°±ç±»ä¼¼äºè®¡ç®—æœºç³»ç»Ÿçš„èµ„æºï¼Œè´·æ¬¾ä¸šåŠ¡ç±»ä¼¼äºè®¡ç®—æœºçš„èµ„æºåˆ†é…ã€‚é“¶è¡Œå®¶ç®—æ³•èƒ½é¢„æµ‹ä¸€ç¬”è´·æ¬¾ä¸šåŠ¡å¯¹é“¶è¡Œæ˜¯å¦æ˜¯å®‰å…¨çš„ï¼Œè¯¥ç®—æ³•ä¹Ÿèƒ½é¢„æµ‹ä¸€æ¬¡èµ„æºåˆ†é…å¯¹è®¡ç®—æœºç³»ç»Ÿæ˜¯å¦æ˜¯å®‰å…¨çš„ã€‚ å½“å‰çŠ¶æ€ä¸‹ï¼ŒæŸè¿›ç¨‹ç”³è¯·èµ„æºï¼› ç³»ç»Ÿå‡è®¾å°†èµ„æºåˆ†ç»™è¯¥è¿›ç¨‹ï¼Œæ»¡è¶³å®ƒçš„éœ€æ±‚ï¼› æ£€æŸ¥åˆ†é…åçš„ç³»ç»ŸçŠ¶æ€æ˜¯å¦æ˜¯å®‰å…¨çš„ï¼Œå¦‚æœæ˜¯å®‰å…¨ï¼Œå°±ç¡®è®¤æœ¬æ¬¡åˆ†é…ï¼›å¦‚æœç³»ç»Ÿæ˜¯ä¸å®‰å…¨çš„ï¼Œå°±å–æ¶ˆæœ¬æ¬¡åˆ†é…å¹¶é˜»å¡è¯¥è¿›ç¨‹(è¿™ä¸€æ­¥ä¹Ÿè¢«ç§°ä¸ºå®‰å…¨æ€§ç®—æ³•) é“¶è¡Œå®¶ç®—æ³•çš„æ•°æ®ç»“æ„ä¸ºå®ç°é“¶è¡Œå®¶ç®—æ³•ï¼Œç³»ç»Ÿä¸­å¿…é¡»è®¾ç½®è‹¥å¹²æ•°æ®ç»“æ„ å¯åˆ©ç”¨èµ„æºå‘é‡ Availableè¿™æ˜¯ä¸€ä¸ªå«æœ‰ m ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œå…¶ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ä»£è¡¨ä¸€ç±»å¯åˆ©ç”¨çš„èµ„æºæ•°ç›®ï¼Œå…¶åˆå§‹å€¼æ˜¯ç³»ç»Ÿä¸­æ‰€é…ç½®çš„è¯¥ç±»å…¨éƒ¨å¯ç”¨èµ„æºçš„æ•°ç›®ï¼Œå…¶æ•°å€¼éšè¯¥ç±»èµ„æºçš„åˆ†é…å’Œå›æ”¶è€ŒåŠ¨æ€åœ°æ”¹å˜ã€‚å¦‚æœ Available[j]= Kï¼Œåˆ™è¡¨ç¤ºç³»ç»Ÿä¸­ç°æœ‰ Rj ç±»èµ„æº K ä¸ªã€‚ æœ€å¤§éœ€æ±‚çŸ©é˜µ Maxè¿™æ˜¯ä¸€ä¸ª nÃ—m çš„çŸ©é˜µï¼Œå®ƒå®šä¹‰äº†ç³»ç»Ÿä¸­ n ä¸ªè¿›ç¨‹ä¸­çš„æ¯ä¸€ä¸ªè¿›ç¨‹å¯¹ m ç±»èµ„æºçš„æœ€å¤§éœ€æ±‚ã€‚å¦‚æœ Max[i,j]=Kï¼Œåˆ™è¡¨ç¤ºè¿›ç¨‹ i éœ€è¦ Rj ç±»èµ„æºçš„æœ€å¤§æ•°ç›®ä¸º Kã€‚ åˆ†é…çŸ©é˜µ Allocationè¿™ä¹Ÿæ˜¯ä¸€ä¸ª nÃ—m çš„çŸ©é˜µï¼Œå®ƒå®šä¹‰äº†ç³»ç»Ÿä¸­æ¯ä¸€ç±»èµ„æºå½“å‰å·²åˆ†é…ç»™æ¯ä¸€è¿›ç¨‹çš„èµ„æºæ•°ã€‚å¦‚æœ Allocation[i,j]=Kï¼Œåˆ™è¡¨ç¤ºè¿›ç¨‹ i å½“å‰å·²åˆ†å¾— Rj ç±»èµ„æºçš„æ•°ç›®ä¸º Kã€‚ éœ€æ±‚çŸ©é˜µ Needè¿™ä¹Ÿæ˜¯ä¸€ä¸ª nÃ—m çš„çŸ©é˜µï¼Œç”¨ä»¥è¡¨ç¤ºæ¯ä¸€ä¸ªè¿›ç¨‹å°šéœ€çš„å„ç±»èµ„æºæ•°ã€‚å¦‚æœ Need[i,j]=Kï¼Œåˆ™è¡¨ç¤ºè¿›ç¨‹ i è¿˜éœ€è¦ Rj ç±»èµ„æº K ä¸ªï¼Œæ–¹èƒ½å®Œæˆå…¶ä»»åŠ¡ã€‚ è®¾ $Request_i$ æ˜¯è¿›ç¨‹ $P_i$ çš„è¯·æ±‚å‘é‡ï¼Œå¦‚æœ $Request_i[j] = K$ï¼Œè¡¨ç¤ºè¿›ç¨‹ $P_i$ éœ€è¦ K ä¸ª $R_j$ ç±»å‹çš„èµ„æºã€‚å½“ Pi å‘å‡ºèµ„æºè¯·æ±‚åï¼Œç³»ç»ŸæŒ‰ä¸‹è¿°æ­¥éª¤è¿›è¡Œæ£€æŸ¥ï¼š(1) å¦‚æœ $Request_i[j] \\leq Need[i,j]$ï¼Œä¾¿è½¬å‘æ­¥éª¤ 2ï¼›å¦åˆ™è®¤ä¸ºå‡ºé”™ï¼Œå› ä¸ºå®ƒæ‰€ç”³è¯·çš„èµ„æºæ•°å·²è¶…è¿‡å®ƒæ‰€å®£å¸ƒçš„éœ€è¦çš„èµ„æºæ•°ã€‚(2) å¦‚æœ $Request_i[j] \\leq Available[j]$ï¼Œä¾¿è½¬å‘æ­¥éª¤(3)ï¼›å¦åˆ™ï¼Œ è¡¨ç¤ºå°šæ— è¶³å¤Ÿèµ„æºï¼ŒPi é¡»ç­‰å¾…ã€‚(3) ç³»ç»Ÿè¯•æ¢ç€æŠŠèµ„æºåˆ†é…ç»™è¿›ç¨‹ Piï¼Œå¹¶ä¿®æ”¹ä¸‹é¢æ•°æ®ç»“æ„ä¸­çš„æ•°å€¼ï¼š$Available[j]=Available[j]-Requesti[j];$$Allocation[i,j]=Allocation[i,j]+Requesti[j];$$Need[i,j]=Need[i,j]-Requesti[j];$(4) ç³»ç»Ÿæ‰§è¡Œå®‰å…¨æ€§ç®—æ³•ï¼Œæ£€æŸ¥æ­¤æ¬¡èµ„æºåˆ†é…åï¼Œç³»ç»Ÿæ˜¯å¦å¤„äºå®‰å…¨çŠ¶æ€ã€‚è‹¥å®‰å…¨ï¼Œæ‰æ­£å¼å°†èµ„æºåˆ†é…ç»™è¿›ç¨‹ Piï¼Œä»¥å®Œæˆæœ¬æ¬¡åˆ†é…ï¼›å¦åˆ™ï¼Œ å°†æœ¬æ¬¡çš„è¯•æ¢åˆ†é…ä½œåºŸï¼Œæ¢å¤åŸæ¥çš„èµ„æºåˆ†é…çŠ¶æ€ï¼Œè®©è¿›ç¨‹ Pi ç­‰å¾…ã€‚ å®‰å…¨æ€§ç®—æ³•(1) è®¾ç½®ä¸¤ä¸ªå‘é‡ï¼šå·¥ä½œå‘é‡ Work: å®ƒè¡¨ç¤ºç³»ç»Ÿå¯æä¾›ç»™è¿›ç¨‹ç»§ç»­è¿è¡Œæ‰€éœ€çš„å„ç±»èµ„æºæ•°ç›®ï¼Œå®ƒå«æœ‰ m ä¸ªå…ƒç´ ï¼Œåœ¨æ‰§è¡Œå®‰å…¨ç®—æ³•å¼€å§‹æ—¶ï¼ŒWork åˆå§‹åŒ–ä¸º Available;Finish: å®ƒè¡¨ç¤ºç³»ç»Ÿæ˜¯å¦æœ‰è¶³å¤Ÿçš„èµ„æºåˆ†é…ç»™è¿›ç¨‹ï¼Œä½¿ä¹‹è¿è¡Œå®Œæˆã€‚å¼€å§‹æ—¶å…ˆåˆå§‹åŒ– Finish[i]=false; å½“æœ‰è¶³å¤Ÿèµ„æºåˆ†é…ç»™è¿›ç¨‹æ—¶ï¼Œ å†ä»¤ Finish[i]=trueã€‚(2) ä»è¿›ç¨‹é›†åˆä¸­æ‰¾åˆ°ä¸€ä¸ªèƒ½æ»¡è¶³ä¸‹è¿°æ¡ä»¶çš„è¿›ç¨‹ï¼š$Finish[i] = false$$Need[i,j] \\leq Work[j]$è‹¥æ‰¾åˆ°ï¼Œ æ‰§è¡Œæ­¥éª¤(3)ï¼Œå¦åˆ™ï¼Œæ‰§è¡Œæ­¥éª¤(4)ã€‚(3) å½“è¿›ç¨‹ Pi è·å¾—èµ„æºåï¼Œå¯é¡ºåˆ©æ‰§è¡Œï¼Œç›´è‡³å®Œæˆï¼Œå¹¶é‡Šæ”¾å‡ºåˆ†é…ç»™å®ƒçš„èµ„æºï¼Œæ•…åº”æ‰§è¡Œï¼š$Work[j]=Work[j]+Allocation[i,j];$$Finish[i]=true;$go to step 2;(4) å¦‚æœæ‰€æœ‰è¿›ç¨‹çš„$Finish[i]=true$éƒ½æ»¡è¶³ï¼Œ åˆ™è¡¨ç¤ºç³»ç»Ÿå¤„äºå®‰å…¨çŠ¶æ€ï¼›å¦åˆ™ï¼Œç³»ç»Ÿå¤„äºä¸å®‰å…¨çŠ¶æ€ã€‚ æ­»é”çš„æ£€æµ‹ä¸è§£é™¤å¦‚æœç³»ç»Ÿä¸æ„¿æ„é™„åŠ å¤ªå¤šçº¦æŸæ¡ä»¶é¢„é˜²æ­»é”ï¼Œä¹Ÿä¸å¸Œæœ›ç³»ç»Ÿé¢å¤–å¼€é”€é¢„æµ‹å¹¶é¿å…æ­»é”ï¼Œé‚£ä¹ˆï¼Œåªèƒ½å…è®¸æ­»é”å‡ºç°ï¼Œç„¶åï¼Œå†è§£é™¤å®ƒã€‚å› æ­¤ï¼Œç³»ç»Ÿéœ€è¦åˆ©ç”¨æŸç§æ–¹æ³•æ¥æ£€æµ‹æ­»é”ã€‚ æ­»é”æ£€æµ‹åŒ–ç®€èµ„æºåˆ†é…å›¾â€”æ£€æµ‹æ­»é”èµ„æºåˆ†é…å›¾(Resource Allocation Graph)è¯¥å›¾æ˜¯ç”±ä¸€ç»„ç»“ç‚¹ N å’Œä¸€ç»„è¾¹ E æ‰€ç»„æˆçš„ä¸€ä¸ªå¯¹å¶Gï¼ï¼ˆN,Eï¼‰ï¼Œå…¶ä¸­ï¼š æŠŠ N åˆ†ä¸ºä¸¤ä¸ªäº’æ–¥çš„å­é›†ï¼Œå³ä¸€ç»„è¿›ç¨‹ç»“ç‚¹P={P1,P2ï¼Œâ€¦ï¼ŒPn}å’Œä¸€ç»„èµ„æºç»“ç‚¹R={R1, R2 ï¼Œâ€¦ï¼Œ Rn}ï¼ŒNï¼PUR å‡¡å±äº E ä¸­çš„ä¸€ä¸ªè¾¹ eâˆˆE éƒ½è¿æ¥ç€ P ä¸­çš„ä¸€ä¸ªç»“ç‚¹å’Œ R ä¸­çš„ä¸€ä¸ªç»“ç‚¹e={Pi,Rj}è¡¨ç¤ºè¿›ç¨‹ Pi è¯·æ±‚ä¸€ä¸ªå•ä½çš„ Rj èµ„æºe={Rj,Pi}è¡¨ç¤ºæŠŠä¸€ä¸ªå•ä½çš„èµ„æº Rj åˆ†é…ç»™è¿›ç¨‹ Pi Steps:ç¬¬ä¸€æ­¥:å…ˆçœ‹ç³»ç»Ÿè¿˜å‰©ä¸‹å¤šå°‘èµ„æºæ²¡åˆ†é…ï¼Œå†çœ‹æœ‰å“ªäº›è¿›ç¨‹æ˜¯ä¸é˜»å¡çš„ï¼ˆå³ç³»ç»Ÿæœ‰è¶³å¤Ÿçš„ç©ºé—²èµ„æºåˆ†é…ç»™å®ƒï¼‰ç¬¬äºŒæ­¥:æŠŠä¸é˜»å¡çš„è¿›ç¨‹çš„æ‰€æœ‰è¾¹éƒ½å»æ‰ï¼Œå½¢æˆä¸€ä¸ªå­¤ç«‹çš„ç‚¹ï¼Œå†æŠŠç³»ç»Ÿåˆ†é…ç»™è¿™ä¸ªè¿›ç¨‹çš„èµ„æºå›æ”¶å›æ¥ç¬¬ä¸‰æ­¥:é‡å¤ä¸€äºŒæ­¥ç¬¬å››æ­¥:æœ€åï¼Œè‹¥æ‰€æœ‰çš„èµ„æºå’Œè¿›ç¨‹éƒ½å¯ä»¥å˜æˆå­¤ç«‹çš„ç‚¹ã€‚è¿™æ ·çš„å›¾å°±å«åšâ€œå¯å®Œå…¨ç®€åŒ–â€ **æ­»é”å®šç†**ï¼šS ä¸ºæ­»é”çŠ¶æ€å½“ä¸”ä»…å½“ S çŠ¶æ€çš„èµ„æºåˆ†é…å›¾æ˜¯ä¸å¯å®Œå…¨ç®€åŒ–çš„ã€‚ æ­»é”æ£€æµ‹ä¸­çš„æ•°æ®ç»“æ„(1) å¯åˆ©ç”¨èµ„æºå‘é‡ Availableï¼Œå®ƒè¡¨ç¤ºäº† m ç±»èµ„æºä¸­æ¯ä¸€ç±»èµ„æºçš„å¯ç”¨æ•°ç›®ã€‚(2) æŠŠä¸å†å ç”¨èµ„æºçš„è¿›ç¨‹(å³å‘é‡ Allocation å’Œ Request ä¸º 0 çš„è¿›ç¨‹)è®°å…¥ L è¡¨ä¸­ï¼Œ å³L = LiâˆªL(3) ä»è¿›ç¨‹é›†åˆä¸­æ‰¾åˆ°ä¸€ä¸ª Requestiâ‰¤Work çš„è¿›ç¨‹ï¼Œåšå¦‚ä¸‹å¤„ç†ï¼šâ‘  å°†å…¶èµ„æºåˆ†é…å›¾ç®€åŒ–ï¼Œé‡Šæ”¾å‡ºèµ„æºï¼Œå¢åŠ å·¥ä½œå‘é‡ $Work=Work+Allocation_i$ã€‚ â‘¡ å°†å®ƒè®°å…¥ L è¡¨ä¸­ã€‚(4) è‹¥ä¸èƒ½æŠŠæ‰€æœ‰è¿›ç¨‹éƒ½è®°å…¥ L è¡¨ä¸­ï¼Œ ä¾¿è¡¨æ˜ç³»ç»ŸçŠ¶æ€ S çš„èµ„æºåˆ†é…å›¾æ˜¯ä¸å¯å®Œå…¨ç®€åŒ–çš„ã€‚ å› æ­¤ï¼Œè¯¥ç³»ç»ŸçŠ¶æ€å°†å‘ç”Ÿæ­»é”ã€‚ 12345678910Work = Available;L = {Li| Allocation_i = 0 âˆ© Request_i = 0};for(i=1; Pi not in L; i++){ if Requestiâ‰¤Work{ Work=Work+Allocation_i; Li=Piï¼› L=LiâˆªL; }}deadlock= !(L={p1, p2, â€¦, pn}); ä¾‹é¢˜p ä¸ªè¿›ç¨‹å…±äº« m ä¸ªåŒç±»èµ„æºï¼Œæ¯ä¸€èµ„æºåœ¨ä»»ä¸€æ—¶åˆ»åªèƒ½ä¾›ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨ï¼Œæ¯ä¸€è¿›ç¨‹å¯¹ä»»ä¸€èµ„æºéƒ½åªèƒ½ä½¿ç”¨ä¸€æœ‰é™æ—¶é—´ï¼Œä½¿ç”¨å®Œä¾¿ç«‹å³é‡Šæ”¾ï¼Œå¹¶ä¸”æ¯ä¸ªè¿›ç¨‹å¯¹è¯¥ç±»èµ„æºçš„æœ€å¤§éœ€æ±‚é‡å°äºè¯¥ç±»èµ„æºçš„æ•°ç›®ã€‚è®¾æ‰€æœ‰è¿›ç¨‹å¯¹èµ„æºçš„æœ€å¤§éœ€è¦ä¹‹å’Œå°äº p+mã€‚è¯•è¯ï¼šåœ¨ç³»ç»Ÿä¸­ä¸ä¼šå‘ç”Ÿæ­»é”ã€‚è¯æ˜ï¼šå‡è®¾ç³»ç»Ÿå‘ç”Ÿæ­»é”ã€‚è®¾ Max(i)ä¸ºè¿›ç¨‹ i çš„æœ€å¤§èµ„æºéœ€æ±‚é‡ï¼ŒNeed(i)ä¸ºè¿›ç¨‹ i å°šéœ€èµ„æºé‡ï¼ŒAllocation(i)ä¸ºå·²åˆ†é…èµ„æºé‡ï¼Œåˆ™ç³»ç»Ÿåœ¨ä»»æ„æ—¶åˆ»æœ‰ï¼š$\\sum_{i=1}^{p}Max(i) = \\sum_{i=1}^{p} Need(i) + \\sum_{i=1}^{p}Allocation(i) \\lt p+ mâ‘ $ç³»ç»Ÿå‘ç”Ÿæ­»é”ï¼Œåˆ™ä¸€æ–¹é¢è¯´æ˜æ‰€æœ‰ m ä¸ªèµ„æºéƒ½åº”è¯¥å·²ç»åˆ†é…å‡ºå»ï¼š$\\sum_{i=1}^{p} Allocation(i)=mâ‘¡$å¦ä¸€æ–¹é¢ï¼Œè¿›ç¨‹å°†å¤„äºæ— é™ç­‰å¾…çŠ¶æ€ä¹‹ä¸­ã€‚ç”± â‘  â‘¡ å¯ä»¥å¾—åˆ°ï¼š$\\sum_{i=1}^{p} Need(i) \\lt pâ‘¢$å³æ­»é”å p ä¸ªè¿›ç¨‹è¿˜éœ€è¦çš„èµ„æºé‡ä¹‹å’Œå°‘äº pï¼Œè¿™å°±æ„å‘³ç€æ­¤åˆ»è‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹è­¬å¦‚ jï¼Œå·²ç»è·å¾—äº†æ‰€éœ€è¦çš„å…¨éƒ¨èµ„æºæ•°ï¼Œå³$Needï¼ˆjï¼‰=0$ã€‚ä½†æ˜¯ç³»ç»Ÿå‘ç”Ÿæ­»é”æ—¶ï¼Œæ¯ä¸ªè¿›ç¨‹è‡³å°‘è¿˜éœ€è¦ä¸€ä¸ªèµ„æºå•ä½ï¼Œå³$\\sum_{i=1}^{p} Need(i) \\geq p$ï¼Œä¸ç­‰å¼ â‘¢ çŸ›ç›¾ã€‚æ­¤å¤–ï¼Œæ—¢ç„¶è¯¥è¿›ç¨‹å·²ç»è·å¾—äº†æ‰€éœ€è¦çš„å…¨éƒ¨èµ„æºæ•°ï¼Œé‚£ä¹ˆå°±èƒ½å®Œæˆå…¶ä»»åŠ¡å¹¶é‡Šæ”¾å æœ‰çš„èµ„æºï¼Œä»¥ä¿è¯ç³»ç»Ÿèƒ½è¿›ä¸€æ­¥å‰è¿›ï¼Œè¿™ä¸å‰é¢çš„å‡å®šæ­»é”çŸ›ç›¾ã€‚ æ­»é”çš„è§£é™¤å½“å‘ç°æœ‰è¿›ç¨‹æ­»é”æ—¶ï¼Œå¸¸é‡‡ç”¨çš„ä¸¤ç§æ–¹æ³•æ˜¯è§£é™¤æ­»é”ï¼š å‰¥å¤ºèµ„æºã€‚ä»å…¶å®ƒè¿›ç¨‹å‰¥å¤ºè¶³å¤Ÿæ•°é‡çš„èµ„æºç»™æ­»é”è¿›ç¨‹ï¼Œä»¥è§£é™¤æ­»é”çŠ¶æ€ã€‚ æ’¤æ¶ˆè¿›ç¨‹ã€‚æœ€ç®€å•çš„æ’¤æ¶ˆè¿›ç¨‹çš„æ–¹æ³•ï¼Œæ˜¯ä½¿å…¨éƒ¨æ­»é”è¿›ç¨‹éƒ½å¤­æŠ˜æ‰ï¼›æˆ–è€…æŒ‰ç…§æŸç§é¡ºåºé€ä¸ªåœ°æ’¤æ¶ˆè¿›ç¨‹ï¼Œç›´è‡³æœ‰è¶³å¤Ÿçš„èµ„æºå¯ç”¨ï¼Œä½¿æ­»é”çŠ¶æ€æ¶ˆé™¤ä¸ºæ­¢ã€‚ æŒ‰ç…§è§£é™¤æ­»é”å¤æ‚åº¦é€’å¢çš„é¡ºåºåˆ—å‡ºè§£é™¤æ­»é”çš„æ–¹æ³•ï¼š æ’¤æ¶ˆæ­»é”è¿›ç¨‹ -è¯¥æ–¹æ³•æ˜¯ç›®å‰æ“ä½œç³»ç»Ÿä¸­è§£é™¤æ­»é”çš„å¸¸ç”¨æ–¹æ³•ã€‚ æŠŠæ­»é”è¿›ç¨‹æ¢å¤åˆ°å‰ä¸€ä¸ªæ£€æŸ¥ç‚¹ï¼Œé‡æ–°æ‰§è¡Œæ¯ä¸ªè¿›ç¨‹ã€‚ æŒ‰ç…§æŸç§åŸåˆ™é€ä¸ªé€‰æ‹©æ­»é”è¿›ç¨‹è¿›è¡Œæ’¤æ¶ˆï¼Œç›´åˆ°è§£é™¤ç³»ç»Ÿæ­»é”ã€‚ æŒ‰ç…§æŸç§åŸåˆ™é€ä¸ªå‰¥å¤ºè¿›ç¨‹èµ„æºï¼Œç›´åˆ°è§£é™¤æ­»é”ã€‚ ç¬¬ä¸‰ç§å’Œç¬¬å››ç§æ–¹æ³•éœ€è¦é€‰æ‹©ç³»ç»Ÿä»˜å‡ºä»£ä»·æœ€å°çš„è¿›ç¨‹ï¼Œæœ€å°ä»£ä»·åŸåˆ™ï¼š åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒèŠ±è´¹å¤„ç†æœºçš„æ—¶é—´æœ€å°‘çš„è¿›ç¨‹ï¼› åˆ°ç›®å‰ä¸ºæ­¢ï¼Œäº§ç”Ÿè¾“å‡ºæœ€å°‘çš„è¿›ç¨‹ï¼› ä¼°è®¡æœªæ‰§è¡Œéƒ¨åˆ†æœ€å¤šçš„è¿›ç¨‹ï¼› åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå·²è·å¾—èµ„æºé‡æœ€å°‘çš„è¿›ç¨‹ï¼› ä¼˜å…ˆçº§æœ€ä½çš„è¿›ç¨‹ã€‚ä¸ºæŠŠç³»ç»Ÿä»æ­»é”çŠ¶æ€ä¸­è§£è„±å‡ºæ¥ï¼Œæ‰€èŠ±è´¹çš„ä»£ä»·(æœ€å°)å¯è¡¨ç¤ºä¸ºï¼š $R(S)_{min} = \\sum_{1\\lt i\\lt j\\lt n} min{C_{ij}}$ $R(S)_{min}$ è¡¨ç¤ºä»æ­»é”çŠ¶æ€ä¸­è§£è„±å‡ºæ¥çš„æœ€å°ä»£ä»·ã€‚ $C_{ui}$, $C_{uj}$, $C_{uk}$, â€¦ è¡¨ç¤ºå„ä¸ªæ­»é”å‚ä¸è€…ï¼ˆä¾‹å¦‚çº¿ç¨‹ã€è¿›ç¨‹æˆ–äº‹åŠ¡ï¼‰éœ€è¦ä»˜å‡ºçš„ä»£ä»·ã€‚è¿™äº›ä»£ä»·å¯èƒ½æ˜¯ä¸åŒçš„ï¼Œå› ä¸ºæ¯ä¸ªå‚ä¸è€…å¯èƒ½åœ¨ä¸åŒçš„çŠ¶æ€ï¼Œéœ€è¦æ‰§è¡Œçš„æ“ä½œä¹Ÿå¯èƒ½ä¸åŒã€‚ $min{C_{ui}}$, $min{C_{uj}}$, $min{C_{uk}}$, â€¦ è¡¨ç¤ºé€‰æ‹©æ¯ä¸ªæ­»é”å‚ä¸è€…éœ€è¦ä»˜å‡ºçš„æœ€å°ä»£ä»·ã€‚è¿™æ˜¯å› ä¸ºåœ¨è§£å†³æ­»é”æ—¶ï¼Œé€šå¸¸ä¼šé€‰æ‹©ä½¿å¾—æ€»ä»£ä»·æœ€å°çš„ç­–ç•¥ã€‚","link":"/UESTC/OS/Ch3-2TheDeadLock/"},{"title":"The Processor Scheduling","text":"å¤„ç†æœºè°ƒåº¦çš„å±‚æ¬¡ Process Scheduling Levelsæ¦‚è¿° Overviewå¤„ç†æœºæ˜¯è®¡ç®—æœºç³»ç»Ÿä¸­çš„é‡è¦èµ„æº,åœ¨å¤šé“ç¨‹åºç¯å¢ƒä¸‹[Ch1-1OSIntroduction#æ“ä½œç³»ç»Ÿçš„å‘å±•è¿‡ç¨‹]ï¼Œè¿›ç¨‹æ•°ç›®é€šå¸¸å¤šäºå¤„ç†æœºçš„æ•°ç›®,ç³»ç»Ÿå¿…é¡»æŒ‰ä¸€å®šæ–¹æ³•åŠ¨æ€åœ°æŠŠå¤„ç†æœºåˆ†é…ç»™å°±ç»ªé˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªè¿›ç¨‹;å¤„ç†æœºåˆ©ç”¨ç‡å’Œç³»ç»Ÿæ€§èƒ½ï¼ˆååé‡ã€å“åº”æ—¶é—´ï¼‰åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºå¤„ç†æœºè°ƒåº¦ WHATï¼šæŒ‰ä»€ä¹ˆåŸåˆ™åˆ†é… CPU è°ƒåº¦ç®—æ³• WHENï¼šä½•æ—¶åˆ†é… CPU è°ƒåº¦çš„æ—¶æœº HOWï¼šå¦‚ä½•åˆ†é… CPU è°ƒåº¦è¿‡ç¨‹åŠè¿›ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ ä½œä¸š JOBä½œä¸šæ˜¯ç”¨æˆ·åœ¨ä¸€æ¬¡ç®—é¢˜è¿‡ç¨‹ä¸­æˆ–ä¸€æ¬¡äº‹åŠ¡å¤„ç†ä¸­ï¼Œè¦æ±‚è®¡ç®—æœºç³»ç»Ÿæ‰€åšçš„å·¥ä½œçš„é›†åˆä½œä¸šæ˜¯ä¸€ä¸ªæ¯”ç¨‹åºæ›´å¹¿æ³›çš„æ¦‚å¿µï¼Œå¯ä»¥åŒ…å«å¤šä¸ªç¨‹åºå’Œæ•°æ®ï¼Œè¿˜é…æœ‰ä¸€ä»½ä½œä¸šè¯´æ˜ä¹¦ï¼Œç³»ç»Ÿæ ¹æ®ä½œä¸šè¯´æ˜ä¹¦æ¥å¯¹ä½œä¸šä¸­çš„ç¨‹åºè¿›è¡Œæ§åˆ¶ã€‚åœ¨æ‰¹å¤„ç†ç³»ç»Ÿä¸­ï¼Œä»¥ä½œä¸šä¸ºå•ä½ä»å¤–å­˜è°ƒå…¥å†…å­˜ç”¨æˆ·ä¸ºäº†è®©è®¡ç®—æœºå®ŒæˆæŸä¸ªç‰¹å®šä»»åŠ¡ï¼Œé¦–å…ˆç¼–å†™æˆæºç¨‹åºï¼Œç„¶åæäº¤ç»™è®¡ç®—æœºé€šè¿‡ç¼–è¯‘æˆ–æ±‡ç¼–ã€è¿æ¥ã€è£…é…ã€è¿è¡Œç­‰æ­¥éª¤ï¼Œæœ€ç»ˆç”±è®¡ç®—æœºè¾“å‡ºç”¨æˆ·æ‰€éœ€è¦çš„è¿è¡Œç»“æœã€‚ä»è®¡ç®—æœºç®¡ç†çš„è§’åº¦çœ‹ï¼Œä¸Šè¿°ä¸€ç³»åˆ—çš„ç”±è®¡ç®—æœºæ‰§è¡Œçš„ä»»åŠ¡çš„é›†åˆå°±æ˜¯ä½œä¸šã€‚ Job and task are today vague, ambiguous terms, especially task. A â€œjobâ€ often means a set of processes, while a â€œtaskâ€ may mean a process, a thread, a process or thread, or, distinctly, a unit of work done by a process or thread.job, task and process, whatâ€™s the difference ä½œä¸šæ­¥ Job Stepè®¡ç®—æœºå®Œæˆä½œä¸šæ˜¯é€šè¿‡æ‰§è¡Œä¸€ç³»åˆ—æœ‰åºçš„å·¥ä½œæ­¥éª¤è¿›è¡Œçš„ï¼Œæ¯ä¸ªæ­¥éª¤å®Œæˆä½œä¸šçš„ä¸€éƒ¨åˆ†ç‰¹å®šå·¥ä½œ;æŠŠè®¡ç®—æœºç³»ç»Ÿå®Œæˆä¸€ä¸ªä½œä¸šæ‰€éœ€çš„ä¸€ç³»åˆ—æœ‰åºçš„ç›¸å¯¹ç‹¬ç«‹çš„å·¥ä½œæ­¥éª¤ç§°ä¸ºä½œä¸šæ­¥ä½œä¸šçš„å„ä¸ªä½œä¸šæ­¥è™½ç„¶åŠŸèƒ½ç›¸å¯¹ç‹¬ç«‹ï¼Œä½†å®ƒä»¬ä¹‹é—´ç›¸äº’å…³è”ï¼Œå¾€å¾€æ˜¯ä¸€ä¸ªä½œä¸šæ­¥çš„æ‰§è¡Œéœ€è¦ä½¿ç”¨ä¸Šä¸€ä¸ªä½œä¸šæ­¥çš„æ‰§è¡Œç»“æœã€‚ ä»ç”¨æˆ·æŠŠæºç¨‹åºæäº¤ç»™è®¡ç®—æœºç³»ç»Ÿåˆ°å¾—å‡ºè¿ç®—ç»“æœè¦ç»è¿‡è‹¥å¹²ä¸ªå·¥ä½œæ­¥éª¤ï¼Œé¦–å…ˆè®¡ç®—æœºç³»ç»Ÿè¦å¯¹ç”¨æˆ·çš„æºç¨‹åºè¿›è¡Œç¼–è¾‘å·¥ä½œæ¥è¿›è¡Œè¯­æ³•æ£€æŸ¥ï¼Œå†ç”±ç¼–è¯‘æˆ–æ±‡ç¼–å·¥ä½œç”Ÿæˆç›®æ ‡ä»£ç ã€‚ç”±è¿æ¥å·¥ä½œå½¢æˆè£…å…¥æ¨¡å—ï¼Œç„¶åé€šè¿‡è£…å…¥å·¥ä½œå°†è£…å…¥æ¨¡å—è£…å…¥å†…å­˜ã€‚æœ€åç”±è¿è¡Œå·¥ä½œå¾—å‡ºè¿è¡Œç»“æœã€‚5 ä¸ªæ­¥éª¤ï¼Œæ¯æ­¥éƒ½å®Œæˆä¸€é¡¹ç›¸å¯¹ç‹¬ç«‹çš„å·¥ä½œ ä½œä¸šçŠ¶æ€è½¬æ¢ Job State Transition JCBä½œä¸šæäº¤ç»™ç³»ç»Ÿè¿›å…¥åå¤‡çŠ¶æ€åï¼Œç³»ç»Ÿå°†ä¸ºæ¯ä¸ªä½œä¸šå»ºç«‹ä¸€ä¸ªä½œä¸šæ§åˆ¶å— JCBã€‚JCB åœ¨ä½œä¸šçš„æ•´ä¸ªè¿è¡Œè¿‡ç¨‹ä¸­å§‹ç»ˆå­˜åœ¨ï¼Œå¹¶ä¸”å…¶å†…å®¹ä¸ä½œä¸šçš„çŠ¶æ€åŒæ­¥åœ°åŠ¨æ€å˜åŒ–ã€‚åªæœ‰å½“ä½œä¸šå®Œæˆå¹¶é€€å‡ºç³»ç»Ÿæ—¶ï¼ŒJCB æ‰è¢«æ’¤æ¶ˆã€‚å¯ä»¥è¯´ï¼ŒJCB æ˜¯ä¸€ä¸ªä½œä¸šåœ¨ç³»ç»Ÿä¸­å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—ï¼Œç³»ç»Ÿæ ¹æ® JCB æ‰æ„ŸçŸ¥åˆ°ä½œä¸šçš„å­˜åœ¨ä½œä¸šæ§åˆ¶å— JCB ä¸­åŒ…å«äº†å¯¹ä½œä¸šè¿›è¡Œç®¡ç†çš„å¿…è¦ä¿¡æ¯ï¼ŒJCB ä¸­çš„ä¿¡æ¯ä¸€éƒ¨åˆ†æ˜¯ä»ç”¨æˆ·æä¾›çš„ä½œä¸šæ§åˆ¶å¡æˆ–ä½œä¸šè¯´æ˜ä¹¦ä¸­å¾—åˆ°ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯è®°å½•ä½œä¸šè¿è¡Œè¿‡ç¨‹ä¸­çš„åŠ¨æ€ä¿¡æ¯JCB çš„å…·ä½“å†…å®¹å› ç³»ç»Ÿä¸åŒè€Œå¼‚ ä½œä¸šå èµ„æºè¦æ±‚ é¢„ä¼°çš„è¿è¡Œæ—¶é—´ æœ€è¿Ÿå®Œæˆæ—¶é—´ è¦æ±‚çš„å†…å­˜é‡ è¦æ±‚å¤–è®¾ç±»å‹ã€å°æ•° è¦æ±‚çš„æ–‡ä»¶é‡å’Œè¾“å‡ºé‡ èµ„æºä½¿ç”¨æƒ…å†µ è¿›å…¥ç³»ç»Ÿæ—¶é—´ å¼€å§‹è¿è¡Œæ—¶é—´ å·²è¿è¡Œæ—¶é—´ å†…å­˜åœ°å€ å¤–è®¾å°å· ç±»å‹çº§åˆ« æ§åˆ¶æ–¹å¼ ä½œä¸šç±»å‹ ä¼˜å…ˆçº§ çŠ¶æ€ ç”¨æˆ·è´¦æˆ·â€¦â€¦ å¤„ç†æœºè°ƒåº¦çš„å±‚æ¬¡ åœ¨å¤šé“ç¨‹åºç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªä½œä¸šä»æäº¤åˆ°æ‰§è¡Œï¼Œé€šå¸¸éƒ½è¦ç»å†å¤šçº§è°ƒåº¦,å¦‚é«˜çº§è°ƒåº¦ã€ä½çº§è°ƒåº¦ã€ä¸­çº§è°ƒåº¦ä»¥åŠ I/O è°ƒåº¦ç­‰ ç³»ç»Ÿçš„è¿è¡Œæ€§èƒ½åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºè°ƒåº¦,å¦‚ååé‡çš„å¤§å°ã€å‘¨è½¬æ—¶é—´çš„é•¿çŸ­ã€å“åº”çš„åŠæ—¶æ€§ç­‰ è°ƒåº¦æ˜¯å¤šé“ç³»ç»Ÿçš„å…³é”® ç±»å‹ è¿è¡Œé¢‘ç‡ è¿è¡Œæ—¶é—´ ç®—æ³•å¤æ‚æ€§ å­˜å‚¨ OS è¿›ç¨‹è°ƒåº¦ é«˜ çŸ­ ä½ å†…å­˜ä¸­ æ‰¹å¤„ç†,å®æ—¶,åˆ†æ—¶ ä¸­ç¨‹è°ƒåº¦ ä¸­ è¾ƒçŸ­ ä¸­ å†…å¤–å­˜äº’æ¢ æ‰¹å¤„ç†,å®æ—¶,åˆ†æ—¶ ä½œä¸šè°ƒåº¦ ä½ é•¿ é«˜ å¤–å­˜åˆ°å†…å­˜ æ‰¹å¤„ç† å¼•èµ·è¿›ç¨‹è°ƒåº¦çš„äº‹ä»¶ï¼š æ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹æ­£å¸¸ç»ˆæ­¢æˆ–å¼‚å¸¸ç»ˆæ­¢ æ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹å› æŸäº‹ä»¶è€Œé˜»å¡(å¦‚æå‡º IO è¯·æ±‚åé˜»å¡,è°ƒç”¨wait()åé˜»å¡,åœ¨è¿›ç¨‹é€šä¿¡æˆ–åŒæ­¥è¿‡ç¨‹ä¸­æ‰§è¡Œäº†æŸç§åŸè¯­æ“ä½œï¼Œå¦‚ Pã€V æ“ä½œåŸè¯­ï¼ŒBlock åŸè¯­ï¼Œ Wakeup åŸè¯­ç­‰åé˜»å¡) åœ¨å¼•å…¥æ—¶é—´ç‰‡çš„ç³»ç»Ÿä¸­ï¼Œæ—¶é—´ç‰‡ç”¨å®Œï¼Œè¿›ç¨‹è¢«æŠ¢å  åœ¨æŠ¢å å¼ç³»ç»Ÿä¸­ï¼Œå°±ç»ªé˜Ÿåˆ—ä¸­çš„æŸè¿›ç¨‹ä¼˜å…ˆçº§é«˜äºå½“å‰è¿›ç¨‹,æˆ–æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„è¿›ç¨‹è¿›å…¥å°±ç»ªé˜Ÿåˆ— é«˜çº§è°ƒåº¦ High Schedulingé«˜çº§è°ƒåº¦ High Schedulingï¼šåˆç§°ä½œä¸šè°ƒåº¦ã€å‡†å…¥è°ƒåº¦ã€é•¿ç¨‹è°ƒåº¦æˆ–æ¥çº³è°ƒåº¦ï¼Œå…¶ä¸»è¦åŠŸèƒ½æ˜¯æ ¹æ®æŸç§ç®—æ³•ï¼ŒæŠŠå¤–å­˜ä¸Šå¤„äºåå¤‡é˜Ÿåˆ—ä¸­çš„é‚£äº›ä½œä¸šè°ƒå…¥å†…å­˜;å®ƒå‘ç”Ÿåœ¨ä¸€æ‰¹ä½œä¸šå®Œæˆï¼Œé‡æ–°è°ƒå…¥ä¸€æ‰¹ä½œä¸šåˆ°å†…å­˜çš„æ—¶å€™ï¼Œæ‰§è¡Œé¢‘ç‡ä½ã€‚æ‰¹å¤„ç†ç³»ç»Ÿéœ€è¦æœ‰ä½œä¸šè°ƒåº¦ï¼Œåˆ†æ—¶å’Œå®æ—¶ç³»ç»Ÿæ— éœ€æ­¤è°ƒåº¦ã€‚ä¸»è¦ç”¨äºæ‰¹å¤„ç†ç³»ç»Ÿã€‚å…¶è®¾è®¡ç›®æ ‡æ˜¯æœ€å¤§é™åº¦åœ°å‘æŒ¥å„ç§èµ„æºçš„åˆ©ç”¨ç‡å’Œä¿æŒç³»ç»Ÿå†…å„ç§æ´»åŠ¨çš„å……åˆ†å¹¶è¡Œ; ä¾‹ï¼šå¯¹èµ„æºéœ€æ±‚ä¸åŒçš„ä½œä¸šè¿›è¡Œåˆç†æ­é…ç§‘å­¦è®¡ç®—å¾€å¾€éœ€è¦å ç”¨å¤§é‡çš„ CPU æ—¶é—´ï¼Œå±äº CPU ç¹å¿™å‹ä½œä¸šï¼Œå¯¹äº I/O è®¾å¤‡çš„ä½¿ç”¨å°‘ï¼›æ•°æ®å¤„ç†è¦æ±‚å ç”¨è¾ƒå°‘çš„ CPU æ—¶é—´ï¼Œä½†è¦æ±‚å¤§é‡ I/O æ—¶é—´ï¼Œå±äº I/O ç¹å¿™å‹ä½œä¸šï¼›æœ‰äº›é€’å½’è®¡ç®—ï¼Œäº§ç”Ÿå¤§é‡ä¸­é—´ç»“æœï¼Œéœ€è¦å¾ˆå¤šå†…å­˜å•å…ƒå­˜æ”¾å®ƒä»¬ï¼Œè¿™å±äºå†…å­˜ç¹å¿™å‹ä½œä¸šã€‚å¦‚æœèƒ½æŠŠå®ƒä»¬æ­é…åœ¨ä¸€èµ·ï¼Œç¨‹åº A åœ¨ä½¿ç”¨å¤„ç†æœºï¼Œç¨‹åº B åœ¨åˆ©ç”¨é€šé“ lï¼Œè€Œç¨‹åº C æ°å¥½åˆ©ç”¨é€šé“ 2 ç­‰ï¼Œè¿™æ ·ä¸€æ¥ï¼ŒAã€B å’Œ C ä»æ¥ä¸åœ¨åŒä¸€æ—¶é—´ä½¿ç”¨åŒä¸€èµ„æºï¼Œæ¯ä¸ªç¨‹åºå°±å¥½åƒå•ç‹¬åœ¨ä¸€ä¸ªæœºå™¨ä¸Šè¿è¡Œ åœ¨æ¯æ¬¡æ‰§è¡Œä½œä¸šè°ƒåº¦æ—¶ï¼Œéƒ½é¡»åšå‡ºä»¥ä¸‹ä¸¤ä¸ªå†³å®šï¼š æ¥çº³å¤šå°‘ä¸ªä½œä¸šï¼ˆå–å†³äºå¤šé“ç¨‹åºåº¦ï¼‰ ä½œä¸šå¤ªå¤š æœåŠ¡è´¨é‡ä¸‹é™ ä½œä¸šå¤ªå°‘ èµ„æºåˆ©ç”¨ç‡ä½ æ¥çº³å“ªäº›ä½œä¸š ï¼ˆå–å†³äºé‡‡ç”¨çš„è°ƒåº¦ç®—æ³•ï¼‰ è°ƒåº¦è¯„ä»·æŒ‡æ ‡ å¤šé“ç¨‹åºåº¦ Degree Of Multiprogrammingï¼šå³å…è®¸å¤šå°‘ä¸ªä½œä¸šåŒæ—¶åœ¨å†…å­˜ä¸­è¿è¡Œã€‚å‘¨è½¬æ—¶é—´ Turnaround Timeï¼šæŒ‡ä»ä½œä¸šè¢«æäº¤ç»™ç³»ç»Ÿå¼€å§‹ï¼Œåˆ°ä½œä¸šå®Œæˆä¸ºæ­¢çš„è¿™æ®µæ—¶é—´é—´éš”,ä¹Ÿç§°ä¸ºä½œä¸šå‘¨è½¬æ—¶é—´å¸¦æƒå‘¨è½¬æ—¶é—´ Weighted Turnaround Timeï¼šä½œä¸šçš„å‘¨è½¬æ—¶é—´ T ä¸ç³»ç»Ÿä¸ºå®ƒæä¾›æœåŠ¡çš„æ—¶é—´ TS ä¹‹æ¯”,ç§°ä¸ºå¸¦æƒå‘¨è½¬ä¸–ç•Œ,$WTT=\\frac{T_{å‘¨è½¬æ—¶é—´}}{T_{é¢„è®¡è¿è¡Œæ—¶é—´}}$ååé‡ Throughputï¼šæ˜¯æŒ‡åœ¨å•ä½æ—¶é—´å†…ç³»ç»Ÿæ‰€å®Œæˆçš„ä½œä¸šæ•°æœåŠ¡æ—¶é—´ Service Timeï¼šä½œä¸šçš„é¢„è®¡è¿è¡Œæ—¶é—´å“åº”æ¯” Response Ratioï¼š$RR=\\frac{T_{ç­‰å¾…æ—¶é—´} + T_{é¢„è®¡è¿è¡Œæ—¶é—´}}{T_{é¢„è®¡è¿è¡Œæ—¶é—´}}=\\frac{T_{å“åº”æ—¶é—´}}{T_{é¢„è®¡è¿è¡Œæ—¶é—´}}$,æ³¨æ„ RR&gt;=1 ä½çº§è°ƒåº¦ Low Schedulingä½çº§è°ƒåº¦åˆç§°ä¸ºè¿›ç¨‹è°ƒåº¦æˆ–çŸ­ç¨‹è°ƒåº¦ï¼Œå®ƒæ‰€è°ƒåº¦çš„å¯¹è±¡æ˜¯è¿›ç¨‹ã€‚ä¸‰ç§ç±»å‹ OS éƒ½å¿…é¡»é…ç½®è¿™çº§è°ƒåº¦(æœ€åŸºæœ¬è°ƒåº¦);ä½çº§è°ƒåº¦ç”¨äºå†³å®šå°±ç»ªé˜Ÿåˆ—ä¸­çš„å“ªä¸ªè¿›ç¨‹åº”è·å¾—å¤„ç†æœºï¼Œç„¶åç”±åˆ†æ´¾è¿›ç¨‹Dispatcheræ‰§è¡ŒæŠŠåˆ†é…å¤„ç†æœºç»™ç›¸åº”è¿›ç¨‹çš„å…·ä½“æ“ä½œã€‚å…¶æ—¶é—´å°ºåº¦é€šå¸¸æ˜¯æ¯«ç§’çº§çš„,ä¸”æ˜¯ç³»ç»Ÿä¸­æœ€é¢‘ç¹çš„è°ƒåº¦,è¦æ±‚åœ¨å®ç°æ—¶åšåˆ°é«˜æ•ˆ ä½çº§è°ƒåº¦åŸºæœ¬æœºåˆ¶ æ’é˜Ÿå™¨ä¸ºäº†æé«˜è¿›ç¨‹è°ƒåº¦çš„æ•ˆç‡ï¼Œåº”äº‹å…ˆå°†ç³»ç»Ÿä¸­æ‰€æœ‰çš„å°±ç»ªè¿›ç¨‹æŒ‰ç…§ä¸€å®šçš„æ–¹å¼æ’æˆä¸€ä¸ªæˆ–å¤šä¸ªé˜Ÿåˆ—ã€‚ åˆ†æ´¾å™¨(è°ƒåº¦ç¨‹åº) åˆ†æ´¾å™¨æŠŠç”±è¿›ç¨‹è°ƒåº¦ç¨‹åºæ‰€é€‰å®šçš„è¿›ç¨‹ä»å°±ç»ªé˜Ÿåˆ—ä¸­å–å‡ºï¼Œç„¶åè¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå°†å¤„ç†æœºåˆ†é…ç»™å®ƒã€‚ ä¸Šä¸‹æ–‡åˆ‡æ¢æœºåˆ¶å½“å¯¹å¤„ç†æœºè¿›è¡Œåˆ‡æ¢æ—¶ï¼Œä¼šå‘ç”Ÿä¸¤å¯¹ä¸Šä¸‹æ–‡åˆ‡æ¢æ“ä½œã€‚ ä½çº§è°ƒåº¦åŠŸèƒ½ æŒ‰æŸç§ç®—æ³•é€‰å–è¿›ç¨‹ï¼ˆè°ƒåº¦ï¼‰ã€‚ ä¿å­˜å¤„ç†æœºçš„ç°åœºä¿¡æ¯ï¼ˆä¸Šä¸‹æ–‡åˆ‡æ¢ç¬¬ä¸€æ­¥éª¤ï¼‰ æ¢å¤æ–°è¿›ç¨‹çš„ CPU ç°åœº,ä»è€ŒæŠŠå¤„ç†å™¨åˆ†é…ç»™æ–°è¿›ç¨‹ï¼ˆä¸Šä¸‹æ–‡åˆ‡æ¢ç¬¬äºŒæ­¥éª¤ï¼‰ã€‚ è¿›ç¨‹è°ƒåº¦æ–¹å¼ éæŠ¢å æ–¹å¼ Non-preemptive Modeï¼šè¿›ç¨‹å ç”¨å¤„ç†æœºç›´è‡³è‡ªæ„¿æ”¾å¼ƒæˆ–å‘ç”ŸæŸäº‹ä»¶è¢«é˜»å¡æ—¶ï¼Œåœ¨æŠŠå¤„ç†æœºåˆ†é…ç»™å…¶ä»–è¿›ç¨‹ã€‚ è¿›ç¨‹æ­£åœ¨å¤„ç†æœºä¸Šæ‰§è¡Œæ—¶ï¼Œæ–°å°±ç»ªçš„è¿›ç¨‹è¿›å…¥å°±ç»ªé˜Ÿåˆ—ï¼Œè¯¥è¿›ç¨‹ä»ç»§ç»­æ‰§è¡Œï¼Œç›´åˆ°å…¶å®Œæˆæˆ–å‘ç”ŸæŸç§äº‹ä»¶è€Œè¿›å…¥å®Œæˆæˆ–é˜»å¡çŠ¶æ€æ—¶ï¼Œæ‰è½¬è®©å¤„ç†æœºã€‚ ä¼˜ç‚¹ï¼šç®—æ³•ç®€å•ï¼Œç³»ç»Ÿå¼€é”€å°ç¼ºç‚¹ï¼šç´§æ€¥ä»»åŠ¡ä¸èƒ½åŠæ—¶å“åº”ï¼›çŸ­è¿›ç¨‹åˆ°è¾¾è¦ç­‰å¾…é•¿è¿›ç¨‹è¿è¡Œç»“æŸ æŠ¢å æ–¹å¼ Preemptive Modeï¼šå…è®¸æš‚åœæŸä¸ªæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ï¼Œå°†å¤„ç†æœºé‡æ–°åˆ†é…ç»™å¦ä¸€ä¸ªè¿›ç¨‹ã€‚ è¿›ç¨‹æ­£åœ¨å¤„ç†æœºä¸Šæ‰§è¡Œæ—¶ï¼Œè‹¥æœ‰æŸä¸ªæ›´ä¸ºé‡è¦æˆ–ç´§è¿«çš„è¿›ç¨‹è¿›å…¥å°±ç»ªé˜Ÿåˆ—ï¼Œåˆ™ç«‹å³æš‚åœæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ï¼Œå°†å¤„ç†æœºåˆ†é…ç»™è¿™ä¸ªæ›´ä¸ºé‡è¦æˆ–ç´§è¿«çš„è¿›ç¨‹ ä¼˜ç‚¹ï¼šå¯ä»¥é˜²æ­¢ä¸€ä¸ªé•¿è¿›ç¨‹é•¿æ—¶é—´å ç”¨å¤„ç†æœºï¼Œèƒ½ä¸ºå¤§å¤šæ•°è¿›ç¨‹æä¾›æ›´å…¬å¹³çš„æœåŠ¡ï¼Œç‰¹åˆ«æ˜¯èƒ½æ»¡è¶³å¯¹å“åº”æ—¶é—´æœ‰ç€è¾ƒä¸¥æ ¼è¦æ±‚çš„å®æ—¶ä»»åŠ¡çš„éœ€æ±‚ã€‚ç¼ºç‚¹ï¼šæŠ¢å æ–¹å¼æ¯”éæŠ¢å æ–¹å¼è°ƒåº¦æ‰€éœ€ä»˜å‡ºçš„å¼€é”€è¾ƒå¤§ï¼Œä¸”è°ƒåº¦ç®—æ³•å¤æ‚ã€‚ æŠ¢å æ–¹å¼ Preemptive Mode æ—¶é—´ç‰‡åŸåˆ™:é€‚ç”¨äºåˆ†æ—¶ã€å¤§å¤šæ•°å®æ—¶ä»¥åŠè¦æ±‚è¾ƒé«˜çš„æ‰¹å¤„ç†ç³»ç»Ÿ ä¼˜å…ˆæƒåŸåˆ™:é‡è¦ç´§æ€¥ä½œä¸šä¼˜å…ˆæƒé«˜ çŸ­ä½œä¸š(è¿›ç¨‹)ä¼˜å…ˆåŸåˆ™ã€‚ ä¸­çº§è°ƒåº¦ Intermediate-Level Schedulingä¸­çº§è°ƒåº¦ Intermediate-Level Scheduling,åˆç§°ä¸­ç¨‹è°ƒåº¦(Medium-Term Scheduling);ä¸»è¦ç›®çš„ï¼šä¸ºäº†æé«˜å†…å­˜åˆ©ç”¨ç‡å’Œç³»ç»Ÿååé‡ã€‚å…·ä½“å®ç°ï¼š ä½¿é‚£äº›æš‚æ—¶ä¸èƒ½è¿è¡Œçš„è¿›ç¨‹ä¸å†å ç”¨å®è´µçš„å†…å­˜èµ„æºï¼Œè€Œå°†å…¶è°ƒè‡³å¤–å­˜çš„äº¤æ¢åŒº(swap space)å»ç­‰å¾…ï¼ŒæŠŠæ­¤æ—¶çš„è¿›ç¨‹çŠ¶æ€ç§°ä¸ºå°±ç»ªé©»å¤–å­˜çŠ¶æ€æˆ–æŒ‚èµ·çŠ¶æ€ã€‚ å½“è¿™äº›è¿›ç¨‹é‡åˆå…·å¤‡è¿è¡Œæ¡ä»¶ã€ä¸”å†…å­˜åˆç¨æœ‰ç©ºé—²æ—¶ï¼Œç”±ä¸­çº§è°ƒåº¦æ¥å†³å®šæŠŠå¤–å­˜ä¸Šçš„é‚£äº›åˆå…·å¤‡è¿è¡Œæ¡ä»¶çš„å°±ç»ªè¿›ç¨‹ï¼Œé‡æ–°è°ƒå…¥å†…å­˜ï¼Œå¹¶ä¿®æ”¹å…¶çŠ¶æ€ä¸ºå°±ç»ªçŠ¶æ€ï¼ŒæŒ‚åœ¨å°±ç»ªé˜Ÿåˆ—ä¸Šç­‰å¾…è¿›ç¨‹è°ƒåº¦ã€‚ è°ƒåº¦é˜Ÿåˆ—æ¨¡å‹å’Œè°ƒåº¦å‡†åˆ™è°ƒåº¦æ¨¡å‹ Scheduling Modelä¸‰çº§è°ƒåº¦éƒ½æ¶‰åŠè¿›ç¨‹çš„é˜Ÿåˆ—ã€‚å¯ä»¥å½¢æˆä»¥ä¸‹ä¸‰ç§è°ƒåº¦é˜Ÿåˆ—æ¨¡å‹ ä»…æœ‰è¿›ç¨‹è°ƒåº¦(ä½çº§è°ƒåº¦) å…·æœ‰é«˜çº§å’Œä½çº§è°ƒåº¦ å…·æœ‰ä¸‰çº§è°ƒåº¦ ä»…æœ‰è¿›ç¨‹è°ƒåº¦åœ¨åˆ†æ—¶ç³»ç»Ÿä¸­ï¼Œé€šå¸¸ä»…è®¾æœ‰è¿›ç¨‹è°ƒåº¦,ç³»ç»ŸæŠŠè¿™äº›è¿›ç¨‹ç»„ç»‡æˆä¸€ä¸ªå°±ç»ªé˜Ÿåˆ—,æ¯ä¸ªè¿›ç¨‹åœ¨æ‰§è¡Œæ—¶ï¼Œå¯èƒ½æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µ è¿›ç¨‹è·å¾— CPU æ­£åœ¨æ‰§è¡Œï¼› ä»»åŠ¡åœ¨ç»™å®šæ—¶é—´ç‰‡å†…å·²å®Œæˆï¼Œé‡Šæ”¾å¤„ç†æœºåä¸ºå®ŒæˆçŠ¶æ€ï¼› ä»»åŠ¡åœ¨æ—¶é—´ç‰‡å†…æœªå®Œæˆï¼Œè¿›å…¥å°±ç»ªé˜Ÿåˆ—æœ«å°¾ï¼› åœ¨æ‰§è¡ŒæœŸé—´å› æŸäº‹ä»¶è€Œé˜»å¡ã€‚ å°±ç»ªé˜Ÿåˆ—æ—¶é—´ç‰‡è½®è½¬ï¼Œå¸¸é‡‡ç”¨ FCFS(FIFO)ç®—æ³•ï¼Œ FCFS(FIFO)é˜Ÿåˆ—ã€‚è¿›ç¨‹æ‰§è¡Œæ—¶ä¸‰ç§æƒ…å†µï¼šå®Œæˆã€æ—¶é—´ç‰‡åˆ°ã€é˜»å¡ å…·æœ‰é«˜çº§å’Œä½çº§è°ƒåº¦åœ¨æ‰¹å¤„ç†ç³»ç»Ÿä¸­ï¼Œä¸ä»…éœ€è¦è¿›ç¨‹è°ƒåº¦ï¼Œè€Œä¸”è¿˜è¦æœ‰ä½œä¸šè°ƒåº¦å°±ç»ªé˜Ÿåˆ—çš„å½¢å¼:åœ¨æ‰¹å¤„ç†ç³»ç»Ÿä¸­ï¼Œå¸¸ç”¨é«˜ä¼˜å…ˆæƒé˜Ÿåˆ—ã€‚è¿›ç¨‹è¿›å…¥å°±ç»ªé˜Ÿåˆ—æ—¶ï¼ŒæŒ‰ä¼˜å…ˆæƒé«˜ä½æ’å…¥ç›¸åº”ä½ç½®ï¼Œè°ƒåº¦ç¨‹åºæ€»æ˜¯æŠŠå¤„ç†æœºåˆ†é…ç»™å°±ç»ªé˜Ÿåˆ—é¦–è¿›ç¨‹è®¾ç½®å¤šä¸ªé˜»å¡é˜Ÿåˆ—:æ ¹æ®äº‹ä»¶çš„ä¸åŒè®¾ç½®å¤šä¸ªé˜Ÿåˆ—æé«˜æ•ˆç‡ å¸¸é‡‡ç”¨é«˜ä¼˜å…ˆæƒä¼˜å…ˆè°ƒåº¦ç®—æ³•å¯é‡‡ç”¨ä¼˜å…ˆé˜Ÿåˆ—ï¼Œè¿›ç¨‹æ¥æ—¶æŒ‰ä¼˜å…ˆæƒæ’é˜Ÿï¼Œä»é˜Ÿé¦–è°ƒåº¦ ï¼ˆæ•ˆç‡é«˜ï¼‰å¯é‡‡ç”¨æ— åºåˆ—è¡¨ï¼Œæ¯æ¬¡è°ƒåº¦æ—¶ï¼Œå…ˆæ¯”è¾ƒä¼˜å…ˆæƒå¤šä¸ªé˜»å¡é˜Ÿåˆ— åŒæ—¶å…·æœ‰ä¸‰çº§è°ƒåº¦çš„è°ƒåº¦é˜Ÿåˆ—æ¨¡å‹åœ¨ OS ä¸­å¼•å…¥ä¸­çº§è°ƒåº¦åï¼Œè¿›ç¨‹çš„å°±ç»ªçŠ¶æ€åˆ†ä¸ºå†…å­˜å°±ç»ª(è¡¨ç¤ºè¿›ç¨‹åœ¨å†…å­˜ä¸­å°±ç»ª)å’Œå¤–å­˜å°±ç»ª(è¿›ç¨‹åœ¨å¤–å­˜ä¸­å°±ç»ª)ã€‚åŒæ ·ï¼Œé˜»å¡çŠ¶æ€è¿›ä¸€æ­¥åˆ†æˆå†…å­˜é˜»å¡å’Œå¤–å­˜é˜»å¡ä¸¤ç§çŠ¶æ€ã€‚åœ¨è°ƒå‡ºæ“ä½œçš„ä½œç”¨ä¸‹ï¼Œå¯ä½¿è¿›ç¨‹çŠ¶æ€ç”±å†…å­˜å°±ç»ªè½¬ä¸ºå¤–å­˜å°±ç»ªï¼Œç”±å†…å­˜é˜»å¡è½¬ä¸ºå¤–å­˜é˜»å¡ï¼›åœ¨ä¸­çº§è°ƒåº¦çš„ä½œç”¨ä¸‹ï¼Œåˆå¯ä½¿å¤–å­˜å°±ç»ªè½¬ä¸ºå†…å­˜å°±ç»ªã€‚ é€‰æ‹©è°ƒåº¦æ–¹å¼å’Œè°ƒåº¦ç®—æ³•çš„è‹¥å¹²å‡†åˆ™åœ¨ä¸åŒçš„ç³»ç»Ÿä¸­é€šå¸¸é‡‡ç”¨ä¸åŒçš„è°ƒåº¦æ–¹å¼å’Œç®—æ³•ã€‚ è°ƒåº¦çš„ç›®æ ‡ æé«˜å¤„ç†æœºçš„åˆ©ç”¨ç‡ æé«˜ç³»ç»Ÿååé‡ å°½é‡å‡å°‘è¿›ç¨‹çš„å“åº”æ—¶é—´ é˜²æ­¢è¿›ç¨‹é•¿æœŸå¾—ä¸åˆ°è¿è¡Œ ç³»ç»Ÿé€‰æ‹©è°ƒåº¦æ–¹å¼å’Œç®—æ³•çš„å‡†åˆ™è°ƒåº¦è¯„ä»·æŒ‡æ ‡æœ¯è¯­ é¢å‘ç”¨æˆ·çš„å‡†åˆ™ å‘¨è½¬æ—¶é—´çŸ­:ç”¨æ¥è¯„ä»·æ‰¹å¤„ç†ç³»ç»Ÿçš„æ€§èƒ½ã€é€‰æ‹©ä½œä¸šè°ƒåº¦æ–¹å¼ä¸ç®—æ³•çš„é‡è¦å‡†åˆ™ä¹‹ä¸€ ä½œä¸šåœ¨å¤–å­˜åå¤‡é˜Ÿåˆ—ä¸Šç­‰å¾…è°ƒåº¦çš„æ—¶é—´ã€‚ è¿›ç¨‹åœ¨å°±ç»ªé˜Ÿåˆ—ç­‰å¾…è°ƒåº¦çš„æ—¶é—´ã€‚ è¿›ç¨‹åœ¨ CPU ä¸Šçš„æ‰§è¡Œæ—¶é—´ã€‚ ç­‰å¾… I/O æ“ä½œå®Œæˆçš„æ—¶é—´ã€‚ å“åº”æ—¶é—´å¿«:ç”¨æ¥è¯„ä»·åˆ†æ—¶ç³»ç»Ÿçš„æ€§èƒ½ã€é€‰æ‹©è¿›ç¨‹è°ƒåº¦ç®—æ³•çš„é‡è¦å‡†åˆ™ä¹‹ä¸€è¿™é‡Œçš„å“åº”æ—¶é—´ï¼Œæ˜¯æŒ‡ä»ç”¨æˆ·é€šè¿‡é”®ç›˜æäº¤ä¸€ä¸ªè¯·æ±‚å¼€å§‹ï¼Œç›´è‡³ç³»ç»Ÿé¦–æ¬¡äº§ç”Ÿå“åº”ä¸ºæ­¢çš„æ—¶é—´ã€‚ ä»é”®ç›˜è¾“å…¥çš„è¯·æ±‚ä¿¡æ¯ä¼ é€åˆ°å¤„ç†æœºçš„æ—¶é—´ã€‚ å¤„ç†æœºå¯¹è¯·æ±‚ä¿¡æ¯è¿›è¡Œå¤„ç†çš„æ—¶é—´ã€‚ å°†æ‰€å½¢æˆçš„å“åº”å›é€åˆ°ç»ˆç«¯æ˜¾ç¤ºå™¨çš„æ—¶é—´ã€‚ æˆªæ­¢æ—¶é—´çš„ä¿è¯:ç”¨æ¥è¯„ä»·å®æ—¶ç³»ç»Ÿçš„æ€§èƒ½ã€é€‰æ‹©å®æ—¶è°ƒåº¦ç®—æ³•çš„é‡è¦å‡†åˆ™ä¹‹ä¸€æˆªæ­¢æ—¶é—´ï¼Œæ˜¯æŒ‡æŸä»»åŠ¡å¿…é¡»å¼€å§‹æ‰§è¡Œçš„æœ€è¿Ÿæ—¶é—´ï¼Œæˆ–å¿…é¡»å®Œæˆçš„æœ€è¿Ÿæ—¶é—´ã€‚ï¼ˆä¹Ÿå«åšæ—¶é™ï¼Œå³ deadlineï¼‰ å¼€å§‹æˆªæ­¢æ—¶é—´ã€‚ ç»ˆæ­¢/å®Œæˆæˆªæ­¢æ—¶é—´ã€‚ ä¼˜å…ˆæƒå‡†åˆ™:é€‚åˆæ‰¹å¤„ç†ã€åˆ†æ—¶å’Œå®æ—¶ç³»ç»Ÿ è®©æŸäº›ç´§æ€¥çš„ä½œä¸šèƒ½å¾—åˆ°åŠæ—¶å¤„ç†ã€‚ å¾€å¾€è¿˜éœ€é€‰æ‹©æŠ¢å å¼è°ƒåº¦æ–¹å¼ï¼Œæ‰èƒ½ä¿è¯ç´§æ€¥ä½œä¸šå¾—åˆ°åŠæ—¶å¤„ç†ã€‚ é¢å‘ç³»ç»Ÿçš„å‡†åˆ™ ç³»ç»Ÿååé‡é«˜:è¯„ä»·æ‰¹å¤„ç†ç³»ç»Ÿ ååé‡æ˜¯æŒ‡åœ¨å•ä½æ—¶é—´å†…ï¼Œç³»ç»Ÿæ‰€å®Œæˆçš„ä½œä¸šæ•° ä¸æ‰¹å¤„ç†ä½œä¸šçš„å¹³å‡é•¿åº¦æœ‰å…³ å¤„ç†æœºåˆ©ç”¨ç‡é«˜ã€‚ä¸»è¦å¯¹å¤§ã€ä¸­å‹å¤šç”¨æˆ·ç³»ç»Ÿï¼Œå¯¹å•ç”¨æˆ·æˆ–å®æ—¶ç³»ç»Ÿä¸é‡è¦ã€‚$CPUåˆ©ç”¨ç‡ = \\frac{CPUæœ‰æ•ˆå·¥ä½œæ—¶é—´}{CPUæœ‰æ•ˆå·¥ä½œæ—¶é—´+CPUç©ºé—²ç­‰å¾…æ—¶é—´}$ å„ç±»èµ„æºçš„å¹³è¡¡åˆ©ç”¨:å¦‚å†…å­˜ã€å¤–å­˜ã€I/O è®¾å¤‡ç­‰;ä¸»è¦å¯¹å¤§ã€ä¸­å‹ç³»ç»Ÿï¼Œå¯¹å¾®å‹æœºæˆ–å®æ—¶ç³»ç»Ÿä¸é‡è¦ã€‚ è¿›ç¨‹åˆ‡æ¢è¿›ç¨‹åˆ‡æ¢:å½“ä¸€ä¸ªè¿›ç¨‹å ç”¨å¤„ç†æœºæ‰§è¡Œå®Œ(æˆ–ä¸èƒ½ç»§ç»­æ‰§è¡Œ)ï¼Œåˆ™åˆ‡æ¢å¦ä¸€ä¸ªè¿›ç¨‹å ç”¨å¤„ç†æœºæ‰§è¡Œï¼Œç§°ä¸ºè¿›ç¨‹åˆ‡æ¢ã€‚è¿›ç¨‹è°ƒåº¦:æŠŠå¤„ç†æœºåˆ†é…ç»™ä¸åŒçš„è¿›ç¨‹å ç”¨æ‰§è¡Œï¼Œç§°ä¸ºè¿›ç¨‹è°ƒåº¦ã€‚å®ç°åˆ†é…å¤„ç†æœºçš„ç¨‹åºç§°ä¸ºè°ƒåº¦ç¨‹åºåœ¨è¿›ç¨‹åˆ‡æ¢æ—¶ï¼Œè¦ä¿æŠ¤æ‰§è¡Œç°åœºã€‚æ‰§è¡Œç°åœºç§°ä¸ºè¿›ç¨‹çš„ä¸Šä¸‹æ–‡ context è¿›ç¨‹åˆ‡æ¢åŸºæœ¬æ­¥éª¤ ä¿å­˜å½“å‰è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ æ›´æ–°å½“å‰è¿è¡Œè¿›ç¨‹çš„ PCBï¼Œå°†å…¶çŠ¶æ€æ”¹ä¸ºå°±ç»ª Ready æˆ–é˜»å¡ Blocked å°† PCB æ’å…¥å°±ç»ªé˜Ÿåˆ—æˆ–é˜»å¡é˜Ÿåˆ— æ”¹å˜éœ€è¦æŠ•å…¥è¿è¡Œçš„è¿›ç¨‹çš„ PCBï¼Œå°†å…¶çŠ¶æ€æ”¹ä¸ºè¿è¡Œ Running æ¢å¤æ–°è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ è°ƒåº¦ç®—æ³• FCFSå…ˆåˆ°å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•(FCFSï¼ŒFirst Come First Served) æŒ‰ç…§ä½œä¸š/è¿›ç¨‹è¿›å…¥ç³»ç»Ÿçš„å…ˆåæ¬¡åºè¿›è¡Œè°ƒåº¦ï¼Œå…ˆè¿›å…¥ç³»ç»Ÿè€…å…ˆè°ƒåº¦ï¼›é€‚åˆäºä½œä¸šè°ƒåº¦å’Œè¿›ç¨‹è°ƒåº¦;ç”¨äºæ‰¹å¤„ç†ç³»ç»Ÿï¼Œä¸é€‚äºåˆ†æ—¶ç³»ç»Ÿ ä¼˜ç‚¹ï¼š æœ‰åˆ©äºé•¿ä½œä¸šï¼ˆè¿›ç¨‹ï¼‰ æœ‰åˆ©äº CPU ç¹å¿™å‹ä½œä¸šï¼ˆè¿›ç¨‹ï¼‰ ç¼ºç‚¹ï¼š ä¸åˆ©ç”¨çŸ­ä½œä¸šï¼ˆè¿›ç¨‹ï¼‰ï¼Œç‰¹åˆ«æ˜¯æ¥çš„è¾ƒæ™šçš„çŸ­ä½œä¸šï¼ˆè¿›ç¨‹ï¼‰ã€‚ ä¸åˆ©äº I/O ç¹å¿™å‹ä½œä¸šï¼ˆè¿›ç¨‹ï¼‰ SJFçŸ­ä½œä¸šä¼˜å…ˆçš„è°ƒåº¦ç®—æ³•(SJFï¼ŒShortest Job First) ä»¥è¦æ±‚è¿è¡Œæ—¶é—´é•¿çŸ­è¿›è¡Œè°ƒåº¦ï¼Œå³å¯åŠ¨è¦æ±‚è¿è¡Œæ—¶é—´æœ€çŸ­çš„ä½œä¸š;å¯ä»¥åˆ†åˆ«ç”¨äºä½œä¸šè°ƒåº¦å’Œè¿›ç¨‹è°ƒåº¦ çŸ­ä½œä¸šä¼˜å…ˆ(SJF)çš„è°ƒåº¦ç®—æ³•ï¼Œæ˜¯ä»åå¤‡é˜Ÿåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªæˆ–è‹¥å¹²ä¸ªä¼°è®¡è¿è¡Œæ—¶é—´æœ€çŸ­çš„ä½œä¸šï¼Œå°†å®ƒä»¬è°ƒå…¥å†…å­˜è¿è¡Œï¼› çŸ­è¿›ç¨‹ä¼˜å…ˆ(SPF)è°ƒåº¦ç®—æ³•ï¼Œåˆ™æ˜¯ä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰å‡ºä¸€ä¸ªä¼°è®¡è¿è¡Œæ—¶é—´æœ€çŸ­çš„è¿›ç¨‹ï¼Œå°†å¤„ç†æœºåˆ†é…ç»™å®ƒï¼Œä½¿å®ƒç«‹å³æ‰§è¡Œå¹¶ä¸€ç›´æ‰§è¡Œåˆ°å®Œæˆï¼Œæˆ–å‘ç”ŸæŸäº‹ä»¶è€Œè¢«é˜»å¡æ”¾å¼ƒå¤„ç†æœºæ—¶ï¼Œå†é‡æ–°è°ƒåº¦ã€‚ ä¼˜ç‚¹ èƒ½æœ‰æ•ˆé™ä½ä½œä¸š/è¿›ç¨‹çš„å¹³å‡ç­‰å¾…æ—¶é—´ æé«˜ç³»ç»Ÿçš„ååé‡ã€‚ ç¼ºç‚¹ è¯¥ç®—æ³•å¯¹é•¿ä½œä¸šä¸åˆ©ï¼Œæ›´ä¸¥é‡çš„æ˜¯å¯èƒ½å°†å¯¼è‡´é•¿ä½œä¸š(è¿›ç¨‹)é•¿æœŸä¸è¢«è°ƒåº¦ è¯¥ç®—æ³•å®Œå…¨æœªè€ƒè™‘ä½œä¸šçš„ç´§è¿«ç¨‹åº¦ï¼Œå› è€Œä¸èƒ½ä¿è¯ç´§è¿«æ€§ä½œä¸š(è¿›ç¨‹)ä¼šè¢«åŠæ—¶å¤„ç† ç”±äºä½œä¸š(è¿›ç¨‹)çš„é•¿çŸ­åªæ˜¯æ ¹æ®ç”¨æˆ·æ‰€æä¾›çš„ä¼°è®¡æ‰§è¡Œæ—¶é—´è€Œå®šçš„ï¼Œè€Œç”¨æˆ·åˆå¯èƒ½ä¼šæœ‰æ„æˆ–æ— æ„åœ°ç¼©çŸ­å…¶ä½œä¸šçš„ä¼°è®¡è¿è¡Œæ—¶é—´ï¼Œè‡´ä½¿è¯¥ç®—æ³•ä¸ä¸€å®šèƒ½çœŸæ­£åšåˆ°çŸ­ä½œä¸šä¼˜å…ˆè°ƒåº¦ æ— æ³•å®ç°äººæœºäº¤äº’ SRTæœ€çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆè°ƒåº¦ç®—æ³•(SRT,Shortest Remaining Time) è°ƒåº¦æ—¶é€‰æ‹©é¢„æœŸå‰©ä½™æ—¶é—´æœ€çŸ­çš„è¿›ç¨‹ã€‚å½“ä¸€ä¸ªæ–°è¿›ç¨‹åŠ å…¥åˆ°å°±ç»ªé˜Ÿåˆ—æ—¶ï¼Œå®ƒå¯èƒ½æ¯”å½“å‰è¿è¡Œçš„è¿›ç¨‹å…·æœ‰æ›´çŸ­çš„å‰©ä½™æ—¶é—´ã€‚å› æ­¤ï¼Œåªè¦æ–°è¿›ç¨‹å°±ç»ªï¼Œè°ƒåº¦å™¨å¯èƒ½æŠ¢å å½“å‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ã€‚å¯èƒ½å­˜åœ¨é•¿è¿›ç¨‹è¢«é¥¿æ­»çš„å±é™©ã€‚ PSAä¼˜å…ˆæƒè°ƒåº¦ç®—æ³•(PSA,Priority) é€‚åˆäºä½œä¸šè°ƒåº¦å’Œè¿›ç¨‹è°ƒåº¦ ä¼˜å…ˆæƒç±»å‹ é™æ€ä¼˜å…ˆæƒ:é™æ€ä¼˜å…ˆæƒæ˜¯åœ¨åˆ›å»ºè¿›ç¨‹æ—¶ç¡®å®šçš„ï¼Œä¸”åœ¨è¿›ç¨‹çš„æ•´ä¸ªè¿è¡ŒæœŸé—´ä¿æŒä¸å˜ã€‚ä¼˜ç‚¹æ˜¯ç®€å•æ˜“è¡Œã€ç³»ç»Ÿå¼€é”€å°ã€‚ç¼ºç‚¹ï¼šä¸å¤Ÿç²¾ç¡®ï¼Œå¯èƒ½å‡ºç°ä¼˜å…ˆæƒä½çš„ä½œä¸šæˆ–è¿›ç¨‹é•¿æœŸå¾—ä¸åˆ°è°ƒåº¦çš„æƒ…å†µã€‚ åŠ¨æ€ä¼˜å…ˆæƒ:åŠ¨æ€ä¼˜å…ˆæƒéšè¿›ç¨‹çš„æ¨è¿›æˆ–éšå…¶ç­‰å¾…æ—¶é—´çš„å¢åŠ è€Œæ”¹å˜ï¼Œä»¥è·å¾—æ›´å¥½çš„è°ƒåº¦æ€§èƒ½ ç¡®å®šè¿›ç¨‹ä¼˜å…ˆæƒçš„ä¾æ®æœ‰ è¿›ç¨‹ç±»å‹: ç³»ç»Ÿè¿›ç¨‹é«˜ï¼Œä¸€èˆ¬ç”¨æˆ·è¿›ç¨‹ä½ã€‚ è¿›ç¨‹å¯¹èµ„æºçš„éœ€æ±‚:è¿›ç¨‹çš„ä¼°è®¡æ‰§è¡Œæ—¶é—´ã€å†…å­˜éœ€æ±‚é‡ç­‰ã€‚è¦æ±‚å°‘çš„è¿›ç¨‹èµ‹äºˆè¾ƒé«˜çš„ä¼˜å…ˆæƒã€‚ ç”¨æˆ·è¦æ±‚:ç´§è¿«ç¨‹åº¦ã€æ‰€ä»˜è´¹ç”¨ã€‚ éæŠ¢å å¼ä¼˜å…ˆæƒç®—æ³•ï¼ˆç”¨äºæ‰¹å¤„ç†ã€è¦æ±‚ä¸ä¸¥çš„å®æ—¶ OSï¼‰ç³»ç»Ÿä¸€æ—¦æŠŠå¤„ç†æœºåˆ†é…ç»™å°±ç»ªé˜Ÿåˆ—ä¸­ä¼˜å…ˆæƒæœ€é«˜çš„è¿›ç¨‹åï¼Œè¯¥è¿›ç¨‹ä¾¿ä¸€ç›´æ‰§è¡Œä¸‹å»ï¼Œç›´è‡³å®Œæˆï¼›æˆ–å› å‘ç”ŸæŸäº‹ä»¶ä½¿è¯¥è¿›ç¨‹æ”¾å¼ƒå¤„ç†æœºæ—¶ï¼Œç³»ç»Ÿæ–¹å¯å†å°†å¤„ç†æœºé‡æ–°åˆ†é…ç»™å¦ä¸€ä¼˜å…ˆæƒæœ€é«˜çš„è¿›ç¨‹ã€‚ æŠ¢å å¼ä¼˜å…ˆæƒè°ƒåº¦ç®—æ³•ï¼ˆç”¨äºè¦æ±‚ä¸¥æ ¼çš„å®æ—¶ã€æ€§èƒ½è¦æ±‚è¾ƒé«˜çš„æ‰¹å¤„ç†å’Œåˆ†æ—¶ OSï¼‰ç³»ç»ŸæŠŠå¤„ç†æœºåˆ†é…ç»™ä¼˜å…ˆæƒæœ€é«˜çš„è¿›ç¨‹ï¼Œä½¿ä¹‹æ‰§è¡Œã€‚ä½†åœ¨å…¶æ‰§è¡ŒæœŸé—´ï¼Œåªè¦åˆå‡ºç°äº†å¦ä¸€ä¸ªä¼˜å…ˆæƒæ›´é«˜çš„è¿›ç¨‹ï¼Œè¿›ç¨‹è°ƒåº¦ç¨‹åºå°±ç«‹å³åœæ­¢å½“å‰è¿›ç¨‹(åŸä¼˜å…ˆæƒæœ€é«˜çš„è¿›ç¨‹)çš„æ‰§è¡Œï¼Œé‡æ–°å°†å¤„ç†æœºåˆ†é…ç»™æ–°åˆ°çš„ä¼˜å…ˆæƒæœ€é«˜çš„è¿›ç¨‹ã€‚è¿™ç§æŠ¢å å¼çš„ä¼˜å…ˆæƒè°ƒåº¦ç®—æ³•ï¼Œèƒ½æ›´å¥½åœ°æ»¡è¶³ç´§è¿«ä½œä¸šçš„è¦æ±‚Note: åªè¦æ–°çš„è¿›ç¨‹åˆ°è¾¾å¹¶åŠ å…¥åˆ°å°±ç»ªé˜Ÿåˆ—ä¸­ï¼Œå°±è¿›è¡Œä¼˜å…ˆæƒæ¯”è¾ƒ é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•(HRRN,High Response Ratio Next),ä¼˜å…ˆæƒçš„å˜åŒ–è§„å¾‹å¯æè¿°ä¸ºï¼š$ä¼˜å…ˆæƒ = \\frac{ç­‰å¾…æ—¶é—´+é¢„è®¡è¿è¡Œæ—¶é—´}{é¢„è®¡è¿è¡Œæ—¶é—´}$ ç”±äºç­‰å¾…æ—¶é—´ä¸é¢„è®¡è¿è¡Œæ—¶é—´ä¹‹å’Œï¼Œå°±æ˜¯ç³»ç»Ÿå¯¹è¯¥ä½œä¸šçš„å“åº”æ—¶é—´ï¼Œæ•…è¯¥ä¼˜å…ˆæƒåˆç›¸å½“äºå“åº”æ¯” RPã€‚æ®æ­¤ï¼Œåˆå¯è¡¨ç¤ºä¸º$R_p = \\frac{ç­‰å¾…æ—¶é—´+é¢„è®¡è¿è¡Œæ—¶é—´}{é¢„è®¡è¿è¡Œæ—¶é—´} = \\frac{å“åº”æ—¶é—´}{é¢„è®¡è¿è¡Œæ—¶é—´}$ HRRN æ˜¯ä»‹äº FCFS å’Œ SJ(P)F ä¹‹é—´çš„ä¸€ç§æŠ˜ä¸­ç®—æ³•,HRRN è°ƒåº¦ç®—æ³•çš„ä¼˜ç‚¹æ˜¯èƒ½å¤Ÿè¾ƒå¥½åœ°å¹³è¡¡æœåŠ¡æ—¶é—´çŸ­å’Œç­‰å¾…æ—¶é—´é•¿çš„è¿›ç¨‹ï¼Œé¿å…äº†â€œé¥¥é¥¿â€ç°è±¡ã€‚ç”±äºé•¿ä½œä¸šä¹Ÿæœ‰æœºä¼šæŠ•å…¥è¿è¡Œï¼Œåœ¨åŒä¸€æ—¶é—´å†…å¤„ç†çš„ä½œä¸šæ•°æ˜¾ç„¶è¦å°‘äº SJ(P)F ç®—æ³•ï¼Œä»è€Œé‡‡ç”¨ HRRN æ–¹å¼æ—¶å…¶ååé‡å°†å°äºé‡‡ç”¨ SJF ç®—æ³•æ—¶çš„ååé‡ã€‚å¦å¤–ï¼Œç”±äºæ¯æ¬¡è°ƒåº¦å‰è¦è®¡ç®—å“åº”æ¯”ï¼Œç³»ç»Ÿå¼€é”€ä¹Ÿè¦ç›¸åº”å¢åŠ ã€‚ Round-Robinæ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•(RRï¼ŒRound-Robin):æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦æ˜¯ä¸€ç§æœ€å¤è€ï¼Œæœ€ç®€å•ï¼Œæœ€å…¬å¹³ä¸”ä½¿ç”¨æœ€å¹¿çš„ç®—æ³•,é€‚åˆäºè¿›ç¨‹è°ƒåº¦ã€‚ åŸºæœ¬åŸç†ç³»ç»Ÿå°†æ‰€æœ‰å°±ç»ªè¿›ç¨‹æŒ‰ FCFS åŸåˆ™ï¼Œæ’æˆä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ¯æ¬¡è°ƒåº¦æ—¶ï¼ŒæŠŠ CPU åˆ†é…ç»™é˜Ÿé¦–è¿›ç¨‹ï¼Œå¹¶ä»¤å…¶æ‰§è¡Œä¸€ä¸ªæ—¶é—´ç‰‡(Time Slice)ã€‚å½“æ—¶é—´ç‰‡ç”¨å®Œæ—¶ï¼Œç”±ä¸€ä¸ªè®¡æ—¶å™¨å‘å‡ºæ—¶é’Ÿä¸­æ–­è¯·æ±‚ï¼Œè°ƒåº¦ç¨‹åºä¾¿æ ¹æ®æ­¤ä¿¡å·æ¥åœæ­¢è¯¥è¿›ç¨‹çš„æ‰§è¡Œï¼Œå¹¶å°†å®ƒé€å¾€å°±ç»ªé˜Ÿåˆ—çš„æœ«å°¾ï¼›ç„¶åï¼Œå†æŠŠå¤„ç†æœºåˆ†é…ç»™å°±ç»ªé˜Ÿåˆ—ä¸­æ–°çš„é˜Ÿé¦–è¿›ç¨‹ï¼ŒåŒæ—¶ä¹Ÿè®©å®ƒæ‰§è¡Œä¸€ä¸ªæ—¶é—´ç‰‡ã€‚ Time Slice å¤§å°ç¡®å®šéœ€è€ƒè™‘ç³»ç»Ÿå¯¹å“åº”æ—¶é—´çš„è¦æ±‚,å°±ç»ªé˜Ÿåˆ—ä¸­è¿›ç¨‹çš„æ•°é‡,ç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›(ä¿è¯ç”¨æˆ·é”®å…¥çš„å‘½ä»¤èƒ½åœ¨ä¸€ä¸ªæ—¶é—´ç‰‡å†…å¤„ç†å®Œæ¯•) æ—¶é—´ç‰‡å¤ªçŸ­ï¼Œä¼šå¢åŠ è¿›ç¨‹åˆ‡æ¢çš„å¼€é”€ï¼Œé™ä½ç³»ç»Ÿååé‡ æ—¶é—´ç‰‡å¤ªé•¿ï¼Œé€€åŒ–æˆ FCFS ä¼˜ç¼ºç‚¹æ—¶é—´ç‰‡çš„å¤§å°å¯¹è®¡ç®—æœºæ€§èƒ½çš„å½±å“ã€‚å­˜åœ¨çš„é—®é¢˜ï¼šæœªæœ‰æ•ˆåˆ©ç”¨ç³»ç»Ÿèµ„æºã€‚å¯¹äºçŸ­çš„ã€è®¡ç®—å¯†é›†å‹ä»»åŠ¡(CPU-bound)æ¯”è¾ƒæœ‰åˆ©ï¼Œå› ä¸ºè¯¥è¿›ç¨‹å……åˆ†åˆ©ç”¨æ—¶é—´ç‰‡ï¼Œè€Œ I/O å¯†é›†å‹(I/O-bound)ä»»åŠ¡å´ä¸åˆ©(è™½ç„¶è¿›ç¨‹å¤§éƒ¨åˆ†æ—¶é—´éƒ½åœ¨ç­‰å¾… I/Oï¼Œå®ƒä»ç„¶ä¼šè¢«åˆ†é…åˆ° CPU æ—¶é—´ç‰‡ã€‚è¿™å¯èƒ½å¯¼è‡´ CPU èµ„æºçš„æµªè´¹)å¸¸ç”¨äºåˆ†æ—¶ç³»ç»ŸåŠäº‹åŠ¡å¤„ç†ç³»ç»Ÿã€‚ MQå¤šçº§é˜Ÿåˆ—è°ƒåº¦ç®—æ³• (MQ,Multilevel Queue):å°±ç»ªé˜Ÿåˆ—è¢«åˆ†è§£ä¸ºå¤šä¸ªç‹¬ç«‹çš„é˜Ÿåˆ—ï¼Œæ¯ä¸ªé˜Ÿåˆ—å…·æœ‰è‡ªå·±çš„è°ƒåº¦ç®—æ³•ã€‚å‰å°çš„å°±ç»ªé˜Ÿåˆ—æ˜¯äº¤äº’æ€§ä½œä¸š(Interactive Job)çš„è¿›ç¨‹ï¼Œé‡‡ç”¨æ—¶é—´ç‰‡è½®è½¬ã€‚åå°çš„å°±ç»ªé˜Ÿåˆ—æ˜¯æ‰¹å¤„ç†ä½œä¸š(Batch Job)çš„è¿›ç¨‹ï¼Œé‡‡ç”¨ä¼˜å…ˆæƒæˆ–çŸ­ä½œä¸šä¼˜å…ˆç®—æ³•ã€‚è°ƒåº¦æ–¹å¼æœ‰ä¸¤ç§ï¼šâ‘  ä¼˜å…ˆè°ƒåº¦å‰å°ï¼Œè‹¥å‰å°æ— å¯è¿è¡Œè¿›ç¨‹ï¼Œæ‰è°ƒåº¦åå° â‘¡ åˆ†é…å ç”¨ CPU çš„æ—¶é—´æ¯”ä¾‹ï¼Œå¦‚ï¼šå‰å° 80%ï¼Œåå° 20% ä»€ä¹ˆæ˜¯äº¤äº’æ€§ä½œä¸š(Interactive Job)å’Œæ‰¹å¤„ç†ä½œä¸š(Batch Job)ï¼ŸInteract Job: ä¸ç”¨æˆ·äº¤äº’çš„ä½œä¸š,åœ¨æ‰§è¡Œè¿™ç±»ä½œä¸šæ—¶ï¼Œç”¨æˆ·å¯ä»¥è¾“å…¥å‘½ä»¤ï¼Œç³»ç»Ÿç«‹å³å“åº”å¹¶è¿”å›ç»“æœ;ä¾‹å¦‚ UNIX shell çš„lsBatch Job:æ‰¹å¤„ç†ä½œä¸šæ˜¯åœ¨æ²¡æœ‰ç”¨æˆ·äº¤äº’çš„æƒ…å†µä¸‹è‡ªåŠ¨æ‰§è¡Œçš„ä¸€ç»„å‘½ä»¤æˆ–ç¨‹åº;äº›ä½œä¸šé€šå¸¸è¢«ç»„ç»‡æˆæ‰¹æ¬¡ï¼Œä¸€æ¬¡æ€§æäº¤ç»™ç³»ç»Ÿï¼Œç„¶åæŒ‰ç…§é¢„å®šçš„é¡ºåºæˆ–ä¼˜å…ˆçº§æ‰§è¡Œ MFQå¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•(MFQï¼ŒMultilevel Feedback Queue):æœ€é€šç”¨çš„è°ƒåº¦ç®—æ³•ï¼Œå¤šæ•° OS éƒ½ä½¿ç”¨è¯¥æ–¹æ³•æˆ–å…¶å˜å½¢ï¼Œå¦‚ UNIXã€Windows ç­‰ã€‚å®ƒå¯ä»¥çœ‹ä½œæ˜¯æ›´æˆç†Ÿçš„å¤šçº§é˜Ÿåˆ—è°ƒåº¦,å…¶ä»»åŠ¡å¯ä»¥åœ¨é˜Ÿåˆ—ä¹‹é—´ç§»åŠ¨,ä»è€Œæ›´ç»†è‡´çš„åŒºåˆ†ä»»åŠ¡ Note:MFQ å‡ä¸ºä¸ºæŠ¢å å¼;é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­æœ‰è¿›ç¨‹è¿›å…¥æ—¶ï¼Œä¼šæŠ¢å ä½ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­è¿›ç¨‹çš„ CPUã€‚è¢«æŠ¢å çš„è¿›ç¨‹ä¸é™çº§ï¼Œå›åˆ°åŸçº§é˜Ÿåˆ—ä¸­ï¼Œä¸‹æ¬¡ä»ç„¶æ‰§è¡Œè¯¥çº§é˜Ÿåˆ—çš„æ—¶é—´ç‰‡ã€‚ MFQ è°ƒåº¦ç®—æ³• è®¾ç½®å¤šä¸ªå°±ç»ªé˜Ÿåˆ—,è®°ä½œ RQ0ï¼ŒRQ1 â€¦ RQnï¼Œå¹¶ä¸ºå„ä¸ªé˜Ÿåˆ—èµ‹äºˆä¸åŒçš„ä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚ ç¬¬ä¸€ä¸ªé˜Ÿåˆ—çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œç¬¬äºŒä¸ªæ¬¡ä¹‹ï¼Œå…¶ä½™å„é˜Ÿåˆ—çš„ä¼˜å…ˆçº§é€ä¸ªé™ä½ã€‚è§„å®šé«˜ä¼˜å…ˆçº§é˜Ÿåˆ—æ—¶é—´ç‰‡å° ä¸€ä¸ªæ–°è¿›ç¨‹è¿›å…¥å†…å­˜åï¼Œé¦–å…ˆå°†å®ƒæ”¾å…¥ç¬¬ä¸€é˜Ÿåˆ—çš„æœ«å°¾ï¼ŒæŒ‰ FCFS åŸåˆ™æ’é˜Ÿç­‰å¾…è°ƒåº¦ã€‚å½“è½®åˆ°è¯¥è¿›ç¨‹æ‰§è¡Œæ—¶ï¼Œå¦‚å®ƒèƒ½åœ¨è¯¥æ—¶é—´ç‰‡å†…å®Œæˆï¼Œä¾¿å¯æ’¤ç¦»ç³»ç»Ÿï¼›è¿›ç¨‹ä¸€æ¬¡æ—¶é—´ç‰‡æ²¡æ‰§è¡Œå®Œï¼Œå°±é™è‡³ä¸‹ä¸€çº§é˜Ÿåˆ—ï¼Œä»¥æ­¤ç±»æ¨ï¼Œé™è‡³æœ€ä½ä¼˜å…ˆçº§é˜Ÿåˆ—åï¼Œä¸€ç›´åœ¨æ­¤é˜Ÿåˆ—ä¸­ä¸å†ä¸‹é™ã€‚ ç³»ç»Ÿä¼˜å…ˆè°ƒåº¦é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­çš„è¿›ç¨‹ï¼Œä»…å½“ RQ0 ç©ºé—²æ—¶æ‰è°ƒåº¦ RQ1 é˜Ÿåˆ—è¿›ç¨‹ï¼Œä»¥æ­¤ç±»æ¨ MFQ æ€§èƒ½ å¯¹äºç»ˆç«¯å‹ä½œä¸šç”¨æˆ·ï¼Œå…¶æ‰€æäº¤çš„ä½œä¸šå¤§éƒ½å±äºè¾ƒå°çš„äº¤äº’å‹ä½œä¸šï¼Œç³»ç»Ÿåªè¦ä½¿è¿™äº›ä½œä¸šåœ¨ç®« 1 é˜Ÿåˆ—è§„å®šçš„æ—¶é—´ç‰‡å†…å®Œæˆï¼Œç»ˆç«¯å‹ä½œä¸šç”¨æˆ·å°±ä¼šæ„Ÿåˆ°æ»¡è¶³ã€‚ å¯¹äºçŸ­æ‰¹å¤„ç†ä½œä¸šç”¨æˆ·ï¼Œå¦‚æœå…¶ä½œä¸šåœ¨ç¬¬ 1 é˜Ÿåˆ—ä¸­æ‰§è¡Œä¸€ä¸ªæ—¶é—´ç‰‡å³å¯å®Œæˆï¼Œä¾¿å¯è·å¾—ä¸ç»ˆç«¯ä½œä¸šä¸€æ ·çš„å“åº”æ—¶é—´ã€‚å¯¹äºç¨é•¿æ‰¹å¤„ç†ä½œä¸šç”¨æˆ·ï¼Œå…¶ä½œä¸šé€šå¸¸åªé¡»åœ¨ç¬¬ 2 é˜Ÿåˆ—å’Œç¬¬ 3 é˜Ÿåˆ—å„æ‰§è¡Œ 1 ä¸ªæ—¶é—´ç‰‡å³å¯å®Œæˆï¼Œå‘¨è½¬æ—¶é—´ä»ç„¶è¾ƒçŸ­ã€‚ å¯¹äºé•¿æ‰¹å¤„ç†ä½œä¸šç”¨æˆ·ï¼Œå…¶å°†ä¾æ¬¡åœ¨ç¬¬ 1,2â€¦n ä¸ªé˜Ÿåˆ—ä¸­è¿è¡Œï¼Œç„¶åå†æŒ‰è½®è½¬æ–¹å¼è¿è¡Œï¼Œç”¨æˆ·ä¸å¿…æ‹…å¿ƒå…¶ä½œä¸šé•¿æœŸå¾—ä¸åˆ°å¤„ç†ã€‚å› æ­¤ï¼Œå¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•èƒ½æ»¡è¶³å¤šç”¨æˆ·éœ€æ±‚ã€‚ åŸºäºå…¬å¹³åŸåˆ™çš„è°ƒåº¦ç®—æ³• ä¿è¯è°ƒåº¦ç®—æ³•ä¿è¯çš„æ˜¯ç»å¯¹è¿è¡Œæ—¶é—´ï¼Œå³å¯åŠ¨ååœ¨æŸä¸ªæ—¶é—´æ®µå†…å¿…é¡»è·å¾—å¤šå°‘è¿è¡Œæ—¶é—´ã€‚ä¾‹å¦‚ N ä¸ªè¿›ç¨‹å¹³å‡åˆ†é…æ—¶é—´ã€‚ å…¬å¹³åˆ†äº«è°ƒåº¦ç®—æ³•æŒ‰ç…§ç”¨æˆ·æ•°é‡å¹³å‡åˆ†é…æ—¶é—´ï¼Œè€Œä¸æ˜¯è¿›ç¨‹é—´å¹³å‡åˆ†é…ã€‚ ä¾‹ï¼šå…¬å¹³åˆ†äº«è°ƒåº¦ç®—æ³•ç”¨æˆ· 1 æœ‰ 4 ä¸ªè¿›ç¨‹ ABCDç”¨æˆ· 2 æœ‰ 1 ä¸ªè¿›ç¨‹ E æ—¶é—´ç‰‡è½®è½¬æ³•:ABCDEABCDEABCDEABCDEâ€¦â€¦ æ‰€æœ‰ç”¨æˆ·è·å¾—ç›¸åŒçš„å¤„ç†æœºæ—¶é—´:AEBECEDEAEBECEDEAEBECEDEâ€¦â€¦ ç”¨æˆ· 1 è·å¾—çš„å¤„ç†æœºæ—¶é—´æ˜¯ç”¨æˆ· 2 çš„ä¸¤å€:ABECDEABECDEABECDEABECDEâ€¦â€¦ å®æ—¶è°ƒåº¦åŸºç¡€æ¦‚å¿µå®æ—¶ä»»åŠ¡ï¼šä»»åŠ¡çš„ç»“æŸæ—¶é—´æœ‰ä¸¥æ ¼çº¦æŸ(Deadline),å³ä»»åŠ¡æ‰§è¡Œå¿…é¡»åœ¨ Deadline ä¹‹å‰å®Œæˆ;å…·æœ‰ç´§è¿«æ€§ã€‚å‰è¿°ç®—æ³•ä¸èƒ½å¾ˆå¥½åœ°æ»¡è¶³å®æ—¶ç³»ç»Ÿå¯¹è°ƒåº¦çš„ç‰¹æ®Šè¦æ±‚ï¼Œæ‰€ä»¥å¼•å…¥å®æ—¶è°ƒåº¦ã€‚å®æ—¶æ“ä½œç³»ç»Ÿ RTOS Real-Time Operating System å¯¹å¤–éƒ¨è¾“å…¥çš„ä¿¡æ¯ï¼Œå®æ—¶æ“ä½œç³»ç»Ÿèƒ½å¤Ÿåœ¨è§„å®šçš„æ—¶é—´å†…å¤„ç†å®Œæ¯•å¹¶åšå‡ºååº”æ­£ç¡®æ€§:ä¸ä»…è¦æ±‚è®¡ç®—é€»è¾‘çš„æ­£ç¡®ï¼Œè€Œä¸”è¦æ±‚åœ¨è§„å®šçš„æ—¶é—´å†…å¾—åˆ°è¯¥ç»“æœé€šå¸¸ç»™å®šä¸€ä¸ªå¼€å§‹æ—¶é—´æˆ–è€…ç»“æŸæ—¶é—´çš„æœ€åæœŸé™;å¤šç”¨äºå·¥ä¸šã€å†›äº‹ç­‰æ§åˆ¶é¢†åŸŸæˆ–å®æ—¶ä¿¡æ¯å¤„ç†æ–¹é¢ç¡¬å®æ—¶ç³»ç»Ÿæœ‰ä¸€ä¸ªåˆšæ€§çš„ã€ä¸å¯æ”¹å˜çš„æ—¶é—´é™åˆ¶ï¼Œå®ƒä¸å…è®¸ä»»ä½•è¶…å‡ºæ—¶é™çš„é”™è¯¯ã€‚è¶…æ—¶é”™è¯¯ä¼šå¸¦æ¥æŸå®³ç”šè‡³å¯¼è‡´ç³»ç»Ÿå¤±è´¥ã€æˆ–è€…å¯¼è‡´ç³»ç»Ÿä¸èƒ½å®ç°å®ƒçš„é¢„æœŸç›®æ ‡è½¯å®æ—¶ç³»ç»Ÿçš„æ—¶é™æ˜¯æŸ”æ€§çµæ´»çš„ï¼Œå®ƒå¯ä»¥å®¹å¿å¶ç„¶çš„è¶…æ—¶é”™è¯¯ã€‚å¤±è´¥åé€ æˆçš„åæœå¹¶ä¸ä¸¥é‡ï¼Œä¾‹å¦‚åœ¨ç½‘ç»œä¸­ä»…ä»…è½»å¾®åœ°é™ä½äº†ç³»ç»Ÿçš„ååé‡ç¡¬å®æ—¶ HRT ä¸è½¯å®æ—¶ SRTä¹‹é—´æœ€å…³é”®çš„å·®åˆ«åœ¨äºï¼šè½¯å®æ—¶åªèƒ½æä¾›ç»Ÿè®¡æ„ä¹‰ä¸Šçš„å®æ—¶ã€‚ä¾‹å¦‚ï¼Œæœ‰çš„åº”ç”¨è¦æ±‚ç³»ç»Ÿåœ¨ 95%çš„æƒ…å†µä¸‹éƒ½ä¼šç¡®ä¿åœ¨è§„å®šçš„æ—¶é—´å†…å®ŒæˆæŸä¸ªåŠ¨ä½œï¼Œè€Œä¸ä¸€å®šè¦æ±‚ 100%ä¼˜å…ˆçº§å€’ç½®: å³é«˜ä¼˜å…ˆçº§è¿›ç¨‹(æˆ–çº¿ç¨‹)è¢«ä½ä¼˜å…ˆçº§è¿›ç¨‹(æˆ–çº¿ç¨‹)å»¶è¿Ÿæˆ–é˜»å¡ã€‚ å®ç°å®æ—¶è°ƒåº¦çš„åŸºæœ¬æ¡ä»¶ æä¾›å¿…è¦çš„è°ƒåº¦ä¿¡æ¯ ä»»åŠ¡çš„åˆ°è¾¾æ—¶é—´,å¼€å§‹æˆªæ­¢æ—¶é—´,æ‰§è¡Œæ—¶é—´,å®Œæˆæˆªæ­¢æ—¶é—´ èµ„æºè¦æ±‚ ä¼˜å…ˆçº§(è‹¥é”™è¿‡å¼€å§‹æˆªæ­¢æ—¶é—´åˆ™èµ‹äºˆâ€œç»å¯¹â€ä¼˜å…ˆçº§) ç³»ç»Ÿå¤„ç†èƒ½åŠ›å¼ºè‹¥å¤„ç†æœºçš„å¤„ç†èƒ½åŠ›ä¸å¤Ÿå¼ºï¼Œåˆ™æœ‰å¯èƒ½å› å¤„ç†æœºå¿™ä¸è¿‡æ¥è€Œä½¿æŸäº›å®æ—¶ä»»åŠ¡ä¸èƒ½å¾—åˆ°åŠæ—¶å¤„ç†ï¼Œä»è€Œå¯¼è‡´å‘ç”Ÿéš¾ä»¥é¢„æ–™çš„åæœã€‚å‡å®šç³»ç»Ÿä¸­æœ‰ m ä¸ªå‘¨æœŸæ€§çš„ç¡¬å®æ—¶ä»»åŠ¡ï¼Œå®ƒä»¬çš„å¤„ç†æ—¶é—´å¯è¡¨ç¤ºä¸º Ci ï¼Œå‘¨æœŸæ—¶é—´è¡¨ç¤ºä¸º Piï¼Œåˆ™åœ¨å•å¤„ç†æœºæƒ…å†µä¸‹ï¼Œå¿…é¡»æ»¡è¶³$\\sum_{i=1}^{m} \\frac{C_i}{P_i} \\leq 1$;è‹¥ä¸ºå¤šå¤„ç†æœºç³»ç»Ÿ,å‡è®¾æœ‰ n ä¸ªå¤„ç†æœºï¼Œåˆ™éœ€æ»¡è¶³$\\sum_{i=1}^{m} \\frac{C_i}{P_i} \\leq n$ é‡‡ç”¨æŠ¢å å¼è°ƒåº¦æœºåˆ¶:è°ƒåº¦ç¨‹åºå…ˆè°ƒåº¦å¼€å§‹æˆªæ­¢æ—¶é—´å³å°†åˆ°è¾¾çš„ä»»åŠ¡ã€‚ å…·æœ‰å¿«é€Ÿåˆ‡æ¢æœºåˆ¶ å…·æœ‰å¿«é€Ÿå“åº”å¤–éƒ¨ä¸­æ–­çš„èƒ½åŠ›:åŠæ—¶å“åº”ç´§è¿«çš„å¤–éƒ¨äº‹ä»¶çš„ä¸­æ–­è¯·æ±‚ å¿«é€Ÿçš„ä»»åŠ¡åˆ†æ´¾èƒ½åŠ›:ä½¿ç³»ç»Ÿä¸­çš„æ¯ä¸ªè¿è¡ŒåŠŸèƒ½å•ä½é€‚å½“çš„å°ï¼Œä»¥å‡å°‘ä»»åŠ¡åˆ‡æ¢çš„æ—¶é—´å¼€é”€ã€‚ å®æ—¶è°ƒåº¦ç®—æ³•åˆ†ç±» éæŠ¢å å¼è°ƒåº¦ç®—æ³• éæŠ¢å å¼è½®è½¬è°ƒåº¦ç®—æ³•ï¼ˆå¦‚å·¥ä¸šç”Ÿäº§ç¾¤æ§ç³»ç»Ÿï¼‰è°ƒåº¦ç¨‹åºæ¯æ¬¡é€‰æ‹©é˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªä»»åŠ¡æŠ•å…¥è¿è¡Œã€‚è¯¥ä»»åŠ¡å®Œæˆåï¼Œä¾¿æŠŠå®ƒæŒ‚åœ¨è½®è½¬é˜Ÿåˆ—çš„æœ«å°¾ï¼Œç­‰å¾…ä¸‹æ¬¡è°ƒåº¦è¿è¡Œï¼Œè€Œè°ƒåº¦ç¨‹åºå†é€‰æ‹©ä¸‹ä¸€ä¸ª(é˜Ÿé¦–)ä»»åŠ¡è¿è¡Œã€‚å¸¸ç”¨äºè¦æ±‚ä¸å¤ªä¸¥æ ¼çš„å®æ—¶æ§åˆ¶ç³»ç»Ÿã€‚ éæŠ¢å ä¼˜å…ˆæƒè°ƒåº¦ç®—æ³•å¦‚æœåœ¨å®æ—¶ç³»ç»Ÿä¸­å­˜åœ¨ç€è¦æ±‚è¾ƒä¸ºä¸¥æ ¼(å“åº”æ—¶é—´ä¸ºæ•°ç™¾æ¯«ç§’)çš„ä»»åŠ¡ï¼Œåˆ™å¯é‡‡ç”¨éæŠ¢å å¼ä¼˜å…ˆè°ƒåº¦ç®—æ³•ä¸ºè¿™äº›ä»»åŠ¡èµ‹äºˆè¾ƒé«˜çš„ä¼˜å…ˆçº§ã€‚å½“è¿™äº›å®æ—¶ä»»åŠ¡åˆ°è¾¾æ—¶ï¼ŒæŠŠå®ƒä»¬å®‰æ’åœ¨å°±ç»ªé˜Ÿåˆ—çš„é˜Ÿé¦–ï¼Œç­‰å¾…å½“å‰ä»»åŠ¡è‡ªæˆ‘ç»ˆæ­¢æˆ–è¿è¡Œå®Œæˆåæ‰èƒ½è¢«è°ƒåº¦æ‰§è¡Œã€‚å¸¸ç”¨äºæœ‰ä¸€å®šè¦æ±‚çš„å®æ—¶æ§åˆ¶ç³»ç»Ÿã€‚ æŠ¢å å¼è°ƒåº¦ç®—æ³• åŸºäºæ—¶é’Ÿä¸­æ–­çš„æŠ¢å å¼ä¼˜å…ˆæƒè°ƒåº¦ç®—æ³• ç«‹å³æŠ¢å (Immediate Preemption)çš„ä¼˜å…ˆæƒè°ƒåº¦ç®—æ³• å¸¸è§çš„å®æ—¶è°ƒåº¦ç®—æ³•æœ€æ—©æˆªæ­¢æ—¶é—´ä¼˜å…ˆå³ EDF(Earliest Deadline First) ç®—æ³•ä¼˜å…ˆçº§ç¡®å®šï¼šæ ¹æ®ä»»åŠ¡çš„å¼€å§‹æˆªæ­¢æ—¶é—´æ¥ç¡®å®šä»»åŠ¡çš„ä¼˜å…ˆçº§ã€‚æˆªæ­¢æ—¶é—´æ„ˆæ—©ï¼Œå…¶ä¼˜å…ˆçº§æ„ˆé«˜ã€‚å®æ—¶ä»»åŠ¡å°±ç»ªé˜Ÿåˆ—ï¼šæŒ‰å„ä»»åŠ¡æˆªæ­¢æ—¶é—´çš„æ—©æ™šæ’åºï¼›å…·æœ‰æœ€æ—©æˆªæ­¢æ—¶é—´çš„ä»»åŠ¡æ’åœ¨é˜Ÿåˆ—çš„æœ€å‰é¢ã€‚è°ƒåº¦é¡ºåºï¼šæ€»æ˜¯é€‰æ‹©å°±ç»ªé˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªä»»åŠ¡ï¼Œä¸ºä¹‹åˆ†é…å¤„ç†æœºï¼Œä½¿ä¹‹æŠ•å…¥è¿è¡Œã€‚é€‚ç”¨èŒƒå›´ï¼šæ—¢å¯ç”¨äºæŠ¢å å¼è°ƒåº¦ï¼Œä¹Ÿå¯ç”¨äºéæŠ¢å å¼è°ƒåº¦æ–¹å¼ä¸­ã€‚ æœ€ä½æ¾å¼›åº¦ä¼˜å…ˆå³ LLF(Least Laxity First)ç®—æ³•$Laxity = Deadline - RemainingServiceTime - CurrentTime$æ¾å¼›åº¦=å®Œæˆæˆªæ­¢æ—¶é—´â€“å‰©ä½™è¿è¡Œæ—¶é—´â€“å½“å‰æ—¶é—´ (å‡è®¾ä»ç°åœ¨æ‰§è¡Œä»»åŠ¡, å®Œæˆçš„æ—¶é—´ä¸º t1, åˆ™æ¾å¼›åº¦ä¸ºæˆªæ­¢æ—¶é—´-t1) è¯¥ç®—æ³•æŒ‰æ¾å¼›åº¦æ’åºå®æ—¶ä»»åŠ¡çš„å°±ç»ªé˜Ÿåˆ—ï¼Œæ¾å¼›åº¦å€¼æœ€å°çš„ä»»åŠ¡æ’åœ¨é˜Ÿåˆ—æœ€å‰é¢ï¼Œè°ƒåº¦ç¨‹åºæ€»æ˜¯é€‰æ‹©å°±ç»ªé˜Ÿåˆ—ä¸­çš„é˜Ÿé¦–ä»»åŠ¡æ‰§è¡Œã€‚è¯¥ç®—æ³•ä¸»è¦ç”¨äºå¯æŠ¢å è°ƒåº¦æ–¹å¼ä¸­ã€‚ æŠ¢å æ–¹å¼å’Œæ—¶æœº å½“ç­‰å¾…ä»»åŠ¡çš„æ¾å¼›åº¦å€¼ä¸º 0 æ—¶æ‰è¿›è¡ŒæŠ¢å  å½“æœ‰ä»»åŠ¡æ‰§è¡Œæ—¶ï¼Œåªæœ‰ç­‰å¾…ä»»åŠ¡çš„æ¾å¼›åº¦å€¼ä¸º 0 æ‰ä¼šå‘ç”Ÿä»»åŠ¡çš„è°ƒåº¦ï¼Œå…¶ä»–æƒ…å†µä¸å‘ç”Ÿè°ƒåº¦ã€‚ ä»»åŠ¡æ‰§è¡Œç»“æŸåæˆ–æ— ä»»åŠ¡æ‰§è¡Œæ—¶ï¼Œå†æ¯”è¾ƒç­‰å¾…ä»»åŠ¡çš„æ¾å¼›åº¦å€¼ï¼Œè¾ƒå°çš„å…ˆæ‰§è¡Œã€‚","link":"/UESTC/OS/Ch3-1TheProcessorScheduling/"},{"title":"Storage Management Partâ…¡","text":"åŸºæœ¬åˆ†é¡µå­˜å‚¨ç®¡ç†æ–¹å¼ Paged Storage ManagementIntroå‰é¢ä»‹ç»çš„åˆ†åŒºå­˜å‚¨ç®¡ç†ï¼Œä¸€èˆ¬éƒ½è¦æ±‚æŠŠä¸€ä¸ªä½œä¸šçš„åœ°å€ç©ºé—´è£…å…¥åˆ°è¿ç»­çš„å­˜å‚¨åŒºåŸŸå†…ã€‚å› æ­¤ï¼Œåœ¨åŠ¨æ€åˆ†åŒºçš„å­˜å‚¨ç©ºé—´ä¸­ï¼Œå¸¸å¸¸ç”±äºå­˜åœ¨ç€ä¸€äº›ä¸è¶³ä»¥è£…å…¥ä»»ä½•ä½œä¸šçš„å°çš„åˆ†åŒºè€Œæµªè´¹æ‰éƒ¨åˆ†å­˜å‚¨èµ„æºï¼Œè¿™å°±æ˜¯æ‰€è°“å­˜å‚¨å™¨çš„é›¶å¤´é—®é¢˜ã€‚å°½ç®¡é‡‡ç”¨â€œç´§å‡‘â€æŠ€æœ¯å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†è¦ä¸ºç§»åŠ¨å¤§é‡ä¿¡æ¯èŠ±å»ä¸å°‘å¤„ç†æœºæ—¶é—´ï¼Œä»£ä»·è¾ƒé«˜ã€‚å¦‚æœæˆ‘ä»¬èƒ½å–æ¶ˆå¯¹å…¶å­˜å‚¨åŒºåŸŸçš„è¿ç»­æ€§è¦æ±‚ï¼Œå¿…ç„¶ä¼šè¿›ä¸€æ­¥æé«˜ä¸»å­˜ç©ºé—´çš„åˆ©ç”¨ç‡ï¼Œåˆæ— éœ€ä¸ºç§»åŠ¨ä¿¡æ¯ä»˜å‡ºä»£ä»·ã€‚ ç¦»æ•£åˆ†é… å³ç¨‹åºåœ¨å†…å­˜ä¸­ä¸ä¸€å®šè¿ç»­å­˜æ”¾æ ¹æ®ç¦»æ•£æ—¶çš„åŸºæœ¬å•ä½ä¸åŒï¼Œå¯åˆ†ä¸ºä¸‰ç§ï¼š åˆ†é¡µå­˜å‚¨ç®¡ç† åˆ†æ®µå­˜å‚¨ç®¡ç† æ®µé¡µå¼å­˜å‚¨ç®¡ç† ç¦»æ•£çš„åŸºç¡€ åˆ†é¡µ(Pages)ï¼šå°†ç¨‹åºåœ°å€ç©ºé—´åˆ†é¡µåˆ†å—(Frames)ï¼šå°†å†…å­˜ç©ºé—´åˆ†å— ç¦»æ•£åˆ†é…çš„ä½“ç°å†…å­˜ä¸€å—å¯ä»¥è£…å…¥ç¨‹åºä¸€é¡µè¿ç»­çš„å¤šä¸ªé¡µä¸ä¸€å®šè£…å…¥è¿ç»­çš„å¤šä¸ªå—ä¸­æ³¨ï¼šç³»ç»Ÿä¸­é¡µå—çš„å¤§å°æ˜¯ä¸å˜çš„ã€‚ ç¦»æ•£åˆ†é…çš„ä¼˜ç‚¹æ²¡æœ‰å¤–é›¶å¤´ã€‚ä¸å—è¿ç»­ç©ºé—´é™åˆ¶ï¼Œæ¯å—éƒ½èƒ½åˆ†å‡ºå»ä»…æœ‰å°äºä¸€ä¸ªé¡µé¢çš„å†…é›¶å¤´ã€‚ç”±äºè¿›ç¨‹çš„æœ€åä¸€é¡µç»å¸¸è£…ä¸æ»¡ä¸€å—è€Œå½¢æˆäº†ä¸å¯åˆ©ç”¨çš„ç¢ç‰‡ï¼Œç§°ä¹‹ä¸ºâ€œé¡µå†…ç¢ç‰‡â€æˆ–ç§°ä¸ºâ€œå†…é›¶å¤´â€ã€‚ å®šä¹‰ é¡µé¢/é¡µ Page: ä½œä¸šçš„é€»è¾‘åœ°å€ç©ºé—´è¢«åˆ†å‰²æˆå›ºå®šå¤§å°çš„ç‰‡ï¼Œç§°ä¸ºé¡µé¢ ç‰©ç†å—/é¡µæ¡† Page Frameï¼šå†…å­˜ç©ºé—´ä¹Ÿåˆ†æˆä¸é¡µç›¸åŒå¤§å°çš„è‹¥å¹²å­˜å‚¨å—ã€‚åœ¨ä¸ºè¿›ç¨‹åˆ†é…å­˜å‚¨ç©ºé—´æ—¶ï¼Œæ€»æ˜¯ä»¥é¡µæ¡†ä¸ºå•ä½ã€‚ Page ä» 0 å¼€å§‹ç¼–å·ï¼Œé¡µå†…åœ°å€æ˜¯ç›¸å¯¹äº 0 ç¼–å€ï¼›åœ¨è¿›ç¨‹è°ƒåº¦æ—¶ï¼Œå¿…é¡»æŠŠå®ƒæ‰€æœ‰çš„ Page ä¸€æ¬¡è£…å…¥åˆ°ä¸»å­˜çš„ Page Frame å†…ï¼›å¦‚æœå½“æ—¶ Page Frame ä¸è¶³ï¼Œåˆ™è¯¥è¿›ç¨‹å¿…é¡»ç­‰å¾…ï¼Œç³»ç»Ÿå†è°ƒåº¦å¦å¤–çš„è¿›ç¨‹ã€‚ï¼ˆçº¯åˆ†é¡µæ–¹å¼ï¼‰ åˆ†é¡µå­˜å‚¨ç®¡ç†çš„åŸºæœ¬æ–¹æ³•éœ€è§£å†³çš„ä¸¤ä¸ªåŸºæœ¬é—®é¢˜: å¦‚ä½•å»ºç«‹ç¨‹åºç©ºé—´ä¸ä¸»å­˜ç©ºé—´çš„æ˜ å°„ å¦‚ä½•è¿›è¡Œåœ°å€å˜æ¢(ä»ç¨‹åºé€»è¾‘åœ°å€åˆ°å†…å­˜ç‰©ç†åœ°å€) é¡µé¢å¤§å°çš„é€‰æ‹©é¡µé¢å¤§å°ç”±æœºå™¨çš„åœ°å€ç»“æ„å†³å®šã€‚æŸä¸€æœºå™¨åªèƒ½é‡‡ç”¨ä¸€ç§å¤§å°çš„é¡µé¢ã€‚é¡µé¢çš„å¤§å°é€šå¸¸åœ¨ 1KB~8KB ä¹‹é—´ã€‚ å°é¡µé¢ å¤§é¡µé¢ å®ç°åˆ†é¡µå­˜å‚¨ç®¡ç†çš„æ•°æ®ç»“æ„1ï¼‰é¡µè¡¨ Page Tableï¼šæ¯ä¸ªè¿›ç¨‹å¯¹åº” 1 ä¸ªé¡µè¡¨ï¼Œç”±å„ä¸ªé¡µè¡¨é¡¹(Page Table Entryï¼ŒPTE)æè¿°è¯¥è¿›ç¨‹çš„å„é¡µé¢åœ¨å†…å­˜ä¸­å¯¹åº”çš„ç‰©ç†å—å·ã€‚é¡µè¡¨é¡¹ä¸­åŒ…æ‹¬é¡µå·ã€ç‰©ç†å—å·ã€å­˜å‚¨æ§åˆ¶å­—æ®µçŠ¶æ€ä½ï¼šè¿™äº›ä½æä¾›äº†å…³äºé¡µé¢çš„é¢å¤–ä¿¡æ¯ï¼Œä¾‹å¦‚è¯¥é¡µé¢æ˜¯å¦åœ¨å†…å­˜ä¸­ï¼ˆæœ‰æ•ˆä½ï¼‰ï¼Œæ˜¯å¦å¯ä»¥å†™å…¥ï¼ˆå†™ä¿æŠ¤ä½ï¼‰ï¼Œæ˜¯å¦è¢«è®¿é—®è¿‡ï¼ˆè®¿é—®ä½ï¼‰ï¼Œæ˜¯å¦è¢«ä¿®æ”¹è¿‡ï¼ˆè„ä½ï¼‰ç­‰æ³¨æ„ï¼šå…¨éƒ¨é¡µè¡¨é›†ä¸­å­˜æ”¾åœ¨ä¸»å­˜çš„ç³»ç»Ÿä¸“ç”¨åŒºä¸­ï¼Œåªæœ‰ç³»ç»Ÿæœ‰æƒè®¿é—®é¡µè¡¨ï¼Œä¿è¯å®‰å…¨ã€‚2ï¼‰ä½œä¸šè¡¨ Job Tableï¼šæ•´ä¸ªç³»ç»Ÿ 1 å¼ ï¼Œè®°å½•ä½œä¸šçš„é¡µè¡¨æƒ…å†µï¼ŒåŒ…å«è¿›ç¨‹å·ã€é¡µè¡¨é•¿åº¦ã€é¡µè¡¨å§‹å€ç­‰ä¿¡æ¯ã€‚3ï¼‰ç©ºé—²å—è¡¨ï¼šæ•´ä¸ªç³»ç»Ÿ 1 å¼ ï¼Œè®°å½•ä¸»å­˜å½“å‰ç©ºé—²å—ã€‚ æŸä¸€ä½œä¸šè¢«åˆ†æˆè‹¥å¹²ä¸ª Pageï¼Œæ¯ä¸ª Page å¯ä»¥å»è¿›ç¨‹å¯¹åº”çš„é¡µè¡¨ä¸­æŸ¥æ‰¾å¯¹åº”çš„ç‰©ç†å—å·ï¼Œç„¶åå†å»ä¸»å­˜ä¸­æ‰¾åˆ°å¯¹åº”çš„ç‰©ç†å—(Page Frame)ã€‚ åˆ†é¡µå­˜å‚¨ç®¡ç†çš„é€»è¾‘åœ°å€è¡¨ç¤ºé€»è¾‘åœ°å€ç»“æ„åœ°å€ç©ºé—´ä¸ºç¨‹åºé™å®šçš„ç©ºé—´ã€‚ç‰©ç†ç©ºé—´ä¸ºå†…å­˜é™å®šç©ºé—´ã€‚åœ¨é¡µå¼ç®¡ç†ç³»ç»Ÿä¸­å°†åœ°å€ç©ºé—´åˆ†æˆå¤§å°ç›¸åŒçš„é¡µé¢ Pageã€‚å°†å†…å­˜ç©ºé—´åˆ†æˆä¸é¡µé¢ç›¸åŒå¤§å°çš„å­˜å‚¨å— Page Frameã€‚åˆ†é¡µå­˜å‚¨ç®¡ç†æ–¹å¼ä¸­ï¼Œä»»ä½•ä¸€ä¸ªé€»è¾‘åœ°å€éƒ½å¯è½¬å˜ä¸ºï¼šé¡µå·+é¡µå†…ä½ç§»é‡ã€‚é¡µå·ã€ä½ç§»é‡çš„åˆ’åˆ†æ˜¯ç”±ç³»ç»Ÿè‡ªåŠ¨å®Œæˆçš„ï¼Œå¯¹ç”¨æˆ·æ˜¯é€æ˜çš„ã€‚ è®¾æœ‰ä¸€é€»è¾‘åœ°å€ Aï¼Œé¡µé¢å¤§å°ä¸º Lï¼Œåˆ™åœ¨åˆ†é¡µå­˜å‚¨ç®¡ç†æ–¹å¼ä¸­ï¼Œå®ƒçš„åœ°å€è¢«è½¬æ¢ï¼š $$ Page Number = INT(\\frac{A}{L}) \\\\ Offset In Page = A \\ mod \\ L $$ 0 ï½ 11 ä½è¡¨ç¤ºé¡µå†…ä½ç§»é‡ï¼Œåˆ™æ¯é¡µçš„å¤§å°ä¸º 212 = 4KBã€‚12 ï½ 31 ä½è¡¨ç¤ºé¡µå·ï¼Œ220=1Mï¼Œå³æœ€å¤šå…è®¸æœ‰ 1M ä¸ªé¡µé¢ã€‚ å¦‚æœ‰é€»è¾‘åœ°å€ä¸ºï¼š2170ï¼Œé¡µé¢å¤§å°ä¸º 1KBï¼Œåˆ™P=INT[2170/1024]=2ï¼›W=2170 MOD 1024=122è¿™ä¸ªåœ°å€çš„å˜æ¢é€šå¸¸ç”±ç³»ç»Ÿä¸­çš„æŸäº›ç¡¬ä»¶å®Œæˆã€‚ åœ°å€å˜æ¢æœºæ„ Address Translationåœ°å€å˜æ¢æœºæ„çš„åŠŸèƒ½æ˜¯å°†ç”¨æˆ·çš„é€»è¾‘åœ°å€è½¬å˜ä¸ºå†…å­˜ä¸­çš„ç‰©ç†åœ°å€ã€‚é€»è¾‘åœ°å€ç”±é¡µå·å’Œé¡µå†…ä½ç§»é‡ç»„æˆã€‚é¡µ(Page)çš„å¤§å°å’Œå†…å­˜ç‰©ç†å—(Pageframe)çš„å¤§å°æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥é¡µå†…ä½ç§»é‡å³ä¸ºç‰©ç†å—å†…ä½ç§»é‡ã€‚å…³é”®æ˜¯é¡µå·åˆ°ç‰©ç†å—å·çš„è½¬æ¢ï¼Œç”±é¡µè¡¨å®Œæˆã€‚ åŸºæœ¬çš„åœ°å€å˜æ¢æœºæ„ ä½¿ç”¨å¯„å­˜å™¨å­˜æ”¾é¡µè¡¨é€Ÿåº¦å¿«ï¼Œæˆæœ¬é«˜ã€‚ç‰¹åˆ«å¯¹äºå¤§çš„ç³»ç»Ÿï¼Œé¡µè¡¨å¾ˆé•¿ï¼Œä¸å¯èƒ½éƒ½ç”¨å¯„å­˜å™¨å®ç°ã€‚ ä¸€èˆ¬ç³»ç»Ÿï¼Œå°†é¡µè¡¨å­˜å‚¨åœ¨å†…å­˜ä¸­è®¾ç½®ä¸€ä¸ªé¡µè¡¨å¯„å­˜å™¨ï¼ˆPTRï¼‰ï¼Œè®°å½•å½“å‰è¿è¡Œçš„è¿›ç¨‹çš„é¡µè¡¨åœ¨å†…å­˜ä¸­çš„å§‹å€å’Œé¡µè¡¨é•¿åº¦ã€‚ï¼ˆå¹³æ—¶å­˜äº PCB ä¸­ï¼Œè¦è¿è¡Œæ—¶æ‰è£…å…¥ PTR ä¸­ï¼‰ åˆ†é¡µç³»ç»Ÿä¸­çš„åœ°å€å˜æ¢è¿‡ç¨‹ï¼šï¼ˆ1ï¼‰æ ¹æ®é€»è¾‘åœ°å€,è®¡ç®—å‡ºé¡µå·å’Œé¡µå†…åç§»é‡ï¼›ï¼ˆ2ï¼‰ä» PTR ä¸­å¾—åˆ°é¡µè¡¨é¦–å€ï¼Œç„¶åæ£€ç´¢é¡µè¡¨ï¼ŒæŸ¥æ‰¾æŒ‡å®šé¡µé¢å¯¹åº”çš„é¡µæ¡†å·ï¼›ï¼ˆ3ï¼‰ç”¨é¡µæ¡†å·ä¹˜ä»¥é¡µé¢å¤§å°è·å¾—å…¶å¯¹åº”çš„èµ·å§‹åœ°å€ï¼Œå¹¶å°†å…¶é€å…¥ç‰©ç†åœ°å€çš„é«˜ç«¯ã€‚ï¼ˆ4ï¼‰å°†é¡µå†…åç§»é‡é€å…¥ç‰©ç†åœ°å€ä½ç«¯ï¼Œå½¢æˆå®Œæ•´çš„ç‰©ç†åœ°å€ã€‚ å…·æœ‰å¿«è¡¨çš„åœ°å€å˜æ¢æœºæ„ åˆ†é¡µç³»ç»Ÿä¸­å¤„ç†æœºæ¯æ¬¡å­˜å–æŒ‡ä»¤æˆ–æ•°æ®è‡³å°‘éœ€è¦è®¿é—®ä¸¤æ¬¡ç‰©ç†å†…å­˜ï¼š ç¬¬ä¸€æ¬¡è®¿é—®é¡µè¡¨ï¼Œä»¥å¾—åˆ°ç‰©ç†åœ°å€ ç¬¬äºŒæ¬¡è®¿é—®ç‰©ç†åœ°å€ï¼Œä»¥å¾—åˆ°æ•°æ®ã€‚å­˜å–é€Ÿåº¦å‡ ä¹é™ä½äº†ä¸€å€ï¼Œä»£ä»·å¤ªé«˜ã€‚ä¸ºäº†æé«˜åœ°å€å˜æ¢é€Ÿåº¦ï¼Œä¸ºè¿›ç¨‹é¡µè¡¨è®¾ç½®ä¸€ä¸ªä¸“ç”¨çš„é«˜é€Ÿç¼“å†²å­˜å‚¨å™¨ï¼Œç§°ä¸ºå¿«è¡¨ TLB(Translation Lookaside Buffer)æˆ–è”æƒ³å­˜å‚¨å™¨ï¼ˆAssociative Memoryï¼‰ ã€‚ Lookaside buffer æ˜¯ä¸€ç§ç¡¬ä»¶ç¼“å­˜æœºåˆ¶ï¼Œç”¨äºåŠ é€Ÿå¯¹ç‰¹å®šç±»å‹æ•°æ®çš„è®¿é—®ã€‚è¿™ç§ç¼“å­˜æœºåˆ¶é€šå¸¸åœ¨ CPU æˆ–å…¶ä»–ç¡¬ä»¶ç»„ä»¶ä¸­å®ç°ï¼Œä¾‹å¦‚ç½‘ç»œæ¥å£å¡æˆ–ç¡¬ç›˜æ§åˆ¶å™¨ã€‚Lookaside buffer çš„å·¥ä½œåŸç†æ˜¯å°†æœ€è¿‘æˆ–æœ€å¸¸è®¿é—®çš„æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªå¿«é€Ÿè®¿é—®çš„ç¼“å­˜ä¸­ï¼Œä»¥å‡å°‘å¯¹æ…¢é€Ÿå†…å­˜çš„è®¿é—®ã€‚å½“ CPU æˆ–å…¶ä»–ç¡¬ä»¶ç»„ä»¶éœ€è¦è®¿é—®æ•°æ®æ—¶ï¼Œå®ƒä»¬é¦–å…ˆæŸ¥çœ‹ lookaside bufferã€‚å¦‚æœæ‰€éœ€çš„æ•°æ®åœ¨ç¼“å­˜ä¸­ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¿«é€Ÿåœ°ä»ç¼“å­˜ä¸­è·å–ï¼Œè€Œæ— éœ€è®¿é—®æ…¢é€Ÿçš„å†…å­˜ã€‚è¿™è¢«ç§°ä¸ºç¼“å­˜å‘½ä¸­ã€‚å¦‚æœæ•°æ®ä¸åœ¨ç¼“å­˜ä¸­ï¼Œé‚£ä¹ˆå°±éœ€è¦è®¿é—®æ…¢é€Ÿçš„å†…å­˜ï¼Œå¹¶å°†æ•°æ®æ”¾å…¥ç¼“å­˜ä¸­ä»¥å¤‡åç”¨ã€‚è¿™è¢«ç§°ä¸ºç¼“å­˜æœªå‘½ä¸­ã€‚ è¿›ç¨‹æœ€è¿‘è®¿é—®è¿‡çš„é¡µé¢åœ¨ä¸ä¹…çš„å°†æ¥è¿˜å¯èƒ½è¢«è®¿é—®ã€‚å¿«è¡¨çš„å·¥ä½œåŸç†ç±»ä¼¼äºç³»ç»Ÿä¸­çš„æ•°æ®é«˜é€Ÿç¼“å­˜(cache)ï¼Œå…¶ä¸­ä¸“é—¨ä¿å­˜å½“å‰è¿›ç¨‹æœ€è¿‘è®¿é—®è¿‡çš„ä¸€ç»„é¡µè¡¨é¡¹ã€‚ å¿«è¡¨åœ°å€è½¬æ¢è¿‡ç¨‹ æ ¹æ®é€»è¾‘åœ°å€ä¸­çš„é¡µå·ï¼ŒæŸ¥æ‰¾å¿«è¡¨ä¸­æ˜¯å¦å­˜åœ¨å¯¹åº”çš„é¡µè¡¨é¡¹ã€‚ è‹¥å¿«è¡¨ä¸­å­˜åœ¨è¯¥è¡¨é¡¹ï¼Œç§°ä¸ºå‘½ä¸­ï¼ˆhitï¼‰ï¼Œå–å‡ºå…¶ä¸­çš„é¡µæ¡†å·ï¼ŒåŠ ä¸Šé¡µå†…åç§»é‡ï¼Œè®¡ç®—å‡ºç‰©ç†åœ°å€ã€‚ è‹¥å¿«è¡¨ä¸­ä¸å­˜åœ¨è¯¥é¡µè¡¨é¡¹ï¼Œç§°ä¸ºå‘½ä¸­å¤±è´¥ï¼Œåˆ™å†æŸ¥æ‰¾é¡µè¡¨ï¼Œæ‰¾åˆ°é€»è¾‘åœ°å€ä¸­æŒ‡å®šé¡µå·å¯¹åº”çš„é¡µæ¡†å·ã€‚åŒæ—¶ï¼Œæ›´æ–°å¿«è¡¨ï¼Œå°†è¯¥è¡¨é¡¹æ’å…¥å¿«è¡¨ä¸­ã€‚å¹¶è®¡ç®—ç‰©ç†åœ°å€. è®¿é—®å†…å­˜æœ‰æ•ˆæ—¶é—´ EAT**è®¿é—®å†…å­˜æœ‰æ•ˆæ—¶é—´ EAT(Effective Access Time)**ï¼šä»è¿›ç¨‹å‘å‡ºæŒ‡å®šé€»è¾‘åœ°å€çš„è®¿é—®è¯·æ±‚ï¼Œç»è¿‡åœ°å€å˜æ¢ï¼Œå†åˆ°å†…å­˜ä¸­æ‰¾åˆ°å¯¹åº”çš„ç‰©ç†å•å…ƒå¹¶å–å‡ºæ•°æ®ï¼Œæ‰€èŠ±è´¹çš„æ€»æ—¶é—´ã€‚ å¦‚æ£€ç´¢å¿«è¡¨æ—¶é—´ä¸º 20 nsï¼Œè®¿é—®å†…å­˜ä¸º 100 nsã€‚è‹¥èƒ½åœ¨å¿«è¡¨ä¸­æ£€ç´¢åˆ° CPU ç»™å‡ºçš„é¡µå·ï¼Œåˆ™ CPU å­˜å–ä¸€ä¸ªæ•°æ®å…±éœ€ 120 nsï¼›å¦åˆ™ï¼Œéœ€è¦ 220 ns çš„æ—¶é—´ã€‚å¦‚æœä¸è®¾ç½®å¿«è¡¨ï¼ŒCPU å­˜å–ä¸€ä¸ªæ•°æ®éœ€è¦ 200 nsã€‚å¿«è¡¨(TLB)å‘½ä¸­æ—¶æ•ˆç‡ä¼šå¾ˆé«˜ï¼Œæœªå‘½ä¸­æ•ˆç‡ä¼šé™ä½ï¼Œä½†å¹³å‡åä»è¡¨ç°è‰¯å¥½ $$EAT_{average} = HitR \\times (TLB_{time} + Memory_{time}) + (1-HitR) \\times (TLB_{time} + 2 \\times Memory_{time})$$ $EAT_{average}$ ä¸ºå¹³å‡æœ‰æ•ˆè®¿é—®æ—¶é—´$HitR$ ä¸ºå‘½ä¸­ç‡$TLB_{time}$ ä¸ºå¿«è¡¨è®¿é—®æ—¶é—´ï¼Œ$Memory_{time}$ ä¸ºå†…å­˜è®¿é—®æ—¶é—´ ä¸¤çº§å’Œå¤šçº§é¡µè¡¨é—®é¢˜å¼•å…¥32 ä½é€»è¾‘åœ°å€ç©ºé—´ï¼Œå‡è®¾é¡µé¢å¤§å°ä¸º 4KBï¼ˆ212ï¼‰ï¼Œåˆ™ 4GBï¼ˆ232ï¼‰çš„é€»è¾‘åœ°å€ç©ºé—´å°†è¢«åˆ’åˆ†æˆ 220 ä¸ªé¡µé¢ã€‚è‹¥é‡‡ç”¨ä¸€çº§é¡µè¡¨ï¼Œåˆ™è¯¥è¡¨å°†åŒ…å« 1Mï¼ˆ220ï¼‰ä¸ªé¡µè¡¨é¡¹ã€‚è‹¥æŒ‰å­—èŠ‚å¯»å€ï¼Œä¸€ä¸ªé¡µè¡¨é¡¹å  4Bï¼Œåˆ™ä¸€çº§é¡µè¡¨éœ€è¦å ç”¨ 4MBï¼ˆ222ï¼‰å†…å­˜ç©ºé—´ã€‚ä¸å¯èƒ½å°† 4MB çš„é¡µè¡¨ä¿å­˜åœ¨ä¸€ä¸ªè¿ç»­åŒºä¸­ã€‚é‚£ä¹ˆï¼Œå¦‚ä½•å¤„ç†å¤§é¡µè¡¨çš„å­˜å‚¨ä¸æ£€ç´¢å‘¢ï¼Ÿ å¯ä»¥é‡‡ç”¨è¿™æ ·ä¸¤ä¸ªæ–¹æ³•æ¥è§£å†³è¿™ä¸€é—®é¢˜ï¼šâ‘  é‡‡ç”¨ç¦»æ•£åˆ†é…æ–¹å¼æ¥è§£å†³éš¾ä»¥æ‰¾åˆ°ä¸€å—è¿ç»­çš„å¤§å†…å­˜ç©ºé—´çš„é—®é¢˜ï¼Œï¼ˆå³å¼•å…¥ä¸¤çº§é¡µè¡¨ï¼‰ï¼›â‘¡ åªå°†å½“å‰éœ€è¦çš„éƒ¨åˆ†é¡µè¡¨é¡¹è°ƒå…¥å†…å­˜ï¼Œ å…¶ä½™çš„é¡µè¡¨é¡¹ä»é©»ç•™åœ¨ç£ç›˜ä¸Šï¼Œéœ€è¦æ—¶å†è°ƒå…¥ã€‚ ä¸¤çº§é¡µè¡¨å¯¹äºè¦æ±‚è¿ç»­çš„å†…å­˜ç©ºé—´æ¥å­˜æ”¾é¡µè¡¨çš„é—®é¢˜ï¼š å¯å°†é¡µè¡¨è¿›è¡Œåˆ†é¡µï¼Œå¹¶ç¦»æ•£åœ°å°†å„ä¸ªé¡µé¢åˆ†åˆ«å­˜æ”¾åœ¨ä¸åŒçš„ç‰©ç†å—ä¸­ï¼Œ åŒæ ·ä¹Ÿè¦ä¸ºç¦»æ•£åˆ†é…çš„é¡µè¡¨å†å»ºç«‹ä¸€å¼ é¡µè¡¨ï¼Œç§°ä¸ºå¤–å±‚é¡µè¡¨(Outer Page Table)ï¼Œåœ¨æ¯ä¸ªé¡µè¡¨é¡¹ä¸­è®°å½•äº†é¡µè¡¨åˆ†é¡µçš„ç‰©ç†å—å·ã€‚ å¯¹äº 4GB($2^{32} Byte$)çš„è¿›ç¨‹ï¼Œé¡µé¢å¤§å°ä¸º 4KB($2^12 Byte$) ,è‹¥é‡‡ç”¨äºŒçº§é¡µè¡¨ï¼Œåˆ™å¯¹åº”çš„äºŒçº§é¡µè¡¨ç»“æ„è®¾è®¡å¦‚ä¸‹(å‡å®šæ¯ä¸ªé¡µè¡¨é¡¹ 4B)ï¼š é¡µé¢å¤§å° 4KBï¼Œæ•… 32 ä½é€»è¾‘åœ°å€ä¸­è¦ç”¨ 12 ä½è¡¨ç¤ºé¡µå†…åç§»é‡ã€‚ 4GB çš„é€»è¾‘åœ°å€ç©ºé—´è¢«åˆ†æˆ$4GB \\div 4KB= 2^{20}$ä¸ªé¡µé¢ï¼Œå†…å±‚é¡µè¡¨å¤§å°ä¸º$2^{20} \\times 4B = 4MB$ã€‚ å¤–å±‚é¡µè¡¨çš„è¡¨é¡¹è®°å½•çš„æ˜¯æŸé¡µåœ¨å†…å­˜ä¸­çš„ç‰©ç†å—å·ã€‚å¤–å±‚é¡µè¡¨ä¸ªæ•°ä¸º$4MB \\div 4KB = 2^{10}$ä¸ªï¼Œå¤§å°ä¸º$2^{10} \\times 4B = 4KB$ã€‚ å‰ 10 ä½è¡¨ç¤ºå¤–å±‚é¡µè¡¨çš„é¡µå·ï¼Œå 10 ä½è¡¨ç¤ºå†…å±‚é¡µè¡¨çš„é¡µå·ï¼Œæœ€å 12 ä½è¡¨ç¤ºé¡µå†…åç§»é‡ã€‚ å˜æ¢æœºæ„ï¼šå…ˆåœ¨å¤–å±‚é¡µè¡¨å¯„å­˜å™¨ä¸­æ‰¾åˆ°å¤–å±‚é¡µè¡¨çš„èµ·å§‹åœ°å€ï¼Œæ ¹æ®é€»è¾‘åœ°å€ä¸­çš„å¤–å±‚é¡µå·æ‰¾åˆ°å¯¹åº”çš„å†…å±‚é¡µè¡¨çš„èµ·å§‹åœ°å€ï¼Œå†æ ¹æ®é€»è¾‘åœ°å€ä¸­çš„å†…å±‚é¡µå·æ‰¾åˆ°å¯¹åº”çš„ç‰©ç†å—å·ã€‚ åˆ©ç”¨ç¦»æ•£åˆ†é…æ–¹æ³•å®ç°çš„ä¸¤çº§é¡µè¡¨åªæ˜¯è§£å†³äº†å¤§é¡µè¡¨æ— éœ€å¤§ç‰‡è¿ç»­å­˜å‚¨ç©ºé—´é—®é¢˜ï¼Œä½†å¹¶æœªè§£å†³ç”¨è¾ƒå°‘å†…å­˜å»å­˜æ”¾å¤§é¡µè¡¨é—®é¢˜ï¼Œæœ‰å…³æ­¤ç±»é—®é¢˜çš„æˆåŠŸè§£å†³æ–¹æ¡ˆæ”¾åœ¨è™šæ‹Ÿå­˜å‚¨å™¨ç®¡ç†ä¸­ã€‚ å¤šçº§é¡µè¡¨æœºæ„Introå¯¹äº 64 ä½çš„æœºå™¨ï¼Œé‡‡ç”¨ä¸¤çº§é¡µè¡¨ç»“æ„æ˜¯å¦åˆé€‚? ä½¿ç”¨ 4KB çš„é¡µé¢ï¼Œå‰© 52 ä½ã€‚è‹¥æŒ‰ 4KB æ¥åˆ’åˆ†é¡µè¡¨ï¼Œè¿˜å‰© 42 ä½ç”¨äºå¤–å±‚é¡µè¡¨ï¼Œå› è€Œå¤–å±‚é¡µè¡¨æœ‰ 4KG ä¸ªé¡µè¡¨é¡¹,å  16KGB çš„ç©ºé—´ä½¿ç”¨ 1MB çš„é¡µé¢(220)ï¼Œå‰© 44 ä½ã€‚è‹¥æŒ‰ 1MB æ¥åˆ’åˆ†é¡µè¡¨ï¼Œè¿˜å‰© 26 ä½ç”¨äºå¤–å±‚é¡µè¡¨ï¼Œå¤–å±‚é¡µè¡¨æœ‰ 64M ä¸ªé¡µè¡¨é¡¹ï¼Œå  256MB ç©ºé—´æ˜¾ç„¶è¿™æ˜¯ä¸ç°å®çš„ï¼Œå¤–å±‚é¡µè¡¨è¿‡å¤§æ— æ³•è£…å…¥ä¸€ä¸ªç‰©ç†å—ä¸­ 64 ä½çš„æœºå™¨ï¼Œé‡‡ç”¨çš„æ˜¯å¤šçº§ï¼ˆ4 çº§ä»¥ä¸Šï¼‰é¡µè¡¨ç»“æ„ã€‚ç”µè„‘çš„ä½æ•°é€šå¸¸æŒ‡çš„æ˜¯å…¶ CPU çš„ä½æ•°ï¼Œè¿™æ˜¯æŒ‡ CPU ä¸€æ¬¡èƒ½å¤„ç†çš„æ•°æ®çš„ä½æ•°ï¼Œä¹Ÿå°±æ˜¯å…¶å¯„å­˜å™¨çš„å®½åº¦ã€‚ä¾‹å¦‚ï¼Œ32 ä½çš„ CPU ä¸€æ¬¡å¯ä»¥å¤„ç† 32 ä½ï¼ˆ4 å­—èŠ‚ï¼‰çš„æ•°æ®ï¼Œè€Œ 64 ä½çš„ CPU ä¸€æ¬¡å¯ä»¥å¤„ç† 64 ä½ï¼ˆ8 å­—èŠ‚ï¼‰çš„æ•°æ®ã€‚è¿™ä¸ªä½æ•°ä¹Ÿå†³å®šäº† CPU å¯ä»¥ç›´æ¥å¯»å€çš„å†…å­˜ç©ºé—´çš„å¤§å°ã€‚32 ä½çš„ CPU å¯ä»¥ç›´æ¥å¯»å€$2^{32}ä¸ªä½ç½®ï¼Œä¹Ÿå°±æ˜¯4GBçš„å†…å­˜ç©ºé—´ã€‚åŒæ ·ï¼Œ64ä½çš„CPUå¯ä»¥ç›´æ¥å¯»å€\\2^{64}$ä¸ªä½ç½®ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„ç©ºé—´ï¼Œè¿œè¿œè¶…è¿‡äº†ç°åœ¨çš„è®¡ç®—æœºæ‰€è£…é…çš„å®é™…ç‰©ç†å†…å­˜ã€‚ç„¶è€Œï¼Œå®é™…ä¸Šï¼Œæ“ä½œç³»ç»Ÿé€šå¸¸ä¼šä½¿ç”¨è™šæ‹Ÿå†…å­˜ç³»ç»Ÿï¼Œè¿™å…è®¸æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„åœ°å€ç©ºé—´ï¼Œå¹¶ä¸”è¿™ä¸ªåœ°å€ç©ºé—´çš„å¤§å°å¯ä»¥è¶…è¿‡å®é™…çš„ç‰©ç†å†…å­˜ã€‚ä¾‹å¦‚ï¼Œæ¯ä¸ªè¿›ç¨‹åœ¨ 64 ä½çš„ Linux ç³»ç»Ÿä¸­éƒ½æœ‰ä¸€ä¸ª$2^{48}$å­—èŠ‚çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œè™½ç„¶å®é™…çš„ç‰©ç†å†…å­˜å¯èƒ½åªæœ‰å‡  GBã€‚æ‰€ä»¥ï¼Œç”µè„‘çš„ä½æ•°å†³å®šäº† CPU çš„å¯„å­˜å™¨å®½åº¦ï¼Œä¸€æ¬¡å¯ä»¥å¤„ç†çš„æ•°æ®çš„ä½æ•°ï¼Œä»¥åŠå¯ä»¥ç›´æ¥å¯»å€çš„å†…å­˜ç©ºé—´çš„å¤§å°ã€‚ä½†æ˜¯å®é™…å¯ç”¨çš„åœ°å€ç©ºé—´å¯èƒ½ä¼šå› ä¸ºè™šæ‹Ÿå†…å­˜ç³»ç»Ÿå’Œæ“ä½œç³»ç»Ÿçš„è®¾è®¡è€Œå˜åŒ–ã€‚ å¤šçº§é¡µè¡¨å®ç°é€šè¿‡é—´æ¥å¼•ç”¨å°†é¡µå·åˆ†æˆ k çº§ï¼Œå»ºç«‹é¡µè¡¨â€œæ ‘â€ï¼Œå‡å°‘æ¯çº§é¡µè¡¨çš„é•¿åº¦CPU å¾—åˆ°é€»è¾‘åœ°å€åï¼Œå…ˆä»æœ€é«˜çº§çš„é¡µè¡¨å¼€å§‹ï¼Œé€çº§æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°æœ€ä½çº§çš„é¡µè¡¨ï¼Œå†æ ¹æ®é¡µè¡¨é¡¹æ‰¾åˆ°ç‰©ç†å—å·ã€‚ åç½®é¡µè¡¨ IPT Inverted Page TableIntro å¯¹äºåœ¨ OS ä¸­åŒæ—¶è¿è¡Œçš„å¤šä¸ªè¿›ç¨‹ï¼Œç›¸å½“å¤§çš„ä¸€éƒ¨åˆ†å†…å­˜ä»…è¢«é¡µè¡¨å ç”¨ã€‚è‹¥ç»“åˆäº†å¤šçº§åˆ†é¡µæ–¹æ¡ˆï¼Œè¿™ä¼šè¿›ä¸€æ­¥å¢åŠ å­˜å‚¨é¡µè¡¨æ‰€éœ€çš„ç©ºé—´ï¼Œé¡µè¡¨å ç”¨çš„å†…å­˜é‡å¯èƒ½ä¼šæˆä¸ºä¸€ä¸ªå·¨å¤§çš„å¼€é”€ï¼›æ­¤å¤–ï¼ŒæŸ¥æ‰¾ä¸€ä¸ªç‰©ç†åœ°å€éœ€è¦è¯»å–å¤šä¸ªé¡µè¡¨ï¼Œå¯¼è‡´æŸ¥æ‰¾æ—¶é—´å¢åŠ ã€‚ä¸ºäº†æœ‰æ•ˆåœ°åˆ©ç”¨å­˜å‚¨å™¨ï¼Œå¼•å…¥äº†åç½®é¡µè¡¨,ä¸€ä¸ªç³»ç»Ÿä¸­ä¸€èˆ¬åªå­˜åœ¨ä¸€ä¸ªåå‘é¡µè¡¨ï¼Œè¿™å¼ é¡µè¡¨ä¸­çš„ entry çš„æ•°é‡å’Œå†…å­˜ä¸­ pageframe çš„æ•°é‡æ˜¯ä¸€æ ·çš„ IPT æ€æƒ³ï¼šIPT æ˜¯ä¸ºä¸»å­˜ä¸­çš„æ¯ä¸€ä¸ªç‰©ç†å—å»ºç«‹ä¸€ä¸ªé¡µè¡¨é¡¹å¹¶æŒ‰ç…§å—å·æ’åºï¼›è¯¥è¡¨æ¯ä¸ªè¡¨é¡¹ Entry åŒ…å«æ­£åœ¨è®¿é—®è¯¥ç‰©ç†å—çš„è¿›ç¨‹æ ‡è¯† Pidã€é¡µé¢å· Page number åŠç‰¹å¾ä½ Control bits,ç”¨æ¥å®Œæˆä¸»å­˜ç‰©ç†å—åˆ°è®¿é—®è¿›ç¨‹çš„é¡µå·çš„è½¬æ¢ IPT Entry Struct é¡µå· Page number: It specifies the page number range of the logical address. è¿›ç¨‹æ ‡è¯† Process id: An inverted page table contains the address space information of all the processes in execution. Since two different processes can have a similar set of virtual addresses, it becomes necessary in the Inverted Page Table to store a process Id of each process to identify its address space uniquely. This is done by using the combination of PID and Page Number. So this Process Id acts as an address space identifier and ensures that a virtual page for a particular process is mapped correctly to the corresponding physical frame. ç‰¹å¾ä½ Control bits: These bits are used to store extra paging-related information. These include the valid bit, dirty bit, reference bits, protection, and locking information bits. é“¾æ¥æŒ‡é’ˆ Chained pointer: It may be possible sometimes that two or more processes share a part of the main memory. In this case, two or more logical pages map to the same Page Table Entry then a chaining pointer is used to map the details of these logical pages to the root page table.Note: Number of Entries in Inverted page table = Number of frames in Physical Address Space(PAS). IPT åœ°å€è½¬æ¢è¿‡ç¨‹ ç»™å‡ºè¿›ç¨‹æ ‡è¯†å’Œé¡µå·,ç”¨å®ƒä»¬å»æ¯”è¾ƒ IPT,è‹¥æ•´ä¸ªåç½®é¡µè¡¨ä¸­æœªèƒ½æ‰¾åˆ°åŒ¹é…çš„é¡µè¡¨é¡¹,è¯´æ˜è¯¥é¡µä¸åœ¨ä¸»å­˜,äº§ç”Ÿè¯·æ±‚è°ƒé¡µä¸­æ–­,è¯·æ±‚æ“ä½œç³»ç»Ÿè°ƒå…¥;å¦åˆ™ï¼Œè¯¥è¡¨é¡¹çš„åºå·ä¾¿æ˜¯ç‰©ç†å—å·,å—å·åŠ ä¸Šä½ç§»,ä¾¿å½¢æˆç‰©ç†åœ°å€ã€‚ ç„¶è€Œï¼Œåç½®é¡µè¡¨ä¹Ÿæœ‰å…¶ç¼ºç‚¹ï¼Œæ¯”å¦‚æŸ¥æ‰¾ç‰¹å®šè™šæ‹Ÿåœ°å€å¯¹åº”çš„ç‰©ç†åœ°å€å¯èƒ½ä¼šæ›´å¤æ‚ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸€äº›ç³»ç»Ÿä¼šä½¿ç”¨é¢å¤–çš„æ•°æ®ç»“æ„ï¼Œå¦‚å“ˆå¸Œè¡¨ï¼ŒåŸºäº Hash æ˜ å°„å€¼æŸ¥æ‰¾å¯¹åº”é¡µè¡¨é¡¹ä¸­çš„å¸§å· ä»¥ä¸‹æ˜¯å€’æ’é¡µè¡¨ï¼ˆIPTï¼‰åœ¨å¼•å…¥å“ˆå¸Œè¡¨åå¦‚ä½•è½¬æ¢é€»è¾‘åœ°å€çš„è¿‡ç¨‹ï¼š å½“éœ€è¦è®¿é—®å†…å­˜æ—¶ï¼Œæ“ä½œç³»ç»Ÿæˆ–ç¡¬ä»¶ä¼šä½¿ç”¨é€»è¾‘åœ°å€ä¸­çš„é¡µå·å’Œè¿›ç¨‹ ID ä½œä¸ºå“ˆå¸Œå‡½æ•°çš„è¾“å…¥ï¼Œè®¡ç®—å‡ºå“ˆå¸Œå€¼ã€‚ è¿™ä¸ªå“ˆå¸Œå€¼ç”¨äºåœ¨å“ˆå¸Œè¡¨ä¸­æŸ¥æ‰¾ç›¸åº”çš„é¡µè¡¨é¡¹ã€‚å¦‚æœå­˜åœ¨å†²çªï¼ˆå³å¤šä¸ª VPN å“ˆå¸Œåˆ°åŒä¸€ä½ç½®ï¼‰ï¼Œåˆ™ä½¿ç”¨é“¾æ¥ï¼ˆé“¾è¡¨ï¼‰çš„æ–¹å¼è§£å†³å†²çªã€‚ ä¸€æ—¦æ‰¾åˆ°äº†å¯¹åº”çš„é¡µè¡¨é¡¹ï¼Œå°±å¯ä»¥å¾—åˆ°ç‰©ç†é¡µæ¡†å·ï¼ˆPhysical Frame Numberï¼ŒPFNï¼‰ã€‚è¿™ä¸ª PFN å°±æ˜¯ç‰©ç†åœ°å€çš„ä¸€éƒ¨åˆ†ã€‚ æœ€åï¼Œç‰©ç†åœ°å€ç”± PFN å’ŒåŸå§‹çš„é¡µå†…åç§»ç»„æˆã€‚ é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå€’æ’é¡µè¡¨ç»“åˆå“ˆå¸Œè¡¨å¯ä»¥æœ‰æ•ˆåœ°å°†é€»è¾‘åœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€ï¼ŒåŒæ—¶ä¿æŒæŸ¥æ‰¾æ—¶é—´çš„æ•ˆç‡ã€‚ Pros Reduced Memory Overhead Simplified Page Swapping: When a process needs to be swapped out of memory, the IPT can be used to quickly identify all the physical pages that are associated with the process. This can simplify the process of swapping pages and reduce the overall overhead of memory management. Improved Cache Performance: Because the IPT is smaller than a Page Table, it can be more easily stored in the CPU cache, which can improve the performance of memory access operations. åŸºæœ¬åˆ†æ®µå­˜å‚¨ç®¡ç†æ–¹å¼ Segmented Storage Managementåˆ†æ®µå¼å­˜å‚¨ç®¡ç†æ–¹å¼çš„å¼•å…¥ æ–¹ä¾¿ç¼–ç¨‹é€šå¸¸ï¼Œç”¨æˆ·æŠŠè‡ªå·±çš„ä½œä¸šæŒ‰ç…§é€»è¾‘å…³ç³»åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªæ®µï¼Œæ¯ä¸ªæ®µéƒ½æ˜¯ä» 0 å¼€å§‹ç¼–å€ï¼Œå¹¶æœ‰è‡ªå·±çš„åå­—å’Œé•¿åº¦ã€‚å› æ­¤ï¼Œå¸Œæœ›è¦è®¿é—®çš„é€»è¾‘åœ°å€æ˜¯ç”±æ®µåï¼ˆæ®µå·ï¼‰å’Œæ®µå†…åç§»é‡ï¼ˆæ®µå†…åœ°å€ï¼‰å†³å®šçš„å¸¸è§æ®µæœ‰ï¼šä¸»ç¨‹åºæ®µã€å­ç¨‹åºæ®µã€æ•°æ®æ®µã€å †æ ˆæ®µ etc åˆ†æ®µå…±äº«ã€‚ä¸€èˆ¬å®ç°ç¨‹åºå’Œæ•°æ®å…±äº«æ—¶éƒ½æ˜¯ä»¥ä¿¡æ¯çš„é€»è¾‘å•ä½(è¿‡ç¨‹ã€å‡½æ•°æˆ–æ–‡ä»¶)ä¸ºåŸºç¡€çš„ã€‚åœ¨åˆ†é¡µç³»ç»Ÿä¸­çš„æ¯ä¸€é¡µéƒ½åªæ˜¯å­˜æ”¾ä¿¡æ¯çš„ç‰©ç†å•ä½ï¼Œå…¶æœ¬èº«å¹¶æ— å®Œæ•´æ„ä¹‰ï¼Œå› è€Œä¸ä¾¿äºå®ç°ä¿¡æ¯å…±äº«ã€‚æ®µæ˜¯ä¿¡æ¯çš„é€»è¾‘å•ä½ï¼Œå¯ä»¥ä¸ºå…±äº«è¿‡ç¨‹å»ºç«‹ä¸€ä¸ªç‹¬ç«‹çš„æ®µï¼Œæ›´ä¾¿äºå®ç°ç¨‹åºå’Œæ•°æ®çš„å…±äº«ã€‚ åˆ†æ®µä¿æŠ¤ã€‚ä¿¡æ¯ä¿æŠ¤åŒæ ·æ˜¯å¯¹ä¿¡æ¯çš„é€»è¾‘å•ä½è¿›è¡Œä¿æŠ¤ï¼Œå› æ­¤ï¼Œåˆ†æ®µç®¡ç†æ–¹å¼èƒ½æ›´æœ‰æ•ˆå’Œæ–¹ä¾¿çš„å®ç°ä¿¡æ¯ä¿æŠ¤åŠŸèƒ½ã€‚ åŠ¨æ€é“¾æ¥ã€‚ç¨‹åºè¿è¡Œæ—¶ï¼Œå…ˆå°†ä¸»ç¨‹åºæ‰€å¯¹åº”çš„ç›®æ ‡ç¨‹åºè£…å…¥å†…å­˜å¹¶å¯åŠ¨è¿è¡Œï¼Œå½“è¿è¡Œè¿‡ç¨‹ä¸­åˆéœ€è¦è°ƒç”¨æŸæ®µæ—¶ï¼Œæ‰å°†è¯¥æ®µè°ƒå…¥å†…å­˜å¹¶è¿›è¡Œé“¾æ¥,åˆ†æ®µç®¡ç†æ–¹å¼æ›´é€‚åˆå®ç°åŠ¨æ€é“¾æ¥ã€‚ åŠ¨æ€å¢é•¿ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå¾€å¾€æœ‰äº›æ®µï¼Œç‰¹åˆ«æ˜¯æ•°æ®æ®µä¼šéšç€ç¨‹åºçš„è¿è¡Œä¸æ–­å¢å¤§ï¼Œè€Œè¿™ç§å¢é•¿äº‹å…ˆå¹¶ä¸çŸ¥é“ä¼šå¢é•¿åˆ°å¤šå¤§ï¼Œé‡‡ç”¨å…¶å®ƒå­˜å‚¨ç®¡ç†æ–¹å¼æ˜¯éš¾ä»¥åº”ä»˜çš„ï¼Œè€Œåˆ†æ®µå­˜å‚¨ç®¡ç†å´èƒ½è¾ƒå¥½çš„è§£å†³è¿™ä¸€é—®é¢˜ã€‚ åˆ†æ®µå¼å­˜å‚¨ç®¡ç†çš„åŸºæœ¬åŸç†åˆ†æ®µ Segmentation ä½œä¸šåœ°å€ç©ºé—´æŒ‰é€»è¾‘ä¿¡æ¯çš„å®Œæ•´æ€§è¢«åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªæ®µï¼› æ¯æ®µæœ‰æ®µåï¼ˆæˆ–æ®µå·ï¼‰ï¼Œæ¯æ®µä» 0 å¼€å§‹ç¼–å€ï¼› æ®µå†…çš„åœ°å€ç©ºé—´æ˜¯è¿ç»­çš„ã€‚ è®¸å¤šç¼–è¯‘ç¨‹åºæ”¯æŒåˆ†æ®µæ–¹å¼ï¼Œè‡ªåŠ¨æ ¹æ®æºç¨‹åºçš„æƒ…å†µäº§ç”Ÿè‹¥å¹²ä¸ªæ®µã€‚ åˆ†æ®µçš„åŸºæœ¬åŸç†åœ¨åˆ†æ®µç®¡ç†ç³»ç»Ÿä¸­ï¼Œå¯¹æ‰€æœ‰åœ°å€ç©ºé—´çš„è®¿é—®å‡è¦æ±‚ä¸¤ä¸ªæˆåˆ†ï¼š (1)æ®µçš„åå­—ï¼›(2)æ®µå†…åœ°å€ã€‚ä¾‹å¦‚ï¼Œå¯æŒ‰ä¸‹è¿°è°ƒç”¨ï¼š 123CALL [X]|&lt;Y&gt; è½¬ç§»åˆ°å­ç¨‹åºXä¸­çš„å…¥å£ç‚¹YLOAD R1, [A]|&lt;D&gt; å°†æ•°ç»„Açš„Då•å…ƒçš„å€¼è¯»å…¥å¯„å­˜å™¨1STORE R1,[B]|&lt;C&gt; å°†å¯„å­˜å™¨1çš„å†…å®¹å­˜å…¥åˆ†æ®µBçš„Cå•å…ƒä¸­ è¿™äº›ç¬¦å·ç¨‹åºç»æ±‡ç¼–å’Œè£…é…åï¼ŒæŒ‡ä»¤å’Œæ•°æ®çš„å•å…ƒåœ°å€å‡ç”±ä¸¤éƒ¨åˆ†æ„æˆï¼šä¸€æ˜¯è¡¨ç¤ºæ®µåçš„æ®µå· Sï¼›ä¸€æ˜¯ä½ç§»é‡ Wï¼Œå³æ®µå†…åœ°å€ã€‚ åˆ†æ®µç®¡ç†åˆ†æ®µç®¡ç†ï¼Œå°±æ˜¯ç®¡ç†ç”±è‹¥å¹²åˆ†æ®µç»„æˆçš„ä½œä¸šï¼Œä¸”æŒ‰åˆ†æ®µæ¥è¿›è¡Œå­˜å‚¨åˆ†é…ã€‚å®ç°åˆ†æ®µç®¡ç†çš„å…³é”®åœ¨äºï¼Œå¦‚ä½•ä¿è¯åˆ†æ®µ(äºŒç»´)åœ°å€ç©ºé—´ä¸­çš„ä¸€ä¸ªä½œä¸šåœ¨çº¿æ€§(ä¸€ç»´)çš„å­˜å‚¨ç©ºé—´ä¸­æ­£ç¡®è¿è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚ä½•æŠŠåˆ†æ®µåœ°å€ç»“æ„å˜æ¢æˆçº¿æ€§çš„åœ°å€ç»“æ„ã€‚å’Œåˆ†é¡µç®¡ç†ä¸€æ ·ï¼Œå¯é‡‡ç”¨åŠ¨æ€é‡å®šä½æŠ€æœ¯ï¼Œå³é€šè¿‡åœ°å€å˜æ¢æœºæ„æ¥å®ç°ã€‚ ä¼˜ç‚¹ï¼šæ²¡æœ‰å†…ç¢ç‰‡ï¼Œå¤–ç¢ç‰‡å¯ä»¥é€šè¿‡å†…å­˜ç´§å‡‘æ¥æ¶ˆé™¤ã€‚ä¾¿äºæ”¹å˜è¿›ç¨‹å ç”¨ç©ºé—´çš„å¤§å°ã€‚ æ®µè¡¨ Segment Tableä¸ºæ¯ä¸ªæ®µåˆ†é…ä¸€ä¸ªè¿ç»­çš„åˆ†åŒºï¼Œè€Œè¿›ç¨‹ä¸­çš„å„ä¸ªæ®µå¯ä»¥ç¦»æ•£åœ°ç§»å…¥å†…å­˜ä¸­ä¸åŒçš„åˆ†åŒºä¸­æ®µè¡¨ï¼šæ¯ä¸ªæ®µåœ¨è¡¨ä¸­å æœ‰ä¸€ä¸ªè¡¨é¡¹ï¼Œå…¶ä¸­è®°å½•äº†è¯¥æ®µåœ¨å†…å­˜ä¸­çš„èµ·å§‹åœ°å€(åˆç§°ä¸ºâ€œåŸºå€â€,Base Address)å’Œæ®µé•¿ã€‚é€šå¸¸å°†æ®µè¡¨æ”¾åœ¨å†…å­˜ä¸­ï¼Œæ‰§è¡Œä¸­çš„è¿›ç¨‹å¯é€šè¿‡æŸ¥æ‰¾æ®µè¡¨æ‰¾åˆ°æ¯ä¸ªæ®µæ‰€å¯¹åº”çš„å†…å­˜åŒºã€‚ä½œç”¨ä¸ºå®ç°ä»é€»è¾‘æ®µåˆ°ç‰©ç†å†…å­˜åŒºçš„æ˜ å°„ åœ°å€å˜æ¢æœºæ„ Address Translationæ®µè¡¨å¯„å­˜å™¨ï¼ˆSegment Table Registerï¼ŒSTRï¼‰ æ ¹æ®æ®µè¡¨å¯„å­˜å™¨çš„å†…å®¹æ‰¾åˆ°è¯¥ä½œä¸šçš„æ®µè¡¨åœ°å€ï¼› æ£€ç´¢æ®µè¡¨ï¼Œå¾—åˆ°è¯¥æ®µåœ¨ä¸»å­˜çš„èµ·å§‹åœ°å€ï¼› å°†æ®µçš„ä¸»å­˜èµ·å§‹åœ°å€å’Œä½ç§»é‡ W ç›¸åŠ ï¼Œå³å¾—è®¿é—®ä¸»å­˜çš„ç‰©ç†åœ°å€ è‹¥æ®µè¡¨æ”¾åœ¨å†…å­˜ä¸­ï¼Œæ¯è®¿é—®ä¸€ä¸ªæ•°æ®éœ€è¦è®¿é—®å†…å­˜ 2 æ¬¡ï¼Œå¯è®¾ç½®è”æƒ³å­˜å‚¨å™¨ï¼ˆå¿«è¡¨ï¼‰ï¼Œä»¥æé«˜è®¿é—®é€Ÿåº¦ã€‚ æ®µçš„å…±äº«å’Œä¿æŠ¤ä¿¡æ¯å…±äº«åˆ†é¡µç³»ç»Ÿå®ç°ç¨‹åºæ®µçš„å…±äº«è¾ƒä¸ºå›°éš¾ã€‚åˆ†æ®µæ˜“äºå®ç°æ®µçš„å…±äº«å’Œæ®µçš„ä¿æŠ¤ã€‚å¯é‡å…¥ä»£ç ï¼ˆReentrant Code, çº¯ä»£ç ï¼‰æ˜¯ä¸€ç§å…è®¸å¤šä¸ªè¿›ç¨‹åŒæ—¶è®¿é—®çš„ä»£ç ï¼ˆå¯å…±äº«ï¼‰ï¼Œä¸”æ˜¯ä¸€ç§ä¸å…è®¸ä»»ä½•è¿›ç¨‹å¯¹å…¶è¿›è¡Œä¿®æ”¹çš„ä»£ç ã€‚ ä¾‹å¦‚ä¸€ä¸ªå¤šç”¨æˆ·ç³»ç»Ÿå¯æ¥çº³ 40 ä¸ªç”¨æˆ·ï¼Œå®ƒä»¬éƒ½æ‰§è¡Œä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘ç¨‹åº(ED)ï¼ŒED ä»£ç å…± 160Kï¼ˆED å¯å…±äº«ï¼‰ï¼Œæ¯ä¸ªç”¨æˆ·è¿˜æœ‰ 40K çš„æ•°æ®åŒº(DA)ã€‚ ä¸é‡‡ç”¨ä¿¡æ¯å…±äº«æ—¶éœ€å ç”¨çš„å†…å­˜ç©ºé—´ $(160K + 40K ) \\times 40 = 8000K$ é‡‡ç”¨ä¿¡æ¯å…±äº«åå ç”¨çš„å†…å­˜ç©ºé—´ $160K + 40K \\times 40 = 1760K$ åˆ†é¡µå…±äº«åœ¨åˆ†é¡µå­˜å‚¨ç®¡ç†ä¸­ï¼Œè¿›ç¨‹è¢«åˆ’åˆ†ä¸ºå›ºå®šå¤§å°çš„é¡µã€‚å½“ä¸¤ä¸ªæˆ–æ›´å¤šçš„è¿›ç¨‹éœ€è¦è®¿é—®ç›¸åŒçš„ä¿¡æ¯æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åˆ†é¡µå…±äº«ã€‚ä¾‹å¦‚ï¼Œå½“å¤šä¸ªè¿›ç¨‹è¿è¡Œç›¸åŒçš„ç¨‹åºæˆ–è®¿é—®ç›¸åŒçš„åªè¯»æ–‡ä»¶æ—¶ï¼Œå®ƒä»¬å¯ä»¥å…±äº«ç›¸åŒçš„ä»£ç é¡µæˆ–æ•°æ®é¡µã€‚è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯å¯ä»¥èŠ‚çœå†…å­˜ç©ºé—´ï¼Œå› ä¸ºç›¸åŒçš„ä¿¡æ¯åªéœ€è¦åœ¨å†…å­˜ä¸­å­˜å‚¨ä¸€æ¬¡ã€‚æ­¤å¤–ï¼Œåˆ†é¡µå…±äº«ä¹Ÿå¯ä»¥ç”¨äºå®ç°è¿›ç¨‹é—´çš„é€šä¿¡ã€‚ å¯¹äºæ•°æ®é¡µé¢ï¼Œå®ç°èµ·æ¥æ¯”è¾ƒç®€å•ã€‚å› ä¸ºè¿™ä¸ªæ•°æ®é¡µé¢å¯ä»¥å®‰æ’åœ¨è¯¸ä½œä¸šåœ°å€ç©ºé—´ä¸­çš„ä»»ä½•ä¸€é¡µé¢ä¸Šã€‚å¦‚æœå¤šä¸ªè¿›ç¨‹ï¼ˆæˆ–ä½œä¸šï¼‰è¦å…±äº«åŒä¸€ä¸ªä»£ç é¡µï¼Œé‚£ä¹ˆè¿™ä¸ªä»£ç é¡µå¿…é¡»åœ¨æ‰€æœ‰å…±äº«å®ƒçš„è¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­å¤„äºç›¸åŒçš„ä½ç½®ï¼ˆå³å…·æœ‰ç›¸åŒçš„é¡µå·ï¼‰ã€‚è¿™æ˜¯å› ä¸ºä»£ç é¡µä¸­çš„è·³è½¬æˆ–å¼•ç”¨æŒ‡ä»¤çš„ç›®æ ‡åœ°å€é€šå¸¸åœ¨é“¾æ¥é˜¶æ®µå°±ç¡®å®šäº†ã€‚ åˆ†æ®µå…±äº«åœ¨åˆ†æ®µå­˜å‚¨ç®¡ç†ä¸­ï¼Œè¿›ç¨‹è¢«åˆ’åˆ†ä¸ºå¤šä¸ªå…·æœ‰ä¸åŒé•¿åº¦å’ŒåŠŸèƒ½çš„æ®µã€‚åˆ†æ®µå…±äº«å…è®¸å¤šä¸ªè¿›ç¨‹å…±äº«ä¸€ä¸ªæˆ–å¤šä¸ªæ®µã€‚è¿™åœ¨ä¸€äº›æƒ…å†µä¸‹æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ä¾‹å¦‚ï¼Œå½“å¤šä¸ªè¿›ç¨‹éœ€è¦æ‰§è¡Œç›¸åŒçš„å‡½æ•°æˆ–è®¿é—®ç›¸åŒçš„æ•°æ®ç»“æ„æ—¶ï¼Œå®ƒä»¬å¯ä»¥å…±äº«ç›¸åŒçš„ä»£ç æ®µæˆ–æ•°æ®æ®µã€‚åˆ†æ®µå…±äº«çš„ä¼˜ç‚¹æ˜¯å®ƒå¯ä»¥æ›´çµæ´»åœ°ç®¡ç†å†…å­˜ï¼Œå› ä¸ºæ¯ä¸ªæ®µçš„å¤§å°å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œè°ƒæ•´ã€‚æ­¤å¤–ï¼Œåˆ†æ®µå…±äº«ä¹Ÿå¯ä»¥ç”¨äºå®ç°è¿›ç¨‹é—´çš„é€šä¿¡ã€‚ æ®µé¡µå¼å­˜å‚¨ç®¡ç† Segment Pagingæ®µé¡µå¼å­˜å‚¨ç®¡ç†çš„å¼•å…¥åˆ†é¡µç®¡ç†å†…å­˜ç®¡ç†æ•ˆç‡é«˜ æ²¡æœ‰å¤–é›¶å¤´ å†…é›¶å¤´å°åˆ†æ®µç®¡ç†ç¬¦åˆæ¨¡å—åŒ–æ€æƒ³ æ¯ä¸ªåˆ†æ®µéƒ½å…·å¤‡å®Œæ•´çš„åŠŸèƒ½ æ–¹ä¾¿ä»£ç å…±äº«ã€ä¿æŠ¤ æ²¡æœ‰å†…é›¶å¤´ï¼Œå­˜åœ¨å¤–é›¶å¤´ æ®µå¼å­˜å‚¨åœ¨å†…å­˜ä¿æŠ¤æ–¹é¢æœ‰ä¼˜åŠ¿ï¼Œé¡µå¼å­˜å‚¨åœ¨å†…å­˜åˆ©ç”¨å’Œä¼˜åŒ–è½¬ç§»åˆ°åå¤‡å­˜å‚¨æ–¹é¢æœ‰ä¼˜åŠ¿ã€‚ä¸¤è€…ç»“åˆï¼Œå½¢æˆæ®µé¡µå¼å­˜å‚¨ç®¡ç†æ–¹å¼ã€‚ åŸç†ï¼šåˆ†æ®µå’Œåˆ†é¡µç›¸ç»“åˆã€‚å…ˆå°†ç”¨æˆ·ç¨‹åºåˆ†æ®µï¼Œæ¯æ®µå†…å†åˆ’åˆ†æˆè‹¥å¹²é¡µï¼Œæ¯æ®µæœ‰æ®µåï¼ˆæ®µå·ï¼‰ï¼Œæ¯æ®µå†…éƒ¨çš„é¡µæœ‰ä¸€è¿ç»­çš„é¡µå·ã€‚ ä¸‹å›¾ä¸ºæ®µé¡µå¼ç³»ç»Ÿä¸­ä¸€ä¸ªä½œä¸šçš„åœ°å€ç©ºé—´ç»“æ„ï¼Œé¡µé¢å°ºå¯¸ä¸º 4KBã€‚ç”±å›¾å¯è§ï¼Œè¯¥ä½œä¸šæœ‰ä¸‰ä¸ªåˆ†æ®µï¼Œç¬¬ä¸€æ®µä¸º 15KBï¼Œå  4 é¡µï¼Œæœ€åä¸€é¡µæœ‰ 1KB æœªç”¨ï¼›ç¬¬äºŒæ®µä¸º 8KBï¼Œæ°å¥½å æ»¡ 2 é¡µï¼›ç¬¬ä¸‰æ®µä¸º 10KBï¼Œå  3 é¡µï¼›è€Œæœ€åä¸€é¡µæœ‰ 2KB æœªç”¨ã€‚å’Œåˆ†é¡µç³»ç»Ÿä¸€æ ·ï¼Œè¿™äº›æœªå†™æ»¡çš„é¡µï¼Œåœ¨è£…å…¥ä¸»å­˜ç©ºé—´åï¼Œä¾ç„¶å­˜åœ¨å†…é›¶å¤´é—®é¢˜ã€‚ å†…å­˜åˆ’åˆ†ï¼šæŒ‰é¡µå¼å­˜å‚¨ç®¡ç†æ–¹æ¡ˆã€‚ å†…å­˜åˆ†é…ï¼šä»¥é¡µä¸ºå•ä½è¿›è¡Œç¦»æ•£åˆ†é…ã€‚ é€»è¾‘åœ°å€ç»“æ„ï¼šç”±äºæ®µé¡µå¼ç³»ç»Ÿç»™ä½œä¸šåœ°å€ç©ºé—´å¢åŠ äº†å¦ä¸€çº§ç»“æ„ç°åœ¨åœ°å€ç©ºé—´å¦‚ä¸‹æ‰€ç¤º æ®µå· Segment numbers(S) æ®µå†…é¡µå· Page number (P) é¡µå†…ç›¸å¯¹åœ°å€(ä½ç§»é‡)The offset number (W) ç»¼åˆäº†åˆ†æ®µå’Œåˆ†é¡µæŠ€æœ¯çš„ä¼˜ç‚¹ï¼Œæ—¢èƒ½æœ‰æ•ˆåœ°åˆ©ç”¨å­˜å‚¨ç©ºé—´ï¼Œåˆèƒ½æ–¹ä¾¿ç”¨æˆ·è¿›è¡Œç¨‹åºè®¾è®¡ã€‚ä½†æ˜¯ï¼Œå®ç°æ®µé¡µå¼å­˜å‚¨ç®¡ç†ç³»ç»Ÿéœ€è¦å¢åŠ ç¡¬ä»¶æˆæœ¬ï¼Œç³»ç»Ÿçš„å¤æ‚åº¦å’Œç®¡ç†å¼€é”€ä¹Ÿå¤§å¤§å¢åŠ ã€‚å› æ­¤ï¼Œæ®µé¡µå¼å­˜å‚¨ç®¡ç†æŠ€æœ¯é€‚åˆäºå¤§ã€ä¸­å‹è®¡ç®—æœºç³»ç»Ÿï¼Œä¸å¤ªé€‚åˆå°å‹ã€å¾®å‹è®¡ç®—æœºç³»ç»Ÿã€‚ åœ°å€å˜æ¢æœºæ„ Address Translation é¦–å…ˆï¼Œä»æ®µè¡¨å¯„å­˜å™¨ä»è·å¾—è¿›ç¨‹æ®µè¡¨çš„èµ·å§‹åœ°å€ï¼Œæ ¹æ®è¯¥åœ°å€ï¼ŒæŸ¥æ‰¾è¿›ç¨‹çš„æ®µè¡¨ã€‚ ç„¶åï¼Œæ ¹æ®é€»è¾‘åœ°å€æŒ‡å®šçš„æ®µå·æ£€ç´¢æ®µè¡¨ï¼Œæ‰¾åˆ°å¯¹åº”æ®µçš„é¡µè¡¨èµ·å§‹åœ°å€ã€‚ å†æ ¹æ®é€»è¾‘åœ°å€ä¸­æŒ‡å®šçš„é¡µå·æ£€ç´¢è¯¥é¡µè¡¨ï¼Œæ‰¾åˆ°å¯¹åº”é¡µæ‰€åœ¨çš„ç‰©ç†å—å·ã€‚ æœ€åï¼Œç”¨ç‰©ç†å—å·åŠ ä¸Šé€»è¾‘åœ°å€ä¸­æŒ‡å®šçš„é¡µå†…åç§»é‡ï¼Œå½¢æˆç‰©ç†åœ°å€ã€‚ æ®µé¡µå¼å­˜å‚¨ç®¡ç†åœ¨æ®µé¡µå¼å­˜å‚¨ç®¡ç†æ–¹å¼ä¸­ï¼Œæ¯è®¿é—®ä¸€æ¬¡æ•°æ®ï¼Œéœ€è®¿é—® æ¬¡å†…å­˜ã€‚ ç¬¬ä¸€æ¬¡è®¿é—®å†…å­˜ä¸­çš„æ®µè¡¨ ç¬¬äºŒæ¬¡è®¿é—®å†…å­˜ä¸­çš„é¡µè¡¨ ç¬¬ä¸‰æ¬¡è®¿é—®ç›¸åº”æ•°æ®ã€‚å¯ä»¥è®¾ç½®å¿«è¡¨ï¼Œè¡¨é¡¹åº”åŒ…æ‹¬æ®µå·ã€é¡µå·ã€ç‰©ç†å—å· SwapIntroå¯¹æ¢æŒ‡æŠŠå†…å­˜ä¸­æš‚ä¸èƒ½è¿è¡Œçš„è¿›ç¨‹æˆ–æš‚æ—¶ä¸ç”¨å’Œç¨‹åºå’Œæ•°æ®ï¼Œæ¢åˆ°å¤–å­˜ä¸Šï¼Œä»¥è…¾å‡ºè¶³å¤Ÿçš„å†…å­˜ç©ºé—´ï¼ŒæŠŠå·²å…·å¤‡è¿è¡Œæ¡ä»¶çš„è¿›ç¨‹ï¼Œæˆ–è¿›ç¨‹æ‰€éœ€è¦çš„ç¨‹åºå’Œæ•°æ®ï¼Œæ¢å…¥å†…å­˜ã€‚å¯¹æ¢æ˜¯ç³»ç»Ÿè¡Œä¸ºï¼Œæ˜¯æé«˜å†…å­˜çš„åˆ©ç”¨ç‡çš„æœ‰æ•ˆæªæ–½ã€‚å¸¸ç”¨äºå¤šé“ç¨‹åºç³»ç»Ÿæˆ–å°å‹åˆ†æ—¶ç³»ç»Ÿä¸­ï¼Œä¸åˆ†åŒºå­˜å‚¨ç®¡ç†é…åˆä½¿ç”¨ã€‚å®ç°ï¼šå¯åœ¨ç³»ç»Ÿä¸­è®¾ä¸€å¯¹æ¢è¿›ç¨‹ï¼Œä»¥æ‰§è¡Œæ¢è¿›å†…å­˜ã€æ¢å‡ºè‡³å¤–å­˜æ“ä½œã€‚ å¯¹æ¢æŠ€æœ¯ï¼Œæœ€æ—©ç”¨åœ¨åˆ†æ—¶ç³»ç»Ÿ UNIX ä¸­ã€‚åœ¨ä»»ä½•æ—¶åˆ»ï¼Œåœ¨è¯¥ç³»ç»Ÿçš„ä¸»å­˜ä¸­åªä¿å­˜ä¸€ä¸ªå®Œæ•´çš„ç”¨æˆ·ä½œä¸šï¼Œå½“å…¶è¿è¡Œä¸€æ®µæ—¶é—´åï¼Œæˆ–ç”±äºåˆ†é…ç»™å®ƒçš„æ—¶é—´ç‰‡å·²ç”¨å®Œï¼Œæˆ–ç”±äºéœ€è¦å…¶å®ƒèµ„æºè€Œç­‰å¾…ï¼Œç³»ç»Ÿå°±æŠŠå®ƒäº¤æ¢åˆ°è¾…å­˜ï¼ŒåŒæ—¶æŠŠå¦ä¸€ä¸ªä½œä¸šè°ƒå…¥ä¸»å­˜è®©å…¶è¿è¡Œã€‚è¿™æ ·ï¼Œå¯ä»¥åœ¨å­˜å‚¨å®¹é‡ä¸å¤§çš„å°å‹æœºä¸Šå®ç°åˆ†æ—¶ç³»ç»Ÿã€‚ åŸç†åˆ†ç±» æ•´ä½“å¯¹æ¢ï¼ˆè¿›ç¨‹å¯¹æ¢ï¼‰å¯¹æ¢ä»¥æ•´ä¸ªè¿›ç¨‹ä¸ºå•ä½ï¼Œç”¨äºåˆ†æ—¶ç³»ç»Ÿï¼Œä»¥è§£å†³å†…å­˜ç´§å¼ çš„é—®é¢˜ï¼› é¡µé¢å¯¹æ¢/åˆ†æ®µå¯¹æ¢å¯¹æ¢ä»¥â€œé¡µâ€æˆ–â€œæ®µâ€ä¸ºå•ä½è¿›è¡Œâ€œéƒ¨åˆ†å¯¹æ¢â€ï¼Œè¯¥æ–¹æ³•æ˜¯å®ç°è¯·æ±‚åˆ†é¡µåŠè¯·æ±‚åˆ†æ®µå­˜å‚¨å™¨çš„åŸºç¡€ï¼Œæ”¯æŒè™šå­˜ç³»ç»Ÿã€‚ åŠŸèƒ½ ä¸ºå®ç°å¯¹æ¢ï¼Œç³»ç»Ÿéœ€è¦ä¸‰æ–¹é¢çš„åŠŸèƒ½ï¼š å¯¹æ¢ç©ºé—´çš„ç®¡ç† è¿›ç¨‹çš„æ¢å…¥ è¿›ç¨‹çš„æ¢å‡º å¯¹æ¢ç©ºé—´çš„ç®¡ç†å¤–å­˜è¢«åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œæ–‡ä»¶åŒºå’Œå¯¹æ¢åŒºæ–‡ä»¶åŒºç”¨äºå­˜æ”¾æ–‡ä»¶ï¼Œå¯¹å®ƒçš„ç®¡ç†åº”é‡åœ¨å¦‚ä½•æé«˜å­˜å‚¨ç©ºé—´çš„åˆ©ç”¨ç‡ã€‚æ‰€ä»¥å¯¹å®ƒé‡‡å–ç¦»æ•£åˆ†é…æ–¹å¼ã€‚å³ä¸€ä¸ªæ–‡ä»¶å¯æ ¹æ®å½“å‰å¤–å­˜çš„ä½¿ç”¨æƒ…å†µï¼Œè¢«åˆ†æˆå¤šå—ï¼Œåˆ†åˆ«å­˜å‚¨åˆ°ä¸é‚»æ¥çš„å¤šä¸ªå­˜å‚¨åŒºåŸŸä¸­ï¼Œç”¨æŒ‡é’ˆç›¸è¿ã€‚å¯¹æ¢åŒºå­˜æ”¾ä»å†…å­˜æ¢å‡ºçš„è¿›ç¨‹ï¼Œå®ƒä»¬åœ¨å¤–å­˜çš„å­˜æ”¾æ—¶é—´è¾ƒçŸ­ï¼Œæ¢å…¥ã€æ¢å‡ºé¢‘ç¹ã€‚å¯¹å¯¹æ¢åŒºçš„ç®¡ç†åº”é‡åœ¨æé«˜è¿›ç¨‹çš„æ¢å…¥æ¢å‡ºé€Ÿåº¦ã€‚å› æ­¤é‡‡ç”¨è¿ç»­åˆ†é…æ–¹å¼ã€‚å³æŠŠä¸€ä¸ªæ¢å‡ºçš„è¿›ç¨‹å­˜æ”¾åˆ°ä¸€ä¸ªè¿ç»­çš„å­˜å‚¨ç©ºé—´ä¸­ã€‚ ä¸ºäº†èƒ½å¯¹å¯¹æ¢åŒºä¸­çš„ç©ºé—²ç›˜å—è¿›è¡Œç®¡ç†ï¼Œåœ¨ç³»ç»Ÿä¸­åº”é…ç½®ç›¸åº”çš„æ•°æ®ç»“æ„ï¼Œä»¥è®°å½•å¤–å­˜çš„ä½¿ç”¨æƒ…å†µã€‚ç©ºé—²åˆ†åŒºè¡¨æˆ–ç©ºé—²åˆ†åŒºé“¾ã€‚åœ¨ç©ºé—²åˆ†åŒºè¡¨ä¸­çš„æ¯ä¸ªè¡¨ç›®åº”åŒ…å«ä¸¤é¡¹ï¼Œå³å¯¹æ¢åˆ†åŒºé¦–å€å’Œå¯¹æ¢åŒºé•¿åº¦ï¼Œå®ƒä»¬çš„åŸºæœ¬å•ä½éƒ½æ˜¯ç›˜å—ã€‚å¯¹æ¢åŒºçš„åˆ†é…ï¼Œæ˜¯é‡‡ç”¨è¿ç»­åˆ†é…æ–¹å¼ã€‚å› è€Œå¯¹å¯¹æ¢åŒºç©ºé—´çš„åˆ†é…ä¸å›æ”¶ï¼Œä¸åŠ¨æ€åˆ†åŒºæ–¹å¼æ—¶å†…å­˜çš„åˆ†é…ä¸å›æ”¶æ–¹æ³•é›·åŒã€‚åˆ†é…ç®—æ³•å¯ä»¥æ˜¯é¦–æ¬¡é€‚åº”ç®—æ³•ã€å¾ªç¯é¦–æ¬¡é€‚åº”ç®—æ³•å’Œæœ€ä½³é€‚åº”ç®—æ³•ã€‚å›æ”¶æ“ä½œä¹Ÿå¯åˆ†ä¸ºå››ç§æƒ…å†µ ä¸ºäº†èƒ½å¯¹äº¤æ¢åŒºä¸­çš„ç©ºé—²ç›˜å—è¿›è¡Œç®¡ç†ï¼Œåœ¨ç³»ç»Ÿä¸­åº”é…ç½®ç›¸åº”çš„æ•°æ®ç»“æ„,ç›˜å—çš„å¤§å°å’Œæ“ä½œç³»ç»Ÿçš„å…·ä½“æ–‡ä»¶ç³»ç»Ÿæœ‰å…³ç³»;æ¯”å¦‚fat32çš„ç›˜å—å¤§å°ä¸º4KB,å†…å­˜åˆ†é…çš„å•ä½æ˜¯å­—èŠ‚ï¼Œå¤–å­˜ï¼ˆç¡¬ç›˜ï¼‰åˆ†é…çš„å•ä½æ˜¯ç›˜å— è¿›ç¨‹çš„æ¢è¿›ä¸æ¢å‡ºæ¢å‡ºï¼ˆswap outï¼‰é¦–å…ˆé€‰æ‹©é˜»å¡æˆ–ç¡çœ çŠ¶æ€çš„è¿›ç¨‹ï¼Œè‹¥æœ‰å¤šä¸ªï¼ŒæŒ‰ä¼˜å…ˆçº§ç”±ä½åˆ°é«˜è¿›è¡Œé€‰æ‹©ã€‚è‹¥æ²¡æœ‰æ­¤çŠ¶æ€è¿›ç¨‹ï¼Œåˆ™é€‰æ‹©å°±ç»ªçŠ¶æ€çš„ï¼Œä»ç„¶æŒ‰ä¼˜å…ˆçº§ç”±ä½åˆ°é«˜è¿›è¡Œé€‰æ‹©ã€‚ä¸ºé¿å…æŸè¿›ç¨‹è¢«é¢‘ç¹çš„æ¢å…¥æ¢å‡ºï¼Œè¿˜åº”è€ƒè™‘è¿›ç¨‹åœ¨å†…å­˜ä¸­çš„é©»ç•™æ—¶é—´ï¼Œä¼˜å…ˆé€‰æ‹©é©»ç•™æ—¶é—´é•¿çš„è¿›ç¨‹ã€‚æ¢å…¥ï¼ˆswap inï¼‰â‘ ä» PCBé›†åˆä¸­æŸ¥æ‰¾â€œå°±ç»ªä¸”æ¢å‡ºâ€çš„è¿›ç¨‹ï¼Œæœ‰å¤šä¸ªï¼Œåˆ™é€‰æ‹©æ¢å‡ºæ—¶é—´æœ€é•¿çš„ã€‚â‘¡æ ¹æ®è¿›ç¨‹å¤§å°ç”³è¯·å†…å­˜ï¼ŒæˆåŠŸåˆ™è¯»å…¥ï¼Œå¦åˆ™è¦å…ˆæ‰§è¡Œæ¢å‡ºï¼Œå†æ¢å…¥ã€‚â‘¢è‹¥è¿˜æœ‰å¯æ¢å…¥è¿›ç¨‹ï¼Œåˆ™è½¬å‘â‘ ã€‚ç›´è‡³æ— â€œå°±ç»ªä¸”æ¢å‡ºâ€è¿›ç¨‹æˆ–æ— æ³•è·å¾—è¶³å¤Ÿå†…å­˜ç©ºé—´ä¸ºæ­¢ã€‚ Comparison S.NO Paging Segmentation 1 In paging, the program is divided into fixed or mounted size pages. In segmentation, the program is divided into variable size sections. 2 For the paging operating system is accountable. For segmentation compiler is accountable. 3 Page size is determined by hardware. Here, the section size is given by the user. 4 It is faster in comparison to segmentation. Segmentation is slow. 5 Paging could result in internal fragmentation. Segmentation could result in external fragmentation. 6 In paging, the logical address is split into a page number and page offset. Here, the logical address is split into section number and section offset. 7 Paging comprises a page table that encloses the base address of every page. While segmentation also comprises the segment table which encloses segment number and segment offset. 8 The page table is employed to keep up the page data. Section Table maintains the section data. 9 In paging, the operating system must maintain a free frame list. In segmentation, the operating system maintains a list of holes in the main memory. 10 Paging is invisible to the user. Segmentation is visible to the user. 11 In paging, the processor needs the page number, and offset to calculate the absolute address. In segmentation, the processor uses segment number, and offset to calculate the full address. 12 It is hard to allow sharing of procedures between processes. Facilitates sharing of procedures between the processes. 13 In paging, a programmer cannot efficiently handle data structure. It can efficiently handle data structures. 14 This protection is hard to apply. Easy to apply for protection in segmentation. 15 The size of the page needs always be equal to the size of frames. There is no constraint on the size of segments. 16 A page is referred to as a physical unit of information. A segment is referred to as a logical unit of information. 17 Paging results in a less efficient system. Segmentation results in a more efficient system. Refdata-flair memory-management-in-computerInverted page tablesInverted Page Table in Operating Systemæ“ä½œç³»ç»ŸåŸºæœ¬åˆ†æ®µå­˜å‚¨ç®¡ç†æ–¹å¼","link":"/UESTC/OS/Ch4-2StorageManagement/"},{"title":"Storage Management Partâ…¢","text":"è™šæ‹Ÿå­˜å‚¨å™¨ Virtual Memoryè™šæ‹Ÿå­˜å‚¨å™¨çš„å¼•å…¥é—®é¢˜çš„æå‡ºä¸€ä¸ªç¨‹åºè¦æ±‚çš„å­˜å‚¨å®¹é‡è¶…è¿‡æ•´ä¸ªå†…å­˜ç©ºé—´æœ‰å¤§é‡çš„ä½œä¸šéœ€è¦è£…å…¥å†…å­˜è¿è¡Œè€Œå†…å­˜ç©ºé—´ä¸è¶³ è§£å†³æ–¹æ¡ˆä»ç‰©ç†ä¸Šå¢åŠ å†…å­˜å®¹é‡ã€‚ä½†è¿™ä¼šå¢åŠ ç³»ç»Ÿæˆæœ¬ï¼Œå¹¶ä¸”å¢åŠ æ˜¯æœ‰é™çš„ä»é€»è¾‘ä¸Šå¢åŠ å†…å­˜å®¹é‡ã€‚è¿™æ­£æ˜¯è™šæ‹Ÿå­˜å‚¨æŠ€æœ¯æ‰€è¦è§£å†³çš„ä¸»è¦é—®é¢˜ã€‚ å¸¸è§„å­˜å‚¨å™¨ç®¡ç†æ–¹å¼çš„ç‰¹å¾â€œä¸€æ¬¡æ€§â€: è¦æ±‚å°†ä¸€ä¸ªä½œä¸šå…¨éƒ¨è£…å…¥å†…å­˜æ‰èƒ½è¿è¡Œï¼Œ1ï¼‰å¤§ä½œä¸šæ— æ³•è¿è¡Œã€‚2ï¼‰é™åˆ¶ä½œä¸šå¹¶å‘æ‰§è¡Œçš„ç¨‹åº¦ã€‚â€œé©»ç•™æ€§â€: ä½œä¸šè£…å…¥åä¸€ç›´é©»ç•™å†…å­˜ç›´åˆ°ä½œä¸šå®Œæˆã€‚å†…å­˜ä¸­å­˜åœ¨ä¸€äº›å·²æ— ç”¨çš„ã€æˆ–æš‚æ—¶ä¸ç”¨çš„ç¨‹åºæˆ–æ•°æ®ï¼Œæµªè´¹å†…å­˜ç©ºé—´ã€‚ä¸€æ¬¡æ€§å’Œé©»ç•™æ€§ä¸¥é‡é™ä½å†…å­˜åˆ©ç”¨ç‡ï¼Œå‡å°‘ç³»ç»Ÿååé‡ã€‚å†…å­˜çš„æ‰©å……æ–¹æ³• ç‰©ç†æ‰©å……ï¼šå¢åŠ ç¡¬ä»¶æŠ•å…¥ï¼Œå—æœºå™¨è‡ªèº«å’Œæˆæœ¬çš„é™åˆ¶ã€‚ é€»è¾‘æ‰©å……ï¼š è¦†ç›–ï¼ˆoverlayï¼‰åº”ç”¨ç¨‹åºæ‰‹åŠ¨æŠŠéœ€è¦çš„æŒ‡ä»¤å’Œæ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼›è§£å†³äº†â€œä¸€æ¬¡æ€§â€é—®é¢˜ã€‚ å¯¹æ¢ï¼ˆswappingï¼‰æ“ä½œç³»ç»Ÿè‡ªåŠ¨æŠŠæš‚æ—¶ä¸èƒ½æ‰§è¡Œçš„ç¨‹åºä¿å­˜åˆ°å¤–å­˜ä¸­;è§£å†³äº†â€œé©»ç•™æ€§â€é—®é¢˜ã€‚ è™šæ‹Ÿå­˜å‚¨ åœ¨æœ‰é™å®¹é‡çš„å†…å­˜ä¸­ï¼Œè‡ªåŠ¨è£…å…¥æ›´å¤šæ›´å¤§çš„ç¨‹åº å±€éƒ¨æ€§åŸç† Principle of Localityç¨‹åºæ‰§è¡Œçš„å±€éƒ¨æ€§åŸç†ï¼šç¨‹åºçš„æ‰§è¡Œæ€»æ˜¯å‘ˆç°å±€éƒ¨æ€§ã€‚å³åœ¨ä¸€ä¸ªè¾ƒçŸ­çš„æ—¶é—´æ®µå†…ï¼Œç¨‹åºçš„æ‰§è¡Œä»…é™äºæŸä¸ªéƒ¨åˆ†ï¼›ç›¸åº”çš„ï¼Œå®ƒæ‰€è®¿é—®çš„å­˜å‚¨ç©ºé—´ä¹Ÿå±€é™äºæŸä¸ªåŒºåŸŸã€‚å› æ­¤ï¼Œåªè¦ä¿è¯è¿›ç¨‹æ‰§è¡Œæ‰€éœ€çš„éƒ¨åˆ†ç¨‹åºå’Œæ•°æ®é©»ç•™åœ¨å†…å­˜ï¼Œä¸€æ®µæ—¶é—´å†…è¿›ç¨‹éƒ½èƒ½é¡ºåˆ©æ‰§è¡Œã€‚ å±€é™æ€§åˆè¡¨ç°åœ¨ä¸‹è¿°ä¸¤ä¸ªæ–¹é¢ï¼š æ—¶é—´å±€é™æ€§å¦‚æœç¨‹åºä¸­çš„æŸæ¡æŒ‡ä»¤ä¸€æ—¦æ‰§è¡Œï¼Œåˆ™ä¸ä¹…ä»¥åè¯¥æŒ‡ä»¤å¯èƒ½å†æ¬¡æ‰§è¡Œï¼›å¦‚æœæŸæ•°æ®è¢«è®¿é—®è¿‡ï¼Œ åˆ™ä¸ä¹…ä»¥åè¯¥æ•°æ®å¯èƒ½å†æ¬¡è¢«è®¿é—®ã€‚äº§ç”Ÿæ—¶é—´å±€é™æ€§çš„å…¸å‹åŸå› ï¼Œæ˜¯ç”±äºåœ¨ç¨‹åºä¸­å­˜åœ¨ç€å¤§é‡çš„å¾ªç¯æ“ä½œã€‚ ç©ºé—´å±€é™æ€§ä¸€æ—¦ç¨‹åºè®¿é—®äº†æŸä¸ªå­˜å‚¨å•å…ƒï¼Œåœ¨ä¸ä¹…ä¹‹åï¼Œå…¶é™„è¿‘çš„å­˜å‚¨å•å…ƒä¹Ÿå°†è¢«è®¿é—®ã€‚ç¨‹åºåœ¨ä¸€æ®µæ—¶é—´å†…æ‰€è®¿é—®çš„åœ°å€ï¼Œå¯èƒ½é›†ä¸­åœ¨ä¸€å®šçš„èŒƒå›´ä¹‹å†…ï¼Œå…¶å…¸å‹æƒ…å†µä¾¿æ˜¯ç¨‹åºçš„é¡ºåºæ‰§è¡Œã€‚ ä¸åŒç¨‹åºç¼–å†™æ–¹æ³•çš„å±€éƒ¨æ€§ç‰¹å¾ é¡µé¢å¤§å°ä¸º 4Kï¼Œåˆ†é…ç»™æ¯ä¸ªè¿›ç¨‹çš„ç‰©ç†é¡µæ¡†æ•°ä¸º 1ã€‚åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œå®šä¹‰äº†å¦‚ä¸‹çš„äºŒç»´æ•°ç»„int A[1024][1024]ï¼Œè¯¥æ•°ç»„æŒ‰è¡Œå­˜æ”¾åœ¨å†…å­˜ï¼Œæ¯ä¸€è¡Œæ”¾åœ¨ä¸€ä¸ªé¡µé¢ä¸­ã€‚ 12345678// ç¨‹åºç¼–å†™æ–¹æ³•1ï¼šfor (j = 0; j &lt; 1024; j++)for (i = 0; i &lt; 1024; i++) A[i][j] = 0;// ç¨‹åºç¼–å†™æ–¹æ³•2ï¼šfor (i=0; i&lt;1024; i++)for (j=0; j&lt;1024; j++) A[i][j] = 0; 123456é¡µå· é¡µå†…æ•°æ®0000 a0,0 a0,1 a0,2 â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦ a0,10230001 a1,0 a1,1 a1,2 â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦ a1,1023 â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦ â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦1023 a1023,0 a1023,1 â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦....â€¦......... a1023,1023 ç¼–å†™æ–¹å¼ 1 å‘ç”Ÿäº†å¤§é‡çš„ç¼ºé¡µä¸­æ–­ï¼Œå› ä¸ºç¨‹åºæŒ‰è¡Œå­˜æ”¾ï¼Œæ¯æ¬¡è®¿é—®éƒ½ä¼šè·¨é¡µï¼Œå…±è®¡$1024 \\times 1024 = ^{24}$æ¬¡ç¼ºé¡µä¸­æ–­ã€‚ç¼–å†™æ–¹å¼ 2 å‘ç”Ÿäº†è¾ƒå°‘çš„ç¼ºé¡µä¸­æ–­ï¼Œå…±è®¡$2^{10}$æ¬¡ç¼ºé¡µä¸­æ–­ã€‚ ç¼ºé¡µä¸­æ–­ï¼ˆPage Faultï¼‰æ˜¯è®¡ç®—æœºæ“ä½œç³»ç»Ÿä¸­çš„ä¸€ç§ä¸­æ–­æˆ–å¼‚å¸¸ï¼Œå½“ç¨‹åºè®¿é—®ä¸€ä¸ªé¡µé¢æ—¶ï¼Œå¦‚æœè¿™ä¸ªé¡µé¢å·²ç»åœ¨ç‰©ç†å†…å­˜ä¸­ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥è¯»å–æˆ–è€…å†™å…¥ã€‚ä½†æ˜¯ï¼Œå¦‚æœè¿™ä¸ªé¡µé¢åœ¨è™šæ‹Ÿå†…å­˜ä¸­ï¼Œè€Œå¹¶æ²¡æœ‰åŠ è½½åˆ°ç‰©ç†å†…å­˜ä¸­ï¼Œé‚£ä¹ˆå°±ä¼šå‘ç”Ÿç¼ºé¡µä¸­æ–­ã€‚ è™šæ‹Ÿå­˜å‚¨å™¨æ¦‚è¿°å®šä¹‰è™šæ‹Ÿå­˜å‚¨å™¨ï¼ˆVirtual Memoryï¼‰æ˜¯æŒ‡å…·æœ‰è¯·æ±‚è°ƒå…¥åŠŸèƒ½å’Œç½®æ¢åŠŸèƒ½ï¼Œèƒ½ä»é€»è¾‘ä¸Šå¯¹å†…å­˜å®¹é‡åŠ ä»¥æ‰©å……çš„ä¸€ç§å­˜å‚¨å™¨ç³»ç»Ÿã€‚å…¶é€»è¾‘å®¹é‡ç”±å†…å­˜å®¹é‡å’Œå¤–å­˜å®¹é‡ä¹‹å’Œæ‰€å†³å®šå…¶è¿è¡Œé€Ÿåº¦æ¥è¿‘äºå†…å­˜é€Ÿåº¦ï¼Œè€Œæˆæœ¬å´åˆæ¥è¿‘äºå¤–å­˜ã€‚è™šæ‹Ÿå­˜å‚¨æŠ€æœ¯æ˜¯ä¸€ç§æ€§èƒ½éå¸¸ä¼˜è¶Šçš„å­˜å‚¨å™¨ç®¡ç†æŠ€æœ¯ï¼Œæ•…è¢«å¹¿æ³›åœ°åº”ç”¨äºå¤§ã€ä¸­ã€å°å‹æœºå™¨å’Œå¾®å‹æœºä¸­ã€‚ å½“è¿›ç¨‹è¿è¡Œæ—¶ï¼Œå…ˆå°†å½“å‰è¦è¿è¡Œçš„éƒ¨åˆ†ç¨‹åºè£…å…¥å†…å­˜ï¼Œå…¶ä»–éƒ¨åˆ†æš‚ç•™å¤–å­˜ï¼› å½“è¦æ‰§è¡Œçš„æŒ‡ä»¤ä¸åœ¨å†…å­˜æ—¶ï¼Œå¤„ç†å™¨å‘ç”Ÿä¸­æ–­ï¼Œé€šçŸ¥æ“ä½œç³»ç»Ÿå°†æ‰€ç¼ºéƒ¨åˆ†ä»å¤–å­˜è°ƒå…¥å†…å­˜ï¼Œä¿è¯ç¨‹åºç»§ç»­æ‰§è¡Œï¼› å½“å†…å­˜ä¸è¶³æ—¶ï¼Œå…è®¸ç¨‹åºéƒ¨åˆ†æ¢å…¥ã€æ¢å‡ºã€‚ è™šæ‹Ÿå­˜å‚¨å™¨çš„åŸºæœ¬å·¥ä½œæƒ…å†µ åŸºäºå±€éƒ¨æ€§åŸç†ã€‚ä¸€ä¸ªä½œä¸šè¿è¡Œå‰ï¼Œä»…å°†é‚£äº›å½“å‰è¦è¿è¡Œçš„é¡µé¢ï¼ˆæ®µï¼‰è£…å…¥å†…å­˜å¯åŠ¨è¿è¡Œï¼Œå…¶ä½™æš‚åœ¨å¤–å­˜ã€‚ è‹¥è¿è¡Œæ‰€éœ€é¡µé¢ï¼ˆæ®µï¼‰ä¸åœ¨å†…å­˜ï¼Œåˆ™åˆ©ç”¨è¯·æ±‚è°ƒé¡µï¼ˆæ®µï¼‰åŠŸèƒ½å°†å…¶è°ƒå…¥å†…å­˜ã€‚ è‹¥æ­¤æ—¶å†…å­˜æ»¡ï¼Œåˆ™åˆ©ç”¨ç½®æ¢åŠŸèƒ½ï¼Œå°†å†…å­˜ä¸­æš‚æ—¶ä¸ç”¨çš„éƒ¨åˆ†é¡µé¢ï¼ˆæ®µï¼‰è°ƒè‡³å¤–å­˜ï¼Œå†å°†æ‰€éœ€é¡µé¢ï¼ˆæ®µï¼‰è°ƒå…¥ã€‚ è¿™æ ·ï¼Œå¯å®ç°å¤§ç¨‹åºåœ¨å°å†…å­˜ä¸­è¿è¡Œï¼Œä¹Ÿå¯å®ç°å†…å­˜ä¸­åŒæ—¶è£…å…¥æ›´å¤šçš„è¿›ç¨‹å¹¶å‘æ‰§è¡Œã€‚ è™šå­˜å®¹é‡è™šæ‹Ÿå­˜å‚¨å™¨è™½ç„¶ç»™ç”¨æˆ·æä¾›äº†ç‰¹å¤§åœ°å€ç©ºé—´ï¼Œä½†å…¶å®¹é‡ä¸æ˜¯æ— é™å¤§ï¼Œä¸»è¦å—ä¸¤ä¸ªæ–¹é¢çš„é™åˆ¶ï¼š æŒ‡ä»¤ä¸­è¡¨ç¤ºåœ°å€çš„å­—é•¿ï¼šè¿™æ˜¯ç”± CPU çš„æ¶æ„å†³å®šçš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ CPU çš„æœ‰æ•ˆåœ°å€é•¿åº¦ä¸º 32 ä½ï¼Œé‚£ä¹ˆå®ƒèƒ½å¤Ÿè¡¨ç¤ºçš„åœ°å€ç©ºé—´æœ€å¤§ä¸º$2^{32}$ï¼Œä¹Ÿå°±æ˜¯ 4GBã€‚è¿™æ„å‘³ç€è™šæ‹Ÿå†…å­˜çš„æœ€å¤§å®¹é‡ä¸º 4GBã€‚è¿™ä¸ç‰©ç†å†…å­˜çš„å¤§å°æ— å…³ï¼Œå³ä½¿ç‰©ç†å†…å­˜å°äº 4GBï¼Œè™šæ‹Ÿå†…å­˜ä¾ç„¶å¯ä»¥è¾¾åˆ° 4GBã€‚ä½†æ˜¯ï¼Œå¦‚æœç‰©ç†å†…å­˜å¤§äº 4GBï¼Œé‚£ä¹ˆè¶…å‡º 4GB çš„éƒ¨åˆ†å°†æ— æ³•è¢« 32 ä½çš„ CPU ç¼–å€ã€‚ å¤–å­˜çš„å®¹é‡ï¼ˆå¯¹æ¢åŒºï¼‰ï¼šè™šæ‹Ÿå†…å­˜çš„å¦ä¸€ä¸ªéƒ¨åˆ†å­˜å‚¨åœ¨ç¡¬ç›˜çš„äº¤æ¢åŒºä¸­ã€‚å¦‚æœç¡¬ç›˜çš„ç©ºé—´æœ‰é™ï¼Œé‚£ä¹ˆè™šæ‹Ÿå†…å­˜çš„å®¹é‡ä¹Ÿä¼šå—åˆ°é™åˆ¶ã€‚å³ä½¿ CPU å¯ä»¥æ”¯æŒæ›´å¤§çš„è™šæ‹Ÿå†…å­˜ï¼Œå¦‚æœç¡¬ç›˜ç©ºé—´ä¸è¶³ï¼Œé‚£ä¹ˆè™šæ‹Ÿå†…å­˜çš„å®é™…å¯ç”¨ç©ºé—´ä¹Ÿä¼šå—åˆ°é™åˆ¶ã€‚ è™šæ‹Ÿå­˜å‚¨å™¨çš„ç‰¹å¾è™šæ‹Ÿå­˜å‚¨å™¨å…·æœ‰ä»¥ä¸‹ä¸»è¦ç‰¹å¾ï¼š å¤šæ¬¡æ€§ å¤šæ¬¡æ€§æ˜¯æŒ‡ä¸€ä¸ªä½œä¸šè¢«åˆ†æˆå¤šæ¬¡è°ƒå…¥å†…å­˜è¿è¡Œã€‚ å¯¹æ¢æ€§ å¯¹æ¢æ€§æ˜¯æŒ‡ä½œä¸šçš„è¿è¡Œè¿‡ç¨‹ä¸­è¿›è¡Œæ¢è¿›ã€æ¢å‡ºã€‚æ¢è¿›å’Œæ¢å‡ºèƒ½æœ‰æ•ˆåœ°æé«˜å†…å­˜åˆ©ç”¨ç‡ã€‚ è™šæ‹Ÿæ€§ è™šæ‹Ÿæ€§æ˜¯æŒ‡èƒ½å¤Ÿä»é€»è¾‘ä¸Šæ‰©å……å†…å­˜å®¹é‡ï¼Œä½¿ç”¨æˆ·æ‰€çœ‹åˆ°çš„å†…å­˜å®¹é‡è¿œå¤§äºå®é™…å†…å­˜å®¹é‡ã€‚ è™šæ‹Ÿæ€§æ˜¯ä»¥å¤šæ¬¡æ€§å’Œå¯¹æ¢æ€§ä¸ºåŸºç¡€çš„ï¼›è€Œå¤šæ¬¡æ€§å’Œå¯¹æ¢æ€§åˆå¿…é¡»å»ºç«‹åœ¨ç¦»æ•£åˆ†é…çš„åŸºç¡€ä¸Šã€‚ è™šæ‹Ÿå­˜å‚¨ç®¡ç†ä¸å¯¹æ¢æŠ€æœ¯çš„åŒºåˆ« æŠ€æœ¯ å¤„ç†å•ä½ ä¸»å­˜å®¹é‡å¤§äºç³»ç»Ÿç©ºé—²é‡æ—¶çš„å¤„ç†æ–¹å¼ è™šæ‹Ÿå­˜å‚¨ç®¡ç† é¡µæˆ–æ®µ è¿›ç¨‹ä»èƒ½è¿è¡Œ å¯¹æ¢æŠ€æœ¯ï¼ˆä¸­çº§è°ƒåº¦ï¼ŒæŒ‚èµ·å’Œæ¿€æ´»ï¼‰ è¿›ç¨‹ æ— æ³•è§£é™¤æŒ‚èµ· è™šæ‹Ÿå­˜å‚¨å™¨çš„å®ç°æ–¹æ³•è¯·æ±‚åˆ†é¡µç³»ç»Ÿå®ƒæ˜¯åœ¨çº¯åˆ†é¡µç³»ç»Ÿçš„åŸºç¡€ä¸Šå¢åŠ äº†è¯·æ±‚è°ƒé¡µã€é¡µé¢ç½®æ¢ä¸¤å¤§åŠŸèƒ½æ‰€å½¢æˆçš„é¡µå¼è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿã€‚ä¸ºäº†å®ç°è¯·æ±‚è°ƒé¡µã€é¡µé¢ç½®æ¢ä¸¤å¤§åŠŸèƒ½ï¼Œç³»ç»Ÿå¿…é¡»æä¾›å¦‚ä¸‹çš„ç¡¬ä»¶æ”¯æŒï¼š è¯·æ±‚åˆ†é¡µçš„é¡µè¡¨æœºåˆ¶ã€‚ ç¼ºé¡µä¸­æ–­æœºæ„ã€‚ åœ°å€å˜æ¢æœºæ„ã€‚ æ­¤å¤–ï¼Œå®ç°è¯·æ±‚è°ƒé¡µã€é¡µé¢ç½®æ¢ä¸¤å¤§åŠŸèƒ½è¿˜éœ€å¾—åˆ° OS çš„æ”¯æŒã€‚ è¯·æ±‚åˆ†æ®µç³»ç»Ÿå®ƒæ˜¯åœ¨çº¯åˆ†æ®µç³»ç»Ÿçš„åŸºç¡€ä¸Šå¢åŠ äº†è¯·æ±‚è°ƒæ®µã€åˆ†æ®µç½®æ¢ä¸¤å¤§åŠŸèƒ½æ‰€å½¢æˆçš„æ®µå¼è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿã€‚ä¸ºäº†å®ç°è¯·æ±‚è°ƒæ®µã€åˆ†æ®µç½®æ¢ä¸¤å¤§åŠŸèƒ½ï¼Œç³»ç»Ÿå¿…é¡»æä¾›å¦‚ä¸‹çš„ç¡¬ä»¶æ”¯æŒï¼š è¯·æ±‚åˆ†æ®µçš„æ®µè¡¨æœºåˆ¶ã€‚ ç¼ºæ®µä¸­æ–­æœºæ„ã€‚ åœ°å€å˜æ¢æœºæ„ã€‚ æ­¤å¤–ï¼Œå®ç°è¯·æ±‚è°ƒæ®µã€åˆ†æ®µç½®æ¢ä¸¤å¤§åŠŸèƒ½è¿˜éœ€å¾—åˆ° OS çš„æ”¯æŒã€‚ æ®µé¡µå¼è™šæ‹Ÿç³»ç»Ÿç›®å‰ï¼Œè®¸å¤šè™šæ‹Ÿå­˜å‚¨ç®¡ç†ç³»ç»Ÿæ˜¯å»ºç«‹åœ¨æ®µé¡µå¼ç³»ç»Ÿçš„åŸºç¡€ä¸Šçš„ï¼Œé€šè¿‡å¢åŠ äº†è¯·æ±‚è°ƒé¡µã€é¡µé¢ç½®æ¢ä¸¤å¤§åŠŸèƒ½æ‰€å½¢æˆçš„æ®µé¡µå¼è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿã€‚å¦‚ï¼šIntel 80386 å¤„ç†æœºä¾¿æ”¯æŒæ®µé¡µå¼è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿã€‚ æŠ–åŠ¨ Thrashingå½“è¿›ç¨‹è¦æ±‚è£…å…¥æ–°çš„é¡µé¢æˆ–ç¨‹åºæ®µæ—¶ï¼Œå¦‚æœå½“å‰æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—²ç©ºé—´ï¼Œéœ€è¦äº¤æ¢ä¸€äº›é¡µé¢æˆ–æ®µåˆ°å¤–å­˜ã€‚å¦‚æœè¢«äº¤æ¢å‡ºå»çš„é¡µé¢æˆ–æ®µå¾ˆå¿«å°†è¢«è¿›ç¨‹ä½¿ç”¨ï¼Œåˆ™åˆéœ€è¦å°†å…¶æ¢å…¥å†…å­˜ã€‚å¦‚æœç³»ç»ŸèŠ±è´¹å¤§é‡çš„æ—¶é—´æŠŠç¨‹åºå’Œæ•°æ®é¢‘ç¹åœ°æ¢å…¥å’Œæ¢å‡ºå†…å­˜è€Œä¸æ˜¯æ‰§è¡Œç”¨æˆ·æŒ‡ä»¤ï¼Œé‚£ä¹ˆï¼Œç§°ç³»ç»Ÿå‡ºç°äº†æŠ–åŠ¨ã€‚å‡ºç°æŠ–åŠ¨ç°è±¡æ—¶ï¼Œç³»ç»Ÿæ˜¾å¾—éå¸¸ç¹å¿™ï¼Œä½†æ˜¯ååé‡å¾ˆä½ï¼Œç”šè‡³äº§å‡ºä¸ºé›¶ã€‚æ ¹æœ¬åŸå› ï¼šé€‰æ‹©çš„é¡µé¢æˆ–æ®µä¸æ°å½“ã€‚ è¯·æ±‚åˆ†é¡µå­˜å‚¨ç®¡ç†æ–¹å¼ Demand PagingåŸç†åŠå®ç°å·¥ä½œåŸç†ä½œä¸šè¿è¡Œæ—¶ï¼Œåªå°†å½“å‰çš„ä¸€éƒ¨åˆ†è£…å…¥å†…å­˜å…¶ä½™çš„æ”¾åœ¨è¾…å­˜ï¼Œä¸€æ—¦å‘ç°è®¿é—®çš„é¡µä¸åœ¨ä¸»å­˜ä¸­ï¼Œåˆ™å‘å‡ºç¼ºé¡µä¸­æ–­ï¼Œç”± OS å°†å…¶ä»è¾…å­˜è°ƒå…¥ä¸»å­˜ï¼Œå¦‚æœå†…å­˜æ— ç©ºå—ï¼Œåˆ™æ ¹æ®æŸç§ç®—æ³•é€‰æ‹©ä¸€ä¸ªé¡µæ·˜æ±°ä»¥ä¾¿è£…å…¥æ–°çš„é¡µé¢ã€‚åˆ©ç”¨è¿™ç§æ–¹æ³•ï¼Œå¯ä½¿æ›´å¤šçš„ä½œä¸šå¤„äºå°±ç»ªçŠ¶æ€ï¼Œä¸”èƒ½æ”¯æŒæ¯”ä¸»å­˜å®¹é‡å¤§çš„ä½œä¸šåœ¨ç³»ç»Ÿä¸­è¿è¡Œã€‚ä»è€Œæé«˜å­˜å‚¨ç©ºé—´åˆ©ç”¨ç‡ã€‚ä¸ºäº†å®ç°è¯·æ±‚è°ƒé¡µã€é¡µé¢ç½®æ¢ä¸¤å¤§åŠŸèƒ½ï¼Œç³»ç»Ÿå¿…é¡»æä¾›å¦‚ä¸‹çš„ç¡¬ä»¶æ”¯æŒï¼š è¯·æ±‚åˆ†é¡µçš„é¡µè¡¨æœºåˆ¶ã€‚ ç¼ºé¡µä¸­æ–­æœºæ„ã€‚ åœ°å€å˜æ¢æœºæ„ã€‚ é¡µè¡¨æœºåˆ¶ Page Tableåœ¨è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿä¸­çš„æ‰€æœ‰çš„é¡µè¡¨ï¼Œå…¶é¡µæè¿°å­æœ‰äº†æ–°çš„æ‰©å……ï¼Œè¿™æ˜¯è¿›è¡Œåœ°å€å˜æ¢æœºæ„æ‰€å¿…é¡»çš„ï¼Œå¢åŠ å››ä¸ªä¿¡æ¯æ ‡è¯†ä½ã€‚ é¡µå· é¡µæ¡†å· Q çŠ¶æ€ä½ D è®¿é—®ä½ A ä¿®æ”¹ä½ M å¤–å­˜åœ°å€ çŠ¶æ€ä½/å­˜åœ¨ä½Dï¼šç”¨äºè¯´æ˜è¯¥é¡µæ˜¯å¦å·²è°ƒå…¥å†…å­˜ï¼Œä¾›ç¨‹åºè®¿é—®æ—¶å‚è€ƒï¼›D=0ï¼Œè¯¥é¡µä¸åœ¨å†…å­˜;D=1ï¼Œè¯¥é¡µåœ¨å†…å­˜ è®¿é—®ä½Aï¼šç”¨äºè®°å½•æœ¬é¡µåœ¨ä¸€æ®µæ—¶é—´å†…è¢«è®¿é—®çš„æ¬¡æ•°ï¼Œæˆ–æœ€è¿‘å·²æœ‰å¤šé•¿æ—¶é—´æœªè¢«è®¿é—®ï¼Œæä¾›ç»™ç½®æ¢ç®—æ³•é€‰æ‹©æ¢å‡ºé¡µé¢æ—¶å‚è€ƒã€‚A=0ï¼Œè¯¥é¡µæœªè¢«è®¿é—®;A=1ï¼Œè¯¥é¡µè¢«è®¿é—® ä¿®æ”¹ä½Mï¼šç”¨äºè¡¨ç¤ºè¯¥é¡µåœ¨è°ƒå…¥å†…å­˜åæ˜¯å¦è¢«ä¿®æ”¹è¿‡ï¼Œä¹Ÿæ˜¯æä¾›ç»™ç½®æ¢ç®—æ³•åœ¨æ¢å‡ºé¡µé¢æ—¶æ˜¯å¦å°†è¯¥é¡µé¢å†™å›å¤–å­˜ä½œå‚è€ƒã€‚M=0ï¼Œè¯¥é¡µåœ¨å†…å­˜ä¸­æœªè¢«ä¿®æ”¹;M=1ï¼Œè¯¥é¡µåœ¨å†…å­˜ä¸­å·²ç»è¢«ä¿®æ”¹ å¤–å­˜åœ°å€ï¼šç”¨äºæŒ‡å‡ºè¯¥é¡µåœ¨å¤–å­˜ä¸Šçš„åœ°å€ï¼Œä¾›è°ƒå…¥è¯¥é¡µæ—¶ä½¿ç”¨ã€‚ ç¼ºé¡µä¸­æ–­æœºæ„ Page Fault Interruptç”±ä¸Šè¿°é¡µè¡¨æœºåˆ¶çŸ¥é“ï¼ŒçŠ¶æ€ä½è®°å½•äº†è®¿é—®é¡µé¢æ˜¯å¦åœ¨å†…å­˜ã€‚åœ¨åœ°å€æ˜ å°„è¿‡ç¨‹ä¸­ï¼Œåœ¨é¡µè¡¨ä¸­å‘ç°æ‰€è¦è®¿é—®çš„é¡µä¸åœ¨å†…å­˜ï¼Œåˆ™äº§ç”Ÿç¼ºé¡µä¸­æ–­ï¼Œä¹Ÿç§°ä¸ºç¼ºé¡µæ•…éšœã€‚OS æ¥åˆ°æ­¤ä¸­æ–­ä¿¡å·åï¼Œå°±è°ƒå‡ºç¼ºé¡µä¸­æ–­å¤„ç†ç¨‹åºï¼Œæ ¹æ®é¡µè¡¨ä¸­ç»™å‡ºçš„å¤–å­˜åœ°å€ï¼Œå°†è¯¥é¡µè°ƒå…¥å†…å­˜ï¼Œä½¿ä½œä¸šç»§ç»­è¿è¡Œä¸‹å»ã€‚ç¼ºé¡µä¸­æ–­æ˜¯ä¸€ç§ç‰¹æ®Šçš„ä¸­æ–­ï¼Œä¸ä¸€èˆ¬ä¸­æ–­ç›¸æ¯”ï¼Œä¸»è¦è¡¨ç°ä¸ºï¼š åœ¨æŒ‡ä»¤æ‰§è¡ŒæœŸé—´äº§ç”Ÿå’Œå¤„ç†ä¸­æ–­ä¿¡å·ã€‚é€šå¸¸ï¼ŒCPU åªèƒ½åœ¨æŒ‡ä»¤ä¹‹é—´æ¥å—ä¸­æ–­ï¼›ç„¶è€Œï¼Œä¸€ä¸ªç¼ºé¡µä¸­æ–­è¦æ±‚åœ¨æŒ‡ä»¤æ‰§è¡Œä¸­é—´å¾—åˆ°æœåŠ¡ï¼Œå³å‘ç°æ‰€è¦è®¿é—®çš„æŒ‡ä»¤æˆ–æ•°æ®ä¸åœ¨å†…å­˜æ—¶äº§ç”Ÿç¼ºé¡µä¸­æ–­å¹¶å¤„ç†ã€‚ å†åˆ™ï¼Œä¸€æ¡æŒ‡ä»¤å¯èƒ½å¼•èµ·å¤šæ¬¡ä¸åŒçš„é¡µé¢æ•…éšœã€‚ä¾‹å¦‚COPY A,B,æŒ‡ä»¤æœ¬èº«è·¨äº†ä¸¤ä¸ªé¡µé¢,æ•°æ® A å’Œ B å„è‡ªè·¨äº†ä¸¤ä¸ªé¡µé¢,è¿™æ¡æŒ‡ä»¤çš„æ‰§è¡Œéœ€è¦è®¿é—®å…­ä¸ªä¸åŒçš„é¡µé¢ï¼Œå¯¹å®ƒä»¬çš„è®¿é—®éƒ½å¯èƒ½å¼•èµ·ç¼ºé¡µä¸­æ–­,æœ€å¤šå¯èƒ½å¼•èµ· 6 æ¬¡ç¼ºé¡µä¸­æ–­(æ¯ä¸ªé¡µé¢éƒ½ä¸åœ¨å†…å­˜ä¸­) ç”±äºç¼ºé¡µä¸­æ–­çš„ç‹¬ç‰¹æ€§ï¼Œç³»ç»Ÿä¸­éœ€è¦æä¾›ç¡¬ä»¶å¯„å­˜å™¨æˆ–å…¶å®ƒæœºæ„ï¼Œåœ¨å‡ºç°é¡µé¢æ•…éšœæ—¶ï¼Œä¿å­˜éƒ¨åˆ†å®Œæˆçš„æŒ‡ä»¤çš„çŠ¶æ€ã€‚æ­¤å¤–ï¼Œè¿˜éœ€è¦ä½¿ç”¨ä¸€æ¡ç‰¹æ®Šçš„è¿”å›æŒ‡ä»¤ï¼Œç¡®ä¿åœ¨å‡ºç°ç¼ºé¡µä¸­æ–­å¤„æ¢å¤è¯¥æŒ‡ä»¤çš„å¤„ç†ã€‚ ç¼ºé¡µä¸­æ–­å¤„ç†è¿‡ç¨‹ æ“ä½œç³»ç»Ÿæ¥æ”¶åˆ°è¿›ç¨‹äº§ç”Ÿçš„ç¼ºé¡µä¸­æ–­ä¿¡å·ï¼Œå¯åŠ¨ä¸­æ–­å¤„ç†ä¾‹ç¨‹ï¼Œä¿ç•™å¤„ç†æœºç°åœºï¼› æ“ä½œç³»ç»Ÿé€šçŸ¥å¤„ç†æœºä»å¤–å­˜è¯»å–æŒ‡å®šçš„é¡µé¢ï¼› å¤„ç†æœºæ¿€æ´» I/O è®¾å¤‡ï¼› æ£€æŸ¥å†…å­˜æœ‰æ— è¶³å¤Ÿçš„ç©ºé—²ç©ºé—´è£…å…¥è¯¥é¡µé¢ï¼Ÿè‹¥æœ‰ï¼Œè½¬ï¼ˆ6ï¼‰ï¼Œå¦åˆ™ï¼Œæ‰§è¡Œï¼ˆ5ï¼‰ï¼› åˆ©ç”¨é¡µé¢ç½®æ¢ç®—æ³•ï¼Œé€‰æ‹©å†…å­˜ä¸­çš„æŸä¸ªé¡µé¢ï¼Œæ¢å‡ºå†…å­˜ï¼› å°†æŒ‡å®šé¡µé¢ä»å¤–å­˜è£…å…¥å†…å­˜ï¼› æ›´æ–°è¯¥è¿›ç¨‹çš„é¡µè¡¨ï¼› æ›´æ–°å¿«è¡¨ï¼› è®¡ç®—ç‰©ç†åœ°å€ã€‚ åœ°å€å˜æ¢æœºæ„ Address Translation å†…å­˜åˆ†é…ç­–ç•¥å’Œåˆ†é…ç®—æ³•åœ¨ä¸ºè¿›ç¨‹åˆ†é…ç‰©ç†å—æ—¶ï¼Œåˆå°†æ¶‰åŠåˆ°è¿™æ ·ä¸‰ä¸ªé—®é¢˜ï¼š ç¡®å®šè¿›ç¨‹èƒ½æ­£å¸¸è¿è¡Œæ‰€éœ€çš„æœ€å°‘ç‰©ç†å—æ•°ï¼› ä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…çš„ç‰©ç†å—ï¼Œå…¶æ•°ç›®æ˜¯å›ºå®šçš„è¿˜æ˜¯å¯å˜çš„ï¼› å¯¹å„è¿›ç¨‹æ‰€åˆ†é…çš„ç‰©ç†å—æ•°ï¼Œæ˜¯é‡‡å–å¹³å‡åˆ†é…ç®—æ³•è¿˜æ˜¯æ ¹æ®è¿›ç¨‹çš„å¤§å°æŒ‰æ¯”ä¾‹äºˆä»¥åˆ†é…ç­‰ã€‚ æœ€å°ç‰©ç†å—æ•°çš„ç¡®å®šæ˜¾ç„¶ï¼Œç»™æ¯ä¸ªè¿›ç¨‹æ‰€åˆ†é…ç‰©ç†å—æ•°ç›®è¶Šå°‘ï¼Œåˆ™è¿›ç¨‹æ‰§è¡Œä¸­çš„ç¼ºé¡µç‡è¶Šé«˜ï¼Œè¿›ç¨‹çš„æ‰§è¡Œé€Ÿåº¦ä¹Ÿå‡æ…¢ã€‚ä¸ºä½¿è¿›ç¨‹èƒ½æœ‰æ•ˆåœ°å·¥ä½œï¼Œåº”ä¸ºå®ƒåˆ†é…ä¸€å®šæ•°ç›®çš„ç‰©ç†å—ã€‚æœ€å°ç‰©ç†å—æ•°ï¼šæ˜¯æŒ‡èƒ½ä¿è¯è¿›ç¨‹æ­£å¸¸è¿è¡Œæ‰€éœ€çš„æœ€å°‘ç‰©ç†å—æ•°ã€‚è‹¥ç³»ç»Ÿä¸ºæŸè¿›ç¨‹æ‰€åˆ†é…çš„ç‰©ç†å—æ•°å°‘äºæ­¤å€¼æ—¶ï¼Œè¿›ç¨‹å°†æ— æ³•è¿è¡Œã€‚è¿›ç¨‹åº”è·å¾—çš„æœ€å°‘ç‰©ç†å—æ•°ä¸è®¡ç®—æœºçš„ç¡¬ä»¶ç»“æ„æœ‰å…³ï¼Œå–å†³äºæŒ‡ä»¤çš„æ ¼å¼ã€åŠŸèƒ½å’Œå¯»å€æ–¹å¼ã€‚ ä¾‹ï¼šå¯¹äºæŸäº›ç®€å•çš„æœºå™¨ï¼Œè‹¥æ˜¯å•åœ°å€æŒ‡ä»¤ä¸”é‡‡ç”¨ç›´æ¥å¯»å€æ–¹å¼ï¼Œåˆ™æ‰€éœ€çš„æœ€å°‘ç‰©ç†å—æ•°ä¸º 2ã€‚å¦‚æœè¯¥æœºå™¨å…è®¸é—´æ¥å¯»å€æ—¶ï¼Œåˆ™è‡³å°‘è¦æ±‚æœ‰ç‰©ç†å—æ•°ä¸º 3ã€‚å¯¹äºå‰é¢æ‰€ä»‹ç»çš„åœ¨ç¼ºé¡µä¸­æ–­æœºæ„ä¸­è¦å‘ç”Ÿ 6 æ¬¡ä¸­æ–­çš„æƒ…å†µï¼Œè‡³å°‘è¦ä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é… 6 ä¸ªç‰©ç†å—ï¼Œä»¥è£…å…¥ 6 ä¸ªé¡µé¢ã€‚ ç‰©ç†å—çš„åˆ†é…ç­–ç•¥ å›ºå®šåˆ†é…å±€éƒ¨ç½®æ¢ Fixed Allocationï¼ŒLocal Replacement å¯å˜åˆ†é…å…¨å±€ç½®æ¢ Variable Allocationï¼ŒGlobal Replacement å¯å˜åˆ†é…å±€éƒ¨ç½®æ¢ Variable Allocationï¼Œ Local Replacement å›ºå®šåˆ†é…å±€éƒ¨ç½®æ¢ä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€å®šæ•°ç›®çš„ç‰©ç†å—ï¼Œåœ¨æ•´ä¸ªè¿è¡ŒæœŸé—´éƒ½ä¸å†æ”¹å˜ã€‚å®ç°è¿™ç§ç­–ç•¥çš„å›°éš¾åœ¨äºï¼šåº”ä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…å¤šå°‘ä¸ªç‰©ç†å—éš¾ä»¥ç¡®å®šã€‚è‹¥å¤ªå°‘ï¼Œä¼šé¢‘ç¹åœ°å‡ºç°ç¼ºé¡µä¸­æ–­ï¼Œé™ä½äº†ç³»ç»Ÿçš„ååé‡ï¼›è‹¥å¤ªå¤šï¼Œåˆå¿…ç„¶ä½¿å†…å­˜ä¸­é©»ç•™çš„è¿›ç¨‹æ•°ç›®å‡å°‘ï¼Œè¿›è€Œå¯èƒ½é€ æˆ CPU ç©ºé—²æˆ–å…¶å®ƒèµ„æºç©ºé—²çš„æƒ…å†µï¼Œè€Œä¸”åœ¨å®ç°è¿›ç¨‹å¯¹æ¢æ—¶ï¼Œä¼šèŠ±è´¹æ›´å¤šçš„æ—¶é—´ã€‚ å¯å˜åˆ†é…å…¨å±€ç½®æ¢ ï¼ˆå¸¸ç”¨æ–¹å¼ï¼‰åœ¨é‡‡ç”¨è¿™ç§ç­–ç•¥æ—¶ï¼Œå…ˆä¸ºç³»ç»Ÿä¸­çš„æ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€å®šæ•°ç›®çš„ç‰©ç†å—ï¼Œè€Œ OS è‡ªèº«ä¹Ÿä¿æŒä¸€ä¸ªç©ºé—²ç‰©ç†å—é˜Ÿåˆ—ã€‚å½“æŸè¿›ç¨‹å‘ç°ç¼ºé¡µæ—¶ï¼Œç”±ç³»ç»Ÿä»ç©ºé—²ç‰©ç†å—é˜Ÿåˆ—ä¸­ï¼Œå–å‡ºä¸€ä¸ªç‰©ç†å—åˆ†é…ç»™è¯¥è¿›ç¨‹ï¼Œå¹¶å°†æ¬²è°ƒå…¥çš„ï¼ˆç¼ºï¼‰é¡µè£…å…¥å…¶ä¸­ã€‚è¿™æ ·ï¼Œå‡¡äº§ç”Ÿç¼ºé¡µï¼ˆä¸­æ–­ï¼‰çš„è¿›ç¨‹ï¼Œéƒ½å°†è·å¾—æ–°çš„ç‰©ç†å—ï¼›ä»…å½“ç©ºé—²ç‰©ç†å—é˜Ÿåˆ—ä¸­çš„ç‰©ç†å—ç”¨å®Œæ—¶ï¼ŒOS æ‰èƒ½ä»å†…å­˜ä¸­é€‰æ‹©ä¸€é¡µè°ƒå‡ºï¼Œè¯¥é¡µå¯èƒ½æ˜¯ç³»ç»Ÿä¸­ä»»ä¸€è¿›ç¨‹çš„é¡µï¼Œè¿™æ ·ï¼Œè‡ªç„¶åˆä¼šä½¿é‚£ä¸ªè¿›ç¨‹çš„ç‰©ç†å—å‡å°‘ï¼Œè¿›è€Œä½¿å…¶ç¼ºé¡µç‡å¢åŠ ã€‚ å¯å˜åˆ†é…å±€éƒ¨ç½®æ¢ä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€å®šæ•°ç›®çš„ç‰©ç†å—ï¼Œä½†å½“æŸè¿›ç¨‹å‘ç°ç¼ºé¡µæ—¶ï¼Œåªå…è®¸ä»è¯¥è¿›ç¨‹åœ¨å†…å­˜çš„é¡µé¢ä¸­é€‰å‡ºä¸€é¡µæ¢å‡ºï¼Œè¿™æ ·å°±ä¸ä¼šå½±å“å…¶å®ƒè¿›ç¨‹çš„è¿è¡Œã€‚åœ¨è¿›ç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç»Ÿè®¡è¿›ç¨‹çš„ç¼ºé¡µç‡ï¼Œå¦‚æœç¼ºé¡µç‡é«˜ï¼Œåˆ™ä¸ºå…¶å¢åŠ ä¸€å®šçš„å†…å­˜é¡µï¼Œå¦åˆ™é€‚å½“å‡å°‘å…¶å†…å­˜çš„é¡µé¢æ•°ã€‚å½“éœ€è¦ç½®æ¢æ—¶åªä»æœ¬è¿›ç¨‹çš„å†…å­˜é¡µä¸­é€‰æ‹©ï¼Œä½†æ­¤æ–¹å¼å®ç°å¤æ‚ï¼Œå¯¹è¿›ç¨‹çš„ç¼ºé¡µæƒ…å†µçš„ç»Ÿè®¡éœ€è¦é¢å¤–çš„å¼€é”€ã€‚ ç‰©ç†å—çš„åˆ†é…ç®—æ³• åœ¨é‡‡ç”¨å›ºå®šåˆ†é…ç­–ç•¥æ—¶ï¼Œå¦‚ä½•å°†ç³»ç»Ÿä¸­å¯ä¾›åˆ†é…çš„æ‰€æœ‰ç‰©ç†å—åˆ†é…ç»™å„ä¸ªè¿›ç¨‹ï¼Œå¯é‡‡å–ä¸‹è¿°å‡ ç§æ–¹æ³•ã€‚ å¹³å‡åˆ†é…ç®—æ³•å°†ç³»ç»Ÿä¸­æ‰€æœ‰å¯ä¾›åˆ†é…çš„ç‰©ç†å—ï¼Œå¹³å‡åˆ†é…ç»™å„ä¸ªè¿›ç¨‹ã€‚ä¾‹ï¼šå½“ç³»ç»Ÿä¸­æœ‰ 100 ä¸ªç‰©ç†å—ï¼Œæœ‰ 5 ä¸ªè¿›ç¨‹åœ¨è¿è¡Œæ—¶ï¼Œæ¯ä¸ªè¿›ç¨‹å¯åˆ†å¾— 20 ä¸ªç‰©ç†å—ã€‚å¦‚æœ‰ä¸€ä¸ªè¿›ç¨‹å…¶å¤§å°ä¸º 200 é¡µï¼Œåªåˆ†é…ç»™å®ƒ 20 ä¸ªå—ï¼Œè¿™æ ·ï¼Œå®ƒå¿…ç„¶ä¼šæœ‰å¾ˆé«˜çš„ç¼ºé¡µç‡ï¼›è€Œå¦ä¸€ä¸ªè¿›ç¨‹åªæœ‰ 10 é¡µï¼Œå´æœ‰ 10 ä¸ªç‰©ç†å—é—²ç½®æœªç”¨ã€‚è¿™ç§æ–¹å¼è²Œä¼¼å…¬å¹³ï¼Œä½†å®é™…ä¸Šæ˜¯ä¸å…¬å¹³çš„ã€‚å› ä¸ºï¼Œå®ƒå¹¶æœªè€ƒè™‘åˆ°å„è¿›ç¨‹æœ¬èº«çš„å¤§å°ã€‚ æŒ‰æ¯”ä¾‹åˆ†é…ç®—æ³•æ ¹æ®è¿›ç¨‹çš„å¤§å°æŒ‰æ¯”ä¾‹åˆ†é…ç‰©ç†å—çš„ç®—æ³•ã€‚ä¾‹ï¼šç³»ç»Ÿä¸­å…±æœ‰ n ä¸ªè¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹çš„é¡µé¢æ•°ä¸º$S_i$ï¼Œåˆ™ç³»ç»Ÿä¸­å„è¿›ç¨‹é¡µé¢æ•°çš„æ€»å’Œä¸ºï¼š$S = \\sum_{i=1}^{n} S_i$åˆå‡å®šç³»ç»Ÿä¸­å¯ç”¨çš„ç‰©ç†å—æ€»æ•°ä¸º mï¼Œåˆ™æ¯ä¸ªè¿›ç¨‹æ‰€èƒ½åˆ†åˆ°çš„ç‰©ç†å—æ•°ä¸º$b_i$ï¼Œå°†æœ‰ï¼š$b_i = \\frac{S_i}{S} \\times m$b åº”è¯¥å‘ä¸Šå–æ•´ï¼Œå®ƒå¿…é¡»å¤§äºæœ€å°ç‰©ç†å—æ•°ã€‚ è€ƒè™‘ä¼˜å…ˆæƒçš„åˆ†é…ç®—æ³•é€šå¸¸é‡‡å–çš„æ–¹æ³•æ˜¯æŠŠå†…å­˜ä¸­å¯ä¾›åˆ†é…çš„æ‰€æœ‰ç‰©ç†å—åˆ†æˆä¸¤éƒ¨åˆ†ï¼šä¸€éƒ¨åˆ†æŒ‰æ¯”ä¾‹åœ°åˆ†é…ç»™å„è¿›ç¨‹ï¼›å¦ä¸€éƒ¨åˆ†åˆ™æ ¹æ®å„è¿›ç¨‹çš„ä¼˜å…ˆæƒï¼Œé€‚å½“åœ°å¢åŠ å…¶ç›¸åº”ä»½é¢åï¼Œåˆ†é…ç»™å„è¿›ç¨‹ã€‚åœ¨æœ‰çš„ç³»ç»Ÿä¸­ï¼Œå¦‚é‡è¦çš„å®æ—¶æ§åˆ¶ç³»ç»Ÿï¼Œåˆ™å¯èƒ½æ˜¯å®Œå…¨æŒ‰ä¼˜å…ˆæƒæ¥ä¸ºå„è¿›ç¨‹åˆ†é…ç‰©ç†å—ã€‚ è°ƒé¡µç­–ç•¥è§£å†³çš„é—®é¢˜ï¼š ç³»ç»Ÿåº”å½“åœ¨ä½•æ—¶æŠŠä¸€ä¸ªé¡µé¢è£…å…¥å†…å­˜ï¼Ÿ ä»ä½•å¤„è°ƒå…¥é¡µé¢ï¼Ÿ é¡µé¢è°ƒå…¥è¿‡ç¨‹ï¼Ÿ é¡µé¢ç½®æ¢ç®—æ³•ï¼Ÿ è£…å…¥æ—¶æœºç³»ç»Ÿåº”å½“åœ¨ä½•æ—¶æŠŠä¸€ä¸ªé¡µé¢è£…å…¥å†…å­˜ï¼Ÿ é¢„è°ƒé¡µ (Prepaging) è¯·æ±‚è°ƒé¡µ (Demand Paging) å¯é‡‡ç”¨ä¸€ç§ä»¥é¢„æµ‹ä¸ºåŸºç¡€çš„é¢„è°ƒé¡µç­–ç•¥ï¼Œå°†é‚£äº›é¢„è®¡åœ¨ä¸ä¹…ä¹‹åä¾¿ä¼šè¢«è®¿é—®çš„é¡µé¢ï¼Œé¢„å…ˆè°ƒå…¥å†…å­˜ã€‚å¤„ç†è¿‡ç¨‹ï¼š å½“è¿›ç¨‹åˆ›å»ºæ—¶ï¼Œé¢„å…ˆä¸ºè¿›ç¨‹è£…å…¥å¤šä¸ªé¡µé¢ã€‚ ç¼ºé¡µä¸­æ–­æ—¶ï¼Œç³»ç»Ÿä¸ºè¿›ç¨‹è£…å…¥æŒ‡å®šçš„é¡µé¢ä»¥åŠä¸ä¹‹ç›¸ä¸´çš„å¤šä¸ªé¡µé¢ã€‚ è‹¥å±€éƒ¨æ€§å¾ˆå·®ï¼Œé¢„å…ˆè£…å…¥çš„å¾ˆå¤šé¡µé¢ä¸ä¼šå¾ˆå¿«è¢«å¼•ç”¨ï¼Œå¹¶ä¼šå ç”¨å¤§é‡çš„å†…å­˜ç©ºé—´ï¼Œåè€Œé™ä½ç³»ç»Ÿçš„æ•ˆç‡ã€‚é¢„è°ƒé¡µçš„æˆåŠŸç‡ä»…çº¦ 50ï¼…ã€‚ è¯·æ±‚è°ƒé¡µï¼šä»…å½“è¿›ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œé€šè¿‡æ£€æŸ¥é¡µè¡¨å‘ç°ç›¸åº”é¡µé¢ä¸åœ¨å†…å­˜æ—¶ï¼Œæ‰è£…å…¥è¯¥é¡µé¢ã€‚å½“è¿›ç¨‹åˆšå¼€å§‹æ‰§è¡Œæ—¶ï¼Œç”±äºé¢„å…ˆæœªè£…å…¥è¿›ç¨‹çš„é¡µé¢ï¼Œæ•…éœ€è¦é¢‘ç¹åœ°ç”³è¯·è£…å…¥é¡µé¢ã€‚æ‰§è¡Œä¸€æ®µæ—¶é—´ä»¥åï¼Œè¿›ç¨‹çš„ç¼ºé¡µç‡å°†ä¸‹é™ã€‚é‡‡ç”¨è¯·æ±‚è°ƒé¡µæ–¹å¼ï¼Œç£ç›˜ I/O çš„å¯åŠ¨é¢‘ç‡è¾ƒé«˜ï¼Œç³»ç»Ÿçš„å¼€é”€è¾ƒå¤§ã€‚ ä»ä½•å¤„è°ƒå…¥é¡µé¢åœ¨è¯·æ±‚åˆ†é¡µç³»ç»Ÿä¸­çš„å¤–å­˜åˆ†ä¸ºä¸¤éƒ¨åˆ†:ç”¨äºå­˜æ”¾æ–‡ä»¶çš„æ–‡ä»¶åŒºå’Œç”¨äºå­˜æ”¾å¯¹æ¢é¡µé¢çš„å¯¹æ¢åŒºã€‚é€šå¸¸ï¼Œç”±äºå¯¹æ¢åŒºæ˜¯é‡‡ç”¨è¿ç»­åˆ†é…æ–¹å¼ï¼Œè€Œæ–‡ä»¶åŒºæ˜¯é‡‡ç”¨ç¦»æ•£åˆ†é…æ–¹å¼ï¼Œæ•…å¯¹æ¢åŒºçš„ç£ç›˜ I/O é€Ÿåº¦æ¯”æ–‡ä»¶åŒºçš„é«˜ã€‚è¿™æ ·ï¼Œæ¯å½“å‘ç”Ÿç¼ºé¡µè¯·æ±‚æ—¶ï¼Œç³»ç»Ÿåº”ä»ä½•å¤„å°†ç¼ºé¡µè°ƒå…¥å†…å­˜ï¼Œå¯åˆ†æˆå¦‚ä¸‹ä¸‰ç§æƒ…å†µã€‚ ç³»ç»Ÿæ‹¥æœ‰è¶³å¤Ÿçš„å¯¹æ¢åŒºç©ºé—´ï¼Œè¿™æ—¶å¯ä»¥å…¨éƒ¨ä»å¯¹æ¢åŒºè°ƒå…¥æ‰€éœ€é¡µé¢ï¼Œä»¥æé«˜è°ƒé¡µçš„é€Ÿåº¦ã€‚ ç³»ç»Ÿç¼ºå°‘è¶³å¤Ÿçš„å¯¹æ¢åŒºç©ºé—´ï¼Œè¿™æ—¶å‡¡æ˜¯ä¸ä¼šè¢«ä¿®æ”¹çš„æ–‡ä»¶ï¼Œéƒ½ç›´æ¥ä»æ–‡ä»¶åŒºè°ƒå…¥ï¼› è€Œå½“æ¢å‡ºè¿™äº›é¡µé¢æ—¶ï¼Œç”±äºå®ƒä»¬æœªè¢«ä¿®æ”¹è€Œä¸å¿…å†å°†å®ƒä»¬æ¢å‡ºåˆ°å¯¹æ¢åŒºï¼Œä»¥åå†è°ƒå…¥æ—¶ï¼Œä»ä»æ–‡ä»¶åŒºç›´æ¥è°ƒå…¥ã€‚ ä½†å¯¹äºé‚£äº›å¯èƒ½è¢«ä¿®æ”¹çš„éƒ¨åˆ†ï¼Œåœ¨å°†å®ƒä»¬æ¢å‡ºæ—¶ï¼Œä¾¿é¡»è°ƒåˆ°å¯¹æ¢åŒºï¼Œä»¥åéœ€è¦æ—¶ï¼Œå†ä»å¯¹æ¢åŒºè°ƒå…¥ã€‚ UNIX æ–¹å¼ã€‚ç”±äºä¸è¿›ç¨‹æœ‰å…³çš„æ–‡ä»¶éƒ½æ”¾åœ¨æ–‡ä»¶åŒºï¼Œåº”ä»æ–‡ä»¶åŒºè°ƒå…¥ã€‚æ•…å‡¡æ˜¯æœªè¿è¡Œè¿‡çš„é¡µé¢ï¼Œéƒ½åº”ä»æ–‡ä»¶åŒºè°ƒå…¥ã€‚è€Œå¯¹äºæ›¾ç»è¿è¡Œè¿‡ä½†åˆè¢«æ¢å‡ºçš„é¡µé¢ï¼Œç”±äºæ˜¯è¢«æ”¾åœ¨å¯¹æ¢åŒºï¼Œå› æ­¤åœ¨ä¸‹æ¬¡è°ƒå…¥æ—¶ï¼Œåº”ä»å¯¹æ¢åŒºè°ƒå…¥ã€‚ é¡µé¢è°ƒå…¥è¿‡ç¨‹ æ¯å½“ç¨‹åºæ‰€è¦è®¿é—®çš„é¡µé¢æœªåœ¨å†…å­˜æ—¶ï¼Œä¾¿å‘ CPU å‘å‡ºä¸€ç¼ºé¡µä¸­æ–­ã€‚ ä¸­æ–­å¤„ç†ç¨‹åºé¦–å…ˆä¿ç•™ CPU ç¯å¢ƒï¼Œåˆ†æä¸­æ–­åŸå› åï¼Œè½¬å…¥ç¼ºé¡µä¸­æ–­å¤„ç†ç¨‹åºã€‚ å¦‚æœå†…å­˜å·²æ»¡ï¼Œåˆ™é¡»å…ˆæŒ‰ç…§æŸç§ç½®æ¢ç®—æ³•ä»å†…å­˜ä¸­é€‰å‡ºä¸€é¡µå‡†å¤‡æ¢å‡ºï¼›å¦‚æœæ­¤é¡µå·²è¢«ä¿®æ”¹ï¼Œåˆ™å¿…é¡»å°†å®ƒå†™å›ç£ç›˜ã€‚ ç„¶åå†æŠŠæ‰€ç¼ºçš„é¡µè°ƒå…¥å†…å­˜ï¼Œå¹¶ä¿®æ”¹é¡µè¡¨ä¸­çš„ç›¸åº”è¡¨é¡¹ï¼Œç½®å…¶å­˜åœ¨ä½ä¸ºâ€œ1â€ï¼Œå¹¶å°†æ­¤é¡µè¡¨é¡¹å†™å…¥å¿«è¡¨ä¸­ã€‚ å½¢æˆæ‰€è¦è®¿é—®æ•°æ®çš„ç‰©ç†åœ°å€ï¼Œå†å»è®¿é—®å†…å­˜æ•°æ®ã€‚ æ•´ä¸ªé¡µé¢çš„è°ƒå…¥è¿‡ç¨‹å¯¹ç”¨æˆ·æ˜¯é€æ˜çš„ã€‚ é¡µé¢ç½®æ¢ç®—æ³•é¡µé¢ç½®æ¢ç®—æ³•çš„é€‰æ‹©ï¼Œæ˜¯è™šæ‹Ÿå­˜å‚¨å™¨ç®¡ç†ç³»ç»Ÿçš„æ ¸å¿ƒé—®é¢˜ã€‚å®ƒçš„å®è´¨æ˜¯ï¼Œä¸ºç³»ç»Ÿæä¾›ä¸€ç§æ–¹æ³•ï¼Œå½“ä»ä¸»å­˜ä¸­éœ€è¦æ¢å‡ºé¡µé¢æ—¶ï¼Œåº”é¿å…é€‰æ‹©é‚£äº›ä¸ä¹…å°†å†æ¬¡è¦æ±‚è®¿é—®çš„é¡µé¢ã€‚ç½®æ¢ç®—æ³•çš„é€‰æ‹©åœ¨ä¸€å®šç¨‹åº¦ä¸Šå–å†³äºå¯ç”¨çš„ç¡¬ä»¶è®¾æ–½ã€‚ æœ€ä¼˜ç½®æ¢ç®—æ³• Optimal Replacement Algorithmæœ€ç†æƒ³çš„é¡µé¢ç½®æ¢ç­–ç•¥æ˜¯ï¼šä»ä¸»å­˜ä¸­ç§»å‡ºæ°¸è¿œä¸å†éœ€è¦çš„é¡µé¢ï¼›å¦‚æ— è¿™æ ·çš„é¡µé¢å­˜åœ¨ï¼Œåˆ™åº”é€‰æ‹©æœ€é•¿æ—¶é—´ä¸éœ€è¦è®¿é—®çš„é¡µé¢ã€‚æœ€ä½³ç½®æ¢ç­–ç•¥é¦–å…ˆæ˜¯ç”± Belady äº 1966 å¹´æå‡ºçš„ã€‚æœ€ä½³ç½®æ¢ç­–ç•¥æœ¬èº«ä¸æ˜¯ä¸€ç§å®é™…çš„æ–¹æ³•ï¼Œå› ä¸ºé¡µé¢è®¿é—®çš„æœªæ¥é¡ºåºæ˜¯ä¸çŸ¥é“çš„ï¼Œä½†æ˜¯ï¼Œå¯å°†å…¶å®ƒçš„å®ç”¨æ–¹æ³•ä¸ä¹‹æ¯”è¾ƒæ¥è¯„ä»·è¿™äº›æ–¹æ³•çš„ä¼˜åŠ£ã€‚æ‰€ä»¥ï¼Œè¿™ç§æœ€ä½³ç­–ç•¥å…·æœ‰ç†è®ºä¸Šçš„æ„ä¹‰ã€‚ ä¾‹ è®¾é¡µé¢è¯·æ±‚æ¬¡åº 7,0,1,2,0,3,0,4,2,3,0,3,2,1,2,0,1,7,0,1å­˜å‚¨å—ä¸º 3(é©»ç•™é›†ä¸º 3)ï¼Œå‡å®šæœ€åˆå­˜å‚¨å—ä¸ºç©ºï¼Œé‡‡ç”¨ OPTã€‚ç¬¬ä¸€è¡Œä¸ºè¦è¯·æ±‚è®¿é—®çš„é¡µé¢ï¼Œç¬¬äºŒè¡Œä¸ºå­˜å‚¨å—(å†…å­˜)ä¸­å­˜å‚¨çš„é¡µï¼Œç¬¬ä¸‰è¡Œä¸ºè¢«ç§»å‡ºå†…å­˜çš„é¡µã€‚ä»ä¸Šé¢çš„æ¼”ç¤ºçŸ¥ï¼Œåˆ©ç”¨ OPTï¼Œå‘ç”Ÿäº† 6 æ¬¡é¡µé¢ç½®æ¢,å‘ç”Ÿäº† 9 æ¬¡ç¼ºé¡µä¸­æ–­(å‰ 3 æ¬¡æ²¡æœ‰ç½®æ¢,ä½†å†…å­˜ä¸­æœªè£…å…¥é¡µé¢,å‘ç”Ÿä¸­æ–­)ç¼ºé¡µç‡=ç¼ºé¡µæ¬¡æ•°/è®¿é—®æ¬¡æ•°=9/20=0.45 å…ˆè¿›å…ˆå‡ºé¡µé¢ç½®æ¢ç®—æ³• FIFOè¯¥ç®—æ³•çš„å®è´¨æ˜¯ï¼šæ€»æ˜¯é€‰æ‹©ä½œä¸šä¸­é©»ç•™æ—¶é—´æœ€é•¿çš„ä¸€é¡µæ·˜æ±°ã€‚å³å…ˆè¿›å…¥ä¸»å­˜çš„é¡µé¢å…ˆé€€å‡ºä¸»å­˜ã€‚ç®—æ³•å®ç°æ¯”è¾ƒå®¹æ˜“ï¼Œå¦‚åˆ†é…ç»™ä¸€ä¸ªä½œä¸šçš„å­˜å‚¨å—æ•°ä¸º mï¼Œåªéœ€å»ºç«‹ä¸€ä¸ª m ä¸ªå…ƒç´ çš„é˜Ÿåˆ—è¡¨ Q(0)ã€Q(1)ã€â€¦ã€Q(m-1)å’Œä¸€ä¸ªæ›¿æ¢æŒ‡é’ˆã€‚è¯¥é˜Ÿåˆ—æ˜¯æŒ‰é¡µé¢è°ƒå…¥ä¸»å­˜çš„å…ˆåé¡ºåºæ’åˆ—çš„ï¼Œè€ŒæŒ‡é’ˆå§‹ç»ˆæŒ‡å‘æœ€æ—©è°ƒå…¥ä¸»å­˜çš„ä¸€é¡µã€‚ å‘ç”Ÿäº†12æ¬¡é¡µé¢ç½®æ¢,å‘ç”Ÿäº†15æ¬¡ç¼ºé¡µä¸­æ–­ï¼Œç¼ºé¡µç‡=ç¼ºé¡µæ¬¡æ•°/è®¿é—®æ¬¡æ•°=15/20=0.75 äºŒæ¬¡æœºä¼šé¡µé¢ç½®æ¢ç®—æ³• SCRï¼ŒSecond Chance Replacement PolicyäºŒæ¬¡æœºä¼šç®—æ³•æ˜¯ FIFO ç®—æ³•çš„å‡çº§ç‰ˆï¼Œè€Œ clock ç®—æ³•å¯ä»¥è®¤ä¸ºæ˜¯äºŒæ¬¡æœºä¼šç®—æ³•çš„å‡çº§ç‰ˆæœ¬è¯¥ç®—æ³•ä»ç„¶ä½¿ç”¨æ ‡å‡†çš„ FIFO é˜Ÿåˆ—ã€‚ æ¯ä¸ªå¸§(frame)æœ‰ä¸€ä¸ª second chance ä½ï¼Œä¹Ÿå«åšå¼•ç”¨ä½ã€‚å½“ä¸€ä¸ª frame è¢«å¼•ç”¨åˆ°ï¼Œå®ƒçš„ second chance ä½è®¾ç½®ä¸º 1ã€‚è¿™è¡¨ç¤ºè¯¥ frame åé¢è¿˜æœ‰å¯èƒ½ä¼šè¢«å¼•ç”¨åˆ°ï¼Œæ‰€ä»¥ä¸‹æ¬¡ç½®æ¢å…ˆè·³è¿‡è¿™ä¸ª frameï¼Œä¹Ÿå°±æ˜¯å†ç»™å®ƒä¸€æ¬¡æœºä¼šç•™åœ¨å†…å­˜ä¸­ã€‚è¿™æ ·å¯ä»¥å‡å°‘ frame ç½®æ¢ï¼Œæé«˜é¡µé¢æ“ä½œæ•ˆç‡ã€‚å½“ä¸€ä¸ªæ–°çš„é¡µé¢è¢«è¯»åˆ°å†…å­˜ä¸­æ—¶ï¼Œå®ƒçš„ second chance è¢«è®¾ç½®ä¸º 0ã€‚å½“ä½ éœ€è¦æ›¿æ¢å†…å­˜ä¸­çš„ä¸€ä¸ªé¡µé¢æ—¶ï¼Œä½¿ç”¨è½®è¯¢çš„æ–¹å¼æ¥æŸ¥æ‰¾å¯ä»¥è¢«æ›¿æ¢çš„é¡µé¢ï¼š å¦‚æœé¡µé¢çš„ second chance æ˜¯ 1ï¼Œé‚£ä¹ˆç½®ä¸º 0ï¼Œç»§ç»­æŸ¥æ‰¾ï¼› å¦‚æœé¡µé¢çš„ second chance æ˜¯ 0ï¼Œé‚£ä¹ˆå°†è¿™ä¸ªé¡µé¢ç½®æ¢å‡ºå»ã€‚ æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç½®æ¢ç®—æ³• LRULRU(least Recently Used)ç®—æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œåˆ©ç”¨å±€éƒ¨æ€§åŸç†ï¼Œæ ¹æ®ä¸€ä¸ªä½œä¸šåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¿‡å»çš„é¡µé¢è®¿é—®è¸ªè¿¹æ¥æ¨æµ‹æœªæ¥çš„è¡Œä¸ºã€‚å®ƒè®¤ä¸ºè¿‡å»ä¸€æ®µæ—¶é—´é‡Œä¸æ›¾è¢«è®¿é—®è¿‡çš„é¡µé¢ï¼Œåœ¨æœ€è¿‘çš„å°†æ¥å¯èƒ½ä¹Ÿä¸ä¼šå†è¢«è®¿é—®ã€‚ç®—æ³•çš„å®è´¨æ˜¯ï¼šå½“éœ€è¦ç½®æ¢ä¸€é¡µé¢æ—¶ï¼Œé€‰æ‹©åœ¨æœ€è¿‘ä¸€æ®µæ—¶é—´å†…æœ€ä¹…æœªä½¿ç”¨çš„é¡µé¢äºˆä»¥æ·˜æ±°ã€‚å®ç°è¿™ç§æŠ€æœ¯ï¼Œæ˜¯é€šè¿‡å‘¨æœŸæ€§åœ°å¯¹â€œé¡µé¢è®¿é—®â€ä½è¿›è¡Œæ£€æŸ¥ï¼Œå¹¶åˆ©ç”¨å®ƒæ¥è®°å½•ä¸€ä¸ªé¡µé¢è‡ªä¸Šæ¬¡è®¿é—®ä»¥æ¥æ‰€ç»å†çš„æ—¶é—´ tï¼Œå¹¶é€‰æ‹© t ä¸ºæœ€å¤§çš„é¡µäºˆä»¥æ·˜æ±°ã€‚ å‘ç”Ÿäº†9æ¬¡é¡µé¢ç½®æ¢,å‘ç”Ÿäº†12æ¬¡ç¼ºé¡µä¸­æ–­ï¼Œç¼ºé¡µç‡=ç¼ºé¡µæ¬¡æ•°/è®¿é—®æ¬¡æ•°=12/20=0.60 LRU ç®—æ³•çš„ç¡¬ä»¶æ”¯æŒLRU ç®—æ³•ä½œä¸ºé¡µé¢ç½®æ¢ç®—æ³•æ˜¯æ¯”è¾ƒå¥½çš„ï¼Œå› ä¸ºå®ƒé€‚ç”¨äºå„ç§ç±»å‹çš„ç¨‹åºã€‚ä½†æ˜¯ï¼Œå®ç°èµ·æ¥æ¯”è¾ƒå›°éš¾ï¼Œå› ä¸ºè¦å¯¹å…ˆå‰çš„è®¿é—®å†å²æ—¶æ—¶åŠ ä»¥è®°å½•å’Œæ›´æ–°ã€‚å¦‚æœè¿™ç§è¿ç»­çš„ä¿®æ”¹å®Œå…¨ç”±è½¯ä»¶æ¥åšï¼Œç³»ç»Ÿå¼€é”€å¤ªå¤§ï¼›å¦‚ç”±ç¡¬ä»¶æ‰§è¡Œï¼Œåˆ™éœ€è¦è§£å†³ï¼š ä¸€ä¸ªè¿›ç¨‹åœ¨å†…å­˜ä¸­çš„å„ä¸ªé¡µé¢å„æœ‰å¤šä¹…æœªè¢«è¿›ç¨‹è®¿é—®ï¼Ÿ å¦‚ä½•å¿«é€Ÿåœ°çŸ¥é“å“ªä¸€é¡µæ˜¯æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„é¡µé¢ï¼Ÿ ä¸ºæ­¤ï¼Œéœ€è¦ä»¥ä¸‹ä¸¤ç±»ç¡¬ä»¶çš„æ”¯æŒï¼š å¯„å­˜å™¨ã€‚ç”¨äºè®°å½•æŸè¿›ç¨‹åœ¨å†…å­˜ä¸­å„é¡µä½¿ç”¨æƒ…å†µã€‚ æ ˆã€‚ç”¨äºä¿å­˜å½“å‰è¿›ç¨‹ä½¿ç”¨çš„å„ä¸ªé¡µé¢çš„é¡µé¢å·ã€‚ ç§»ä½å¯„å­˜å™¨ï¼šä¸ºäº†è®°å½•æŸè¿›ç¨‹åœ¨å†…å­˜ä¸­å„é¡µçš„ä½¿ç”¨æƒ…å†µï¼Œé¡»ä¸ºæ¯ä¸ªåœ¨å†…å­˜ä¸­çš„é¡µé¢é…ç½®ä¸€ä¸ªç§»ä½å¯„å­˜å™¨å¯è¡¨ç¤ºä¸ºï¼š$R = R_{n-1}R_{n-2}R_{n-3}â€¦R_2R_1R_0$ å½“è¿›ç¨‹è®¿é—®æŸç‰©ç†å—æ—¶ï¼Œè¦å°†ç›¸åº”å¯„å­˜å™¨çš„æœ€é«˜ä½$R_{n-1}$ä½ç½®æˆ 1ã€‚è¡¨ç¤ºè¿™ä¸ªé¡µé¢æœ€è¿‘è¢«è®¿é—®è¿‡ã€‚ç³»ç»Ÿæ¯éš”ä¸€å®šæ—¶é—´ï¼ˆä¾‹å¦‚ 100 msï¼‰å°†å¯„å­˜å™¨å³ç§»ä¸€ä½ï¼Œè¿™æ„å‘³ç€å¦‚æœä¸€ä¸ªé¡µé¢åœ¨ä¸€æ®µæ—¶é—´å†…æ²¡æœ‰è¢«è®¿é—®ï¼Œå®ƒçš„å¯„å­˜å™¨å€¼å°†é€æ¸å˜å°ã€‚å¦‚æœæˆ‘ä»¬æŠŠ n ä½å¯„å­˜å™¨çš„æ•°çœ‹ä½œæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œé‚£ä¹ˆï¼Œå…·æœ‰æœ€å°æ•°å€¼çš„å¯„å­˜å™¨æ‰€å¯¹åº”çš„é¡µé¢ï¼Œå°±æ˜¯æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„é¡µé¢ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸‰ä¸ªé¡µé¢ï¼Œå…¶å¯„å­˜å™¨å€¼åˆ†åˆ«ä¸º 100ï¼ˆ4ï¼‰ã€010ï¼ˆ2ï¼‰å’Œ 001ï¼ˆ1ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¬¬ä¸‰ä¸ªé¡µé¢çš„å¯„å­˜å™¨å€¼æœ€å°ï¼Œå› æ­¤å®ƒæ˜¯æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„é¡µé¢ï¼Œåº”è¯¥è¢«æ¢å‡ºã€‚æ ˆæ“ä½œç³»ç»Ÿç»´æŠ¤ä¸€ä¸ªæ ˆï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ ä»£è¡¨ä¸€ä¸ªé¡µé¢ã€‚æ ˆé¡¶çš„å…ƒç´ ä»£è¡¨æœ€è¿‘è¢«è®¿é—®çš„é¡µé¢ï¼Œè€Œæ ˆåº•çš„å…ƒç´ ä»£è¡¨æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„é¡µé¢ã€‚ æœ€å°‘ä½¿ç”¨ç½®æ¢ç®—æ³• LFUæœ€å°‘ä½¿ç”¨ç½®æ¢ç®—æ³•(Least Frequently Used)é€‰æ‹©åˆ°å½“å‰æ—¶é—´ä¸ºæ­¢è¢«è®¿é—®æ¬¡æ•°æœ€å°‘çš„é¡µé¢è¢«ç½®æ¢ã€‚1ã€åŸºæœ¬æ–¹æ³•ï¼šè®°å½•æ¯ä¸ªé¡µé¢çš„è®¿é—®æ¬¡æ•°ï¼Œæœ€å°‘è®¿é—®çš„é¡µé¢é¦–å…ˆè€ƒè™‘æ·˜æ±°2ã€å®é™…é‡‡å–æ–¹æ³•ä¸ºé¡µé¢è®¾ç½®ç§»ä½å¯„å­˜å™¨ã€‚ç»Ÿè®¡ 1 çš„ä¸ªæ•°,1 çš„ä¸ªæ•°è¶Šå°‘ï¼Œè¡¨ç¤ºè®¿é—®æ¬¡æ•°è¶Šå°‘ï¼Œè¶Šå®¹æ˜“è¢«æ·˜æ±°ã€‚ä¸ LRU çš„åŒºåˆ«ï¼šR1=10000000R2=01110100LRUâ€”â€”â€”-æ·˜æ±° R2LFUâ€”â€”â€”-æ·˜æ±° R1 Clock ç½®æ¢ç®—æ³•ç®€å•çš„ Clock ç½®æ¢ç®—æ³•ï¼ˆNRUï¼‰å½“é‡‡ç”¨ç®€å• clock ç®—æ³•æ—¶ï¼Œä¸ºæ¯é¡µè®¾ç½®ä¸€ä½è®¿é—®ä½ï¼Œå†å°†å†…å­˜ä¸­çš„æ‰€æœ‰é¡µé¢éƒ½é€šè¿‡é“¾æ¥æŒ‡é’ˆé“¾æ¥æˆä¸€ä¸ªå¾ªç¯é˜Ÿåˆ—ã€‚ æŸé¡µè¢«è®¿é—®æ—¶ï¼Œå…¶è®¿é—®ä½è¢«ç½® 1ã€‚ ç½®æ¢ç¨‹åºä»ä¸Šæ¬¡åœæ­¢ä½ç½®å¼€å§‹æ£€æŸ¥é¡µé¢çš„è®¿é—®ä½ã€‚ å¦‚æœæ˜¯ 0ï¼Œå°±é€‰æ‹©è¯¥é¡µæ¢å‡ºï¼› è‹¥ä¸º 1ï¼Œåˆ™é‡æ–°å°†å®ƒç½® 0ï¼Œæš‚ä¸æ¢å‡ºï¼Œè€Œç»™è¯¥é¡µç¬¬äºŒæ¬¡é©»ç•™å†…å­˜çš„æœºä¼šã€‚ ç”±äºè¯¥ç®—æ³•æ˜¯å¾ªç¯åœ°æ£€æŸ¥å„é¡µé¢çš„ä½¿ç”¨æƒ…å†µï¼Œæ•…ç§°ä¸º clock ç®—æ³•ã€‚ç½®æ¢æ—¶æ˜¯å°†æœªä½¿ç”¨è¿‡çš„é¡µé¢æ¢å‡ºå»ï¼Œæ•…åˆæŠŠè¯¥ç®—æ³•ç§°ä¸ºæœ€è¿‘æœªç”¨ç®—æ³• NRUã€‚ æ”¹è¿›å‹ Clock ç½®æ¢ç®—æ³•ç³»ç»ŸæŠŠä¸€ä¸ªé¡µé¢ç§»å‡ºå†…å­˜æ—¶ï¼Œå¦‚æœè¯¥é¡µé¢é©»ç•™å†…å­˜æœŸé—´æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ï¼Œé‚£ä¹ˆä¸å¿…æŠŠå®ƒå†™å›è¾…å­˜ï¼Œå¦åˆ™ç³»ç»Ÿå¿…é¡»æŠŠå®ƒå†™å›è¾…å­˜ã€‚è¿™è¡¨æ˜ï¼Œæ¢å‡ºæœªä¿®æ”¹è¿‡çš„é¡µé¢æ¯”æ¢å‡ºè¢«ä¿®æ”¹è¿‡çš„é¡µé¢å¼€é”€å°ã€‚æ˜¾ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¾æ®ä¸Šè¿°ç»“è®ºæ”¹è¿› CLOCK ç®—æ³•ã€‚æ”¹è¿›åçš„ CLOCK ç®—æ³•å°†åœ¨ç½®æ¢èŒƒå›´å†…é¦–é€‰ç¬¦åˆä¸‹é¢æ¡ä»¶çš„ä½œä¸ºè¢«ç½®æ¢é¡µé¢ åœ¨æœ€è¿‘æ²¡æœ‰è¢«ä½¿ç”¨è¿‡ï¼› åœ¨é©»ç•™å†…å­˜æœŸé—´æ²¡æœ‰è¢«ä¿®æ”¹è¿‡çš„é¡µé¢ ç”±è®¿é—®ä½ A(Access)å’Œä¿®æ”¹ä½ M(Modify)å¯ä»¥ç»„åˆæˆä¸‹é¢å››ç§ç±»å‹çš„é¡µé¢,æ·˜æ±°ä¼˜å…ˆçº§ä¾æ¬¡ä¸‹é™ï¼š1 ç±»ï¼ˆA=0ï¼ŒM=0ï¼‰ï¼šè¡¨ç¤ºè¯¥é¡µæœ€è¿‘æ—¢æœªå½¼è®¿é—®ï¼Œåˆæœªè¢«ä¿®æ”¹ï¼Œæ˜¯æœ€ä½³æ·˜æ±°é¡µã€‚2 ç±»ï¼ˆA=0ï¼ŒM=1ï¼‰ï¼šè¡¨ç¤ºè¯¥é¡µæœ€è¿‘æœªè¢«è®¿é—®ï¼Œä½†å·²è¢«ä¿®æ”¹ï¼Œå¹¶ä¸æ˜¯å¾ˆå¥½çš„æ·˜æ±°é¡µã€‚3 ç±»ï¼ˆA=1ï¼ŒM=0ï¼‰ï¼šæœ€è¿‘å·²è¢«è®¿é—®ï¼Œä½†æœªè¢«ä¿®æ”¹ï¼šè¯¥é¡µæœ‰å¯èƒ½å†è¢«è®¿é—®ã€‚4 ç±»ï¼ˆA=1ï¼ŒM=1ï¼‰ï¼šæœ€è¿‘å·²è¢«è®¿é—®ä¸”è¢«ä¿®æ”¹ï¼Œè¯¥é¡µå¯èƒ½å†è¢«è®¿é—®ã€‚ æ‰§è¡Œè¿‡ç¨‹å¯åˆ†æˆä»¥ä¸‹ä¸‰æ­¥ï¼šï¼ˆ1ï¼‰ä»æŒ‡é’ˆæ‰€æŒ‡ç¤ºçš„å½“å‰ä½ç½®å¼€å§‹ï¼Œæ‰«æå¾ªç¯é˜Ÿåˆ—ï¼Œå¯»æ‰¾ A=0 ä¸” M=0 çš„ç¬¬ä¸€ç±»é¡µé¢ï¼Œå°†æ‰€é‡åˆ°çš„ç¬¬ä¸€ä¸ªé¡µé¢ä½œä¸ºæ‰€é€‰ä¸­çš„æ·˜æ±°é¡µã€‚åœ¨ç¬¬ä¸€æ¬¡æ‰«ææœŸé—´ä¸æ”¹å˜è®¿é—®ä½ Aã€‚ï¼ˆ2ï¼‰å¦‚æœç¬¬ä¸€æ­¥å¤±è´¥ï¼Œå³æŸ¥æ‰¾ä¸€å‘¨åæœªé‡åˆ°ç¬¬ä¸€ç±»é¡µé¢ï¼Œåˆ™å¼€å§‹ç¬¬äºŒè½®æ‰«æï¼Œå¯»æ‰¾ A=0 ä¸” M ï¼ 1 çš„ç¬¬äºŒç±»é¡µé¢ï¼Œå°†æ‰€é‡åˆ°çš„ç¬¬ä¸€ä¸ªè¿™ç±»é¡µé¢ä½œä¸ºæ·˜æ±°é¡µã€‚åœ¨ç¬¬äºŒè½®æ‰«ææœŸé—´ï¼Œå°†æ‰€æœ‰æ‰«æè¿‡çš„é¡µé¢çš„è®¿é—®ä½ A éƒ½ç½® 0ã€‚ï¼ˆ3ï¼‰å¦‚æœç¬¬äºŒæ­¥ä¹Ÿå¤±è´¥ï¼Œäº¦å³æœªæ‰¾åˆ°ç¬¬äºŒç±»é¡µé¢ï¼Œåˆ™å°†æŒ‡é’ˆè¿”å›åˆ°å¼€å§‹çš„ä½ç½®ï¼Œå¹¶å°†æ‰€æœ‰çš„è®¿é—®ä½å¤ 0ã€‚ç„¶åé‡å¤ç¬¬ä¸€æ­¥ï¼Œå¦‚æœä»å¤±è´¥ï¼Œå¿…è¦æ—¶å†é‡å¤ç¬¬äºŒæ­¥ï¼Œæ­¤æ—¶å°±ä¸€å®šèƒ½æ‰¾åˆ°è¢«æ·˜æ±°çš„é¡µ . FAQQï¼šå­˜å‚¨å—è¶Šå¤šï¼Œç¼ºé¡µä¸­æ–­ç‡è¶Šå°å—ï¼ŸA:ä¸€èˆ¬æ¥è¯´ï¼Œå¯¹äºä»»ä½•ä¸€ä¸ªé¡µçš„è®¿é—®é¡ºåº(æˆ–åºåˆ—)å’Œä»»ä½•ä¸€ç§æ¢é¡µç®—æ³•ï¼Œå¦‚æœåˆ†ç»™çš„ç‰©ç†å—æ•°å¢åŠ ï¼Œåˆ™ç¼ºé¡µ(æ‰€è®¿é—®é¡µä¸åœ¨ä¸»å­˜)çš„é¢‘ç‡åº”è¯¥å‡å°‘ã€‚ä½†è¿™ä¸ªç»“è®ºå¹¶ä¸æ™®éæˆç«‹ï¼Œå¯¹äºæŸäº›é¡µé¢è®¿é—®åºåˆ—ï¼ŒFIFO æœ‰éšç€åˆ†ç»™çš„é¡µæ¶æ•°å¢åŠ ï¼Œç¼ºé¡µé¢‘ç‡ä¹Ÿå¢åŠ çš„å¼‚å¸¸ç°è±¡ã€‚ä¾‹å¦‚æŸç¨‹åºåœ¨å†…å­˜ä¸­åˆ†é… m é¡µåˆå§‹ä¸ºç©ºï¼Œé¡µé¢èµ°å‘ä¸º1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ1ï¼Œ2ï¼Œ5ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5å½“ m=3ï¼Œm=4 æ—¶ç¼ºé¡µä¸­æ–­åˆ†åˆ«ä¸ºå¤šå°‘ï¼Ÿç”¨ FIFO ç®—æ³•m=3 æ—¶ï¼Œç¼ºé¡µä¸­æ–­ 9 æ¬¡m=4 æ—¶ï¼Œç¼ºé¡µä¸­æ–­ 10 æ¬¡ æŠ–åŠ¨ä¸å·¥ä½œé›† Thrashing and Working Setç¼ºé¡µç‡å¯¹æœ‰æ•ˆè®¿é—®æ—¶é—´çš„å½±å“æœ‰æ•ˆè®¿é—®æ—¶é—´æ˜¯æŒ‡è®¿é—®å­˜å‚¨å™¨æ‰€éœ€æ—¶é—´çš„å¹³å‡å€¼ã€‚å‡è®¾ä½¿ç”¨äº†å¿«è¡¨ï¼Œåˆ™ CPU è®¿é—®å†…å­˜æ—¶æœ‰ä»¥ä¸‹ä¸‰ç§æƒ…å†µ(è®¾å†…å­˜è¯»å†™å‘¨æœŸä¸º tï¼ŒæŸ¥æ‰¾å¿«è¡¨æ—¶é—´ä¸º Î»ï¼Œç¼ºé¡µä¸­æ–­å¤„ç†æ—¶é—´ä¸º É›)ï¼š é¡µé¢åœ¨å†…å­˜ä¸”é¡µè¡¨é¡¹åœ¨å¿«è¡¨ä¸­ï¼šåªéœ€ä¸€æ¬¡è®¿é—®å†…å­˜EAT= Î» + t é¡µé¢åœ¨å†…å­˜ä½†é¡µè¡¨é¡¹ä¸åœ¨å¿«è¡¨ä¸­ï¼šéœ€ä¸¤æ¬¡è®¿é—®å†…å­˜ï¼Œä¸€æ¬¡è¯»å–é¡µè¡¨ï¼Œä¸€æ¬¡è¯»å–æ•°æ®ï¼Œå¦å¤–è¿˜éœ€æ›´æ–°å¿«è¡¨ã€‚EAT= Î» + t + t + Î»=2(Î» + t) é¡µé¢ä¸åœ¨å†…å­˜ï¼šè€ƒè™‘æŸ¥æ‰¾å¿«è¡¨æ—¶é—´ã€æŸ¥æ‰¾é¡µè¡¨æ—¶é—´ã€ç¼ºé¡µä¸­æ–­å¤„ç†æ—¶é—´ã€æ›´æ–°å¿«è¡¨æ—¶é—´ã€è®¿é—®å®é™…ç‰©ç†åœ°å€æ—¶é—´EAT= Î» + t +É› + Î» + t = 2(Î» + t) + É› å¼•å…¥å¿«è¡¨å‘½ä¸­ç‡ä¸º Î±ï¼Œç¼ºé¡µä¸­æ–­ç‡ä¸º fï¼Œåˆ™æœ‰æ•ˆè®¿é—®å†…å­˜æ—¶é—´ä¸ºï¼šEAT= Î±(Î» + t) + (1-Î±)[2(Î» + t) + f(2(Î» + t) + É›)] æŠ–åŠ¨ç³»ç»Ÿå†…è¿›ç¨‹å¢å¤šâ€“&gt;æ¯ä¸ªè¿›ç¨‹çš„ç¼ºé¡µç‡å¢å¤§â€“&gt;ç¼ºé¡µç‡å¢å¤§åˆ°ä¸€å®šç¨‹åº¦ï¼Œè¿›ç¨‹æ€»ç­‰å¾…è°ƒé¡µå®Œæˆâ€“&gt;CPU åˆ©ç”¨ç‡é™ä½â€“&gt;è¿›ç¨‹è¿›ä¸€æ­¥å¢å¤šï¼Œç¼ºé¡µç‡æ›´å¤§ â€¦æ­¤æ—¶: è¿›ç¨‹è°ƒå…¥ä¸€é¡µï¼Œéœ€å°†ä¸€é¡µæ·˜æ±°å‡ºå»ï¼Œåˆšæ·˜æ±°å‡ºå»çš„é¡µé©¬ä¸Šè¦éœ€è¦è°ƒå…¥;ç§°è¿™ä¸€ç°è±¡ä¸ºæŠ–åŠ¨æˆ–é¢ ç°¸(thrashing)æ˜¾ç„¶ï¼Œé˜²æ­¢çš„æ ¹æœ¬æ‰‹æ®µç»™è¿›ç¨‹åˆ†é…è¶³å¤Ÿå¤šçš„å¸§ æŠ–åŠ¨ï¼šå¦‚æœè¿è¡Œè¿›ç¨‹çš„å¤§éƒ¨åˆ†æ—¶é—´éƒ½ç”¨äºé¡µé¢çš„æ¢å…¥/æ¢å‡ºï¼Œè€Œå‡ ä¹ä¸èƒ½å®Œæˆä»»ä½•æœ‰æ•ˆçš„å·¥ä½œï¼Œåˆ™ç§°æ­¤è¿›ç¨‹å¤„äºæŠ–åŠ¨çŠ¶æ€ã€‚æŠ–åŠ¨åˆç§°ä¸ºé¢ ç°¸ã€‚ æŠ–åŠ¨åˆ†ä¸ºï¼š å±€éƒ¨æŠ–åŠ¨ å…¨å±€æŠ–åŠ¨ æŠ–åŠ¨äº§ç”Ÿçš„åŸå› æœ‰ï¼š è¿›ç¨‹åˆ†é…çš„ç‰©ç†å—å¤ªå°‘ ç½®æ¢ç®—æ³•é€‰æ‹©ä¸å½“ å…¨å±€ç½®æ¢ä½¿æŠ–åŠ¨ä¼ æ’­ å·¥ä½œé›†æ¨¡å‹åœ¨å·¥ä½œé›†æ¨¡å‹ä¸­ï¼Œå·¥ä½œé›†çš„å®šä¹‰æ˜¯åœ¨æœ€è¿‘çš„ä¸€æ®µè¿ç»­æ‰§è¡Œæ—¶é—´ï¼ˆç§°ä¸ºå·¥ä½œé›†çª—å£ï¼Œé€šå¸¸ç”¨ T è¡¨ç¤ºï¼‰å†…ï¼Œè¿›ç¨‹å®é™…å¼•ç”¨è¿‡çš„é¡µé¢é›†åˆã€‚æ¢å¥è¯è¯´ï¼Œå·¥ä½œé›†æ˜¯è¿›ç¨‹å½“å‰æ­£åœ¨ä½¿ç”¨æˆ–å¯èƒ½é©¬ä¸Šå°±è¦ä½¿ç”¨çš„é¡µé¢çš„é›†åˆã€‚ åªè¦åˆ†é…çš„å—ç©ºé—´èƒ½è¦†ç›–æ•´ä¸ªå±€éƒ¨å°±ä¸ä¼šå‡ºç°å¤ªå¤šçš„ç¼ºé¡µ;å·¥ä½œé›†æ¨¡å‹å°±ç”¨æ¥è®¡ç®—ä¸€ä¸ªå±€éƒ¨çš„å®½åº¦(å—æ•°) æŠ–åŠ¨çš„é¢„é˜² æŠ–åŠ¨å‘ç”Ÿå‰ä¼šå‡ºç°ä¸€äº›å¾å…†ï¼Œå¯åˆ©ç”¨è¿™äº›å¾å…†å‘ç°æŠ–åŠ¨å¹¶åŠ ä»¥é˜²èŒƒã€‚è¿™äº›æŠ€æœ¯æœ‰ï¼š é‡‡å–å±€éƒ¨ç½®æ¢ç­–ç•¥ å¼•å…¥å·¥ä½œé›†çš„ç®—æ³• L=S å‡†åˆ™ L ç¼ºé¡µä¹‹é—´çš„å¹³å‡æ—¶é—´ï¼ŒS å¹³å‡ç¼ºé¡µæœåŠ¡æ—¶é—´ é€‰æ‹©æš‚åœçš„è¿›ç¨‹ è¯·æ±‚åˆ†æ®µå­˜å‚¨ç®¡ç†æ–¹å¼ Demand Segmentationå·¥ä½œåŸç†ï¼šè¯·æ±‚åˆ†æ®µç³»ç»Ÿä¸­ï¼Œç¨‹åºè¿è¡Œä¹‹å‰ï¼Œåªéœ€å…ˆè°ƒå…¥è‹¥å¹²ä¸ªåˆ†æ®µï¼ˆä¸å¿…è°ƒå…¥æ‰€æœ‰çš„åˆ†æ®µï¼‰ï¼Œä¾¿å¯å¯åŠ¨è¿è¡Œã€‚å½“æ‰€è®¿é—®çš„æ®µä¸åœ¨å†…å­˜ä¸­æ—¶ï¼Œå¯è¯·æ±‚ OS å°†æ‰€ç¼ºçš„æ®µè°ƒå…¥å†…å­˜ã€‚ ä¸ºäº†å®ç°è¯·æ±‚è°ƒæ®µã€åˆ†æ®µç½®æ¢ä¸¤å¤§åŠŸèƒ½ï¼Œç³»ç»Ÿå¿…é¡»æä¾›å¦‚ä¸‹çš„ç¡¬ä»¶æ”¯æŒï¼š è¯·æ±‚åˆ†æ®µçš„æ®µè¡¨æœºåˆ¶ ç¼ºæ®µä¸­æ–­æœºæ„ åœ°å€å˜æ¢æœºæ„ åŸç†åŠå®ç°è¯·æ±‚åˆ†æ®µçš„æ®µè¡¨æœºåˆ¶åœ¨è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿä¸­çš„æ‰€æœ‰æ®µè¡¨ï¼Œå…¶æ®µæè¿°å­å¢åŠ äº”ä¸ªä¿¡æ¯æ ‡è¯†ä½ã€‚ æ®µå æ®µé•¿ æ®µçš„æœºåˆ¶ å­˜å–æ–¹å¼ çŠ¶æ€ä½ P è®¿é—®ä½ A ä¿®æ”¹ä½ M å¢è¡¥ä½å¤–å­˜åœ°å€ çŠ¶æ€ä½(å­˜åœ¨ä½)Pï¼šç”¨äºè¯´æ˜è¯¥æ®µæ˜¯å¦å·²è°ƒå…¥å†…å­˜ï¼Œä¾›ç¨‹åºè®¿é—®æ—¶å‚è€ƒï¼›P=0ï¼Œè¯¥æ®µä¸åœ¨å†…å­˜;P=1ï¼Œè¯¥æ®µåœ¨å†…å­˜ è®¿é—®ä½ Aï¼šç”¨äºè®°å½•æœ¬æ®µåœ¨ä¸€æ®µæ—¶é—´å†…è¢«è®¿é—®çš„æ¬¡æ•°ï¼Œæä¾›ç»™ç½®æ¢ç®—æ³•é€‰æ‹©æ¢å‡ºæ®µæ—¶å‚è€ƒã€‚A=0ï¼Œè¯¥æ®µæœªè¢«è®¿é—®;A=1ï¼Œè¯¥æ®µè¢«è®¿é—® ä¿®æ”¹ä½ Mï¼šç”¨äºè¡¨ç¤ºè¯¥æ®µåœ¨è°ƒå…¥å†…å­˜åæ˜¯å¦è¢«ä¿®æ”¹è¿‡ï¼Œä¹Ÿæ˜¯æä¾›ç»™ç½®æ¢ç®—æ³•åœ¨æ¢å‡ºæ®µæ—¶æ˜¯å¦å°†è¯¥æ®µå†™å›å¤–å­˜ä½œå‚è€ƒã€‚M=0ï¼Œè¯¥æ®µåœ¨å†…å­˜ä¸­æœªè¢«ä¿®æ”¹;M=1ï¼Œè¯¥æ®µåœ¨å†…å­˜ä¸­å·²ç»è¢«ä¿®æ”¹ å¤–å­˜åœ°å€ï¼šç”¨äºæŒ‡å‡ºè¯¥æ®µåœ¨å¤–å­˜ä¸Šçš„åœ°å€ï¼Œä¾›è°ƒå…¥è¯¥é¡µæ—¶ä½¿ç”¨ã€‚ å¢è¡¥ä½ï¼šè¯´æ˜è¯¥åˆ†æ®µæ˜¯å¦å…è®¸æ‰©å±•ï¼Œæ­¤å¤–å¦‚è¯¥æ®µå·²è¢«å¢è¡¥ï¼Œåˆ™åœ¨å†™å›è¾…å­˜æ—¶ï¼Œéœ€å¦é€‰æ‹©è¾…å­˜ç©ºé—´ï¼› ç¼ºæ®µä¸­æ–­æœºæ„ Demand Segment Faultç”±ä¸Šè¿°æ®µè¡¨æœºåˆ¶çŸ¥é“ï¼ŒçŠ¶æ€ä½è®°å½•äº†è®¿é—®æ®µæ˜¯å¦åœ¨å†…å­˜ã€‚åœ¨åœ°å€æ˜ å°„è¿‡ç¨‹ä¸­ï¼Œåœ¨æ®µè¡¨ä¸­å‘ç°æ‰€è¦è®¿é—®çš„æ®µä¸åœ¨å†…å­˜ï¼Œåˆ™äº§ç”Ÿç¼ºæ®µä¸­æ–­ã€‚OS æ¥åˆ°æ­¤ä¸­æ–­ä¿¡å·åï¼Œå°±è°ƒå‡ºç¼ºæ®µä¸­æ–­å¤„ç†ç¨‹åºï¼Œæ ¹æ®æ®µè¡¨ä¸­ç»™å‡ºçš„å¤–å­˜åœ°å€ï¼Œå°†è¯¥æ®µè°ƒå…¥å†…å­˜ï¼Œä½¿ä½œä¸šç»§ç»­è¿è¡Œä¸‹å»ã€‚ç¼ºæ®µä¸­æ–­ä¸ç¼ºé¡µä¸­æ–­ç±»ä¼¼ï¼Œä¸»è¦è¡¨ç°ä¸ºï¼šâ‘  ä¸€ä¸ªç¼ºæ®µä¸­æ–­è¦æ±‚åœ¨æŒ‡ä»¤æ‰§è¡Œä¸­é—´å¾—åˆ°æœåŠ¡ï¼Œå³å‘ç°æ‰€è¦è®¿é—®çš„æŒ‡ä»¤æˆ–æ•°æ®ä¸åœ¨å†…å­˜æ—¶äº§ç”Ÿç¼ºæ®µä¸­æ–­å¹¶å¤„ç†ã€‚â‘¡ ä¸€æ¡æŒ‡ä»¤å¯èƒ½å¼•èµ·å¤šæ¬¡ä¸åŒçš„ç¼ºæ®µä¸­æ–­ã€‚ åœ°å€å˜æ¢æœºæ„ Address Translation åˆ†æ®µçš„å…±äº«ä¸ä¿æŠ¤å…±äº«æ®µè¡¨ä¸ºäº†å®ç°åˆ†æ®µå…±äº«ï¼Œå¯åœ¨ç³»ç»Ÿä¸­é…ç½®ä¸€å¼ å…±äº«æ®µè¡¨ï¼Œæ‰€æœ‰å…±äº«æ®µéƒ½åœ¨å…±äº«æ®µè¡¨ä¸­å æœ‰ä¸€ä¸ªè¡¨é¡¹ã€‚ å…±äº«è¿›ç¨‹è®¡æ•°ï¼šè®°å½•æœ‰å¤šå°‘è¿›ç¨‹å…±äº«è¯¥æ®µã€‚ å­˜å–æ§åˆ¶å­—æ®µï¼šå¯¹åŒä¸€å…±äº«æ®µï¼Œä¸åŒè¿›ç¨‹æœ‰ä¸åŒçš„æ“ä½œæƒé™ã€‚ æ®µå·ï¼šå…±äº«æ®µåœ¨ä¸åŒè¿›ç¨‹ä¸­æœ‰ä¸åŒçš„æ®µå·ã€‚ å…±äº«æ®µçš„åˆ†é…ä¸å›æ”¶å…±äº«æ®µçš„åˆ†é… åœ¨ä¸ºå…±äº«æ®µåˆ†é…å†…å­˜æ—¶ï¼Œå¯¹ç¬¬ä¸€ä¸ªè¯·æ±‚ä½¿ç”¨è¯¥å…±äº«æ®µçš„è¿›ç¨‹ï¼Œç”±ç³»ç»Ÿä¸ºè¯¥å…±äº«æ®µåˆ†é…ä¸€ç‰©ç†åŒºï¼Œå†æŠŠå…±äº«æ®µè°ƒå…¥è¯¥åŒºï¼ŒåŒæ—¶å°†è¯¥åŒºçš„å§‹å€å¡«å…¥è¯·æ±‚è¿›ç¨‹çš„æ®µè¡¨çš„ç›¸åº”é¡¹ä¸­ï¼Œè¿˜é¡»åœ¨å…±äº«æ®µè¡¨ä¸­å¢åŠ ä¸€è¡¨é¡¹ï¼Œå¡«å†™æœ‰å…³æ•°æ®ï¼ŒæŠŠ count ç½®ä¸º 1ï¼› ä¹‹åï¼Œå½“åˆæœ‰å…¶å®ƒè¿›ç¨‹éœ€è¦è°ƒç”¨è¯¥å…±äº«æ®µæ—¶ï¼Œç”±äºè¯¥å…±äº«æ®µå·²è¢«è°ƒå…¥å†…å­˜ï¼Œæ•…æ­¤æ—¶æ— é¡»å†ä¸ºè¯¥æ®µåˆ†é…å†…å­˜ï¼Œè€Œåªéœ€åœ¨è°ƒç”¨è¿›ç¨‹çš„æ®µè¡¨ä¸­ï¼Œå¢åŠ ä¸€è¡¨é¡¹ï¼Œå¡«å†™è¯¥å…±äº«æ®µçš„ç‰©ç†åœ°å€ï¼›åœ¨å…±äº«æ®µè¡¨ä¸­ï¼Œå¡«ä¸Šè°ƒç”¨è¿›ç¨‹çš„è¿›ç¨‹åã€å­˜å–æ§åˆ¶ç­‰ï¼Œå†æ‰§è¡Œcount+=1æ“ä½œï¼Œä»¥è¡¨æ˜æœ‰ä¸¤ä¸ªè¿›ç¨‹å…±äº«è¯¥æ®µã€‚ å…±äº«æ®µçš„å›æ”¶å½“å…±äº«æ­¤æ®µçš„æŸè¿›ç¨‹ä¸å†éœ€è¦è¯¥æ®µæ—¶ï¼Œåº”å°†è¯¥æ®µé‡Šæ”¾ï¼Œ åŒ…æ‹¬æ’¤æ¶ˆè¯¥è¿›ç¨‹æ®µè¡¨ä¸­å…±äº«æ®µæ‰€å¯¹åº”çš„è¡¨é¡¹ï¼Œä»¥åŠæ‰§è¡Œ count-=1 æ“ä½œã€‚è‹¥ count ç»“æœä¸º 0ï¼Œåˆ™é¡»ç”±ç³»ç»Ÿå›æ”¶è¯¥å…±äº«æ®µçš„ç‰©ç†å†…å­˜ï¼Œä»¥åŠå–æ¶ˆåœ¨å…±äº«æ®µè¡¨ä¸­è¯¥æ®µæ‰€å¯¹åº”çš„è¡¨é¡¹ï¼Œè¡¨æ˜æ­¤æ—¶å·²æ²¡æœ‰è¿›ç¨‹ä½¿ç”¨è¯¥æ®µï¼›å¦åˆ™ï¼Œåˆ™åªæ˜¯å–æ¶ˆè°ƒç”¨è€…è¿›ç¨‹åœ¨å…±äº«æ®µè¡¨ä¸­çš„æœ‰å…³è®°å½•ã€‚ åˆ†æ®µçš„ä¿æŠ¤ è¶Šç•Œæ£€æŸ¥ Bounds Checkå¯„å­˜å™¨ä¸­æ”¾æœ‰æ®µè¡¨é•¿åº¦ä¿¡æ¯ï¼Œå°†é€»è¾‘åœ°å€ç©ºé—´çš„æ®µå·ä¸æ®µè¡¨é•¿åº¦è¿›è¡Œæ¯”è¾ƒ ï¼Œå¦‚æœæ®µå·ç­‰äºæˆ–å¤§äºæ®µè¡¨é•¿åº¦ï¼Œå°†å‘å‡ºåœ°å€è¶Šç•Œä¸­æ–­ä¿¡å·ã€‚ä¿è¯æ¯ä¸ªè¿›ç¨‹åªèƒ½åœ¨è‡ªå·±çš„åœ°å€ç©ºé—´å†…è¿è¡Œã€‚ å­˜å–æ§åˆ¶æ£€æŸ¥ Access Control CheckRead-Onlyã€Read-Writeã€Execute-Onlyã€Execute-Read-Write etc ç¯ä¿æŠ¤æœºæ„ Ring Protectionä½ç¼–å·çš„ç¯å…·æœ‰é«˜ä¼˜å…ˆæƒã€‚OS æ ¸å¿ƒå¤„äº 0 ç¯å†…ï¼›æŸäº›é‡è¦çš„å®ç”¨ç¨‹åºå’Œæ“ä½œç³»ç»ŸæœåŠ¡ï¼Œå å±…ä¸­é—´ç¯ï¼›è€Œä¸€èˆ¬çš„åº”ç”¨ç¨‹åºåœ¨å¤–ç¯ä¸Šã€‚ ç¯ä¿æŠ¤çš„åŸºæœ¬åŸåˆ™æ˜¯ï¼šä¸€ä¸ªç¨‹åºå¯ä»¥è®¿é—®é©»ç•™åœ¨ç›¸åŒç¯æˆ–è¾ƒä½ç‰¹æƒç¯ä¸­çš„æ•°æ®ï¼›ä¸€ä¸ªç¨‹åºå¯ä»¥è°ƒç”¨é©»ç•™åœ¨ç›¸åŒç¯æˆ–è¾ƒé«˜ç‰¹æƒç¯ä¸­çš„æœåŠ¡ã€‚ ç¯ä¿æŠ¤çš„åŸºæœ¬æ€æƒ³æ˜¯å°†æ“ä½œç³»ç»Ÿå†…çš„æ“ä½œå’Œèµ„æºåˆ’åˆ†ä¸ºä¸åŒçš„â€ç¯â€ï¼Œæ¯ä¸ªç¯éƒ½æœ‰å…¶ç‰¹å®šçš„æƒé™ã€‚é€šå¸¸ï¼Œç¯çš„ç¼–å·è¶Šå°ï¼Œæƒé™è¶Šé«˜ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªå…¸å‹çš„å››ç¯æ¨¡å‹ä¸­ï¼š ç¯ 0ï¼ˆRing 0ï¼‰ï¼šæ‹¥æœ‰å…¨éƒ¨æƒé™ï¼Œé€šå¸¸ç”¨äºè¿è¡Œæ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œå¯ä»¥è®¿é—®æ‰€æœ‰ç¡¬ä»¶å’Œå†…å­˜èµ„æºã€‚ ç¯ 1ï¼ˆRing 1ï¼‰å’Œç¯ 2ï¼ˆRing 2ï¼‰ï¼šé€šå¸¸ç”¨äºè¿è¡Œæ“ä½œç³»ç»ŸæœåŠ¡ï¼Œæœ‰ä¸€äº›ç‰¹å®šçš„ç¡¬ä»¶å’Œå†…å­˜è®¿é—®æƒé™ï¼Œä½†ä¸å¦‚ç¯ 0 å…¨é¢ã€‚ ç¯ 3ï¼ˆRing 3ï¼‰ï¼šæƒé™æœ€ä½ï¼Œé€šå¸¸ç”¨äºè¿è¡Œç”¨æˆ·çº§çš„åº”ç”¨ç¨‹åºï¼Œåªèƒ½è®¿é—®æœ‰é™çš„ç¡¬ä»¶å’Œå†…å­˜èµ„æºï¼Œå¯¹ç³»ç»Ÿèµ„æºçš„è®¿é—®éœ€è¦é€šè¿‡ç³»ç»Ÿè°ƒç”¨ã€‚ RefClockç½®æ¢ç®—æ³•","link":"/UESTC/OS/Ch4-3StorageManagement/"},{"title":"File System","text":"æ–‡ä»¶ç³»ç»Ÿæ¦‚è¿°æ–‡ä»¶ç³»ç»Ÿçš„åŠŸèƒ½ æœ‰æ•ˆåœ°ç®¡ç†æ–‡ä»¶çš„å­˜å‚¨ç©ºé—´ï¼› ç®¡ç†æ–‡ä»¶ç›®å½•ï¼› å®Œæˆæ–‡ä»¶çš„è¯»/å†™æ“ä½œï¼› å®ç°æ–‡ä»¶å…±äº«ä¸ä¿æŠ¤ï¼› ä¸ºç”¨æˆ·æä¾›äº¤äº’å¼å‘½ä»¤æ¥å£å’Œç¨‹åºè°ƒç”¨æ¥å£ã€‚ å®šä¹‰ï¼šæ“ä½œç³»ç»Ÿä¸­çš„å„ç±»æ–‡ä»¶ã€ç®¡ç†æ–‡ä»¶çš„è½¯ä»¶ï¼Œä»¥åŠç®¡ç†æ–‡ä»¶æ‰€æ¶‰åŠåˆ°çš„æ•°æ®ç»“æ„ç­‰ä¿¡æ¯çš„é›†åˆã€‚æœ‰å°‘æ•°å®æ—¶æ“ä½œç³»ç»Ÿæ²¡æœ‰æ–‡ä»¶ç³»ç»ŸåŠŸèƒ½,ç»å¤§å¤šæ•°æ“ä½œç³»ç»Ÿéƒ½åŒ…å«æ–‡ä»¶ç®¡ç†ç³»ç»Ÿéƒ¨åˆ†ã€‚ æ–‡ä»¶ã€è®°å½•å’Œæ•°æ®é¡¹ file record data itemæ–‡ä»¶æ–‡ä»¶æ˜¯æŒ‡ç”±åˆ›å»ºè€…æ‰€å®šä¹‰çš„ã€ å…·æœ‰æ–‡ä»¶åçš„ä¸€ç»„ç›¸å…³å…ƒç´ çš„é›†åˆã€‚ åœ¨æœ‰ç»“æ„çš„æ–‡ä»¶ä¸­ï¼Œæ–‡ä»¶ç”±è‹¥å¹²ä¸ªç›¸å…³è®°å½•ç»„æˆï¼› è€Œæ— ç»“æ„æ–‡ä»¶åˆ™è¢«çœ‹æˆæ˜¯ä¸€ä¸ªå­—ç¬¦æµã€‚ æ–‡ä»¶åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­æ˜¯ä¸€ä¸ªæœ€å¤§çš„æ•°æ®å•ä½ï¼Œå®ƒæè¿°äº†ä¸€ä¸ªå¯¹è±¡é›†ã€‚ æ–‡ä»¶çš„å±æ€§å¯ä»¥åŒ…æ‹¬ï¼š æ–‡ä»¶ç±»å‹ æ–‡ä»¶é•¿åº¦ æ–‡ä»¶çš„ç‰©ç†ä½ç½® æ–‡ä»¶çš„å»ºç«‹æ—¶é—´ è®°å½•è®°å½•æ˜¯ä¸€ç»„ç›¸å…³æ•°æ®é¡¹çš„é›†åˆï¼Œç”¨äºæè¿°ä¸€ä¸ªå¯¹è±¡åœ¨æŸæ–¹é¢çš„å±æ€§ã€‚ æ•°æ®é¡¹æ˜¯æœ€ä½çº§çš„æ•°æ®ç»„ç»‡å½¢å¼ï¼Œå¯æŠŠå®ƒåˆ†æˆä»¥ä¸‹ä¸¤ç§ç±»å‹ï¼š(1) åŸºæœ¬æ•°æ®é¡¹è¿™æ˜¯ç”¨äºæè¿°ä¸€ä¸ªå¯¹è±¡çš„æŸç§å±æ€§çš„å­—ç¬¦é›†ï¼Œæ˜¯æ•°æ®ç»„ç»‡ä¸­å¯ä»¥å‘½åçš„æœ€å°é€»è¾‘æ•°æ®å•ä½ï¼Œ å³åŸå­æ•°æ®ï¼Œåˆç§°ä¸ºæ•°æ®å…ƒç´ æˆ–å­—æ®µã€‚(2) ç»„åˆæ•°æ®é¡¹å®ƒæ˜¯ç”±è‹¥å¹²ä¸ªåŸºæœ¬æ•°æ®é¡¹ç»„æˆçš„ï¼Œç®€ç§°ç»„é¡¹ã€‚ æ–‡ä»¶ç±»å‹ file type æŒ‰ç”¨é€”åˆ†ç±» ç³»ç»Ÿæ–‡ä»¶ è¿™æ˜¯æŒ‡ç”±ç³»ç»Ÿè½¯ä»¶æ„æˆçš„æ–‡ä»¶ã€‚å¤§å¤šæ•°çš„ç³»ç»Ÿæ–‡ä»¶åªå…è®¸ç”¨æˆ·è°ƒç”¨ï¼Œä½†ä¸å…è®¸ç”¨æˆ·å»è¯»ï¼Œæ›´ä¸å…è®¸ä¿®æ”¹ï¼›æœ‰çš„ç³»ç»Ÿæ–‡ä»¶ä¸ç›´æ¥å¯¹ç”¨æˆ·å¼€æ”¾ã€‚ ç”¨æˆ·æ–‡ä»¶ ç”±ç”¨æˆ·çš„æºä»£ç ã€ç›®æ ‡æ–‡ä»¶ã€å¯æ‰§è¡Œæ–‡ä»¶æˆ–æ•°æ®ç­‰æ‰€æ„æˆçš„æ–‡ä»¶ã€‚ åº“æ–‡ä»¶ è¿™æ˜¯ç”±æ ‡å‡†å­ä¾‹ç¨‹åŠå¸¸ç”¨çš„ä¾‹ç¨‹ç­‰æ‰€æ„æˆçš„æ–‡ä»¶ã€‚è¿™ç±»æ–‡ä»¶å…è®¸ç”¨æˆ·è°ƒç”¨ï¼Œä½†ä¸å…è®¸ä¿®æ”¹ã€‚ æŒ‰æ–‡ä»¶ä¸­æ•°æ®çš„å½¢å¼åˆ†ç±» æºæ–‡ä»¶:æŒ‡ç”±æºç¨‹åºå’Œæ•°æ®æ„æˆçš„æ–‡ä»¶.c .cpp .java .py etc ç›®æ ‡æ–‡ä»¶:æŒ‡æŠŠæºç¨‹åºç»è¿‡ç›¸åº”è¯­è¨€çš„ç¼–è¯‘ç¨‹åºç¼–è¯‘è¿‡ï¼Œä½†å°šæœªç»è¿‡é“¾æ¥ç¨‹åºé“¾æ¥çš„ç›®æ ‡ä»£ç æ‰€æ„æˆçš„æ–‡ä»¶ã€‚å®ƒå±äºäºŒè¿›åˆ¶æ–‡ä»¶.obj, .o å¯æ‰§è¡Œæ–‡ä»¶:æŒ‡æŠŠç¼–è¯‘åæ‰€äº§ç”Ÿçš„ç›®æ ‡ä»£ç å†ç»è¿‡é“¾æ¥ç¨‹åºé“¾æ¥åæ‰€å½¢æˆçš„æ–‡ä»¶.exe,.dll; linux çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸€èˆ¬æ²¡æœ‰åç¼€,ä½†æ–‡ä»¶æƒé™é€šå¸¸è®¾ç½®ä¸ºå¯æ‰§è¡Œ æŒ‰å­˜å–æ§åˆ¶å±æ€§åˆ†ç±»æ ¹æ®ç³»ç»Ÿç®¡ç†å‘˜æˆ–ç”¨æˆ·æ‰€è§„å®šçš„å­˜å–æ§åˆ¶å±æ€§ åªæ‰§è¡Œæ–‡ä»¶ x:è¯¥ç±»æ–‡ä»¶åªå…è®¸è¢«æ ¸å‡†çš„ç”¨æˆ·è°ƒç”¨æ‰§è¡Œï¼Œæ—¢ä¸å…è®¸è¯»ï¼Œæ›´ä¸å…è®¸å†™ åªè¯»æ–‡ä»¶ r:è¯¥ç±»æ–‡ä»¶åªå…è®¸æ–‡ä»¶ä¸»åŠè¢«æ ¸å‡†çš„ç”¨æˆ·å»è¯»ï¼Œä½†ä¸å…è®¸å†™ è¯»å†™æ–‡ä»¶ rw:è¿™æ˜¯æŒ‡å…è®¸æ–‡ä»¶ä¸»å’Œè¢«æ ¸å‡†çš„ç”¨æˆ·å»è¯»æˆ–å†™çš„æ–‡ä»¶ æŒ‰ç»„ç»‡å½¢å¼å’Œå¤„ç†æ–¹å¼åˆ†ç±» æ™®é€šæ–‡ä»¶ï¼šç”± ASCII ç æˆ–äºŒè¿›åˆ¶ç ç»„æˆçš„å­—ç¬¦æ–‡ä»¶ã€‚ä¸€èˆ¬ç”¨æˆ·å»ºç«‹çš„æºç¨‹åºæ–‡ä»¶ã€æ•°æ®æ–‡ä»¶ã€ç›®æ ‡ä»£ç æ–‡ä»¶åŠæ“ä½œç³»ç»Ÿè‡ªèº«ä»£ç æ–‡ä»¶ã€åº“æ–‡ä»¶ã€å®ç”¨ç¨‹åºæ–‡ä»¶ç­‰éƒ½æ˜¯æ™®é€šæ–‡ä»¶ï¼Œå®ƒä»¬é€šå¸¸å­˜å‚¨åœ¨å¤–å­˜å‚¨è®¾å¤‡ä¸Šã€‚ ç›®å½•æ–‡ä»¶ï¼šç”±æ–‡ä»¶ç›®å½•ç»„æˆçš„ï¼Œç”¨æ¥ç®¡ç†å’Œå®ç°æ–‡ä»¶ç³»ç»ŸåŠŸèƒ½çš„ç³»ç»Ÿæ–‡ä»¶ï¼Œé€šè¿‡ç›®å½•æ–‡ä»¶å¯ä»¥å¯¹å…¶å®ƒæ–‡ä»¶çš„ä¿¡æ¯è¿›è¡Œæ£€ç´¢ã€‚ç”±äºç›®å½•æ–‡ä»¶ä¹Ÿæ˜¯ç”±å­—ç¬¦åºåˆ—æ„æˆï¼Œå› æ­¤å¯¹å…¶å¯è¿›è¡Œä¸æ™®é€šæ–‡ä»¶ä¸€æ ·çš„ç§ç§æ–‡ä»¶æ“ä½œã€‚ ç‰¹æ®Šæ–‡ä»¶ï¼šç‰¹æŒ‡ç³»ç»Ÿä¸­çš„å„ç±» I/O è®¾å¤‡ã€‚ä¸ºäº†ä¾¿äºç»Ÿä¸€ç®¡ç†ï¼Œlinux ç³»ç»Ÿå°†æ‰€æœ‰ IO è®¾å¤‡éƒ½è§†ä¸ºæ–‡ä»¶ï¼ŒæŒ‰æ–‡ä»¶æ–¹å¼æä¾›ç»™ç”¨æˆ·ä½¿ç”¨ æ–‡ä»¶ç³»ç»Ÿæ¨¡å‹ file system modelæ¨¡å‹çš„å±‚æ¬¡ç»“æ„ å¯¹è±¡åŠå…¶å±æ€§æ–‡ä»¶ç®¡ç†ç³»ç»Ÿç®¡ç†çš„å¯¹è±¡æœ‰ï¼š æ–‡ä»¶ã€‚å®ƒä½œä¸ºæ–‡ä»¶ç®¡ç†çš„ç›´æ¥å¯¹è±¡ã€‚ ç›®å½•ã€‚ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·å¯¹æ–‡ä»¶çš„å­˜å–å’Œæ£€ç´¢ï¼Œåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­å¿…é¡»é…ç½®ç›®å½•ã€‚å¯¹ç›®å½•çš„ç»„ç»‡å’Œç®¡ç†æ˜¯æ–¹ä¾¿ç”¨æˆ·å’Œæé«˜å¯¹æ–‡ä»¶å­˜å–é€Ÿåº¦çš„å…³é”®ã€‚ ç£ç›˜(ç£å¸¦)å­˜å‚¨ç©ºé—´ã€‚ æ–‡ä»¶å’Œç›®å½•å¿…å®šå ç”¨å­˜å‚¨ç©ºé—´ï¼Œå¯¹è¿™éƒ¨åˆ†ç©ºé—´çš„æœ‰æ•ˆç®¡ç†ï¼Œä¸ä»…èƒ½æé«˜å¤–å­˜çš„åˆ©ç”¨ç‡ï¼Œè€Œä¸”èƒ½æé«˜å¯¹æ–‡ä»¶çš„å­˜å–é€Ÿåº¦ã€‚ å¯¹å¯¹è±¡æ“çºµå’Œç®¡ç†çš„è½¯ä»¶é›†åˆè¿™æ˜¯æ–‡ä»¶ç®¡ç†ç³»ç»Ÿçš„æ ¸å¿ƒéƒ¨åˆ†ã€‚æ–‡ä»¶ç³»ç»Ÿçš„åŠŸèƒ½å¤§å¤šæ˜¯åœ¨è¿™ä¸€å±‚å®ç°çš„ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š å¯¹æ–‡ä»¶å­˜å‚¨ç©ºé—´çš„ç®¡ç† å¯¹æ–‡ä»¶ç›®å½•çš„ç®¡ç† ç”¨äºå°†æ–‡ä»¶çš„é€»è¾‘åœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€çš„æœºåˆ¶ å¯¹æ–‡ä»¶è¯»å’Œå†™çš„ç®¡ç† å¯¹æ–‡ä»¶çš„å…±äº«ä¸ä¿æŠ¤ç­‰åŠŸèƒ½ æ–‡ä»¶ç³»ç»Ÿçš„æ¥å£ä¸ºæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿï¼Œæ–‡ä»¶ç³»ç»Ÿé€šå¸¸å‘ç”¨æˆ·æä¾›ä¸¤ç§ç±»å‹çš„æ¥å£ï¼š å‘½ä»¤æ¥å£ã€‚è¿™æ˜¯æŒ‡ä½œä¸ºç”¨æˆ·ä¸æ–‡ä»¶ç³»ç»Ÿäº¤äº’çš„æ¥å£ã€‚ ç”¨æˆ·å¯é€šè¿‡é”®ç›˜ç»ˆç«¯é”®å…¥å‘½ä»¤ï¼Œå–å¾—æ–‡ä»¶ç³»ç»Ÿçš„æœåŠ¡ã€‚ ç¨‹åºæ¥å£ã€‚è¿™æ˜¯æŒ‡ä½œä¸ºç”¨æˆ·ç¨‹åºä¸æ–‡ä»¶ç³»ç»Ÿçš„æ¥å£ã€‚ ç”¨æˆ·ç¨‹åºå¯é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥å–å¾—æ–‡ä»¶ç³»ç»Ÿçš„æœåŠ¡ã€‚ æ–‡ä»¶æ“ä½œç¤ºä¾‹ç”¨æˆ·é€šè¿‡æ–‡ä»¶ç³»ç»Ÿæä¾›çš„ç³»ç»Ÿè°ƒç”¨å®æ–½å¯¹æ–‡ä»¶çš„æ“ä½œã€‚ æœ€åŸºæœ¬çš„æ–‡ä»¶æ“ä½œæœ‰ï¼šåˆ›å»ºæ–‡ä»¶ã€åˆ é™¤æ–‡ä»¶ã€‚è¯»æ–‡ä»¶ã€å†™æ–‡ä»¶ã€æˆªæ–­æ–‡ä»¶å’Œè®¾ç½®æ–‡ä»¶çš„è¯»ï¼å†™ä½ç½®ã€‚ æ–‡ä»¶çš„â€œæ‰“å¼€â€å’Œâ€œå…³é—­â€æ“ä½œï¼šæ‰€è°“â€œæ‰“å¼€â€ï¼Œæ˜¯æŒ‡ç³»ç»Ÿå°†æŒ‡åæ–‡ä»¶çš„å±æ€§ï¼ˆåŒ…æ‹¬è¯¥æ–‡ä»¶åœ¨å¤–å­˜ä¸Šçš„ç‰©ç†ä½ç½®ï¼‰ä»å¤–å­˜æ‹·è´åˆ°å†…å­˜æ‰“å¼€æ–‡ä»¶è¡¨çš„ä¸€ä¸ªè¡¨ç›®ä¸­ï¼Œå¹¶å°†è¯¥è¡¨ç›®çš„ç¼–å·ï¼ˆæˆ–ç§°ä¸ºç´¢å¼•ï¼‰è¿”å›ç»™ç”¨æˆ·ã€‚ åˆ©ç”¨â€œå…³é—­â€ï¼ˆcloseï¼‰ç³»ç»Ÿè°ƒç”¨æ¥å…³é—­æ­¤æ–‡ä»¶ï¼ŒOS å°†ä¼šæŠŠè¯¥æ–‡ä»¶ä»æ‰“å¼€æ–‡ä»¶è¡¨ä¸­çš„è¡¨ç›®ä¸Šåˆ é™¤æ‰ã€‚ å…¶å®ƒæ–‡ä»¶æ“ä½œï¼šå¯¹æ–‡ä»¶å±æ€§çš„æ“ä½œï¼Œæ”¹å˜æ–‡ä»¶åã€æ”¹å˜æ–‡ä»¶çš„æ‹¥æœ‰è€…ï¼ŒæŸ¥è¯¢æ–‡ä»¶çš„çŠ¶æ€ç­‰ï¼› openï¼šæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶æŒ‡å®šè®¿é—®è¯¥æ–‡ä»¶çš„æ–¹å¼ï¼Œè°ƒç”¨æˆåŠŸåè¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚ creatï¼šæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå®ƒï¼Œè°ƒç”¨æˆåŠŸåè¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚ closeï¼šå…³é—­æ–‡ä»¶ï¼Œè¿›ç¨‹å¯¹æ–‡ä»¶æ‰€åŠ çš„é”å…¨éƒ½è¢«é‡Šæ”¾ã€‚ readï¼šä»æ–‡ä»¶æè¿°ç¬¦å¯¹åº”çš„æ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œè°ƒç”¨æˆåŠŸåè¿”å›è¯»å‡ºçš„å­—èŠ‚æ•°ã€‚ writeï¼šå‘æ–‡ä»¶æè¿°ç¬¦å¯¹åº”çš„æ–‡ä»¶ä¸­å†™å…¥æ•°æ®ï¼Œè°ƒç”¨æˆåŠŸåè¿”å›å†™å…¥çš„å­—èŠ‚æ•°ã€‚ æ–‡ä»¶çš„ç‰©ç†ç»“æ„æ–‡ä»¶æ˜¯ç”±ä¸€ç³»åˆ—çš„è®°å½•ç»„æˆçš„ã€‚å¯¹äºä»»ä½•ä¸€ä¸ªæ–‡ä»¶ï¼Œéƒ½å­˜åœ¨ç€ä»¥ä¸‹ä¸¤ç§å½¢å¼çš„ç»“æ„ï¼š æ–‡ä»¶çš„é€»è¾‘ç»“æ„:ä»ç”¨æˆ·è§‚ç‚¹å‡ºå‘æ‰€è§‚å¯Ÿåˆ°çš„æ–‡ä»¶ç»„ç»‡å½¢å¼ æ–‡ä»¶çš„ç‰©ç†ç»“æ„:æŒ‡æ–‡ä»¶åœ¨å¤–å­˜ä¸Šçš„å­˜å‚¨ç»„ç»‡å½¢å¼ ä»é€»è¾‘ç»„ç»‡çš„è§’åº¦çœ‹ï¼Œæ–‡ä»¶ç”±è‹¥å¹²è®°å½•æ„æˆï¼›ä»ç‰©ç†ç»„ç»‡çš„è§’åº¦çœ‹ï¼Œæ–‡ä»¶ç”±è‹¥å¹²æ•°æ®å—ç»„æˆ.æ“ä½œç³»ç»Ÿæˆ–æ–‡ä»¶ç®¡ç†ç³»ç»Ÿè´Ÿè´£ä¸ºæ–‡ä»¶åˆ†é…å’Œç®¡ç†æ•°æ®å—ã€‚ å¦‚ä½•åˆ’åˆ†ç£ç›˜ç©ºé—´ï¼Ÿå¦‚ä½•ä¸ºä¸€ä¸ªæ–°å»ºæ–‡ä»¶åˆ†é…ç©ºé—´ï¼Ÿå¦‚ä½•ä¸ºä¸€ä¸ªå·²å­˜åœ¨çš„æ–‡ä»¶å¢åŠ å­˜å‚¨ç©ºé—´ï¼Ÿç”¨ä»€ä¹ˆæ•°æ®ç»“æ„è®°è½½æ–‡ä»¶å·²åˆ†é…åˆ°çš„æ•°æ®å—å’Œç©ºé—²æ•°æ®å—ï¼Ÿ æ–‡ä»¶çš„ç‰©ç†ç»„ç»‡â€”å­˜å‚¨ç©ºé—´çš„ç®¡ç†åœ¨ä¸ºæ–‡ä»¶åˆ†é…å¤–å­˜ç©ºé—´æ—¶æ‰€è¦è€ƒè™‘çš„ä¸»è¦é—®é¢˜æ˜¯ï¼šæ€æ ·æ‰èƒ½æœ‰æ•ˆåœ°åˆ©ç”¨å¤–å­˜ç©ºé—´å’Œå¦‚ä½•æé«˜å¯¹æ–‡ä»¶çš„è®¿é—®é€Ÿåº¦ã€‚ç›®å‰ï¼Œå¸¸ç”¨çš„å¤–å­˜åˆ†é…æ–¹æ³•æœ‰: è¿ç»­åˆ†é… é“¾æ¥åˆ†é… ç´¢å¼•åˆ†é… è¿ç»­åˆ†é… Continuous Allocationè¿ç»­åˆ†é…(Continuous Allocation)è¦æ±‚ä¸ºæ¯ä¸€ä¸ªæ–‡ä»¶åˆ†é…ä¸€ç»„ç›¸é‚»æ¥çš„ç›˜å—ã€‚ä¸€ç»„ç›˜å—çš„åœ°å€å®šä¹‰äº†ç£ç›˜ä¸Šçš„ä¸€æ®µçº¿æ€§åœ°å€ã€‚æŠŠé€»è¾‘æ–‡ä»¶ä¸­çš„æ•°æ®é¡ºåºåœ°å­˜å‚¨åˆ°ç‰©ç†ä¸Šé‚»æ¥çš„å„ä¸ªæ•°æ®å—ä¸­ï¼Œè¿™æ ·å½¢æˆçš„ç‰©ç†æ–‡ä»¶å¯ä»¥è¿›è¡Œé¡ºåºå­˜å–ã€‚æ–‡ä»¶ç›®å½•ä¸­ä¸ºæ¯ä¸ªæ–‡ä»¶å»ºç«‹ä¸€ä¸ªè¡¨é¡¹ï¼Œå…¶ä¸­è®°è½½æ–‡ä»¶çš„ç¬¬ä¸€ä¸ªæ•°æ®å—åœ°å€åŠæ–‡ä»¶é•¿åº¦ã€‚å¯¹äºé¡ºåºæ–‡ä»¶ï¼Œè¿ç»­è¯»/å†™å¤šä¸ªæ•°æ®å—å†…å®¹æ—¶ï¼Œæ€§èƒ½è¾ƒå¥½ã€‚ Pros é¡ºåºè®¿é—®å®¹æ˜“ã€‚èƒ½å¾ˆå¿«æ£€ç´¢æ–‡ä»¶ä¸­çš„ä¸€ä¸ªæ•°æ®å—ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªæ•°æ®å—çš„åºå·ä¸º xï¼Œéœ€è¦æ£€ç´¢æ–‡ä»¶çš„ç¬¬ y å—ï¼Œåˆ™è¯¥æ•°æ®å—åœ¨å¤–å­˜ä¸­çš„ä½ç½®ä¸º x+y-1ã€‚ é¡ºåºè®¿é—®åœ¨å¤„ç†å¤§é‡è¿ç»­æ•°æ®(å¦‚è§†é¢‘å’ŒéŸ³é¢‘æµ)æ—¶éå¸¸æœ‰æ•ˆã€‚ç£å¤´ç§»åŠ¨è·ç¦»çŸ­ï¼Œæ•ˆç‡æœ€é«˜ Cons è¦æ±‚æœ‰è¿ç»­çš„å­˜å‚¨ç©ºé—´ã€‚è¯¥åˆ†é…æ–¹æ¡ˆå¯èƒ½ä¼šå¯¼è‡´ç£ç›˜ç¢ç‰‡ï¼Œä¸¥é‡é™ä½å¤–å­˜ç©ºé—´çš„åˆ©ç”¨ç‡ã€‚è§£å†³æ–¹æ³•ä¹‹ä¸€ï¼Œç³»ç»Ÿå®šæœŸæˆ–ä¸å®šæœŸé‡‡ç”¨ç´§å‡‘æŠ€æœ¯ï¼Œå°†å°åˆ†åŒºåˆå¹¶ä¸ºå¤§çš„ã€è¿ç»­åˆ†åŒºï¼Œå°†æ–‡ä»¶å ç”¨ç©ºé—´åˆå¹¶åœ¨ä¸€èµ·ã€‚ å¿…é¡»äº‹å…ˆçŸ¥é“æ–‡ä»¶çš„é•¿åº¦ã€‚ç©ºé—´åˆ©ç”¨ç‡ä¸é«˜ï¼›ä¸åˆ©äºæ–‡ä»¶å°ºå¯¸çš„åŠ¨æ€å¢é•¿ã€‚ é“¾æ¥åˆ†é… Linked Allocationè¿ç»­åˆ†é…çš„æ–‡ä»¶åˆ†åŒºå¤ªå¤§ï¼Œä¸åˆ©äºå­˜å‚¨ç©ºé—´çš„æœ‰æ•ˆåˆ©ç”¨ã€‚å¦‚æœåœ¨å°†ä¸€ä¸ªé€»è¾‘æ–‡ä»¶å­˜å‚¨åˆ°å¤–å­˜ä¸Šæ—¶ï¼Œå¯ä»¥è€ƒè™‘å°†æ–‡ä»¶è£…åˆ°å¤šä¸ªç¦»æ•£çš„ç›˜å—ä¸­ã€‚é“¾æ¥æ–‡ä»¶ï¼šé‡‡ç”¨é“¾æ¥åˆ†é…æ–¹å¼æ—¶ï¼Œå¯é€šè¿‡åœ¨æ¯ä¸ªç›˜å—ä¸Šçš„é“¾æ¥æŒ‡é’ˆï¼Œå°†åŒå±äºä¸€ä¸ªæ–‡ä»¶çš„å¤šä¸ªç¦»æ•£çš„ç›˜å—é“¾æ¥æˆä¸€ä¸ªé“¾è¡¨ï¼ŒæŠŠè¿™æ ·å½¢æˆçš„ç‰©ç†æ–‡ä»¶ç§°ä¸ºé“¾æ¥æ–‡ä»¶ã€‚ éšå¼é“¾æ¥ Implicit Linkingåœ¨é‡‡ç”¨éšå¼é“¾æ¥åˆ†é…æ–¹å¼æ—¶ï¼Œåœ¨æ–‡ä»¶ç›®å½•çš„æ¯ä¸ªç›®å½•é¡¹ä¸­ï¼Œéƒ½é¡»å«æœ‰æŒ‡å‘é“¾æ¥æ–‡ä»¶ç¬¬ä¸€ä¸ªç›˜å—å’Œæœ€åä¸€ä¸ªç›˜å—çš„æŒ‡é’ˆã€‚æ¯ä¸ªç›˜å—ä¸­éƒ½å«æœ‰ä¸€ä¸ªæŒ‡å‘ä¸‹ä¸€ä¸ªç›˜å—çš„æŒ‡é’ˆã€‚ Conséšå¼é“¾æ¥åˆ†é…æ–¹å¼çš„ä¸»è¦é—®é¢˜åœ¨äºï¼šå®ƒåªé€‚åˆäºé¡ºåºè®¿é—®ï¼Œå®ƒå¯¹éšæœºè®¿é—®æ˜¯æå…¶ä½æ•ˆçš„ã€‚å¦‚æœè¦è®¿é—®æ–‡ä»¶æ‰€åœ¨çš„ç¬¬ i ä¸ªç›˜å—ï¼Œåˆ™å¿…é¡»å…ˆè¯»å‡ºæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç›˜å—ï¼Œç„¶åé¡ºåºåœ°æŸ¥æ‰¾ç›´è‡³ç¬¬ i å—ã€‚ ä¸ºäº†æé«˜æ£€ç´¢é€Ÿåº¦å’Œå‡å°æŒ‡é’ˆæ‰€å ç”¨çš„å­˜å‚¨ç©ºé—´ï¼Œå¯ä»¥å°†å‡ ä¸ªç›˜å—ç»„æˆä¸€ä¸ªç°‡(cluster)ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªç°‡å¯åŒ…å« 4 ä¸ªç›˜å—ï¼Œåœ¨è¿›è¡Œç›˜å—åˆ†é…æ—¶ï¼Œæ˜¯ä»¥ç°‡ä¸ºå•ä½è¿›è¡Œçš„ã€‚åœ¨é“¾æ¥æ–‡ä»¶ä¸­çš„æ¯ä¸ªå…ƒç´ ä¹Ÿæ˜¯ä»¥ç°‡ä¸ºå•ä½çš„ã€‚è¿™å‡å°‘äº†æŸ¥æ‰¾æ—¶é—´å’ŒæŒ‡é’ˆæ‰€å ç©ºé—´ï¼Œä½†å¢å¤§äº†å†…éƒ¨ç¢ç‰‡,åŒæ—¶è¿™ç§æ”¹è¿›ä¹Ÿæ˜¯éå¸¸æœ‰é™çš„ã€‚ æ˜¾å¼é“¾æ¥ Explicit Linkingè¿™æ˜¯æŒ‡æŠŠç”¨äºé“¾æ¥æ–‡ä»¶å„ç‰©ç†å—çš„æŒ‡é’ˆï¼Œæ˜¾å¼åœ°å­˜æ”¾åœ¨å†…å­˜çš„ä¸€å¼ é“¾æ¥è¡¨ä¸­ã€‚æ•´ä¸ªç£ç›˜ä»…è®¾ç½®ä¸€å¼ æ–‡ä»¶åˆ†é…è¡¨ FAT(File Allocation Table) åœ¨è¯¥è¡¨ä¸­ï¼Œå‡¡æ˜¯å±äºæŸä¸€æ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç›˜å—å·ï¼Œå‡ä½œä¸ºæ–‡ä»¶åœ°å€è¢«å¡«å…¥ç›¸åº”æ–‡ä»¶çš„ FCB (File Control Block)çš„â€œç‰©ç†åœ°å€â€å­—æ®µä¸­ã€‚æŸ¥æ‰¾è®°å½•çš„è¿‡ç¨‹æ˜¯åœ¨å†…å­˜ä¸­è¿›è¡Œçš„ï¼Œå› è€Œä¸ä»…æ˜¾è‘—åœ°æé«˜äº†æ£€ç´¢é€Ÿåº¦ï¼Œè€Œä¸”å¤§å¤§å‡å°‘äº†è®¿é—®ç£ç›˜çš„æ¬¡æ•°ã€‚ç”±äºåˆ†é…ç»™æ–‡ä»¶çš„æ‰€æœ‰ç›˜å—å·éƒ½æ”¾åœ¨è¯¥è¡¨ä¸­ï¼Œæ•…æŠŠè¯¥è¡¨ç§°ä¸ºæ–‡ä»¶åˆ†é…è¡¨ FAT (File Allocation Table)ã€‚ é“¾æ¥åˆ†é…æ–¹å¼è™½ç„¶è§£å†³äº†è¿ç»­åˆ†é…æ–¹å¼æ‰€å­˜åœ¨çš„é—®é¢˜ï¼Œ ä½†åˆå‡ºç°äº†å¦å¤–ä¸¤ä¸ªé—®é¢˜ï¼Œ å³ï¼š(1) ä¸èƒ½æ”¯æŒé«˜æ•ˆçš„ç›´æ¥å­˜å–ã€‚è¦å¯¹ä¸€ä¸ªè¾ƒå¤§çš„æ–‡ä»¶è¿›è¡Œç›´æ¥å­˜å–ï¼Œé¡»é¦–å…ˆåœ¨ FAT ä¸­é¡ºåºåœ°æŸ¥æ‰¾è®¸å¤šç›˜å—å·ã€‚(2) FAT éœ€å ç”¨è¾ƒå¤§çš„å†…å­˜ç©ºé—´ã€‚ç”±äºä¸€ä¸ªæ–‡ä»¶æ‰€å ç”¨ç›˜å—çš„ç›˜å—å·æ˜¯éšæœºåœ°åˆ†å¸ƒåœ¨ FAT ä¸­çš„ï¼Œå› è€Œåªæœ‰å°†æ•´ä¸ª FAT è°ƒå…¥å†…å­˜ï¼Œæ‰èƒ½ä¿è¯åœ¨ FAT ä¸­æ‰¾åˆ°ä¸€ä¸ªæ–‡ä»¶çš„æ‰€æœ‰ç›˜å—å·ã€‚ NTFS (New Technology File System)NTFS æ˜¯ Microsoft åœ¨ Windows NT 3.1 ä¸­å¼•å…¥çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒæä¾›äº†æ¯” FAT æ›´é«˜çº§çš„ç‰¹æ€§å’Œæ€§èƒ½ã€‚åœ¨ NTFS ä¸­ï¼Œæ–‡ä»¶çš„å­˜å‚¨å’Œé“¾æ¥æ–¹å¼ä¸ FAT æœ‰æ‰€ä¸åŒã€‚NTFS ä½¿ç”¨äº†ä¸€ç§å«åš B+ æ ‘çš„æ•°æ®ç»“æ„æ¥å­˜å‚¨æ–‡ä»¶å’Œç›®å½•çš„ä¿¡æ¯ã€‚æ¯ä¸ªæ–‡ä»¶æˆ–ç›®å½•åœ¨ NTFS ä¸­éƒ½æœ‰ä¸€ä¸ªå«åš MFT (Master File Table) è®°å½•ã€‚MFT è®°å½•åŒ…å«äº†æ–‡ä»¶çš„æ‰€æœ‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬å…¶å±æ€§ã€ä½ç½®ã€å¤§å°ç­‰ã€‚å¯¹äºè¾ƒå°çš„æ–‡ä»¶ï¼Œå…¶æ•°æ®å¯èƒ½ç›´æ¥å­˜å‚¨åœ¨ MFT è®°å½•ä¸­ã€‚å¯¹äºè¾ƒå¤§çš„æ–‡ä»¶ï¼ŒMFT è®°å½•ä¼šåŒ…å«ä¸€ä¸ªæŒ‡å‘æ–‡ä»¶æ•°æ®å—çš„æŒ‡é’ˆåˆ—è¡¨ã€‚æ€»çš„æ¥è¯´ï¼ŒFAT å’Œ NTFS åœ¨é“¾æ¥æ–‡ä»¶æ•°æ®æ–¹é¢ä½¿ç”¨äº†ä¸åŒçš„æ•°æ®ç»“æ„å’Œç®—æ³•ã€‚FAT ä½¿ç”¨äº†ç›¸å¯¹ç®€å•çš„é“¾è¡¨ç»“æ„ï¼Œè€Œ NTFS ä½¿ç”¨äº†æ›´å¤æ‚ä½†ä¹Ÿæ›´é«˜æ•ˆçš„ B+ æ ‘ç»“æ„ã€‚ ç´¢å¼•åˆ†é… Indexed Allocationå•çº§ç´¢å¼•åˆ†é… Single-level Indexingç´¢å¼•åˆ†é…èƒ½è§£å†³è¿ç»­åˆ†é…å’Œé“¾æ¥åˆ†é…å­˜åœ¨çš„è¯¸å¤šé—®é¢˜ã€‚åŸç†ï¼šä¸ºæ¯ä¸ªæ–‡ä»¶åˆ†é…ä¸€ä¸ªç´¢å¼•å—(è¡¨)ï¼Œå†æŠŠåˆ†é…ç»™è¯¥æ–‡ä»¶çš„æ‰€æœ‰ç›˜å—å·éƒ½è®°å½•åœ¨è¯¥ç´¢å¼•å—ä¸­ï¼Œå› è€Œè¯¥ç´¢å¼•å—å°±æ˜¯ä¸€ä¸ªå«æœ‰è®¸å¤šç›˜å—å·çš„æ•°ç»„ã€‚åœ¨å»ºç«‹ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œåªéœ€åœ¨ä¸ºä¹‹å»ºç«‹çš„ç›®å½•é¡¹ä¸­å¡«ä¸ŠæŒ‡å‘è¯¥ç´¢å¼•å—çš„æŒ‡é’ˆã€‚ Prosç´¢å¼•åˆ†é…æ–¹å¼æ”¯æŒç›´æ¥è®¿é—®ã€‚å½“è¦è¯»æ–‡ä»¶çš„ç¬¬ i ä¸ªç›˜å—æ—¶ï¼Œå¯ä»¥æ–¹ä¾¿åœ°ç›´æ¥ä»ç´¢å¼•å—ä¸­æ‰¾åˆ°ç¬¬ i ä¸ªç›˜å—çš„ç›˜å—å·ï¼›åŸºäºæ•°æ®å—çš„åˆ†åŒºèƒ½æ¶ˆé™¤å¤–éƒ¨ç¢ç‰‡Conså¤§æ–‡ä»¶ç´¢å¼•é¡¹è¾ƒå¤šï¼Œå¯èƒ½ä½¿ä¸€ä¸ªæ•°æ®å—å®¹çº³ä¸äº†ä¸€ä¸ªæ–‡ä»¶çš„æ‰€æœ‰åˆ†åŒºçš„ç´¢å¼•ã€‚ç´¢å¼•å—å¯èƒ½è¦èŠ±è´¹è¾ƒå¤šçš„å¤–å­˜ç©ºé—´ã€‚æ¯å½“å»ºç«‹ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œä¾¿é¡»ä¸ºä¹‹åˆ†é…ä¸€ä¸ªä¸“é—¨çš„ç´¢å¼•å—ï¼Œå°†åˆ†é…ç»™è¯¥æ–‡ä»¶çš„æ‰€æœ‰ç›˜å—å·è®°å½•äºå…¶ä¸­ã€‚å¯¹äºå°æ–‡ä»¶å¦‚æœé‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œç´¢å¼•å—çš„åˆ©ç”¨ç‡å°†æ˜¯æä½çš„ã€‚ ä¸¤çº§ç´¢å¼•åˆ†é… Two-level Indexingå½“æ–‡ä»¶å¤ªå¤§ï¼Œå…¶ä¸€çº§ç´¢å¼•å—å¤ªå¤šæ—¶ï¼Œåº”ä¸ºè¿™äº›ç´¢å¼•å—å†å»ºç«‹ä¸€çº§ç´¢å¼•ï¼Œå½¢æˆä¸¤çº§ç´¢å¼•åˆ†é…æ–¹å¼ã€‚å³ç³»ç»Ÿå†åˆ†é…ä¸€ä¸ªç´¢å¼•å—ï¼Œä½œä¸ºç¬¬ä¸€çº§ç´¢å¼•çš„ç´¢å¼•å—ï¼Œå°†ç¬¬ä¸€å—ã€ç¬¬äºŒå—â€¦â€¦ç­‰ç´¢å¼•å—çš„ç›˜å—å·å¡«å…¥åˆ°æ­¤ç´¢å¼•è¡¨ä¸­ æ–‡ä»¶å­˜å‚¨ç©ºé—´çš„ç®¡ç†æ–‡ä»¶ç®¡ç†è¦è§£å†³çš„é‡è¦é—®é¢˜ä¹‹ä¸€æ˜¯å¦‚ä½•ä¸ºæ–°åˆ›å»ºçš„æ–‡ä»¶åˆ†é…å­˜å‚¨ç©ºé—´ã€‚å­˜å‚¨ç©ºé—´çš„åŸºæœ¬åˆ†é…å•ä½æ˜¯ç£ç›˜å—ã€‚å…¶åˆ†é…æ–¹æ³•ä¸å†…å­˜çš„åˆ†é…æœ‰è®¸å¤šç›¸ä¼¼ä¹‹å¤„ï¼Œå³åŒæ ·å¯é‡‡å–è¿ç»­åˆ†é…æ–¹å¼æˆ–ç¦»æ•£åˆ†é…æ–¹å¼ã€‚ç³»ç»Ÿåº”ä¸ºåˆ†é…å­˜å‚¨ç©ºé—´è€Œè®¾ç½®ç›¸åº”çš„æ•°æ®ç»“æ„ï¼›å…¶æ¬¡ï¼Œç³»ç»Ÿåº”æä¾›å¯¹å­˜å‚¨ç©ºé—´è¿›è¡Œåˆ†é…å’Œå›æ”¶çš„æ‰‹æ®µã€‚ æ–‡ä»¶å­˜å‚¨ç©ºé—´çš„ç®¡ç†æ–¹æ³•åŒ…æ‹¬ï¼š ç©ºé—²åˆ†åŒºè¡¨ ç©ºé—²é“¾è¡¨æ³• ä½ç¤ºå›¾ æˆç»„é“¾æ¥æ³• ç©ºé—²è¡¨æ³• Free Space Tableç©ºé—²è¡¨æ³•å±äºè¿ç»­åˆ†é…æ–¹å¼ï¼Œå®ƒä¸ºæ¯ä¸ªæ–‡ä»¶åˆ†é…ä¸€å—è¿ç»­çš„å­˜å‚¨ç©ºé—´ï¼Œå³ç³»ç»Ÿä¹Ÿä¸ºå¤–å­˜ä¸Šçš„æ‰€æœ‰ç©ºé—²åŒºå»ºç«‹ä¸€å¼ ç©ºé—²è¡¨ï¼Œæ¯ä¸ªç©ºé—²åŒºå¯¹åº”äºä¸€ä¸ªç©ºé—²è¡¨é¡¹ï¼Œå…¶ä¸­åŒ…æ‹¬è¡¨é¡¹åºå·ã€è¯¥ç©ºé—²åŒºçš„ç¬¬ä¸€ä¸ªç›˜å—å·ã€è¯¥åŒºçš„ç©ºé—²ç›˜å—æ•°ç­‰ä¿¡æ¯ã€‚ è¡¨é¡¹åºå· ç©ºé—²åŒºèµ·å§‹ç›˜å—å· ç©ºé—²ç›˜å—æ•° 1 2 4 2 9 3 3 15 5 4 â€¦ â€¦ Steps ä¸ºæ–‡ä»¶åˆ†é…å­˜å‚¨ç©ºé—´æ—¶ï¼Œé¦–å…ˆé¡ºåºæŸ¥æ‰¾ç©ºé—²åˆ†åŒºè¡¨ä¸­çš„å„ä¸ªè¡¨é¡¹ï¼Œç›´è‡³æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§å°é€‚åˆçš„ç©ºé—²åˆ†åŒºã€‚ å¯ä»¥é‡‡ç”¨é¦–æ¬¡é€‚åº”åˆ†é…ç®—æ³•ã€æœ€ä½³é€‚åº”åˆ†é…ç®—æ³•ç­‰ã€‚ ç„¶åï¼Œå°†è¯¥åˆ†åŒºåˆ†é…ç»™æ–‡ä»¶ï¼ŒåŒæ—¶ä¿®æ”¹ç©ºé—²åˆ†åŒºè¡¨ï¼Œåˆ é™¤ç›¸åº”è¡¨é¡¹ã€‚ å½“åˆ é™¤æ–‡ä»¶é‡Šæ”¾å‡ºç©ºé—´æ—¶ï¼Œç³»ç»Ÿå›æ”¶å…¶å­˜å‚¨ç©ºé—´ï¼Œåˆå¹¶ç›¸é‚»ç©ºé—²åˆ†åŒº. å¯¹äº¤æ¢åˆ†åŒºä¸€èˆ¬éƒ½é‡‡ç”¨è¿ç»­åˆ†é…æ–¹å¼ã€‚å¯¹äºæ–‡ä»¶ç³»ç»Ÿï¼Œå½“æ–‡ä»¶è¾ƒå°(1 ï½ 4 ä¸ªç›˜å—)æ—¶ï¼Œä»é‡‡ç”¨è¿ç»­åˆ†é…æ–¹å¼ï¼Œä¸ºæ–‡ä»¶åˆ†é…ç›¸é‚»æ¥çš„å‡ ä¸ªç›˜å—ï¼›å½“æ–‡ä»¶è¾ƒå¤§æ—¶ï¼Œä¾¿é‡‡ç”¨ç¦»æ•£åˆ†é…æ–¹å¼ã€‚ Proså®ç°ç®€å•ã€‚å¯¹äºæœ€ä½³é€‚åº”åˆ†é…ç®—æ³•ï¼Œå¯ä»¥å°†å„ç©ºé—²åˆ†åŒºæŒ‰ç…§ï¼ˆé•¿åº¦ï¼‰ä»å°åˆ°å¤§çš„é¡ºåºè¿›è¡Œæ’åˆ—ï¼Œå†åˆ©ç”¨æœ‰æ•ˆçš„æŸ¥æ‰¾ç®—æ³•ï¼Œèƒ½å¾ˆå¿«æ‰¾åˆ°éœ€è¦å¤§å°çš„ç©ºé—²åˆ†åŒºConså½“å­˜å‚¨ç©ºé—´ä¸­çš„ç©ºé—²åˆ†åŒºåˆ†å¸ƒè¾ƒåˆ†æ•£ä¸”æ•°é‡è¾ƒå¤šæ—¶ï¼Œç©ºé—²åˆ†åŒºè¡¨å°†ä¼šå¾ˆå¤§ã€‚éœ€è¦å¾ˆå¤§çš„å†…å­˜ç©ºé—´ï¼Œä¼šé™ä½ç©ºé—²åˆ†åŒºè¡¨çš„æ£€ç´¢é€Ÿåº¦ã€‚ ç©ºé—²é“¾è¡¨æ³• Linked Free Space Listç”¨ä¸“é—¨çš„ç©ºé—²åˆ†åŒºè¡¨ç™»è®°ç©ºé—²åˆ†åŒºä¿¡æ¯ä¼šæµªè´¹ä¸€å®šçš„å­˜å‚¨ç©ºé—´ï¼Œè€Œä¸”ä¸é€‚åˆç™»è®°åˆ†æ•£ä¸”æ•°ç›®å¾ˆå¤šçš„ç©ºé—²åˆ†åŒºï¼Œä¸åˆ©äºåŸºäºå­˜å‚¨å—çš„é“¾æ¥æ–‡ä»¶å’Œç´¢å¼•æ–‡ä»¶çš„å­˜å‚¨ç©ºé—´åˆ†é…ã€‚ç©ºé—²é“¾è¡¨æ³•æ˜¯å°†æ‰€æœ‰ç©ºé—²ç›˜åŒºæ‹‰æˆä¸€æ¡ç©ºé—²é“¾ã€‚æ ¹æ®æ„æˆé“¾æ‰€ç”¨åŸºæœ¬å…ƒç´ çš„ä¸åŒï¼Œå¯æŠŠé“¾è¡¨åˆ†æˆä¸¤ç§å½¢å¼ï¼š ç©ºé—²ç›˜å—é“¾ ç©ºé—²ç›˜åŒºé“¾ ç©ºé—²ç›˜åŒºé“¾ Free Space Listå°†ç£ç›˜ä¸Šçš„æ‰€æœ‰ç©ºé—²ç©ºé—´ï¼Œä»¥ç›˜å—ä¸ºå•ä½æ‹‰æˆä¸€æ¡é“¾ã€‚å½“ç”¨æˆ·å› åˆ›å»ºæ–‡ä»¶è€Œè¯·æ±‚åˆ†é…å­˜å‚¨ç©ºé—´æ—¶ï¼Œç³»ç»Ÿä»é“¾é¦–å¼€å§‹ï¼Œä¾æ¬¡æ‘˜ä¸‹é€‚å½“æ•°ç›®çš„ç©ºé—²ç›˜å—åˆ†é…ç»™ç”¨æˆ·ã€‚å½“ç”¨æˆ·å› åˆ é™¤æ–‡ä»¶è€Œé‡Šæ”¾å­˜å‚¨ç©ºé—´æ—¶ï¼Œç³»ç»Ÿå°†å›æ”¶çš„ç›˜å—ä¾æ¬¡æ’å…¥ç©ºé—²ç›˜å—é“¾çš„æœ«å°¾ã€‚ Prosç”¨äºåˆ†é…å’Œå›æ”¶ä¸€ä¸ªç›˜å—çš„è¿‡ç¨‹éå¸¸ç®€å•. ç©ºé—²ç›˜å—é“¾ Free Block Listå°†ç£ç›˜ä¸Šçš„æ‰€æœ‰ç©ºé—²ç›˜åŒº(æ¯ä¸ªç›˜åŒºå¯åŒ…å«è‹¥å¹²ä¸ªç›˜å—)æ‹‰æˆä¸€æ¡é“¾ã€‚åœ¨æ¯ä¸ªç›˜åŒºä¸Šå«æœ‰ç”¨äºæŒ‡ç¤ºä¸‹ä¸€ä¸ªç©ºé—²ç›˜åŒºçš„æŒ‡é’ˆå’Œèƒ½æŒ‡æ˜æœ¬ç›˜åŒºå¤§å°(ç›˜å—æ•°)çš„ä¿¡æ¯ã€‚åˆ†é…ç›˜åŒºçš„æ–¹æ³•ä¸å†…å­˜çš„åŠ¨æ€åˆ†åŒºåˆ†é…ç±»ä¼¼ï¼Œé€šå¸¸é‡‡ç”¨é¦–æ¬¡é€‚åº”ç®—æ³•ã€‚åœ¨å›æ”¶ç›˜åŒºæ—¶ï¼ŒåŒæ ·ä¹Ÿè¦å°†å›æ”¶åŒºä¸ç›¸é‚»æ¥çš„ç©ºé—²ç›˜åŒºç›¸åˆå¹¶ã€‚ ä¸ºäº†æé«˜å¯¹ç©ºé—²ç›˜åŒºçš„æ£€ç´¢é€Ÿåº¦ï¼Œå¯ä»¥é‡‡ç”¨æ˜¾å¼é“¾æ¥æ–¹æ³•ï¼Œäº¦å³ï¼Œåœ¨å†…å­˜ä¸­ä¸ºç©ºé—²ç›˜åŒºå»ºç«‹ä¸€å¼ é“¾è¡¨ã€‚æ¯ä¸ªåˆ†åŒºç»“ç‚¹å†…å®¹ï¼šèµ·å§‹ç›˜å—å·ã€ç›˜å—æ•°ã€æŒ‡å‘ä¸‹ä¸€ä¸ªç©ºé—²ç›˜åŒºçš„æŒ‡é’ˆã€‚ Consä¸€æ®µæ—¶é—´ä»¥åï¼Œå¯èƒ½ä¼šä½¿ç©ºé—²åˆ†åŒºé“¾è¡¨ä¸­åŒ…å«å¤ªå¤šå°åˆ†åŒºï¼Œä½¿æ–‡ä»¶åˆ†é…åˆ°çš„å­˜å‚¨ç©ºé—´è¿‡åˆ†ç¦»æ•£ã€‚åˆ é™¤ä¸€ä¸ªç”±è®¸å¤šç¦»æ•£å°åˆ†åŒºç»„æˆçš„æ–‡ä»¶æ—¶ï¼Œå°†å›æ”¶çš„å°åˆ†åŒºé“¾æ¥åˆ°ç©ºé—²åˆ†åŒºé“¾è¡¨ä¸­éœ€è¦å¾ˆé•¿æ—¶é—´ã€‚è‹¥ä¸€ä¸ªæ–‡ä»¶ç”³è¯·è¿ç»­å­˜å‚¨ç©ºé—´ï¼Œåˆ™éœ€è¦èŠ±è´¹è¾ƒé•¿çš„æ—¶é—´æŸ¥æ‰¾ç›¸é‚»çš„ç©ºé—²åˆ†åŒºã€‚å› æ­¤ï¼Œè¿™ç§ç©ºé—²ç©ºé—´ç»„ç»‡æ–¹æ³•é€‚åˆäºéè¿ç»­å­˜å‚¨æ–‡ä»¶ã€‚ ä½ç¤ºå›¾ Bit Mapåˆ©ç”¨äºŒè¿›åˆ¶ä½ 0ã€1 è¡¨ç¤ºå­˜å‚¨ç©ºé—´ä¸­å­˜å‚¨å—çš„ä½¿ç”¨çŠ¶æ€ã€‚ä¾‹å¦‚è§„å®šç©ºé—²åˆ†åŒºä¸º 0ï¼Œå·²åˆ†é…åˆ†åŒºä¸º 1ç£ç›˜ä¸Šçš„æ‰€æœ‰ç›˜å—éƒ½æœ‰ä¸€ä¸ªäºŒè¿›åˆ¶ä½ä¸ä¹‹å¯¹åº”ï¼Œè¿™æ ·ï¼Œç”±æ‰€æœ‰ç›˜å—æ‰€å¯¹åº”çš„ä½æ„æˆä¸€ä¸ªé›†åˆï¼Œç§°ä¸ºä½ç¤ºå›¾ã€‚é€šå¸¸å¯ç”¨ m Ã— n ä¸ªä½æ•°æ¥æ„æˆä½ç¤ºå›¾ï¼Œå¹¶ä½¿ m Ã— n ç­‰äºç£ç›˜çš„æ€»å—æ•°ã€‚ä½ç¤ºå›¾ä¹Ÿå¯æè¿°ä¸ºä¸€ä¸ªäºŒç»´æ•°ç»„map[m][n] 1 2 3 4 5 6 7 8 9 10 11 1 1 1 0 0 1 1 1 1 0 0 0 2 1 0 1 0 0 1 0 1 0 0 0 3 1 1 0 0 1 1 0 1 0 0 0 4 1 1 0 1 0 1 1 1 0 0 0 â€¦ â€¦ â€¦ â€¦ â€¦ â€¦ â€¦ â€¦ â€¦ â€¦ â€¦ â€¦ Stepsç”³è¯·ç›˜å— (1) é¡ºåºæ‰«æä½ç¤ºå›¾(mÃ—n)ï¼Œä»ä¸­æ‰¾å‡ºä¸€ä¸ªæˆ–ä¸€ç»„å…¶å€¼ä¸º0çš„äºŒè¿›åˆ¶ä½ã€‚(2) å°†æ‰€æ‰¾åˆ°çš„ä¸€ä¸ªæˆ–ä¸€ç»„äºŒè¿›åˆ¶ä½è½¬æ¢æˆä¸ä¹‹ç›¸åº”çš„ç›˜å—å·ã€‚å‡ æ‰¾åˆ°çš„å…¶å€¼ä¸º0çš„äºŒè¿›åˆ¶ä½ä½äºä½ç¤ºå›¾çš„ç¬¬ i è¡Œã€ç¬¬ j åˆ—ï¼Œåˆ™å…¶ç›¸åº”çš„ç›˜å—å·åº”æŒ‰ä¸‹å¼è®¡ç®—ï¼šb = n(i- 1) + j(3) ä¿®æ”¹ä½ç¤ºå›¾ï¼Œä»¤ map[i,j]=1 å›æ”¶ç›˜å—(1) å°†å›æ”¶ç›˜å—çš„ç›˜å—å·è½¬æ¢æˆä½ç¤ºå›¾ä¸­çš„è¡Œå·å’Œåˆ—å·ã€‚è½¬æ¢å…¬å¼ä¸ºï¼š $$i = (b - 1) DIV n + 1j = (b - 1) MOD n + 1$$ (2) ä¿®æ”¹ä½ç¤ºå›¾,ä»¤ map[i,j] =0 Proså¯ä»¥å®¹æ˜“åœ°æ‰¾åˆ°ä¸€ä¸ªæˆ–ä¸€ç»„è¿ç»­çš„ç©ºé—²åˆ†åŒºã€‚ä¾‹å¦‚ï¼Œéœ€è¦æ‰¾åˆ° 8 ä¸ªç›¸é‚»æ¥çš„ç©ºé—²ç›˜å—ï¼Œåªéœ€åœ¨ä½ç¤ºå›¾ä¸­æ‰¾å‡º 8 ä¸ªå…¶å€¼è¿ç»­ä¸ºâ€œ0â€çš„ä½å³å¯ã€‚BitMap å æ®ç©ºé—´ä¸º Disk Space(Byte) Ã· ï¼ˆBlock Size Ã— 8ï¼‰ï¼Œå¯¹äºå®¹é‡è¾ƒå°çš„ç£ç›˜ï¼Œä½ç¤ºå›¾å ç”¨çš„ç©ºé—´ä¼šå¾ˆå°Conså¯¹äºä¸€ä¸ª 16GB çš„ç£ç›˜ï¼Œè‹¥æ•°æ®å—å¤§å°ä¸º 512 å­—èŠ‚ï¼Œåˆ™ä½ç¤ºå›¾å¤§å°ä¸º 4MBï¼Œå¤§çº¦éœ€è¦å ç”¨ 8000 ä¸ªç£ç›˜å—çš„å­˜å‚¨ç©ºé—´ã€‚ $$ Block_num = \\frac{16GB}{512B} = 2^{25}ä¸ª\\\\ å³å…±æœ‰2^{25}ä¸ª0æˆ–1,æ¯ä¸ªä½å 1bit\\\\ æ‰€ä»¥ä½ç¤ºå›¾å¤§å°ä¸º\\frac{2^{25}Bit}{8Bit/Byte} = 4MB $$ å¾ˆéš¾ä¸€æ¬¡æ€§å°†è¯¥ä½ç¤ºå›¾å…¨éƒ¨è£…å…¥å†…å­˜ã€‚å³ä½¿å†…å­˜è¶³å¤Ÿå¤§ï¼Œå¯ä»¥å­˜æ”¾å…¨éƒ¨æˆ–ç»å¤§éƒ¨åˆ†ä½ç¤ºå›¾æ•°æ®ï¼Œæœç´¢ä¸€ä¸ªå¾ˆå¤§çš„ä½ç¤ºå›¾å°†ä¼šé™ä½æ–‡ä»¶ç³»ç»Ÿçš„æ€§èƒ½ã€‚ å°¤å…¶å½“ç£ç›˜ç©ºé—´å¿«ç”¨å®Œï¼Œå‰©ä¸‹çš„ç©ºé—²ç£ç›˜å—å¾ˆå°‘æ—¶ï¼Œæ–‡ä»¶ç³»ç»Ÿçš„æ€§èƒ½å°†ä¸¥é‡é™ä½ æˆç»„é“¾æ¥æ³• Grouping Linkageå°†ç£ç›˜æ‰€æœ‰ç©ºé—²ç›˜å—åˆ†ç»„ï¼›è®¾ç½®ç©ºé—²ç›˜å—å·æ ˆï¼Œå­˜æ”¾å½“å‰å¯ç”¨çš„ä¸€ç»„ç©ºé—²ç›˜å—çš„ç›˜å—å·å’Œæ ˆä¸­å°šæœ‰çš„ç©ºé—²ç›˜å—æ€»æ•°ï¼›åä¸€ç»„çš„æ‰€æœ‰ç›˜å—å·ä»¥åŠç›˜å—æ€»æ•°ç™»è®°åœ¨å‰ä¸€ç»„çš„ç¬¬ä¸€ä¸ªç›˜å—ä¸­â€¦â€¦ä¾æ¬¡ç±»æ¨ï¼Œç»„ä¸ç»„ä¹‹é—´å½¢æˆé“¾æ¥å…³ç³»ï¼›æœ€åä¸€ç»„å°‘ç™»è®°ä¸€ä¸ªç›˜å—å·ï¼Œå¤šç™»è®°ä¸€ä¸ªç©ºé—²ç›˜å—é“¾çš„ç»“æŸæ ‡å¿—ã€‚ ç©ºé—²ç›˜å—çš„ç»„ç»‡ ç©ºé—²ç›˜å—å·æ ˆï¼šç”¨æ¥å­˜æ”¾å½“å‰å¯ç”¨çš„ä¸€ç»„ç©ºé—²ç›˜å—çš„ç›˜å—å·(æœ€å¤šå« 100 ä¸ªå·)ï¼Œä»¥åŠæ ˆä¸­å°šæœ‰çš„ç©ºé—²ç›˜å—å·æ•° Nã€‚é¡ºä¾¿æŒ‡å‡ºï¼ŒN è¿˜å…¼ä½œæ ˆé¡¶æŒ‡é’ˆç”¨ã€‚ä¾‹å¦‚ï¼Œå½“ N=100 æ—¶ï¼Œå®ƒæŒ‡å‘ S.free(99)ã€‚ç”±äºæ ˆæ˜¯ä¸´ç•Œèµ„æºï¼Œæ¯æ¬¡åªå…è®¸ä¸€ä¸ªè¿›ç¨‹å»è®¿é—®ï¼Œæ•…ç³»ç»Ÿä¸ºæ ˆè®¾ç½®äº†ä¸€æŠŠé”ã€‚ï¼ˆåªæœ‰è¿™ä¸ªæ˜¯æ”¾åœ¨å†…å­˜ä¸­çš„ï¼Œå…¶å®ƒæ˜¯åœ¨ç£ç›˜ä¸Šã€‚ï¼‰ æ–‡ä»¶åŒºä¸­çš„æ‰€æœ‰ç©ºé—²ç›˜å—è¢«åˆ†æˆè‹¥å¹²ä¸ªç»„ï¼Œæ¯”å¦‚ï¼Œå°†æ¯ 100 ä¸ªç›˜å—ä½œä¸ºä¸€ç»„ã€‚å‡å®šç›˜ä¸Šå…±æœ‰ 10 000 ä¸ªç›˜å—ï¼Œæ¯å—å¤§å°ä¸º 1 KBï¼Œå…¶ä¸­ç¬¬ 201 ï½ 7999 å·ç›˜å—ç”¨äºå­˜æ”¾æ–‡ä»¶ï¼Œå³ä½œä¸ºæ–‡ä»¶åŒºï¼Œè¿™æ ·ï¼Œè¯¥åŒºçš„æœ€æœ«ä¸€ç»„ç›˜å—å·åº”ä¸º 7901 ï½ 7999ï¼›æ¬¡æœ«ç»„ä¸º 7801 ï½ 7900â€¦â€¦ï¼›ç¬¬äºŒç»„çš„ç›˜å—å·ä¸º 301 ï½ 400ï¼›ç¬¬ä¸€ç»„ä¸º 201 ï½ 300ï¼Œå¦‚ä¸Šå›¾å³éƒ¨æ‰€ç¤ºã€‚ å°†æ¯ä¸€ç»„å«æœ‰çš„ç›˜å—æ€»æ•° N å’Œè¯¥ç»„æ‰€æœ‰çš„ç›˜å—å·è®°å…¥å…¶å‰ä¸€ç»„çš„ç¬¬ä¸€ä¸ªç›˜å—ï¼ˆä»åå¾€å‰åˆ†ç»„ï¼‰çš„ S.free(0)ï½ S.free(99)ä¸­ã€‚ å°†ç¬¬ä¸€ç»„çš„ç›˜å—æ€»æ•°å’Œæ‰€æœ‰çš„ç›˜å—å·è®°å…¥ç©ºé—²ç›˜å—å·æ ˆä¸­ï¼Œä½œä¸ºå½“å‰å¯ä¾›åˆ†é…çš„ç©ºé—²ç›˜å—å·ã€‚ æœ€æœ«ä¸€ç»„åªæœ‰ 99 ä¸ªç›˜å—ï¼Œå…¶ç›˜å—å·åˆ†åˆ«è®°å…¥å…¶å‰ä¸€ç»„çš„ S.free(1) ï½ S.free(99)ä¸­ï¼Œè€Œåœ¨ S.free(0)ä¸­åˆ™å­˜æ”¾â€œ0â€ï¼Œä½œä¸ºç©ºé—²ç›˜å—é“¾çš„ç»“æŸæ ‡å¿—ã€‚(æ³¨ï¼šæœ€åä¸€ç»„çš„ç›˜å—æ•°åº”ä¸º 99ï¼Œä¸åº”æ˜¯ 100ï¼Œå› ä¸ºè¿™æ˜¯æŒ‡å¯ä¾›ä½¿ç”¨çš„ç©ºé—²ç›˜å—ï¼Œå…¶ç¼–å·åº”ä¸º(1 ï½ 99)ï¼Œ0 å·ä¸­æ”¾ç©ºé—²ç›˜å—é“¾çš„ç»“å°¾æ ‡å¿—ã€‚) ç©ºé—²ç›˜å—çš„åˆ†é…ä¸å›æ”¶ å½“ç³»ç»Ÿè¦ä¸ºç”¨æˆ·åˆ†é…æ–‡ä»¶æ‰€éœ€çš„ç›˜å—æ—¶ï¼Œé¡»è°ƒç”¨ç›˜å—åˆ†é…è¿‡ç¨‹æ¥å®Œæˆã€‚è¯¥è¿‡ç¨‹é¦–å…ˆæ£€æŸ¥ç©ºé—²ç›˜å—å·æ ˆæ˜¯å¦ä¸Šé”ï¼Œå¦‚æœªä¸Šé”ï¼Œä¾¿ä»æ ˆé¡¶å–å‡ºä¸€ç©ºé—²ç›˜å—å·ï¼Œå°†ä¸ä¹‹å¯¹åº”çš„ç›˜å—åˆ†é…ç»™ç”¨æˆ·ï¼Œç„¶åå°†æ ˆé¡¶æŒ‡é’ˆä¸‹ç§»ä¸€æ ¼ã€‚ è‹¥è¯¥ç›˜å—å·å·²æ˜¯æ ˆåº•ï¼Œå³ S.free(0)ï¼Œè¿™æ˜¯å½“å‰æ ˆä¸­æœ€åä¸€ä¸ªå¯åˆ†é…çš„ç›˜å—å·ã€‚ç”±äºåœ¨è¯¥ç›˜å—å·æ‰€å¯¹åº”çš„ç›˜å—ä¸­è®°æœ‰ä¸‹ä¸€ç»„å¯ç”¨çš„ç›˜å—å·ï¼Œå› æ­¤ï¼Œé¡»è°ƒç”¨ç£ç›˜è¯»è¿‡ç¨‹ï¼Œå°†æ ˆåº•ç›˜å—å·æ‰€å¯¹åº”ç›˜å—çš„å†…å®¹è¯»å…¥æ ˆä¸­ï¼Œä½œä¸ºæ–°çš„ç›˜å—å·æ ˆçš„å†…å®¹ï¼Œå¹¶æŠŠåŸæ ˆåº•å¯¹åº”çš„ç›˜å—åˆ†é…å‡ºå»(å…¶ä¸­çš„æœ‰ç”¨æ•°æ®å·²è¯»å…¥æ ˆä¸­)ã€‚ç„¶åï¼Œå†åˆ†é…ä¸€ç›¸åº”çš„ç¼“å†²åŒº(ä½œä¸ºè¯¥ç›˜å—çš„ç¼“å†²åŒº)ã€‚æœ€åï¼ŒæŠŠæ ˆä¸­çš„ç©ºé—²ç›˜å—æ•°å‡ 1 å¹¶è¿”å›ã€‚ åœ¨ç³»ç»Ÿå›æ”¶ç©ºé—²ç›˜å—æ—¶ï¼Œé¡»è°ƒç”¨ç›˜å—å›æ”¶è¿‡ç¨‹è¿›è¡Œå›æ”¶ã€‚å®ƒæ˜¯å°†å›æ”¶ç›˜å—çš„ç›˜å—å·è®°å…¥ç©ºé—²ç›˜å—å·æ ˆçš„é¡¶éƒ¨ï¼Œå¹¶æ‰§è¡Œç©ºé—²ç›˜å—æ•°åŠ  1 æ“ä½œã€‚å½“æ ˆä¸­ç©ºé—²ç›˜å—å·æ•°ç›®å·²è¾¾ 100 æ—¶ï¼Œè¡¨ç¤ºæ ˆå·²æ»¡ï¼Œä¾¿å°†ç°æœ‰æ ˆä¸­çš„ 100 ä¸ªç›˜å—å·è®°å…¥æ–°å›æ”¶çš„ç›˜å—ä¸­ï¼Œå†å°†å…¶ç›˜å—å·ä½œä¸ºæ–°æ ˆåº•ã€‚ æ–‡ä»¶ç›®å½• File Directoryæ–‡ä»¶ç›®å½•ç®¡ç†æ–‡ä»¶æ§åˆ¶å—ï¼ˆFCBï¼‰ï¼šç”¨äºæè¿°å’Œæ§åˆ¶æ–‡ä»¶çš„æ•°æ®ç»“æ„ã€‚å®ƒåŒ…æ‹¬ï¼š åŸºæœ¬ä¿¡æ¯ï¼šæ–‡ä»¶åã€æ–‡ä»¶ç±»å‹ç­‰ï¼› åœ°å€ä¿¡æ¯ï¼šå·ï¼ˆå­˜å‚¨æ–‡ä»¶çš„è®¾å¤‡ï¼‰ã€èµ·å§‹åœ°å€ï¼ˆèµ·å§‹ç‰©ç†åœ°å€ï¼‰ã€æ–‡ä»¶é•¿åº¦ï¼ˆä»¥å­—èŠ‚ã€å­—æˆ–å—ä¸ºå•ä½ï¼‰ç­‰ã€‚ è®¿é—®æ§åˆ¶ä¿¡æ¯ï¼šæ–‡ä»¶æ‰€æœ‰è€…ã€è®¿é—®ä¿¡æ¯ï¼ˆç”¨æˆ·åå’Œå£ä»¤ç­‰ï¼‰ã€åˆæ³•æ“ä½œç­‰ï¼› ä½¿ç”¨ä¿¡æ¯ï¼šåˆ›å»ºæ—¶é—´ã€åˆ›å»ºè€…èº«ä»½ã€å½“å‰çŠ¶æ€ã€æœ€è¿‘ä¿®æ”¹æ—¶é—´ã€æœ€è¿‘è®¿é—®æ—¶é—´ç­‰ã€‚ â€¦ æ–‡ä»¶ç›®å½•ï¼šæ–‡ä»¶æ§åˆ¶å—çš„æœ‰åºé›†åˆã€‚ å¯¹ç›®å½•ç®¡ç†çš„è¦æ±‚å¦‚ä¸‹ï¼š(1)å®ç°â€œæŒ‰åå­˜å–â€ã€‚(2) æé«˜å¯¹ç›®å½•çš„æ£€ç´¢é€Ÿåº¦ã€‚(3) æ–‡ä»¶å…±äº«ã€‚(4) å…è®¸æ–‡ä»¶é‡åã€‚ ç›®å½•é¡¹çš„ä¸¤ç§ç»„ç»‡æ–¹å¼ï¼š FCB å­˜å‚¨å…¨éƒ¨ç›®å½•å†…å®¹ å­˜å‚¨éƒ¨åˆ†ç›®å½•ä¿¡æ¯ï¼Œå¦‚æ–‡ä»¶åã€ç´¢å¼•èŠ‚ç‚¹æŒ‡é’ˆç­‰ï¼Œå…¶ä½™éƒ¨åˆ†ä¿å­˜åœ¨ç´¢å¼•èŠ‚ç‚¹ï¼ˆi Nodeï¼‰ã€‚æ‰“å¼€æ–‡ä»¶æ—¶å°†ç´¢å¼•èŠ‚ç‚¹ä»ç£ç›˜è¯»åˆ°å†…å­˜ä¸­ã€‚ iNodeï¼ˆç´¢å¼•èŠ‚ç‚¹ï¼‰æ˜¯ Unix å’Œç±» Unix æ“ä½œç³»ç»Ÿä¸­çš„æ–‡ä»¶ç³»ç»Ÿçš„ä¸€ä¸ªé‡è¦æ¦‚å¿µã€‚æ¯ä¸ªæ–‡ä»¶æˆ–ç›®å½•åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­éƒ½ç”±ä¸€ä¸ª iNode æ¥è¡¨ç¤ºã€‚iNode åŒ…å«äº†å…³äºæ–‡ä»¶ç³»ç»Ÿå¯¹è±¡ï¼ˆå¦‚æ™®é€šæ–‡ä»¶ã€ç›®å½•æˆ–è€…å…¶ä»–ç±»å‹ï¼‰çš„é‡è¦ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š æ–‡ä»¶å¤§å° æ–‡ä»¶æ‰€æœ‰è€…å’Œç»„ æ–‡ä»¶æƒé™ï¼ˆè¯»ã€å†™ã€æ‰§è¡Œï¼‰ æ–‡ä»¶åˆ›å»ºã€è®¿é—®å’Œä¿®æ”¹çš„æ—¶é—´æˆ³ æ–‡ä»¶çš„æ•°æ®å—çš„ä½ç½® iNode å¹¶ä¸åŒ…å«æ–‡ä»¶åæˆ–æ–‡ä»¶çš„è·¯å¾„ï¼Œè¿™äº›ä¿¡æ¯æ˜¯ç”±ç›®å½•æ–‡ä»¶ç»´æŠ¤çš„ã€‚ç›®å½•æ–‡ä»¶åŒ…å«äº†æ–‡ä»¶ååˆ° iNode çš„æ˜ å°„ã€‚è¿™ç§è®¾è®¡å…è®¸åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­å®ç°ä¸€äº›å¤æ‚çš„åŠŸèƒ½ï¼Œå¦‚ç¡¬é“¾æ¥å’Œè½¯é“¾æ¥ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¯ä¸ª iNode éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ iNode ç¼–å·ï¼Œè¿™ä¸ªç¼–å·åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ç”¨æ¥å”¯ä¸€æ ‡è¯†ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•ã€‚ ç›®å½•æ–‡ä»¶åŠæ“ä½œç›®å½•æ–‡ä»¶ï¼šä¸€ä¸ªæ–‡ä»¶ç›®å½•ä¹Ÿè¢«çœ‹åšæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œå³ç›®å½•æ–‡ä»¶ã€‚æ˜¯å¤šä¸ªæ–‡ä»¶çš„ç›®å½•é¡¹æ„æˆçš„ä¸€ç§ç‰¹æ®Šæ–‡ä»¶ã€‚ç›®å½•çš„æ“ä½œåŒ…æ‹¬ æœç´¢ç›®å½• åˆ›å»ºç›®å½• åˆ é™¤ç›®å½• æ˜¾ç¤ºç›®å½• ä¿®æ”¹ç›®å½• ç›®å½•ç»“æ„å•çº§ç›®å½•ç»“æ„æ‰€æœ‰ç”¨æˆ·çš„å…¨éƒ¨æ–‡ä»¶ç›®å½•ä¿å­˜åœ¨ä¸€å¼ ç›®å½•è¡¨ä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶çš„ç›®å½•é¡¹å ç”¨ä¸€ä¸ªè¡¨é¡¹ã€‚Pros ç®€å•ï¼Œæ˜“äºå®ç°ï¼Œèƒ½å®ç°ç›®å½•ç®¡ç†çš„åŸºæœ¬åŠŸèƒ½â€”â€”æŒ‰åå­˜å–ã€‚Cons æŸ¥æ‰¾é€Ÿåº¦æ…¢ï¼Œä¸å…è®¸é‡åï¼Œä¸ä¾¿äºå®ç°æ–‡ä»¶å…±äº« 1234dir_entry_1-&gt;file1dir_entry_1-&gt;file2...dir_entry_n-&gt;filen ä¸¤çº§ç›®å½•ç»“æ„ä¸»æ–‡ä»¶ç›®å½• MFD(Master File Directory)ã€ç”¨æˆ·æ–‡ä»¶ç›®å½• UFD(User File Directory)Pros ä¸€å®šç¨‹åº¦è§£å†³äº†é‡åé—®é¢˜,æé«˜äº†æ–‡ä»¶ç›®å½•æ£€ç´¢æ•ˆç‡,èƒ½å®ç°ç®€å•çš„æ–‡ä»¶å…±äº«Cons ä¸ä¾¿ç”¨æˆ·æ–‡ä»¶çš„é€»è¾‘åˆ†ç±»ï¼›è¿›ä¸€æ­¥è§£å†³é‡åã€å…±äº«ã€æ£€ç´¢æ•ˆç‡ç­‰é—®é¢˜ 12345678910111213141516171819MainFolderâ”‚â”œâ”€â”€ User1â”‚ â”‚â”‚ â”œâ”€â”€ file1â”‚ â”‚â”‚ â””â”€â”€ file2â”‚â”œâ”€â”€ User2â”‚ â”‚â”‚ â”œâ”€â”€ file1â”‚ â”‚â”‚ â””â”€â”€ file2â”‚â””â”€â”€ User3 â”‚ â”œâ”€â”€ file1 â”‚ â””â”€â”€ file2 å±‚æ¬¡ç›®å½•ç»“æ„å¤šçº§ç›®å½•/æ ‘å½¢ç›®å½•ç»“æ„ ç›®å½•ç»“æ„ï¼šå¤šçº§ç›®å½•ç»“æ„åˆç§°ä¸ºæ ‘å‹ç›®å½•ç»“æ„ï¼Œä¸»ç›®å½•åœ¨è¿™é‡Œè¢«ç§°ä¸ºæ ¹ç›®å½•ï¼ŒæŠŠæ•°æ®æ–‡ä»¶ç§°ä¸ºæ ‘å¶ï¼Œå…¶å®ƒçš„ç›®å½•å‡ä½œä¸ºæ ‘çš„ç»“ç‚¹ã€‚ è·¯å¾„åï¼šä»æ ‘çš„æ ¹ï¼ˆå³ä¸»ç›®å½•ï¼‰å¼€å§‹ï¼ŒæŠŠå…¨éƒ¨ç›®å½•æ–‡ä»¶åä¸æ•°æ®æ–‡ä»¶åï¼Œä¾æ¬¡åœ°ç”¨â€œ/â€è¿æ¥èµ·æ¥ï¼Œå³æ„æˆè¯¥æ•°æ®æ–‡ä»¶çš„è·¯å¾„åï¼ˆpath nameï¼‰ã€‚ç³»ç»Ÿä¸­çš„æ¯ä¸€ä¸ªæ–‡ä»¶éƒ½æœ‰æƒŸä¸€çš„è·¯å¾„åã€‚ å½“å‰ç›®å½•ï¼šä¸ºæ¯ä¸ªè¿›ç¨‹è®¾ç½®ä¸€ä¸ªâ€œå½“å‰ç›®å½•â€ï¼Œåˆç§°ä¸ºâ€œå·¥ä½œç›®å½•â€è¿›ç¨‹å¯¹å„æ–‡ä»¶çš„è®¿é—®éƒ½ç›¸å¯¹äºâ€œå½“å‰ç›®å½•â€è€Œè¿›è¡Œã€‚ Pros å±‚æ¬¡ç»“æ„æ¸…æ™°ï¼Œä¾¿äºç®¡ç†å’Œä¿æŠ¤ æœ‰åˆ©äºæ–‡ä»¶åˆ†ç±» è§£å†³é‡åé—®é¢˜ æé«˜æ–‡ä»¶æ£€ç´¢é€Ÿåº¦ èƒ½è¿›è¡Œå­˜å–æƒé™çš„æ§åˆ¶ ConsæŸ¥æ‰¾ä¸€ä¸ªæ–‡ä»¶æŒ‰è·¯å¾„åé€å±‚æ£€æŸ¥ï¼Œç”±äºæ¯ä¸ªæ–‡ä»¶éƒ½æ”¾åœ¨å¤–å­˜ï¼Œå¤šæ¬¡è®¿ç›˜å½±å“é€Ÿåº¦ ç›®å½•æŸ¥è¯¢æŠ€æœ¯â˜… å¯¹ç›®å½•è¿›è¡ŒæŸ¥è¯¢çš„æ–¹å¼æœ‰ä¸¤ç§ï¼šçº¿æ€§æ£€ç´¢æ³•å’Œ Hash æ–¹æ³•: çº¿æ€§æ£€ç´¢æ³•çº¿æ€§æ£€ç´¢æ³•åˆç§°ä¸ºé¡ºåºæ£€ç´¢æ³•ã€‚ åœ¨å•çº§ç›®å½•ä¸­ï¼Œåˆ©ç”¨ç”¨æˆ·æä¾›çš„æ–‡ä»¶åï¼Œç”¨é¡ºåºæŸ¥æ‰¾æ³•ç›´æ¥ä»æ–‡ä»¶ç›®å½•ä¸­æ‰¾åˆ°æŒ‡åæ–‡ä»¶çš„ç›®å½•é¡¹ã€‚ åœ¨æ ‘å‹ç›®å½•ä¸­ï¼Œç”¨æˆ·æä¾›çš„æ–‡ä»¶åæ˜¯ç”±å¤šä¸ªæ–‡ä»¶åˆ†é‡åç»„æˆçš„è·¯å¾„åï¼Œæ­¤æ—¶é¡»å¯¹å¤šçº§ç›®å½•è¿›è¡ŒæŸ¥æ‰¾ã€‚ Hash æ–¹æ³• Hash æ–¹æ³•: å»ºç«‹äº†ä¸€å¼  Hash ç´¢å¼•æ–‡ä»¶ç›®å½•ï¼Œç³»ç»Ÿåˆ©ç”¨ç”¨æˆ·æä¾›çš„æ–‡ä»¶åå¹¶å°†å®ƒå˜æ¢ä¸ºæ–‡ä»¶ç›®å½•çš„ç´¢å¼•å€¼ï¼Œå†åˆ©ç”¨è¯¥ç´¢å¼•å€¼åˆ°ç›®å½•ä¸­å»æŸ¥æ‰¾ã€‚ Hash æ–¹æ³•å°†æ˜¾è‘—åœ°æé«˜æ£€ç´¢é€Ÿåº¦ã€‚ åœ¨æ–‡ä»¶åä¸­ä½¿ç”¨äº†é€šé…ç¬¦â€œ* â€ã€â€œï¼Ÿâ€ç­‰ï¼Œç³»ç»Ÿä¾¿æ— æ³•åˆ©ç”¨ Hash æ³•æ£€ç´¢ç›®å½•ï¼Œå› æ­¤ï¼Œéœ€è¦åˆ©ç”¨çº¿æ€§æŸ¥æ‰¾æ³•æŸ¥æ‰¾ç›®å½•ã€‚ åœ¨è¿›è¡Œæ–‡ä»¶åçš„è½¬æ¢æ—¶ï¼Œä¸åŒçš„æ–‡ä»¶åå¯èƒ½è½¬æ¢ä¸ºç›¸åŒçš„ Hash å€¼ï¼Œå³ Hash å†²çªã€‚ Steps - åœ¨åˆ©ç”¨ Hash å€¼æŸ¥æ‰¾ç›®å½•æ—¶ï¼Œå¦‚æœç›®å½•è¡¨ä¸­ç›¸åº”çš„ç›®å½•é¡¹æ˜¯ç©ºçš„ï¼Œåˆ™è¡¨ç¤ºç³»ç»Ÿä¸­å¹¶æ— æŒ‡å®šæ–‡ä»¶ã€‚ - å¦‚æœç›®å½•é¡¹ä¸­çš„æ–‡ä»¶åä¸æŒ‡å®šæ–‡ä»¶åç›¸åŒ¹é…ï¼Œåˆ™è¡¨ç¤ºè¯¥ç›®å½•é¡¹æ­£æ˜¯æ‰€è¦å¯»æ‰¾çš„æ–‡ä»¶æ‰€å¯¹åº”çš„ç›®å½•é¡¹ï¼Œæ•…è€Œå¯ä»ä¸­æ‰¾åˆ°è¯¥æ–‡ä»¶æ‰€åœ¨çš„ç‰©ç†åœ°å€ã€‚ - å¦‚æœåœ¨ç›®å½•è¡¨çš„ç›¸åº”ç›®å½•é¡¹ä¸­çš„æ–‡ä»¶åä¸æŒ‡å®šæ–‡ä»¶åå¹¶ä¸åŒ¹é…ï¼Œåˆ™è¡¨ç¤ºå‘ç”Ÿäº†â€œHash å†²çªâ€ã€‚ - è§£å†³ Hash å†²çªçš„æ–¹æ³• ï¼šå°†å…¶ Hash å€¼å†åŠ ä¸Šä¸€ä¸ªå¸¸æ•°ï¼ˆè¯¥å¸¸æ•°åº”ä¸ç›®å½•è¡¨çš„é•¿åº¦å€¼äº’è´¨ï¼‰ï¼Œå½¢æˆæ–°çš„ç´¢å¼•å€¼ï¼Œå†è¿”å›åˆ°ç¬¬ä¸€æ­¥é‡æ–°å¼€å§‹æŸ¥æ‰¾ã€‚ ä½¿ç”¨ä¸€ä¸ªå’Œå“ˆå¸Œè¡¨å¤§å°äº’è´¨çš„æ­¥é•¿ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿åœ¨ç»è¿‡è¶³å¤Ÿå¤šçš„æ­¥éª¤åï¼Œèƒ½å¤Ÿæ¢æµ‹åˆ°å“ˆå¸Œè¡¨ä¸­çš„æ¯ä¸€ä¸ªä½ç½®ã€‚è¿™æ˜¯å› ä¸ºä¸¤ä¸ªäº’è´¨çš„æ•°çš„æœ€å°å…¬å€æ•°æ˜¯å®ƒä»¬çš„ä¹˜ç§¯ï¼Œè¿™æ„å‘³ç€é€šè¿‡åœ¨åŸå“ˆå¸Œå€¼ä¸ŠåŠ ä¸Šæ­¥é•¿ï¼Œç»è¿‡å“ˆå¸Œè¡¨å¤§å°çš„æ­¥æ•°åï¼Œæˆ‘ä»¬å¯ä»¥è¦†ç›–åˆ°å“ˆå¸Œè¡¨ä¸­çš„æ‰€æœ‰ä½ç½® æ–‡ä»¶å…±äº«å’Œè®¿é—®æ§åˆ¶æ–‡ä»¶å…±äº«çš„æœ‰æ•ˆæ§åˆ¶æ¶‰åŠä¸¤ä¸ªæ–¹é¢ï¼š åŒæ—¶å­˜å–ï¼ˆSimultaneous Accessï¼‰ å­˜å–æƒé™ï¼ˆAccess Rightsï¼‰ æ§åˆ¶åŒæ—¶å­˜å– å…è®¸å¤šä¸ªç”¨æˆ·åŒæ—¶è¯»æ–‡ä»¶å†…å®¹ï¼Œä½†ä¸å…è®¸åŒæ—¶ä¿®æ”¹ï¼Œæˆ–åŒæ—¶è¯»ä¸”ä¿®æ”¹æ–‡ä»¶å†…å®¹ã€‚ å…±äº«ç”¨æˆ·ä¹‹ä¸€ä¿®æ”¹æ–‡ä»¶å†…å®¹æ—¶ï¼Œå¯ä»¥å°†æ•´ä¸ªæ–‡ä»¶ä½œä¸ºä¸´ç•Œèµ„æºï¼Œé”å®šæ•´ä¸ªæ–‡ä»¶ï¼Œä¸å…è®¸å…¶ä»–å…±äº«ç”¨æˆ·åŒæ—¶è¯»æˆ–å†™æ–‡ä»¶ã€‚ ä¹Ÿå¯ä»¥ä»…ä»…é”å®šæŒ‡å®šçš„ä¸€æ¡è®°å½•ï¼Œå…è®¸å…¶ä»–å…±äº«ç”¨æˆ·è¯»/å†™è¯¥æ–‡ä»¶çš„å…¶å®ƒè®°å½•ã€‚åè€…çš„å¹¶å‘æ€§èƒ½æ›´å¥½ã€‚ æ§åˆ¶å¯¹æ–‡ä»¶çš„åŒæ—¶å­˜å–æ¶‰åŠè¿›ç¨‹çš„åŒæ­¥ä¸äº’æ–¥é—®é¢˜ã€‚ æ§åˆ¶å­˜å–æƒé™æ§åˆ¶æˆæƒç”¨æˆ·ä»¥åˆæ³•çš„æ–¹å¼è®¿é—®æ–‡ä»¶ï¼ŒåŒ…æ‹¬ï¼š æ‰§è¡Œï¼ˆExecutionï¼‰ â€” ç”¨æˆ·å¯ä»¥è£…è½½å¹¶æ‰§è¡Œç¨‹åºï¼Œä½†ä¸å…è®¸æ‹·è´ç¨‹åºå†…å®¹ã€‚ è¯»ï¼ˆReadingï¼‰â€” å…è®¸ç”¨æˆ·è¯»æ–‡ä»¶å†…å®¹ï¼ŒåŒ…æ‹¬æ‹·è´å’Œæ‰§è¡Œæ–‡ä»¶ã€‚æŸäº›ç³»ç»Ÿä¸¥æ ¼åœ°å°†æµè§ˆæ–‡ä»¶å†…å®¹å’Œæ‹·è´æƒé™åˆ†å¼€ï¼Œå¯ä»¥æ§åˆ¶æ–‡ä»¶åªèƒ½è¢«æµè§ˆï¼ˆæ˜¾ç¤ºï¼‰ï¼Œä¸èƒ½è¢«æ‹·è´ã€‚ è¿½åŠ ï¼ˆAppendingï¼‰â€” å…è®¸ç”¨æˆ·å‘æ–‡ä»¶æ·»åŠ æ•°æ®ï¼Œé€šå¸¸åªèƒ½å°†æ•°æ®æ·»åŠ åˆ°æ–‡ä»¶å°¾ã€‚ä½†æ˜¯ï¼Œä¸èƒ½ä¿®æ”¹æˆ–åˆ é™¤æ–‡ä»¶å†…å®¹ã€‚ä¾‹å¦‚ï¼Œè¶…å¸‚æ”¶é“¶å‘˜åªèƒ½å°†æ–°ç»“å¸çš„æ•°æ®æ·»åŠ åˆ°æ–‡ä»¶ä¸­ï¼Œä¸å…è®¸å…¶ä¿®æ”¹æˆ–åˆ é™¤å·²æœ‰çš„æ•°æ®ã€‚ æ›´æ–°ï¼ˆUpdatingï¼‰â€” å…è®¸ç”¨æˆ·ä¿®æ”¹ã€åˆ é™¤ã€å¢åŠ æ–‡ä»¶å†…å®¹ã€‚åŒ…æ‹¬åˆ›å»ºæ–‡ä»¶ã€é‡å†™æ–‡ä»¶çš„å…¨éƒ¨æˆ–éƒ¨åˆ†å†…å®¹ã€ç§»åŠ¨æ–‡ä»¶çš„å…¨éƒ¨æˆ–éƒ¨åˆ†æ•°æ®ç­‰æ“ä½œã€‚ æ›´æ”¹æƒé™ (Changing protection) â€” ä¸€èˆ¬åªæœ‰æ–‡ä»¶ä¸»æ‰èƒ½æ›´æ”¹å…±äº«è¯¥æ–‡ä»¶çš„å…¶ä»–ç”¨æˆ·å¯¹è¯¥æ–‡ä»¶çš„å­˜å–æƒé™ã€‚æœ‰çš„ç³»ç»Ÿå…è®¸æ–‡ä»¶ä¸»å°†æ›´æ”¹æ–‡ä»¶å­˜å–æƒé™èµ‹äºˆå…¶ä»–æŸä¸ªç”¨æˆ·ï¼Œä½†å¿…é¡»é™åˆ¶æˆæƒç”¨æˆ·æ›´æ”¹çš„æƒé™èŒƒå›´ã€‚ åˆ é™¤ (Deletion) å…è®¸ç”¨æˆ·åˆ é™¤æ–‡ä»¶ æ–‡ä»¶å…±äº«çš„å®ç°åœ¨æ ‘å‹ç»“æ„çš„ç›®å½•ä¸­ï¼Œå½“æœ‰ä¸¤ä¸ª(æˆ–å¤šä¸ª)ç”¨æˆ·è¦å…±äº«ä¸€ä¸ªå­ç›®å½•æˆ–æ–‡ä»¶æ—¶ï¼Œå¿…é¡»å°†å…±äº«æ–‡ä»¶æˆ–å­ç›®å½•é“¾æ¥åˆ°ä¸¤ä¸ª(æˆ–å¤šä¸ª)ç”¨æˆ·çš„ç›®å½•ä¸­ï¼Œæ‰èƒ½æ–¹ä¾¿åœ°æ‰¾åˆ°è¯¥æ–‡ä»¶ã€‚æ­¤æ—¶è¯¥æ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•ç»“æ„å·²ä¸å†æ˜¯æ ‘å‹ç»“æ„ï¼Œè€Œæ˜¯ä¸ªæœ‰å‘éå¾ªç¯å›¾ã€‚ å®ç°æ–‡ä»¶å…±äº«çš„å®è´¨å°±æ˜¯å¯ä»¥ä»ä¸åŒåœ°æ–¹æ‰“å¼€åŒä¸€ä¸ªæ–‡ä»¶æ‰“å¼€æ–‡ä»¶çš„é¦–è¦æ­¥éª¤å°±æ˜¯æ‰¾åˆ°æ–‡ä»¶çš„ç›®å½•é¡¹ï¼Œè¯»å–æ–‡ä»¶åœ¨å¤–å­˜çš„èµ·å§‹åœ°å€ã€‚å®ç°æ–‡ä»¶å…±äº«çš„æ–¹å¼ï¼š åˆ©ç”¨é“¾æ¥ç›®å½•é¡¹å®ç°æ³• åˆ©ç”¨ç´¢å¼•èŠ‚ç‚¹å®ç°æ³• åˆ©ç”¨ç¬¦å·é“¾å®ç°æ³•ç­‰ é“¾æ¥ç›®å½•é¡¹å®ç°æ–‡ä»¶å…±äº«æ–‡ä»¶ç›®å½•é¡¹ä¸­è®¾ç½®ä¸€ä¸ªé“¾æ¥æŒ‡é’ˆï¼Œç”¨äºæŒ‡å‘å…±äº«æ–‡ä»¶çš„ç›®å½•é¡¹ã€‚ è®¿é—®æ–‡ä»¶æ—¶ï¼Œæ ¹æ®é“¾æ¥æŒ‡é’ˆå†…å®¹æ‰¾åˆ°å…±äº«æ–‡ä»¶çš„ç›®å½•é¡¹ï¼Œè¯»å–è¯¥ç›®å½•é¡¹ä¸­æ–‡ä»¶èµ·å§‹ä½ç½®ç­‰ä¿¡æ¯ï¼Œæ“ä½œè¯¥æ–‡ä»¶ã€‚ æ¯å½“æœ‰ç”¨æˆ·ï¼ˆè¿›ç¨‹ï¼‰å…±äº«æ–‡ä»¶æ—¶ï¼Œå…±äº«æ–‡ä»¶ç›®å½•é¡¹ä¸­çš„â€œå…±äº«è®¡æ•°â€åŠ  1ï¼›å½“ç”¨æˆ·ä¸å†å…±äº«è¯¥æ–‡ä»¶ï¼Œæ’¤æ¶ˆé“¾æ¥æŒ‡é’ˆæ—¶ï¼Œâ€œå…±äº«è®¡æ•°â€å‡ 1ã€‚ åªæœ‰å½“å…±äº«æ–‡ä»¶ç”¨æˆ·æ•°ä¸º 1 æ—¶ï¼Œæ‰èƒ½åˆ é™¤å…±äº«æ–‡ä»¶ã€‚ 12345678910111213/rootâ”‚â”œâ”€â”€ /dir1â”‚ â”‚â”‚ â”œâ”€â”€ file1 (é“¾æ¥æŒ‡é’ˆ-&gt; /root/dirShared/file)â”‚â”œâ”€â”€ /dir2â”‚ â”‚â”‚ â”œâ”€â”€ file2 (é“¾æ¥æŒ‡é’ˆ-&gt; /root/dirShared/file)â”‚â””â”€â”€ /dirShared â”‚ â””â”€â”€ file ç´¢å¼•èŠ‚ç‚¹å®ç°æ–‡ä»¶å…±äº« ä¹Ÿç§°ä¸ºã€ç¡¬è¿æ¥ã€‘Hard Linkç¡¬è¿æ¥æŒ‡é€šè¿‡ç´¢å¼•èŠ‚ç‚¹æ¥è¿›è¡Œè¿æ¥ã€‚åœ¨ Linux çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œä¿å­˜åœ¨ç£ç›˜åˆ†åŒºä¸­çš„æ–‡ä»¶ä¸ç®¡æ˜¯ä»€ä¹ˆç±»å‹éƒ½ç»™å®ƒåˆ†é…ä¸€ä¸ªç¼–å·ï¼Œç§°ä¸ºç´¢å¼•èŠ‚ç‚¹å·(Inode Index)ã€‚åœ¨ Linux ä¸­ï¼Œå¤šä¸ªæ–‡ä»¶åæŒ‡å‘åŒä¸€ç´¢å¼•èŠ‚ç‚¹æ˜¯å­˜åœ¨çš„ã€‚ä¸€èˆ¬è¿™ç§è¿æ¥å°±æ˜¯ç¡¬è¿æ¥ã€‚ç¡¬è¿æ¥çš„ä½œç”¨æ˜¯å…è®¸ä¸€ä¸ªæ–‡ä»¶æ‹¥æœ‰å¤šä¸ªæœ‰æ•ˆè·¯å¾„åï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥å»ºç«‹ç¡¬è¿æ¥åˆ°é‡è¦æ–‡ä»¶ï¼Œä»¥é˜²æ­¢â€œè¯¯åˆ â€çš„åŠŸèƒ½ã€‚å…¶åŸå› å¦‚ä¸Šæ‰€è¿°ï¼Œå› ä¸ºå¯¹åº”è¯¥ç›®å½•çš„ç´¢å¼•èŠ‚ç‚¹æœ‰ä¸€ä¸ªä»¥ä¸Šçš„è¿æ¥ã€‚åªåˆ é™¤ä¸€ä¸ªè¿æ¥å¹¶ä¸å½±å“ç´¢å¼•èŠ‚ç‚¹æœ¬èº«å’Œå…¶å®ƒçš„è¿æ¥ï¼Œåªæœ‰å½“æœ€åä¸€ä¸ªè¿æ¥è¢«åˆ é™¤åï¼Œæ–‡ä»¶çš„æ•°æ®å—åŠç›®å½•çš„è¿æ¥æ‰ä¼šè¢«é‡Šæ”¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–‡ä»¶çœŸæ­£åˆ é™¤çš„æ¡ä»¶æ˜¯ä¸ä¹‹ç›¸å…³çš„æ‰€æœ‰ç¡¬è¿æ¥æ–‡ä»¶å‡è¢«åˆ é™¤ã€‚ [[Ch7-1LinuxUnix#ç´¢å¼•èŠ‚ç‚¹è¡¨â€”â€”inode ç»“æ„]] æ–‡ä»¶çš„ç‰©ç†åœ°å€åŠå…¶å®ƒçš„æ–‡ä»¶å±æ€§ç­‰ä¿¡æ¯ï¼Œä¸å†æ˜¯æ”¾åœ¨ç›®å½•é¡¹ä¸­ï¼Œè€Œæ˜¯æ”¾åœ¨ç´¢å¼•ç»“ç‚¹ä¸­ã€‚åœ¨æ–‡ä»¶ç›®å½•ä¸­åªè®¾ç½®æ–‡ä»¶ååŠæŒ‡å‘ç›¸åº”ç´¢å¼•ç»“ç‚¹çš„æŒ‡é’ˆã€‚ ç”±ä»»ä½•ç”¨æˆ·å¯¹æ–‡ä»¶è¿›è¡Œ Append æ“ä½œæˆ–ä¿®æ”¹ï¼Œæ‰€å¼•èµ·çš„ç›¸åº”ç»“ç‚¹å†…å®¹çš„æ”¹å˜(ä¾‹å¦‚ï¼Œå¢åŠ äº†æ–°çš„ç›˜å—å·å’Œæ–‡ä»¶é•¿åº¦ç­‰)ï¼Œéƒ½æ˜¯å…¶ä»–ç”¨æˆ·å¯è§çš„ï¼Œä»è€Œä¹Ÿå°±èƒ½æä¾›ç»™å…¶ä»–ç”¨æˆ·æ¥å…±äº«ã€‚ UNIX æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç›®å½•é¡¹ä¸­åªåŒ…å«æ–‡ä»¶åå’ŒæŒ‡å‘ç´¢å¼•èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œæ–‡ä»¶çš„ç‰©ç†åœ°å€åŠå…¶å®ƒè¯´æ˜ä¿¡æ¯ä¿å­˜åœ¨ç´¢å¼•èŠ‚ç‚¹ iNode ä¸­ã€‚ å¯ä»¥é€šè¿‡å…±äº«æ–‡ä»¶ç´¢å¼•èŠ‚ç‚¹ iNode æ¥å…±äº«æ–‡ä»¶ï¼Œå³å½“ç”¨æˆ·éœ€è¦å…±äº«æ–‡ä»¶æ—¶ï¼Œåœ¨è‡ªå·±çš„æ–‡ä»¶ç›®å½•ä¸­æ–°å»ºä¸€ä¸ªç›®å½•é¡¹ï¼Œä¸ºå…±äº«æ–‡ä»¶å‘½å(ä¹Ÿå¯ç”¨åŸå)ï¼Œå¹¶å°†ç´¢å¼•èŠ‚ç‚¹æŒ‡é’ˆæŒ‡å‘å…±äº«æ–‡ä»¶çš„ç´¢å¼•èŠ‚ç‚¹ã€‚ 1234567891011121314151617181920212223/rootâ”‚â”œâ”€â”€ /dir1â”‚ â”‚â”‚ â”œâ”€â”€ file1 (iNodeæŒ‡é’ˆ-&gt; iNode#123)â”‚ â”‚â”‚ â””â”€â”€ file3 (iNodeæŒ‡é’ˆ-&gt; iNode#124)â”‚â”œâ”€â”€ /dir2â”‚ â”‚â”‚ â”œâ”€â”€ file2 (iNodeæŒ‡é’ˆ-&gt; iNode#123)â”‚ â”‚â”‚ â””â”€â”€ file4 (iNodeæŒ‡é’ˆ-&gt; iNode#125)â”‚â””â”€â”€ iNode Table â”‚ â”œâ”€â”€ iNode#123 (ç‰©ç†åœ°å€, æ–‡ä»¶å±æ€§, å…±äº«è®¡æ•°: 2) â”‚ â”œâ”€â”€ iNode#124 (ç‰©ç†åœ°å€, æ–‡ä»¶å±æ€§, å…±äº«è®¡æ•°: 1) â”‚ â”œâ”€â”€ iNode#125 (ç‰©ç†åœ°å€, æ–‡ä»¶å±æ€§, å…±äº«è®¡æ•°: 1) â”‚ â””â”€â”€ ... åœ¨ç´¢å¼•ç»“ç‚¹ä¸­è¿˜åº”æœ‰ä¸€ä¸ªé“¾æ¥è®¡æ•° countï¼Œç”¨äºè¡¨ç¤ºé“¾æ¥åˆ°æœ¬ç´¢å¼•ç»“ç‚¹(äº¦å³æ–‡ä»¶)ä¸Šçš„ç”¨æˆ·ç›®å½•é¡¹çš„æ•°ç›® å½“ç”¨æˆ· C åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶æ—¶ï¼Œä»–ä¾¿æ˜¯è¯¥æ–‡ä»¶çš„æ‰€æœ‰è€…ï¼Œæ­¤æ—¶å°† count ç½® 1ã€‚ å½“æœ‰ç”¨æˆ· B è¦å…±äº«æ­¤æ–‡ä»¶æ—¶ï¼Œåœ¨ç”¨æˆ· B çš„ç›®å½•ä¸­å¢åŠ ä¸€ç›®å½•é¡¹ï¼Œå¹¶è®¾ç½®ä¸€æŒ‡é’ˆæŒ‡å‘è¯¥æ–‡ä»¶çš„ç´¢å¼•ç»“ç‚¹ï¼Œæ­¤æ—¶ï¼Œæ–‡ä»¶ä¸»ä»ç„¶æ˜¯ Cï¼Œcount=2ã€‚ å¦‚æœç”¨æˆ· C ä¸å†éœ€è¦æ­¤æ–‡ä»¶ï¼Œæ˜¯å¦èƒ½å°†æ­¤æ–‡ä»¶åˆ é™¤å‘¢ï¼Ÿåªèƒ½åˆ é™¤ç¡¬é“¾æ¥ï¼Œä½†æ˜¯ä¸èƒ½åˆ é™¤é‡Œé¢çš„å®é™…å†…å®¹ï¼Œå½“æ‰€æœ‰ç¡¬é“¾æ¥éƒ½åˆ é™¤åï¼Œæ‰å¯ä»¥åˆ é™¤å…¶å†…å®¹å’Œç´¢å¼•èŠ‚ç‚¹ã€‚ ç¬¦å·é“¾å®ç°æ–‡ä»¶å…±äº«ä¸ºä½¿ B èƒ½å…±äº« C çš„ä¸€ä¸ªæ–‡ä»¶ Fï¼Œå¯ä»¥ç”±ç³»ç»Ÿåˆ›å»ºä¸€ä¸ª LINK ç±»å‹çš„æ–°æ–‡ä»¶ï¼Œä¹Ÿå–åä¸º F å¹¶å°† F å†™å…¥ B çš„ç›®å½•ä¸­ï¼Œä»¥å®ç° B çš„ç›®å½•ä¸æ–‡ä»¶ F çš„é“¾æ¥ï¼›åœ¨æ–°æ–‡ä»¶ä¸­åªåŒ…å«è¢«åˆ›æ–‡ä»¶ F çš„è·¯å¾„åã€‚è¿™æ ·çš„é“¾æ¥æ–¹æ³•è¢«ç§°ä¸ºç¬¦å·é“¾æ¥.æ–°æ–‡ä»¶ä¸­çš„è·¯å¾„åï¼Œåˆ™åªè¢«çœ‹ä½œæ˜¯ç¬¦å·é“¾ã€‚å½“ B è¦è®¿é—®è¢«é“¾æ¥çš„æ–‡ä»¶ F ä¸”æ­£è¦è¯» LINK ç±»æ–°æ–‡ä»¶æ—¶ï¼Œå°†è¢« OS æˆªè·ï¼ŒOS æ ¹æ®æ–°æ–‡ä»¶ä¸­çš„è·¯å¾„åå»è¯»è¯¥æ–‡ä»¶ï¼Œäºæ˜¯å°±å®ç°äº†ç”¨æˆ· B å¯¹æ–‡ä»¶ F çš„å…±äº«ã€‚ åœ¨åˆ©ç”¨ç¬¦å·é“¾æ–¹å¼å®ç°æ–‡ä»¶å…±äº«æ—¶ï¼Œåªæœ‰æ–‡ä»¶ä¸»æ‰æ‹¥æœ‰æŒ‡å‘å…¶ç´¢å¼•ç»“ç‚¹çš„æŒ‡é’ˆ,è€Œå…±äº«è¯¥æ–‡ä»¶çš„å…¶å®ƒç”¨æˆ·ï¼Œåˆ™åªæœ‰è¯¥æ–‡ä»¶çš„è·¯å¾„åï¼Œå¹¶ä¸æ‹¥æœ‰æŒ‡å‘å…¶ç´¢å¼•ç»“ç‚¹çš„æŒ‡é’ˆã€‚ Pros èƒ½è¿æ¥ä»»ä½•æœºå™¨ä¸Šçš„æ–‡ä»¶ã€‚æ¯å¢åŠ ä¸€ä¸ªè¿æ¥ï¼Œå°±å¢åŠ ä¸€ä¸ªæ–‡ä»¶åï¼Œå„ç”¨æˆ·ä½¿ç”¨è‡ªå·±çš„åå­—å»å…±äº«æ–‡ä»¶ã€‚Cons å¤‡ä»½å¯èƒ½ä¼šäº§ç”Ÿå¤šä¸ªæ‹·è´ã€‚ ç¬¦å·è¿æ¥ï¼ˆSymbolic Linkï¼‰ï¼Œä¹Ÿå«è½¯è¿æ¥ã€‚è½¯é“¾æ¥æ–‡ä»¶æœ‰ç±»ä¼¼äº Windows çš„å¿«æ·æ–¹å¼ã€‚å®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ã€‚åœ¨ç¬¦å·è¿æ¥ä¸­ï¼Œæ–‡ä»¶å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«çš„æœ‰å¦ä¸€æ–‡ä»¶çš„ä½ç½®ä¿¡æ¯ã€‚ 12345678910îŠ… touch fileîŠ… ln file hard_link_f1 # ç¡¬è¿æ¥îŠ… ln -s file sym_link_f1 # è½¯è¿æ¥îŠ… ls -li# è¾“å‡ºå¦‚ä¸‹ï¼Œç¡¬é“¾æ¥çš„inodeç›¸åŒï¼Œcount=2ï¼›è½¯è¿æ¥çš„inodeä¸åŒï¼Œcount=1total 0122779 -rw-r--r-- 2 gjx gjx 0 May 22 15:03 file122779 -rw-r--r-- 2 gjx gjx 0 May 22 15:03 hard_link_f1122781 lrwxrwxrwx 1 gjx gjx 4 May 22 15:04 sym_link_f1 -&gt; file åˆ é™¤ç¬¦å·è¿æ¥ sym_linkf1,å¯¹ file,hard_link_f1 æ— å½±å“ï¼› åˆ é™¤ç¡¬è¿æ¥ hard_link_f1ï¼Œå¯¹ file,sym_link_f1 ä¹Ÿæ— å½±å“ï¼› åˆ é™¤åŸæ–‡ä»¶ fileï¼Œå¯¹ç¡¬è¿æ¥ hard_link_f1 æ²¡æœ‰å½±å“ï¼Œå¯¼è‡´ç¬¦å·è¿æ¥ sym_link_f1 å¤±æ•ˆï¼› åŒæ—¶åˆ é™¤åŸæ–‡ä»¶ file,ç¡¬è¿æ¥ hard_link_f1ï¼Œæ•´ä¸ªæ–‡ä»¶ä¼šçœŸæ­£çš„è¢«åˆ é™¤ã€‚ URL å®ç°æ–‡ä»¶å…±äº«ç»Ÿä¸€èµ„æºå®šä½å™¨ URL (Uniform Resource Locator)æ˜¯ Internet ä¸Šç”¨æ¥é“¾æ¥è¶…æ–‡æœ¬æ–‡ä»¶çš„ä¸€ç§æ–¹æ³•ã€‚å®ƒå¯ä»¥é“¾æ¥åŒä¸€å°è®¡ç®—æœºä¸­çš„æœ¬åœ°æ–‡ä»¶ï¼Œä¹Ÿå¯é“¾æ¥ Internet ä¸­ä»»ä½•ä¸»æœºä¸Šçš„è¿œç¨‹æ–‡ä»¶ã€‚ä¸€ä¸ªå®Œæ•´çš„ URL åŒ…æ‹¬è®¿é—®æ–‡ä»¶çš„æ–¹æ³•ï¼ˆåè®®ï¼‰ã€æ–‡ä»¶æ‰€åœ¨çš„ä¸»æœºåŸŸåã€ç›®å½•è·¯å¾„åå’Œæ–‡ä»¶åå‡ éƒ¨ä»½ã€‚ä¾‹å¦‚ 12file:///C:/Users/YourName/Documents/file.txthttp://www.uestc.edu.cn/templates/index2k3/index.html æ–‡ä»¶ä¿æŠ¤ä¸åŒå¯¹è±¡å…è®¸å®æ–½çš„æ“ä½œå„ä¸ç›¸åŒã€‚ä¾‹å¦‚ï¼Œæ–‡ä»¶å¯æ–½åŠ è¯»ã€å†™ã€æ‰§è¡Œç­‰æ“ä½œï¼Œä¿¡å·é‡åªèƒ½æ–½åŠ  wait()å’Œsignal()æ“ä½œã€‚å› æ­¤ï¼Œç³»ç»Ÿä¸ºæ‰€æœ‰å¯¹è±¡è®¾ç½®ä¸€ä¸ªå…è®¸è¿›ç¨‹å®æ–½æ“ä½œçš„æ“ä½œé›†ï¼Œä»»ä½•å¯¹å¯¹è±¡çš„æ“ä½œå¿…é¡»ç¬¦åˆæ“ä½œé›†ä¸­çš„è§„å®šï¼Œé˜²æ­¢æœªæˆæƒè¿›ç¨‹è®¿é—®å¯¹è±¡ã€‚ Refã€æ“ä½œç³»ç»Ÿã€‘æˆç»„é“¾æ¥æ³•è¯¦è§£","link":"/UESTC/OS/Ch6-1FileSystem/"},{"title":"Unix&#x2F;Linux OS Introduction","text":"Linux æ“ä½œç³»ç»Ÿçš„ç®€ä»‹ä»€ä¹ˆæ˜¯ Linux æ“ä½œç³»ç»ŸLinux æ˜¯ä¸€å¥—å…è´¹ä½¿ç”¨å’Œè‡ªç”±ä¼ æ’­çš„ Unix Like æ“ä½œç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ªåŸºäº POSIX å’Œ UNIX çš„å¤šç”¨æˆ·ã€å¤šä»»åŠ¡ã€æ”¯æŒå¤šçº¿ç¨‹å’Œå¤š CPU çš„æ“ä½œç³»ç»Ÿã€‚Linux ç»§æ‰¿äº† Unix ä»¥ç½‘ç»œä¸ºæ ¸å¿ƒçš„è®¾è®¡æ€æƒ³ï¼Œæ˜¯ä¸€ä¸ªæ€§èƒ½ç¨³å®šçš„å¤šç”¨æˆ·ç½‘ç»œæ“ä½œç³»ç»Ÿã€‚ Linux æ“ä½œç³»ç»Ÿç”± Linux å†…æ ¸ï¼ŒLinuxShellï¼ŒLinux æ–‡ä»¶ç³»ç»Ÿï¼ŒLinux åº”ç”¨ç¨‹åºå››å¤§ä¸»è¦éƒ¨åˆ†ç»„æˆã€‚ å†…æ ¸æ˜¯æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒï¼Œæä¾›äº†æ“ä½œç³»ç»Ÿæœ€åŸºæœ¬çš„åŠŸèƒ½ Shell æ˜¯ç³»ç»Ÿçš„ç”¨æˆ·ç•Œé¢ï¼Œæä¾›äº†ç”¨æˆ·ä¸å†…æ ¸è¿›è¡Œäº¤äº’æ“ä½œçš„ä¸€ç§æ¥å£ æ–‡ä»¶ç³»ç»Ÿæ˜¯æ–‡ä»¶å­˜æ”¾åœ¨ç£ç›˜ç­‰å­˜å‚¨è®¾å¤‡ä¸Šçš„ç»„ç»‡æ–¹æ³• æ ‡å‡†çš„ Linux ç³»ç»Ÿä¸€èˆ¬éƒ½æœ‰ä¸€å¥—ç§°ä¸ºåº”ç”¨ç¨‹åºçš„ç¨‹åºé›†ï¼Œå³ Linux åº”ç”¨ç¨‹åº Linux æ“ä½œç³»ç»Ÿçš„ç»„æˆKernelå†…æ ¸æ˜¯æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒï¼Œæä¾›äº†æ“ä½œç³»ç»Ÿæœ€åŸºæœ¬çš„åŠŸèƒ½ï¼Œå¦‚æ”¯æŒè™šæ‹Ÿå†…å­˜ã€å¤šä»»åŠ¡ã€å…±äº«åº“ã€éœ€æ±‚åŠ è½½ã€å¯æ‰§è¡Œç¨‹åºå’Œ TCP/IP ç½‘ç»œç­‰ 123uname â€“a æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬å·Linux Efterklang 5.15.146.1-microsoft-standard-WSL2 #1 SMP Thu Jan 11 04:09:03 UTC 2024 x86_64 x86_64 x86_64 GNU/Linuxls â€“l /boot æŸ¥çœ‹å†…æ ¸æ–‡ä»¶ ShellShell æ˜¯ç³»ç»Ÿçš„ç”¨æˆ·ç•Œé¢ï¼Œæä¾›äº†ç”¨æˆ·ä¸å†…æ ¸è¿›è¡Œäº¤äº’æ“ä½œçš„ä¸€ç§æ¥å£ã€‚å®ƒæ¥æ”¶ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤å¹¶æŠŠå®ƒé€å…¥å†…æ ¸å»æ‰§è¡Œã€‚å®é™…ä¸Š Shell æ˜¯ä¸€ä¸ªå‘½ä»¤è§£é‡Šå™¨(command-language interpreter)ï¼Œå®ƒè§£é‡Šç”±ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤å¹¶ä¸”æŠŠå®ƒä»¬é€åˆ°å†…æ ¸ã€‚Linux ç³»ç»Ÿçš„ Shell æ˜¯å‘½ä»¤è¯­è¨€ã€å‘½ä»¤è§£é‡Šç¨‹åºåŠç¨‹åºè®¾è®¡è¯­è¨€çš„ç»Ÿç§°ã€‚ Shell æ˜¯ä¸€ä¸ªå‘½ä»¤è¯­è¨€è§£é‡Šå™¨å®ƒæ‹¥æœ‰è‡ªå·±å†…å»ºçš„ Shell å‘½ä»¤é›†ï¼ŒShell ä¹Ÿèƒ½è¢«ç³»ç»Ÿä¸­å…¶ä»–åº”ç”¨ç¨‹åºæ‰€è°ƒç”¨ã€‚ç”¨æˆ·åœ¨æç¤ºç¬¦ä¸‹è¾“å…¥çš„å‘½ä»¤éƒ½ç”± Shell å…ˆè§£é‡Šç„¶åä¼ ç»™ Linux æ ¸å¿ƒã€‚ä½¿ç”¨æˆ·ä¸å¿…å…³å¿ƒä¸€ä¸ªå‘½ä»¤æ˜¯å»ºç«‹åœ¨ Shell å†…éƒ¨è¿˜æ˜¯ä¸€ä¸ªå•ç‹¬çš„ç¨‹åºã€‚ Shell æ˜¯ä¸€ä¸ªè§£é‡Šå‹çš„ç¨‹åºè®¾è®¡è¯­è¨€ã€‚shell ç¨‹åºè®¾è®¡è¯­è¨€æ”¯æŒç»å¤§å¤šæ•°åœ¨é«˜çº§è¯­è¨€ä¸­èƒ½è§åˆ°çš„ç¨‹åºå…ƒç´ ï¼Œå¦‚å‡½æ•°ã€å˜é‡ã€æ•°ç»„å’Œç¨‹åºæ§åˆ¶ç»“æ„ã€‚shell ç¼–ç¨‹è¯­è¨€ç®€å•æ˜“å­¦ï¼Œä»»ä½•åœ¨æç¤ºç¬¦ä¸­èƒ½é”®å…¥çš„å‘½ä»¤éƒ½èƒ½æ”¾åˆ°ä¸€ä¸ªå¯æ‰§è¡Œçš„ Shell ç¨‹åºä¸­ã€‚ æ‰§è¡Œè¿‡ç¨‹shell é¦–å…ˆæ£€æŸ¥å‘½ä»¤æ˜¯å¦æ˜¯å†…éƒ¨å‘½ä»¤ï¼Œä¸æ˜¯çš„è¯å†æ£€æŸ¥æ˜¯å¦æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œè¿™é‡Œçš„åº”ç”¨ç¨‹åºå¯ä»¥æ˜¯ Linux æœ¬èº«çš„å®ç”¨ç¨‹åºï¼Œæ¯”å¦‚ ls rmï¼Œç„¶å shell è¯•ç€åœ¨æœç´¢è·¯å¾„($PATH)é‡Œå¯»æ‰¾è¿™äº›åº”ç”¨ç¨‹åºã€‚æœç´¢è·¯å¾„æ˜¯ä¸€ä¸ªèƒ½æ‰¾åˆ°å¯æ‰§è¡Œç¨‹åºçš„ç›®å½•åˆ—è¡¨ã€‚å¦‚æœä½ é”®å…¥çš„å‘½ä»¤ä¸æ˜¯ä¸€ä¸ªå†…éƒ¨å‘½ä»¤å¹¶ä¸”åœ¨è·¯å¾„é‡Œæ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå°†ä¼šæ˜¾ç¤ºä¸€æ¡é”™è¯¯ä¿¡æ¯ã€‚è€Œå¦‚æœå‘½ä»¤è¢«æˆåŠŸçš„æ‰¾åˆ°çš„è¯ï¼Œshell çš„å†…éƒ¨å‘½ä»¤æˆ–åº”ç”¨ç¨‹åºå°†è¢«åˆ†è§£ä¸ºç³»ç»Ÿè°ƒç”¨å¹¶ä¼ ç»™ Linux å†…æ ¸ã€‚ File SystemLinux æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶æ˜¯æ•°æ®çš„é›†åˆï¼Œæ–‡ä»¶ç³»ç»Ÿä¸ä»…åŒ…å«ç€æ–‡ä»¶ä¸­çš„æ•°æ®è€Œä¸”è¿˜æœ‰æ–‡ä»¶ç³»ç»Ÿçš„ç»“æ„ï¼Œæ‰€æœ‰ Linux ç”¨æˆ·å’Œç¨‹åºçœ‹åˆ°çš„æ–‡ä»¶ã€ç›®å½•ã€è½¯è¿æ¥åŠæ–‡ä»¶ä¿æŠ¤ä¿¡æ¯ç­‰éƒ½å­˜å‚¨åœ¨å…¶ä¸­ã€‚æ¯ä¸ªå®é™…æ–‡ä»¶ç³»ç»Ÿéƒ½æ˜¯ä»æ“ä½œç³»ç»Ÿå’Œç³»ç»ŸæœåŠ¡ä¸­åˆ†ç¦»å‡ºæ¥çš„ï¼Œå®ƒä»¬ä¹‹é—´é€šè¿‡ä¸€ä¸ªæ¥å£å±‚â€”â€”è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼ˆVFSï¼‰é€šä¿¡ã€‚æ–‡ä»¶ç±»å‹ä¸»è¦åŒ…æ‹¬ï¼š æ™®é€šæ–‡ä»¶ï¼ˆregularfileï¼‰ ç›®å½•æ–‡ä»¶ï¼ˆdirectoryï¼‰ è¿æ¥æ–‡ä»¶ï¼ˆlinkï¼‰ è®¾å¤‡ä¸è®¾å¤‡æ–‡ä»¶ï¼ˆdeviceï¼‰ å¥—æ¥å­—ï¼ˆsocketsï¼‰ ç®¡é“ï¼ˆFIFO,pipeï¼‰ Linux æ“ä½œç³»ç»Ÿçš„åŠŸèƒ½ç‰¹å¾Linux æ“ä½œç³»ç»ŸåŠŸèƒ½å¼ºå¤§ï¼Œä¸å…¶ä»–æ“ä½œç³»ç»Ÿç›¸æ¯”ï¼Œå…¶å…·æœ‰ä¸‹è¿°ä¸»è¦çš„åŠŸèƒ½ç‰¹å¾ã€‚ å¼€æ”¾æ€§ï¼šéµå¾ªå¼€æ”¾ç³»ç»Ÿäº’è¿(OSI)å›½é™…æ ‡å‡†ã€‚ å¤šç”¨æˆ·ï¼šLinux æ”¯æŒå¤šç”¨æˆ·ï¼Œæ“ä½œç³»ç»Ÿèµ„æºå¯ä»¥è¢«ä¸åŒç”¨æˆ·ä½¿ç”¨ï¼Œæ¯ä¸ªç”¨æˆ·å¯¹è‡ªå·±çš„èµ„æº(ä¾‹å¦‚ï¼šæ–‡ä»¶ã€è®¾å¤‡)å…·æœ‰ç‰¹å®šçš„æƒé™ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æ¯ä¸ªç”¨æˆ·ä¹‹é—´äº’ä¸å½±å“ã€‚ å¤šä»»åŠ¡ï¼šLinux å¯ä»¥ä½¿å¤šä¸ªç¨‹åºåŒæ—¶å¹¶ç‹¬ç«‹åœ°è¿è¡Œã€‚**è®¡ç®—æœºåŒæ—¶æ‰§è¡Œå¤šä¸ªç¨‹åºï¼Œè€ŒåŒæ—¶å„ä¸ªç¨‹åºçš„è¿è¡Œäº’ç›¸ç‹¬ç«‹ã€‚ è‰¯å¥½çš„ç”¨æˆ·ç•Œé¢ï¼šLinux å‘ç”¨æˆ·æä¾›äº†ä¸¤ç§ç•Œé¢ï¼šå­—ç¬¦ç•Œé¢å’Œå›¾å½¢ç•Œé¢ã€‚åœ¨å­—ç¬¦ç•Œé¢ç”¨æˆ·å¯ä»¥é€šè¿‡é”®ç›˜è¾“å…¥ç›¸åº”çš„æŒ‡ä»¤æ¥è¿›è¡Œæ“ä½œã€‚Linux è¿˜ä¸ºç”¨æˆ·æä¾›äº†å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼Œå®ƒç±»ä¼¼äº Windows å›¾å½¢ç•Œé¢çš„ X-Window ç³»ç»Ÿã€‚å®ƒåˆ©ç”¨é¼ æ ‡ã€èœå•ã€çª—å£ã€æ»šåŠ¨æ¡ç­‰è®¾æ–½ï¼Œç»™ç”¨æˆ·å‘ˆç°ä¸€ä¸ªç›´è§‚ã€æ˜“æ“ä½œã€äº¤äº’æ€§å¼ºçš„å‹å¥½çš„å›¾å½¢åŒ–ç•Œé¢ã€‚åœ¨ X-Window ç¯å¢ƒä¸­å°±å’Œåœ¨ Windows ä¸­ç›¸ä¼¼ï¼Œå¯ä»¥è¯´æ˜¯ä¸€ä¸ª Linux ç‰ˆçš„ Windowsã€‚ è®¾å¤‡ç‹¬ç«‹æ€§ï¼šæ“ä½œç³»ç»ŸæŠŠæ‰€æœ‰å¤–éƒ¨è®¾å¤‡ç»Ÿä¸€å½“ä½œæ–‡ä»¶æ¥çœ‹å¾…ï¼Œåªè¦å®‰è£…é©±åŠ¨ç¨‹åºï¼Œä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥åƒä½¿ç”¨æ–‡ä»¶ä¸€æ ·ï¼Œæ“çºµå’Œä½¿ç”¨è¿™äº›è®¾å¤‡ã€‚Linux æ˜¯å…·æœ‰è®¾å¤‡ç‹¬ç«‹æ€§çš„æ“ä½œç³»ç»Ÿï¼Œå†…æ ¸å…·æœ‰é«˜åº¦é€‚åº”èƒ½åŠ›ã€‚ æä¾›äº†ä¸°å¯Œçš„ç½‘ç»œåŠŸèƒ½ï¼šå®Œå–„çš„å†…ç½®ç½‘ç»œæ˜¯ Linux æ“ä½œç³»ç»Ÿçš„ä¸€å¤§ç‰¹ç‚¹ã€‚ å¯é çš„å®‰å…¨ç³»ç»Ÿï¼šLinux é‡‡å–äº†è®¸å¤šå®‰å…¨æŠ€æœ¯æªæ–½ï¼ŒåŒ…æ‹¬å¯¹è¯»å†™æ§åˆ¶ï¼Œå¸¦ä¿æŠ¤çš„å­ç³»ç»Ÿï¼Œå®¡è®¡è·Ÿè¸ªï¼Œæ ¸å¿ƒæˆæƒç­‰ï¼Œè¿™ä¸ºç½‘ç»œå¤šç”¨æˆ·ç¯å¢ƒä¸­çš„ç”¨æˆ·æä¾›äº†å¿…è¦çš„å®‰å…¨ä¿éšœã€‚ è‰¯å¥½çš„å¯ç§»æ¤æ€§ï¼šå°† Linux æ“ä½œç³»ç»Ÿä»ä¸€ä¸ªå¹³å°è½¬ç§»åˆ°å¦ä¸€ä¸ªå¹³å°ä½¿å®ƒä»ç„¶èƒ½å¤ŸæŒ‰ç…§å…¶è‡ªèº«çš„æ–¹å¼è¿è¡Œã€‚Linux æ˜¯ä¸€ç§å¯ç§»æ¤çš„æ“ä½œç³»ç»Ÿï¼Œèƒ½å¤Ÿåœ¨ä»å¾®å‹è®¡ç®—æœºåˆ°å¤§å‹è®¡ç®—æœºçš„ä»»ä½•ç¯å¢ƒä¸­å’Œä»»ä½•å¹³å°ä¸Šè¿è¡Œã€‚Linux å¯ä»¥è¿è¡Œåœ¨å¤šç§ç¡¬ä»¶å¹³å°ä¸Šï¼Œå¦‚å…·æœ‰ x86ã€ARMã€SPARCã€Alpha ç­‰å¤„ç†å™¨çš„å¹³å°ã€‚æ­¤å¤– Linux è¿˜æ˜¯ä¸€ç§åµŒå…¥å¼æ“ä½œç³»ç»Ÿï¼Œå¯ä»¥è¿è¡Œåœ¨æŒä¸Šç”µè„‘ã€æœºé¡¶ç›’æˆ–æ¸¸æˆæœºä¸Šã€‚2001 å¹´ 1 æœˆä»½å‘å¸ƒçš„ Linux 2.4 ç‰ˆå†…æ ¸å·²ç»èƒ½å¤Ÿå®Œå…¨æ”¯æŒ Intel 64 ä½èŠ¯ç‰‡æ¶æ„ã€‚åŒæ—¶ Linux ä¹Ÿæ”¯æŒå¤šå¤„ç†å™¨æŠ€æœ¯ã€‚å¤šä¸ªå¤„ç†å™¨åŒæ—¶å·¥ä½œï¼Œä½¿ç³»ç»Ÿæ€§èƒ½å¤§å¤§æé«˜ Linux æ ¸å¿ƒç‰¹å¾ï¼šå¤šç”¨æˆ·ã€å¤šè¿›ç¨‹Linux æ ¸å¿ƒç‰¹å¾â€”å¤šç”¨æˆ·ã€å¤šè¿›ç¨‹ç®¡ç†çš„å®ç°æ–¹å¼å¦‚ä¸‹ï¼šï¼ˆ1ï¼‰è´¦æˆ·ç®¡ç†ç³»ç»Ÿä¾æ®è´¦æˆ· ID æ¥åŒºåˆ†æ¯ä¸ªç”¨æˆ·çš„æ–‡ä»¶ã€è¿›ç¨‹ã€ä»»åŠ¡ï¼Œç»™æ¯ä¸ªç”¨æˆ·æä¾›ç‰¹å®šçš„å·¥ä½œç¯å¢ƒï¼ˆå¦‚ç”¨æˆ·çš„å·¥ä½œç›®å½•ã€Shell ç‰ˆæœ¬ä»¥åŠ XWindow ç¯å¢ƒçš„é…ç½®ç­‰ï¼‰ï¼Œä½¿æ¯ä¸ªç”¨æˆ·çš„å·¥ä½œéƒ½èƒ½ç‹¬ç«‹ä¸å—å¹²æ‰°åœ°è¿›è¡Œã€‚ï¼ˆ2ï¼‰æƒé™ç®¡ç†åœ¨ Linux ä¸­ï¼Œå°†ä½¿ç”¨ç³»ç»Ÿèµ„æºçš„äººå‘˜åˆ†ä¸º 4 ç±»ä¸‰ç»„ï¼šè¶…çº§ç”¨æˆ·ã€æ–‡ä»¶æˆ–ç›®å½•çš„å±ä¸»ï¼›å±ä¸»çš„åŒç»„äººï¼›å…¶ä»–äººå‘˜ã€‚å¯¹æ¯ç»„ç”¨æˆ·åˆ†åˆ«åˆ†é…å¯¹æ–‡ä»¶å’Œç›®å½•çš„ä¸åŒçš„è®¿é—®æƒé™ã€‚ï¼ˆ3ï¼‰è¿›ç¨‹ç®¡ç†è¿›ç¨‹æ§åˆ¶æ˜¯ Shell çš„ä¸€ä¸ªç‰¹æ€§ï¼Œä½¿ç”¨æˆ·èƒ½åœ¨å¤šä¸ªç‹¬ç«‹è¿›ç¨‹é—´è¿›è¡Œåˆ‡æ¢ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·å¯ä»¥æŒ‚èµ·ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼Œç¨åå†æ¢å¤å…¶è¿è¡Œã€‚bash è®°å½•æ‰€æœ‰å¯åŠ¨çš„è¿›ç¨‹å¹¶ä¿æŒå¯¹æ‰€æœ‰å·²å¯åŠ¨çš„è¿›ç¨‹çš„è·Ÿè¸ªï¼Œåœ¨æ¯ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ç”Ÿå‘½æœŸå†…çš„ä»»ä½•æ—¶å€™ï¼Œç”¨æˆ·å¯ä»¥ä»»æ„åœ°æŒ‚èµ·è¿›ç¨‹æˆ–é‡æ–°å¯åŠ¨è¿›ç¨‹æ¢å¤è¿è¡Œã€‚ Linux æ“ä½œç³»ç»Ÿçš„ä¸»è¦ç‰ˆæœ¬Linux æ“ä½œç³»ç»Ÿä¸»è¦åˆ†ä¸ºå†…æ ¸ç‰ˆæœ¬ä»¥åŠå‘è¡Œç‰ˆæœ¬ï¼Œå…¶å…·ä½“å†…å®¹å¦‚ä¸‹ã€‚ï¼ˆ1ï¼‰Linux çš„å†…æ ¸ç‰ˆæœ¬ï¼šLinux å†…æ ¸ä½¿ç”¨ä¸»è¦åˆ†ä¸ºä¸¤ç§ä¸åŒçš„ç‰ˆæœ¬ç¼–å·æ–¹å¼ã€‚ç¬¬ä¸€ç§æ–¹å¼ç”¨äº 1.0 ç‰ˆæœ¬ä¹‹å‰ï¼ˆåŒ…æ‹¬ 1.0ï¼‰ã€‚ç¬¬äºŒç§æ–¹å¼ç”¨äº 1.0 ä¹‹ååˆ° 2.6ï¼Œæ•°å­—ç”±ä¸‰éƒ¨åˆ†â€œA.B.Câ€ï¼ŒA ä»£è¡¨ä¸»ç‰ˆæœ¬å·ï¼ŒB ä»£è¡¨æ¬¡ä¸»ç‰ˆæœ¬å·ï¼ŒC ä»£è¡¨è¾ƒå°çš„æœ«ç‰ˆæœ¬å·ã€‚ ï¼ˆ2ï¼‰Linux çš„å‘è¡Œç‰ˆæœ¬Linux çš„å‘è¡Œç‰ˆæœ¬å®è´¨åœ¨äº Linux æ ¸å¿ƒåŠ ä¸Šå¤–å›´çš„å®ç”¨ç¨‹åºç»„æˆçš„ä¸€ä¸ªå¤§è½¯ä»¶åŒ…ã€‚æŠŠ SUSEã€RedHat(ç°åœ¨é€šå¸¸ç§°ä¸º Red Hat Enterprise Linuxï¼Œç®€ç§° RHEL)ã€Ubuntuã€Slackware ç­‰ç›´æ¥ç§°å‘¼ä¸º Linux æ˜¯ä¸ç¡®åˆ‡çš„ï¼Œå®ƒä»¬æ˜¯ Linux çš„å‘è¡Œç‰ˆæœ¬ã€‚æ›´ç¡®åˆ‡åœ°è¯´ï¼Œåº”è¯¥ç§°ä¸ºä»¥ Linux ä¸ºæ ¸å¿ƒçš„æ“ä½œç³»ç»Ÿè½¯ä»¶åŒ… å‘è¡Œç‰ˆä¸»è¦å¯åˆ†ä¸º Debian ç³»å’Œ RedHat ç³»ã€‚Debian ç³»ä¸»è¦åˆ†ä¸º Ubuntuã€Debianã€Linux Mintã€Linux Lite ç­‰ã€‚RedHat ç³»ä¸»è¦åˆ†ä¸º CentOSã€Fedoraã€RedHat Enterprise Linuxã€Oracle Linux ç­‰ã€‚Debian æ˜¯ä¸€ä¸ªéå•†ä¸šåŒ–çš„é¡¹ç›®ï¼Œå®Œå…¨ç”±ç¤¾åŒºé©±åŠ¨ã€‚Red Hat æä¾›äº†ä¸€ä¸ªå…è´¹çš„ç¤¾åŒºç‰ˆæœ¬ï¼ˆFedoraï¼‰ï¼ŒåŒæ—¶é€šè¿‡å…¶ä¼ä¸šç‰ˆï¼ˆRHELï¼‰æä¾›å•†ä¸šæ”¯æŒå’ŒæœåŠ¡ã€‚ æ–‡ä»¶æ“ä½œä¸æƒé™ç®¡ç†Linux æ–‡ä»¶ç³»ç»Ÿæ¶æ„éµå¾ª Unix çš„è®¾è®¡ç†å¿µï¼Œå…¶æ ¸å¿ƒå“²å­¦ä¹‹ä¸€å°±æ˜¯â€œä¸€åˆ‡çš†æ–‡ä»¶â€ï¼ˆEverything is a fileï¼‰ã€‚è¿™æ„å‘³ç€æ— è®ºæ˜¯æ™®é€šçš„æ–‡æœ¬æ–‡ä»¶ã€ç›®å½•ã€è®¾å¤‡ï¼ˆå¦‚æ‰“å°æœºã€ç£ç›˜ï¼‰ã€ç®¡é“ã€å¥—æ¥å­—è¿˜æ˜¯å…¶ä»–ç³»ç»Ÿèµ„æºï¼Œéƒ½è¢«æŠ½è±¡æˆæ–‡ä»¶çš„å½¢å¼è¿›è¡Œæ“ä½œï¼Œä»è€Œæä¾›äº†ä¸€è‡´çš„æ¥å£å’Œç®€å•çš„ç¼–ç¨‹æ¨¡å‹ã€‚ å±‚æ¬¡æ ‘çŠ¶ç»“æ„ï¼šLinux æ–‡ä»¶ç³»ç»Ÿé‡‡ç”¨åˆ†å±‚çš„æ ‘çŠ¶ç›®å½•ç»“æ„ï¼Œå…¶ä¸­æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•éƒ½å§‹äºä¸€ä¸ªç§°ä¸ºæ ¹ç›®å½•ï¼ˆ/ï¼‰çš„å•ä¸€èŠ‚ç‚¹ã€‚æ¯ä¸ªç›®å½•å¯ä»¥åŒ…å«æ–‡ä»¶å’Œå­ç›®å½•ï¼Œå½¢æˆä¸€ä¸ªå±‚æ¬¡åŒ–çš„ç»„ç»‡ç»“æ„ã€‚ UNIX/Linux æ–‡ä»¶ç³»ç»Ÿçš„åŸºæœ¬ç»“æ„è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼ˆVFSï¼‰ï¼šè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿæ˜¯ Linux å†…æ ¸ä¸­çš„ä¸€ä¸ªè½¯ä»¶å±‚ï¼Œå…è®¸ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿï¼ˆå¦‚ ext4ã€XFSã€Btrfs ç­‰ï¼‰ä»¥ç»Ÿä¸€çš„æ–¹å¼è¢«å†…æ ¸å’Œç”¨æˆ·ç©ºé—´åº”ç”¨ç¨‹åºè®¿é—®ã€‚VFS å®šä¹‰äº†æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿéƒ½æ”¯æŒçš„åŸºæœ¬ã€æŠ½è±¡æ¥å£å’Œæ•°æ®ç»“æ„,å®é™…æ–‡ä»¶ç³»ç»Ÿå®ç° VFS å®šä¹‰çš„æŠ½è±¡æ¥å£å’Œæ•°æ®ç»“æ„ï¼ˆæ–‡ä»¶ã€ç›®å½•ç­‰æ¦‚å¿µåœ¨å½¢å¼ä¸Šä¸ VFS çš„å®šä¹‰ä¿æŒä¸€è‡´ï¼‰ï¼Œåœ¨ç»Ÿä¸€çš„æ¥å£å’Œæ•°æ®ç»“æ„ä¸‹éšè—äº†å…·ä½“çš„å®ç°ç»†èŠ‚ ext2 (Second Extended Filesystem)ext2 æ˜¯ Linux å†…æ ¸æœ€æ—©æ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿä¹‹ä¸€ï¼Œè®¾è®¡ç”¨äºæ›¿ä»£è¾ƒæ—©çš„ ext æ–‡ä»¶ç³»ç»Ÿã€‚å®ƒå¼•å…¥äº†è®¸å¤šæ”¹è¿›ï¼Œå¦‚æ›´å¿«çš„æ–‡ä»¶è®¿é—®é€Ÿåº¦å’Œæ›´å¤§çš„æ–‡ä»¶ç³»ç»Ÿå®¹é‡ã€‚ext2 æ”¯æŒå¤§æ–‡ä»¶ï¼ˆç†è®ºä¸Šå¯è¾¾ 2^32 ä¸ªå—ï¼Œå—é™äºæ–‡ä»¶ç³»ç»Ÿå¤§å°ï¼‰ã€é•¿æ–‡ä»¶åç­‰ç‰¹æ€§ã€‚ç„¶è€Œï¼Œext2 æ˜¯ä¸€ä¸ªéæ—¥å¿—æ–‡ä»¶ç³»ç»Ÿï¼Œè¿™æ„å‘³ç€åœ¨ç³»ç»Ÿå´©æºƒæ—¶å¯èƒ½éœ€è¦è¾ƒé•¿çš„æ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥å’Œä¿®å¤è¿‡ç¨‹æ¥æ¢å¤ä¸€è‡´æ€§ã€‚ext3 (Third Extended Filesystem)ext3 æ˜¯ ext2 çš„å‡çº§ç‰ˆï¼Œä¸»è¦å¢åŠ äº†æ—¥å¿—åŠŸèƒ½ï¼ˆjournalingï¼‰ï¼Œè¿™æå¤§åœ°æé«˜äº†æ–‡ä»¶ç³»ç»Ÿçš„å¯é æ€§å’Œæ¢å¤é€Ÿåº¦ã€‚åœ¨ç³»ç»Ÿå´©æºƒåï¼Œext3 èƒ½å¤Ÿå¿«é€Ÿæ¢å¤æ–‡ä»¶ç³»ç»Ÿçš„çŠ¶æ€ï¼Œå› ä¸ºå®ƒç»´æŠ¤äº†ä¸€ä¸ªäº‹åŠ¡æ—¥å¿—ï¼Œè®°å½•äº†æ–‡ä»¶ç³»ç»Ÿæ›´æ”¹çš„æ“ä½œ ext4 (Fourth Extended Filesystem)ext4 æ˜¯ ext3 çš„è¿›ä¸€æ­¥å‘å±•ï¼Œå®ƒä¸ä»…ç»§æ‰¿äº† ext3 çš„ç¨³å®šæ€§ï¼Œè¿˜å¼•å…¥äº†å¤šé¡¹å¢å¼ºç‰¹æ€§ï¼Œå¦‚æ›´å¤§çš„æ–‡ä»¶ç³»ç»Ÿå’Œæ–‡ä»¶å¤§å°æ”¯æŒï¼ˆç†è®ºä¸Šå¯è¾¾åˆ° 1 EB å‡ 1 å­—èŠ‚ï¼‰ã€æ›´é«˜æ•ˆçš„ç©ºé—´åˆ†é…ç­–ç•¥ï¼ˆå»¶è¿Ÿåˆ†é…å’Œå¤šå—åˆ†é…ï¼‰ã€æ— é™æ•°é‡çš„å­ç›®å½•ã€æ›´å¿«çš„æ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥å’Œæ›´å¼ºå¤§çš„æ—¥å¿—åŠŸèƒ½ã€‚æ­¤å¤–ï¼Œext4 è¿˜ä¼˜åŒ–äº† inodeï¼ˆç´¢å¼•èŠ‚ç‚¹ï¼‰çš„ä½¿ç”¨ï¼Œå…è®¸å­˜å‚¨æ›´å¤šçš„æ‰©å±•å±æ€§ï¼Œå¹¶æ”¯æŒå¿«é€Ÿæ‰©å±•å’Œæ”¶ç¼©æ–‡ä»¶ç³»ç»Ÿå¤§å°ã€‚ XFS (eXtended File System)XFS æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ 64 ä½æ—¥å¿—æ–‡ä»¶ç³»ç»Ÿï¼Œæœ€åˆä¸º SGI çš„ IRIX æ“ä½œç³»ç»Ÿè®¾è®¡ï¼Œåæ¥è¢«ç§»æ¤åˆ° Linuxã€‚XFS ç‰¹åˆ«é€‚åˆå¤„ç†å¤§å‹æ–‡ä»¶å’Œé«˜å¹¶å‘çš„è¯»å†™æ“ä½œï¼Œå¹¿æ³›åº”ç”¨äºä¼ä¸šçº§æœåŠ¡å™¨å’Œå¤§æ•°æ®å­˜å‚¨åœºæ™¯ã€‚å®ƒæä¾›äº†æå¿«çš„æ–‡ä»¶ç³»ç»Ÿå¢é•¿é€Ÿåº¦ã€å»¶è¿Ÿåˆ†é…ç­–ç•¥ä»¥å‡å°‘æ–‡ä»¶ç¢ç‰‡ã€ä»¥åŠåŠ¨æ€ inode åˆ†é…ç­‰åŠŸèƒ½ã€‚XFS èƒ½å¤Ÿæ”¯æŒéå¸¸å¤§çš„æ–‡ä»¶å’Œæ–‡ä»¶ç³»ç»Ÿï¼ˆç†è®ºä¸Šå¯è¾¾ 18 EBï¼‰ï¼Œå¹¶ä¸”å…¶æ—¥å¿—æœºåˆ¶è®¾è®¡å¾—æ›´åŠ å¥å£®å’Œé«˜æ•ˆï¼Œå°¤å…¶åœ¨å¤„ç†å¤§é‡å°æ–‡ä»¶å’Œé«˜ I/O è´Ÿè½½æ—¶è¡¨ç°ä¼˜ç§€ã€‚ æŒ‚è½½ç‚¹ï¼šLinux å…è®¸å°†ä¸åŒçš„ç‰©ç†æˆ–é€»è¾‘ç£ç›˜åˆ†åŒºæŒ‚è½½åˆ°æ–‡ä»¶ç³»ç»Ÿçš„ç‰¹å®šç›®å½•ä¸‹ï¼Œè¿™ä¸ªç›®å½•ç§°ä¸ºæŒ‚è½½ç‚¹ã€‚è¿™æ ·å¯ä»¥æ‰©å±•æ–‡ä»¶ç³»ç»Ÿçš„å­˜å‚¨ç©ºé—´ï¼Œå¹¶ä¸”ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿå¯ä»¥æœ‰å„è‡ªçš„å±æ€§å’ŒåŠŸèƒ½ã€‚ ç´¢å¼•èŠ‚ç‚¹çš„åŠŸèƒ½æ–‡ä»¶åœ¨ç£ç›˜ä¸­çš„è¡¨ç°å½¢å¼ ç‰©ç†è¡¨ç°å½¢å¼ï¼š è¶…çº§å—ï¼šç”¨äºå­˜å‚¨æ–‡ä»¶ç³»ç»Ÿçš„æ§åˆ¶ä¿¡æ¯çš„æ•°æ®ç»“æ„ã€‚æè¿°æ–‡ä»¶ç³»ç»Ÿçš„çŠ¶æ€ã€æ–‡ä»¶ç³»ç»Ÿç±»å‹ã€å¤§å°ã€åŒºå—æ•°ã€ç´¢å¼•èŠ‚ç‚¹æ•°ç­‰ï¼Œå­˜æ”¾äºç£ç›˜çš„ç‰¹å®šæ‰‡åŒºä¸­ã€‚ ç´¢å¼•èŠ‚ç‚¹ï¼ˆi èŠ‚ç‚¹ï¼‰ï¼šç”¨äºå­˜å‚¨æ–‡ä»¶çš„å…ƒæ•°æ®ï¼ˆæ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯ï¼‰çš„ä¸€ä¸ªæ•°æ®ç»“æ„ï¼ŒåŒ…å«è¯¸å¦‚æ–‡ä»¶çš„å¤§å°ã€æ‹¥æœ‰è€…ã€åˆ›å»ºæ—¶é—´ã€æ•°æ®å—/ç›®å½•å—ä½ç½®ç­‰ä¿¡æ¯ã€‚ ç›®å½•å—ï¼šå­˜æ”¾ç›®å½•æ–‡ä»¶çš„å†…å®¹ æ•°æ®å—ï¼šå­˜æ”¾éç›®å½•æ–‡ä»¶çš„å†…å®¹ ç›®å½•æ–‡ä»¶å†…å®¹ä¸€ç³»åˆ—ç›®å½•é¡¹ï¼ˆdirentï¼‰çš„åˆ—è¡¨ï¼Œæ¯ä¸ªç›®å½•é¡¹ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š æ‰€åŒ…å«æ–‡ä»¶çš„æ–‡ä»¶å æ–‡ä»¶åå¯¹åº”çš„ç´¢å¼•èŠ‚ç‚¹ï¼ˆinodeï¼‰å· ä½¿ç”¨ls -iå¯æŸ¥çœ‹æ–‡ä»¶å¯¹åº”çš„ inode å· æ–‡ä»¶åœ¨å†…æ ¸ä¸­çš„è¡¨ç°å½¢å¼å†…æ ¸ä½¿ç”¨çš„ä¸‰ç§è¡¨æ¥è¡¨ç¤ºè¿›ç¨‹ä½¿ç”¨çš„æ–‡ä»¶ æ¯ä¸ªè¿›ç¨‹åœ¨ PCB ä¸­æœ‰ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦è¡¨ï¼Œæ¯ä¸ªæè¿°ç¬¦è¡¨é¡¹æŒ‡å‘ä¸€ä¸ªæ–‡ä»¶è¡¨ å†…æ ¸ä¸ºæ¯ä¸€ä¸ªè¢«è¯¥è¿›ç¨‹ä½¿ç”¨ï¼ˆæ‰“å¼€ï¼‰çš„æ–‡ä»¶ç»´æŠ¤ä¸€å¼ æ–‡ä»¶è¡¨ æ¯ä¸ªæ–‡ä»¶ï¼ˆæˆ–è®¾å¤‡ï¼‰éƒ½æœ‰ä¸€ä¸ªç´¢å¼•èŠ‚ç‚¹ï¼Œå®ƒåŒ…å«äº†æ–‡ä»¶ç±»å‹å±æ€§åŠæ–‡ä»¶æ•°æ® åœ¨ UNIX/Linux å†…æ ¸ä¸­æ¯ä¸ªæ‰“å¼€çš„æ–‡ä»¶ï¼ˆæˆ–è®¾å¤‡ï¼‰éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ V èŠ‚ç‚¹ç»“æ„ï¼ŒV èŠ‚ç‚¹åŒ…å«äº†æ–‡ä»¶ç±»å‹å’Œå¯¹æ­¤æ–‡ä»¶è¿›è¡Œå„ç§æ“ä½œçš„å‡½æ•°æŒ‡é’ˆã€‚å¯¹äºå¤§å¤šæ•°æ–‡ä»¶ï¼Œv èŠ‚ç‚¹è¿˜åŒ…å«äº†è¯¥æ–‡ä»¶çš„ i èŠ‚ç‚¹ã€‚i èŠ‚ç‚¹ä¸å…·ä½“çš„é€»è¾‘æ–‡ä»¶ç³»ç»Ÿæœ‰å…³ï¼Œå­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œåœ¨æ‰“å¼€æ–‡ä»¶æ—¶ä»ç£ç›˜ä¸Šè¯»å…¥åˆ°å†…å­˜ä¸­ã€‚i èŠ‚ç‚¹åŒ…å«äº†æ–‡ä»¶çš„æ‰€æœ‰è€…ã€æ–‡ä»¶é•¿åº¦ã€æ–‡ä»¶æ‰€åœ¨è®¾å¤‡ã€æŒ‡å‘æ–‡ä»¶å®é™…æ•°æ®å—åœ¨ç£ç›˜ä¸Šæ‰€åœ¨ä½ç½®çš„æŒ‡é’ˆç­‰ç­‰ã€‚UNIX/Linux æ¯ä¸ªè¿›ç¨‹åœ¨å†…æ ¸ä¸­éƒ½æœ‰ä¸€ä¸ªç»“æ„ä½“æ¥ç»´æŠ¤è¿›ç¨‹ç›¸å…³çš„ä¿¡æ¯ç§°ä¸ºè¿›ç¨‹æ§åˆ¶å— (PCB,Process Control Block)ã€‚UNIX/Linux ä¸­æ¯ä¸ªæ‰“å¼€çš„æ–‡ä»¶åœ¨å†…æ ¸ä¸­éƒ½æœ‰ä¸€ä¸ªç»“æ„ä½“æ¥ç»´æŠ¤æ–‡ä»¶ç›¸å…³çš„ä¿¡æ¯ï¼Œæˆä¸ºæ–‡ä»¶è¡¨ã€‚æ¯ä¸€ä¸ª PCB ä¸­æœ‰ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªæˆå‘˜æŒ‡å‘ä¸€ä¸ªè¯¥è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶è¡¨,ç§°ä¸ºæ–‡ä»¶æè¿°ç¬¦è¡¨ã€‚ç”¨æˆ·ç¨‹åºä¸èƒ½ç›´æ¥è®¿é—®å†…æ ¸ä¸­çš„æ–‡ä»¶æè¿°ç¬¦è¡¨,è€Œåªèƒ½ä½¿ç”¨æ–‡ä»¶æè¿°ç¬¦è¡¨çš„ç´¢å¼•,è¿™äº›ç´¢å¼•å°±ç§°ä¸ºæ–‡ä»¶æè¿°ç¬¦(File Descriptor),å¯¹äºå†…æ ¸è€Œè¨€ï¼Œæ‰€æœ‰æ‰“å¼€æ–‡ä»¶éƒ½ç”¨æ–‡ä»¶æè¿°ç¬¦æ ‡è¯†,æ–‡ä»¶æè¿°ç¬¦æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚å½“æ‰“å¼€ä¸€ä¸ªç°å­˜æ–‡ä»¶æˆ–åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶æ—¶ï¼Œå†…æ ¸å‘è¿›ç¨‹è¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼ˆæ‰“å¼€æ–‡ä»¶çš„è®¡æ•°ï¼‰ é€šå¸¸æƒ…å†µä¸‹ï¼Œæ–‡ä»¶æè¿°ç¬¦ 0ã€1ã€2 ç‰¹æŒ‡æ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡ºã€æ ‡å‡†é”™è¯¯ï¼ˆç”¨æˆ·ç¨‹åºå¯ç›´æ¥ä½¿ç”¨è€Œä¸éœ€è¦æ‰“å¼€ï¼‰ã€‚å®ƒä»¬ä¹Ÿå¯ä»¥ç”±å¸¸æ•°ä»£æ›¿ï¼ˆåœ¨å¤´æ–‡ä»¶ä¸­ unistd.h å®šä¹‰ï¼‰ ï¼š STDIN_FILENO STDOUT_FILENO STDERR_FILENO Linux å†…æ ¸é€šè¿‡ä¸€ä¸ªè¢«ç§°ä¸ºè¿›ç¨‹æè¿°ç¬¦çš„ task_struct ç»“æ„ä½“æ¥ç®¡ç†è¿›ç¨‹ï¼Œè¿™ä¸ªç»“æ„ä½“åŒ…å«äº†ä¸€ä¸ªè¿›ç¨‹æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚å®ƒå®šä¹‰åœ¨/usr/src/linux-headers-4.15.0-141/include/linux/sched.h æ–‡ä»¶ä¸­ã€‚ æ–‡ä»¶çš„æ‰“å¼€å’Œå…³é—­éƒ½æ˜¯èµ„æºçš„ä¸€ç§æ“ä½œï¼ŒLinux ä¸­çš„ task_struct ä¸­æœ‰ä¸¤ä¸ªç»“æ„ä½“å‚¨å­˜è¿™ä¸¤ä¸ªä¿¡æ¯ã€‚ Struct fs_struct *fsï¼šè¿›ç¨‹çš„å¯æ‰§è¡Œæ˜ è±¡æ‰€åœ¨çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæœ‰ä¸¤ä¸ªç´¢å¼•ç‚¹ï¼Œç§°ä¸º root å’Œ pwdï¼Œåˆ†åˆ«æŒ‡å‘å¯¹åº”çš„æ ¹ç›®å½•å’Œå½“å‰ç›®å½•ã€‚ Struct files_struct *filesï¼šè¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶, æŒ‡å‘ files_struct ç»“æ„ä½“, ç§°ä¸ºæ–‡ä»¶æè¿°ç¬¦è¡¨12345678// files_structçš„ä¸»è¦æˆå‘˜atomic_t count; å…±äº«è¯¥è¡¨çš„è¿›ç¨‹æ•° int max_fds; å½“å‰æ–‡ä»¶å¯¹è±¡çš„æœ€å¤§æ•°int max_fdset; å½“å‰æ–‡ä»¶æè¿°ç¬¦çš„æœ€å¤§æ•°int next_fd; å·²åˆ†é…çš„æ–‡ä»¶æè¿°ç¬¦åŠ 1struct file ** fd; æŒ‡å‘æ–‡ä»¶è¡¨ï¼ˆæ–‡ä»¶å¯¹è±¡ï¼‰æŒ‡é’ˆæ•°ç»„fd_set *close_on_exec; æ‰§è¡Œexecæ—¶éœ€è¦å…³é—­çš„æ–‡ä»¶æè¿°ç¬¦struct file * fd_array[32]; æ–‡ä»¶è¡¨ï¼ˆæ–‡ä»¶å¯¹è±¡ï¼‰æŒ‡é’ˆçš„åˆå§‹åŒ–æ•°ç»„ å·²æ‰“å¼€çš„æ–‡ä»¶åœ¨ Linux å†…æ ¸ä¸­ç”¨ file ç»“æ„ä½“è¡¨ç¤º,æ–‡ä»¶æè¿°ç¬¦è¡¨ä¸­çš„æŒ‡é’ˆæŒ‡å‘ file ç»“æ„ä½“ æ–‡ä»¶æè¿°ç¬¦è¡¨ä¸­æ¯ä¸ªè¡¨é¡¹åŒ…å«ä¸€ä¸ªæŒ‡å‘å·²æ‰“å¼€çš„æ–‡ä»¶çš„æŒ‡é’ˆï¼ˆæŒ‡å‘ file ç»“æ„çš„æŒ‡é’ˆï¼‰ 123456789// fileçš„ä¸»è¦æˆå‘˜struct list_head f_list; æ‰€æœ‰æ‰“å¼€çš„æ–‡ä»¶å½¢æˆé“¾è¡¨struct dentry *f_dentry; æŒ‡å‘å¯¹åº”ç›®å½•é¡¹çš„æŒ‡é’ˆ(directory entry)struct file_operations *f_op; è¿™ä¸ªç»“æ„ä½“çš„æˆå‘˜éƒ½æ˜¯å‡½æ•°æŒ‡é’ˆ,æŒ‡å‘å®ç°å„ç§æ–‡ä»¶æ“ä½œçš„å†…æ ¸å‡½æ•°mode_t f_mode; æ–‡ä»¶çš„çŠ¶æ€æ ‡å¿—/æ‰“å¼€æ¨¡å¼loff_t f_pos; æ–‡ä»¶çš„å½“å‰ä½ç½®unsigned short f_flags; æ‰“å¼€æ–‡ä»¶æ—¶æ‰€æŒ‡å®šçš„æ ‡å¿—unsigned short f_count; ä½¿ç”¨è¯¥ç»“æ„çš„è¿›ç¨‹æ•°unsigned int f_uid, f_gid; ç”¨æˆ·çš„UserIDå’ŒGroupID ç›®å½•é¡¹å¯¹è±¡â€”â€”dentry ç»“æ„ä½“Linux ä¸­å¼•å…¥ç›®å½•é¡¹å¯¹è±¡çš„æ¦‚å¿µä¸»è¦ç›®çš„æ˜¯æ–¹ä¾¿æŸ¥æ‰¾æ–‡ä»¶çš„ç´¢å¼•èŠ‚ç‚¹ä¸€ä¸ªè·¯å¾„çš„å„ä¸ªç»„æˆéƒ¨åˆ†ï¼Œä¸ç®¡æ˜¯ç›®å½•è¿˜æ˜¯æ™®é€šçš„æ–‡ä»¶ï¼Œéƒ½æ˜¯ä¸€ä¸ªç›®å½•é¡¹å¯¹è±¡ 1234567891011// dentry ä¸»è¦ç»“æ„æˆå‘˜Atomic_t d_count; ç›®å½•é¡¹dentryå¼•ç”¨è®¡æ•°unsigned int d_flags; dentryçŠ¶æ€æ ‡å¿—struct inode * d_inode; ä¸æ–‡ä»¶å…³è”çš„ç´¢å¼•èŠ‚ç‚¹struct dentry * d_parent; çˆ¶ç›®å½•çš„dentryç»“æ„int d_mounted; ç›®å½•é¡¹çš„å®‰è£…ç‚¹struct qstr d_name; æ–‡ä»¶åunsigned long d_time; é‡æ–°ç”Ÿæ•ˆæ—¶é—´struct dentry_operations *d_op; æ“ä½œç›®å½•é¡¹çš„å‡½æ•°struct super_block *d_sb; ç›®å½•é¡¹æ ‘çš„æ ¹unsigned char d_inameï¼»DNAME_INLINE_LENï¼½;æ–‡ä»¶åå‰16ä¸ªå­—ç¬¦ åœ¨å†…å­˜ä¸­, æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ª dentry(ç›®å½•é¡¹)å’Œ inode(ç´¢å¼•èŠ‚ç‚¹)ç»“æ„ï¼Œdentry è®°å½•ç€æ–‡ä»¶åï¼Œä¸Šçº§ç›®å½•ç­‰ä¿¡æ¯ï¼Œæ­£æ˜¯å®ƒå½¢æˆäº†æˆ‘ä»¬æ‰€çœ‹åˆ°çš„æ ‘çŠ¶ç»“æ„ï¼›è€Œæœ‰å…³è¯¥æ–‡ä»¶çš„ç»„ç»‡å’Œç®¡ç†çš„ä¿¡æ¯ä¸»è¦å­˜æ”¾ inode é‡Œé¢ï¼Œå®ƒè®°å½•ç€æ–‡ä»¶åœ¨å­˜å‚¨ä»‹è´¨ä¸Šçš„ä½ç½®ä¸åˆ†å¸ƒã€‚åŒæ—¶ dentry-&gt;d_inode æŒ‡å‘ç›¸åº”çš„ inode ç»“æ„ã€‚dentry ä¸ inode æ˜¯å¤šå¯¹ä¸€çš„å…³ç³»ï¼Œå› ä¸ºæœ‰å¯èƒ½ä¸€ä¸ªæ–‡ä»¶æœ‰å¥½å‡ ä¸ªæ–‡ä»¶å(ç¡¬é“¾æ¥, hard link) ç´¢å¼•èŠ‚ç‚¹è¡¨â€”â€”inode ç»“æ„æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ¯ä¸ªç‰©ç†æ–‡ä»¶ç”±ä¸€ä¸ªç´¢å¼•èŠ‚ç‚¹è¡¨ï¼ˆç´¢å¼•èŠ‚ç‚¹å¯¹è±¡ï¼‰æè¿°ï¼Œä¸”åªèƒ½ç”±ä¸€ä¸ªç´¢å¼•èŠ‚ç‚¹å¯¹è±¡æè¿°ã€‚ç´¢å¼•èŠ‚ç‚¹æŒ‡å‘ç‰©ç†æ–‡ä»¶çš„å…·ä½“å­˜å‚¨ä½ç½®ï¼Œç³»ç»Ÿé€šè¿‡ç´¢å¼•èŠ‚ç‚¹æ¥å®šä½æ¯ä¸€ä¸ªæ–‡ä»¶ï¼ˆæ–‡ä»¶åå¯ä»¥éšæ—¶æ›´æ”¹ï¼Œä½†æ˜¯ç´¢å¼•èŠ‚ç‚¹å¯¹äºç‰©ç†æ–‡ä»¶æ˜¯å”¯ä¸€çš„ï¼Œå¹¶ä¸”éšç‰©ç†æ–‡ä»¶çš„å­˜åœ¨è€Œå­˜åœ¨ï¼‰ï¼Œç´¢å¼•èŠ‚ç‚¹åŒ…å«äº†æ–‡ä»¶çš„é•¿åº¦ã€åˆ›å»ºåŠä¿®æ”¹æ—¶é—´ã€æƒé™ã€æ‰€å±å…³ç³»ã€ç£ç›˜ä¸­çš„ä½ç½®ç­‰ä¿¡æ¯ã€‚ 123456789101112131415161718// iNode ä¸»è¦ç»“æ„æˆå‘˜unsigned long i_ino; inodeå·kdevt idev; å¸¸è§„æ–‡ä»¶æ‰€åœ¨è®¾å¤‡å·umode_t i_mode; æ–‡ä»¶ç±»å‹ä»¥åŠå­˜å–æƒé™nlink_t i_nlink; è¿æ¥åˆ°è¯¥inodeçš„ç¡¬è¿æ¥æ•°uid_t i_uid; æ–‡ä»¶å±ä¸»çš„ç”¨æˆ·IDgid_t i_gid; æ–‡ä»¶å±ä¸»æ‰€åœ¨ç»„çš„IDkdev_t i_rdev; ç‰¹æ®Šæ–‡ä»¶æ‰€åœ¨è®¾å¤‡å·loff_t i_size; æ–‡ä»¶å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰struct inode_operations *i_op; æŒ‡å‘inodeè¿›è¡Œæ“ä½œçš„å‡½æ•°æŒ‡é’ˆstruct super_block *i_sb; æŒ‡å‘è¯¥æ–‡ä»¶ç³»ç»Ÿè¶…çº§å—çš„æŒ‡é’ˆatomic_t i_count; å½“å‰ä½¿ç”¨è¯¥inodeçš„å¼•ç”¨è®¡æ•°union{ struct minix_inode_info minix_i; struct Ext2_inode_info Ext2_i; struct hpfs_inode_info hpfs_i; â€¦} u; inode ä»£è¡¨ç‰©ç†æ„ä¹‰ä¸Šçš„æ–‡ä»¶ï¼Œé€šè¿‡ inode å¯ä»¥å¾—åˆ°ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„è®°å½•äº†æ–‡ä»¶å†…å®¹çš„ä½ç½®ï¼Œå¦‚è¯¥æ–‡ä»¶ä½äºç¡¬ç›˜çš„ç¬¬ 3ï¼Œ8ï¼Œ10 å—ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°ç»„çš„å†…å®¹å°±æ˜¯ 3,8,10ã€‚å…¶ç´¢å¼•èŠ‚ç‚¹å· inode-&gt;i_inoï¼Œåœ¨åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸­æ˜¯å”¯ä¸€çš„ï¼Œå†…æ ¸åªè¦æ ¹æ® i_inoï¼Œå°±å¯ä»¥è®¡ç®—å‡ºå®ƒå¯¹åº”çš„ inode åœ¨ä»‹è´¨ä¸Šçš„ä½ç½®ã€‚å°±ç¡¬ç›˜æ¥è¯´ï¼Œæ ¹æ® i_ino å°±å¯ä»¥è®¡ç®—å‡ºå®ƒå¯¹åº”çš„ inode å±äºå“ªä¸ªå—(block)ï¼Œä»è€Œæ‰¾åˆ°ç›¸åº”çš„ inode ç»“æ„ã€‚ æ–‡ä»¶çš„åˆ†ç±»ä¸æƒé™æ–‡ä»¶ç±»å‹ï¼š ç±»å‹ æ ‡è¯†ç¬¦ description æ™®é€šæ–‡ä»¶ - å­˜å‚¨æ•°æ®çš„å¸¸è§„æ–‡ä»¶ï¼Œå¦‚æ–‡æœ¬æ–‡ä»¶ã€å›¾ç‰‡ã€å¯æ‰§è¡Œç¨‹åºç­‰ã€‚ ç›®å½•æ–‡ä»¶ d ç‰¹æ®Šç±»å‹æ–‡ä»¶ï¼Œå­˜å‚¨å…¶ä»–æ–‡ä»¶ååŠ inode å·ç ã€‚ å­—ç¬¦è®¾å¤‡æ–‡ä»¶ c ä¸å­—ç¬¦è®¾å¤‡ï¼ˆå¦‚ç»ˆç«¯ã€é¼ æ ‡ï¼‰äº¤äº’ï¼Œæ”¯æŒè¯»å†™æ“ä½œã€‚ å—è®¾å¤‡æ–‡ä»¶ b ä¸å—è®¾å¤‡ï¼ˆå¦‚ç¡¬ç›˜ï¼‰äº¤äº’ï¼Œé€‚åˆå¤§é‡æ•°æ®ä¼ è¾“ã€‚ ç®¡é“/FIFO p è¿›ç¨‹é—´é€šä¿¡ï¼Œå†…å­˜ä¸­æ•°æ®ç¼“å­˜é€šé“ã€‚ å¥—æ¥å­— s æ”¯æŒç½‘ç»œæˆ–åŒä¸€ä¸»æœºè¿›ç¨‹é—´é€šä¿¡çš„æ–‡ä»¶è¡¨ç°å½¢å¼ã€‚ ç¬¦å·é“¾æ¥ l æŒ‡å‘å¦ä¸€æ–‡ä»¶æˆ–ç›®å½•çš„ç‰¹æ®Šæ–‡ä»¶ï¼Œç±»ä¼¼ Windows å¿«æ·æ–¹å¼ã€‚ æ–‡ä»¶æƒé™ æƒé™æ ‡è¯† å¯¹æ–‡ä»¶çš„å«ä¹‰ å¯¹ç›®å½•çš„å«ä¹‰ r (read) æµè§ˆæ–‡ä»¶å†…å®¹ æµè§ˆç›®å½•ä¸­å†…å®¹ w (write) ä¿®æ”¹æ–‡ä»¶å†…å®¹ å¢åˆ åŠé‡å‘½åç›®å½•å†…çš„æ–‡ä»¶ x (execute) å…è®¸æ‰§è¡Œæ–‡ä»¶ï¼ˆå¦‚æœæ–‡ä»¶æ˜¯å¯æ‰§è¡Œçš„ï¼‰ è¿›å…¥ç›®å½•çš„æƒé™ ç›®å½•æƒé™çš„ç‰¹æ®Šæ€§ å½“æ‰“å¼€ä¸€ä¸ªä»»æ„ç±»å‹çš„æ–‡ä»¶æ—¶ï¼Œå¯¹è¯¥æ–‡ä»¶è·¯å¾„åä¸­åŒ…å«çš„æ¯ä¸€ä¸ªç›®å½•éƒ½åº”å…·æœ‰æ‰§è¡Œæƒé™ ä¸ºäº†åœ¨ä¸€ä¸ªç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå¿…é¡»å¯¹è¯¥ç›®å½•å…·æœ‰å†™æƒé™å’Œæ‰§è¡Œæƒé™ ä¸ºäº†åˆ é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œå¿…é¡»å¯¹åŒ…å«è¯¥æ–‡ä»¶çš„ç›®å½•å…·æœ‰å†™æƒé™å’Œæ‰§è¡Œæƒé™ï¼Œå¯¹è¯¥æ–‡ä»¶æœ¬èº«åˆ™ä¸éœ€è¦æœ‰è¯»ã€å†™æƒé™ åŸºäºç”¨æˆ·çš„æ–‡ä»¶æƒé™ç®¡ç†æ–‡ä»¶ç”¨æˆ·åˆ†ç±» æ–‡ä»¶æ‰€æœ‰è€…ï¼šå»ºç«‹æ–‡ä»¶å’Œç›®å½•çš„ç”¨æˆ·ï¼› æ–‡ä»¶æ‰€æœ‰è€…æ‰€åœ¨ç»„ç”¨æˆ·ï¼šæ–‡ä»¶æ‰€æœ‰è€…æ‰€å±ç”¨æˆ·ç»„ä¸­çš„å…¶ä»–ç”¨æˆ·ï¼› å…¶ä»–ç”¨æˆ·ï¼šæ—¢ä¸æ˜¯æ–‡ä»¶æ‰€æœ‰è€…ï¼Œåˆä¸æ˜¯æ–‡ä»¶æ‰€æœ‰ç»„æ‰€åœ¨ç»„çš„å…¶ä»–æ‰€æœ‰ç”¨æˆ·ã€‚ è¶…çº§ç”¨æˆ·ï¼šè´Ÿè´£æ•´ä¸ªç³»ç»Ÿçš„ç®¡ç†å’Œç»´æŠ¤ï¼Œæ‹¥æœ‰ç³»ç»Ÿä¸­æ‰€æœ‰æ–‡ä»¶çš„å…¨éƒ¨è®¿é—®æƒé™ã€‚ 1234567å­—æ¯è¡¨ç¤ºæ³•rwx rwx rwxğŸ‘†ğŸ»æ–‡ä»¶æ‰€æœ‰è€… ğŸ‘†ğŸ»åŒç»„ç”¨æˆ· ğŸ‘†ğŸ»å…¶ä»–ç”¨æˆ·æ•°å­—è¡¨ç¤ºæ³•--- --x -w- -wx r-- r-x rw- rwx000 001 010 011 100 101 110 111 å‘½ä»¤chmod å¯ç”¨äºä¿®æ”¹æ–‡ä»¶çš„è®¿é—®æƒé™ format: chmod &lt;mode&gt; &lt;file&gt; mode: user: u(userï¼Œæ‰€æœ‰è€…),g(groupï¼ŒåŒç»„ç”¨æˆ·),o(otherï¼Œå…¶å®ƒç”¨æˆ·),a(all) operation: +ï¼ˆæ·»åŠ æƒé™ï¼‰ã€-ï¼ˆç§»é™¤æƒé™ï¼‰æˆ– =ï¼ˆè®¾ç½®æƒé™ï¼‰ permission: r(read)ã€w(write)ã€x(execute)ã€s(setuidï¼Œè®¾ç½®ç”¨æˆ· ID)ã€t(setgidï¼Œè®¾ç½®ç»„ ID) æ–‡ä»¶ I/Oopen &amp; creat &amp; closeint open(const char *pathname, int flags, ...); è¿™ä¸ªå‡½æ•°ç”¨äºæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æˆ–è€…è®¾å¤‡ï¼Œè¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦(å½“å‰è¿›ç¨‹ä¸­æœ€å°æœªä½¿ç”¨çš„æè¿°ç¬¦æ•°å€¼)ã€‚pathname æ˜¯æ–‡ä»¶æˆ–è®¾å¤‡çš„è·¯å¾„åï¼Œflags æŒ‡å®šäº†æ‰“å¼€æ–‡ä»¶çš„æ¨¡å¼ï¼ˆæ¯”å¦‚è¯»ã€å†™ã€åˆ›å»ºã€è¿½åŠ ç­‰ï¼‰ int creat( const char *pathname, mode_t mode);è¯¥å‡½æ•°ç”¨äºåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå…¶ç­‰æ•ˆäºopen( pathname, O_WRONLY | O_CREAT | O_TRUNC, mode);creat å‡½æ•°çš„ä¸€ä¸ªä¸è¶³ä¹‹å¤„æ˜¯å®ƒä»¥åªå†™æ–¹å¼æ‰“å¼€æ‰€åˆ›å»ºçš„æ–‡ä»¶,æ—©æœŸ UNIX ç‰ˆæœ¬ä¸­ open çš„ç¬¬äºŒä¸ªå‚æ•°ä¸åŒ…å« O_CREAT ï¼Œæ— æ³•æ‰“å¼€ä¸€ä¸ªå°šæœªå­˜åœ¨çš„æ–‡ä»¶ã€‚å¦‚æœè¦åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶è¦å…ˆå†™åè¯»è¯¥æ–‡ä»¶ã€‚åˆ™å¿…é¡»å…ˆä¾æ¬¡è°ƒç”¨creatï¼Œcloseï¼Œopen int close( int filedes ); è¯¥å‡½æ•°å…³é—­æ‰“å¼€çš„ä¸€ä¸ªæ–‡ä»¶ã€‚å†…æ ¸å¯¹æ–‡ä»¶æè¿°ç¬¦è¡¨ã€å¯¹åº”çš„æ–‡ä»¶è¡¨é¡¹å’Œç´¢å¼•èŠ‚ç‚¹è¡¨é¡¹è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼Œæ¥å®Œæˆå…³é—­æ–‡ä»¶çš„æ“ä½œã€‚è¿›ç¨‹å…³é—­æ–‡ä»¶åï¼Œå°±ä¸èƒ½å†é€šè¿‡è¯¥æ–‡ä»¶æè¿°ç¬¦æ“ä½œè¯¥æ–‡ä»¶ã€‚å½“ä¸€ä¸ªè¿›ç¨‹ç»ˆæ­¢æ—¶ï¼Œå®ƒæ‰€æœ‰çš„æ‰“å¼€æ–‡ä»¶å°†ç”±å†…æ ¸è‡ªåŠ¨å…³é—­ read &amp; write &amp; lseekssize_t read( int filedes, void *buf, size_t nbytes); read å‡½æ•°ä»æ‰“å¼€çš„æ–‡ä»¶ä¸­è¯»æ•°æ®ã€‚å¦‚æˆåŠŸï¼Œåˆ™è¿”å›å®é™…è¯»åˆ°çš„å­—èŠ‚æ•°ï¼Œå¦‚å·²åˆ°è¾¾æ–‡ä»¶çš„æœ«å°¾æˆ–æ— æ•°æ®å¯è¯»ï¼Œåˆ™è¿”å› 0,è¯»æ“ä½œå®Œæˆåï¼Œæ–‡ä»¶çš„å½“å‰ä½ç½®å°†ä»è¯»ä¹‹å‰çš„ä½ç½®åŠ ä¸Šå®é™…è¯»çš„å­—èŠ‚æ•°ï¼›æœ‰å¤šç§æƒ…å†µå¯ä½¿å®é™…è¯»åˆ°çš„å­—èŠ‚æ•°å°‘äºè¦æ±‚è¯»çš„å­—èŠ‚æ•°ï¼š è¯»æ™®é€šæ–‡ä»¶ï¼Œåœ¨è¯»åˆ°è¦æ±‚å­—èŠ‚æ•°ä¹‹å‰å°±åˆ°è¾¾æ–‡ä»¶å°¾ï¼› å½“ä»ç»ˆç«¯è®¾å¤‡è¯»ï¼Œé€šå¸¸ä¸€æ¬¡æœ€å¤šè¯»ä¸€è¡Œï¼› å½“ä»ç½‘ç»œè¯»æ—¶ï¼Œç½‘ç»œä¸­çš„ç¼“å†²æœºæ„å¯èƒ½é€ æˆè¿”å›å€¼å°äºæ‰€è¦æ±‚è¯»çš„å­—èŠ‚æ•°ï¼› æŸäº›é¢å‘è®°å½•çš„è®¾å¤‡ï¼Œå¦‚ç£å¸¦ï¼Œä¸€æ¬¡æœ€å¤šè¿”å›ä¸€ä¸ªè®°å½•ã€‚ ssize_t write( int filedes, const void *buf, size_t nbytes); è¯¥å‡½æ•°è¿”å›å®é™…å†™çš„å­—èŠ‚æ•°ï¼Œé€šå¸¸ä¸å‚æ•° nbytes çš„å€¼ç›¸åŒï¼Œå¦åˆ™è¡¨ç¤ºå‡ºé”™ã€‚å¦‚æœå‡ºé”™ï¼Œåˆ™è¿”å›-1ã€‚write å‡ºé”™çš„åŸå› å¯èƒ½æ˜¯ç£ç›˜æ»¡ã€æ²¡æœ‰è®¿é—®æƒé™ã€æˆ–å†™è¶…è¿‡æ–‡ä»¶é•¿åº¦é™åˆ¶ç­‰ç­‰ã€‚å¯¹äºæ™®é€šæ–‡ä»¶ï¼Œå†™æ“ä½œä»æ–‡ä»¶å½“å‰ä½ç½®å¼€å§‹å†™ï¼ˆé™¤éæ‰“å¼€æ–‡ä»¶æ—¶æŒ‡å®šäº† O_APPEND é€‰é¡¹ï¼‰ã€‚å†™æ“ä½œå®Œæˆåï¼Œæ–‡ä»¶çš„å½“å‰ä½ç½®å°†ä»å†™ä¹‹å‰çš„ä½ç½®åŠ ä¸Šå®é™…å†™çš„å­—èŠ‚æ•°ã€‚ off_t lseek( int filedes, off_t offset, int whence); è¿›ç¨‹ä¸­æ¯æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªä¸å…¶ç›¸å…³è”çš„â€œæ–‡ä»¶å½“å‰ä½ç½®â€ï¼ˆè¯»å†™ä½ç½®ï¼‰æ‰“å¼€æ–‡ä»¶æ—¶ï¼Œå¦‚æœæŒ‡å®šäº†O_APPENDé€‰é¡¹åˆ™æ–‡ä»¶å½“å‰ä½ç½®ä¸ºæ–‡ä»¶å°¾ï¼Œå…¶ä»–æƒ…å†µä¸‹æ–‡ä»¶å½“å‰ä½ç½®é»˜è®¤ä¸ºæ–‡ä»¶å¤´ï¼ˆ0ï¼‰lseek å‡½æ•°ç”¨äºè®¾ç½®æˆ–æŸ¥è¯¢æ–‡ä»¶å½“å‰ä½ç½®å‡½æ•°å¯¹å‚æ•°çš„è§£é‡Šä¸å‚æ•° whence çš„å€¼æœ‰å…³(offset å¯æ­£å¯è´Ÿï¼Œä»¥å­—èŠ‚ä¸ºå•ä½) è‹¥whenceæ˜¯SEEK_SETï¼Œåˆ™å°†è¯¥æ–‡ä»¶å½“å‰ä½ç½®è®¾ä¸ºæ–‡ä»¶å¤´+offset è‹¥whenceæ˜¯SEEK_CURï¼Œåˆ™å°†è¯¥æ–‡ä»¶å½“å‰ä½ç½®è®¾ä¸ºæ–‡ä»¶å½“å‰ä½ç½®+offset è‹¥whenceæ˜¯SEEK_ENDï¼Œåˆ™å°†è¯¥æ–‡ä»¶å½“å‰ä½ç½®è®¾ä¸ºæ–‡ä»¶å°¾+offset ä¸ªå­—èŠ‚ è‹¥ lseek æˆåŠŸæ‰§è¡Œï¼Œåˆ™è¿”å›æ–°çš„æ–‡ä»¶å½“å‰ä½ç½®ã€‚å› æ­¤å¯ç”¨ lseek æŸ¥è¯¢æ–‡ä»¶æ–‡ä»¶å½“å‰ä½ç½®currpos = lseek( fd, 0, SEEK_CUR)lseek ä»…å°†æ–‡ä»¶å½“å‰ä½ç½®è®°å½•åœ¨å†…æ ¸ file ç»“æ„ä¸­ï¼Œå®ƒå¹¶ä¸å¼•èµ·ä»»ä½• I/O æ“ä½œï¼Œç„¶åç”¨äºå½±å“ä¸‹ä¸€æ¬¡è¯»ã€å†™æ“ä½œã€‚æ–‡ä»¶å½“å‰ä½ç½®å¯ä»¥å¤§äºæ–‡ä»¶çš„å½“å‰é•¿åº¦ï¼Œä½†å¹¶ä¸æ”¹å˜ç´¢å¼•èŠ‚ç‚¹ä¸­æ–‡ä»¶é•¿åº¦ä¿¡æ¯ï¼ˆä¸‹ä¸€æ¬¡å†™å°†å»¶é•¿è¯¥æ–‡ä»¶ï¼Œå¹¶åœ¨æ–‡ä»¶ä¸­æ„æˆä¸€ä¸ªç©ºæ´ï¼Œä½†æ–‡ä»¶å¤§å°å¹¶ä¸æ˜¯æ–‡ä»¶å½“å‰ä½ç½®æŒ‡ç¤ºçš„å€¼ã€‚å¯¹ç©ºæ´ä½ç½®çš„è¯»æ“ä½œå°†è¿”å› 0ï¼‰ ç›®å½•æ“ä½œä¸æ–‡ä»¶å±æ€§ç›®å½•æ“ä½œ åŠŸèƒ½ å¸¸ç”¨å‡½æ•° å¤´æ–‡ä»¶ è·å–å½“å‰å·¥ä½œè·¯å¾„ getcwd, get_current_dir_name unistd.h æ‰“å¼€å…³é—­ç›®å½• opendir, closedir dirent.h è¯»å–ç›®å½•æ–‡ä»¶ readdir sys/types.h, dirent.h Linux å‘½ä»¤æ¼”ç¤ºå¯è§[[LinuxCmds#ç›®å½•æ“ä½œ]] æ–‡ä»¶å±æ€§ç®¡ç†è¯»å–æ–‡ä»¶å±æ€§ å¸¸ç”¨å‡½æ•°ï¼šstatï¼Œlstatï¼Œfstat å¤´æ–‡ä»¶ï¼š sys/stat.h å‡½æ•°å®šä¹‰ï¼š int stat(const char *path, struct stat *buf); int lstat(const char *path, struct stat *buf); ä¸¤ä¸ªå‡½æ•°å‚æ•°ç›¸åŒï¼ŒåŠŸèƒ½ç±»ä¼¼è¯»å– path å‚æ•°æ‰€æŒ‡å®šæ–‡ä»¶çš„æ–‡ä»¶å±æ€§å¹¶å°†å…¶å¡«å……åˆ° buf å‚æ•°æ‰€æŒ‡å‘çš„ç»“æ„ä½“ä¸­å¯¹äºç¬¦å·é“¾æ¥æ–‡ä»¶ï¼Œlstat è¿”å›ç¬¦å·é“¾æ¥çš„æ–‡ä»¶å±æ€§ï¼Œstat è¿”å›ç¬¦å·é“¾æ¥å¼•ç”¨æ–‡ä»¶çš„æ–‡ä»¶å±æ€§int fstat(int filedes, struct stat *buf);ä¸å‰ä¸¤ä¸ªå‡½æ•°åŠŸèƒ½ç±»ä¼¼ï¼ŒæŒ‡å®šæ–‡ä»¶çš„æ–¹å¼æ”¹ä¸ºé€šè¿‡æ–‡ä»¶æè¿°ç¬¦ 123456789101112131415struct stat { mode_t st_mode; æ–‡ä»¶ç±»å‹ä¸è®¿é—®æƒé™ ino_t st_ino; ièŠ‚ç‚¹å· dev_t st_dev; æ–‡ä»¶ä½¿ç”¨çš„è®¾å¤‡å· dev_t st_rdev; è®¾å¤‡æ–‡ä»¶çš„è®¾å¤‡å· nlink_t st_nlink; æ–‡ä»¶çš„ç¡¬é“¾æ¥æ•° uid_t st_uid; æ–‡ä»¶æ‰€æœ‰è€…ç”¨æˆ·ID gid_t st_gid; æ–‡ä»¶æ‰€æœ‰è€…ç»„ID off_t st_size; æ–‡ä»¶å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ time_t st_atime; æœ€åä¸€æ¬¡è®¿é—®è¯¥æ–‡ä»¶çš„æ—¶é—´ time_t st_mtime; æœ€åä¸€æ¬¡ä¿®æ”¹è¯¥æ–‡ä»¶çš„æ—¶é—´ time_t st_ctime; æœ€åä¸€æ¬¡æ”¹å˜è¯¥æ–‡ä»¶çŠ¶æ€çš„æ—¶é—´ blksize_t st_blksize; åŒ…å«è¯¥æ–‡ä»¶çš„ç£ç›˜å—çš„å¤§å° blkcnt_t st_blocks; è¯¥æ–‡ä»¶æ‰€å çš„ç£ç›˜å—æ•°}; mode_t st_mode ä¸ºæ— ç¬¦å·æ•´æ•°ï¼Œå…¶ä½ 16 ä½å®šä¹‰å¦‚ä¸‹ åˆ¤æ–­æ–‡ä»¶ç±»å‹ æ˜¯å¦ä¸ºæ™®é€šæ–‡ä»¶: S_ISREG(st_mode) #define S_IFMT 0170000 #define S_IFREG 0100000 #define S_ISREG(m) (((m) &amp; S_IFMT) == S_IFREG) æ˜¯å¦ä¸ºç›®å½•æ–‡ä»¶ S_ISDIR(st_mode) æ˜¯å¦ä¸ºå­—ç¬¦è®¾å¤‡ S_ISCHR(st_mode) æ˜¯å¦ä¸ºå—è®¾å¤‡ S_ISBLK(st_mode) æ˜¯å¦ä¸º FIFO S_ISFIFO(st_mode) æ˜¯å¦ä¸ºå¥—æ¥å­— S_ISSOCK(st_mode) æ˜¯å¦ä¸ºç¬¦å·è¿æ¥ S_ISLINK(st_mode)","link":"/UESTC/OS/Ch7-1LinuxUnix/"},{"title":"Unix&#x2F;Linux OS Introduction","text":"è¿›ç¨‹è¿è¡Œä¸ç›‘æ§Linux è¿›ç¨‹æ§åˆ¶å—è¿›ç¨‹çš„å¯åŠ¨è¿›ç¨‹çš„è¿è¡Œæ§åˆ¶è¿›ç¨‹çš„ç›‘æµ‹æ“ä½œç³»ç»Ÿæ¥å£ä¸åº”ç”¨å¼€å‘","link":"/UESTC/OS/Ch7-2LinuxUnix/"},{"title":"Concurrency vs Parallelism","text":"å½“æˆ‘ä»¬è°ˆè®ºè®¡ç®—æœºç§‘å­¦å’Œäº’è”ç½‘æŠ€æœ¯æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°å¹¶å‘(concurrency)å’Œå¹¶è¡Œ(parallelism)è¿™ä¸¤ä¸ªè¯ã€‚å®ƒä»¬å¬èµ·æ¥ç›¸ä¼¼ï¼Œä½†å®é™…ä¸Šåˆæœ‰ä¸€äº›é‡è¦çš„åŒºåˆ«ã€‚ å¹¶å‘ Concurrencyæ˜¯æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶é—´é—´éš”å†…å‘ç”ŸCPU äº¤æ›¿æ‰§è¡Œå¤šä¸ªç¨‹åº,ç”±äºåˆ‡æ¢é€Ÿåº¦å¾ˆå¿«,ä»¥äººç±»çš„æ„Ÿè§‰æ¥çœ‹æ˜¯åŒæ—¶æ‰§è¡Œçš„;ä½†åœ¨å¾®è§‚å±‚é¢,åœ¨åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€æ¡æŒ‡ä»¤æ‰§è¡Œå¤„ç†å™¨åˆ†æ—¶å¤ç”¨,å¤šçº¿ç¨‹äº¤ç»‡æ‰§è¡Œ;åœ¨ç‰¹å®šæŸä¸ªæ—¶åˆ»ï¼ŒæŸä¸€ä¸ªçº¿ç¨‹ä»¥æ’ä»–æ–¹å¼ç‹¬å  CPU èµ„æºï¼Œè€Œåœ¨ä¸åŒæ—¶åˆ»ï¼Œä¸åŒçš„çº¿ç¨‹å ç”¨ CPU è¿è¡Œï¼Œä»è€Œå®ç°åœ¨ä¸€æ®µæ—¶é—´å†…åŒæ—¶æ‰§è¡Œå¤šä¸ªçº¿ç¨‹çš„è¡¨è±¡ã€‚ å¹¶è¡Œ Parallelismæ˜¯æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶åˆ»å‘ç”Ÿ åŒä¸€æ—¶åˆ»å†…,æ— è®ºä»å¾®è§‚è¿˜æ˜¯å®è§‚å±‚é¢æ¥çœ‹ï¼Œæœ‰å¤šæ¡æŒ‡ä»¤åœ¨å¤šä¸ªå¤„ç†å™¨ä¸Šæ˜¯åŒæ—¶æ‰§è¡Œçš„ æ€»ç»“ Conclusionå¤š CPU æŒ‡çš„æ˜¯åœ¨ä¸€å¥—ç³»ç»Ÿä¸­æ‹¥æœ‰å¤šé¢— CPUï¼Œå¸¸è§äºæœåŠ¡å™¨ã€å·¥ä½œç«™æˆ–è®¡ç®—ä¸­å¿ƒï¼Œå¯ä»¥æä¾›åºå¤§çš„ç®—åŠ›ã€‚ å¤šæ ¸æ˜¯æŒ‡åœ¨ä¸€æšå¤„ç†å™¨ï¼ˆprocessorï¼‰ä¸­é›†æˆä¸¤ä¸ªæˆ–å¤šä¸ªå®Œæ•´çš„è®¡ç®—å¼•æ“ã€‚ Thread Concurrency Thread Parallelism Process Concurrency Process Parallelism å¤š CPU âœ”ï¸ âœ”ï¸ âœ”ï¸ âœ”ï¸ å¤šæ ¸ âœ”ï¸ âœ”ï¸ âœ”ï¸ âŒ å•æ ¸ CPU âœ”ï¸ âŒ âœ”ï¸ âŒ æ“ä½œç³»ç»Ÿä¼šæ‹†åˆ† CPU ä¸ºä¸€æ®µæ®µæ—¶é—´çš„è¿è¡Œç‰‡ï¼Œè½®æµåˆ†é…ç»™ä¸åŒçš„ç¨‹åºã€‚å¯¹äºå¤š cpuï¼Œå¤šä¸ªè¿›ç¨‹å¯ä»¥å¹¶è¡Œåœ¨å¤šä¸ª cpu ä¸­è®¡ç®—ï¼Œå½“ç„¶ä¹Ÿä¼šå­˜åœ¨è¿›ç¨‹åˆ‡æ¢ï¼›å¯¹äºå• cpuï¼Œå¤šä¸ªè¿›ç¨‹åœ¨è¿™ä¸ªå• cpu ä¸­æ˜¯å¹¶å‘è¿è¡Œï¼Œæ ¹æ®æ—¶é—´ç‰‡è¯»å–ä¸Šä¸‹æ–‡+æ‰§è¡Œç¨‹åº+ä¿å­˜ä¸Šä¸‹æ–‡ã€‚åŒä¸€ä¸ªè¿›ç¨‹åŒä¸€æ—¶é—´æ®µåªèƒ½åœ¨ä¸€ä¸ª cpu ä¸­è¿è¡Œï¼Œå¦‚æœè¿›ç¨‹æ•°å°äº cpu æ•°ï¼Œé‚£ä¹ˆæœªä½¿ç”¨çš„ cpu å°†ä¼šç©ºé—²ã€‚ è¿›ç¨‹æœ‰è‡ªå·±çš„ç‹¬ç«‹åœ°å€ç©ºé—´ï¼Œæ¯å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹ï¼Œç³»ç»Ÿå°±ä¼šä¸ºå®ƒåˆ†é…åœ°å€ç©ºé—´ï¼Œå»ºç«‹æ•°æ®è¡¨æ¥ç»´æŠ¤ä»£ç æ®µã€å †æ ˆæ®µå’Œæ•°æ®æ®µï¼Œè¿™ç§æ“ä½œéå¸¸æ˜‚è´µã€‚è€Œçº¿ç¨‹æ˜¯å…±äº«è¿›ç¨‹ä¸­çš„æ•°æ®çš„ï¼Œä½¿ç”¨ç›¸åŒçš„åœ°å€ç©ºé—´ï¼Œå› æ­¤ CPU åˆ‡æ¢ä¸€ä¸ªçº¿ç¨‹çš„èŠ±è´¹è¿œæ¯”è¿›ç¨‹è¦å°å¾ˆå¤šï¼ŒåŒæ—¶åˆ›å»ºä¸€ä¸ªçº¿ç¨‹çš„å¼€é”€ä¹Ÿæ¯”è¿›ç¨‹è¦å°å¾ˆå¤šã€‚ å¯¹äºå¤šæ ¸ cpuï¼Œè¿›ç¨‹ä¸­çš„å¤šçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œï¼Œæ‰§è¡Œè¿‡ç¨‹ä¸­å­˜åœ¨çº¿ç¨‹åˆ‡æ¢ï¼Œçº¿ç¨‹åˆ‡æ¢å¼€é”€è¾ƒå°ã€‚å¯¹äºå•æ ¸ cpuï¼Œå¤šä¸ªçº¿ç¨‹åœ¨ cpu ä¸­å¹¶å‘æ‰§è¡Œï¼Œæ ¹æ®æ—¶é—´ç‰‡åˆ‡æ¢çº¿ç¨‹ã€‚åŒä¸€ä¸ªçº¿ç¨‹åŒä¸€æ—¶é—´æ®µåªèƒ½åœ¨ä¸€ä¸ª cpu å†…æ ¸ä¸­è¿è¡Œï¼Œå¦‚æœçº¿ç¨‹æ•°å°äº cpu å†…æ ¸æ•°ï¼Œé‚£ä¹ˆå°†æœ‰å¤šä½™çš„å†…æ ¸ç©ºé—²ã€‚ Refhttps://www.jianshu.com/p/cbf9588b2afbhttps://zhuanlan.zhihu.com/p/383279972https://blog.csdn.net/weixin_45163798/article/details/104596138","link":"/UESTC/OS/ConcurrencyvsParallelism/"},{"title":"Process &amp; Thread","text":"ProcessDefinition A process is an instance of a program running in a computer. A process is an independent unit of execution in a computer program, including the complete set of instructions and the associated memory and resources. It is a program that is under execution. å…¸å‹çš„è¿›ç¨‹å®šä¹‰æœ‰ï¼š è¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œã€‚ è¿›ç¨‹æ˜¯ä¸€ä¸ªç¨‹åºåŠå…¶æ•°æ®åœ¨å¤„ç†æœºä¸Šé¡ºåºæ‰§è¡Œæ—¶æ‰€å‘ç”Ÿçš„æ´»åŠ¨ã€‚ è¿›ç¨‹æ˜¯ç¨‹åºåœ¨ä¸€ä¸ªæ•°æ®é›†åˆä¸Šè¿è¡Œçš„è¿‡ç¨‹ï¼Œå®ƒæ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½ã€‚ Features åŠ¨æ€æ€§ Dynamic:è¿›ç¨‹çš„å®è´¨æ˜¯è¿›ç¨‹å®ä½“çš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œå› æ­¤ï¼ŒåŠ¨æ€æ€§æ˜¯è¿›ç¨‹çš„æœ€åŸºæœ¬çš„ç‰¹å¾ã€‚åŠ¨æ€æ€§è¡¨ç°åœ¨â€œå®ƒç”±åˆ›å»ºè€Œäº§ç”Ÿï¼Œç”±è°ƒåº¦è€Œæ‰§è¡Œï¼Œç”±æ’¤æ¶ˆè€Œæ¶ˆäº¡â€ã€‚å¯è§ï¼Œè¿›ç¨‹å®ä½“æœ‰ä¸€å®šçš„ç”Ÿå‘½æœŸã€‚ å¹¶å‘æ€§ Concurrency:å¤šä¸ªè¿›ç¨‹å®ä½“åŒå­˜äºå†…å­˜ä¸­ï¼Œä¸”èƒ½åœ¨ä¸€æ®µæ—¶é—´å†…åŒæ—¶è¿è¡Œã€‚ ç‹¬ç«‹æ€§ Independence:è¿›ç¨‹å®ä½“æ˜¯ä¸€ä¸ªèƒ½ç‹¬ç«‹è¿è¡Œã€ç‹¬ç«‹åˆ†é…èµ„æºå’Œç‹¬ç«‹æ¥å—è°ƒåº¦çš„åŸºæœ¬å•ä½ã€‚ å¼‚æ­¥æ€§ Asynchronism:è¿›ç¨‹æŒ‰å„è‡ªç‹¬ç«‹çš„ã€ä¸å¯é¢„çŸ¥çš„é€Ÿåº¦å‘å‰æ¨è¿›ï¼Œæˆ–è¯´è¿›ç¨‹å®ä½“æŒ‰å¼‚æ­¥æ–¹å¼è¿è¡Œã€‚ Componentsè¿›ç¨‹å®ä½“ Process EntityåŒ…æ‹¬ï¼š ç¨‹åºå— Program Block: The code that is to be executed. æ•°æ®å— Data Block: The variables and data that are used by the program. å †æ ˆ Stack: The stack that is used to store the temporary data and function calls. è¿›ç¨‹æ§åˆ¶å— Process control block(PCB): It is a data structure that contains information about the process. It includes process state, process ID, CPU registers, CPU scheduling information, memory management information, and other information. It is used by the operating system to manage the process. [Ch2-1ProcessContorl#è¿›ç¨‹æ§åˆ¶å— PCB] States æ–°å»ºæ€ New: è¿›ç¨‹å·²ç»åˆ›å»ºï¼Œä½†æœªè¢« OS æ¥çº³ä¸ºå¯æ‰§è¡Œè¿›ç¨‹ï¼Œå¹¶ä¸”ç¨‹åºè¿˜åœ¨è¾…å­˜ï¼ŒPCB åœ¨å†…å­˜ å°±ç»ªæ€ Ready: The process is ready to be executed. è¿è¡Œæ€ Running: The process is currently being executed. é˜»å¡æ€ Blocked/ç­‰å¾…æ€ Waiting: The process is waiting for some event to occur. ç»ˆæ­¢æ€ Exit: å› åœæ­¢æˆ–å–æ¶ˆï¼Œè¢« OS ä»æ‰§è¡ŒçŠ¶æ€é‡Šæ”¾ å½“å‡ºç°äº†å¼•èµ·è¿›ç¨‹æŒ‚èµ·çš„äº‹ä»¶æ—¶ï¼Œç”¨æˆ·è¯·æ±‚å°†è‡ªå·±æŒ‚èµ·ï¼Œæˆ–è€…çˆ¶è¿›ç¨‹è¯·æ±‚æŒ‚èµ·è‡ªå·±çš„å­è¿›ç¨‹ï¼Œè¿™æ—¶ä½¿ç”¨æŒ‚èµ·åŸè¯­Suspend()å½“å‘ç”Ÿæ¿€æ´»äº‹ä»¶åï¼Œç³»ç»Ÿåˆ©ç”¨æ¿€æ´»åŸè¯­Active() å°†æŒ‡å®šè¿›ç¨‹æ¿€æ´»ã€‚æ¿€æ´»åŸè¯­å°†è¿›ç¨‹ä»å¤–å­˜è°ƒå…¥å†…å­˜ï¼Œç„¶åæ£€æŸ¥è¿›ç¨‹çŠ¶æ€æŒ‚èµ·çŠ¶æ€åˆç§°ä¸ºé™æ­¢çŠ¶æ€ï¼Œä¸€ä¸ªå°±ç»ªè¿›ç¨‹è¢«æŒ‚èµ·ï¼Œå˜ä¸ºé™æ­¢å°±ç»ªï¼›é˜»å¡çŠ¶æ€è¿›ç¨‹è¢«æŒ‚èµ·ï¼Œç§°ä¸ºé™æ­¢é˜»å¡ã€‚å¤„äºé™æ­¢çŠ¶æ€çš„è¿›ç¨‹ä¿å­˜åœ¨ç£ç›˜(å¤–å­˜)ä¸Šï¼Œå®ƒåªæœ‰è¢«å¯¹æ¢åˆ°å†…å­˜æ‰èƒ½è¢«è°ƒåº¦æ‰§è¡Œã€‚ Note å³ä½¿è¿›ç¨‹ç­‰å¾…çš„äº‹ä»¶å·²ç»å‘ç”Ÿï¼Œåªè¦è¿›ç¨‹å¤„äºæŒ‚èµ·çŠ¶æ€ï¼Œå®ƒå°±ä¸èƒ½æ‰§è¡Œã€‚åªæœ‰å½“è¿›ç¨‹ä»æŒ‚èµ·çŠ¶æ€æ¢å¤æ—¶ï¼Œå®ƒæ‰èƒ½æ ¹æ®è‡ªèº«çš„å°±ç»ªæ¡ä»¶ï¼ˆå¦‚ç­‰å¾…çš„äº‹ä»¶æ˜¯å¦å·²ç»å‘ç”Ÿï¼‰å†³å®šæ˜¯å¦å¯ä»¥æ‰§è¡Œã€‚ ä½¿ä¹‹æŒ‚èµ·çš„è¿›ç¨‹å¯ä»¥ä¸ºï¼šè‡ªèº«ã€å…¶çˆ¶è¿›ç¨‹ã€OS åªæœ‰æŒ‚èµ·å®ƒçš„è¿›ç¨‹æ‰èƒ½ä½¿ä¹‹ç”±æŒ‚èµ·çŠ¶æ€è½¬æ¢ä¸ºå…¶ä»–çŠ¶æ€ Causes of Suspension ç»ˆç«¯ç”¨æˆ·çš„è¯·æ±‚ã€‚ çˆ¶è¿›ç¨‹è¯·æ±‚ã€‚ è´Ÿè·è°ƒèŠ‚çš„éœ€è¦ã€‚å½“å®æ—¶ç³»ç»Ÿä¸­çš„å·¥ä½œè´Ÿè·è¾ƒé‡ï¼ŒæŠŠä¸€äº›ä¸é‡è¦çš„è¿›ç¨‹æŒ‚èµ·ï¼Œä»¥ä¿è¯ç³»ç»Ÿèƒ½æ­£å¸¸è¿è¡Œã€‚ æ“ä½œç³»ç»Ÿçš„éœ€è¦ã€‚æ“ä½œç³»ç»Ÿæœ‰æ—¶å¸Œæœ›æŒ‚èµ·æŸäº›è¿›ç¨‹ï¼Œä»¥ä¾¿æ£€æŸ¥è¿è¡Œä¸­çš„èµ„æºä½¿ç”¨æƒ…å†µæˆ–è¿›è¡Œè®°è´¦ã€‚ Blocked VS Suspend é˜»å¡ï¼šæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ç”±äºå‘ç”ŸæŸäº‹ä»¶ï¼ˆå¦‚ I/O è¯·æ±‚ã€ç”³è¯·ç¼“å†²åŒºå¤±è´¥ç­‰ï¼‰æš‚æ—¶æ— æ³•ç»§ç»­æ‰§è¡Œã€‚æ­¤æ—¶å¼•èµ·è¿›ç¨‹è°ƒåº¦ï¼ŒOS æŠŠå¤„ç†æœºåˆ†é…ç»™å¦ä¸€ä¸ªå°±ç»ªè¿›ç¨‹ï¼Œè€Œè®©å—é˜»è¿›ç¨‹å¤„äºæš‚åœçŠ¶æ€ï¼Œä¸€èˆ¬å°†è¿™ç§çŠ¶æ€ç§°ä¸ºé˜»å¡çŠ¶æ€ã€‚æŒ‚èµ·ï¼šç”±äºç³»ç»Ÿå’Œç”¨æˆ·çš„éœ€è¦å¼•å…¥äº†æŒ‚èµ·çš„æ“ä½œï¼Œè¿›ç¨‹è¢«æŒ‚èµ·æ„å‘³ç€è¯¥è¿›ç¨‹å¤„äºé™æ­¢çŠ¶æ€ã€‚å¦‚æœè¿›ç¨‹æ­£åœ¨æ‰§è¡Œï¼Œå®ƒå°†æš‚åœæ‰§è¡Œï¼Œè‹¥åŸæœ¬å¤„äºå°±ç»ªçŠ¶æ€ï¼Œåˆ™è¯¥è¿›ç¨‹æ­¤æ—¶æš‚ä¸æ¥å—è°ƒåº¦ã€‚ Sameï¼š è¿›ç¨‹éƒ½æš‚åœæ‰§è¡Œ è¿›ç¨‹éƒ½é‡Šæ”¾ CPUï¼Œå³ä¸¤ä¸ªè¿‡ç¨‹éƒ½ä¼šæ¶‰åŠä¸Šä¸‹æ–‡åˆ‡æ¢ Diffï¼š å¯¹ç³»ç»Ÿèµ„æºå ç”¨ä¸åŒï¼šè™½ç„¶éƒ½é‡Šæ”¾äº† CPUï¼Œä½†é˜»å¡çš„è¿›ç¨‹ä»å¤„äºå†…å­˜ä¸­ï¼Œè€ŒæŒ‚èµ·çš„è¿›ç¨‹é€šè¿‡â€œå¯¹æ¢ Swappingâ€æŠ€æœ¯è¢«æ¢å‡º(Swap Out)åˆ°å¤–å­˜ï¼ˆç£ç›˜ï¼‰ä¸­ã€‚ å‘ç”Ÿæ—¶æœºä¸åŒï¼šé˜»å¡ä¸€èˆ¬åœ¨è¿›ç¨‹ç­‰å¾…èµ„æºï¼ˆIO èµ„æºã€ä¿¡å·é‡ç­‰ï¼‰æ—¶å‘ç”Ÿï¼›è€ŒæŒ‚èµ·æ˜¯ç”±äºç”¨æˆ·å’Œç³»ç»Ÿçš„éœ€è¦ï¼Œä¾‹å¦‚ï¼Œç»ˆç«¯ç”¨æˆ·éœ€è¦æš‚åœç¨‹åºç ”ç©¶å…¶æ‰§è¡Œæƒ…å†µæˆ–å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€OS ä¸ºäº†æé«˜å†…å­˜åˆ©ç”¨ç‡éœ€è¦å°†æš‚æ—¶ä¸èƒ½è¿è¡Œçš„è¿›ç¨‹ï¼ˆå¤„äºå°±ç»ªæˆ–é˜»å¡é˜Ÿåˆ—çš„è¿›ç¨‹ï¼‰è°ƒå‡ºåˆ°ç£ç›˜ æ¢å¤æ—¶æœºä¸åŒï¼šé˜»å¡è¦åœ¨ç­‰å¾…çš„èµ„æºå¾—åˆ°æ»¡è¶³ï¼ˆä¾‹å¦‚è·å¾—äº†é”ï¼‰åï¼Œæ‰ä¼šè¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œç­‰å¾…è¢«è°ƒåº¦è€Œæ‰§è¡Œï¼›è¢«æŒ‚èµ·çš„è¿›ç¨‹ç”±å°†å…¶æŒ‚èµ·çš„å¯¹è±¡ï¼ˆå¦‚ç”¨æˆ·ã€ç³»ç»Ÿï¼‰åœ¨æ—¶æœºç¬¦åˆæ—¶ï¼ˆè°ƒè¯•ç»“æŸã€è¢«è°ƒåº¦è¿›ç¨‹é€‰ä¸­éœ€è¦é‡æ–°æ‰§è¡Œï¼‰å°†å…¶æ¿€æ´» Program vs Process: A program is a passive entity, such as a file containing a list of instructions stored on disk, whereas a process is an active entity, with a program counter specifying the next instruction to execute and a set of associated resources. å¯æ‰§è¡Œç¨‹åºå’Œè¿›ç¨‹çš„åŒºåˆ« ç¨‹åºæ˜¯æ°¸å­˜çš„ï¼›è¿›ç¨‹æ˜¯æš‚æ—¶çš„ï¼Œæ˜¯ç¨‹åºåœ¨æ•°æ®é›†ä¸Šçš„ä¸€æ¬¡æ‰§è¡Œï¼Œæœ‰åˆ›å»ºæœ‰æ’¤é”€ï¼Œå­˜åœ¨æ˜¯æš‚æ—¶çš„ï¼› ç¨‹åºæ˜¯é™æ€çš„è§‚å¿µï¼Œè¿›ç¨‹æ˜¯åŠ¨æ€çš„è§‚å¿µï¼› è¿›ç¨‹å…·æœ‰å¹¶å‘æ€§ï¼Œè€Œç¨‹åºæ²¡æœ‰ï¼› è¿›ç¨‹æ˜¯ç«äº‰è®¡ç®—æœºèµ„æºçš„åŸºæœ¬å•ä½ï¼Œç¨‹åºä¸æ˜¯ã€‚ è¿›ç¨‹å’Œç¨‹åºä¸æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼š ä¸€ä¸ªç¨‹åºå¯å¯¹åº”å¤šä¸ªè¿›ç¨‹å³å¤šä¸ªè¿›ç¨‹å¯æ‰§è¡ŒåŒä¸€ç¨‹åºï¼› ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æ‰§è¡Œä¸€ä¸ªæˆ–å‡ ä¸ªç¨‹åºã€‚ ThreadDefinition A thread is a basic unit of CPU utilization. It is a single sequence stream within a process. A thread is a lightweight process. It shares the same memory space and system resources with other threads in the same process. ä¹Ÿè¢«ç§°ä¸ºè½»é‡çº§è¿›ç¨‹ï¼Œæ›´åŠ è½»é‡ã€‚å¤šä¸ªçº¿ç¨‹å¯ä»¥åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­åŒæ—¶æ‰§è¡Œï¼Œå¹¶ä¸”å…±äº«è¿›ç¨‹çš„èµ„æºæ¯”å¦‚å†…å­˜ç©ºé—´ã€æ–‡ä»¶å¥æŸ„ã€ç½‘ç»œè¿æ¥ç­‰ã€‚ [Ch2-4Thread#çº¿ç¨‹æ¦‚è¿°] Features Lightweight: Threads are lightweight compared to processes. It takes less time to create and terminate threads. Shared resources: Threads in the same process share the same memory space and system resources. Efficiency: Threads are more efficient than processes because they share the same memory space and system resources. ComponentsTCB Components Tid: A unique thread identifier in the process. åŒè¿›ç¨‹ä¸€æ ·ï¼Œæ¯ä¸ªçº¿ç¨‹ä¹Ÿæœ‰ä¸€ä¸ªçº¿ç¨‹ ID;è¿›ç¨‹ ID åœ¨æ•´ä¸ªç³»ç»Ÿä¸­æ˜¯å”¯ä¸€çš„ï¼Œçº¿ç¨‹ ID åªåœ¨å®ƒæ‰€å±çš„è¿›ç¨‹ç¯å¢ƒä¸­å”¯ä¸€ Register set: These are small storage areas that quickly hold and release data. They store intermediate values during execution.Including Program counter which keeps track of the execution of the thread, indicating the address of the next instruction to be executed. Stack: It is a data structure that stores temporary data like function parameters, return addresses, and local variables. StatesåŒè¿›ç¨‹ä¸€æ ·ï¼Œçº¿ç¨‹ä¹‹é—´ä¹Ÿå­˜åœ¨å…±äº«èµ„æºå’Œç›¸äº’åˆä½œçš„åˆ¶çº¦å…³ç³»ï¼Œè‡´ä½¿çº¿ç¨‹åœ¨è¿è¡Œæ—¶ä¹Ÿå…·æœ‰é—´æ–­æ€§ã€‚çº¿ç¨‹è¿è¡Œæ—¶æœ‰ä»¥ä¸‹ 3 ç§çŠ¶æ€ï¼š Running æ‰§è¡ŒçŠ¶æ€:è¡¨ç¤ºçº¿ç¨‹æ­£è·å¾— CPU è€Œè¿è¡Œï¼› Ready å°±ç»ªçŠ¶æ€:è¡¨ç¤ºçº¿ç¨‹å·²å…·å¤‡äº†å„ç§è¿è¡Œæ¡ä»¶ï¼Œä¸€æ—¦è·å¾— CPU ä¾¿å¯æ‰§è¡Œï¼› Blocked é˜»å¡çŠ¶æ€:è¡¨ç¤ºçº¿ç¨‹åœ¨è¿è¡Œä¸­å› æŸäº‹ä»¶è€Œå—é˜»ï¼Œå¤„äºæš‚åœæ‰§è¡Œçš„çŠ¶æ€ï¼› Comparisonå¯¹æ¯”çº¿ç¨‹å…·æœ‰è®¸å¤šä¼ ç»Ÿè¿›ç¨‹æ‰€å…·æœ‰çš„ç‰¹å¾ï¼Œæ‰€ä»¥åˆç§°ä¸ºè½»å‹è¿›ç¨‹(Light-Weight Process) ï¼Œç›¸åº”åœ°æŠŠä¼ ç»Ÿè¿›ç¨‹ç§°ä¸ºé‡å‹è¿›ç¨‹(Heavy-Weight Process)ï¼Œä¼ ç»Ÿè¿›ç¨‹ç›¸å½“äºåªæœ‰ä¸€ä¸ªçº¿ç¨‹çš„ä»»åŠ¡ã€‚åœ¨å¼•å…¥äº†çº¿ç¨‹çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œé€šå¸¸ä¸€ä¸ªè¿›ç¨‹éƒ½æ‹¥æœ‰è‹¥å¹²ä¸ªçº¿ç¨‹ï¼Œè‡³å°‘ä¹Ÿæœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚ ä¸‹é¢ä»è°ƒåº¦æ€§ã€å¹¶å‘æ€§ã€ç³»ç»Ÿå¼€é”€å’Œæ‹¥æœ‰èµ„æºç­‰æ–¹é¢å¯¹çº¿ç¨‹å’Œè¿›ç¨‹è¿›è¡Œæ¯”è¾ƒã€‚ è°ƒåº¦ åœ¨ä¼ ç»Ÿçš„æ“ä½œç³»ç»Ÿä¸­ï¼Œè¿›ç¨‹ä½œä¸ºæ‹¥æœ‰èµ„æºå’Œç‹¬ç«‹è°ƒåº¦ã€åˆ†æ´¾çš„åŸºæœ¬å•ä½ã€‚è€Œåœ¨å¼•å…¥çº¿ç¨‹çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œåˆ™æŠŠçº¿ç¨‹ä½œä¸ºè°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ï¼Œè€Œè¿›ç¨‹ä½œä¸ºèµ„æºæ‹¥æœ‰çš„åŸºæœ¬å•ä½ã€‚ å¹¶å‘æ€§ åœ¨å¼•å…¥çº¿ç¨‹çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œä¸ä»…è¿›ç¨‹ä¹‹é—´å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œè€Œä¸”åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹ä¹‹é—´äº¦å¯å¹¶å‘æ‰§è¡Œï¼Œä½¿å¾—æ“ä½œç³»ç»Ÿå…·æœ‰æ›´å¥½çš„å¹¶å‘æ€§ï¼Œä»è€Œèƒ½æ›´åŠ æœ‰æ•ˆåœ°æé«˜ç³»ç»Ÿèµ„æºçš„åˆ©ç”¨ç‡å’Œç³»ç»Ÿçš„ååé‡ã€‚ æ‹¥æœ‰èµ„æº ä¸€èˆ¬è€Œè¨€ï¼Œçº¿ç¨‹è‡ªå·±ä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æº(ä¹Ÿæœ‰ä¸€ç‚¹å¿…ä¸å¯å°‘çš„èµ„æº)ï¼Œä½†å®ƒå¯ä»¥è®¿é—®å…¶éš¶å±è¿›ç¨‹çš„èµ„æºï¼Œå³ä¸€ä¸ªè¿›ç¨‹çš„ä»£ç æ®µã€æ•°æ®æ®µåŠæ‰€æ‹¥æœ‰çš„ç³»ç»Ÿèµ„æºï¼Œå¦‚å·²æ‰“å¼€çš„æ–‡ä»¶ã€I/O è®¾å¤‡ç­‰ï¼Œå¯ä»¥ä¾›è¯¥è¿›ç¨‹ä¸­çš„æ‰€æœ‰çº¿ç¨‹æ‰€å…±äº«ã€‚ ç‹¬ç«‹æ€§ åŒä¸€è¿›ç¨‹ä¸­çš„ä¸åŒçº¿ç¨‹å…±äº«è¿›ç¨‹çš„å†…å­˜ç©ºé—´å’Œèµ„æº ç³»ç»Ÿå¼€é”€ çº¿ç¨‹çš„åˆ‡æ¢åªéœ€è¦ä¿å­˜å’Œè®¾ç½®å°‘é‡çš„å¯„å­˜å™¨å†…å®¹ï¼Œä¸æ¶‰åŠå­˜å‚¨å™¨ç®¡ç†æ–¹é¢çš„æ“ä½œã€‚ ç”±äºä¸€ä¸ªè¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹å…·æœ‰ç›¸åŒçš„åœ°å€ç©ºé—´ï¼Œåœ¨åŒæ­¥å’Œé€šä¿¡çš„å®ç°æ–¹é¢çº¿ç¨‹ä¹Ÿæ¯”è¿›ç¨‹å®¹æ˜“ã€‚åœ¨ä¸€äº›æ“ä½œç³»ç»Ÿä¸­ï¼Œçº¿ç¨‹çš„åˆ‡æ¢ã€åŒæ­¥å’Œé€šä¿¡éƒ½æ— é¡»æ“ä½œç³»ç»Ÿå†…æ ¸çš„å¹²é¢„ã€‚ æ”¯æŒå¤šå¤„ç†æœºç³»ç»Ÿ ä¸€ä¸ªè¿›ç¨‹åˆ†ä¸ºå¤šä¸ªçº¿ç¨‹åˆ†é…åˆ°å¤šä¸ªå¤„ç†æœºä¸Šå¹¶è¡Œæ‰§è¡Œï¼Œå¯åŠ é€Ÿè¿›ç¨‹çš„å®Œæˆã€‚ Linux Process/Thread Control Operations Comparison åº”ç”¨åŠŸèƒ½ çº¿ç¨‹ è¿›ç¨‹ åˆ›å»º pthread_create fork,vfork é€€å‡º pthread_exit exit ç­‰å¾… pthread_join waitã€waitpid å–æ¶ˆ/ç»ˆæ­¢ pthread_cancel abort è¯»å– ID pthread_self() getpid() åŒæ­¥äº’æ–¥/é€šä¿¡æœºåˆ¶ äº’æ–¥é”ã€æ¡ä»¶å˜é‡ã€è¯»å†™é” æ— åç®¡é“ã€æœ‰åç®¡é“ã€ä¿¡å·ã€æ¶ˆæ¯é˜Ÿåˆ—ã€ä¿¡å·é‡ã€å…±äº«å†…å­˜ Java Exampleæ‘˜å½•è‡ªjavaguide ä»ä¸‹å›¾å¯ä»¥çœ‹å‡ºï¼šä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œå¤šä¸ªçº¿ç¨‹å…±äº«è¿›ç¨‹çš„å †å’Œæ–¹æ³•åŒº (JDK1.8 ä¹‹åçš„å…ƒç©ºé—´)èµ„æºï¼Œä½†æ˜¯æ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆ å’Œ æœ¬åœ°æ–¹æ³•æ ˆã€‚ çº¿ç¨‹å’Œè¿›ç¨‹æœ€å¤§çš„ä¸åŒåœ¨äºåŸºæœ¬ä¸Šå„è¿›ç¨‹æ˜¯ç‹¬ç«‹çš„ï¼Œè€Œå„çº¿ç¨‹åˆ™ä¸ä¸€å®šï¼Œå› ä¸ºåŒä¸€è¿›ç¨‹ä¸­çš„çº¿ç¨‹ææœ‰å¯èƒ½ä¼šç›¸äº’å½±å“ã€‚çº¿ç¨‹æ‰§è¡Œå¼€é”€å°ï¼Œä½†ä¸åˆ©äºèµ„æºçš„ç®¡ç†å’Œä¿æŠ¤ï¼›è€Œè¿›ç¨‹æ­£ç›¸åã€‚ æœ‰äº†è¿›ç¨‹ä¸ºä»€ä¹ˆè¿˜éœ€è¦çº¿ç¨‹?è¿›ç¨‹åˆ‡æ¢æ˜¯ä¸€ä¸ªå¼€é”€å¾ˆå¤§çš„æ“ä½œï¼Œçº¿ç¨‹åˆ‡æ¢çš„æˆæœ¬è¾ƒä½ã€‚çº¿ç¨‹æ›´è½»é‡ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥åˆ›å»ºå¤šä¸ªçº¿ç¨‹ã€‚å¤šä¸ªçº¿ç¨‹å¯ä»¥å¹¶å‘å¤„ç†ä¸åŒçš„ä»»åŠ¡ï¼Œæ›´æœ‰æ•ˆåœ°åˆ©ç”¨äº†å¤šå¤„ç†å™¨å’Œå¤šæ ¸è®¡ç®—æœºã€‚è€Œè¿›ç¨‹åªèƒ½åœ¨ä¸€ä¸ªæ—¶é—´å¹²ä¸€ä»¶äº‹ï¼Œå¦‚æœåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­é‡åˆ°é˜»å¡é—®é¢˜æ¯”å¦‚ IO é˜»å¡å°±ä¼šæŒ‚èµ·ç›´åˆ°ç»“æœè¿”å›ã€‚åŒä¸€è¿›ç¨‹å†…çš„çº¿ç¨‹å…±äº«å†…å­˜å’Œæ–‡ä»¶ï¼Œå› æ­¤å®ƒä»¬ä¹‹é—´ç›¸äº’é€šä¿¡æ— é¡»è°ƒç”¨å†…æ ¸ã€‚ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¤šçº¿ç¨‹?æ€»ä½“ä¸Š ä»è®¡ç®—æœºåº•å±‚æ¥è¯´ï¼š çº¿ç¨‹å¯ä»¥æ¯”ä½œæ˜¯è½»é‡çº§çš„è¿›ç¨‹ï¼Œæ˜¯ç¨‹åºæ‰§è¡Œçš„æœ€å°å•ä½,çº¿ç¨‹é—´çš„åˆ‡æ¢å’Œè°ƒåº¦çš„æˆæœ¬è¿œè¿œå°äºè¿›ç¨‹ã€‚å¦å¤–ï¼Œå¤šæ ¸ CPU æ—¶ä»£æ„å‘³ç€å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è¿è¡Œï¼Œè¿™å‡å°‘äº†çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ã€‚ä»å½“ä»£äº’è”ç½‘å‘å±•è¶‹åŠ¿æ¥è¯´ï¼š ç°åœ¨çš„ç³»ç»ŸåŠ¨ä¸åŠ¨å°±è¦æ±‚ç™¾ä¸‡çº§ç”šè‡³åƒä¸‡çº§çš„å¹¶å‘é‡ï¼Œè€Œå¤šçº¿ç¨‹å¹¶å‘ç¼–ç¨‹æ­£æ˜¯å¼€å‘é«˜å¹¶å‘ç³»ç»Ÿçš„åŸºç¡€ï¼Œåˆ©ç”¨å¥½å¤šçº¿ç¨‹æœºåˆ¶å¯ä»¥å¤§å¤§æé«˜ç³»ç»Ÿæ•´ä½“çš„å¹¶å‘èƒ½åŠ›ä»¥åŠæ€§èƒ½ã€‚ è®¡ç®—æœºåº•å±‚ å•æ ¸æ—¶ä»£ï¼šåœ¨å•æ ¸æ—¶ä»£å¤šçº¿ç¨‹ä¸»è¦æ˜¯ä¸ºäº†æé«˜å•è¿›ç¨‹åˆ©ç”¨ CPU å’Œ IO ç³»ç»Ÿçš„æ•ˆç‡ã€‚ å‡è®¾åªè¿è¡Œäº†ä¸€ä¸ª Java è¿›ç¨‹çš„æƒ…å†µï¼Œå½“æˆ‘ä»¬è¯·æ±‚ IO çš„æ—¶å€™ï¼Œå¦‚æœ Java è¿›ç¨‹ä¸­åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œæ­¤çº¿ç¨‹è¢« IO é˜»å¡åˆ™æ•´ä¸ªè¿›ç¨‹è¢«é˜»å¡ã€‚CPU å’Œ IO è®¾å¤‡åªæœ‰ä¸€ä¸ªåœ¨è¿è¡Œï¼Œé‚£ä¹ˆå¯ä»¥ç®€å•åœ°è¯´ç³»ç»Ÿæ•´ä½“æ•ˆç‡åªæœ‰ 50%ã€‚å½“ä½¿ç”¨å¤šçº¿ç¨‹çš„æ—¶å€™ï¼Œä¸€ä¸ªçº¿ç¨‹è¢« IO é˜»å¡ï¼Œå…¶ä»–çº¿ç¨‹è¿˜å¯ä»¥ç»§ç»­ä½¿ç”¨ CPUã€‚ä»è€Œæé«˜äº† Java è¿›ç¨‹åˆ©ç”¨ç³»ç»Ÿèµ„æºçš„æ•´ä½“æ•ˆç‡ã€‚å¤šæ ¸æ—¶ä»£: å¤šæ ¸æ—¶ä»£å¤šçº¿ç¨‹ä¸»è¦æ˜¯ä¸ºäº†æé«˜è¿›ç¨‹åˆ©ç”¨å¤šæ ¸ CPU çš„èƒ½åŠ›ã€‚ä¸¾ä¸ªä¾‹å­ï¼šå‡å¦‚æˆ‘ä»¬è¦è®¡ç®—ä¸€ä¸ªå¤æ‚çš„ä»»åŠ¡ï¼Œæˆ‘ä»¬åªç”¨ä¸€ä¸ªçº¿ç¨‹çš„è¯ï¼Œä¸è®ºç³»ç»Ÿæœ‰å‡ ä¸ª CPU æ ¸å¿ƒï¼Œéƒ½åªä¼šæœ‰ä¸€ä¸ª CPU æ ¸å¿ƒè¢«åˆ©ç”¨åˆ°ã€‚è€Œåˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹å¯ä»¥è¢«æ˜ å°„åˆ°åº•å±‚å¤šä¸ª CPU ä¸Šæ‰§è¡Œï¼Œåœ¨ä»»åŠ¡ä¸­çš„å¤šä¸ªçº¿ç¨‹æ²¡æœ‰èµ„æºç«äº‰çš„æƒ…å†µä¸‹ï¼Œä»»åŠ¡æ‰§è¡Œçš„æ•ˆç‡ä¼šæœ‰æ˜¾è‘—æ€§çš„æé«˜ï¼Œçº¦ç­‰äºï¼ˆå•æ ¸æ—¶æ‰§è¡Œæ—¶é—´/CPU æ ¸å¿ƒæ•°ï¼‰ã€‚ Reference:https://teaching.csse.uwa.edu.au/units/CITS2002/lectures/lecture07/singlepage.html","link":"/UESTC/OS/ProcessvsThread/"},{"title":"Châ… -æ•°æ®åº“ç³»ç»Ÿæ¦‚è®º","text":"æ•°æ®åº“ç‰¹ç‚¹ æ•°æ®ä¸é‡å¤å­˜æ”¾ å¯æ”¯æŒå¤šä¸ªåº”ç”¨å¹¶å‘è®¿é—® æ•°æ®ç»“æ„ç‹¬ç«‹äºåº”ç”¨ç¨‹åº å¯¹æ•°æ®çš„å¢ã€åˆ ã€æŸ¥ã€æ”¹å‡ç”±æ•°æ®åº“ç³»ç»Ÿç®¡ç†è½¯ä»¶è¿›è¡Œç®¡ç†å’Œæ§åˆ¶ã€‚ æ•°æ®æ¨¡å‹æ•°æ®æ¨¡å‹æ˜¯æŒ‡æè¿°äº‹ç‰©å¯¹è±¡æ•°æ®ç‰¹å¾åŠå…¶ç»“æ„çš„å½¢å¼åŒ–è¡¨ç¤ºï¼ŒåŒ…å«æ•°æ®ç»“æ„ã€æ•°æ®æ“ä½œã€æ•°æ®çº¦æŸ 3 ä¸ªéƒ¨åˆ†ç»„æˆã€‚ æ•°æ®ç»“æ„: ç”¨äºæè¿°äº‹ç‰©å¯¹è±¡çš„é™æ€ç‰¹å¾ï¼ŒåŒ…æ‹¬äº‹ç‰©å¯¹è±¡çš„æ•°æ®ç»„æˆã€æ•°æ®ç±»å‹ã€æ•°æ®æ€§è´¨ç­‰ã€‚ æ•°æ®æ“ä½œ:ç”¨äºæè¿°äº‹ç‰©å¯¹è±¡çš„åŠ¨æ€ç‰¹å¾ï¼ŒåŒ…æ‹¬æ•°æ®çš„æ’å…¥ã€ä¿®æ”¹ã€åˆ é™¤å’ŒæŸ¥è¯¢ç­‰è®¿é—®æ“ä½œã€‚ æ•°æ®çº¦æŸï¼šç”¨äºæè¿°æ•°æ®ç»“æ„ä¸­æ•°æ®ä¹‹é—´çš„è¯­ä¹‰è”ç³»ã€æ•°æ®ä¹‹é—´çš„åˆ¶çº¦å’Œä¾å­˜å…³ç³»ï¼Œä»¥åŠæ•°æ®åŠ¨æ€å˜åŒ–çš„è§„åˆ™ç­‰ã€‚ å±‚æ¬¡æ•°æ®æ¨¡å‹Prosï¼š 1ï¼‰å±‚æ¬¡æ¸…æ™° 2ï¼‰ç»“ç‚¹æ›´æ–°å®¹æ˜“ 3ï¼‰æ£€ç´¢æŸ¥è¯¢æ•ˆç‡é«˜Consï¼š 1ï¼‰ç»“æ„å•ä¸€ 2ï¼‰ç›¸åŒä¿¡æ¯å¤šæ¬¡å­˜å‚¨ã€æ•°æ®å†—ä½™å¤§ 3ï¼‰ä¸é€‚åˆäºå…·æœ‰æ‹“æ‰‘ç©ºé—´çš„æ•°æ®ç»„ç»‡ ç½‘çŠ¶æ•°æ®æ¨¡å‹Pros 1ï¼‰å®¹æ˜“è¡¨è¾¾æ•°æ®é—´çš„å¤æ‚å…³ç³» 2ï¼‰å†—ä½™å°Cons 1ï¼‰ç»“æ„å¤æ‚ã€å®šä½éš¾ 2ï¼‰éœ€è¦å®šä½æŒ‡é’ˆ å…³ç³»æ•°æ®æ¨¡å‹Pros æ•°æ®ç»“æ„ç®€å•ã€æ“ä½œçµæ´» æ”¯æŒå…³ç³»ä¸é›†åˆè¿ç®—æ“ä½œ æ”¯æŒå¹¿æ³›ä½¿ç”¨çš„ SQL æ•°æ®åº“æ“ä½œè¯­è¨€æ ‡å‡† å®¹æ˜“å®ç°ä¸åº”ç”¨ç¨‹åºçš„ç‹¬ç«‹æ€§ Cons åªç”¨äºç»“æ„åŒ–æ•°æ®çš„ç»„ç»‡ä¸å­˜å‚¨ç®¡ç† æ”¯æŒçš„æ•°æ®ç±»å‹è¾ƒç®€å• éš¾ä»¥æ”¯æŒäº’è”ç½‘å¹¿æ³›åº”ç”¨çš„éç»“æ„åŒ–æ•°æ®å’Œå¤æ‚æ•°æ®ç®¡ç† Otherså…¶å®ƒæ•°æ®æ¨¡å‹,å¦‚å¯¹è±¡æ•°æ®æ¨¡å‹ã€é”®å€¼å¯¹æ•°æ®æ¨¡å‹ã€åˆ—å¼æ•°æ®æ¨¡å‹ã€æ–‡æ¡£æ•°æ®æ¨¡å‹ã€å›¾å½¢æ•°æ®æ¨¡å‹ç­‰ æ•°æ®åº“ç³»ç»Ÿæ•°æ®åº“ç³»ç»Ÿï¼ˆDatabase Systemsï¼‰æ˜¯ä¸€ç±»åŸºäºæ•°æ®åº“è¿›è¡Œæ•°æ®ç®¡ç†ä¸ä¿¡æ¯æœåŠ¡çš„è½¯ä»¶ç³»ç»Ÿã€‚ æ•°æ®åº“ç³»ç»Ÿç”±ç”¨æˆ·ã€æ•°æ®åº“åº”ç”¨ç¨‹åºã€æ•°æ®åº“ç®¡ç†ç³»ç»Ÿå’Œæ•°æ®åº“å››ä¸ªéƒ¨åˆ†ç»„æˆã€‚ æ•°æ®åº“ç”¨æˆ·ï¼ˆUsersï¼‰æ˜¯æŒ‡æ•°æ®åº“ç³»ç»Ÿçš„ä½¿ç”¨äººå‘˜ã€‚ æ•°æ®åº“åº”ç”¨ç¨‹åº(Database Applications) æ˜¯ä¸€ç§åœ¨ DBMS æ”¯æŒä¸‹å¯¹æ•°æ®åº“ä¸­æ•°æ®è¿›è¡Œè®¿é—®å¤„ç†çš„åº”ç”¨ç¨‹åºã€‚ æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDatabase Manage Systemï¼ŒDBMS ï¼‰â€”â€”æ˜¯ä¸€ç§ä¸“é—¨ç”¨æ¥åˆ›å»ºæ•°æ®åº“ã€ç®¡ç†æ•°æ®åº“ã€ç»´æŠ¤æ•°æ®åº“ï¼Œå¹¶æä¾›å¤–éƒ¨å¯¹æ•°æ®åº“è¿›è¡Œè®¿é—®çš„ç³»ç»Ÿè½¯ä»¶ã€‚ æ•°æ®åº“(Database)æ˜¯ä¸€ç§ä¾ç…§ç‰¹å®šæ•°æ®æ¨¡å‹ç»„ç»‡ã€å­˜å‚¨å’Œç®¡ç†æ•°æ®çš„æ–‡ä»¶é›†åˆã€‚ å…³ç³»æ•°æ®åº“æ•°æ®å†…å®¹ï¼šç”¨æˆ·è¡¨ï¼ˆç”¨æˆ·æ•°æ®ï¼‰ï¼Œç³»ç»Ÿè¡¨ï¼ˆå…ƒæ•°æ®ã€ç´¢å¼•æ•°æ®ã€è¿è¡Œæ•°æ®ï¼‰ å…³ç³»æ•°æ®åº“å¯¹è±¡ç»„ç»‡ ç”¨æˆ·è¡¨ï¼šå­˜å‚¨ç”¨æˆ·çš„åº”ç”¨æ•°æ® ç³»ç»Ÿè¡¨ï¼šå­˜å‚¨æ•°æ®åº“ç³»ç»Ÿè‡ªèº«æ•°æ® è§†å›¾ï¼šé€šè¿‡è™šæ‹Ÿè¡¨å®ç°æ•°æ®æŸ¥è¯¢å¤„ç† ç´¢å¼•ï¼šé€šè¿‡ç›®å½•æ•°æ®ç»“æ„æ”¯æŒå¿«é€Ÿçš„æ•°æ®æŸ¥è¯¢ çº¦æŸï¼šå¯¹å…³ç³»è¡¨åŠå…¶æ•°æ®æ–½åŠ è§„åˆ™ å­˜å‚¨è¿‡ç¨‹ï¼šåœ¨æ•°æ®åº“å†…éƒ¨å®ç°ç‰¹å®šåŠŸèƒ½ç¨‹åºçš„æ•°æ®å¤„ç† è§¦å‘å™¨ï¼šåœ¨æ•°æ®åº“å†…éƒ¨å®ç°æ•°æ®æ“ä½œäº‹ä»¶è§¦å‘è‡ªåŠ¨æ‰§è¡Œçš„è¿‡ç¨‹ç¨‹åº æ•°æ®åº“ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸ éœ€æ±‚åˆ†æç³»ç»Ÿåˆ†æäººå‘˜ä¸ç”¨æˆ·äº¤æµï¼Œåˆ©ç”¨è½¯ä»¶å·¥ç¨‹æ–¹æ³•è·å–ç³»ç»Ÿæ•°æ®éœ€æ±‚ä¿¡æ¯ï¼Œå¹¶é‡‡ç”¨éœ€æ±‚æ¨¡å‹å®šä¹‰ç³»ç»Ÿæ•°æ®ç»„æˆï¼ŒåŠå…¶æ•°æ®å­—å…¸ ç³»ç»Ÿè®¾è®¡ç³»ç»Ÿè®¾è®¡äººå‘˜æ ¹æ®ç³»ç»ŸåŠŸèƒ½å’Œæ€§èƒ½éœ€æ±‚ï¼Œå¯¹ç³»ç»Ÿæ•°æ®åº“è¿›è¡Œè®¾è®¡ï¼ŒåŒ…æ‹¬ç³»ç»Ÿæ¦‚å¿µæ•°æ®æ¨¡å‹ CDMã€ç³»ç»Ÿé€»è¾‘æ•°æ®æ¨¡å‹ LDM å’Œç³»ç»Ÿç‰©ç†æ•°æ®æ¨¡å‹ PDM è®¾è®¡ ç³»ç»Ÿå®ç°æŒ‰ç…§ç³»ç»Ÿè®¾è®¡æ–¹æ¡ˆè¿›è¡Œæ•°æ®åº“åˆ›å»ºä¸åº”ç”¨ç¼–ç¨‹å®ç°ï¼Œä¸»è¦åŒ…æ‹¬ DBMS å®‰è£…éƒ¨ç½²ã€æ•°æ®åº“åˆ›å»ºã€æ•°æ®å¯¹è±¡åˆ›å»ºã€åº”ç”¨ç¼–ç¨‹å®ç°ç­‰æ–¹é¢çš„å·¥ä½œã€‚ ç³»ç»Ÿæµ‹è¯•ç³»ç»Ÿæµ‹è¯•äººå‘˜å°†æµ‹è¯•æ•°æ®ä¸Šè½½åˆ°æ•°æ®åº“ä¸­ï¼Œå¯¹æ•°æ®åº“å¯¹è±¡è¿›è¡Œæµ‹è¯•æ“ä½œè®¿é—®ï¼Œå®ç°æ•°æ®åº“åŠŸèƒ½å’Œæ€§èƒ½æµ‹è¯•ã€‚ ç³»ç»Ÿè¿è¡Œä¸ç»´æŠ¤ç³»ç»Ÿè¿ç»´äººå‘˜åœ¨ä¿¡æ¯ç³»ç»ŸæŠ•å…¥è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯¹æ•°æ®åº“ç³»ç»Ÿè¿›è¡Œå®šæœŸç»´æŠ¤å’Œä¼˜åŒ–ï¼Œä»¥ä¿è¯æ•°æ®åº“ç³»ç»Ÿæ­£å¸¸åœ°ã€é«˜æ•ˆåœ°è¿è¡Œã€‚ æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ DBMS ç±»å‹ æŒ‰ç”¨é€”åˆ†ç±» é€šç”¨ DBMS æ”¯æŒå…¬å…±é¢†åŸŸæ•°æ®åº“åº”ç”¨ï¼Œå¦‚ SQL server ä¸“ç”¨é¢†åŸŸ DBMS æ”¯æŒä¸“ç”¨é¢†åŸŸæ•°æ®åº“åº”ç”¨ï¼Œå¦‚åµŒå…¥å¼é¢†åŸŸçš„ SQLiteï¼Œ æŒ‰ç”¨æˆ·æ•°åˆ†ç±»ã€‚ å•ç”¨æˆ· DBMS ä»…æ”¯æŒå•ç”¨æˆ·è®¿é—®ï¼Œå¦‚ miniSQLã€‚ å¤šç”¨æˆ· DBMS å¯æ”¯æŒå¤šç”¨æˆ·å¹¶è¡Œè®¿é—®ï¼Œå¦‚ MySQL æŒ‰ç³»ç»Ÿéƒ¨ç½²åˆ†ç±» é›†ä¸­å¼ DBMS æ•°æ®åº“é›†ä¸­éƒ¨ç½²åœ¨å•ä¸€ç‰©ç†æœºå™¨ä¸­ï¼Œå¦‚ Access åˆ†å¸ƒå¼ DBMS æ•°æ®åº“å¯åˆ†å¸ƒåœ¨ä¸åŒä½ç½®ç‰©ç†æœºå™¨ï¼Œå¦‚ 0racle Database æŒ‰ä½¿ç”¨åœºæ™¯åˆ†ç±» æ¡Œé¢çº§ DBMS é€‚ç”¨äºå¾®å°å‹çš„ä¿¡æ¯æœåŠ¡åº”ç”¨ï¼Œå¦‚ Access,SQLite ç­‰ ä¼ä¸šçº§ DBMS é€‚ç”¨äºä¸­å¤§å‹çš„ä¼ä¸šçº§åº”ç”¨ï¼Œå¦‚ DB2,ORACLE Database ,Sybase ASE ç­‰ æŒ‰è½¯ä»¶ç‰ˆæƒåˆ†ç±» äº§å“ DBMS æ•°æ®åº“å‚å•†æ‹¥æœ‰ç‰ˆæƒçš„æ•°æ®åº“è½¯ä»¶ï¼Œå¦‚ SQL server ã€Oracle Database ç­‰ å¼€æº DBMS å¼€æºç»„ç»‡æä¾›çš„æ•°æ®åº“è½¯ä»¶ï¼Œå¦‚ MySQL,PostgreSQL ç­‰ FAQNoSQL æ•°æ®åº“å’Œ NewSQL æ•°æ®åº“æœ‰ä½•åŒºåˆ«ï¼ŸNoSQLNoSQL å°†æ•°æ®åº“å½’ç±»ä¸ºæè¿°æ€§æ•°æ®åº“ï¼Œå¦‚â€œNo-SQLâ€ã€‚NoSQL æ˜¯ä¸€ä¸ªå…¨é¢çš„æ•°æ®åº“ç±»åˆ«ï¼Œæ—¨åœ¨å…‹æœ SQL æ•°æ®åº“äº§ç”Ÿçš„é—®é¢˜ã€‚å®ƒä»¬è¢«ç§°ä¸ºæ— æ¨¡å¼æ–‡æ¡£ï¼Œå®ƒä»¬ä»¥æ–‡æ¡£ã€å›¾å½¢ã€é”®å€¼å’Œéæœ‰åºæ–¹å¼å­˜å‚¨æ•°æ®ã€‚ Pros å½“éœ€è¦åŠ¨æ€è¡Œä¸ºæ—¶ï¼Œå®ƒä»¬æ¯”ä¼ ç»Ÿç³»ç»Ÿæ›´å¥½åœ°æ‰©å±•ã€‚ è¿™äº›ç³»ç»Ÿé’ˆå¯¹éå…³ç³»æ•°æ®è¿›è¡Œäº†æ›´å¥½çš„ä¼˜åŒ–ã€‚ å…è®¸æ‰§è¡Œå†™å…¥æ—¶æ¶æ„æ“ä½œã€‚ Consï¼š ä½¿ç”¨ NoSQL æ„å»ºçš„ç³»ç»ŸåŸºæœ¬ä¸Šæ˜¯éäº‹åŠ¡æ€§çš„ã€‚ åˆ›å»ºçš„æ•°æ®é‡å·¨å¤§ï¼Œä¸æä¾›ä»»ä½•ä¼ ç»Ÿçš„æ•°æ®åº“åŠŸèƒ½ã€‚ å½“åŒæ—¶æ‰§è¡Œå¤šä¸ªäº‹åŠ¡æ—¶ï¼Œå®ƒä¸éµå¾ªä¸€è‡´æ€§ã€‚ NewSQLNewSQL å¯¹æ•°æ®åº“è¿›è¡Œåˆ†ç±»ï¼Œè¿™äº›æ•°æ®åº“æ˜¯å…³ç³»æ¨¡å‹ä¸å¯æ‰©å±•æ€§çš„è¿›æ­¥ï¼Œæ•°æ®ç±»å‹çš„çµæ´»æ€§çš„ç»„åˆã€‚è¿™äº›æ•°æ®åº“ä¸“æ³¨äº NoSQL ä¸­ä¸å­˜åœ¨çš„åŠŸèƒ½ï¼Œè¿™æä¾›äº†å¼ºå¤§çš„ä¸€è‡´æ€§ä¿è¯ã€‚è¿™æ¶µç›–äº†ä¸¤å±‚æ•°æ®ï¼Œä¸€å±‚å…³ç³»æ•°æ®å’Œé”®å€¼å­˜å‚¨ã€‚ Pros å®ƒä¸ºä¼ ç»Ÿçš„å…³ç³»æ•°æ®åº“å¼•å…¥äº†æ–°çš„å®ç°ã€‚ å®ƒæ±‡é›†äº† SQL å’Œ NoSQL çš„ä¼˜åŠ¿ã€‚ åœ¨ç”¨æˆ·çš„ç±»å‹å’Œéœ€æ±‚ä¹‹é—´è¿ç§»å¾ˆå®¹æ˜“ã€‚ Consï¼š å®ƒä»¬æä¾›å¯¹ä¸°å¯Œä¼ ç»Ÿç³»ç»Ÿçš„éƒ¨åˆ†è®¿é—®ã€‚ å®ƒå¯èƒ½ä¼šå¯¼è‡´å†…å­˜ä¸­ä½“ç³»ç»“æ„å‡ºç°é—®é¢˜ï¼Œä»¥è¶…è¿‡æ•°æ®é‡ã€‚ è¿™ç§æ•°æ®åº“çš„æ ¸å¿ƒåŸºç¡€æ˜¯å…³ç³»ç³»ç»Ÿï¼Œè¿™ä½¿å¾—ç†è§£å˜å¾—æ£˜æ‰‹ã€‚ ä¸ºä»€ä¹ˆå…³ç³»æ•°æ®åº“ä¸é€‚åˆå¤§æ•°æ®åº”ç”¨å¤„ç†ï¼Ÿå…³ç³»æ•°æ®æ¨¡å‹å±€é™ï¼šåªç”¨äºç»“æ„åŒ–æ•°æ®çš„ç»„ç»‡ä¸å­˜å‚¨ç®¡ç† æ”¯æŒçš„æ•°æ®ç±»å‹è¾ƒç®€å• éš¾ä»¥æ”¯æŒäº’è”ç½‘å¹¿æ³›åº”ç”¨çš„éç»“æ„åŒ–æ•°æ®å’Œå¤æ‚æ•°æ®ç®¡ç†","link":"/UESTC/DataBase/Ch1-DbOverview/"},{"title":"Châ…¡-æ•°æ®åº“å…³ç³»æ¨¡å‹","text":"å…³ç³»åŠå…¶åŸºæœ¬æ¦‚å¿µ Relation and Basic Conceptså®ä½“(entity)æŒ‡åŒ…å«æœ‰æ•°æ®ç‰¹å¾çš„äº‹ç‰©å¯¹è±¡åœ¨æ¦‚å¿µæ¨¡å‹ä¸–ç•Œä¸­çš„æŠ½è±¡åç§°ã€‚å…³ç³»(relation)æŒ‡å…·æœ‰å…³ç³»ç‰¹å¾ã€ç”¨äºå­˜æ”¾å®ä½“æ•°æ®çš„äºŒç»´è¡¨ã€‚å…³ç³»ä¹Ÿå¸¸è¢«ç§°ä¸ºå…³ç³»è¡¨ã€‚ è¡¨ä¸­æ¯è¡Œå­˜å‚¨å®ä½“çš„ä¸€ä¸ªå®ä¾‹æ•°æ®(record) è¡¨ä¸­æ¯åˆ—åŒ…å«å®ä½“çš„ä¸€é¡¹å±æ€§æ•°æ®(attribute) è¡¨ä¸­å•å…ƒæ ¼åªèƒ½å­˜å‚¨å•ä¸ªå€¼ ä¸å…è®¸æœ‰é‡å¤çš„è¡Œåˆ— è¡Œåˆ—é¡ºåºå¯ä»»æ„ åœ¨å…³ç³»ä¸­ï¼Œå¯ä»¥ç”¨æ¥å”¯ä¸€æ ‡è¯†å…ƒç»„çš„å±æ€§åˆ—ï¼Œç§°ä¸ºé”®(Key)ï¼Œå…¶å®ƒå±æ€§åˆ—éƒ½ä¸ºéé”®åˆ—ã€‚å¤åˆé”®(Compound Key)æŒ‡å…³ç³»ä¸­ç”¨æ¥å”¯ä¸€æ ‡è¯†å…ƒç»„çš„å¤šåˆ—ä½œä¸ºé”®ã€‚ä¾‹å¦‚(å­¦å·ï¼Œè¯¾ç¨‹å·)ä½œä¸ºå­¦ç”Ÿé€‰è¯¾è¡¨çš„å¤åˆé”®ã€‚å€™é€‰é”®(Candidate Key)å…³ç³»ä¸­å¯èƒ½æœ‰å¤šä¸ªåˆ—å‡é€‚åˆä½œä¸ºé”®ï¼Œå°†å…¶ä¸­æ¯ä¸ªéƒ½ç§°ä¸ºå€™é€‰é”®ã€‚ä¾‹å¦‚(å­¦å·)å’Œ(èº«ä»½è¯å·)éƒ½å¯ä»¥ä½œä¸ºå­¦ç”Ÿè¡¨çš„å€™é€‰é”®ã€‚ä¸»é”®(Primary key)æ˜¯å…³ç³»è¡¨ä¸­æœ€æœ‰ä»£è¡¨æ€§çš„ä¸€ä¸ªå€™é€‰é”®ï¼Œæ¯ä¸ªå…³ç³»è¡¨ä¸­åªèƒ½å®šä¹‰ä¸€ä¸ªä¸»é”®ã€‚ä»£ç†é”®(Surrogate Key)é‡‡ç”¨ DBMS è‡ªåŠ¨ç”Ÿæˆçš„æ•°å­—åºåˆ—ä½œä¸ºå…³ç³»è¡¨çš„ä¸»é”®ï¼Œå¯æ›¿ä»£å¤åˆä¸»é”®ï¼Œä»¥ä¾¿è·å¾—æ›´é«˜æ€§èƒ½æ•°æ®è®¿é—®æ“ä½œå¤„ç†ã€‚ å…³ç³»æ¨¡å¼è¯­å¥ä¸­ä¸»é”®è¡¨ç¤ºæ–¹æ³•: RELATION_NAME(ä¸»é”®å±æ€§ï¼Œå±æ€§ 1ï¼Œå±æ€§ 2ï¼Œâ€¦) ä¸»é”®ä½œç”¨ï¼š å”¯ä¸€æ ‡è¯†å…³ç³»è¡¨çš„æ¯ä¸ªå…ƒç»„ tuple ä¸å…³è”è¡¨çš„å¤–é”®å»ºç«‹è”ç³»ï¼Œå®ç°å…³ç³»è¡¨ä¹‹é—´è¿æ¥ æ•°æ®åº“æ–‡ä»¶ä½¿ç”¨ä¸»é”®å€¼æ¥ç»„ç»‡å…³ç³»è¡¨çš„æ•°æ®å­˜å‚¨ æ•°æ®åº“ä½¿ç”¨ä¸»é”®ç´¢å¼•å¿«é€Ÿæ£€ç´¢æ•°æ® å…³ç³»æ¨¡å‹åŸç† Relation Model Principleså…³ç³»æ¨¡å‹(Relation Model)â€”â€”æ˜¯ä¸€ç§åŸºäºäºŒç»´è¡¨ç»“æ„å­˜å‚¨æ•°æ®å®ä½“åŠå®ä½“é—´è”ç³»çš„æ•°æ®æ¨¡å‹ã€‚é›†åˆè¿ç®—æ“ä½œåŒ…æ‹¬é€‰æ‹©(select)ã€æŠ•å½±(project)ã€è¿æ¥(join)ã€äº¤(intersection)ã€å¹¶(union)ã€å·®(difference)ç­‰ã€‚ä¸“é—¨é’ˆå¯¹å…ƒç»„çš„å…³ç³»æ“ä½œåŒ…æ‹¬æ•°æ®è¡Œæ’å…¥(Insert)ã€ ä¿®æ”¹(Update)ã€åˆ é™¤(Delete)æ“ä½œã€‚ å…³ç³»æ¨¡å‹ä¸­çš„å®Œæ•´æ€§çº¦æŸ Integrity Constraintå®Œæ•´æ€§çº¦æŸä½œç”¨ æ¶ˆé™¤å…³ç³»è¡¨çš„å…ƒç»„é‡å¤å­˜å‚¨ ä¿æŒå…³è”è¡¨çš„æ•°æ®ä¸€è‡´æ€§ å®ç°ä¸šåŠ¡æ•°æ®è§„åˆ™ å…³ç³»æ¨¡å‹å®Œæ•´æ€§çº¦æŸ å®ä½“å®Œæ•´æ€§(Entity Integrity)ï¼šä¿è¯å…³ç³»ä¸­çš„æ¯ä¸ªå…ƒç»„éƒ½æ˜¯å¯è¯†åˆ«çš„å’Œå”¯ä¸€çš„ã€‚ å…³ç³»è¡¨ä¸­çš„ä¸»é”®åˆ—ä¸å…è®¸ä¸ºç©ºå€¼,ä¸å…è®¸é‡å¤ å‚ç…§å®Œæ•´æ€§(Referential Integrity)ï¼šå…³ç³»è¡¨ä¸­çš„å¤–é”®åˆ—å€¼å¿…é¡»æ˜¯å¦ä¸€å…³ç³»è¡¨ä¸­çš„ä¸»é”®åˆ—å€¼ï¼Œæˆ–è€…ä¸ºç©ºå€¼ ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§(User-defined Integrity)ï¼šç”¨æˆ·è‡ªå®šä¹‰çš„æ•°æ®çº¦æŸï¼Œå¦‚å±æ€§åˆ—å–å€¼èŒƒå›´ã€å–å€¼ç±»å‹ã€å–å€¼å”¯ä¸€æ€§ç­‰ çº¦æŸ æè¿° å…³é”®å­— éç©ºçº¦æŸ é™åˆ¶è¯¥å­—æ®µçš„æ•°æ®ä¸èƒ½ä¸º null NOT NULL å”¯ä¸€çº¦æŸ ä¿è¯è¯¥å­—æ®µçš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯å”¯ä¸€ã€ä¸é‡å¤çš„ UNIQUE ä¸»é”®çº¦æŸ ä¸»é”®æ˜¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ ‡è¯†ï¼Œè¦æ±‚éç©ºä¸”å”¯ä¸€ PRIMARY KEY é»˜è®¤çº¦æŸ ä¿å­˜æ•°æ®æ—¶ï¼Œå¦‚æœæœªæŒ‡å®šè¯¥å­—æ®µçš„å€¼ï¼Œåˆ™é‡‡ç”¨é»˜è®¤å€¼ DEFAULT æ£€æŸ¥çº¦æŸï¼ˆ8.0.1 ç‰ˆæœ¬åï¼‰ ä¿è¯å­—æ®µå€¼æ»¡è¶³æŸä¸€ä¸ªæ¡ä»¶ CHECK å¤–é”®çº¦æŸ ç”¨æ¥è®©ä¸¤å¼ å›¾çš„æ•°æ®ä¹‹é—´å»ºç«‹è¿æ¥ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ FOREIGN KEY å…³ç³»æ¨¡å‹æ•°æ®æ“ä½œ Relation Model Data OperationSelecté€‰æ‹© (Select)ï¼š$\\sigma_{p}(R) = {t | t \\in R , \\text{ä¸”} , p(t) , \\text{ä¸ºçœŸ}}$$\\sigma_F(table)$ æ ¹æ® F çš„åˆ¤æ–­æ¡ä»¶ï¼Œå¯¹ table è¡¨è¿›è¡Œé€‰æ‹©ç­‰åŒäºSELECT * FROM table WHERE F;ä¾‹å¦‚$\\sigma_{age&lt;20&gt;}(Student)$ ProjectæŠ•å½± (Project)ï¼š$\\pi_{A}(R) = {t[A] | t \\in R}$ä» R ä¸­é€‰æ‹©å‡ºè‹¥å¹²å±æ€§åˆ—ç»„æˆæ–°çš„å…³ç³»$\\pi_{(Sname,Sgender)}(Student)$,ç­‰åŒäºSELECT Sname,Sgender FROM Student Joinè¿æ¥ (Join)ï¼š$R \\bowtie S = {t | t \\in R , \\text{ä¸”} , t \\in S}$ä»ä¸¤ä¸ªå…³ç³»çš„ç¬›å¡å°”ç§¯ä¸­é€‰å–å±æ€§é—´æ»¡è¶³ä¸€å®šæ¡ä»¶çš„å…ƒç»„è¿æ¥è¿ç®—ä» R å’Œ S çš„å¹¿ä¹‰ç¬›å¡å°”ç§¯ RÃ—S ä¸­é€‰å–ï¼ˆR å…³ç³»ï¼‰åœ¨ A å±æ€§ç»„ä¸Šçš„å€¼ä¸ï¼ˆS å…³ç³»ï¼‰åœ¨ B å±æ€§ç»„ä¸Šå€¼æ»¡è¶³æ¯”è¾ƒå…³ç³»çš„å…ƒç»„ã€‚ æ¡ä»¶è¿æ¥ cross join$R \\bowtie_{c} S = \\sigma_c(R \\times S)$ ç­‰å€¼è¿æ¥ equi join$R \\bowtie_{R.B=S.B} S = \\sigma_{R.B=S.B}(R \\times S)$æ¡ä»¶è¿æ¥çš„ç‰¹ä¾‹ã€‚ä»å…³ç³» R ä¸ S çš„å¹¿ä¹‰ç¬›å¡å°”ç§¯ä¸­é€‰å– Aã€B å±æ€§å€¼ç›¸ç­‰çš„é‚£äº›å…ƒç»„ç­‰åŒäº SELECT * FROM R, S WHERE R.A = S.B è‡ªç„¶è¿æ¥ï¼ˆNatural joinï¼‰è‡ªç„¶è¿æ¥æ˜¯ç­‰å€¼è¿æ¥çš„ç‰¹ä¾‹ï¼Œæ ¹æ®ä¸¤ä¸ªè¡¨ä¸­çš„æ‰€æœ‰ç›¸åŒå±æ€§åˆ—è¿›è¡Œè¿æ¥ï¼Œè¿æ¥åå¤šä¸ªçš„ç›¸åŒå±æ€§åˆ—åªä¿ç•™ä¸€ä¸ªSELECT * FROM R NATURAL JOIN S å¤–è¿æ¥ï¼ˆOuter joinï¼‰å¤–è¿æ¥-è‡ªç„¶è¿æ¥çš„ç‰¹ä¾‹ï¼šè‡ªç„¶è¿æ¥åªæœ‰ç›¸åŒå±æ€§åˆ—çš„å€¼ç›¸åŒæ‰è¿”å›ï¼Œå¤–è¿æ¥ä¸­è‹¥æœ‰ä¸€æ–¹çš„è¡Œçš„å…±åŒå±æ€§åˆ—æ²¡æœ‰æ‰¾åˆ°ä¸ä¹‹åŒ¹é…çš„è¡Œï¼Œåˆ™ä¹Ÿä¿ç•™è¯¥è¡Œï¼Œä»¥ NULL å¡«å……ã€‚å…¶å¯åˆ†ä¸ºå·¦å¤–è¿æ¥ã€å³å¤–è¿æ¥ã€å…¨å¤–è¿æ¥[DataBase03#å¤–è¿æ¥æŸ¥è¯¢ Outer Join] Othersäº¤é›† (Intersection)ï¼š$R \\cap S = {t | t \\in R , \\text{ä¸”} , t \\in S}$ å¹¶é›† (Union)ï¼š$R \\cup S = {t | t \\in R , \\text{æˆ–} , t \\in S}$ å·®é›† (Difference)ï¼š$R - S = {t | t \\in R , \\text{ä¸”} , t \\notin S}$ é™¤æ“ä½œ (Division)ï¼š$R Ã· S $ï¼Œç¬›å¡å°”ç§¯çš„é€†æ“ä½œ","link":"/UESTC/DataBase/Ch2-DbRelationModel/"},{"title":"Châ…¢-æ•°æ®åº“æ“ä½œSQLè¯­è¨€","text":"SQL è¯­å¥ æ•°æ®å®šä¹‰è¯­è¨€ï¼ˆDDLï¼‰ï¼šåˆ›å»ºä¿®æ”¹åˆ é™¤æ•°æ®åº“å¯¹è±¡ï¼›create/drop/alter database/table/index æ•°æ®æ“çºµè¯­è¨€ï¼ˆDMLï¼‰ï¼šå¢åˆ æ”¹æ•°æ®ï¼›insert/update/delete æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼ˆDQLï¼‰ï¼šæ•°æ®æŸ¥è¯¢ï¼› æ•°æ®æ§åˆ¶è¯­è¨€ï¼ˆDCLï¼‰ï¼šæ•°æ®åº“å¯¹è±¡è®¿é—®æ§åˆ¶ï¼›grant/deny/revoke äº‹ç‰©å¤„ç†è¯­è¨€ï¼ˆTPLï¼‰ï¼šäº‹ç‰©å¤„ç†ï¼›begin transaction/commit/rollback æ¸¸æ ‡æ§åˆ¶è¯­è¨€ï¼ˆCCLï¼‰ï¼šæ¸¸æ ‡æ“ä½œï¼›declare cursor/fetch into/close curso DDLæ•°æ®å®šä¹‰è¯­è¨€ï¼ˆData Definition Languageï¼ŒDDLï¼‰æ˜¯ SQL è¯­è¨€ä¸­ç”¨äºåˆ›å»ºã€ä¿®æ”¹æˆ–åˆ é™¤æ•°æ®åº“å¯¹è±¡çš„è¯­å¥ã€‚ Database1234-- databaseCREATE DATABASE db_name;ALTER DATABASE db_name RENAME TO new_db_name;DROP DATABASE db_name; Table123456789101112131415161718192021222324252627282930-- tableCREATE TABLE table_name ( Sname varchar(10) NOT NULL, Age int NOT NULL, Sid char(10) PRIMARY KEY,);'''å®Œæ•´æ€§çº¦æŸåŒ…æ‹¬ï¼šPRIMARY KEY ä¸»é”®NOT NULL éç©ºNULL ç©ºå€¼UNIQUE å€¼å”¯ä¸€CHECK æœ‰æ•ˆæ€§æ£€æŸ¥DEFAULT ç¼ºçœ''''''å‡å®šåˆ›å»ºä¸€ä¸ªè¡¨ï¼ŒCityå­—æ®µåªèƒ½å–å€¼ä¸Šæµ·ã€åŒ—äº¬ï¼Œage é»˜è®¤ä¸º 10'''CREATE TABLE TEST( City varchar(10) CHECK(City IN('ä¸Šæµ·','åŒ—äº¬')), Age int NOT NULL DEFAULT 10);ALTER TABLE &lt;è¡¨å&gt; ADD &lt;æ–°åˆ—åç§°&gt;&lt;æ•°æ®ç±»å‹&gt;|[å®Œæ•´æ€§çº¦æŸ] ALTER TABLE&lt;è¡¨å&gt; DROP COLUMN &lt;åˆ—å&gt;ï¼›ALTER TABLE&lt;è¡¨å&gt; DROP CONSTRAINT&lt;å®Œæ•´æ€§çº¦æŸå&gt;ï¼›ALTER TABLE &lt;è¡¨å&gt; RENAME TO &lt;æ–°è¡¨å&gt;ï¼›ALTER TABLE &lt;è¡¨å&gt; RENAME &lt;åŸåˆ—å&gt; TO &lt;æ–°åˆ—å&gt;ï¼›ALTER TABLE &lt;è¡¨å&gt; ALTER COLUMN &lt;åˆ—å&gt; TYPE&lt;æ–°çš„æ•°æ®ç±»å‹&gt;ï¼›DROP TABLE &lt;è¡¨å&gt;; Primary/Foreign Key ConstraintPrimary Key Constraint syntax å®šä¹‰å•åˆ—ä¸»é”®Age int PRIMARY KEY å®šä¹‰å¤šåˆ—ä¸»é”®CONSTRAINT &lt;constraint_name&gt; PRIMARY KEY &lt;col1,col2...&gt; å®šä¹‰ä»£ç†é”®æ—¶ï¼Œæ³¨æ„ä¸»é”®åº”ä¸º serial ç±»å‹ 12345678910111213141516CREATE TABLE TEST( City varchar(10) PRIMARY KEY, Age int PRIMARY KEY);CREATE TABLE TEST( Name varchar(10), Age int, CONSTRAINT PK_TEST PRIMARY KEY(Name,Age));CREATE TABLE TEST( Idx serial PRIMARY KEY, Name varchar(10), Age int); Foreign Key Constraintä¸ºäº†æˆåŠŸåˆ›å»ºå¤–é”®ï¼Œä»¥ä¸‹æ¡ä»¶å¿…é¡»æ»¡è¶³ï¼š å¼•ç”¨çš„è¡¨ï¼ˆåœ¨ REFERENCES åé¢æŒ‡å®šçš„è¡¨ï¼‰å¿…é¡»å·²ç»å­˜åœ¨ã€‚ è¢«å¼•ç”¨çš„å­—æ®µå¿…é¡»æ˜¯çˆ¶è¡¨çš„ä¸»é”®æˆ–å…·æœ‰å”¯ä¸€æ€§çº¦æŸã€‚ æ•°æ®ç±»å‹å¿…é¡»å…¼å®¹ï¼Œå³å¤–é”®å­—æ®µå’Œè¢«å¼•ç”¨å­—æ®µçš„ç±»å‹å¿…é¡»ç›¸åŒæˆ–å¯è½¬æ¢ã€‚ 123456789101112131415161718CREATE TABLE parent_table ( id SERIAL PRIMARY KEY, name VARCHAR(10))CREATE TABLE child_table ( id SERIAL PRIMARY KEY, name VARCHAR(10), parent_id INTEGER, FOREIGN KEY (parent_id) REFERENCES parent_table(id));-- ON DELETE CASCADEALTER TABLE child_tableADD CONSTRAINT fk_parent_id FOREIGN KEY (parent_id)REFERENCES parent_table(id)ON DELETE CASCADE; åœ¨ SQL ä¸­ï¼Œç‰¹åˆ«æ˜¯åƒ MySQL å’Œ PostgreSQL è¿™æ ·çš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­ï¼Œå¤–é”®ä¸ä»…æä¾›äº†æ•°æ®å®Œæ•´æ€§ï¼Œè¿˜å¯ä»¥é…ç½®ä¸åŒçš„è¡Œä¸ºï¼Œä¾‹å¦‚ ON DELETE å’Œ ON UPDATE è§„åˆ™ï¼Œæ¥å†³å®šå½“çˆ¶è¡¨ä¸­çš„è®°å½•è¢«åˆ é™¤æˆ–æ›´æ–°æ—¶ï¼Œå­è¡¨ä¸­çš„å…³è”è®°å½•åº”è¯¥å¦‚ä½•å¤„ç†ï¼Œå¸¸è§çš„ ON DELETE å’Œ ON UPDATE è§„åˆ™åŒ…æ‹¬ï¼š RESTRICT æˆ– NO ACTIONè¿™æ˜¯é»˜è®¤è¡Œä¸ºã€‚å¦‚æœå°è¯•åˆ é™¤æˆ–æ›´æ–°ä¸»è¡¨ä¸­çš„è®°å½•ï¼Œè€Œå­è¡¨ä¸­å­˜åœ¨ä¾èµ–è¿™ä¸ªè®°å½•çš„å¤–é”®ï¼Œé‚£ä¹ˆæ“ä½œä¼šè¢«é˜»æ­¢ã€‚è¿™ç¡®ä¿äº†å‚ç…§å®Œæ•´æ€§ï¼Œé˜²æ­¢äº†æ„å¤–çš„æ•°æ®ä¸¢å¤±ã€‚ CASCADE:å½“ä¸»è¡¨ä¸­çš„è®°å½•è¢«åˆ é™¤æˆ–æ›´æ–°æ—¶ï¼Œæ‰€æœ‰å…³è”çš„å­è¡¨è®°å½•ä¹Ÿå°†è¢«ç›¸åº”åœ°åˆ é™¤æˆ–æ›´æ–°ã€‚è¿™æ ·ï¼Œä¸¤ä¸ªè¡¨ä¹‹é—´çš„æ•°æ®ä¿æŒä¸€è‡´ã€‚ SET NULL:å¦‚æœä¸»è¡¨ä¸­çš„è®°å½•è¢«åˆ é™¤æˆ–æ›´æ–°ï¼Œå­è¡¨ä¸­å¯¹åº”çš„å¤–é”®å­—æ®µå°†è¢«è®¾ç½®ä¸º NULLã€‚è¿™è¦æ±‚å¤–é”®å­—æ®µåœ¨å®šä¹‰æ—¶å…è®¸ä¸º NULLã€‚ SET DEFAULT:è®¾ç½®å¤–é”®åœ¨ä¸»é”®è¢«åˆ é™¤æˆ–æ›´æ–°æ—¶ï¼Œå°†å­è¡¨ä¸­çš„å¤–é”®å­—æ®µè®¾ä¸ºå…¶é»˜è®¤å€¼ã€‚è¯·æ³¨æ„ï¼ŒSET DEFAULT åœ¨ MySQL ä¸­ä¸æ”¯æŒï¼Œ 12345678910111213141516171819'''ç®¡ç†çº¦æŸconstraint_typeæŒ‡æ˜äº†çº¦æŸçš„ç±»å‹ï¼Œæ¯”å¦‚FOREIGN KEYã€UNIQUEã€PRIMARY KEYç­‰ã€‚'''ALTER TABLE table_nameADD CONSTRAINT constraint_name constraint_type(column_name, ...);ALTER TABLE child_tableADD CONSTRAINT IF NOT EXISTS fk_parent_id FOREIGN KEY (parent_id)REFERENCES parent_table(id) ON DELETE CASCADE;ALTER TABLE child_table DROP CONSTRAINT fk_parent_id; Indexç´¢å¼•ï¼ˆindexï¼‰ï¼šå°†å…³ç³»è¡¨æŒ‰ç…§æŒ‡å®šåˆ—çš„å–å€¼é¡ºåºç»„ç»‡å…ƒç»„æ•°æ®çš„æ•°æ®ç»“æ„ï¼ŒåŠ å¿«æŸ¥è¯¢ï¼Œå ç”¨é¢å¤–å­˜å‚¨ç©ºé—´ã€å¼€é”€è¾ƒå¤§ 123CREATE INDEX Birthday_Idx ON STUDENT(Birthday);ALTER INDEX Birthday_Idx RENAME TO Bday_Idx;DROP INDEX bday_idx; DMLDMLï¼šæ•°æ®æ“ä½œè¯­è¨€ï¼Œç”¨äºå¯¹æ•°æ®è¿›è¡Œ CRUD(Create, Retrieve, Update, Delete) Ref: [[DataBase01#DML]] INSERT, UPDATE, DELETE1234567891011121314151617181920212223242526-- insertINSERT INTO &lt;è¡¨å|è§†å›¾å&gt;[&lt;åˆ—åè¡¨&gt;] VALUES ï¼ˆåˆ—å€¼è¡¨ï¼‰;INSERT INTO Student VALUES('2017220101105','æŸ³å› ','å¥³','1999-04-23','è½¯ä»¶å·¥ç¨‹','liuyin@163.com')-- updateUPDATE &lt;è¡¨å|è§†å›¾å&gt;SET &lt;åˆ—å1&gt;=&lt;è¡¨è¾¾å¼1&gt; [ï¼Œ&lt;åˆ—å2&gt;=&lt;è¡¨è¾¾å¼2&gt;...][WHERE &lt;æ¡ä»¶è¡¨è¾¾å¼&gt;]ï¼›UPDATE StudentSET Email='zhaodong@163.com'WHERE StudentName='èµµä¸œ';-- deleteDELETE FROM &lt;è¡¨å|è§†å›¾å&gt;[WHERE &lt;æ¡ä»¶è¡¨è¾¾å¼&gt;]DELETE FROM StudentWHERE StudentName='èµµä¸œ'; DQL123456789101112131415161718192021222324252627282930313233343536373839404142434445464748SELECT [ALL|DISTINCT] &lt;ç›®æ ‡åˆ—&gt;[ï¼Œ&lt;ç›®æ ‡åˆ—&gt;â€¦][ INTO &lt;æ–°è¡¨&gt; ]FROM &lt;è¡¨å|è§†å›¾å&gt;[ï¼Œ&lt;è¡¨å|è§†å›¾å&gt;â€¦][ WHERE &lt;æ¡ä»¶è¡¨è¾¾å¼&gt; ][ GROUP BY &lt;åˆ—å&gt; [HAVING &lt;æ¡ä»¶è¡¨è¾¾å¼&gt; ]][ ORDER BY &lt;åˆ—å&gt; [ ASC | DESC ] ];-- BETWEEN AND é™åˆ¶åˆ—å€¼èŒƒå›´SELECT *FROM STUDENTWHERE BirthDay BETWEEN â€˜2000-01-01â€™ AND â€˜2000-12-30â€™;-- LIKE é€šé…ç¬¦'_'ä»£è¡¨ä¸€ä¸ªå­—ç¬¦'%'ä»£è¡¨ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦SELECT *FROM STUDENTWHERE Email LIKE '%@163.com';-- AND\\OR\\NOT é€»è¾‘è¿ç®—ç¬¦SELECT StudentID, StudentName, StudentGender, MajorFROM STUDENTWHERE Major='è½¯ä»¶å·¥ç¨‹' AND StudentGender='ç”·';-- IN é™å®šèŒƒå›´SELECT StudentID, StudentName, StudentGender, MajorFROM STUDENTWHERE Major IN ('CS','SE');-- ORDER BY &lt;&gt; ASC/DESC é»˜è®¤å‡åºASC-- å¤šä¸ªåˆ—æ’åºæ—¶ï¼Œåªæœ‰å½“å‰åˆ—ç›¸åŒæ—¶æ‰ä¼šæ¯”è¾ƒä¸‹ä¸€åˆ—SELECT *FROM STUDENTORDER BY Birthday DESC , StudentName ASC;-- å†…ç½®å‡½æ•°SELECT COUNTï¼ˆ*ï¼‰ AS å­¦ç”Ÿäººæ•°FROM Student;SELECT Minï¼ˆBirthdayï¼‰ AS æœ€å¤§å¹´é¾„ï¼ŒMaxï¼ˆBirthdayï¼‰ AS æœ€å°å¹´é¾„FROM Student;-- GROUP BY &lt;&gt; HAVING-- ä¸“ä¸šç»Ÿè®¡STUDENTè¡¨ä¸­ç”·ç”Ÿäººæ•°ï¼Œä½†é™å®šåªæ˜¾ç¤ºäººæ•°å¤§äº2çš„äººæ•°SELECT Major AS ä¸“ä¸š, COUNTï¼ˆStudentIDï¼‰ AS å­¦ç”Ÿäººæ•°FROM StudentWHERE StudentGender=â€™ç”·â€™GROUP BY MajorHAVING COUNT(*)&gt;2; å¤šè¡¨å…³è”æŸ¥è¯¢å­æŸ¥è¯¢123456SELECT TeacherID, TeacherName, TeacherTitleFROM TeacherWHERE CollegeID IN (SELECT CollegeID FROM College WHERE CollegeName='è®¡ç®—æœºå­¦é™¢'); è¿æ¥æŸ¥è¯¢123456789101112131415161718192021222324252627282930313233343536SELECT B.CollegeName AS å­¦é™¢åç§°, A.TeacherID AS ç¼–å·, A.TeacherName AS å§“å, A.TeacherGender AS æ€§åˆ«, A. TeacherTitle AS èŒç§°FROM Teacher AS Aï¼ŒCollege AS BWHERE A.CollegeID=B.CollegeIDORDER BY B.CollegeName, A.TeacherID;-- JOIN ON å†…è¿æ¥SELECT B.CollegeName AS å­¦é™¢åç§°, A.TeacherID AS ç¼–å·, A.TeacherName AS å§“å, A.TeacherGender AS æ€§åˆ«, A. TeacherTitle AS èŒç§°FROM TEACHER AS A JOIN COLLEGE AS BON A.CollegeID=B.CollegeIDORDER BY B.CollegeName, A.TeacherID;-- LEFT JOIN/RIGHT JOIN/FULL JOIN å¤–è¿æ¥SELECT C.CourseName AS è¯¾ç¨‹åç§°, T.TeacherName AS æ•™å¸ˆ,COUNT (R.CoursePlanID) AS é€‰è¯¾äººæ•°FROM COURSE AS C JOIN PLAN AS P ON C.CourseID=P.CourseIDJOIN TEACHER AS T ON P.TeacherID=T.TeacherIDLEFT JOIN REGISTER AS R ON P.CoursePlanID=R.CoursePlanIDGROUP BY C.CourseName, T.TeacherName;","link":"/UESTC/DataBase/Ch3-DbSQL/"},{"title":"Châ…¤ æ•°æ®åº“ç³»ç»Ÿç®¡ç†","text":"æ•°æ®åº“ç®¡ç†æ•°æ®åº“ç®¡ç†(Database Management)æ˜¯æŒ‡ä¸ºä¿è¯æ•°æ®åº“ç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œå’ŒæœåŠ¡è´¨é‡å¿…é¡»è¿›è¡Œçš„ç³»ç»Ÿç®¡ç†å·¥ä½œã€‚ ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®åº“ç®¡ç† æ•°æ®åº“ç³»ç»Ÿéšè§„æ¨¡å¢å¤§,ç³»ç»Ÿä¼šå˜å¾—å¼‚å¸¸å¤æ‚ å¤šç”¨æˆ·æ•°æ®åº“åº”ç”¨å¸¦æ¥æ•°æ®åº“è®¿é—®å¤æ‚æ€§ æ•°æ®å®‰å…¨å’Œæ•°æ®éšç§å¯¹æœºæ„å’Œç”¨æˆ·éƒ½éå¸¸é‡è¦ æ•°æ®åº“ç³»ç»Ÿéšæ•°æ®é‡å¢åŠ å’Œä½¿ç”¨æ—¶é—´å¢é•¿å…¶æ€§èƒ½ä¼šé™ä½ç³»ç»Ÿé­é‡æ„å¤–äº‹ä»¶ï¼Œæ•°æ®åº“æŸåæˆ–æ•°æ®ä¸¢å¤± æ•°æ®åº“ç®¡ç†ç›®æ ‡ ä¿éšœæ•°æ®åº“ç³»ç»Ÿæ­£å¸¸ç¨³å®šè¿è¡Œ å……åˆ†å‘æŒ¥æ•°æ®åº“ç³»ç»Ÿçš„è½¯ç¡¬ä»¶å¤„ç†èƒ½åŠ› ç¡®ä¿æ•°æ®åº“ç³»ç»Ÿå®‰å…¨å’Œç”¨æˆ·æ•°æ®éšç§æ€§ æœ‰æ•ˆç®¡ç†æ•°æ®åº“ç”¨æˆ·åŠå…¶è§’è‰²æƒé™ è§£å†³æ•°æ®åº“ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–ã€ç³»ç»Ÿæ•…éšœä¸æ•°æ®æŸåç­‰é—®é¢˜ æœ€å¤§ç¨‹åº¦åœ°å‘æŒ¥æ•°æ®åº“å¯¹å…¶æ‰€å±æœºæ„çš„ä½œç”¨ DBMS åŠŸèƒ½ æ•°æ®åº“å®šä¹‰ æ•°æ®åº“ç»“æ„åˆ›å»ºï¼Œç»“æ„ä¿®æ”¹ï¼Œå®Œæ•´æ€§çº¦æŸå®šä¹‰ï¼Œç´¢å¼•ç»“æ„å®šä¹‰ æ•°æ®åº“è¿è¡Œç®¡ç† ç³»ç»Ÿå¯åœæ§åˆ¶ï¼Œå¹¶å‘æ§åˆ¶ï¼Œäº‹åŠ¡ç®¡ç†ï¼Œå®‰å…¨æ€§æ§åˆ¶ï¼Œå®Œæ•´æ€§æ§åˆ¶ï¼Œæ—¥å¿—ç®¡ç†ï¼Œæ€§èƒ½ç›‘æ§ æ•°æ®åº“ç»„ç»‡ä¸å­˜å‚¨ ç¼“å†²åŒºç®¡ç†ï¼Œæ•°æ®ç»„ç»‡ï¼Œæ•°æ®å­˜å– æ•°æ®åº“ç»´æŠ¤ æ•°æ®è½½å…¥ï¼Œæ•°æ®è½¬æ¢ï¼Œæ•°æ®åº“å¤‡ä»½ï¼†æ¢å¤ï¼Œæ•°æ®åº“é‡æ„ï¼Œæ€§èƒ½ä¼˜åŒ– æ•°æ®åº“é€šä¿¡ æ•°æ®çš„åŒæ­¥ã€å¤åˆ¶ã€ä¼ è¾“ äº‹åŠ¡ç®¡ç†ä¸ºä»€ä¹ˆéœ€è¦äº‹åŠ¡ç®¡ç† åœ¨æ•°æ®åº“åº”ç”¨ç³»ç»Ÿä¸­ï¼Œå®Œæˆä¸€ä¸ªä¸šåŠ¡å¤„ç†é€šå¸¸éœ€è¦å¤šä¸ªæ“ä½œæ­¥éª¤æ‰èƒ½å®Œæˆå¤„ç†ã€‚åœ¨æ¯ä¸ªæ“ä½œæ­¥éª¤ä¸­ï¼Œéƒ½å¯èƒ½é­é‡å¤±è´¥ï¼Œè‹¥æ²¡æœ‰ä¸€ä¸ªå¤„ç†æœºåˆ¶ï¼Œå°±å¯èƒ½é€ æˆæ“ä½œæ•°æ®æ··ä¹±ï¼Œä»è€Œç ´åæ•°æ®ä¸€è‡´æ€§ã€‚ äº‹åŠ¡çš„æ¦‚å¿µ[DataBase03#äº‹åŠ¡ Transaction]åœ¨æ•°æ®åº“ä¸­ï¼Œäº‹åŠ¡ï¼ˆTransactionï¼‰æ˜¯æŒ‡ç”±æ„æˆå•ä¸ªä¸šåŠ¡å¤„ç†å•å…ƒçš„ä¸€ç»„æ•°æ®åº“è®¿é—®æ“ä½œï¼Œè¦æ±‚å®ƒä»¬è¦ä¹ˆéƒ½æˆåŠŸæ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚ æœ€å°çš„ DBMS æ‰§è¡Œä»»åŠ¡å•å…ƒ æœ€å°çš„æ•…éšœæ¢å¤ä»»åŠ¡å•å…ƒ æœ€å°çš„å¹¶å‘æ§åˆ¶ä»»åŠ¡å•å…ƒ äº‹åŠ¡ç‰¹æ€§ åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼šäº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆã€‚å¦‚æœäº‹åŠ¡ä¸­çš„æŸä¸ªæ“ä½œå¤±è´¥ï¼Œé‚£ä¹ˆæ•´ä¸ªäº‹åŠ¡å°†è¢«å›æ»šï¼Œæ•°æ®åº“çŠ¶æ€ä¸ä¼šæ”¹å˜ã€‚ ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šäº‹åŠ¡ç¡®ä¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€è½¬æ¢åˆ°å¦ä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€ã€‚äº‹åŠ¡å¼€å§‹å’Œç»“æŸæ—¶ï¼Œæ‰€æœ‰çš„ä¸šåŠ¡è§„åˆ™éƒ½å¿…é¡»ä¿æŒä¸€è‡´ã€‚ éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼šæ¯ä¸ªäº‹åŠ¡éƒ½åœ¨ä¸€ä¸ªç‹¬ç«‹çš„å·¥ä½œåŒºä¸­æ‰§è¡Œï¼Œäº‹åŠ¡ä¹‹é—´ä¸ä¼šäº’ç›¸å½±å“ã€‚è¿™æ„å‘³ç€å¹¶å‘äº‹åŠ¡çš„ä¿®æ”¹å¿…é¡»è¢«éš”ç¦»ï¼Œç›´åˆ°äº‹åŠ¡æäº¤ï¼Œå…¶ä»–äº‹åŠ¡æ‰èƒ½çœ‹åˆ°è¿™äº›ä¿®æ”¹ã€‚ æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼šä¸€æ—¦äº‹åŠ¡è¢«æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“çš„æ›´æ”¹å°±æ˜¯æ°¸ä¹…æ€§çš„ã€‚å³ä½¿å‘ç”Ÿç³»ç»Ÿæ•…éšœï¼Œæ›´æ”¹ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚ äº‹åŠ¡å¹¶å‘æ‰§è¡Œæ˜¯æŒ‡å¤šä¸ªäº‹åŠ¡ç¨‹åºåœ¨æ•°æ®åº“ç³»ç»Ÿä¸­åŒä¸€æ—¶æ®µè¿è¡Œï¼Œä»è€Œæ”¹å–„ç³»ç»Ÿçš„èµ„æºåˆ©ç”¨ç‡ã€å‡å°‘äº‹åŠ¡è¿è¡Œçš„å¹³å‡ç­‰å¾…æ—¶é—´ äº‹åŠ¡ SQL ç¨‹åºï¼š 1234BEGIN æˆ– START TRANSACTION ï¼›--äº‹åŠ¡å¼€å§‹è¯­å¥ROLLBACKï¼› --äº‹åŠ¡å›æ»šè¯­å¥COMMITï¼›--äº‹åŠ¡æäº¤è¯­å¥SAVEPOINTï¼›--äº‹åŠ¡ä¿å­˜ç‚¹è¯­å¥ å¹¶å‘æ§åˆ¶ä¸ºä»€ä¹ˆéœ€è¦å¹¶å‘æ§åˆ¶ï¼Ÿ å½“å¤šä¸ªäº‹åŠ¡ç¨‹åºåœ¨ DBMS ç³»ç»Ÿä¸­åŒæ—¶è¿è¡Œæ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°å¯¹ä¸€äº›å…±äº«æ•°æ®åŒæ—¶è¿›è¡Œè®¿é—®æ“ä½œï¼Œå¦‚ä¸€äº›äº‹åŠ¡ä¿®æ”¹æ•°æ®ï¼Œå¦ä¸€äº›äº‹åŠ¡è¯»å–æ•°æ®ã€‚è¿™äº›å¹¶å‘çš„å…±äº«æ•°æ®æ“ä½œï¼Œå¦‚æœåœ¨ DBMS ä¸­æ²¡æœ‰ä¸€å®šçš„çº¦æŸæ§åˆ¶æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå¸¦æ¥æ•°æ®ä¸ä¸€è‡´æ€§æˆ–äº‹åŠ¡ç¨‹åºæ­»é”é—®é¢˜ã€‚å› æ­¤ï¼Œåœ¨å¤šä¸ªäº‹åŠ¡å¹¶å‘è¿è¡Œæ—¶å¿…é¡»è¿›è¡Œå¹¶å‘æ§åˆ¶å¤„ç† å¹¶å‘æ§åˆ¶ç›®çš„ æ”¯æŒå¹¶å‘äº‹åŠ¡å¤„ç†ï¼Œä½¿æ›´å¤šç”¨æˆ·å¹¶è¡Œæ“ä½œï¼Œæé«˜ç³»ç»Ÿçš„å¹¶å‘è®¿é—®èƒ½åŠ›ã€‚ ä¿è¯ä¸€ä¸ªäº‹åŠ¡å·¥ä½œä¸ä¼šå¯¹å¦ä¸€ä¸ªäº‹åŠ¡å·¥ä½œäº§ç”Ÿä¸åˆç†çš„å½±å“ã€‚ å¹¶å‘æ§åˆ¶éœ€è§£å†³çš„é—®é¢˜ ä¸¢å¤±æ›´æ–° lost updateä¸¤ä¸ªäº‹åŠ¡åŒæ—¶è¯»å–åŒä¸€æ•°æ®ï¼Œå…¶ä¸­ä¸€ä¸ªäº‹åŠ¡ä¿®æ”¹æ•°æ®åï¼Œå¦ä¸€ä¸ªäº‹åŠ¡ä¹Ÿä¿®æ”¹äº†åŒä¸€æ•°æ®ï¼Œå¯¼è‡´å…¶ä¸­ä¸€ä¸ªäº‹åŠ¡çš„ä¿®æ”¹è¢«è¦†ç›–ã€‚ è„è¯» dirty readäº‹åŠ¡ T1 æ›´æ–°äº†æ•°æ®ï¼Œä½†æ²¡æœ‰ Commit,T2 è¯»å–äº† T1 æ›´æ–°çš„æ•°æ®ï¼Œä½† T1 é€šè¿‡ ROLLBACK æ’¤é”€äº‹åŠ¡ï¼Œå³ T2 è¯»å–åˆ°è„æ•°æ®ã€‚ ä¸å¯é‡å¤è¯» nonrepeatable readäº‹åŠ¡ T1 è¯»å– aï¼ŒT2 ä¿®æ”¹ a å¹¶æäº¤ï¼ŒT1 å†æ¬¡è¯»å– aï¼Œå‘ç° a çš„å€¼å‘ç”Ÿäº†å˜åŒ–ã€‚å³ä¸€ä¸ªäº‹åŠ¡çš„ä¸¤æ¬¡è¯»å–ç›¸åŒçš„èµ„æºä½†å¾—åˆ°ä¸åŒçš„å€¼ å¹»è¯» phantom readäº‹åŠ¡T1æŒ‰ä¸€å®šæ¡ä»¶ä»æ•°æ®åº“ä¸­è¯»å–æŸäº›æ•°æ®è®°å½•åï¼Œäº‹åŠ¡T2åœ¨å…¶ä¸­æ’å…¥äº†ä¸€äº›è®°å½•ï¼Œå½“T1å†æ¬¡æŒ‰ç›¸åŒæ¡ä»¶è¯»å–æ•°æ®æ—¶ï¼Œå‘ç°å¤šäº†ä¸€äº›è®°å½•ã€‚ç§°ä¸ºå¹»è¯»ã€‚ä¸ä¸å¯é‡å¤è¯»ç±»ä¼¼ã€‚A transaction re-executes a query returning a set of rows that satisfy a search condition and finds that the set of rows satisfying the condition has changed due to another recently-committed transaction. serialization anomalyThe result of successfully committing a group of transactions is inconsistent with all possible orderings of running those transactions one at a time. åŠ é”åè®®ä¸€çº§åŠ é”åè®®ï¼šä»»ä½•äº‹åŠ¡åœ¨ä¿®æ”¹å…±äº«æ•°æ®å¯¹è±¡ä¹‹å‰ï¼Œå¿…é¡»å¯¹è¯¥æ•°æ®æ‰§è¡Œæ’å®ƒé”å®šæŒ‡ä»¤ï¼Œç›´åˆ°è¯¥äº‹åŠ¡å¤„ç†å®Œæˆï¼Œæ‰è¿›è¡Œè§£é”æŒ‡ä»¤æ‰§è¡Œã€‚ç‰¹ç‚¹ï¼šä½¿ç”¨ä¸€çº§åŠ é”åè®®ï¼Œå¯é¿å…å‡ºç°æ›´æ–°ä¸¢å¤±é—®é¢˜ã€‚ä½†ä¸èƒ½è§£å†³â€œä¸å¯é‡å¤è¯»å–â€ã€â€œè„è¯»â€ç­‰æ•°æ®ä¸ä¸€è‡´é—®é¢˜äºŒçº§åŠ é”åè®®ï¼šåœ¨ä¸€çº§åŠ é”åè®®åŸºç¡€ä¸Šï¼Œé’ˆå¯¹å¹¶å‘äº‹åŠ¡çš„å…±äº«æ•°æ®è¯»æ“ä½œï¼Œå¿…é¡»å¯¹è¯¥æ•°æ®æ‰§è¡Œå…±äº«é”å®šæŒ‡ä»¤ï¼Œè¯»å®Œæ•°æ®åå³åˆ»é‡Šæ”¾å…±äº«é”å®šã€‚ç‰¹ç‚¹ï¼šè¯¥åŠ é”åè®®ä¸ä½†å¯ä»¥é˜²æ­¢ä¸¢å¤±æ›´æ–°,è„è¯»é—®é¢˜ã€‚ä½†æœ‰å¯èƒ½ä¼šå‡ºç°â€œä¸å¯é‡å¤è¯»å–â€çš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚ä¸‰çº§åŠ é”åè®®ï¼šåœ¨ä¸€çº§åŠ é”åè®®åŸºç¡€ä¸Šï¼Œé’ˆå¯¹å¹¶å‘äº‹åŠ¡å¯¹å…±äº«æ•°æ®è¿›è¡Œè¯»æ“ä½œï¼Œå¿…é¡»å¯¹è¯¥æ•°æ®æ‰§è¡Œå…±äº«é”å®šæŒ‡ä»¤ï¼Œç›´åˆ°è¯¥äº‹åŠ¡å¤„ç†ç»“æŸæ‰é‡Šæ”¾å…±äº«é”å®šã€‚ç‰¹ç‚¹ï¼šè¯¥åŠ é”åè®®å¯ä»¥é˜²æ­¢ä¸¢å¤±æ›´æ–°ã€è„è¯»ã€ä¸å¯é‡å¤è¯»å– ä¸¤é˜¶æ®µé”å®šåè®®å¹¶å‘äº‹åŠ¡çš„æ­£ç¡®è°ƒåº¦å‡†åˆ™ï¼šä¸€ä¸ªç»™å®šçš„å¹¶å‘äº‹åŠ¡è°ƒåº¦ï¼Œå½“ä¸”ä»…å½“å®ƒæ˜¯å¯ä¸²è¡ŒåŒ–æ—¶ï¼Œæ‰èƒ½ä¿è¯æ­£ç¡®è°ƒåº¦ã€‚ä¿è¯å¯ä¸²è¡ŒåŒ–çš„ä¸€ä¸ªåè®®æ˜¯ï¼šäºŒé˜¶æ®µé”å®šåè®®äºŒé˜¶æ®µé”å®šåè®®è§„å®šæ¯ä¸ªäº‹åŠ¡å¿…é¡»åˆ†ä¸¤ä¸ªé˜¶æ®µæå‡ºåŠ é”å’Œè§£é”ç”³è¯·:å¢é•¿é˜¶æ®µï¼Œäº‹åŠ¡åªèƒ½è·å¾—é”ï¼Œä½†ä¸èƒ½é‡Šæ”¾é”ã€‚ç¼©å‡é˜¶æ®µï¼Œäº‹åŠ¡åªèƒ½é‡Šæ”¾é”ï¼Œä½†ä¸èƒ½è·å¾—æ–°é”ã€‚ ç»“è®º:è‹¥å¹¶å‘äº‹åŠ¡æ‰§è¡Œçš„æ‰€æœ‰äº‹åŠ¡éƒ½éµä»ä¸¤é˜¶æ®µé”å®šåè®®ï¼Œåˆ™è¿™äº›äº‹åŠ¡çš„ä»»ä½•å¹¶å‘è°ƒåº¦éƒ½æ˜¯å¯ä¸²è¡ŒåŒ–è°ƒåº¦ï¼Œå³è¿™äº›å¹¶å‘è°ƒåº¦æ‰§è¡Œç»“æœå¯ä»¥ä¿è¯æ•°æ®åº“ä¸€è‡´æ€§ã€‚ æ•°æ®åº“å¤‡ä»½ä¸æ¢å¤æ•°æ®åº“å¤‡ä»½â€”â€”æ˜¯æŒ‡å°†æ•°æ®åº“å½“å‰æ•°æ®å’ŒçŠ¶æ€è¿›è¡Œå‰¯æœ¬å¤åˆ¶ï¼Œä»¥ä¾¿å½“æ•°æ®åº“å—åˆ°ç ´åæˆ–ä¸¢å¤±æ•°æ®æ—¶å¯ä»¥è¿›è¡Œä¿®å¤ã€‚æ•°æ®åº“æ¢å¤â€”â€”æ˜¯æŒ‡æ•°æ®åº“ä¸­æ•°æ®ä¸¢å¤±æˆ–è¢«ç ´åæ—¶ï¼Œä»å¤‡ä»½å‰¯æœ¬å°†æ•°æ®åº“ä»é”™è¯¯çŠ¶æ€æ¢å¤åˆ°æŸä¸€æ­£ç¡®çŠ¶æ€ã€‚ å¤‡ä»½æ–¹æ³•ï¼šå®Œå…¨æ•°æ®åº“å¤‡ä»½å·®å¼‚æ•°æ®åº“å¤‡ä»½äº‹åŠ¡æ—¥å¿—å¤‡ä»½æ–‡ä»¶å¤‡ä»½ å¤‡ä»½æ–¹å¼ çƒ­å¤‡ä»½ Hot Backupï¼Œä¹Ÿè¢«ç§°ä¸ºåœ¨çº¿å¤‡ä»½ï¼Œæ˜¯åœ¨æ•°æ®åº“ä»åœ¨è¿è¡Œå’Œå¤„ç†äº‹åŠ¡çš„åŒæ—¶è¿›è¡Œçš„å¤‡ä»½ã€‚è¿™ç§å¤‡ä»½æ–¹å¼çš„ä¸»è¦ä¼˜ç‚¹æ˜¯å®ƒä¸ä¼šä¸­æ–­æ•°æ®åº“æœåŠ¡ï¼Œä½†å¯èƒ½ä¼šç¨å¾®å½±å“æ•°æ®åº“çš„æ€§èƒ½ã€‚ å†·å¤‡ä»½ Cold Backupï¼šä¹Ÿè¢«ç§°ä¸ºç¦»çº¿å¤‡ä»½ï¼Œæ˜¯åœ¨æ•°æ®åº“å®Œå…¨å…³é—­çš„æƒ…å†µä¸‹è¿›è¡Œçš„å¤‡ä»½ã€‚è¿™ç§å¤‡ä»½æ–¹å¼å¯ä»¥ç¡®ä¿å¤‡ä»½çš„æ•°æ®ä¸€è‡´æ€§ï¼Œä½†åœ¨å¤‡ä»½æœŸé—´ï¼Œæ•°æ®åº“æ— æ³•æä¾›æœåŠ¡ã€‚ å¤‡ä»½æ—¶æœº:å½“ç³»ç»Ÿæ•°æ®åº“é‡è¦æ•°æ®è¢«ä¿®æ”¹ã€æ—¥å¿—è¢«æ¸…ç†ã€ç”¨æˆ·æ•°æ®åº“åˆ›å»ºã€ç”¨æˆ·æ•°æ®åº“åŠ è½½ç­‰äº‹ä»¶å‡ºç°æ—¶ã€‚ æ•°æ®åº“å¤‡ä»½å®ç° 12345--å®ä¾‹æ“ä½œï¼š å¤‡ä»½SAMPLEæ•°æ®åº“åˆ°ä¸€ä¸ªGç£ç›˜çš„æ ¹ç›®å½•æ–‡ä»¶Sample.bakä¸­ã€‚BACKUP DATABASE SAMPLETO DISK = 'G:\\Sample.bak'; --å®ä¾‹æ“ä½œï¼š ä»å­˜å‚¨å¤‡ä»½æ–‡ä»¶ä¸­æ¢å¤SAMPLEæ•°æ®åº“ã€‚RESTORE DATABASE SAMPLEFROM DISK = 'G:\\Sample.bak';","link":"/UESTC/DataBase/Ch5-DbManagement/"},{"title":"Châ…£-æ•°æ®åº“è®¾è®¡ä¸å®ç°","text":"æ•°æ®é›†è®¾è®¡æ–¹æ¡ˆåŒ…æ‹¬: æ•°æ®åº“åº”ç”¨æ¶æ„è®¾è®¡ åœ¨ä¸åŒåº”ç”¨éœ€æ±‚åœºæ™¯ä¸­ï¼Œæ•°æ®åº“çš„åº”ç”¨æ¶æ„æ–¹å¼æ˜¯ä¸åŒçš„ã€‚æ•°æ®åº“åº”ç”¨æ¶æ„å¯åˆ†ä¸ºå•ç”¨æˆ·ç»“æ„ã€é›†ä¸­å¼ç»“æ„ã€C/S ç»“æ„å’Œåˆ†å¸ƒå¼ç»“æ„ æ•°æ®åº“ç»“æ„æ¨¡å‹è®¾è®¡ æ•°æ®åº“ç»“æ„æ¨¡å‹è®¾è®¡ä¸€èˆ¬åˆ†ä¸ºæ¦‚å¿µå±‚ã€é€»è¾‘å±‚ã€ç‰©ç†å±‚è®¾è®¡ï¼Œå®ƒä»¬çš„è®¾è®¡æ¨¡å‹åˆ†åˆ«ä¸ºæ¦‚å¿µæ•°æ®æ¨¡å‹ CDMã€é€»è¾‘æ•°æ®æ¨¡å‹ LDM å’Œç‰©ç†æ•°æ®æ¨¡å‹ PDM æ•°æ®åº“åº”ç”¨è®¿é—®æ–¹å¼è®¾è®¡ æ•°æ®åº“åº”ç”¨å¯¹æ•°æ®åº“è®¿é—®å¯ä»¥æœ‰å¤šç§æ–¹å¼ï¼Œå¦‚ç›´æ¥æœ¬åœ°æ¥å£è¿æ¥è®¿é—®ã€åŸºäºæ ‡å‡†æ¥å£è¿æ¥è®¿é—®ã€åŸºäºæ•°æ®è®¿é—®å±‚æ¡†æ¶è¿æ¥è®¿é—® æ•°æ®åº“ç»“æ„æ¨¡å‹ æ¦‚å¿µæ•°æ®æ¨¡å‹ï¼ˆConcept Data Modelï¼ŒCDMï¼‰æ˜¯ä¸€ç§é¢å‘ç”¨æˆ·çš„ç³»ç»Ÿæ•°æ®æ¨¡å‹ï¼Œå®ƒç”¨æ¥æè¿°ç°å®ä¸–ç•Œçš„ç³»ç»Ÿæ¦‚å¿µåŒ–æ•°æ®ç»“æ„ã€‚ä½¿æ•°æ®åº“è®¾è®¡äººå‘˜åœ¨ç³»ç»Ÿè®¾è®¡çš„åˆå§‹é˜¶æ®µï¼Œæ‘†è„±è®¡ç®—æœºç³»ç»ŸåŠ DBMS çš„å…·ä½“æŠ€æœ¯é—®é¢˜ï¼Œé›†ä¸­ç²¾åŠ›åˆ†æä¸šåŠ¡æ•°æ®ä»¥åŠæ•°æ®ä¹‹é—´çš„è”ç³»ç­‰ï¼Œæè¿°ç³»ç»Ÿçš„æ•°æ®å¯¹è±¡åŠå…¶ç»„æˆå…³ç³»ã€‚ é€»è¾‘æ•°æ®æ¨¡å‹ (Logic Data Modelï¼ŒLDM)æ˜¯åœ¨æ¦‚å¿µæ•°æ®æ¨¡å‹åŸºç¡€ä¸Šï¼Œä»ç³»ç»Ÿè®¾è®¡è§’åº¦æè¿°ç³»ç»Ÿçš„æ•°æ®å¯¹è±¡ç»„æˆåŠå…¶å…³è”ç»“æ„ï¼Œå¹¶è€ƒè™‘è¿™äº›æ•°æ®å¯¹è±¡ç¬¦åˆæ•°æ®åº“å¯¹è±¡çš„é€»è¾‘è¡¨ç¤ºã€‚ ç‰©ç†æ•°æ®æ¨¡å‹ï¼ˆPhysical Data Modelï¼ŒPDMï¼‰æ˜¯åœ¨é€»è¾‘æ•°æ®æ¨¡å‹åŸºç¡€ä¸Šï¼Œé’ˆå¯¹å…·ä½“ DBMS æ‰€è®¾è®¡çš„æ•°æ®æ¨¡å‹ã€‚å®ƒç”¨äºæè¿°ç³»ç»Ÿæ•°æ®æ¨¡å‹åœ¨å…·ä½“ DBMS ä¸­çš„æ•°æ®å¯¹è±¡ç»„ç»‡ã€å­˜å‚¨æ–¹å¼ã€ç´¢å¼•æ–¹å¼ã€è®¿é—®è·¯å¾„ç­‰å®ç°ä¿¡æ¯ã€‚ æ•°æ®éœ€æ±‚åˆ†æé˜¶æ®µ:ä»ç°å®ä¸šåŠ¡ä¸­è·å–æ•°æ®è¡¨å•ã€æŠ¥è¡¨ã€æŸ¥è¯¢ã€ä¸šåŠ¡è§„åˆ™ã€æ•°æ®æ›´æ–°çš„è¯´æ˜;åˆ†æç³»ç»Ÿçš„æ•°æ®ç‰¹å¾ã€æ•°æ®ç±»å‹ã€æ•°æ®å–å€¼çº¦æŸ;æè¿°ç³»ç»Ÿçš„æ•°æ®å…³ç³»ã€æ•°æ®å¤„ç†è¦æ±‚;å»ºç«‹ç³»ç»Ÿçš„æ•°æ®å­—å…¸ æ•°æ®åº“è®¾è®¡é˜¶æ®µ:æ•°æ®åº“å†…éƒ¨ç»“æ„è®¾è®¡ï¼ˆæ¦‚å¿µæ•°æ®æ¨¡å‹ã€é€»è¾‘æ•°æ®æ¨¡å‹ã€ç‰©ç†æ•°æ®æ¨¡å‹ï¼‰;æ•°æ®åº“ç´¢å¼•ã€è§†å›¾ã€æŸ¥è¯¢è®¾è®¡;æ•°æ®åº“è¡¨çº¦æŸè®¾è®¡;æ•°æ®åº“è§¦å‘å™¨ã€å­˜å‚¨è¿‡ç¨‹è®¾è®¡;æ–‡ä»¶ç»„ç»‡æ–¹å¼ æ•°æ®åº“å®ç°é˜¶æ®µ:æ•°æ®åº“åˆ›å»º;æ•°æ®æ¨¡å‹çš„ SQL ç¨‹åºåˆ›å»ºã€æ•°æ®åº“å¯¹è±¡ç‰©ç†å®ç° æ•°æ®åº“æµ‹è¯•é˜¶æ®µ:æ•°æ®åº“æ•°æ®ä¸Šçº¿;æ•°æ®åº“ç³»ç»Ÿæµ‹è¯• CDM ä»ç”¨æˆ·è§’åº¦æ‰€å»ºæ¨¡çš„ç³»ç»Ÿæ•°æ®å¯¹è±¡åŠå…¶å…³ç³»ï¼Œå®ƒå¸®åŠ©ç”¨æˆ·åˆ†æä¿¡æ¯ç³»ç»Ÿçš„æ•°æ®ç»“æ„å…³ç³» LDM ä»ç³»ç»Ÿåˆ†æå‘˜è§’åº¦æ‰€å»ºæ¨¡çš„ç³»ç»Ÿæ•°æ®å¯¹è±¡é€»è¾‘ç»“æ„å…³ç³»ï¼Œå®ƒå¸®åŠ©å¼€å‘äººå‘˜åˆ†æä¿¡æ¯ç³»ç»Ÿçš„é€»è¾‘æ•°æ®ç»“æ„ PDM ä»ç³»ç»Ÿè®¾è®¡äººå‘˜è§’åº¦æ‰€å»ºæ¨¡çš„ç³»ç»Ÿæ•°æ®ç‰©ç†å­˜å‚¨åŠç»“æ„å…³ç³»ï¼Œå®ƒé’ˆå¯¹è®¾è®¡è€…å…·ä½“å®šä¹‰ä¿¡æ¯ç³»ç»Ÿçš„æ•°æ®åº“è¡¨ç»“æ„ E-R æ¨¡å‹æ–¹æ³•E-R æ¨¡å‹åŸºæœ¬å…ƒç´ E-R æ¨¡å‹æ˜¯â€œå®ä½“-è”ç³»æ¨¡å‹â€ï¼ˆEntity-Relationship Modelï¼‰çš„ç®€ç§°ã€‚å®ƒæ˜¯ä¸€ç§æè¿°ç°å®ä¸–ç•Œæ¦‚å¿µæ•°æ®æ¨¡å‹ã€é€»è¾‘æ•°æ®æ¨¡å‹çš„æœ‰æ•ˆæ–¹æ³•ã€‚ åœ¨ E-R æ¨¡å‹ä¸­ï¼ŒåŸºæœ¬å…ƒç´ åŒ…æ‹¬å®ä½“ã€å±æ€§ã€æ ‡è¯†ç¬¦å’Œè”ç³»: å®ä½“Entity æ˜¯æŒ‡é—®é¢˜åŸŸä¸­å­˜åœ¨çš„äººã€äº‹ã€ç‰©ã€åœ°ç‚¹ç­‰å®¢è§‚äº‹ç‰©åœ¨é€»è¾‘å±‚é¢çš„æ•°æ®æŠ½è±¡ã€‚å®ƒç”¨äºæè¿°äº‹ç‰©çš„æ•°æ®å¯¹è±¡ï¼Œå¦‚å®¢æˆ·ã€äº¤æ˜“ã€äº§å“ã€è®¢å•ç­‰ å±æ€§Attribute æ˜¯æŒ‡æè¿°å®ä½“ç‰¹å¾çš„æ•°æ®é¡¹ã€‚æ¯ä¸ªå®ä½“éƒ½å…·æœ‰ 1 ä¸ªæˆ–å¤šä¸ªå±æ€§ æ ‡è¯†ç¬¦Identifier æ˜¯æŒ‡æ ‡è¯†ä¸åŒå®ä½“å®ä¾‹çš„å±æ€§ã€‚æ ‡è¯†ç¬¦å¯ä»¥æ˜¯ 1 ä¸ªæˆ–å¤šä¸ªå±æ€§æ ‡è¯†ç¬¦ä¸ä¸»é”®çš„åŒºåˆ«æ˜¯æ ‡è¯†ç¬¦æ˜¯ä¸€ä¸ªé€»è¾‘æ¦‚å¿µï¼Œä¸»é”®æ˜¯ç‰©ç†æ¦‚å¿µ è”ç³»Relationship æ˜¯æŒ‡å®ä½“ä¹‹é—´çš„è”ç³»ï¼Œå¦‚â€œå­¦ç”Ÿâ€ä¸â€œæˆç»©â€çš„è”ç³»ã€â€œå­©å­â€ä¸â€œçˆ¶äº²â€ã€â€œæ¯äº²â€çš„è”ç³»ç­‰ã€‚è”ç³»ä¸­å…³è”çš„å®ä½“æ•°ç›®ç§°ä¸ºè”ç³»åº¦æ•° å®ä½“-è”ç³»ç±»å‹äºŒå…ƒå®ä½“è”ç³»ç±»å‹ ä¸€å¯¹ä¸€è”ç³» 1:1 ä¸€å¯¹å¤šè”ç³» 1:N å¤šå¯¹å¤šè”ç³» M:N ä¸Šè¿°å®ä½“ä¹‹é—´çš„è”ç³»åæ˜ äº†ä¸€ä¸ªç»™å®šå®ä½“æœ‰å¤šå°‘å®ä¾‹ä¸å¦ä¸€å®ä½“å®ä¾‹å­˜åœ¨çš„æ•°é‡å¯¹åº”å…³ç³»ã€‚æœ¯è¯­åŸºæ•°Cardinality è¡¨ç¤ºå®ä½“è”ç³»çš„å®ä¾‹æ•°é‡ã€‚åœ¨å®ä½“ä¹‹é—´é™¤äº†éœ€è¦åæ˜ äº†æ•°é‡å¯¹åº”å…³ç³»ï¼Œæœ‰æ—¶è¿˜éœ€è¦åæ˜ å®ä½“å‚ä¸å…³ç³»çš„å¿…è¦æ€§ï¼Œå³å¯é€‰optional æˆ–å¼ºåˆ¶mandatory ç»§æ‰¿è”ç³»åœ¨ E-R æ¨¡å‹ä¸­ï¼Œå®ä½“ä¹‹é—´é™¤äº†åŸºæœ¬è”ç³»å¤–ï¼Œè¿˜å­˜åœ¨ç»§æ‰¿è”ç³»ã€‚ç»§æ‰¿è”ç³»ç”¨äºè¡¨ç¤ºå®ä½“ä¹‹é—´çš„ç›¸ä¼¼æ€§å…³ç³»ã€‚åœ¨å®ä½“ç»§æ‰¿è”ç³»ä¸­ï¼Œä¸€ç«¯æ˜¯å…·æœ‰å…¬å…±å±æ€§çš„å®ä½“ï¼Œç§°ä¸ºçˆ¶å®ä½“ï¼›å¦ä¸€ç«¯æ˜¯ä¸çˆ¶å®ä½“å…·æœ‰ç›¸ä¼¼å±æ€§ï¼ŒåŒæ—¶ä¹Ÿå…·æœ‰ç‰¹æ®Šæ€§çš„ä¸€ä¸ªæˆ–å¤šä¸ªå®ä½“ï¼Œç§°ä¸ºå­å®ä½“ã€‚ åœ¨ç»§æ‰¿è”ç³»ä¸­ï¼Œè¿˜å¯ä»¥åˆ†ä¸º: äº’æ–¥æ€§ç»§æ‰¿è”ç³»Mutual Exclusive Inheritance Relationshipï¼šåœ¨è¿™ç§ç±»å‹çš„ç»§æ‰¿ä¸­ï¼Œå­ç±»åªèƒ½ä»ä¸€ä¸ªçˆ¶ç±»ç»§æ‰¿ï¼Œä¸èƒ½åŒæ—¶ä»å¤šä¸ªçˆ¶ç±»ç»§æ‰¿ éäº’æ–¥æ€§ç»§æ‰¿è”ç³»Non-Mutual Exclusive Inheritance Relationshipï¼šè¿™ç§ç±»å‹çš„ç»§æ‰¿ä¸­ï¼Œå­ç±»å¯ä»¥ä»å¤šä¸ªçˆ¶ç±»ç»§æ‰¿ï¼Œå³ä¸€ä¸ªå­ç±»å¯ä»¥å±äºå¤šä¸ªçˆ¶ç±» å®Œæ•´ç»§æ‰¿è”ç³» Total Inheritance Relationshipï¼šåœ¨è¿™ç§ç»§æ‰¿ä¸­ï¼Œçˆ¶å®ä½“çš„æ¯ä¸€ä¸ªå®ä¾‹éƒ½å¿…é¡»æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªå­å®ä½“çš„å®ä¾‹ã€‚æ¢å¥è¯è¯´ï¼Œçˆ¶å®ä½“ä¸­çš„æ¯ä¸ª instance éƒ½å¿…é¡»åœ¨å­å®ä½“ä¸­æœ‰å¯¹åº”ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªâ€œäººâ€å®ä½“ï¼Œå®ƒæœ‰ä¸¤ä¸ªå­å®ä½“ï¼šâ€œå­¦ç”Ÿâ€å’Œâ€œæ•™å¸ˆâ€ï¼Œé‚£ä¹ˆåœ¨å®Œæ•´ç»§æ‰¿å…³ç³»ä¸­ï¼Œæ¯ä¸ªâ€œäººâ€éƒ½å¿…é¡»æ˜¯â€œå­¦ç”Ÿâ€æˆ–â€œæ•™å¸ˆâ€ã€‚ ä¸å®Œæ•´ç»§æ‰¿è”ç³» Partial Inheritance Relationshipï¼šåœ¨è¿™ç§ç±»å‹çš„ç»§æ‰¿ä¸­ï¼Œå­ç±»çš„ instance å¯ä»¥ä¸å±äºçˆ¶ç±»çš„ä»»ä½•å­ç±»ï¼›åœ¨ä¸Šè¿°çš„ä¾‹å­ä¸­ï¼Œéå®Œæ•´ç»§æ‰¿å…è®¸å­˜åœ¨ä¸€äº›â€œäººâ€ï¼Œä»–ä»¬æ—¢ä¸æ˜¯â€œå­¦ç”Ÿâ€ä¹Ÿä¸æ˜¯â€œæ•™å¸ˆâ€ã€‚ å¼ºå¼±å®ä½“è”ç³»åœ¨ E-R æ¨¡å‹ä¸­ï¼ŒæŒ‰ç…§å®ä½“ä¹‹é—´çš„è¯­ä¹‰å…³ç³»ï¼Œå¯ä»¥å°†å®ä½“åˆ†ä¸ºå¼±å®ä½“ Weak Entity å’Œå¼ºå®ä½“ Strong Entity; å¼±å®ä½“æ˜¯æŒ‡é‚£äº›å¯¹äºå¦å¤–å®ä½“æœ‰ä¾èµ–å…³ç³»çš„å®ä½“ï¼Œå³ä¸€ä¸ªå®ä½“çš„å­˜åœ¨å¿…é¡»ä»¥å¦ä¸€å®ä½“çš„å­˜åœ¨ä¸ºå‰æã€‚è€Œè¢«ä¾èµ–çš„å®ä½“ç§°ä¸ºå¼ºå®ä½“; ä¾‹å¦‚åœ¨å­¦æ ¡ä¸å­¦ç”Ÿä¹‹é—´çš„è”ç³»ä¸­ï¼Œå­¦ç”Ÿæ˜¯å¼±å®ä½“ï¼Œå­¦æ ¡æ˜¯å¼ºå®ä½“ã€‚ å¼ºå®ä½“Strong Entity å¼±å®ä½“Weak Entity æ ‡è¯†ç¬¦ä¾èµ–å¼±å®ä½“ Identifier Dependent Weak Entityå¦‚æœå¼±å®ä½“çš„æ ‡è¯†ç¬¦ä¸­ï¼ŒåŒ…å«äº†å¼ºå®ä½“çš„æ ‡è¯†ç¬¦ï¼Œé‚£ä¹ˆè¿™ç§å¼±å®ä½“ç§°ä¸ºæ ‡è¯†ç¬¦ä¾èµ–å¼±å®ä½“ éæ ‡è¯†ç¬¦ä¾èµ–å¼±å®ä½“ Non-Identifier Dependent Weak Entityå¦‚æœå¼±å®ä½“çš„æ ‡è¯†ç¬¦ä¸­ï¼Œä¸åŒ…å«å¼ºå®ä½“çš„æ ‡è¯†ç¬¦ï¼Œé‚£ä¹ˆè¿™ç§å¼±å®ä½“ç§°ä¸ºéæ ‡è¯†ç¬¦ä¾èµ–å¼±å®ä½“ æ•°æ®åº“å»ºæ¨¡è®¾è®¡æ¦‚å¿µæ•°æ®æ¨¡å‹è®¾è®¡æ˜¯é€šè¿‡å¯¹ç°å®ä¸–ç•Œä¸­æ•°æ®å®ä½“è¿›è¡ŒæŠ½å–ã€åˆ†ç±»ã€èšé›†å’Œæ¦‚æ‹¬ç­‰å¤„ç†ï¼Œå»ºç«‹åæ˜ ç³»ç»Ÿä¸šåŠ¡æ•°æ®ç»„æˆç»“æ„çš„è¿‡ç¨‹ã€‚æ­¥éª¤ ä¸šåŠ¡æ•°æ®åˆ†æï¼ŒæŠ½å–æ•°æ®å®ä½“ å®šä¹‰å®ä½“å±æ€§åŠå…¶æ ‡è¯† å»ºç«‹å®ä½“è”ç³»ï¼Œæ„å»ºå±€éƒ¨ E-R æ¨¡å‹å›¾ åˆ†ç±»ã€èšé›†å’Œæ¦‚æ‹¬å„ä¸ªéƒ¨åˆ† E-R æ¨¡å‹å›¾ å®Œå–„å…¨å±€ E-R æ¨¡å‹å›¾ï¼Œå»ºç«‹ç³»ç»Ÿä¸šåŠ¡æ•°æ®ç»„æˆç»“æ„ æ•°æ®æ¨¡å‹ DM å…ƒç´ å¯¹åº”å…³ç³»è¡¨ CDM LDM PDM Entity Entity Table Attribute Attribute Column Identifier Primary Identifier/Foreign Identifer Primary Key/Foreign Key Relationship Relationship Reference(å‚ç…§å®Œæ•´æ€§çº¦æŸ) 1:11:NM:N è§„èŒƒåŒ–è®¾è®¡ä¸ºä»€ä¹ˆéœ€è¦è§„èŒƒåŒ–æ•°æ®åº“è®¾è®¡ï¼Ÿ å‡å°‘æ•°æ®åº“ä¸­çš„å†—ä½™æ•°æ®ï¼Œå°½é‡ä½¿åŒä¸€æ•°æ®åœ¨æ•°æ®åº“ä¸­ä»…ä¿å­˜ä¸€ä»½ï¼Œæœ‰æ•ˆé™ä½ç»´æŠ¤æ•°æ®ä¸€è‡´æ€§çš„å·¥ä½œé‡ã€‚ è®¾è®¡åˆç†çš„è¡¨é—´ä¾èµ–å…³ç³»å’Œçº¦æŸå…³ç³»ï¼Œä¾¿äºå®ç°æ•°æ®å®Œæ•´æ€§å’Œä¸€è‡´æ€§ã€‚ è®¾è®¡åˆç†çš„æ•°æ®åº“ç»“æ„ï¼Œä¾¿äºç³»ç»Ÿå¯¹æ•°æ®é«˜æ•ˆè®¿é—®å¤„ç†ã€‚ å‡½æ•°ä¾èµ–å®šä¹‰ï¼šè®¾æœ‰ä¸€å…³ç³»æ¨¡å¼R(U)ï¼ŒU ä¸ºå…³ç³» R çš„å±æ€§é›†åˆï¼ŒXå’ŒYä¸ºå±æ€§Uçš„å­é›†ã€‚è®¾ tï¼Œs æ˜¯å…³ç³» R ä¸­çš„ä»»æ„ä¸¤ä¸ªå…ƒç»„ï¼Œå¦‚æœ t[X] = s[X]ï¼Œåˆ™t[Y] = s[Y]ã€‚é‚£ä¹ˆç§° Y å‡½æ•°ä¾èµ–äº Xï¼Œè¡¨ç¤ºä¸ºXâ†’Yã€‚å‡½æ•°ä¾èµ–çš„å·¦éƒ¨ç§°ä¸ºå†³å®šå› å­ï¼Œå³éƒ¨ç§°ä¸ºä¾èµ–å‡½æ•°ã€‚å†³å®šå› å­å’Œä¾èµ–å‡½æ•°éƒ½æ˜¯å±æ€§çš„é›†åˆã€‚ å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå…³ç³»æ¨¡å¼Rï¼Œä»£è¡¨ä¸€ä¸ªå­¦ç”Ÿæ³¨å†Œç³»ç»Ÿï¼Œå…¶ä¸­Uæ˜¯å…³ç³»Rçš„å±æ€§é›†åˆï¼ŒåŒ…æ‹¬ {å­¦ç”ŸID, å§“å, è¯¾ç¨‹ID, è¯¾ç¨‹å, æ•™å¸ˆ}ä»»æ„ç»™å®šä¸¤ä¸ªå…ƒç»„tå’Œsï¼Œä¾‹å¦‚å…ƒç»„t:{å­¦ç”ŸID: 001, å§“å: &quot;å°æ˜&quot;, è¯¾ç¨‹ID: C101, è¯¾ç¨‹å: &quot;æ•°å­¦&quot;, æ•™å¸ˆ: &quot;æè€å¸ˆ&quot;}å…ƒç»„s:{å­¦ç”ŸID: 001, å§“å: &quot;å°æ˜&quot;, è¯¾ç¨‹ID: C102, è¯¾ç¨‹å: &quot;è‹±è¯­&quot;, æ•™å¸ˆ: &quot;ç‹è€å¸ˆ&quot;}éƒ½æœ‰t[å­¦ç”ŸID] = s[å­¦ç”ŸID] åˆ™ t[å§“å] = s[å§“å]å¯ä»¥å¾—å‡ºå­¦ç”Ÿ ID å†³å®šå§“åï¼Œå³å­¦ç”ŸIDâ†’å§“å å‡½æ•°ä¾èµ–çš„ç±»å‹: å®Œå…¨å‡½æ•°ä¾èµ– Total Functional Dependencyè‹¥Xâ†’Yï¼Œå¯¹äºXçš„ä»»ä½•ä¸€ä¸ªçœŸå­é›†X'ï¼ŒX'â†’Yéƒ½ä¸æˆç«‹ï¼Œåˆ™ç§°Xâ†’Yæ˜¯å®Œå…¨å‡½æ•°ä¾èµ– éƒ¨åˆ†å‡½æ•°ä¾èµ– Partial Functional Dependencyè‹¥Xâ†’Yï¼ŒXå­˜åœ¨ä¸€ä¸ªçœŸå­é›†X'ï¼Œä½¿å¾—X'â†’Yï¼Œåˆ™ç§°Xâ†’Yæ˜¯éƒ¨åˆ†å‡½æ•°ä¾èµ– å±æ€§ä¼ é€’ä¾èµ– Transitive Dependencè‹¥æ»¡è¶³Xâ†’Yï¼ŒYâ†’Zï¼Œåˆ™æœ‰Xâ†’Zï¼Œåˆ™ç§°ä¸ºå±æ€§ä¼ é€’ä¾èµ– å¤šå€¼å‡½æ•°ä¾èµ– Multivalued Dependencyè®¾ U æ˜¯å…³ç³»æ¨¡å¼ R çš„å±æ€§é›†ï¼ŒX å’Œ Y æ˜¯ U çš„å­é›†ï¼ŒZ=U-X-Yï¼Œxyzè¡¨ç¤ºå±æ€§é›† XYZ çš„å€¼ã€‚å¯¹äº R çš„å…³ç³» rï¼Œåœ¨ r ä¸­å­˜åœ¨å…ƒç»„ï¼ˆx, y1, z1ï¼‰å’Œï¼ˆx, y2, z2ï¼‰æ—¶ï¼Œä¹Ÿå­˜åœ¨å…ƒç»„ï¼ˆx, y1, z2ï¼‰å’Œï¼ˆx, y2, z1ï¼‰ï¼Œé‚£ä¹ˆåœ¨æ¨¡å¼ R ä¸Šå­˜åœ¨å¤šå€¼å‡½æ•°ä¾èµ–ã€‚ (æ•°æ®ç»“æ„ï¼Œæè€å¸ˆï¼Œã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•-åˆçº§ã€‹)(æ•°æ®ç»“æ„ï¼Œç‹è€å¸ˆï¼Œã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•-é«˜çº§ã€‹) (æ•°æ®ç»“æ„ï¼Œæè€å¸ˆï¼Œã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•-é«˜çº§ã€‹)(æ•°æ®ç»“æ„ï¼Œç‹è€å¸ˆï¼Œã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•-åˆçº§ã€‹) å…³ç³»è§„èŒƒåŒ–èŒƒå¼å…³ç³»è§„èŒƒåŒ–æ˜¯æŠŠä¸€ä¸ªæœ‰è®¿é—®å¼‚å¸¸çš„å…³ç³»åˆ†è§£æˆç»“æ„è‰¯å¥½çš„å…³ç³»çš„è¿‡ç¨‹ï¼Œä½¿å¾—è¿™äº›å…³ç³»æœ‰æœ€å°çš„å†—ä½™æˆ–æ²¡æœ‰å†—ä½™ã€‚è§„èŒƒåŒ–èŒƒå¼ï¼ˆNormal Formï¼ŒNFï¼‰æ˜¯æŒ‡å…³ç³»è¡¨ç¬¦åˆç‰¹å®šè§„èŒƒåŒ–ç¨‹åº¦çš„æ¨¡å¼ã€‚ ç¬¬ 1 èŒƒå¼ï¼ˆ1NFï¼‰å¦‚æœå…³ç³»è¡¨ä¸­çš„å±æ€§ä¸å¯å†ç»†åˆ†ï¼Œè¯¥å…³ç³»æ»¡è¶³ç¬¬ 1 èŒƒå¼ã€‚åä¹‹ï¼Œè¯¥è¡¨å°±ä¸æ˜¯å…³ç³»è¡¨ã€‚ å¦‚æœè”ç³»æ–¹å¼æ˜¯ä¸€ä¸ªå…³ç³»è¡¨çš„å±æ€§ï¼Œé‚£ä¹ˆè”ç³»æ–¹å¼è¿˜å¯ç»†åˆ†ä¸ºç”µè¯å·ç ã€é‚®ç®±ç­‰å±æ€§ï¼›æ¶ˆé™¤è”ç³»æ–¹å¼è¿™ç±»å±æ€§ï¼Œå°†è”ç³»æ–¹å¼ç»†åˆ†ä¸ºç”µè¯å·ç ã€é‚®ç®±ç­‰å±æ€§ï¼Œå°±æ»¡è¶³äº†ç¬¬ 1 èŒƒå¼ã€‚ ç¬¬ 2 èŒƒå¼ï¼ˆ2NFï¼‰å¦‚æœå…³ç³»æ»¡è¶³ç¬¬ 1 èŒƒå¼ï¼Œå¹¶æ¶ˆé™¤äº†å…³ç³»ä¸­çš„å±æ€§éƒ¨åˆ†å‡½æ•°ä¾èµ–ï¼Œè¯¥å…³ç³»æ»¡è¶³ç¬¬ 2 èŒƒå¼ã€‚æœ‰ä¸€ä¸ªå…³ç³»(A,B,N, 0,P)å…¶å¤åˆä¸»é”®ä¸º(A,B)é‚£ä¹ˆ N,O,P è¿™ä¸‰ä¸ªéé”®å±æ€§éƒ½ä¸å­˜åœ¨åªä¾èµ– A æˆ–åªä¾èµ– B æƒ…å†µï¼Œåˆ™è¯¥å…³ç³»æ»¡è¶³ç¬¬ 2 èŒƒå¼ï¼Œåä¹‹ï¼Œä¸æ»¡è¶³ç¬¬ 2 èŒƒå¼ã€‚ æˆ‘ä»¬æœ‰ä¸€ä¸ªå…³ç³»æ¨¡å¼ Rï¼Œå®ƒçš„å±æ€§é›† U åŒ…æ‹¬ {å­¦ç”Ÿ ID, è¯¾ç¨‹ ID, å­¦ç”Ÿå§“å, è¯¾ç¨‹å, æ•™å¸ˆ}ï¼Œå¤åˆä¸»é”®ä¸º(å­¦ç”Ÿ ID,è¯¾ç¨‹ ID)ï¼Œç„¶è€Œå­¦ç”Ÿå§“ååªä¾èµ–äºå­¦ç”Ÿ IDï¼Œè¯¾ç¨‹åå’Œæ•™å¸ˆåªä¾èµ–äºè¯¾ç¨‹ IDï¼Œé‚£ä¹ˆå­¦ç”Ÿå§“åå’Œè¯¾ç¨‹åã€æ•™å¸ˆä¹‹é—´å­˜åœ¨éƒ¨åˆ†å‡½æ•°ä¾èµ–ï¼Œä¸æ»¡è¶³ç¬¬ 2 èŒƒå¼ã€‚ ç¬¬ 3 èŒƒå¼ï¼ˆ3NFï¼‰å¦‚æœå…³ç³»æ»¡è¶³ç¬¬ 2 èŒƒå¼ï¼Œå¹¶åˆ‡æ–­äº†å…³ç³»ä¸­çš„å±æ€§ä¼ é€’å‡½æ•°ä¾èµ–ï¼Œè¯¥å…³ç³»æ»¡è¶³ç¬¬ 3 èŒƒå¼ã€‚ {å­¦å·ï¼Œå§“åï¼Œç³»åï¼Œä½å€(å®¿èˆåœ°å€)ï¼Œç”µè¯ï¼Œç”µå­é‚®ä»¶}ï¼Œå…¶ä¸­å­¦å·å†³å®šç³»åï¼Œç³»åå†³å®šå®¿èˆåœ°å€ï¼Œæ•…å­¦å·å†³å®šå®¿èˆåœ°å€ï¼Œå­˜åœ¨ä¼ é€’ä¾èµ–ï¼Œä¸æ»¡è¶³ç¬¬ 3 èŒƒå¼;å¯ä»¥å¯¹å­¦ç”Ÿå…³ç³»è¡¨å†æ¬¡åˆ†è§£ä¸ºå­¦ç”Ÿå’Œç³»ä¿¡æ¯å…³ç³»è¡¨ Boyce-Codd èŒƒå¼ï¼ˆBCNFï¼‰åœ¨å…³ç³»ä¸­ï¼Œæ‰€æœ‰å‡½æ•°ä¾èµ–çš„å†³å®šå› å­éƒ½æ˜¯å€™é€‰é”®ï¼Œè¯¥å…³ç³»æ»¡è¶³ BCNF èŒƒå¼ ç¬¬ 4 èŒƒå¼ï¼ˆ4NFï¼‰å¦‚æœå…³ç³»æ»¡è¶³ BCNF èŒƒå¼ï¼Œå¹¶æ¶ˆé™¤äº†å¤šå€¼å‡½æ•°ä¾èµ–ï¼Œè¯¥å…³ç³»æ»¡è¶³ç¬¬ 4 èŒƒå¼ã€‚ é€†è§„èŒƒåŒ–å¤„ç†æ‰€è°“é€†è§„èŒƒåŒ–ï¼Œå°±æ˜¯é€‚å½“é™ä½è§„èŒƒåŒ–èŒƒå¼çº¦æŸï¼Œä¸å†è¦æ±‚ä¸€ä¸ªå…³ç³»è¡¨å¿…é¡»è¾¾åˆ°å¾ˆé«˜çš„è§„èŒƒåŒ–ç¨‹åº¦ï¼Œè€Œæ˜¯å…è®¸é€‚å½“çš„æ•°æ®å†—ä½™æ€§ï¼Œä»¥è·å–æ•°æ®è®¿é—®æ€§èƒ½ã€‚é€†è§„èŒƒåŒ–å¤„ç†çš„åŸºæœ¬æ–¹æ³•ï¼šï¼ˆ1ï¼‰å¢åŠ å†—ä½™åˆ—æˆ–æ´¾ç”Ÿåˆ—ï¼ˆ2ï¼‰å¤šä¸ªå…³ç³»è¡¨åˆå¹¶ä¸ºä¸€ä¸ªå…³ç³»è¡¨","link":"/UESTC/DataBase/Ch4-DbDesign/"},{"title":"Châ…¥ æ•°æ®åº“åº”ç”¨ç¼–ç¨‹","text":"æ•°æ®åº“è¿æ¥æŠ€æœ¯ODBCODBC æ˜¯ç”± Microsoft åœ¨ 1990 å¹´ä»£åˆå¼€å‘çš„ï¼Œç”¨äºè®¿é—®å„ç§æ•°æ®åº“ç³»ç»Ÿçš„æ ‡å‡† APIã€‚ODBC ä½¿ç”¨ SQL ä½œä¸ºæ•°æ®åº“è®¿é—®è¯­è¨€ï¼Œå…è®¸åº”ç”¨ç¨‹åºç‹¬ç«‹äºä»»ä½•ç‰¹å®š DBMSï¼Œä»è€Œä½¿å¾—åº”ç”¨ç¨‹åºèƒ½å¤Ÿä¸å¤šç§ DBMS è¿›è¡Œäº¤äº’ã€‚ODBC é©±åŠ¨ç¨‹åºæ˜¯ä¸€ç§å®ç°äº† ODBC æ¥å£çš„ç‰¹å®š DBMS çš„åº“ã€‚åº”ç”¨ç¨‹åºé€šè¿‡ ODBC é©±åŠ¨ç¨‹åºä¸ DBMS è¿›è¡Œé€šä¿¡ã€‚ å¼€æ”¾å¼æ•°æ®åº“äº’è¿ï¼ˆOpen DataBase Connectivityï¼‰å®ç°äº†åº”ç”¨ç¨‹åºå¯¹å¤šç§ä¸åŒ DBMS çš„æ•°æ®åº“çš„è®¿é—®ï¼Œå®ç°äº†æ•°æ®åº“è¿æ¥æ–¹å¼çš„å˜é© æ˜¯ä¸€å¥—åŸºäº SQL çš„ï¼Œå…¬å…±çš„ï¼Œä¸æ•°æ®åº“æ— å…³çš„ API ä½¿æ¯ä¸ªåº”ç”¨ç¨‹åºåˆ©ç”¨ç›¸åŒçš„æºä»£ç å°±å¯è®¿é—®ä¸åŒçš„æ•°æ®åº“ç³»ç»Ÿ å­˜å–å¤šä¸ªæ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œä»è€Œä½¿å¾—åº”ç”¨ç¨‹åºä¸æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¹‹é—´åœ¨é€»è¾‘ä¸Šç‹¬ç«‹ï¼Œä½¿åº”ç”¨ç¨‹åºä¸æ•°æ®åº“æ— å…³æ€§ JDBCJDBC æ˜¯ Java ä¸­ç”¨äºæ•°æ®åº“è¿æ¥çš„ APIï¼Œç”± Sun Microsystemsï¼ˆç°åœ¨æ˜¯ Oracle Corporation çš„ä¸€éƒ¨åˆ†ï¼‰åœ¨ 1997 å¹´å‘å¸ƒã€‚JDBC æä¾›äº†ä¸€ç§åŸºå‡†ï¼Œä½¿å¾— Java ç¨‹åºå¯ä»¥ä¸å¤šç§å…³ç³»æ•°æ®åº“è¿›è¡Œäº¤äº’ã€‚JDBC æä¾›äº†ä¸€ç»„æ¥å£å’Œç±»ï¼Œä½¿å¾—å¼€å‘äººå‘˜å¯ä»¥å‘é€ SQL è¯­å¥å¹¶å¤„ç†ç»“æœã€‚JDBC é©±åŠ¨ç¨‹åºæ˜¯å®ç°äº† JDBC æ¥å£çš„ç‰¹å®š DBMS çš„ Java ç±»åº“ã€‚Java ç¨‹åºé€šè¿‡ JDBC é©±åŠ¨ç¨‹åºä¸ DBMS è¿›è¡Œé€šä¿¡ã€‚ JDBC ç¨‹åºè®¿é—®æ•°æ®åº“çš„æ­¥éª¤ åº”ç”¨ç¨‹åºå¼€å§‹ å¯¼å…¥ java.sql åŒ… åŠ è½½å¹¶æ³¨å†Œé©±åŠ¨ç¨‹åº ä¾æ¬¡åˆ›å»º Connection å¯¹è±¡ã€Statement å¯¹è±¡ æ‰§è¡Œ SQL è¯­å¥ ä½¿ç”¨ ResultSet å¯¹è±¡è¿”å›ç»“æœ ä¾æ¬¡å…³é—­ ResultSet å¯¹è±¡ã€Statement å¯¹è±¡ã€Connection å¯¹è±¡ åº”ç”¨ç¨‹åºç»“æŸ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152// å®é™…å¼€å‘ä¸­ï¼Œå¯†ç ä¸åº”è¯¥æ˜æ–‡å­˜å‚¨ï¼Œåº”è¿›è¡Œä¸€å®šçš„æ•°æ®è„±æ•å¤„ç†ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¿˜è®°å¯†ç æ—¶ï¼Œåªèƒ½é‡ç½®å¯†ç ï¼Œè€Œä¸èƒ½æŸ¥çœ‹å¯†ç çš„åŸå› public class ProcessAccountData { ClassLoader classLoader = ProcessAccountData.class.getClassLoader(); final String sqlURL = &quot;jdbc:mysql://localhost:3306/free_chat?serverTimezone=GMT&amp;useSSL=false&amp;allowPublicKeyRetrieval=true&quot;; final String user = &quot;root&quot;; final String password = &quot;gjxMySQLPWD&quot;; /** * @apiNote å¯¹æ•°æ®åº“,è¿›è¡Œè¯»å–ï¼Œå†™å…¥åˆ°validUsers * @param validUsers è¦å†™å…¥è´¦å·æ•°æ®çš„HashMap * @throws IOException */ public void readAccountFile(ConcurrentHashMap&lt;String, User&gt; validUsers) { try { Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;); } catch (ClassNotFoundException e) { e.printStackTrace(); return; } try (Connection conn = DriverManager.getConnection(sqlURL, user, password); Statement stmt = conn.createStatement()) { ResultSet rs = stmt.executeQuery(&quot;select * from accounts&quot;); while (rs.next()) { User user = new User(rs.getString(&quot;account&quot;), rs.getString(&quot;pwd&quot;)); validUsers.put(rs.getString(&quot;account&quot;), user); } } catch (SQLException e) { e.printStackTrace(); } } /** * @apiNote å½“è¿›è¡Œæ³¨å†Œæ—¶ï¼Œå°†userIdï¼†pwdå†™å…¥åˆ°æ•°æ®åº“ä¸­ * @param userId ç”¨æˆ·id * @param pwd ç”¨æˆ·å¯†ç  * @throws IOException */ public void writeAccountFile(String userId, String pwd) { String sql = &quot;INSERT INTO accounts (account, pwd) VALUES (?, ?)&quot;; try (Connection conn = DriverManager.getConnection(sqlURL, user, password);) { PreparedStatement pstmt = conn.prepareStatement(sql); pstmt.setString(1, userId); pstmt.setString(2, pwd); pstmt.executeUpdate(); } catch (SQLException e) { e.printStackTrace(); } }} ServletServlet æ˜¯ Java Web æŠ€æœ¯çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼Œå®ƒæ˜¯åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œçš„ Java ç¨‹åºï¼Œç”¨äºå¤„ç†æ¥è‡ª Web å®¢æˆ·ç«¯ï¼ˆå¦‚æµè§ˆå™¨ï¼‰çš„è¯·æ±‚ï¼Œå¹¶ç”ŸæˆåŠ¨æ€çš„ Web å†…å®¹ã€‚Servlet æ˜¯ Java EE è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼Œä½†åœ¨ Java EE 8 ä¹‹åï¼ŒJava EE å·²ç»è½¬äº¤ç»™ Eclipse åŸºé‡‘ä¼šï¼Œå¹¶æ›´åä¸º Jakarta EEã€‚å› æ­¤ï¼Œæœ€æ–°çš„ Servlet è§„èŒƒæ˜¯ Jakarta Servletã€‚ ä»¥ä¸‹æ˜¯å…³äº Servlet çš„ä¸€äº›å…³é”®ç‚¹ï¼š ç”Ÿå‘½å‘¨æœŸï¼šServlet çš„ç”Ÿå‘½å‘¨æœŸä» Web å®¹å™¨åŠ è½½å’Œå®ä¾‹åŒ– Servlet å¼€å§‹ï¼Œç»è¿‡å¤„ç†ä¸€ç³»åˆ—çš„è¯·æ±‚ï¼Œç›´åˆ°æœ€å Web å®¹å™¨å¸è½½ Servletã€‚ä¸»è¦çš„æ–¹æ³•æœ‰ init(), service(), å’Œ destroy()ã€‚ å¤„ç†è¯·æ±‚ï¼šServlet å¯ä»¥å¤„ç†æ¥è‡ªå®¢æˆ·ç«¯çš„ GETã€POST ç­‰ HTTP è¯·æ±‚ï¼Œå¹¶æ ¹æ®è¯·æ±‚ç”Ÿæˆç›¸åº”çš„å“åº”ã€‚è¯·æ±‚å’Œå“åº”éƒ½è¢«å°è£…ä¸º Java å¯¹è±¡ï¼Œåˆ†åˆ«æ˜¯ HttpServletRequest å’Œ HttpServletResponseã€‚ çº¿ç¨‹å®‰å…¨ï¼šå¯¹äºæ¯ä¸ªæ–°çš„è¯·æ±‚ï¼ŒServlet å®¹å™¨ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥å¤„ç†ã€‚å› æ­¤ï¼ŒServlet å¿…é¡»è¢«è®¾è®¡ä¸ºçº¿ç¨‹å®‰å…¨çš„ã€‚ é…ç½®å’Œä¸Šä¸‹æ–‡ï¼šServlet å¯ä»¥é€šè¿‡ ServletConfig å’Œ ServletContext æ¥å£è®¿é—®é…ç½®ä¿¡æ¯å’Œåº”ç”¨ç¨‹åºçº§åˆ«çš„ä¸Šä¸‹æ–‡ã€‚ ä¼šè¯ç®¡ç†ï¼šServlet æä¾›äº† HttpSession æ¥å£æ¥ç®¡ç†ä¸ç‰¹å®šç”¨æˆ·ç›¸å…³çš„ä¼šè¯ã€‚ è¿‡æ»¤å™¨å’Œç›‘å¬å™¨ï¼šServlet API è¿˜æä¾›äº†è¿‡æ»¤å™¨ï¼ˆFilterï¼‰å’Œç›‘å¬å™¨ï¼ˆListenerï¼‰ç­‰ç»„ä»¶ï¼Œå¯ä»¥ç”¨äºæ‹¦æˆªè¯·æ±‚ã€å“åº”ï¼Œæˆ–è€…ç›‘å¬ Servlet çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ç­‰ã€‚ Servlet å·¥ä½œæµç¨‹ MybatisMyBatis æ˜¯ä¸€ä¸ªä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis å…é™¤äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œå‚æ•°çš„æ‰‹åŠ¨è®¾ç½®ä»¥åŠç»“æœé›†çš„æ£€ç´¢ã€‚MyBatis å¯ä»¥ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£è¿›è¡Œé…ç½®ï¼Œå¹¶å°†åŸç”Ÿä¿¡æ¯æ˜ å°„è‡³ Java å¯¹è±¡ã€‚MyBatis é€šå¸¸è¢«è§†ä¸ºä»‹äºå…¨è‡ªåŠ¨ ORM æ¡†æ¶ï¼ˆå¦‚ Hibernateï¼‰å’Œæ‰‹åŠ¨å¤„ç†æ‰€æœ‰äº‹æƒ…çš„ JDBC ä¹‹é—´çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚ Mybatis ä¼˜ç‚¹ï¼š æ”¯æŒè‡ªå®šä¹‰ SQLã€å­˜å‚¨è¿‡ç¨‹ã€åŠé«˜çº§æ˜ å°„ å®ç°è‡ªåŠ¨å¯¹ SQL çš„å‚æ•°è®¾ç½® å®ç°è‡ªåŠ¨å¯¹ç»“æœé›†è¿›è¡Œè§£æå’Œå°è£… é€šè¿‡ XML æˆ–è€…æ³¨è§£è¿›è¡Œé…ç½®å’Œæ˜ å°„ï¼Œå¤§å¤§å‡å°‘ä»£ç é‡ æ•°æ®æºçš„è¿æ¥ä¿¡æ¯é€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½® JSPJSP å…¨åä¸º Java Server Pagesï¼Œjava æœåŠ¡å™¨é¡µé¢ã€‚JSP æ˜¯ä¸€ç§åŸºäºæ–‡æœ¬çš„ç¨‹åºï¼Œå…¶ç‰¹ç‚¹å°±æ˜¯ HTML å’Œ Java ä»£ç å…±åŒå­˜åœ¨jsp åªæ˜¯ servlet çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ï¼Œæ¯ä¸€ä¸ª jsp é¡µé¢å°±æ˜¯ä¸€ä¸ª servlet å®ä¾‹ï¼Œé€šä¿—ä¸€ç‚¹çš„è¯æ¥è¯´ï¼šjsp å°±æ˜¯ servletï¼Œåªä¸è¿‡ servlet æŠŠä¸€äº›ä¸šåŠ¡åŠŸèƒ½å‰¥ç¦»å¼€æ¥äº¤ç»™äº†æˆ–è€…æ˜¯å½¢æˆäº† jspã€‚åœ¨æˆ‘ä»¬çš„é¡¹ç›®ç¼–è¯‘çš„æ—¶å€™å°±æ˜¯æŠŠ jsp ç¼–è¯‘æˆäº† servletã€‚JSP æ¯” Servlet æ›´æ–¹ä¾¿æ›´ç®€å•çš„ä¸€ä¸ªé‡è¦åŸå› å°±æ˜¯ï¼šå†…ç½®äº† 9 ä¸ªå¯¹è±¡ï¼å†…ç½®å¯¹è±¡æœ‰ï¼šoutã€sessionã€responseã€requestã€configã€pageã€applicationã€pageContextã€exception SSM å…¸å‹ Java web å¼€å‘æ¶æ„ JSP/HTML é¡µé¢å‘é€è¯·æ±‚ Controller å±‚æ¥æ”¶ç”¨æˆ·è¯·æ±‚ï¼Œè¿›è¡Œå“åº”çš„æµç¨‹å¤„ç† Service å±‚å®Œæˆå…·ä½“çš„ä¸šåŠ¡é€»è¾‘ DAO(Data Access Object)å±‚å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œ æ•°æ®åº“ æ•°æ®åº“å­˜å‚¨è¿‡ç¨‹å­˜å‚¨è¿‡ç¨‹ï¼ˆStored Procedureï¼‰æ˜¯ä¸€ç§æ•°æ®åº“çš„å¯¹è±¡ã€‚ç”±ä¸€ç»„èƒ½å®Œæˆç‰¹å®šåŠŸèƒ½çš„ SQL è¯­å¥é›†æ„æˆï¼Œæ˜¯æŠŠç»å¸¸ä¼šè¢«é‡å¤ä½¿ç”¨çš„ SQL è¯­å¥é€»è¾‘å—å°è£…èµ·æ¥ï¼Œç»ç¼–è¯‘åï¼Œå­˜å‚¨åœ¨æ•°æ®åº“æœåŠ¡å™¨ç«¯ï¼›å½“è¢«å†æ¬¡è°ƒç”¨æ—¶ï¼Œä¸éœ€è¦å†æ¬¡ç¼–è¯‘ï¼› å½“å®¢æˆ·ç«¯è¿æ¥åˆ°æ•°æ®åº“æ—¶ï¼Œç”¨æˆ·é€šè¿‡æŒ‡å®šå­˜å‚¨è¿‡ç¨‹çš„åå­—å¹¶ç»™å‡ºå‚æ•°ï¼Œæ•°æ®åº“å°±å¯ä»¥æ‰¾åˆ°ç›¸åº”çš„å­˜å‚¨è¿‡ç¨‹äºˆä»¥è°ƒç”¨ã€‚ PostgreSQL ä½¿ç”¨ CREATE FUNCTION å‘½ä»¤åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ã€‚(11 ç‰ˆæœ¬åå¯ä»¥ç”¨ CREATE PRECEDURE) Pros(1) å‡å°‘ç½‘ç»œé€šä¿¡é‡(2) æ‰§è¡Œé€Ÿåº¦æ›´å¿«(3) æ›´å¼ºçš„é€‚åº”æ€§(4) é™ä½äº†ä¸šåŠ¡å®ç°ä¸åº”ç”¨ç¨‹åºçš„è€¦åˆ(5) é™ä½äº†å¼€å‘çš„å¤æ‚æ€§(6) ä¿æŠ¤æ•°æ®åº“å…ƒä¿¡æ¯(7) å¢å¼ºäº†æ•°æ®åº“çš„å®‰å…¨æ€§Cons(1) SQL æœ¬èº«æ˜¯ä¸€ç§ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼Œè€Œå­˜å‚¨è¿‡ç¨‹æœ¬è´¨ä¸Šæ˜¯è¿‡ç¨‹åŒ–çš„ç¨‹åºï¼›é¢å¯¹å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œè¿‡ç¨‹åŒ–å¤„ç†é€»è¾‘ç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼›è€Œ SQL è¯­è¨€çš„ä¼˜åŠ¿æ˜¯é¢å‘æ•°æ®æŸ¥è¯¢è€Œéä¸šåŠ¡é€»è¾‘çš„å¤„ç†ã€‚(2) å¦‚æœå­˜å‚¨è¿‡ç¨‹çš„å‚æ•°æˆ–è¿”å›æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œä¸€èˆ¬éœ€è¦ä¿®æ”¹å­˜å‚¨è¿‡ç¨‹çš„ä»£ç ï¼ŒåŒæ—¶è¿˜éœ€è¦æ›´æ–°ä¸»ç¨‹åºè°ƒç”¨å­˜å‚¨è¿‡ç¨‹çš„ä»£ç ã€‚(3) å¼€å‘è°ƒè¯•å¤æ‚ï¼Œç”±äºç¼ºä¹æ”¯æŒå­˜å‚¨è¿‡ç¨‹çš„é›†æˆå¼€å‘ç¯å¢ƒï¼Œå­˜å‚¨è¿‡ç¨‹çš„å¼€å‘è°ƒè¯•è¦æ¯”ä¸€èˆ¬ç¨‹åºå›°éš¾ã€‚(4) å¯ç§»æ¤æ€§å·® 12345678910111213141516171819202122232425262728293031323334--åˆ›å»ºå­˜å‚¨è¿‡ç¨‹CREATE [ OR REPLACE ] FUNCTION/PROCEDURE name([ [ argmode ] [ argname ] argtype [ { DEFAULT | = } default_expr ] [, ...] ]) [ RETURNS retype | RETURNS TABLE ( column_name column_type [, ...] ) ] AS $$ -- $$ç”¨äºå£°æ˜å­˜å‚¨è¿‡ç¨‹çš„å®é™…ä»£ç çš„å¼€å§‹DECLARE -- å£°æ˜æ®µBEGIN --å‡½æ•°ä½“è¯­å¥END; $$ LANGUAGE lang_name; --$$ è¡¨æ˜ä»£ç çš„ç»“æŸ, LANGUAGEåé¢æŒ‡æ˜æ‰€ç”¨çš„ç¼–ç¨‹è¯­è¨€'''ä¸»è¦å‚æ•°ï¼šï¼ˆ1ï¼‰nameï¼šè¦åˆ›å»ºçš„å­˜å‚¨è¿‡ç¨‹åï¼›ï¼ˆ2ï¼‰OR REPLACE ï¼šè¦†ç›–åŒåçš„å­˜å‚¨è¿‡ç¨‹ï¼›ï¼ˆ3ï¼‰argmodeï¼šå­˜å‚¨è¿‡ç¨‹å‚æ•°çš„æ¨¡å¼å¯ä»¥ä¸ºINã€OUTæˆ–INOUTï¼Œç¼ºçœå€¼æ˜¯INã€‚ï¼ˆ4ï¼‰argnameï¼šå½¢å¼å‚æ•°çš„åå­—ã€‚ï¼ˆ5ï¼‰RETURNSï¼šè¿”å›å€¼ï¼›RETURNS TABLEï¼šè¿”å›äºŒç»´è¡¨'''--åˆ é™¤å­˜å‚¨è¿‡ç¨‹DROP FUNCTION [ IF EXISTS ] name ( [ [ argmode ] [ argname ] argtype [, ...] ] ) [CASCADE | RESTRICT ]'''ä¸»è¦å‚æ•°ï¼šï¼ˆ1ï¼‰IF EXISTSï¼šå¦‚æœæŒ‡å®šçš„å­˜å‚¨è¿‡ç¨‹ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå‘å‡ºæç¤ºä¿¡æ¯ã€‚ï¼ˆ2ï¼‰name ï¼šç°å­˜çš„å­˜å‚¨è¿‡ç¨‹åç§°ã€‚ï¼ˆ3ï¼‰argmodeï¼šå‚æ•°çš„æ¨¡å¼ï¼šIN(ç¼ºçœ), OUT, INOUT, VARIADICã€‚è¯·æ³¨æ„ï¼Œå®é™…å¹¶ä¸æ³¨æ˜OUTå‚æ•°ï¼Œå› ä¸ºåˆ¤æ–­å­˜å‚¨è¿‡ç¨‹çš„èº«ä»½åªéœ€è¦è¾“å…¥å‚æ•°ã€‚ï¼ˆ4ï¼‰argnameï¼šå‚æ•°çš„åå­—ã€‚è¯·æ³¨æ„ï¼Œå®é™…ä¸Šå¹¶ä¸æ³¨æ˜å‚æ•°çš„åå­—ï¼Œå› ä¸ºåˆ¤æ–­å‡½æ•°çš„èº«ä»½åªéœ€è¦è¾“å…¥å‚æ•°çš„æ•°æ®ç±»å‹ã€‚ï¼ˆ5ï¼‰argtypeï¼šå¦‚æœæœ‰çš„è¯ï¼Œæ˜¯å­˜å‚¨è¿‡ç¨‹å‚æ•°çš„ç±»å‹ã€‚ï¼ˆ6ï¼‰CASCADEï¼šçº§è”åˆ é™¤ä¾èµ–äºå­˜å‚¨è¿‡ç¨‹çš„å¯¹è±¡(å¦‚è§¦å‘å™¨)ã€‚ï¼ˆ7ï¼‰RESTRICTï¼šå¦‚æœæœ‰ä»»ä½•ä¾èµ–å¯¹è±¡å­˜åœ¨ï¼Œåˆ™æ‹’ç»åˆ é™¤è¯¥å‡½æ•°ï¼›è¿™ä¸ªæ˜¯ç¼ºçœå€¼ã€‚''' PL\\pgSQL syntax å˜é‡å£°æ˜çš„è¯­æ³•å¦‚ä¸‹ï¼šdeclareå˜é‡å å˜é‡ç±»å‹ï¼›å¦‚æœå£°æ˜å˜é‡ä¸ºè®°å½•ç±»å‹ï¼Œå˜é‡å£°æ˜æ ¼å¼ä¸ºï¼š variable_name RECORD;æ³¨ï¼šRECORD ä¸æ˜¯çœŸæ­£çš„æ•°æ®ç±»å‹ï¼Œåªæ˜¯ä¸€ä¸ªå ä½ç¬¦ã€‚ 123declare count intger; rec RECORD; condition statement 12345678910111213141516171819202122'''IF-THENIF-THEN-ELSEIF-THEN-ELSEIF-ELSE'''IF condition THEN statement;END IF;IF condition THEN statement;ELSE statement;END IF;IF condition1 THEN statement;ELSEIF condition2 THEN statement;ELSE statement;END IF; loop 123456789101112131415161718192021222324252627282930313233LOOP statement;END LOOP [label];LOOP i = i + 1; EXIT WHEN i &gt; 10;END LOOP;LOOP i = i + 1; EXIT WHEN i &gt; 100; CONTINUE WHEN i &lt; 50; j = j + 1;END LOOP;WHILE condition LOOP statement;END LOOPFOR i IN 1..10 LOOP RAISE NOTICE 'i = %', i;END LOOP;create function Out_Record() returns RECORD as $$declare rec RECORD;FOR rec IN SELECT * FROM student LOOP raise notice 'å­¦ç”Ÿæ•°æ®: %,%',rec.studentID,rec.studentName; END LOOP;return rec;end;$$ language plpgsql; return typeåœ¨ SQL å’Œ PL/pgSQL ä¸­ï¼Œå‡½æ•°å¯ä»¥è¿”å›ä»¥ä¸‹å‡ ç§ç±»å‹çš„å€¼ï¼š æ ‡é‡ï¼ˆScalarï¼‰ï¼šè¿™æ˜¯æœ€ç®€å•çš„è¿”å›ç±»å‹ï¼Œå¯ä»¥æ˜¯ä»»ä½•åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¦‚ INTEGERï¼ŒVARCHARï¼ŒBOOLEAN ç­‰ã€‚ 12345CREATE FUNCTION add_one(INTEGER) RETURNS INTEGER AS $$BEGIN RETURN $1 + 1;END;$$ LANGUAGE plpgsql; è®°å½•ï¼ˆRecordï¼‰ï¼šå‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªå®Œæ•´çš„è®°å½•ï¼Œè¿™ä¸ªè®°å½•çš„ç»“æ„é€šå¸¸ä¸ä¸€ä¸ªå·²å­˜åœ¨çš„è¡¨ç›¸åŒã€‚ 12345678910CREATE FUNCTION get_employee(INTEGER) RETURNS employee AS $$BEGIN DECLARE rec employee%ROWTYPE; BEGIN SELECT * INTO rec FROM employee WHERE id = $1; RETURN rec; END;END;$$ LANGUAGE plpgsql; è¡¨ï¼ˆTableï¼‰ï¼šå‡½æ•°è¿˜å¯ä»¥è¿”å›ä¸€ä¸ªè¡¨ï¼Œå³å¤šä¸ªè®°å½•ã€‚è¿™ä¸ªè¡¨å¯ä»¥æœ‰è‡ªå®šä¹‰çš„ç»“æ„ï¼Œä¹Ÿå¯ä»¥ä¸ä¸€ä¸ªå·²å­˜åœ¨çš„è¡¨ç›¸åŒã€‚ 12345CREATE FUNCTION get_employees() RETURNS TABLE(id INTEGER, name VARCHAR) AS $$BEGIN RETURN QUERY SELECT id, name FROM employee;END;$$ LANGUAGE plpgsql; è§¦å‘å™¨ï¼ˆTriggerï¼‰ï¼šåœ¨ PostgreSQL ä¸­ï¼Œè§¦å‘å™¨å‡½æ•°å¿…é¡»å£°æ˜ä¸ºè¿”å› TRIGGERã€‚ 12345678CREATE FUNCTION check_update() RETURNS TRIGGER AS $$BEGIN IF NEW.updated_at &lt; OLD.updated_at THEN RAISE EXCEPTION 'Update timestamp must be newer'; END IF; RETURN NEW;END;$$ LANGUAGE plpgsql; å¤æ‚ç±»å‹ï¼ˆComposite Typesï¼‰ï¼šå‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªè‡ªå®šä¹‰çš„å¤åˆç±»å‹ã€‚ 1234567CREATE TYPE my_type AS (f1 integer, f2 text);CREATE FUNCTION return_compound() RETURNS my_type AS $$BEGIN RETURN ROW(1,'test')::my_type;END;$$ LANGUAGE plpgsql; Voidï¼šå¦‚æœå‡½æ•°ä¸éœ€è¦è¿”å›ä»»ä½•å€¼ï¼Œå¯ä»¥ä½¿ç”¨ VOID ç±»å‹ã€‚ 12345CREATE FUNCTION log_message(text) RETURNS VOID AS $$BEGIN RAISE NOTICE '%', $1;END;$$ LANGUAGE plpgsql; Examples ç»Ÿè®¡å­¦ç”Ÿè¡¨ä¸­æœ‰å¤šå°‘ records 1234567891011CREATE OR REPLACE FUNCTION countRecords ()RETURNS integer AS $$declare count integer;BEGIN SELECT count(*) INTO count FROM STUDENT; -- INTO ç”¨äºå°†æŸ¥è¯¢ç»“æœèµ‹å€¼ç»™å˜é‡ RETURN count;END;$$ LANGUAGE plpgsql;-- æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹SELECT * FROM countRecords(); å¦‚æœ grade å¤§äºç­‰äº 60 åˆ†è§†ä¸ºè¯¥å­¦ç”Ÿå–å¾—ç›¸åº”å­¦åˆ†ï¼Œç¼–å†™ sql ä»£ç ç»Ÿè®¡æ¯ä¸ª å­¦ç”Ÿå–å¾—çš„æ€»å­¦åˆ†ï¼ŒåŒ…å«å­¦å·ã€å§“åã€æ€»å­¦åˆ†ï¼›Courseï¼ˆcourseidï¼Œcoursenameï¼Œcreditï¼‰Gradeï¼ˆgradeidï¼Œstudentidï¼Œcourseidï¼Œgradeï¼‰Studentï¼ˆstudentidï¼Œstudentnameï¼Œsexï¼Œageï¼‰ 12345678910111213141516171819202122232425262728293031CREATE OR REPLACE FUNCTION getcredit0() RETURNS TABLE( vsid CHAR, vsname VARCHAR, vscredit BIGINT )AS $vscredit$BEGIN -- è¿™æ˜¯ä¸»æŸ¥è¯¢ï¼Œå®ƒå°†ä»courseï¼Œgradeå’Œstudentè¡¨ä¸­è·å–ä¿¡æ¯ï¼Œ -- å¹¶è®¡ç®—æ¯ä¸ªå­¦ç”Ÿçš„æ€»å­¦åˆ†ï¼ˆåªåŒ…æ‹¬æˆç»©å¤§äºæˆ–ç­‰äº60çš„è¯¾ç¨‹ï¼‰ã€‚ RETURN QUERY SELECT C.studentid AS &quot;vsid&quot;, C.studentname AS &quot;vsname&quot;, SUM(A.credit) AS &quot;vscredit&quot; FROM COURSE AS A, GRADE AS B, STUDENT AS C WHERE B.studentid = C.studentid AND A.courseid = B.courseid AND B.grade &gt;= 60 GROUP BY C.studentid;END;$vscredit$ LANGUAGE plpgsql;-- è°ƒç”¨å‡½æ•°SELECT getcredit0(); åˆ›å»ºä¸€ä¸ªåä¸º add_data(a, bï¼Œc)çš„å­˜å‚¨è¿‡ç¨‹å®ç° a+b ç›¸åŠ è¿ç®—ï¼Œå¹¶å°†ç»“æœæ”¾å…¥ c 12345CREATE OR REPLACE PROCEDURE add_data(a integer,b integer,inout c integer)AS $$Begin c=a+b;End;$$LANGUAGE plpgsql; æ•°æ®åº“è§¦å‘å™¨è§¦å‘å™¨æ˜¯ä¸€ä¸ªå®šä¹‰åœ¨è¡¨æˆ–è§†å›¾ä¸Šçš„ç‰¹æ®Šç±»å‹çš„å­˜å‚¨è¿‡ç¨‹ï¼ˆä¸ä¼ é€’æ¥å—å‚æ•°ï¼‰ã€ä¸€ä¸ªç‰¹æ®Šçš„äº‹åŠ¡å•ä½ï¼Œç”±æ“ä½œäº‹ä»¶è§¦å‘è‡ªåŠ¨æ‰§è¡Œï¼Œå¯ä»¥å®ç°æ¯”çº¦æŸæ›´å¤æ‚çš„æ•°æ®å®Œæ•´æ€§ï¼Œç”¨äºåŠ å¼ºæ•°æ®å®Œæ•´æ€§çº¦æŸå’Œä¸šåŠ¡è§„åˆ™ è¯­å¥çº§è§¦å‘å™¨åªæ‰§è¡Œä¸€æ¬¡ï¼ˆé»˜è®¤è§¦å‘å™¨ï¼‰ï¼›è¡Œçº§è§¦å‘å™¨æ¯æœ‰æ•°æ®å˜åŒ–ä¸€è¡Œå°±æ‰§è¡Œä¸€æ¬¡ INSTEAD OFè§¦å‘å™¨ï¼šäº‹ä»¶å‘ç”Ÿæ—¶åªæ‰§è¡Œè§¦å‘å™¨ä¸æ‰§è¡ŒåŸæœ¬çš„sqlè¯­å¥ï¼Œä¸€ä¸ªè¡¨æˆ–è§†å›¾åªèƒ½æœ‰ä¸€ä¸ªINSTEAD OFè§¦å‘å™¨ NEWï¼šRECORDç±»å‹ï¼Œå¯¹äºè¡Œçº§è§¦å‘å™¨å…¶å­˜æœ‰INSERTæˆ–UPDATEæ“ä½œäº§ç”Ÿçš„æ–°æ•°æ®è¡Œã€‚å¯¹äºè¯­å¥çº§è§¦å‘å™¨å…¶å€¼ä¸ºNULL OLDï¼šRECORDç±»å‹ï¼Œå¯¹äºè¡Œçº§è§¦å‘å™¨å…¶å­˜æœ‰DELETEæˆ–UPDATEæ“ä½œä¿®æ”¹æˆ–åˆ é™¤çš„æ—§æ•°æ®è¡Œã€‚å¯¹äºè¯­å¥çº§è§¦å‘å™¨å…¶å€¼ä¸ºNULL TG_OP:textç±»å‹ï¼Œå€¼ä¸ºINSERT/UPDATE/DELETEï¼Œè¯´æ˜å¼•å‘è§¦å‘å™¨çš„æ“ä½œ åˆ›å»ºè§¦å‘å™¨æ­¥éª¤ï¼š æ£€æŸ¥æ‰€ä¾é™„çš„è¡¨æˆ–è§†å›¾æ˜¯å¦å­˜åœ¨ åˆ›å»ºè§¦å‘å™¨æ‰§è¡Œçš„è§¦å‘å™¨å‡½æ•°ï¼Œè¿”å›ç±»å‹ä¸ºTRIGGER åˆ›å»ºè§¦å‘å™¨ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546-- åˆ›å»ºè¡¨CREATE TABLE stu_score( sid character(10) NOT NULL, cid character(10) NOT NULL, score numeric(5,1), CONSTRAINT stu_score_pkey PRIMARY KEY (sid, cid))CREATE TABLE audit_score( username character(20) , --ç”¨æˆ·å sid character(10) , cid character(10) , updatetime text , --ä¿®æ”¹çš„æ—¶é—´ oldscore numeric(5,1), --ä¿®æ”¹å‰çš„æˆç»© newscore numeric(5,1) --ä¿®æ”¹åçš„æˆç»©)-- åˆ›å»ºå‡½æ•°CREATE OR REPLACE FUNCTION score_audit RETURNS TRIGGER AS $score_sudits$BEGIN IF (TG_OP = 'DELETE') THEN INSERT INTO audit_score SELECT user,old.sid,old.cid,OLD.score ; RETURN OLD; ELSIF (TG_OP = 'UPDATE') THEN INSERT INTO audit_score SELECT user,old.sid,old.cid,now(),OLD.score,new.score WHERE old.sid=new.sid and old.cid=new.cid; RETURN NEW ELSIF (TG_OP = 'INSERT') THEN INSERT INTO audit_score SELECT user,new.sid,new.cid,now(),null,new.score; RETURN NEW; END IF; RETURN NULL;END;$score_audits$ LANGUAGE plpgsql;-- åˆ›å»ºè§¦å‘å™¨CREATE TRIGGER score_audit_trigerAFTER INSERT OR UPDATE OR DELETE ON stu_scoreFOR EACH ROW EXECUTE PROCEDURE score_audit();-- ä¿®æ”¹è§¦å‘å™¨ALTER TRIGGER score_audit_trigger ON stu_score RENAME TO score_audit_trig;-- åˆ é™¤è§¦å‘å™¨DROP TRIGGER [ IF EXISTS ] name ON table_name [ CASCADE | RESTRICT ]DROP TRIGGER IF EXISTS score_audit_trig ON stu_score CASCADE; æ•°æ®åº“æ¸¸æ ‡æ¸¸æ ‡æ˜¯ä¸€ç§å­˜æ”¾äº†æŸ¥è¯¢æ•°æ®åº“è¡¨è¿”å›çš„æ•°æ®è®°å½•çš„ä¸´æ—¶çš„æ•°æ®åº“å¯¹è±¡ï¼ŒåŒ…å«æŸ¥è¯¢ç»“æœå’ŒæŒ‡é’ˆï¼Œæä¾›äº†å¤„ç†ç»“æœé›†ä¸­æ¯ä¸€æ¡è®°å½•çš„æœºåˆ¶ï¼Œå®ƒæ€»æ˜¯ä¸ä¸€æ¡æŸ¥è¯¢SQLè¯­å¥ç›¸å…³è” 12345678910111213-- å£°æ˜æ¸¸æ ‡curStudent CURSOR FOR SELECT * FROM student;curStudentOne CURSOR (key integer)7y IS SELECT * FROM student WHERE SID = key;-- æ‰“å¼€æ¸¸æ ‡OPEN curVars1 FOR SELECT * FROM student WHERE SID = mykey;OPEN curVars1 FOR EXECUTE 'SELECT * FROM ' || quote_ident($1);OPEN curStudent;OPEN curStudentOne ('20160230302001'); -- ä½¿ç”¨æ¸¸æ ‡æå–å€¼FETCH curVars1 INTO rowvar; --rowvarä¸ºè¡Œå˜é‡FETCH curStudent INTO SID, Sname, sex;-- å…³é—­æ¸¸æ ‡ CLOSE cursorName; RefJava Web Servlet è¯¦è§£ cnblog","link":"/UESTC/DataBase/Ch6-DbPrograming/"},{"title":"Java Web â€”â€” Tomcat","text":"Apache Tomcat ç®€ä»‹Tomcatå¯¹å¤–æ‰®æ¼”çš„è§’è‰²æ˜¯ Web æœåŠ¡å™¨ï¼Œå®ƒæ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå°†è¯·æ±‚è½¬å‘ç»™ Tomcat çš„æ ¸å¿ƒå®¹å™¨è¿›è¡Œå¤„ç†ï¼Œå¤„ç†å®Œåå†å°†å“åº”è¿”å›ç»™å®¢æˆ·ç«¯ã€‚å¯¹å†…éƒ¨ï¼ŒTomcat æ‰®æ¼” Servlet å®¹å™¨çš„è§’è‰²ï¼Œè´Ÿè´£å¤„ç† Servlet è¯·æ±‚ã€‚Servlet æ˜¯ Java Servlet çš„ç®€ç§°ï¼Œæ˜¯ä¸€ç§ç”¨ Java ç¼–å†™çš„æœåŠ¡å™¨ç«¯ç¨‹åºï¼Œä¸»è¦ç”¨äºåˆ›å»ºåŠ¨æ€ç½‘é¡µå†…å®¹å’Œå¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ã€‚ Apache æœ¬ä¹‰æ˜¯ä¸€ä¸ªåŒ—ç¾åŸä½æ°‘éƒ¨è½çš„åå­—ã€‚åœ¨ 19 ä¸–çºªç¾æ´²å°ç¬¬å®‰äººæˆ˜äº‰æœŸé—´çš„å¯¹æŠ—ä¸­ï¼Œç¾å›½é™†å†›å‘ç°é˜¿å¸•å¥‡ååˆ†å‡¶çŒ›å–„æˆ˜ æ­¤å¤„ Apache æŒ‡çš„æ˜¯ Apache Software Foundation (ASF) æ˜¯ä¸€å®¶ç¾å›½éè¥åˆ©æ€§å…¬å¸,æˆç«‹äº 1999 å¹´ ç›®å½•ç»“æ„ bin åŒ…å«å¯åŠ¨å’Œåœæ­¢ Tomcat æœåŠ¡å™¨æ‰€éœ€çš„è„šæœ¬æ–‡ä»¶,.bat for Windows, .sh for Unix/Linux conf Configuration files for the Tomcat server server.xmlï¼šå®šä¹‰ Tomcat æœåŠ¡å™¨çš„å…¨å±€è®¾ç½®ï¼ŒåŒ…æ‹¬ç«¯å£ã€è¿æ¥å™¨ã€å¼•æ“ã€è™šæ‹Ÿä¸»æœºç­‰ã€‚ web.xmlï¼šå®šä¹‰æ‰€æœ‰ Web åº”ç”¨ç¨‹åºçš„é»˜è®¤é…ç½®ï¼Œå¦‚é”™è¯¯é¡µé¢ã€MIME ç±»å‹ç­‰ã€‚ tomcat-users.xmlï¼šåŒ…å« Tomcat ç”¨æˆ·è´¦å·å’Œè§’è‰²å®šä¹‰ï¼Œç”¨äºç®¡ç†è®¿é—®æ§åˆ¶ã€‚ context.xmlï¼šå®šä¹‰æ‰€æœ‰ Web åº”ç”¨çš„å…±äº«é»˜è®¤ä¸Šä¸‹æ–‡é…ç½®ã€‚ lib å­˜æ”¾ Tomcat æœåŠ¡å™¨è¿è¡Œæ‰€éœ€çš„å…±äº«åº“æ–‡ä»¶ï¼ˆJAR åŒ…ï¼‰ã€‚è¿™äº›åº“å¯¹æ‰€æœ‰éƒ¨ç½²åœ¨ Tomcat ä¸Šçš„ Web åº”ç”¨éƒ½å¯ç”¨ã€‚ logs è¿è¡Œæ—¥å¿— webapps é»˜è®¤çš„ Web åº”ç”¨ç¨‹åºéƒ¨ç½²ç›®å½•ã€‚å°† WAR æ–‡ä»¶æˆ–ç›´æ¥å°† Web åº”ç”¨çš„æ–‡ä»¶å¤¹æ”¾ç½®äºæ­¤ç›®å½•ä¸‹ï¼ŒTomcat ä¼šè‡ªåŠ¨éƒ¨ç½²å®ƒä»¬ã€‚ 1.2 æ ¸å¿ƒç»„ä»¶ Catalinaï¼šæ˜¯ Tomcat çš„æ ¸å¿ƒå®¹å™¨ï¼Œè´Ÿè´£å¤„ç† Servlet è¯·æ±‚ã€‚ Connectorï¼šè¿æ¥å™¨ï¼Œè´Ÿè´£æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚å¹¶å°†å…¶è½¬å‘ç»™ Catalina è¿›è¡Œå¤„ç†ï¼Œå¤„ç†å®Œåå†å°†å“åº”è¿”å›å®¢æˆ·ç«¯ã€‚ Engineã€Hostã€Contextï¼šæ„æˆå±‚æ¬¡åŒ–çš„ Web åº”ç”¨éƒ¨ç½²ç»“æ„ï¼Œåˆ†åˆ«ä»£è¡¨æ•´ä¸ªå¼•æ“ã€è™šæ‹Ÿä¸»æœºå’Œå•ä¸ª Web åº”ç”¨ã€‚ Jasperï¼šç”¨äºç¼–è¯‘ JSP é¡µé¢ä¸º Servletã€‚ éƒ¨ç½² Web åº”ç”¨ç›´æ¥éƒ¨ç½²å°† Web åº”ç”¨æ‰“åŒ…æˆ WAR æ–‡ä»¶æˆ–ç›´æ¥æ”¾ç½®åœ¨webappsç›®å½•ä¸‹ï¼ŒTomcat ä¼šè‡ªåŠ¨éƒ¨ç½²ã€‚ é…ç½®æ–‡ä»¶éƒ¨ç½²é€šè¿‡ä¿®æ”¹server.xmlæˆ–åœ¨conf/Catalina/localhostä¸‹åˆ›å»ºå¯¹åº”çš„.xmlæ–‡ä»¶æ¥é…ç½®æ›´å¤æ‚çš„éƒ¨ç½²éœ€æ±‚ã€‚ Tomcat ç®¡ç†ç®¡ç†ç•Œé¢é»˜è®¤æƒ…å†µä¸‹ï¼ŒTomcat æä¾›äº†ç®¡ç†ç•Œé¢ï¼Œå¯é€šè¿‡http://localhost:8080/manager/htmlè®¿é—®ã€‚éœ€è¦åœ¨tomcat-users.xmlä¸­é…ç½®ç®¡ç†å‘˜ç”¨æˆ·ã€‚ å®‰å…¨é…ç½®ç¡®ä¿ç¦ç”¨æˆ–ä¿æŠ¤ç®¡ç†ç•Œé¢ï¼Œä¿®æ”¹é»˜è®¤ç«¯å£ï¼Œå¼ºåŒ–ç”¨æˆ·æƒé™ç®¡ç†ï¼Œå®šæœŸæ›´æ–°ä»¥ä¿®å¤å®‰å…¨æ¼æ´ã€‚ äº”ã€æ€§èƒ½ä¼˜åŒ–ä¸ç›‘æ§JVM è°ƒä¼˜è°ƒæ•´ JVM å‚æ•°ï¼Œå¦‚å †å†…å­˜å¤§å°(-Xms, -Xmx)ï¼Œåƒåœ¾æ”¶é›†ç­–ç•¥ç­‰ï¼Œä»¥æé«˜æ€§èƒ½ã€‚ è¿æ¥å™¨ä¼˜åŒ–è°ƒæ•´è¿æ¥å™¨å‚æ•°ï¼Œå¦‚æœ€å¤§çº¿ç¨‹æ•°(maxThreads)ã€æ¥å—ç¼“å†²åŒºå¤§å°(acceptCount)ç­‰ã€‚ ç›‘æ§å·¥å…·åˆ©ç”¨ Tomcat è‡ªå¸¦çš„ç®¡ç†å·¥å…·ã€JMX æˆ–ç¬¬ä¸‰æ–¹å·¥å…·å¦‚ VisualVMã€JProfiler ç›‘æ§ç³»ç»ŸçŠ¶æ€ã€‚ è¿›é˜¶è¯é¢˜Clustering ä¸ Session å¤åˆ¶ä¸ºäº†å®ç°é«˜å¯ç”¨å’Œè´Ÿè½½å‡è¡¡ï¼ŒTomcat æ”¯æŒé›†ç¾¤é…ç½®ï¼Œé€šè¿‡ Session å¤åˆ¶æˆ–åˆ†å¸ƒå¼ç¼“å­˜å…±äº«ä¼šè¯ä¿¡æ¯ã€‚ SSL é…ç½®ä¸º Web åº”ç”¨å¯ç”¨ HTTPSï¼Œä¿æŠ¤æ•°æ®ä¼ è¾“å®‰å…¨ã€‚éœ€é…ç½® SSL è¯ä¹¦å¹¶è°ƒæ•´è¿æ¥å™¨è®¾ç½®ã€‚ AJP è¿æ¥å™¨ä¸åå‘ä»£ç†ä¸ Apache HTTP Server é›†æˆï¼Œé€šè¿‡ AJP åè®®æé«˜é™æ€èµ„æºå¤„ç†æ•ˆç‡å’Œå®‰å…¨æ€§ã€‚ ç»“è¯­Tomcat ä½œä¸º Java Web å¼€å‘çš„åŸºçŸ³ï¼Œå…¶çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ä½¿å…¶æˆä¸ºå¼€å‘è€…æ‰‹ä¸­çš„åˆ©å™¨ã€‚æ— è®ºæ˜¯åˆå­¦è€…è¿˜æ˜¯èµ„æ·±å·¥ç¨‹å¸ˆï¼Œæ·±å…¥ç†è§£ Tomcat çš„å·¥ä½œåŸç†å’Œæœ€ä½³å®è·µéƒ½å°†å¤§å¤§æå‡å¼€å‘æ•ˆç‡å’Œåº”ç”¨æ€§èƒ½ã€‚éšç€æŠ€æœ¯çš„ä¸æ–­æ¼”è¿›ï¼ŒæŒç»­å­¦ä¹  Tomcat çš„æ–°ç‰¹æ€§å’Œä¼˜åŒ–æŠ€å·§æ˜¯æ¯ä¸ª Java Web å¼€å‘è€…ä¸å¯æˆ–ç¼ºçš„ä»»åŠ¡ã€‚å¸Œæœ›æœ¬æ–‡èƒ½ä¸ºæ‚¨çš„ Tomcat å­¦ä¹ ä¹‹æ—…æä¾›ä¸€ä»½æœ‰ä»·å€¼çš„æŒ‡å—ã€‚ Refwiki-The_Apache_Software_Foundation","link":"/Dev/Java/Web/Tomcat/"}],"tags":[{"name":"ä¸­å›½å¤ä»£è¯—è¯","slug":"ä¸­å›½å¤ä»£è¯—è¯","link":"/tags/%E4%B8%AD%E5%9B%BD%E5%8F%A4%E4%BB%A3%E8%AF%97%E8%AF%8D/"},{"name":"DataBase","slug":"DataBase","link":"/tags/DataBase/"},{"name":"SQL","slug":"SQL","link":"/tags/SQL/"},{"name":"Glossary","slug":"Glossary","link":"/tags/Glossary/"},{"name":"Others","slug":"Others","link":"/tags/Others/"},{"name":"Linux","slug":"Linux","link":"/tags/Linux/"},{"name":"Java","slug":"Java","link":"/tags/Java/"},{"name":"Hashtable","slug":"Hashtable","link":"/tags/Hashtable/"},{"name":"Git","slug":"Git","link":"/tags/Git/"},{"name":"Shortcuts","slug":"Shortcuts","link":"/tags/Shortcuts/"},{"name":"Productivity","slug":"Productivity","link":"/tags/Productivity/"},{"name":"VSCode","slug":"VSCode","link":"/tags/VSCode/"},{"name":"Extensions","slug":"Extensions","link":"/tags/Extensions/"},{"name":"CyberPunk2077","slug":"CyberPunk2077","link":"/tags/CyberPunk2077/"},{"name":"Music","slug":"Music","link":"/tags/Music/"},{"name":"Games","slug":"Games","link":"/tags/Games/"},{"name":"ARM","slug":"ARM","link":"/tags/ARM/"},{"name":"ComputerNetworking","slug":"ComputerNetworking","link":"/tags/ComputerNetworking/"},{"name":"OS","slug":"OS","link":"/tags/OS/"},{"name":"Web","slug":"Web","link":"/tags/Web/"}],"categories":[{"name":"Dev","slug":"Dev","link":"/categories/Dev/"},{"name":"DataBase","slug":"Dev/DataBase","link":"/categories/Dev/DataBase/"},{"name":"FrontEnd","slug":"Dev/FrontEnd","link":"/categories/Dev/FrontEnd/"},{"name":"Linux","slug":"Dev/Linux","link":"/categories/Dev/Linux/"},{"name":"Java","slug":"Dev/Java","link":"/categories/Dev/Java/"},{"name":"Git","slug":"Dev/Git","link":"/categories/Dev/Git/"},{"name":"Others","slug":"Dev/Others","link":"/categories/Dev/Others/"},{"name":"VSCode","slug":"Dev/VSCode","link":"/categories/Dev/VSCode/"},{"name":"Game","slug":"Game","link":"/categories/Game/"},{"name":"Eaasy","slug":"Eaasy","link":"/categories/Eaasy/"},{"name":"UESTC","slug":"UESTC","link":"/categories/UESTC/"},{"name":"Poems","slug":"Eaasy/Poems","link":"/categories/Eaasy/Poems/"},{"name":"ARMå¤„ç†å™¨ä½“ç³»ç»“æ„åŠåº”ç”¨","slug":"UESTC/ARMå¤„ç†å™¨ä½“ç³»ç»“æ„åŠåº”ç”¨","link":"/categories/UESTC/ARM%E5%A4%84%E7%90%86%E5%99%A8%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%8F%8A%E5%BA%94%E7%94%A8/"},{"name":"Computer Networking","slug":"UESTC/Computer-Networking","link":"/categories/UESTC/Computer-Networking/"},{"name":"OS","slug":"UESTC/OS","link":"/categories/UESTC/OS/"},{"name":"æ•°æ®åº“åŸç†åŠåº”ç”¨","slug":"UESTC/æ•°æ®åº“åŸç†åŠåº”ç”¨","link":"/categories/UESTC/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86%E5%8F%8A%E5%BA%94%E7%94%A8/"}],"pages":[{"title":"","text":"h1 { font-family: Consolas; color: #82aaff; text-align: center; font-style: bold; /* font-size: 3em; */ } div.intro-container { background-color:rgba(34, 36, 54, 0.1); border: 1px solid rgba(0, 0, 0, 0.1); /* æ›´æ”¹è¾¹æ¡†é¢œè‰²å’Œé€æ˜åº¦ */ padding: 20px; width: auto; margin-left: 15px; margin-right: 15px; border-radius: 12px; box-shadow: 10px 10px 5px rgba(0, 0, 0, 0.2); } p.intro::first-letter { font-size: 3em; line-height: 0.8; float: left; padding-top: 0.1em; padding-right: 0.1em; font-style: bold; } p.intro:hover::first-letter { color: #86e1fc; font-size: 3em; line-height: 0.8; float: left; padding-top: 0.1em; padding-right: 0.1em; font-style: bold; } p.intro { color: #82aaff; line-height: 1.5; text-align: left; font-family: Consolas; font-style: bold; } .title_card { display: flex; position: relative; box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2); transition: 0.3s; width: auto; height: 100%; border-radius: 10px; overflow: hidden; align-items: center; justify-content: center; margin-left: 15px; margin-right: 15px; } .title_card:hover { box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2); } .title_card_text { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; align-items: center; /* å‚ç›´å±…ä¸­ */ justify-content: center; /* æ°´å¹³å±…ä¸­ */ color: white; /* å°†æ–‡å­—é¢œè‰²è®¾ç½®ä¸ºç™½è‰² */ opacity: 0; transition: opacity 0.3s; font-family: 'Trebuchet MS'; /* å°†å­—ä½“è®¾ç½®ä¸ºArial */ text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); /* æ·»åŠ æ–‡å­—é˜´å½± */ } .title_card:hover .title_card_text { opacity: 0.9; animation: jelly 0.5s; } @keyframes jelly { 0%, 100% { transform: scale(1, 1); } 25% { transform: scale(0.9, 1.1); } 50% { transform: scale(1.1, 0.9); } 75% { transform: scale(0.95, 1.05); } } ABOUT ğŸ³Welcome To My Website! Glad to have you here as we surf the Internet. This website is not just a platform for me to express my thoughts and ideas, but also a place where I hope to connect with people who share similar interests or are simply curious about the world. Just here, I will delve into topics that fascinate me, share stories from my personal experiences, and offer insights that I've gained along the way. Whether it's about my latest adventures, reflections on life, or thoughts on various topics, I hope to provide content that is engaging and thought-provoking. Xplore this site, leave comments, ask questions, share experiences. We can learn from each other, and I'm excited to hear from you.Once again, thank you for visiting. I hope you find something here that resonates with you, inspires you, or simply makes you think. Enjoy exploring! ğŸ”—About This Site ğŸ“Embark on a voyage through my educational explorations ğŸ“–Plunge into the chapters of my bookish journeys ğŸ®Venture into the digital landscapes of my gaming exploits ğŸ¦‹Feast your eyes on the captivating imagery ğŸ’¡Insights from my Tech Learning Journey","link":"/about/index.html"},{"title":"","text":"åŸºç¡€ç¯‡é€šç”¨è¯­æ³•åŠåˆ†ç±» DDL: æ•°æ®å®šä¹‰è¯­è¨€ï¼Œç”¨æ¥å®šä¹‰æ•°æ®åº“å¯¹è±¡ï¼ˆæ•°æ®åº“ã€è¡¨ã€å­—æ®µï¼‰ DML: æ•°æ®æ“ä½œè¯­è¨€ï¼Œç”¨æ¥å¯¹æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢åˆ æ”¹ DQL: æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼Œç”¨æ¥æŸ¥è¯¢æ•°æ®åº“ä¸­è¡¨çš„è®°å½• DCL: æ•°æ®æ§åˆ¶è¯­è¨€ï¼Œç”¨æ¥åˆ›å»ºæ•°æ®åº“ç”¨æˆ·ã€æ§åˆ¶æ•°æ®åº“çš„æ§åˆ¶æƒé™ DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰æ•°æ®å®šä¹‰è¯­è¨€ æ•°æ®åº“æ“ä½œæŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“ï¼šSHOW DATABASES;æŸ¥è¯¢å½“å‰æ•°æ®åº“ï¼šSELECT DATABASE();åˆ›å»ºæ•°æ®åº“ï¼šCREATE DATABASE [ IF NOT EXISTS ] æ•°æ®åº“å [ DEFAULT CHARSET å­—ç¬¦é›†] [COLLATE æ’åºè§„åˆ™ ];åˆ é™¤æ•°æ®åº“ï¼šDROP DATABASE [ IF EXISTS ] æ•°æ®åº“å;ä½¿ç”¨æ•°æ®åº“ï¼šUSE æ•°æ®åº“å; æ³¨æ„äº‹é¡¹ UTF8å­—ç¬¦é›†é•¿åº¦ä¸º3å­—èŠ‚ï¼Œæœ‰äº›ç¬¦å·å 4å­—èŠ‚ï¼Œæ‰€ä»¥æ¨èç”¨utf8mb4å­—ç¬¦é›† è¡¨æ“ä½œæŸ¥è¯¢å½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨ï¼šSHOW TABLES;æŸ¥è¯¢è¡¨ç»“æ„ï¼šDESC è¡¨å;æŸ¥è¯¢æŒ‡å®šè¡¨çš„å»ºè¡¨è¯­å¥ï¼šSHOW CREATE TABLE è¡¨å; åˆ›å»ºè¡¨ï¼š 1234567CREATE TABLE è¡¨å( å­—æ®µ1 å­—æ®µ1ç±»å‹ [COMMENT å­—æ®µ1æ³¨é‡Š], å­—æ®µ2 å­—æ®µ2ç±»å‹ [COMMENT å­—æ®µ2æ³¨é‡Š], å­—æ®µ3 å­—æ®µ3ç±»å‹ [COMMENT å­—æ®µ3æ³¨é‡Š], ... å­—æ®µn å­—æ®µnç±»å‹ [COMMENT å­—æ®µnæ³¨é‡Š])[ COMMENT è¡¨æ³¨é‡Š ]; æœ€åä¸€ä¸ªå­—æ®µåé¢æ²¡æœ‰é€—å· æ·»åŠ å­—æ®µï¼šALTER TABLE è¡¨å ADD å­—æ®µå ç±»å‹(é•¿åº¦) [COMMENT æ³¨é‡Š] [çº¦æŸ];ä¾‹ï¼šALTER TABLE emp ADD nickname varchar(20) COMMENT 'æ˜µç§°'; ä¿®æ”¹æ•°æ®ç±»å‹ï¼šALTER TABLE è¡¨å MODIFY å­—æ®µå æ–°æ•°æ®ç±»å‹(é•¿åº¦);ä¿®æ”¹å­—æ®µåå’Œå­—æ®µç±»å‹ï¼šALTER TABLE è¡¨å CHANGE æ—§å­—æ®µå æ–°å­—æ®µå ç±»å‹(é•¿åº¦) [COMMENT æ³¨é‡Š] [çº¦æŸ];ä¾‹ï¼šå°†empè¡¨çš„nicknameå­—æ®µä¿®æ”¹ä¸ºusernameï¼Œç±»å‹ä¸ºvarchar(30)ALTER TABLE emp CHANGE nickname username varchar(30) COMMENT 'æ˜µç§°'; åˆ é™¤å­—æ®µï¼šALTER TABLE è¡¨å DROP å­—æ®µå; ä¿®æ”¹è¡¨åï¼šALTER TABLE è¡¨å RENAME TO æ–°è¡¨å åˆ é™¤è¡¨ï¼šDROP TABLE [IF EXISTS] è¡¨å;åˆ é™¤è¡¨ï¼Œå¹¶é‡æ–°åˆ›å»ºè¯¥è¡¨ï¼šTRUNCATE TABLE è¡¨å; DMLï¼ˆæ•°æ®æ“ä½œè¯­è¨€ï¼‰æ·»åŠ æ•°æ®æŒ‡å®šå­—æ®µï¼šINSERT INTO è¡¨å (å­—æ®µå1, å­—æ®µå2, ...) VALUES (å€¼1, å€¼2, ...);å…¨éƒ¨å­—æ®µï¼šINSERT INTO è¡¨å VALUES (å€¼1, å€¼2, ...); æ‰¹é‡æ·»åŠ æ•°æ®ï¼šINSERT INTO è¡¨å (å­—æ®µå1, å­—æ®µå2, ...) VALUES (å€¼1, å€¼2, ...), (å€¼1, å€¼2, ...), (å€¼1, å€¼2, ...);INSERT INTO è¡¨å VALUES (å€¼1, å€¼2, ...), (å€¼1, å€¼2, ...), (å€¼1, å€¼2, ...); æ³¨æ„äº‹é¡¹ å­—ç¬¦ä¸²å’Œæ—¥æœŸç±»å‹æ•°æ®åº”è¯¥åŒ…å«åœ¨å¼•å·ä¸­ æ’å…¥çš„æ•°æ®å¤§å°åº”è¯¥åœ¨å­—æ®µçš„è§„å®šèŒƒå›´å†… æ›´æ–°å’Œåˆ é™¤æ•°æ®ä¿®æ”¹æ•°æ®ï¼šUPDATE è¡¨å SET å­—æ®µå1 = å€¼1, å­—æ®µå2 = å€¼2, ... [ WHERE æ¡ä»¶ ];ä¾‹ï¼šUPDATE emp SET name = 'Jack' WHERE id = 1; åˆ é™¤æ•°æ®ï¼šDELETE FROM è¡¨å [ WHERE æ¡ä»¶ ]; DQLï¼ˆæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼‰è¯­æ³•ï¼š 1234567891011121314SELECT å­—æ®µåˆ—è¡¨FROM è¡¨åå­—æ®µWHERE æ¡ä»¶åˆ—è¡¨GROUP BY åˆ†ç»„å­—æ®µåˆ—è¡¨HAVING åˆ†ç»„åçš„æ¡ä»¶åˆ—è¡¨ORDER BY æ’åºå­—æ®µåˆ—è¡¨LIMIT åˆ†é¡µå‚æ•° åŸºç¡€æŸ¥è¯¢æŸ¥è¯¢å¤šä¸ªå­—æ®µï¼šSELECT å­—æ®µ1, å­—æ®µ2, å­—æ®µ3, ... FROM è¡¨å;SELECT * FROM è¡¨å; è®¾ç½®åˆ«åï¼šSELECT å­—æ®µ1 [ AS åˆ«å1 ], å­—æ®µ2 [ AS åˆ«å2 ], å­—æ®µ3 [ AS åˆ«å3 ], ... FROM è¡¨å;SELECT å­—æ®µ1 [ åˆ«å1 ], å­—æ®µ2 [ åˆ«å2 ], å­—æ®µ3 [ åˆ«å3 ], ... FROM è¡¨å; å»é™¤é‡å¤è®°å½•ï¼šSELECT DISTINCT å­—æ®µåˆ—è¡¨ FROM è¡¨å; è½¬ä¹‰ï¼šSELECT * FROM è¡¨å WHERE name LIKE '/_å¼ ä¸‰' ESCAPE '/'/ ä¹‹åçš„_ä¸ä½œä¸ºé€šé…ç¬¦ æ¡ä»¶æŸ¥è¯¢è¯­æ³•ï¼šSELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å WHERE æ¡ä»¶åˆ—è¡¨; æ¡ä»¶ï¼š æ¯”è¾ƒè¿ç®—ç¬¦ åŠŸèƒ½ &gt; å¤§äº &gt;= å¤§äºç­‰äº &lt; å°äº &lt;= å°äºç­‰äº = ç­‰äº &lt;&gt; æˆ– != ä¸ç­‰äº BETWEEN â€¦ AND â€¦ åœ¨æŸä¸ªèŒƒå›´å†…ï¼ˆå«æœ€å°ã€æœ€å¤§å€¼ï¼‰ IN(â€¦) åœ¨inä¹‹åçš„åˆ—è¡¨ä¸­çš„å€¼ï¼Œå¤šé€‰ä¸€ LIKE å ä½ç¬¦ æ¨¡ç³ŠåŒ¹é…ï¼ˆ_åŒ¹é…å•ä¸ªå­—ç¬¦ï¼Œ%åŒ¹é…ä»»æ„ä¸ªå­—ç¬¦ï¼‰ IS NULL æ˜¯NULL é€»è¾‘è¿ç®—ç¬¦ åŠŸèƒ½ AND æˆ– &amp;&amp; å¹¶ä¸”ï¼ˆå¤šä¸ªæ¡ä»¶åŒæ—¶æˆç«‹ï¼‰ OR æˆ– || æˆ–è€…ï¼ˆå¤šä¸ªæ¡ä»¶ä»»æ„ä¸€ä¸ªæˆç«‹ï¼‰ NOT æˆ– ! éï¼Œä¸æ˜¯ ä¾‹å­ï¼š 123456789101112131415161718192021222324252627-- å¹´é¾„ç­‰äº30select * from employee where age = 30;-- å¹´é¾„å°äº30select * from employee where age &lt; 30;-- å°äºç­‰äºselect * from employee where age &lt;= 30;-- æ²¡æœ‰èº«ä»½è¯select * from employee where idcard is null or idcard = '';-- æœ‰èº«ä»½è¯select * from employee where idcard;select * from employee where idcard is not null;-- ä¸ç­‰äºselect * from employee where age != 30;-- å¹´é¾„åœ¨20åˆ°30ä¹‹é—´select * from employee where age between 20 and 30;select * from employee where age &gt;= 20 and age &lt;= 30;-- ä¸‹é¢è¯­å¥ä¸æŠ¥é”™ï¼Œä½†æŸ¥ä¸åˆ°ä»»ä½•ä¿¡æ¯select * from employee where age between 30 and 20;-- æ€§åˆ«ä¸ºå¥³ä¸”å¹´é¾„å°äº30select * from employee where age &lt; 30 and gender = 'å¥³';-- å¹´é¾„ç­‰äº25æˆ–30æˆ–35select * from employee where age = 25 or age = 30 or age = 35;select * from employee where age in (25, 30, 35);-- å§“åä¸ºä¸¤ä¸ªå­—select * from employee where name like '__';-- èº«ä»½è¯æœ€åä¸ºXselect * from employee where idcard like '%X'; èšåˆæŸ¥è¯¢ï¼ˆèšåˆå‡½æ•°ï¼‰å¸¸è§èšåˆå‡½æ•°ï¼š å‡½æ•° åŠŸèƒ½ count ç»Ÿè®¡æ•°é‡ max æœ€å¤§å€¼ min æœ€å°å€¼ avg å¹³å‡å€¼ sum æ±‚å’Œ è¯­æ³•ï¼šSELECT èšåˆå‡½æ•°(å­—æ®µåˆ—è¡¨) FROM è¡¨å;ä¾‹ï¼šSELECT count(id) from employee where workaddress = &quot;å¹¿ä¸œçœ&quot;; åˆ†ç»„æŸ¥è¯¢è¯­æ³•ï¼šSELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å [ WHERE æ¡ä»¶ ] GROUP BY åˆ†ç»„å­—æ®µå [ HAVING åˆ†ç»„åçš„è¿‡æ»¤æ¡ä»¶ ]; where å’Œ having çš„åŒºåˆ«ï¼š æ‰§è¡Œæ—¶æœºä¸åŒï¼šwhereæ˜¯åˆ†ç»„ä¹‹å‰è¿›è¡Œè¿‡æ»¤ï¼Œä¸æ»¡è¶³whereæ¡ä»¶ä¸å‚ä¸åˆ†ç»„ï¼›havingæ˜¯åˆ†ç»„åå¯¹ç»“æœè¿›è¡Œè¿‡æ»¤ã€‚ åˆ¤æ–­æ¡ä»¶ä¸åŒï¼šwhereä¸èƒ½å¯¹èšåˆå‡½æ•°è¿›è¡Œåˆ¤æ–­ï¼Œè€Œhavingå¯ä»¥ã€‚ ä¾‹å­ï¼š 12345678910-- æ ¹æ®æ€§åˆ«åˆ†ç»„ï¼Œç»Ÿè®¡ç”·æ€§å’Œå¥³æ€§æ•°é‡ï¼ˆåªæ˜¾ç¤ºåˆ†ç»„æ•°é‡ï¼Œä¸æ˜¾ç¤ºå“ªä¸ªæ˜¯ç”·å“ªä¸ªæ˜¯å¥³ï¼‰select count(*) from employee group by gender;-- æ ¹æ®æ€§åˆ«åˆ†ç»„ï¼Œç»Ÿè®¡ç”·æ€§å’Œå¥³æ€§æ•°é‡select gender, count(*) from employee group by gender;-- æ ¹æ®æ€§åˆ«åˆ†ç»„ï¼Œç»Ÿè®¡ç”·æ€§å’Œå¥³æ€§çš„å¹³å‡å¹´é¾„select gender, avg(age) from employee group by gender;-- å¹´é¾„å°äº45ï¼Œå¹¶æ ¹æ®å·¥ä½œåœ°å€åˆ†ç»„select workaddress, count(*) from employee where age &lt; 45 group by workaddress;-- å¹´é¾„å°äº45ï¼Œå¹¶æ ¹æ®å·¥ä½œåœ°å€åˆ†ç»„ï¼Œè·å–å‘˜å·¥æ•°é‡å¤§äºç­‰äº3çš„å·¥ä½œåœ°å€select workaddress, count(*) address_count from employee where age &lt; 45 group by workaddress having address_count &gt;= 3; æ³¨æ„äº‹é¡¹ æ‰§è¡Œé¡ºåºï¼šwhere &gt; èšåˆå‡½æ•° &gt; having åˆ†ç»„ä¹‹åï¼ŒæŸ¥è¯¢çš„å­—æ®µä¸€èˆ¬ä¸ºèšåˆå‡½æ•°å’Œåˆ†ç»„å­—æ®µï¼ŒæŸ¥è¯¢å…¶ä»–å­—æ®µæ— ä»»ä½•æ„ä¹‰ æ’åºæŸ¥è¯¢è¯­æ³•ï¼šSELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å ORDER BY å­—æ®µ1 æ’åºæ–¹å¼1, å­—æ®µ2 æ’åºæ–¹å¼2; æ’åºæ–¹å¼ï¼š ASC: å‡åºï¼ˆé»˜è®¤ï¼‰ DESC: é™åº ä¾‹å­ï¼š 12345-- æ ¹æ®å¹´é¾„å‡åºæ’åºSELECT * FROM employee ORDER BY age ASC;SELECT * FROM employee ORDER BY age;-- ä¸¤å­—æ®µæ’åºï¼Œæ ¹æ®å¹´é¾„å‡åºæ’åºï¼Œå…¥èŒæ—¶é—´é™åºæ’åºSELECT * FROM employee ORDER BY age ASC, entrydate DESC; æ³¨æ„äº‹é¡¹å¦‚æœæ˜¯å¤šå­—æ®µæ’åºï¼Œå½“ç¬¬ä¸€ä¸ªå­—æ®µå€¼ç›¸åŒæ—¶ï¼Œæ‰ä¼šæ ¹æ®ç¬¬äºŒä¸ªå­—æ®µè¿›è¡Œæ’åº åˆ†é¡µæŸ¥è¯¢è¯­æ³•ï¼šSELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å LIMIT èµ·å§‹ç´¢å¼•, æŸ¥è¯¢è®°å½•æ•°; ä¾‹å­ï¼š 1234-- æŸ¥è¯¢ç¬¬ä¸€é¡µæ•°æ®ï¼Œå±•ç¤º10æ¡SELECT * FROM employee LIMIT 0, 10;-- æŸ¥è¯¢ç¬¬äºŒé¡µSELECT * FROM employee LIMIT 10, 10; æ³¨æ„äº‹é¡¹ èµ·å§‹ç´¢å¼•ä»0å¼€å§‹ï¼Œèµ·å§‹ç´¢å¼• = ï¼ˆæŸ¥è¯¢é¡µç  - 1ï¼‰ * æ¯é¡µæ˜¾ç¤ºè®°å½•æ•° åˆ†é¡µæŸ¥è¯¢æ˜¯æ•°æ®åº“çš„æ–¹è¨€ï¼Œä¸åŒæ•°æ®åº“æœ‰ä¸åŒå®ç°ï¼ŒMySQLæ˜¯LIMIT å¦‚æœæŸ¥è¯¢çš„æ˜¯ç¬¬ä¸€é¡µæ•°æ®ï¼Œèµ·å§‹ç´¢å¼•å¯ä»¥çœç•¥ï¼Œç›´æ¥ç®€å†™ LIMIT 10 DQLæ‰§è¡Œé¡ºåºFROM -&gt; WHERE -&gt; GROUP BY -&gt; SELECT -&gt; ORDER BY -&gt; LIMIT DCLç®¡ç†ç”¨æˆ·æŸ¥è¯¢ç”¨æˆ·ï¼š 12USE mysql;SELECT * FROM user; åˆ›å»ºç”¨æˆ·:CREATE USER 'ç”¨æˆ·å'@'ä¸»æœºå' IDENTIFIED BY 'å¯†ç '; ä¿®æ”¹ç”¨æˆ·å¯†ç ï¼šALTER USER 'ç”¨æˆ·å'@'ä¸»æœºå' IDENTIFIED WITH mysql_native_password BY 'æ–°å¯†ç '; åˆ é™¤ç”¨æˆ·ï¼šDROP USER 'ç”¨æˆ·å'@'ä¸»æœºå'; ä¾‹å­ï¼š 123456789-- åˆ›å»ºç”¨æˆ·testï¼Œåªèƒ½åœ¨å½“å‰ä¸»æœºlocalhostè®¿é—®create user 'test'@'localhost' identified by '123456';-- åˆ›å»ºç”¨æˆ·testï¼Œèƒ½åœ¨ä»»æ„ä¸»æœºè®¿é—®create user 'test'@'%' identified by '123456';create user 'test' identified by '123456';-- ä¿®æ”¹å¯†ç alter user 'test'@'localhost' identified with mysql_native_password by '1234';-- åˆ é™¤ç”¨æˆ·drop user 'test'@'localhost'; æ³¨æ„äº‹é¡¹ ä¸»æœºåå¯ä»¥ä½¿ç”¨ % é€šé… æƒé™æ§åˆ¶å¸¸ç”¨æƒé™ï¼š æƒé™ è¯´æ˜ ALL, ALL PRIVILEGES æ‰€æœ‰æƒé™ SELECT æŸ¥è¯¢æ•°æ® INSERT æ’å…¥æ•°æ® UPDATE ä¿®æ”¹æ•°æ® DELETE åˆ é™¤æ•°æ® ALTER ä¿®æ”¹è¡¨ DROP åˆ é™¤æ•°æ®åº“/è¡¨/è§†å›¾ CREATE åˆ›å»ºæ•°æ®åº“/è¡¨ æ›´å¤šæƒé™è¯·çœ‹æƒé™ä¸€è§ˆè¡¨ æŸ¥è¯¢æƒé™ï¼šSHOW GRANTS FOR 'ç”¨æˆ·å'@'ä¸»æœºå'; æˆäºˆæƒé™ï¼šGRANT æƒé™åˆ—è¡¨ ON æ•°æ®åº“å.è¡¨å TO 'ç”¨æˆ·å'@'ä¸»æœºå'; æ’¤é”€æƒé™ï¼šREVOKE æƒé™åˆ—è¡¨ ON æ•°æ®åº“å.è¡¨å FROM 'ç”¨æˆ·å'@'ä¸»æœºå'; æ³¨æ„äº‹é¡¹ å¤šä¸ªæƒé™ç”¨é€—å·åˆ†éš” æˆæƒæ—¶ï¼Œæ•°æ®åº“åå’Œè¡¨åå¯ä»¥ç”¨ * è¿›è¡Œé€šé…ï¼Œä»£è¡¨æ‰€æœ‰ å‡½æ•° å­—ç¬¦ä¸²å‡½æ•° æ•°å€¼å‡½æ•° æ—¥æœŸå‡½æ•° æµç¨‹å‡½æ•° å­—ç¬¦ä¸²å‡½æ•°å¸¸ç”¨å‡½æ•°ï¼š å‡½æ•° åŠŸèƒ½ CONCAT(s1, s2, â€¦, sn) å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå°†s1, s2, â€¦, snæ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸² LOWER(str) å°†å­—ç¬¦ä¸²å…¨éƒ¨è½¬ä¸ºå°å†™ UPPER(str) å°†å­—ç¬¦ä¸²å…¨éƒ¨è½¬ä¸ºå¤§å†™ LPAD(str, n, pad) å·¦å¡«å……ï¼Œç”¨å­—ç¬¦ä¸²padå¯¹strçš„å·¦è¾¹è¿›è¡Œå¡«å……ï¼Œè¾¾åˆ°nä¸ªå­—ç¬¦ä¸²é•¿åº¦ RPAD(str, n, pad) å³å¡«å……ï¼Œç”¨å­—ç¬¦ä¸²padå¯¹strçš„å³è¾¹è¿›è¡Œå¡«å……ï¼Œè¾¾åˆ°nä¸ªå­—ç¬¦ä¸²é•¿åº¦ TRIM(str) å»æ‰å­—ç¬¦ä¸²å¤´éƒ¨å’Œå°¾éƒ¨çš„ç©ºæ ¼ SUBSTRING(str, start, len) è¿”å›ä»å­—ç¬¦ä¸²strä»startä½ç½®èµ·çš„lenä¸ªé•¿åº¦çš„å­—ç¬¦ä¸² REPLACE(column, source, replace) æ›¿æ¢å­—ç¬¦ä¸² ä½¿ç”¨ç¤ºä¾‹ï¼š 1234567891011121314-- æ‹¼æ¥SELECT CONCAT('Hello', 'World');-- å°å†™SELECT LOWER('Hello');-- å¤§å†™SELECT UPPER('Hello');-- å·¦å¡«å……SELECT LPAD('01', 5, '-');-- å³å¡«å……SELECT RPAD('01', 5, '-');-- å»é™¤ç©ºæ ¼SELECT TRIM(' Hello World ');-- åˆ‡ç‰‡ï¼ˆèµ·å§‹ç´¢å¼•ä¸º1ï¼‰SELECT SUBSTRING('Hello World', 1, 5); æ•°å€¼å‡½æ•°å¸¸è§å‡½æ•°ï¼š å‡½æ•° åŠŸèƒ½ CEIL(x) å‘ä¸Šå–æ•´ FLOOR(x) å‘ä¸‹å–æ•´ MOD(x, y) è¿”å›x/yçš„æ¨¡ RAND() è¿”å›0~1å†…çš„éšæœºæ•° ROUND(x, y) æ±‚å‚æ•°xçš„å››èˆäº”å…¥å€¼ï¼Œä¿ç•™yä½å°æ•° æ—¥æœŸå‡½æ•°å¸¸ç”¨å‡½æ•°ï¼š å‡½æ•° åŠŸèƒ½ CURDATE() è¿”å›å½“å‰æ—¥æœŸ CURTIME() è¿”å›å½“å‰æ—¶é—´ NOW() è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´ YEAR(date) è·å–æŒ‡å®šdateçš„å¹´ä»½ MONTH(date) è·å–æŒ‡å®šdateçš„æœˆä»½ DAY(date) è·å–æŒ‡å®šdateçš„æ—¥æœŸ DATE_ADD(date, INTERVAL expr type) è¿”å›ä¸€ä¸ªæ—¥æœŸ/æ—¶é—´å€¼åŠ ä¸Šä¸€ä¸ªæ—¶é—´é—´éš”expråçš„æ—¶é—´å€¼ DATEDIFF(date1, date2) è¿”å›èµ·å§‹æ—¶é—´date1å’Œç»“æŸæ—¶é—´date2ä¹‹é—´çš„å¤©æ•° ä¾‹å­ï¼š 12-- DATE_ADDSELECT DATE_ADD(NOW(), INTERVAL 70 YEAR); æµç¨‹å‡½æ•°å¸¸ç”¨å‡½æ•°ï¼š å‡½æ•° åŠŸèƒ½ IF(value, t, f) å¦‚æœvalueä¸ºtrueï¼Œåˆ™è¿”å›tï¼Œå¦åˆ™è¿”å›f IFNULL(value1, value2) å¦‚æœvalue1ä¸ä¸ºç©ºï¼Œè¿”å›value1ï¼Œå¦åˆ™è¿”å›value2 CASE WHEN [ val1 ] THEN [ res1 ] â€¦ ELSE [ default ] END å¦‚æœval1ä¸ºtrueï¼Œè¿”å›res1ï¼Œâ€¦ å¦åˆ™è¿”å›defaulté»˜è®¤å€¼ CASE [ expr ] WHEN [ val1 ] THEN [ res1 ] â€¦ ELSE [ default ] END å¦‚æœexprçš„å€¼ç­‰äºval1ï¼Œè¿”å›res1ï¼Œâ€¦ å¦åˆ™è¿”å›defaulté»˜è®¤å€¼ ä¾‹å­ï¼š 12345678select name, (case when age &gt; 30 then 'ä¸­å¹´' else 'é’å¹´' end)from employee;select name, (case workaddress when 'åŒ—äº¬å¸‚' then 'ä¸€çº¿åŸå¸‚' when 'ä¸Šæµ·å¸‚' then 'ä¸€çº¿åŸå¸‚' else 'äºŒçº¿åŸå¸‚' end) as 'å·¥ä½œåœ°å€'from employee; çº¦æŸåˆ†ç±»ï¼š çº¦æŸ æè¿° å…³é”®å­— éç©ºçº¦æŸ é™åˆ¶è¯¥å­—æ®µçš„æ•°æ®ä¸èƒ½ä¸ºnull NOT NULL å”¯ä¸€çº¦æŸ ä¿è¯è¯¥å­—æ®µçš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯å”¯ä¸€ã€ä¸é‡å¤çš„ UNIQUE ä¸»é”®çº¦æŸ ä¸»é”®æ˜¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ ‡è¯†ï¼Œè¦æ±‚éç©ºä¸”å”¯ä¸€ PRIMARY KEY é»˜è®¤çº¦æŸ ä¿å­˜æ•°æ®æ—¶ï¼Œå¦‚æœæœªæŒ‡å®šè¯¥å­—æ®µçš„å€¼ï¼Œåˆ™é‡‡ç”¨é»˜è®¤å€¼ DEFAULT æ£€æŸ¥çº¦æŸï¼ˆ8.0.1ç‰ˆæœ¬åï¼‰ ä¿è¯å­—æ®µå€¼æ»¡è¶³æŸä¸€ä¸ªæ¡ä»¶ CHECK å¤–é”®çº¦æŸ ç”¨æ¥è®©ä¸¤å¼ å›¾çš„æ•°æ®ä¹‹é—´å»ºç«‹è¿æ¥ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ FOREIGN KEY çº¦æŸæ˜¯ä½œç”¨äºè¡¨ä¸­å­—æ®µä¸Šçš„ï¼Œå¯ä»¥å†åˆ›å»ºè¡¨/ä¿®æ”¹è¡¨çš„æ—¶å€™æ·»åŠ çº¦æŸã€‚ å¸¸ç”¨çº¦æŸ çº¦æŸæ¡ä»¶ å…³é”®å­— ä¸»é”® PRIMARY KEY è‡ªåŠ¨å¢é•¿ AUTO_INCREMENT ä¸ä¸ºç©º NOT NULL å”¯ä¸€ UNIQUE é€»è¾‘æ¡ä»¶ CHECK é»˜è®¤å€¼ DEFAULT ä¾‹å­ï¼š 1234567create table user( id int primary key auto_increment, name varchar(10) not null unique, age int check(age &gt; 0 and age &lt; 120), status char(1) default '1', gender char(1)); å¤–é”®çº¦æŸæ·»åŠ å¤–é”®ï¼š 123456789CREATE TABLE è¡¨å( å­—æ®µå å­—æ®µç±»å‹, ... [CONSTRAINT] [å¤–é”®åç§°] FOREIGN KEY(å¤–é”®å­—æ®µå) REFERENCES ä¸»è¡¨(ä¸»è¡¨åˆ—å));ALTER TABLE è¡¨å ADD CONSTRAINT å¤–é”®åç§° FOREIGN KEY (å¤–é”®å­—æ®µå) REFERENCES ä¸»è¡¨(ä¸»è¡¨åˆ—å);-- ä¾‹å­alter table emp add constraint fk_emp_dept_id foreign key(dept_id) references dept(id); åˆ é™¤å¤–é”®ï¼šALTER TABLE è¡¨å DROP FOREIGN KEY å¤–é”®å; åˆ é™¤/æ›´æ–°è¡Œä¸º è¡Œä¸º è¯´æ˜ NO ACTION å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¸å…è®¸åˆ é™¤/æ›´æ–°ï¼ˆä¸RESTRICTä¸€è‡´ï¼‰ RESTRICT å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¸å…è®¸åˆ é™¤/æ›´æ–°ï¼ˆä¸NO ACTIONä¸€è‡´ï¼‰ CASCADE å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¹Ÿåˆ é™¤/æ›´æ–°å¤–é”®åœ¨å­è¡¨ä¸­çš„è®°å½• SET NULL å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™è®¾ç½®å­è¡¨ä¸­è¯¥å¤–é”®å€¼ä¸ºnullï¼ˆè¦æ±‚è¯¥å¤–é”®å…è®¸ä¸ºnullï¼‰ SET DEFAULT çˆ¶è¡¨æœ‰å˜æ›´æ—¶ï¼Œå­è¡¨å°†å¤–é”®è®¾ä¸ºä¸€ä¸ªé»˜è®¤å€¼ï¼ˆInnodbä¸æ”¯æŒï¼‰ æ›´æ”¹åˆ é™¤/æ›´æ–°è¡Œä¸ºï¼šALTER TABLE è¡¨å ADD CONSTRAINT å¤–é”®åç§° FOREIGN KEY (å¤–é”®å­—æ®µ) REFERENCES ä¸»è¡¨å(ä¸»è¡¨å­—æ®µå) ON UPDATE è¡Œä¸º ON DELETE è¡Œä¸º; å¤šè¡¨æŸ¥è¯¢å¤šè¡¨å…³ç³» ä¸€å¯¹å¤šï¼ˆå¤šå¯¹ä¸€ï¼‰ å¤šå¯¹å¤š ä¸€å¯¹ä¸€ ä¸€å¯¹å¤šæ¡ˆä¾‹ï¼šéƒ¨é—¨ä¸å‘˜å·¥å…³ç³»ï¼šä¸€ä¸ªéƒ¨é—¨å¯¹åº”å¤šä¸ªå‘˜å·¥ï¼Œä¸€ä¸ªå‘˜å·¥å¯¹åº”ä¸€ä¸ªéƒ¨é—¨å®ç°ï¼šåœ¨å¤šçš„ä¸€æ–¹å»ºç«‹å¤–é”®ï¼ŒæŒ‡å‘ä¸€çš„ä¸€æ–¹çš„ä¸»é”® å¤šå¯¹å¤šæ¡ˆä¾‹ï¼šå­¦ç”Ÿä¸è¯¾ç¨‹å…³ç³»ï¼šä¸€ä¸ªå­¦ç”Ÿå¯ä»¥é€‰å¤šé—¨è¯¾ç¨‹ï¼Œä¸€é—¨è¯¾ç¨‹ä¹Ÿå¯ä»¥ä¾›å¤šä¸ªå­¦ç”Ÿé€‰ä¿®å®ç°ï¼šå»ºç«‹ç¬¬ä¸‰å¼ ä¸­é—´è¡¨ï¼Œä¸­é—´è¡¨è‡³å°‘åŒ…å«ä¸¤ä¸ªå¤–é”®ï¼Œåˆ†åˆ«å…³è”ä¸¤æ–¹ä¸»é”® ä¸€å¯¹ä¸€æ¡ˆä¾‹ï¼šç”¨æˆ·ä¸ç”¨æˆ·è¯¦æƒ…å…³ç³»ï¼šä¸€å¯¹ä¸€å…³ç³»ï¼Œå¤šç”¨äºå•è¡¨æ‹†åˆ†ï¼Œå°†ä¸€å¼ è¡¨çš„åŸºç¡€å­—æ®µæ”¾åœ¨ä¸€å¼ è¡¨ä¸­ï¼Œå…¶ä»–è¯¦æƒ…å­—æ®µæ”¾åœ¨å¦ä¸€å¼ è¡¨ä¸­ï¼Œä»¥æå‡æ“ä½œæ•ˆç‡å®ç°ï¼šåœ¨ä»»æ„ä¸€æ–¹åŠ å…¥å¤–é”®ï¼Œå…³è”å¦å¤–ä¸€æ–¹çš„ä¸»é”®ï¼Œå¹¶ä¸”è®¾ç½®å¤–é”®ä¸ºå”¯ä¸€çš„ï¼ˆUNIQUEï¼‰ æŸ¥è¯¢åˆå¹¶æŸ¥è¯¢ï¼ˆç¬›å¡å°”ç§¯ï¼Œä¼šå±•ç¤ºæ‰€æœ‰ç»„åˆç»“æœï¼‰ï¼šselect * from employee, dept; ç¬›å¡å°”ç§¯ï¼šä¸¤ä¸ªé›†åˆAé›†åˆå’ŒBé›†åˆçš„æ‰€æœ‰ç»„åˆæƒ…å†µï¼ˆåœ¨å¤šè¡¨æŸ¥è¯¢æ—¶ï¼Œéœ€è¦æ¶ˆé™¤æ— æ•ˆçš„ç¬›å¡å°”ç§¯ï¼‰ æ¶ˆé™¤æ— æ•ˆç¬›å¡å°”ç§¯ï¼šselect * from employee, dept where employee.dept = dept.id; å†…è¿æ¥æŸ¥è¯¢å†…è¿æ¥æŸ¥è¯¢çš„æ˜¯ä¸¤å¼ è¡¨äº¤é›†çš„éƒ¨åˆ† éšå¼å†…è¿æ¥ï¼šSELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1, è¡¨2 WHERE æ¡ä»¶ ...; æ˜¾å¼å†…è¿æ¥ï¼šSELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1 [ INNER ] JOIN è¡¨2 ON è¿æ¥æ¡ä»¶ ...; æ˜¾å¼æ€§èƒ½æ¯”éšå¼é«˜ ä¾‹å­ï¼š 12345-- æŸ¥è¯¢å‘˜å·¥å§“åï¼ŒåŠå…³è”çš„éƒ¨é—¨çš„åç§°-- éšå¼select e.name, d.name from employee as e, dept as d where e.dept = d.id;-- æ˜¾å¼select e.name, d.name from employee as e inner join dept as d on e.dept = d.id; å¤–è¿æ¥æŸ¥è¯¢å·¦å¤–è¿æ¥ï¼šæŸ¥è¯¢å·¦è¡¨æ‰€æœ‰æ•°æ®ï¼Œä»¥åŠä¸¤å¼ è¡¨äº¤é›†éƒ¨åˆ†æ•°æ®SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1 LEFT [ OUTER ] JOIN è¡¨2 ON æ¡ä»¶ ...;ç›¸å½“äºæŸ¥è¯¢è¡¨1çš„æ‰€æœ‰æ•°æ®ï¼ŒåŒ…å«è¡¨1å’Œè¡¨2äº¤é›†éƒ¨åˆ†æ•°æ® å³å¤–è¿æ¥ï¼šæŸ¥è¯¢å³è¡¨æ‰€æœ‰æ•°æ®ï¼Œä»¥åŠä¸¤å¼ è¡¨äº¤é›†éƒ¨åˆ†æ•°æ®SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1 RIGHT [ OUTER ] JOIN è¡¨2 ON æ¡ä»¶ ...; ä¾‹å­ï¼š 12345-- å·¦select e.*, d.name from employee as e left outer join dept as d on e.dept = d.id;select d.name, e.* from dept d left outer join emp e on e.dept = d.id; -- è¿™æ¡è¯­å¥ä¸ä¸‹é¢çš„è¯­å¥æ•ˆæœä¸€æ ·-- å³select d.name, e.* from employee as e right outer join dept as d on e.dept = d.id; å·¦è¿æ¥å¯ä»¥æŸ¥è¯¢åˆ°æ²¡æœ‰deptçš„employeeï¼Œå³è¿æ¥å¯ä»¥æŸ¥è¯¢åˆ°æ²¡æœ‰employeeçš„dept è‡ªè¿æ¥æŸ¥è¯¢å½“å‰è¡¨ä¸è‡ªèº«çš„è¿æ¥æŸ¥è¯¢ï¼Œè‡ªè¿æ¥å¿…é¡»ä½¿ç”¨è¡¨åˆ«å è¯­æ³•ï¼šSELECT å­—æ®µåˆ—è¡¨ FROM è¡¨A åˆ«åA JOIN è¡¨A åˆ«åB ON æ¡ä»¶ ...; è‡ªè¿æ¥æŸ¥è¯¢ï¼Œå¯ä»¥æ˜¯å†…è¿æ¥æŸ¥è¯¢ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤–è¿æ¥æŸ¥è¯¢ ä¾‹å­ï¼š 1234-- æŸ¥è¯¢å‘˜å·¥åŠå…¶æ‰€å±é¢†å¯¼çš„åå­—select a.name, b.name from employee a, employee b where a.manager = b.id;-- æ²¡æœ‰é¢†å¯¼çš„ä¹ŸæŸ¥è¯¢å‡ºæ¥select a.name, b.name from employee a left join employee b on a.manager = b.id; è”åˆæŸ¥è¯¢ union, union allæŠŠå¤šæ¬¡æŸ¥è¯¢çš„ç»“æœåˆå¹¶ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„æŸ¥è¯¢é›† è¯­æ³•ï¼š 123SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨A ...UNION [ALL]SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨B ... æ³¨æ„äº‹é¡¹ UNION ALL ä¼šæœ‰é‡å¤ç»“æœï¼ŒUNION ä¸ä¼š è”åˆæŸ¥è¯¢æ¯”ä½¿ç”¨oræ•ˆç‡é«˜ï¼Œä¸ä¼šä½¿ç´¢å¼•å¤±æ•ˆ å­æŸ¥è¯¢SQLè¯­å¥ä¸­åµŒå¥—SELECTè¯­å¥ï¼Œç§°è°“åµŒå¥—æŸ¥è¯¢ï¼Œåˆç§°å­æŸ¥è¯¢ã€‚SELECT * FROM t1 WHERE column1 = ( SELECT column1 FROM t2);å­æŸ¥è¯¢å¤–éƒ¨çš„è¯­å¥å¯ä»¥æ˜¯ INSERT / UPDATE / DELETE / SELECT çš„ä»»ä½•ä¸€ä¸ª æ ¹æ®å­æŸ¥è¯¢ç»“æœå¯ä»¥åˆ†ä¸ºï¼š æ ‡é‡å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºå•ä¸ªå€¼ï¼‰ åˆ—å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºä¸€åˆ—ï¼‰ è¡Œå­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºä¸€è¡Œï¼‰ è¡¨å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºå¤šè¡Œå¤šåˆ—ï¼‰ æ ¹æ®å­æŸ¥è¯¢ä½ç½®å¯åˆ†ä¸ºï¼š WHERE ä¹‹å FROM ä¹‹å SELECT ä¹‹å æ ‡é‡å­æŸ¥è¯¢å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯å•ä¸ªå€¼ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€æ—¥æœŸç­‰ï¼‰ã€‚å¸¸ç”¨æ“ä½œç¬¦ï¼š- &lt; &gt; &gt; &gt;= &lt; &lt;= ä¾‹å­ï¼š 123456789-- æŸ¥è¯¢é”€å”®éƒ¨æ‰€æœ‰å‘˜å·¥select id from dept where name = 'é”€å”®éƒ¨';-- æ ¹æ®é”€å”®éƒ¨éƒ¨é—¨IDï¼ŒæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯select * from employee where dept = 4;-- åˆå¹¶ï¼ˆå­æŸ¥è¯¢ï¼‰select * from employee where dept = (select id from dept where name = 'é”€å”®éƒ¨');-- æŸ¥è¯¢xxxå…¥èŒä¹‹åçš„å‘˜å·¥ä¿¡æ¯select * from employee where entrydate &gt; (select entrydate from employee where name = 'xxx'); åˆ—å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯ä¸€åˆ—ï¼ˆå¯ä»¥æ˜¯å¤šè¡Œï¼‰ã€‚ å¸¸ç”¨æ“ä½œç¬¦ï¼š æ“ä½œç¬¦ æè¿° IN åœ¨æŒ‡å®šçš„é›†åˆèŒƒå›´å†…ï¼Œå¤šé€‰ä¸€ NOT IN ä¸åœ¨æŒ‡å®šçš„é›†åˆèŒƒå›´å†… ANY å­æŸ¥è¯¢è¿”å›åˆ—è¡¨ä¸­ï¼Œæœ‰ä»»æ„ä¸€ä¸ªæ»¡è¶³å³å¯ SOME ä¸ANYç­‰åŒï¼Œä½¿ç”¨SOMEçš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨ANY ALL å­æŸ¥è¯¢è¿”å›åˆ—è¡¨çš„æ‰€æœ‰å€¼éƒ½å¿…é¡»æ»¡è¶³ ä¾‹å­ï¼š 123456-- æŸ¥è¯¢é”€å”®éƒ¨å’Œå¸‚åœºéƒ¨çš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯select * from employee where dept in (select id from dept where name = 'é”€å”®éƒ¨' or name = 'å¸‚åœºéƒ¨');-- æŸ¥è¯¢æ¯”è´¢åŠ¡éƒ¨æ‰€æœ‰äººå·¥èµ„éƒ½é«˜çš„å‘˜å·¥ä¿¡æ¯select * from employee where salary &gt; all(select salary from employee where dept = (select id from dept where name = 'è´¢åŠ¡éƒ¨'));-- æŸ¥è¯¢æ¯”ç ”å‘éƒ¨ä»»æ„ä¸€äººå·¥èµ„é«˜çš„å‘˜å·¥ä¿¡æ¯select * from employee where salary &gt; any (select salary from employee where dept = (select id from dept where name = 'ç ”å‘éƒ¨')); è¡Œå­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯ä¸€è¡Œï¼ˆå¯ä»¥æ˜¯å¤šåˆ—ï¼‰ã€‚å¸¸ç”¨æ“ä½œç¬¦ï¼š=, &lt;, &gt;, IN, NOT IN ä¾‹å­ï¼š 123-- æŸ¥è¯¢ä¸xxxçš„è–ªèµ„åŠç›´å±é¢†å¯¼ç›¸åŒçš„å‘˜å·¥ä¿¡æ¯select * from employee where (salary, manager) = (12500, 1);select * from employee where (salary, manager) = (select salary, manager from employee where name = 'xxx'); è¡¨å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯å¤šè¡Œå¤šåˆ—å¸¸ç”¨æ“ä½œç¬¦ï¼šIN ä¾‹å­ï¼š 1234-- æŸ¥è¯¢ä¸xxx1ï¼Œxxx2çš„èŒä½å’Œè–ªèµ„ç›¸åŒçš„å‘˜å·¥select * from employee where (job, salary) in (select job, salary from employee where name = 'xxx1' or name = 'xxx2');-- æŸ¥è¯¢å…¥èŒæ—¥æœŸæ˜¯2006-01-01ä¹‹åçš„å‘˜å·¥ï¼ŒåŠå…¶éƒ¨é—¨ä¿¡æ¯select e.*, d.* from (select * from employee where entrydate &gt; '2006-01-01') as e left join dept as d on e.dept = d.id; äº‹åŠ¡äº‹åŠ¡æ˜¯ä¸€ç»„æ“ä½œçš„é›†åˆï¼Œäº‹åŠ¡ä¼šæŠŠæ‰€æœ‰æ“ä½œä½œä¸ºä¸€ä¸ªæ•´ä½“ä¸€èµ·å‘ç³»ç»Ÿæäº¤æˆ–æ’¤é”€æ“ä½œè¯·æ±‚ï¼Œå³è¿™äº›æ“ä½œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ã€‚ åŸºæœ¬æ“ä½œï¼š 1234567891011121314151617181920212223-- 1. æŸ¥è¯¢å¼ ä¸‰è´¦æˆ·ä½™é¢select * from account where name = 'å¼ ä¸‰';-- 2. å°†å¼ ä¸‰è´¦æˆ·ä½™é¢-1000update account set money = money - 1000 where name = 'å¼ ä¸‰';-- æ­¤è¯­å¥å‡ºé”™åå¼ ä¸‰é’±å‡å°‘ä½†æ˜¯æå››é’±æ²¡æœ‰å¢åŠ æ¨¡æ‹Ÿsqlè¯­å¥é”™è¯¯-- 3. å°†æå››è´¦æˆ·ä½™é¢+1000update account set money = money + 1000 where name = 'æå››';-- æŸ¥çœ‹äº‹åŠ¡æäº¤æ–¹å¼SELECT @@AUTOCOMMIT;-- è®¾ç½®äº‹åŠ¡æäº¤æ–¹å¼ï¼Œ1ä¸ºè‡ªåŠ¨æäº¤ï¼Œ0ä¸ºæ‰‹åŠ¨æäº¤ï¼Œè¯¥è®¾ç½®åªå¯¹å½“å‰ä¼šè¯æœ‰æ•ˆSET @@AUTOCOMMIT = 0;-- æäº¤äº‹åŠ¡COMMIT;-- å›æ»šäº‹åŠ¡ROLLBACK;-- è®¾ç½®æ‰‹åŠ¨æäº¤åä¸Šé¢ä»£ç æ”¹ä¸ºï¼šselect * from account where name = 'å¼ ä¸‰';update account set money = money - 1000 where name = 'å¼ ä¸‰';update account set money = money + 1000 where name = 'æå››';commit; æ“ä½œæ–¹å¼äºŒï¼š å¼€å¯äº‹åŠ¡ï¼šSTART TRANSACTION æˆ– BEGIN TRANSACTION;æäº¤äº‹åŠ¡ï¼šCOMMIT;å›æ»šäº‹åŠ¡ï¼šROLLBACK; æ“ä½œå®ä¾‹ï¼š 12345start transaction;select * from account where name = 'å¼ ä¸‰';update account set money = money - 1000 where name = 'å¼ ä¸‰';update account set money = money + 1000 where name = 'æå››';commit; å››å¤§ç‰¹æ€§ACID åŸå­æ€§(Atomicity)ï¼šäº‹åŠ¡æ˜¯ä¸å¯åˆ†å‰²çš„æœ€å°æ“ä½œä½†æ„¿ï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ ä¸€è‡´æ€§(Consistency)ï¼šäº‹åŠ¡å®Œæˆæ—¶ï¼Œå¿…é¡»ä½¿æ‰€æœ‰æ•°æ®éƒ½ä¿æŒä¸€è‡´çŠ¶æ€ éš”ç¦»æ€§(Isolation)ï¼šæ•°æ®åº“ç³»ç»Ÿæä¾›çš„éš”ç¦»æœºåˆ¶ï¼Œä¿è¯äº‹åŠ¡åœ¨ä¸å—å¤–éƒ¨å¹¶å‘æ“ä½œå½±å“çš„ç‹¬ç«‹ç¯å¢ƒä¸‹è¿è¡Œ æŒä¹…æ€§(Durability)ï¼šäº‹åŠ¡ä¸€æ—¦æäº¤æˆ–å›æ»šï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…çš„ å¹¶å‘äº‹åŠ¡ é—®é¢˜ æè¿° è„è¯» ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°å¦ä¸€ä¸ªäº‹åŠ¡è¿˜æ²¡æäº¤çš„æ•°æ® ä¸å¯é‡å¤è¯» ä¸€ä¸ªäº‹åŠ¡å…ˆåè¯»å–åŒä¸€æ¡è®°å½•ï¼Œä½†ä¸¤æ¬¡è¯»å–çš„æ•°æ®ä¸åŒ å¹»è¯» ä¸€ä¸ªäº‹åŠ¡æŒ‰ç…§æ¡ä»¶æŸ¥è¯¢æ•°æ®æ—¶ï¼Œæ²¡æœ‰å¯¹åº”çš„æ•°æ®è¡Œï¼Œä½†æ˜¯å†æ’å…¥æ•°æ®æ—¶ï¼Œåˆå‘ç°è¿™è¡Œæ•°æ®å·²ç»å­˜åœ¨ è¿™ä¸‰ä¸ªé—®é¢˜çš„è¯¦ç»†æ¼”ç¤ºï¼šhttps://www.bilibili.com/video/BV1Kr4y1i7ru?p=55cd å¹¶å‘äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼š éš”ç¦»çº§åˆ« è„è¯» ä¸å¯é‡å¤è¯» å¹»è¯» Read uncommitted âˆš âˆš âˆš Read committed Ã— âˆš âˆš Repeatable Read(é»˜è®¤) Ã— Ã— âˆš Serializable Ã— Ã— Ã— âˆšè¡¨ç¤ºåœ¨å½“å‰éš”ç¦»çº§åˆ«ä¸‹è¯¥é—®é¢˜ä¼šå‡ºç° Serializable æ€§èƒ½æœ€ä½ï¼›Read uncommitted æ€§èƒ½æœ€é«˜ï¼Œæ•°æ®å®‰å…¨æ€§æœ€å·® æŸ¥çœ‹äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼šSELECT @@TRANSACTION_ISOLATION;è®¾ç½®äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼šSET [ SESSION | GLOBAL ] TRANSACTION ISOLATION LEVEL {READ UNCOMMITTED | READ COMMITTED | REPEATABLE READ | SERIALIZABLE };SESSION æ˜¯ä¼šè¯çº§åˆ«ï¼Œè¡¨ç¤ºåªé’ˆå¯¹å½“å‰ä¼šè¯æœ‰æ•ˆï¼ŒGLOBAL è¡¨ç¤ºå¯¹æ‰€æœ‰ä¼šè¯æœ‰æ•ˆ è¿›é˜¶ç¯‡å­˜å‚¨å¼•æ“MySQLä½“ç³»ç»“æ„ï¼š å­˜å‚¨å¼•æ“å°±æ˜¯å­˜å‚¨æ•°æ®ã€å»ºç«‹ç´¢å¼•ã€æ›´æ–°/æŸ¥è¯¢æ•°æ®ç­‰æŠ€æœ¯çš„å®ç°æ–¹å¼ã€‚å­˜å‚¨å¼•æ“æ˜¯åŸºäºè¡¨è€Œä¸æ˜¯åŸºäºåº“çš„ï¼Œæ‰€ä»¥å­˜å‚¨å¼•æ“ä¹Ÿå¯ä»¥è¢«ç§°ä¸ºè¡¨å¼•æ“ã€‚é»˜è®¤å­˜å‚¨å¼•æ“æ˜¯InnoDBã€‚ ç›¸å…³æ“ä½œï¼š 12345678-- æŸ¥è¯¢å»ºè¡¨è¯­å¥show create table account;-- å»ºè¡¨æ—¶æŒ‡å®šå­˜å‚¨å¼•æ“CREATE TABLE è¡¨å( ...) ENGINE=INNODB;-- æŸ¥çœ‹å½“å‰æ•°æ®åº“æ”¯æŒçš„å­˜å‚¨å¼•æ“show engines; InnoDBInnoDB æ˜¯ä¸€ç§å…¼é¡¾é«˜å¯é æ€§å’Œé«˜æ€§èƒ½çš„é€šç”¨å­˜å‚¨å¼•æ“ï¼Œåœ¨ MySQL 5.5 ä¹‹åï¼ŒInnoDB æ˜¯é»˜è®¤çš„ MySQL å¼•æ“ã€‚ ç‰¹ç‚¹ï¼š DML æ“ä½œéµå¾ª ACID æ¨¡å‹ï¼Œæ”¯æŒäº‹åŠ¡ è¡Œçº§é”ï¼Œæé«˜å¹¶å‘è®¿é—®æ€§èƒ½ æ”¯æŒå¤–é”®çº¦æŸï¼Œä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§ æ–‡ä»¶ï¼š xxx.ibd: xxxä»£è¡¨è¡¨åï¼ŒInnoDB å¼•æ“çš„æ¯å¼ è¡¨éƒ½ä¼šå¯¹åº”è¿™æ ·ä¸€ä¸ªè¡¨ç©ºé—´æ–‡ä»¶ï¼Œå­˜å‚¨è¯¥è¡¨çš„è¡¨ç»“æ„ï¼ˆfrmã€sdiï¼‰ã€æ•°æ®å’Œç´¢å¼•ã€‚ å‚æ•°ï¼šinnodb_file_per_tableï¼Œå†³å®šå¤šå¼ è¡¨å…±äº«ä¸€ä¸ªè¡¨ç©ºé—´è¿˜æ˜¯æ¯å¼ è¡¨å¯¹åº”ä¸€ä¸ªè¡¨ç©ºé—´ çŸ¥è¯†ç‚¹ï¼š æŸ¥çœ‹ Mysql å˜é‡ï¼šshow variables like 'innodb_file_per_table'; ä»idbæ–‡ä»¶æå–è¡¨ç»“æ„æ•°æ®ï¼šï¼ˆåœ¨cmdè¿è¡Œï¼‰ibd2sdi xxx.ibd InnoDB é€»è¾‘å­˜å‚¨ç»“æ„ï¼š MyISAMMyISAM æ˜¯ MySQL æ—©æœŸçš„é»˜è®¤å­˜å‚¨å¼•æ“ã€‚ ç‰¹ç‚¹ï¼š ä¸æ”¯æŒäº‹åŠ¡ï¼Œä¸æ”¯æŒå¤–é”® æ”¯æŒè¡¨é”ï¼Œä¸æ”¯æŒè¡Œé” è®¿é—®é€Ÿåº¦å¿« æ–‡ä»¶ï¼š xxx.sdi: å­˜å‚¨è¡¨ç»“æ„ä¿¡æ¯ xxx.MYD: å­˜å‚¨æ•°æ® xxx.MYI: å­˜å‚¨ç´¢å¼• MemoryMemory å¼•æ“çš„è¡¨æ•°æ®æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ï¼Œå—ç¡¬ä»¶é—®é¢˜ã€æ–­ç”µé—®é¢˜çš„å½±å“ï¼Œåªèƒ½å°†è¿™äº›è¡¨ä½œä¸ºä¸´æ—¶è¡¨æˆ–ç¼“å­˜ä½¿ç”¨ã€‚ ç‰¹ç‚¹ï¼š å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œé€Ÿåº¦å¿« hashç´¢å¼•ï¼ˆé»˜è®¤ï¼‰ æ–‡ä»¶ï¼š xxx.sdi: å­˜å‚¨è¡¨ç»“æ„ä¿¡æ¯ å­˜å‚¨å¼•æ“ç‰¹ç‚¹ ç‰¹ç‚¹ InnoDB MyISAM Memory å­˜å‚¨é™åˆ¶ 64TB æœ‰ æœ‰ äº‹åŠ¡å®‰å…¨ æ”¯æŒ - - é”æœºåˆ¶ è¡Œé” è¡¨é” è¡¨é” B+treeç´¢å¼• æ”¯æŒ æ”¯æŒ æ”¯æŒ Hashç´¢å¼• - - æ”¯æŒ å…¨æ–‡ç´¢å¼• æ”¯æŒï¼ˆ5.6ç‰ˆæœ¬ä¹‹åï¼‰ æ”¯æŒ - ç©ºé—´ä½¿ç”¨ é«˜ ä½ N/A å†…å­˜ä½¿ç”¨ é«˜ ä½ ä¸­ç­‰ æ‰¹é‡æ’å…¥é€Ÿåº¦ ä½ é«˜ é«˜ æ”¯æŒå¤–é”® æ”¯æŒ - - å­˜å‚¨å¼•æ“çš„é€‰æ‹©åœ¨é€‰æ‹©å­˜å‚¨å¼•æ“æ—¶ï¼Œåº”è¯¥æ ¹æ®åº”ç”¨ç³»ç»Ÿçš„ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„å­˜å‚¨å¼•æ“ã€‚å¯¹äºå¤æ‚çš„åº”ç”¨ç³»ç»Ÿï¼Œè¿˜å¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©å¤šç§å­˜å‚¨å¼•æ“è¿›è¡Œç»„åˆã€‚ InnoDB: å¦‚æœåº”ç”¨å¯¹äº‹ç‰©çš„å®Œæ•´æ€§æœ‰æ¯”è¾ƒé«˜çš„è¦æ±‚ï¼Œåœ¨å¹¶å‘æ¡ä»¶ä¸‹è¦æ±‚æ•°æ®çš„ä¸€è‡´æ€§ï¼Œæ•°æ®æ“ä½œé™¤äº†æ’å…¥å’ŒæŸ¥è¯¢ä¹‹å¤–ï¼Œè¿˜åŒ…å«å¾ˆå¤šçš„æ›´æ–°ã€åˆ é™¤æ“ä½œï¼Œåˆ™ InnoDB æ˜¯æ¯”è¾ƒåˆé€‚çš„é€‰æ‹© MyISAM: å¦‚æœåº”ç”¨æ˜¯ä»¥è¯»æ“ä½œå’Œæ’å…¥æ“ä½œä¸ºä¸»ï¼Œåªæœ‰å¾ˆå°‘çš„æ›´æ–°å’Œåˆ é™¤æ“ä½œï¼Œå¹¶ä¸”å¯¹äº‹åŠ¡çš„å®Œæ•´æ€§ã€å¹¶å‘æ€§è¦æ±‚ä¸é«˜ï¼Œé‚£è¿™ä¸ªå­˜å‚¨å¼•æ“æ˜¯éå¸¸åˆé€‚çš„ã€‚ Memory: å°†æ‰€æœ‰æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè®¿é—®é€Ÿåº¦å¿«ï¼Œé€šå¸¸ç”¨äºä¸´æ—¶è¡¨åŠç¼“å­˜ã€‚Memory çš„ç¼ºé™·æ˜¯å¯¹è¡¨çš„å¤§å°æœ‰é™åˆ¶ï¼Œå¤ªå¤§çš„è¡¨æ— æ³•ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œä¸”æ— æ³•ä¿éšœæ•°æ®çš„å®‰å…¨æ€§ ç”µå•†ä¸­çš„è¶³è¿¹å’Œè¯„è®ºé€‚åˆä½¿ç”¨ MyISAM å¼•æ“ï¼Œç¼“å­˜é€‚åˆä½¿ç”¨ Memory å¼•æ“ã€‚ æ€§èƒ½åˆ†ææŸ¥çœ‹æ‰§è¡Œé¢‘æ¬¡æŸ¥çœ‹å½“å‰æ•°æ®åº“çš„ INSERT, UPDATE, DELETE, SELECT è®¿é—®é¢‘æ¬¡ï¼šSHOW GLOBAL STATUS LIKE 'Com_______'; æˆ–è€… SHOW SESSION STATUS LIKE 'Com_______';ä¾‹ï¼šshow global status like 'Com_______' æ…¢æŸ¥è¯¢æ—¥å¿—æ…¢æŸ¥è¯¢æ—¥å¿—è®°å½•äº†æ‰€æœ‰æ‰§è¡Œæ—¶é—´è¶…è¿‡æŒ‡å®šå‚æ•°ï¼ˆlong_query_timeï¼Œå•ä½ï¼šç§’ï¼Œé»˜è®¤10ç§’ï¼‰çš„æ‰€æœ‰SQLè¯­å¥çš„æ—¥å¿—ã€‚MySQLçš„æ…¢æŸ¥è¯¢æ—¥å¿—é»˜è®¤æ²¡æœ‰å¼€å¯ï¼Œéœ€è¦åœ¨MySQLçš„é…ç½®æ–‡ä»¶ï¼ˆ/etc/my.cnfï¼‰ä¸­é…ç½®å¦‚ä¸‹ä¿¡æ¯ï¼š # å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—å¼€å…³ slow_query_log=1 # è®¾ç½®æ…¢æŸ¥è¯¢æ—¥å¿—çš„æ—¶é—´ä¸º2ç§’ï¼ŒSQLè¯­å¥æ‰§è¡Œæ—¶é—´è¶…è¿‡2ç§’ï¼Œå°±ä¼šè§†ä¸ºæ…¢æŸ¥è¯¢ï¼Œè®°å½•æ…¢æŸ¥è¯¢æ—¥å¿— long_query_time=2æ›´æ”¹åè®°å¾—é‡å¯MySQLæœåŠ¡ï¼Œæ—¥å¿—æ–‡ä»¶ä½ç½®ï¼š/var/lib/mysql/localhost-slow.log æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—å¼€å…³çŠ¶æ€ï¼šshow variables like 'slow_query_log'; profileshow profile èƒ½åœ¨åšSQLä¼˜åŒ–æ—¶å¸®æˆ‘ä»¬äº†è§£æ—¶é—´éƒ½è€—è´¹åœ¨å“ªé‡Œã€‚é€šè¿‡ have_profiling å‚æ•°ï¼Œèƒ½çœ‹åˆ°å½“å‰ MySQL æ˜¯å¦æ”¯æŒ profile æ“ä½œï¼šSELECT @@have_profiling;profiling é»˜è®¤å…³é—­ï¼Œå¯ä»¥é€šè¿‡setè¯­å¥åœ¨session/globalçº§åˆ«å¼€å¯ profilingï¼šSET profiling = 1;æŸ¥çœ‹æ‰€æœ‰è¯­å¥çš„è€—æ—¶ï¼šshow profiles;æŸ¥çœ‹æŒ‡å®šquery_idçš„SQLè¯­å¥å„ä¸ªé˜¶æ®µçš„è€—æ—¶ï¼šshow profile for query query_id;æŸ¥çœ‹æŒ‡å®šquery_idçš„SQLè¯­å¥CPUçš„ä½¿ç”¨æƒ…å†µshow profile cpu for query query_id; explainEXPLAIN æˆ–è€… DESC å‘½ä»¤è·å– MySQL å¦‚ä½•æ‰§è¡Œ SELECT è¯­å¥çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬åœ¨ SELECT è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­è¡¨å¦‚ä½•è¿æ¥å’Œè¿æ¥çš„é¡ºåºã€‚è¯­æ³•ï¼š # ç›´æ¥åœ¨selectè¯­å¥ä¹‹å‰åŠ ä¸Šå…³é”®å­— explain / desc EXPLAIN SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å HWERE æ¡ä»¶; EXPLAIN å„å­—æ®µå«ä¹‰ï¼š idï¼šselect æŸ¥è¯¢çš„åºåˆ—å·ï¼Œè¡¨ç¤ºæŸ¥è¯¢ä¸­æ‰§è¡Œ select å­å¥æˆ–è€…æ“ä½œè¡¨çš„é¡ºåºï¼ˆidç›¸åŒï¼Œæ‰§è¡Œé¡ºåºä»ä¸Šåˆ°ä¸‹ï¼›idä¸åŒï¼Œå€¼è¶Šå¤§è¶Šå…ˆæ‰§è¡Œï¼‰ select_typeï¼šè¡¨ç¤º SELECT çš„ç±»å‹ï¼Œå¸¸è§å–å€¼æœ‰ SIMPLEï¼ˆç®€å•è¡¨ï¼Œå³ä¸é€‚ç”¨è¡¨è¿æ¥æˆ–è€…å­æŸ¥è¯¢ï¼‰ã€PRIMARYï¼ˆä¸»æŸ¥è¯¢ï¼Œå³å¤–å±‚çš„æŸ¥è¯¢ï¼‰ã€UNIONï¼ˆUNIONä¸­çš„ç¬¬äºŒä¸ªæˆ–è€…åé¢çš„æŸ¥è¯¢è¯­å¥ï¼‰ã€SUBQUERYï¼ˆSELECT/WHEREä¹‹ååŒ…å«äº†å­æŸ¥è¯¢ï¼‰ç­‰ typeï¼šè¡¨ç¤ºè¿æ¥ç±»å‹ï¼Œæ€§èƒ½ç”±å¥½åˆ°å·®çš„è¿æ¥ç±»å‹ä¸º NULLã€systemã€constã€eq_refã€refã€rangeã€indexã€all possible_keyï¼šå¯èƒ½åº”ç”¨åœ¨è¿™å¼ è¡¨ä¸Šçš„ç´¢å¼•ï¼Œä¸€ä¸ªæˆ–å¤šä¸ª Keyï¼šå®é™…ä½¿ç”¨çš„ç´¢å¼•ï¼Œå¦‚æœä¸º NULLï¼Œåˆ™æ²¡æœ‰ä½¿ç”¨ç´¢å¼• Key_lenï¼šè¡¨ç¤ºç´¢å¼•ä¸­ä½¿ç”¨çš„å­—èŠ‚æ•°ï¼Œè¯¥å€¼ä¸ºç´¢å¼•å­—æ®µæœ€å¤§å¯èƒ½é•¿åº¦ï¼Œå¹¶éå®é™…ä½¿ç”¨é•¿åº¦ï¼Œåœ¨ä¸æŸå¤±ç²¾ç¡®æ€§çš„å‰æä¸‹ï¼Œé•¿åº¦è¶ŠçŸ­è¶Šå¥½ rowsï¼šMySQLè®¤ä¸ºå¿…é¡»è¦æ‰§è¡Œçš„è¡Œæ•°ï¼Œåœ¨InnoDBå¼•æ“çš„è¡¨ä¸­ï¼Œæ˜¯ä¸€ä¸ªä¼°è®¡å€¼ï¼Œå¯èƒ½å¹¶ä¸æ€»æ˜¯å‡†ç¡®çš„ filteredï¼šè¡¨ç¤ºè¿”å›ç»“æœçš„è¡Œæ•°å éœ€è¯»å–è¡Œæ•°çš„ç™¾åˆ†æ¯”ï¼Œfilteredçš„å€¼è¶Šå¤§è¶Šå¥½ ç´¢å¼•ç´¢å¼•æ˜¯å¸®åŠ© MySQL é«˜æ•ˆè·å–æ•°æ®çš„æ•°æ®ç»“æ„ï¼ˆæœ‰åºï¼‰ã€‚åœ¨æ•°æ®ä¹‹å¤–ï¼Œæ•°æ®åº“ç³»ç»Ÿè¿˜ç»´æŠ¤ç€æ»¡è¶³ç‰¹å®šæŸ¥æ‰¾ç®—æ³•çš„æ•°æ®ç»“æ„ï¼Œè¿™äº›æ•°æ®ç»“æ„ä»¥æŸç§æ–¹å¼å¼•ç”¨ï¼ˆæŒ‡å‘ï¼‰æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨è¿™äº›æ•°æ®ç»“æ„ä¸Šå®ç°é«˜çº§æŸ¥è¯¢ç®—æ³•ï¼Œè¿™ç§æ•°æ®ç»“æ„å°±æ˜¯ç´¢å¼•ã€‚ ä¼˜ç¼ºç‚¹ï¼š ä¼˜ç‚¹ï¼š æé«˜æ•°æ®æ£€ç´¢æ•ˆç‡ï¼Œé™ä½æ•°æ®åº“çš„IOæˆæœ¬ é€šè¿‡ç´¢å¼•åˆ—å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œé™ä½æ•°æ®æ’åºçš„æˆæœ¬ï¼Œé™ä½CPUçš„æ¶ˆè€— ç¼ºç‚¹ï¼š ç´¢å¼•åˆ—ä¹Ÿæ˜¯è¦å ç”¨ç©ºé—´çš„ ç´¢å¼•å¤§å¤§æé«˜äº†æŸ¥è¯¢æ•ˆç‡ï¼Œä½†é™ä½äº†æ›´æ–°çš„é€Ÿåº¦ï¼Œæ¯”å¦‚ INSERTã€UPDATEã€DELETE ç´¢å¼•ç»“æ„ ç´¢å¼•ç»“æ„ æè¿° B+Tree æœ€å¸¸è§çš„ç´¢å¼•ç±»å‹ï¼Œå¤§éƒ¨åˆ†å¼•æ“éƒ½æ”¯æŒB+æ ‘ç´¢å¼• Hash åº•å±‚æ•°æ®ç»“æ„æ˜¯ç”¨å“ˆå¸Œè¡¨å®ç°ï¼Œåªæœ‰ç²¾ç¡®åŒ¹é…ç´¢å¼•åˆ—çš„æŸ¥è¯¢æ‰æœ‰æ•ˆï¼Œä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢ R-Tree(ç©ºé—´ç´¢å¼•) ç©ºé—´ç´¢å¼•æ˜¯ MyISAM å¼•æ“çš„ä¸€ä¸ªç‰¹æ®Šç´¢å¼•ç±»å‹ï¼Œä¸»è¦ç”¨äºåœ°ç†ç©ºé—´æ•°æ®ç±»å‹ï¼Œé€šå¸¸ä½¿ç”¨è¾ƒå°‘ Full-Text(å…¨æ–‡ç´¢å¼•) æ˜¯ä¸€ç§é€šè¿‡å»ºç«‹å€’æ’ç´¢å¼•ï¼Œå¿«é€ŸåŒ¹é…æ–‡æ¡£çš„æ–¹å¼ï¼Œç±»ä¼¼äº Lucene, Solr, ES ç´¢å¼• InnoDB MyISAM Memory B+Treeç´¢å¼• æ”¯æŒ æ”¯æŒ æ”¯æŒ Hashç´¢å¼• ä¸æ”¯æŒ ä¸æ”¯æŒ æ”¯æŒ R-Treeç´¢å¼• ä¸æ”¯æŒ æ”¯æŒ ä¸æ”¯æŒ Full-text 5.6ç‰ˆæœ¬åæ”¯æŒ æ”¯æŒ ä¸æ”¯æŒ B-Tree äºŒå‰æ ‘çš„ç¼ºç‚¹å¯ä»¥ç”¨çº¢é»‘æ ‘æ¥è§£å†³ï¼šçº¢é»‘æ ‘ä¹Ÿå­˜åœ¨å¤§æ•°æ®é‡æƒ…å†µä¸‹ï¼Œå±‚çº§è¾ƒæ·±ï¼Œæ£€ç´¢é€Ÿåº¦æ…¢çš„é—®é¢˜ã€‚ ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ B-Tree ç»“æ„ã€‚B-Tree (å¤šè·¯å¹³è¡¡æŸ¥æ‰¾æ ‘) ä»¥ä¸€æ£µæœ€å¤§åº¦æ•°ï¼ˆmax-degreeï¼ŒæŒ‡ä¸€ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸ªæ•°ï¼‰ä¸º5ï¼ˆ5é˜¶ï¼‰çš„ b-tree ä¸ºä¾‹ï¼ˆæ¯ä¸ªèŠ‚ç‚¹æœ€å¤šå­˜å‚¨4ä¸ªkeyï¼Œ5ä¸ªæŒ‡é’ˆï¼‰ B-Tree çš„æ•°æ®æ’å…¥è¿‡ç¨‹åŠ¨ç”»å‚ç…§ï¼šhttps://www.bilibili.com/video/BV1Kr4y1i7ru?p=68æ¼”ç¤ºåœ°å€ï¼šhttps://www.cs.usfca.edu/~galles/visualization/BTree.html B+Treeç»“æ„å›¾ï¼š æ¼”ç¤ºåœ°å€ï¼šhttps://www.cs.usfca.edu/~galles/visualization/BPlusTree.html ä¸ B-Tree çš„åŒºåˆ«ï¼š æ‰€æœ‰çš„æ•°æ®éƒ½ä¼šå‡ºç°åœ¨å¶å­èŠ‚ç‚¹ å¶å­èŠ‚ç‚¹å½¢æˆä¸€ä¸ªå•å‘é“¾è¡¨ MySQL ç´¢å¼•æ•°æ®ç»“æ„å¯¹ç»å…¸çš„ B+Tree è¿›è¡Œäº†ä¼˜åŒ–ã€‚åœ¨åŸ B+Tree çš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸€ä¸ªæŒ‡å‘ç›¸é‚»å¶å­èŠ‚ç‚¹çš„é“¾è¡¨æŒ‡é’ˆï¼Œå°±å½¢æˆäº†å¸¦æœ‰é¡ºåºæŒ‡é’ˆçš„ B+Treeï¼Œæé«˜åŒºé—´è®¿é—®çš„æ€§èƒ½ã€‚ Hashå“ˆå¸Œç´¢å¼•å°±æ˜¯é‡‡ç”¨ä¸€å®šçš„hashç®—æ³•ï¼Œå°†é”®å€¼æ¢ç®—æˆæ–°çš„hashå€¼ï¼Œæ˜ å°„åˆ°å¯¹åº”çš„æ§½ä½ä¸Šï¼Œç„¶åå­˜å‚¨åœ¨hashè¡¨ä¸­ã€‚å¦‚æœä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰é”®å€¼ï¼Œæ˜ å°„åˆ°ä¸€ä¸ªç›¸åŒçš„æ§½ä½ä¸Šï¼Œä»–ä»¬å°±äº§ç”Ÿäº†hashå†²çªï¼ˆä¹Ÿç§°ä¸ºhashç¢°æ’ï¼‰ï¼Œå¯ä»¥é€šè¿‡é“¾è¡¨æ¥è§£å†³ã€‚ ç‰¹ç‚¹ï¼š Hashç´¢å¼•åªèƒ½ç”¨äºå¯¹ç­‰æ¯”è¾ƒï¼ˆ=ã€inï¼‰ï¼Œä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢ï¼ˆbetwwnã€&gt;ã€&lt;ã€â€¦ï¼‰ æ— æ³•åˆ©ç”¨ç´¢å¼•å®Œæˆæ’åºæ“ä½œ æŸ¥è¯¢æ•ˆç‡é«˜ï¼Œé€šå¸¸åªéœ€è¦ä¸€æ¬¡æ£€ç´¢å°±å¯ä»¥äº†ï¼Œæ•ˆç‡é€šå¸¸è¦é«˜äº B+Tree ç´¢å¼• å­˜å‚¨å¼•æ“æ”¯æŒï¼š Memory InnoDB: å…·æœ‰è‡ªé€‚åº”hashåŠŸèƒ½ï¼Œhashç´¢å¼•æ˜¯å­˜å‚¨å¼•æ“æ ¹æ® B+Tree ç´¢å¼•åœ¨æŒ‡å®šæ¡ä»¶ä¸‹è‡ªåŠ¨æ„å»ºçš„ é¢è¯•é¢˜ ä¸ºä»€ä¹ˆ InnoDB å­˜å‚¨å¼•æ“é€‰æ‹©ä½¿ç”¨ B+Tree ç´¢å¼•ç»“æ„ï¼Ÿ ç›¸å¯¹äºäºŒå‰æ ‘ï¼Œå±‚çº§æ›´å°‘ï¼Œæœç´¢æ•ˆç‡é«˜ å¯¹äº B-Treeï¼Œæ— è®ºæ˜¯å¶å­èŠ‚ç‚¹è¿˜æ˜¯éå¶å­èŠ‚ç‚¹ï¼Œéƒ½ä¼šä¿å­˜æ•°æ®ï¼Œè¿™æ ·å¯¼è‡´ä¸€é¡µä¸­å­˜å‚¨çš„é”®å€¼å‡å°‘ï¼ŒæŒ‡é’ˆä¹Ÿè·Ÿç€å‡å°‘ï¼Œè¦åŒæ ·ä¿å­˜å¤§é‡æ•°æ®ï¼Œåªèƒ½å¢åŠ æ ‘çš„é«˜åº¦ï¼Œå¯¼è‡´æ€§èƒ½é™ä½ ç›¸å¯¹äº Hash ç´¢å¼•ï¼ŒB+Tree æ”¯æŒèŒƒå›´åŒ¹é…åŠæ’åºæ“ä½œ ç´¢å¼•åˆ†ç±» åˆ†ç±» å«ä¹‰ ç‰¹ç‚¹ å…³é”®å­— ä¸»é”®ç´¢å¼• é’ˆå¯¹äºè¡¨ä¸­ä¸»é”®åˆ›å»ºçš„ç´¢å¼• é»˜è®¤è‡ªåŠ¨åˆ›å»ºï¼Œåªèƒ½æœ‰ä¸€ä¸ª PRIMARY å”¯ä¸€ç´¢å¼• é¿å…åŒä¸€ä¸ªè¡¨ä¸­æŸæ•°æ®åˆ—ä¸­çš„å€¼é‡å¤ å¯ä»¥æœ‰å¤šä¸ª UNIQUE å¸¸è§„ç´¢å¼• å¿«é€Ÿå®šä½ç‰¹å®šæ•°æ® å¯ä»¥æœ‰å¤šä¸ª å…¨æ–‡ç´¢å¼• å…¨æ–‡ç´¢å¼•æŸ¥æ‰¾çš„æ˜¯æ–‡æœ¬ä¸­çš„å…³é”®è¯ï¼Œè€Œä¸æ˜¯æ¯”è¾ƒç´¢å¼•ä¸­çš„å€¼ å¯ä»¥æœ‰å¤šä¸ª FULLTEXT åœ¨ InnoDB å­˜å‚¨å¼•æ“ä¸­ï¼Œæ ¹æ®ç´¢å¼•çš„å­˜å‚¨å½¢å¼ï¼Œåˆå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š åˆ†ç±» å«ä¹‰ ç‰¹ç‚¹ èšé›†ç´¢å¼•(Clustered Index) å°†æ•°æ®å­˜å‚¨ä¸ç´¢å¼•æ”¾ä¸€å—ï¼Œç´¢å¼•ç»“æ„çš„å¶å­èŠ‚ç‚¹ä¿å­˜äº†è¡Œæ•°æ® å¿…é¡»æœ‰ï¼Œè€Œä¸”åªæœ‰ä¸€ä¸ª äºŒçº§ç´¢å¼•(Secondary Index) å°†æ•°æ®ä¸ç´¢å¼•åˆ†å¼€å­˜å‚¨ï¼Œç´¢å¼•ç»“æ„çš„å¶å­èŠ‚ç‚¹å…³è”çš„æ˜¯å¯¹åº”çš„ä¸»é”® å¯ä»¥å­˜åœ¨å¤šä¸ª æ¼”ç¤ºå›¾ï¼š èšé›†ç´¢å¼•é€‰å–è§„åˆ™ï¼š å¦‚æœå­˜åœ¨ä¸»é”®ï¼Œä¸»é”®ç´¢å¼•å°±æ˜¯èšé›†ç´¢å¼• å¦‚æœä¸å­˜åœ¨ä¸»é”®ï¼Œå°†ä½¿ç”¨ç¬¬ä¸€ä¸ªå”¯ä¸€(UNIQUE)ç´¢å¼•ä½œä¸ºèšé›†ç´¢å¼• å¦‚æœè¡¨æ²¡æœ‰ä¸»é”®æˆ–æ²¡æœ‰åˆé€‚çš„å”¯ä¸€ç´¢å¼•ï¼Œåˆ™ InnoDB ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª rowid ä½œä¸ºéšè—çš„èšé›†ç´¢å¼• æ€è€ƒé¢˜1. ä»¥ä¸‹ SQL è¯­å¥ï¼Œå“ªä¸ªæ‰§è¡Œæ•ˆç‡é«˜ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ 123select * from user where id = 10;select * from user where name = 'Arm';-- å¤‡æ³¨ï¼šidä¸ºä¸»é”®ï¼Œnameå­—æ®µåˆ›å»ºçš„æœ‰ç´¢å¼• ç­”ï¼šç¬¬ä¸€æ¡è¯­å¥ï¼Œå› ä¸ºç¬¬äºŒæ¡éœ€è¦å›è¡¨æŸ¥è¯¢ï¼Œç›¸å½“äºä¸¤ä¸ªæ­¥éª¤ã€‚ 2. InnoDB ä¸»é”®ç´¢å¼•çš„ B+Tree é«˜åº¦ä¸ºå¤šå°‘ï¼Ÿ ç­”ï¼šå‡è®¾ä¸€è¡Œæ•°æ®å¤§å°ä¸º1kï¼Œä¸€é¡µä¸­å¯ä»¥å­˜å‚¨16è¡Œè¿™æ ·çš„æ•°æ®ã€‚InnoDB çš„æŒ‡é’ˆå ç”¨6ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œä¸»é”®å‡è®¾ä¸ºbigintï¼Œå ç”¨å­—èŠ‚æ•°ä¸º8.å¯å¾—å…¬å¼ï¼šn * 8 + (n + 1) * 6 = 16 * 1024ï¼Œå…¶ä¸­ 8 è¡¨ç¤º bigint å ç”¨çš„å­—èŠ‚æ•°ï¼Œn è¡¨ç¤ºå½“å‰èŠ‚ç‚¹å­˜å‚¨çš„keyçš„æ•°é‡ï¼Œ(n + 1) è¡¨ç¤ºæŒ‡é’ˆæ•°é‡ï¼ˆæ¯”keyå¤šä¸€ä¸ªï¼‰ã€‚ç®—å‡ºnçº¦ä¸º1170ã€‚ å¦‚æœæ ‘çš„é«˜åº¦ä¸º2ï¼Œé‚£ä¹ˆä»–èƒ½å­˜å‚¨çš„æ•°æ®é‡å¤§æ¦‚ä¸ºï¼š1171 * 16 = 18736ï¼›å¦‚æœæ ‘çš„é«˜åº¦ä¸º3ï¼Œé‚£ä¹ˆä»–èƒ½å­˜å‚¨çš„æ•°æ®é‡å¤§æ¦‚ä¸ºï¼š1171 * 1171 * 16 = 21939856ã€‚ å¦å¤–ï¼Œå¦‚æœæœ‰æˆåƒä¸Šä¸‡çš„æ•°æ®ï¼Œé‚£ä¹ˆå°±è¦è€ƒè™‘åˆ†è¡¨ï¼Œæ¶‰åŠè¿ç»´ç¯‡çŸ¥è¯†ã€‚ è¯­æ³•åˆ›å»ºç´¢å¼•ï¼šCREATE [ UNIQUE | FULLTEXT ] INDEX index_name ON table_name (index_col_name, ...);å¦‚æœä¸åŠ  CREATE åé¢ä¸åŠ ç´¢å¼•ç±»å‹å‚æ•°ï¼Œåˆ™åˆ›å»ºçš„æ˜¯å¸¸è§„ç´¢å¼• æŸ¥çœ‹ç´¢å¼•ï¼šSHOW INDEX FROM table_name; åˆ é™¤ç´¢å¼•ï¼šDROP INDEX index_name ON table_name; æ¡ˆä¾‹ï¼š 1234567891011-- nameå­—æ®µä¸ºå§“åå­—æ®µï¼Œè¯¥å­—æ®µçš„å€¼å¯èƒ½ä¼šé‡å¤ï¼Œä¸ºè¯¥å­—æ®µåˆ›å»ºç´¢å¼•create index idx_user_name on tb_user(name);-- phoneæ‰‹æœºå·å­—æ®µçš„å€¼éç©ºï¼Œä¸”å”¯ä¸€ï¼Œä¸ºè¯¥å­—æ®µåˆ›å»ºå”¯ä¸€ç´¢å¼•create unique index idx_user_phone on tb_user (phone);-- ä¸ºprofession, age, statusåˆ›å»ºè”åˆç´¢å¼•create index idx_user_pro_age_stat on tb_user(profession, age, status);-- ä¸ºemailå»ºç«‹åˆé€‚çš„ç´¢å¼•æ¥æå‡æŸ¥è¯¢æ•ˆç‡create index idx_user_email on tb_user(email);-- åˆ é™¤ç´¢å¼•drop index idx_user_email on tb_user; ä½¿ç”¨è§„åˆ™æœ€å·¦å‰ç¼€æ³•åˆ™å¦‚æœç´¢å¼•å…³è”äº†å¤šåˆ—ï¼ˆè”åˆç´¢å¼•ï¼‰ï¼Œè¦éµå®ˆæœ€å·¦å‰ç¼€æ³•åˆ™ï¼Œæœ€å·¦å‰ç¼€æ³•åˆ™æŒ‡çš„æ˜¯æŸ¥è¯¢ä»ç´¢å¼•çš„æœ€å·¦åˆ—å¼€å§‹ï¼Œå¹¶ä¸”ä¸è·³è¿‡ç´¢å¼•ä¸­çš„åˆ—ã€‚å¦‚æœè·³è·ƒæŸä¸€åˆ—ï¼Œç´¢å¼•å°†éƒ¨åˆ†å¤±æ•ˆï¼ˆåé¢çš„å­—æ®µç´¢å¼•å¤±æ•ˆï¼‰ã€‚ è”åˆç´¢å¼•ä¸­ï¼Œå‡ºç°èŒƒå›´æŸ¥è¯¢ï¼ˆ&lt;, &gt;ï¼‰ï¼ŒèŒƒå›´æŸ¥è¯¢å³ä¾§çš„åˆ—ç´¢å¼•å¤±æ•ˆã€‚å¯ä»¥ç”¨&gt;=æˆ–è€…&lt;=æ¥è§„é¿ç´¢å¼•å¤±æ•ˆé—®é¢˜ã€‚ ç´¢å¼•å¤±æ•ˆæƒ…å†µ åœ¨ç´¢å¼•åˆ—ä¸Šè¿›è¡Œè¿ç®—æ“ä½œï¼Œç´¢å¼•å°†å¤±æ•ˆã€‚å¦‚ï¼šexplain select * from tb_user where substring(phone, 10, 2) = '15'; å­—ç¬¦ä¸²ç±»å‹å­—æ®µä½¿ç”¨æ—¶ï¼Œä¸åŠ å¼•å·ï¼Œç´¢å¼•å°†å¤±æ•ˆã€‚å¦‚ï¼šexplain select * from tb_user where phone = 17799990015;ï¼Œæ­¤å¤„phoneçš„å€¼æ²¡æœ‰åŠ å¼•å· æ¨¡ç³ŠæŸ¥è¯¢ä¸­ï¼Œå¦‚æœä»…ä»…æ˜¯å°¾éƒ¨æ¨¡ç³ŠåŒ¹é…ï¼Œç´¢å¼•ä¸ä¼šæ˜¯å¤±æ•ˆï¼›å¦‚æœæ˜¯å¤´éƒ¨æ¨¡ç³ŠåŒ¹é…ï¼Œç´¢å¼•å¤±æ•ˆã€‚å¦‚ï¼šexplain select * from tb_user where profession like '%å·¥ç¨‹';ï¼Œå‰åéƒ½æœ‰ % ä¹Ÿä¼šå¤±æ•ˆã€‚ ç”¨ or åˆ†å‰²å¼€çš„æ¡ä»¶ï¼Œå¦‚æœ or å…¶ä¸­ä¸€ä¸ªæ¡ä»¶çš„åˆ—æ²¡æœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆæ¶‰åŠçš„ç´¢å¼•éƒ½ä¸ä¼šè¢«ç”¨åˆ°ã€‚ å¦‚æœ MySQL è¯„ä¼°ä½¿ç”¨ç´¢å¼•æ¯”å…¨è¡¨æ›´æ…¢ï¼Œåˆ™ä¸ä½¿ç”¨ç´¢å¼•ã€‚ SQL æç¤ºæ˜¯ä¼˜åŒ–æ•°æ®åº“çš„ä¸€ä¸ªé‡è¦æ‰‹æ®µï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯åœ¨SQLè¯­å¥ä¸­åŠ å…¥ä¸€äº›äººä¸ºçš„æç¤ºæ¥è¾¾åˆ°ä¼˜åŒ–æ“ä½œçš„ç›®çš„ã€‚ ä¾‹å¦‚ï¼Œä½¿ç”¨ç´¢å¼•ï¼šexplain select * from tb_user use index(idx_user_pro) where profession=&quot;è½¯ä»¶å·¥ç¨‹&quot;;ä¸ä½¿ç”¨å“ªä¸ªç´¢å¼•ï¼šexplain select * from tb_user ignore index(idx_user_pro) where profession=&quot;è½¯ä»¶å·¥ç¨‹&quot;;å¿…é¡»ä½¿ç”¨å“ªä¸ªç´¢å¼•ï¼šexplain select * from tb_user force index(idx_user_pro) where profession=&quot;è½¯ä»¶å·¥ç¨‹&quot;; use æ˜¯å»ºè®®ï¼Œå®é™…ä½¿ç”¨å“ªä¸ªç´¢å¼• MySQL è¿˜ä¼šè‡ªå·±æƒè¡¡è¿è¡Œé€Ÿåº¦å»æ›´æ”¹ï¼Œforceå°±æ˜¯æ— è®ºå¦‚ä½•éƒ½å¼ºåˆ¶ä½¿ç”¨è¯¥ç´¢å¼•ã€‚ è¦†ç›–ç´¢å¼•&amp;å›è¡¨æŸ¥è¯¢å°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼ˆæŸ¥è¯¢ä½¿ç”¨äº†ç´¢å¼•ï¼Œå¹¶ä¸”éœ€è¦è¿”å›çš„åˆ—ï¼Œåœ¨è¯¥ç´¢å¼•ä¸­å·²ç»å…¨éƒ¨èƒ½æ‰¾åˆ°ï¼‰ï¼Œå‡å°‘ select *ã€‚ explain ä¸­ extra å­—æ®µå«ä¹‰ï¼šusing index conditionï¼šæŸ¥æ‰¾ä½¿ç”¨äº†ç´¢å¼•ï¼Œä½†æ˜¯éœ€è¦å›è¡¨æŸ¥è¯¢æ•°æ®using where; using index;ï¼šæŸ¥æ‰¾ä½¿ç”¨äº†ç´¢å¼•ï¼Œä½†æ˜¯éœ€è¦çš„æ•°æ®éƒ½åœ¨ç´¢å¼•åˆ—ä¸­èƒ½æ‰¾åˆ°ï¼Œæ‰€ä»¥ä¸éœ€è¦å›è¡¨æŸ¥è¯¢ å¦‚æœåœ¨èšé›†ç´¢å¼•ä¸­ç›´æ¥èƒ½æ‰¾åˆ°å¯¹åº”çš„è¡Œï¼Œåˆ™ç›´æ¥è¿”å›è¡Œæ•°æ®ï¼Œåªéœ€è¦ä¸€æ¬¡æŸ¥è¯¢ï¼Œå“ªæ€•æ˜¯select *ï¼›å¦‚æœåœ¨è¾…åŠ©ç´¢å¼•ä¸­æ‰¾èšé›†ç´¢å¼•ï¼Œå¦‚select id, name from xxx where name='xxx';ï¼Œä¹Ÿåªéœ€è¦é€šè¿‡è¾…åŠ©ç´¢å¼•(name)æŸ¥æ‰¾åˆ°å¯¹åº”çš„idï¼Œè¿”å›nameå’Œnameç´¢å¼•å¯¹åº”çš„idå³å¯ï¼Œåªéœ€è¦ä¸€æ¬¡æŸ¥è¯¢ï¼›å¦‚æœæ˜¯é€šè¿‡è¾…åŠ©ç´¢å¼•æŸ¥æ‰¾å…¶ä»–å­—æ®µï¼Œåˆ™éœ€è¦å›è¡¨æŸ¥è¯¢ï¼Œå¦‚select id, name, gender from xxx where name='xxx'; æ‰€ä»¥å°½é‡ä¸è¦ç”¨select *ï¼Œå®¹æ˜“å‡ºç°å›è¡¨æŸ¥è¯¢ï¼Œé™ä½æ•ˆç‡ï¼Œé™¤éæœ‰è”åˆç´¢å¼•åŒ…å«äº†æ‰€æœ‰å­—æ®µ é¢è¯•é¢˜ï¼šä¸€å¼ è¡¨ï¼Œæœ‰å››ä¸ªå­—æ®µï¼ˆid, username, password, statusï¼‰ï¼Œç”±äºæ•°æ®é‡å¤§ï¼Œéœ€è¦å¯¹ä»¥ä¸‹SQLè¯­å¥è¿›è¡Œä¼˜åŒ–ï¼Œè¯¥å¦‚ä½•è¿›è¡Œæ‰æ˜¯æœ€ä¼˜æ–¹æ¡ˆï¼šselect id, username, password from tb_user where username='itcast'; è§£ï¼šç»™usernameå’Œpasswordå­—æ®µå»ºç«‹è”åˆç´¢å¼•ï¼Œåˆ™ä¸éœ€è¦å›è¡¨æŸ¥è¯¢ï¼Œç›´æ¥è¦†ç›–ç´¢å¼• å‰ç¼€ç´¢å¼•å½“å­—æ®µç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼ˆvarchar, textç­‰ï¼‰æ—¶ï¼Œæœ‰æ—¶å€™éœ€è¦ç´¢å¼•å¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œè¿™ä¼šè®©ç´¢å¼•å˜å¾—å¾ˆå¤§ï¼ŒæŸ¥è¯¢æ—¶ï¼Œæµªè´¹å¤§é‡çš„ç£ç›˜IOï¼Œå½±å“æŸ¥è¯¢æ•ˆç‡ï¼Œæ­¤æ—¶å¯ä»¥åªé™å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†å‰ç¼€ï¼Œå»ºç«‹ç´¢å¼•ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§èŠ‚çº¦ç´¢å¼•ç©ºé—´ï¼Œä»è€Œæé«˜ç´¢å¼•æ•ˆç‡ã€‚ è¯­æ³•ï¼šcreate index idx_xxxx on table_name(columnn(n));å‰ç¼€é•¿åº¦ï¼šå¯ä»¥æ ¹æ®ç´¢å¼•çš„é€‰æ‹©æ€§æ¥å†³å®šï¼Œè€Œé€‰æ‹©æ€§æ˜¯æŒ‡ä¸é‡å¤çš„ç´¢å¼•å€¼ï¼ˆåŸºæ•°ï¼‰å’Œæ•°æ®è¡¨çš„è®°å½•æ€»æ•°çš„æ¯”å€¼ï¼Œç´¢å¼•é€‰æ‹©æ€§è¶Šé«˜åˆ™æŸ¥è¯¢æ•ˆç‡è¶Šé«˜ï¼Œå”¯ä¸€ç´¢å¼•çš„é€‰æ‹©æ€§æ˜¯1ï¼Œè¿™æ˜¯æœ€å¥½çš„ç´¢å¼•é€‰æ‹©æ€§ï¼Œæ€§èƒ½ä¹Ÿæ˜¯æœ€å¥½çš„ã€‚æ±‚é€‰æ‹©æ€§å…¬å¼ï¼š 12select count(distinct email) / count(*) from tb_user;select count(distinct substring(email, 1, 5)) / count(*) from tb_user; show index é‡Œé¢çš„sub_partå¯ä»¥çœ‹åˆ°æ¥å–çš„é•¿åº¦ å•åˆ—ç´¢å¼•&amp;è”åˆç´¢å¼•å•åˆ—ç´¢å¼•ï¼šå³ä¸€ä¸ªç´¢å¼•åªåŒ…å«å•ä¸ªåˆ—è”åˆç´¢å¼•ï¼šå³ä¸€ä¸ªç´¢å¼•åŒ…å«äº†å¤šä¸ªåˆ—åœ¨ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œè€ƒè™‘é’ˆå¯¹äºæŸ¥è¯¢å­—æ®µå»ºç«‹ç´¢å¼•æ—¶ï¼Œå»ºè®®å»ºç«‹è”åˆç´¢å¼•ï¼Œè€Œéå•åˆ—ç´¢å¼•ã€‚ å•åˆ—ç´¢å¼•æƒ…å†µï¼šexplain select id, phone, name from tb_user where phone = '17799990010' and name = 'éŸ©ä¿¡';è¿™å¥åªä¼šç”¨åˆ°phoneç´¢å¼•å­—æ®µ æ³¨æ„äº‹é¡¹ å¤šæ¡ä»¶è”åˆæŸ¥è¯¢æ—¶ï¼ŒMySQLä¼˜åŒ–å™¨ä¼šè¯„ä¼°å“ªä¸ªå­—æ®µçš„ç´¢å¼•æ•ˆç‡æ›´é«˜ï¼Œä¼šé€‰æ‹©è¯¥ç´¢å¼•å®Œæˆæœ¬æ¬¡æŸ¥è¯¢ è®¾è®¡åŸåˆ™ é’ˆå¯¹äºæ•°æ®é‡è¾ƒå¤§ï¼Œä¸”æŸ¥è¯¢æ¯”è¾ƒé¢‘ç¹çš„è¡¨å»ºç«‹ç´¢å¼• é’ˆå¯¹äºå¸¸ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ï¼ˆwhereï¼‰ã€æ’åºï¼ˆorder byï¼‰ã€åˆ†ç»„ï¼ˆgroup byï¼‰æ“ä½œçš„å­—æ®µå»ºç«‹ç´¢å¼• å°½é‡é€‰æ‹©åŒºåˆ†åº¦é«˜çš„åˆ—ä½œä¸ºç´¢å¼•ï¼Œå°½é‡å»ºç«‹å”¯ä¸€ç´¢å¼•ï¼ŒåŒºåˆ†åº¦è¶Šé«˜ï¼Œä½¿ç”¨ç´¢å¼•çš„æ•ˆç‡è¶Šé«˜ å¦‚æœæ˜¯å­—ç¬¦ä¸²ç±»å‹çš„å­—æ®µï¼Œå­—æ®µé•¿åº¦è¾ƒé•¿ï¼Œå¯ä»¥é’ˆå¯¹äºå­—æ®µçš„ç‰¹ç‚¹ï¼Œå»ºç«‹å‰ç¼€ç´¢å¼• å°½é‡ä½¿ç”¨è”åˆç´¢å¼•ï¼Œå‡å°‘å•åˆ—ç´¢å¼•ï¼ŒæŸ¥è¯¢æ—¶ï¼Œè”åˆç´¢å¼•å¾ˆå¤šæ—¶å€™å¯ä»¥è¦†ç›–ç´¢å¼•ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œé¿å…å›è¡¨ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ è¦æ§åˆ¶ç´¢å¼•çš„æ•°é‡ï¼Œç´¢å¼•å¹¶ä¸æ˜¯å¤šå¤šç›Šå–„ï¼Œç´¢å¼•è¶Šå¤šï¼Œç»´æŠ¤ç´¢å¼•ç»“æ„çš„ä»£ä»·å°±è¶Šå¤§ï¼Œä¼šå½±å“å¢åˆ æ”¹çš„æ•ˆç‡ å¦‚æœç´¢å¼•åˆ—ä¸èƒ½å­˜å‚¨NULLå€¼ï¼Œè¯·åœ¨åˆ›å»ºè¡¨æ—¶ä½¿ç”¨NOT NULLçº¦æŸå®ƒã€‚å½“ä¼˜åŒ–å™¨çŸ¥é“æ¯åˆ—æ˜¯å¦åŒ…å«NULLå€¼æ—¶ï¼Œå®ƒå¯ä»¥æ›´å¥½åœ°ç¡®å®šå“ªä¸ªç´¢å¼•æœ€æœ‰æ•ˆåœ°ç”¨äºæŸ¥è¯¢ SQL ä¼˜åŒ–æ’å…¥æ•°æ®æ™®é€šæ’å…¥ï¼š é‡‡ç”¨æ‰¹é‡æ’å…¥ï¼ˆä¸€æ¬¡æ’å…¥çš„æ•°æ®ä¸å»ºè®®è¶…è¿‡1000æ¡ï¼‰ æ‰‹åŠ¨æäº¤äº‹åŠ¡ ä¸»é”®é¡ºåºæ’å…¥ å¤§æ‰¹é‡æ’å…¥ï¼šå¦‚æœä¸€æ¬¡æ€§éœ€è¦æ’å…¥å¤§æ‰¹é‡æ•°æ®ï¼Œä½¿ç”¨insertè¯­å¥æ’å…¥æ€§èƒ½è¾ƒä½ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨MySQLæ•°æ®åº“æä¾›çš„loadæŒ‡ä»¤æ’å…¥ã€‚ 1234567# å®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯æ—¶ï¼ŒåŠ ä¸Šå‚æ•° --local-infileï¼ˆè¿™ä¸€è¡Œåœ¨bash/cmdç•Œé¢è¾“å…¥ï¼‰mysql --local-infile -u root -p# è®¾ç½®å…¨å±€å‚æ•°local_infileä¸º1ï¼Œå¼€å¯ä»æœ¬åœ°åŠ è½½æ–‡ä»¶å¯¼å…¥æ•°æ®çš„å¼€å…³set global local_infile = 1;select @@local_infile;# æ‰§è¡ŒloadæŒ‡ä»¤å°†å‡†å¤‡å¥½çš„æ•°æ®ï¼ŒåŠ è½½åˆ°è¡¨ç»“æ„ä¸­load data local infile '/root/sql1.log' into table 'tb_user' fields terminated by ',' lines terminated by '\\n'; ä¸»é”®ä¼˜åŒ–æ•°æ®ç»„ç»‡æ–¹å¼ï¼šåœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œè¡¨æ•°æ®éƒ½æ˜¯æ ¹æ®ä¸»é”®é¡ºåºç»„ç»‡å­˜æ”¾çš„ï¼Œè¿™ç§å­˜å‚¨æ–¹å¼çš„è¡¨ç§°ä¸ºç´¢å¼•ç»„ç»‡è¡¨ï¼ˆIndex organized table, IOTï¼‰ é¡µåˆ†è£‚ï¼šé¡µå¯ä»¥ä¸ºç©ºï¼Œä¹Ÿå¯ä»¥å¡«å……ä¸€èˆ¬ï¼Œä¹Ÿå¯ä»¥å¡«å……100%ï¼Œæ¯ä¸ªé¡µåŒ…å«äº†2-Nè¡Œæ•°æ®ï¼ˆå¦‚æœä¸€è¡Œæ•°æ®è¿‡å¤§ï¼Œä¼šè¡Œæº¢å‡ºï¼‰ï¼Œæ ¹æ®ä¸»é”®æ’åˆ—ã€‚é¡µåˆå¹¶ï¼šå½“åˆ é™¤ä¸€è¡Œè®°å½•æ—¶ï¼Œå®é™…ä¸Šè®°å½•å¹¶æ²¡æœ‰è¢«ç‰©ç†åˆ é™¤ï¼Œåªæ˜¯è®°å½•è¢«æ ‡è®°ï¼ˆflagedï¼‰ä¸ºåˆ é™¤å¹¶ä¸”å®ƒçš„ç©ºé—´å˜å¾—å…è®¸è¢«å…¶ä»–è®°å½•å£°æ˜ä½¿ç”¨ã€‚å½“é¡µä¸­åˆ é™¤çš„è®°å½•åˆ°è¾¾ MERGE_THRESHOLDï¼ˆé»˜è®¤ä¸ºé¡µçš„50%ï¼‰ï¼ŒInnoDBä¼šå¼€å§‹å¯»æ‰¾æœ€é è¿‘çš„é¡µï¼ˆå‰åï¼‰çœ‹çœ‹æ˜¯å¦å¯ä»¥å°†è¿™ä¸¤ä¸ªé¡µåˆå¹¶ä»¥ä¼˜åŒ–ç©ºé—´ä½¿ç”¨ã€‚ MERGE_THRESHOLDï¼šåˆå¹¶é¡µçš„é˜ˆå€¼ï¼Œå¯ä»¥è‡ªå·±è®¾ç½®ï¼Œåœ¨åˆ›å»ºè¡¨æˆ–åˆ›å»ºç´¢å¼•æ—¶æŒ‡å®š æ–‡å­—è¯´æ˜ä¸å¤Ÿæ¸…æ™°æ˜äº†ï¼Œå…·ä½“å¯ä»¥çœ‹è§†é¢‘é‡Œçš„PPTæ¼”ç¤ºè¿‡ç¨‹ï¼šhttps://www.bilibili.com/video/BV1Kr4y1i7ru?p=90 ä¸»é”®è®¾è®¡åŸåˆ™ï¼š æ»¡è¶³ä¸šåŠ¡éœ€æ±‚çš„æƒ…å†µä¸‹ï¼Œå°½é‡é™ä½ä¸»é”®çš„é•¿åº¦ æ’å…¥æ•°æ®æ—¶ï¼Œå°½é‡é€‰æ‹©é¡ºåºæ’å…¥ï¼Œé€‰æ‹©ä½¿ç”¨ AUTO_INCREMENT è‡ªå¢ä¸»é”® å°½é‡ä¸è¦ä½¿ç”¨ UUID åšä¸»é”®æˆ–è€…æ˜¯å…¶ä»–çš„è‡ªç„¶ä¸»é”®ï¼Œå¦‚èº«ä»½è¯å· ä¸šåŠ¡æ“ä½œæ—¶ï¼Œé¿å…å¯¹ä¸»é”®çš„ä¿®æ”¹ order byä¼˜åŒ– Using filesortï¼šé€šè¿‡è¡¨çš„ç´¢å¼•æˆ–å…¨è¡¨æ‰«æï¼Œè¯»å–æ»¡è¶³æ¡ä»¶çš„æ•°æ®è¡Œï¼Œç„¶ååœ¨æ’åºç¼“å†²åŒº sort buffer ä¸­å®Œæˆæ’åºæ“ä½œï¼Œæ‰€æœ‰ä¸æ˜¯é€šè¿‡ç´¢å¼•ç›´æ¥è¿”å›æ’åºç»“æœçš„æ’åºéƒ½å« FileSort æ’åº Using indexï¼šé€šè¿‡æœ‰åºç´¢å¼•é¡ºåºæ‰«æç›´æ¥è¿”å›æœ‰åºæ•°æ®ï¼Œè¿™ç§æƒ…å†µå³ä¸º using indexï¼Œä¸éœ€è¦é¢å¤–æ’åºï¼Œæ“ä½œæ•ˆç‡é«˜ å¦‚æœorder byå­—æ®µå…¨éƒ¨ä½¿ç”¨å‡åºæ’åºæˆ–è€…é™åºæ’åºï¼Œåˆ™éƒ½ä¼šèµ°ç´¢å¼•ï¼Œä½†æ˜¯å¦‚æœä¸€ä¸ªå­—æ®µå‡åºæ’åºï¼Œå¦ä¸€ä¸ªå­—æ®µé™åºæ’åºï¼Œåˆ™ä¸ä¼šèµ°ç´¢å¼•ï¼Œexplainçš„extraä¿¡æ¯æ˜¾ç¤ºçš„æ˜¯Using index, Using filesortï¼Œå¦‚æœè¦ä¼˜åŒ–æ‰Using filesortï¼Œåˆ™éœ€è¦å¦å¤–å†åˆ›å»ºä¸€ä¸ªç´¢å¼•ï¼Œå¦‚ï¼šcreate index idx_user_age_phone_ad on tb_user(age asc, phone desc);ï¼Œæ­¤æ—¶ä½¿ç”¨select id, age, phone from tb_user order by age asc, phone desc;ä¼šå…¨éƒ¨èµ°ç´¢å¼• æ€»ç»“ï¼š æ ¹æ®æ’åºå­—æ®µå»ºç«‹åˆé€‚çš„ç´¢å¼•ï¼Œå¤šå­—æ®µæ’åºæ—¶ï¼Œä¹Ÿéµå¾ªæœ€å·¦å‰ç¼€æ³•åˆ™ å°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼• å¤šå­—æ®µæ’åºï¼Œä¸€ä¸ªå‡åºä¸€ä¸ªé™åºï¼Œæ­¤æ—¶éœ€è¦æ³¨æ„è”åˆç´¢å¼•åœ¨åˆ›å»ºæ—¶çš„è§„åˆ™ï¼ˆASC/DESCï¼‰ å¦‚æœä¸å¯é¿å…å‡ºç°filesortï¼Œå¤§æ•°æ®é‡æ’åºæ—¶ï¼Œå¯ä»¥é€‚å½“å¢å¤§æ’åºç¼“å†²åŒºå¤§å° sort_buffer_sizeï¼ˆé»˜è®¤256kï¼‰ group byä¼˜åŒ– åœ¨åˆ†ç»„æ“ä½œæ—¶ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•æ¥æé«˜æ•ˆç‡ åˆ†ç»„æ“ä½œæ—¶ï¼Œç´¢å¼•çš„ä½¿ç”¨ä¹Ÿæ˜¯æ»¡è¶³æœ€å·¦å‰ç¼€æ³•åˆ™çš„ å¦‚ç´¢å¼•ä¸ºidx_user_pro_age_statï¼Œåˆ™å¥å¼å¯ä»¥æ˜¯select ... where profession order by ageï¼Œè¿™æ ·ä¹Ÿç¬¦åˆæœ€å·¦å‰ç¼€æ³•åˆ™ limitä¼˜åŒ–å¸¸è§çš„é—®é¢˜å¦‚limit 2000000, 10ï¼Œæ­¤æ—¶éœ€è¦ MySQL æ’åºå‰2000000æ¡è®°å½•ï¼Œä½†ä»…ä»…è¿”å›2000000 - 2000010çš„è®°å½•ï¼Œå…¶ä»–è®°å½•ä¸¢å¼ƒï¼ŒæŸ¥è¯¢æ’åºçš„ä»£ä»·éå¸¸å¤§ã€‚ä¼˜åŒ–æ–¹æ¡ˆï¼šä¸€èˆ¬åˆ†é¡µæŸ¥è¯¢æ—¶ï¼Œé€šè¿‡åˆ›å»ºè¦†ç›–ç´¢å¼•èƒ½å¤Ÿæ¯”è¾ƒå¥½åœ°æé«˜æ€§èƒ½ï¼Œå¯ä»¥é€šè¿‡è¦†ç›–ç´¢å¼•åŠ å­æŸ¥è¯¢å½¢å¼è¿›è¡Œä¼˜åŒ– ä¾‹å¦‚ï¼š 12345678-- æ­¤è¯­å¥è€—æ—¶å¾ˆé•¿select * from tb_sku limit 9000000, 10;-- é€šè¿‡è¦†ç›–ç´¢å¼•åŠ å¿«é€Ÿåº¦ï¼Œç›´æ¥é€šè¿‡ä¸»é”®ç´¢å¼•è¿›è¡Œæ’åºåŠæŸ¥è¯¢select id from tb_sku order by id limit 9000000, 10;-- ä¸‹é¢çš„è¯­å¥æ˜¯é”™è¯¯çš„ï¼Œå› ä¸º MySQL ä¸æ”¯æŒ in é‡Œé¢ä½¿ç”¨ limit-- select * from tb_sku where id in (select id from tb_sku order by id limit 9000000, 10);-- é€šè¿‡è¿è¡¨æŸ¥è¯¢å³å¯å®ç°ç¬¬ä¸€å¥çš„æ•ˆæœï¼Œå¹¶ä¸”èƒ½è¾¾åˆ°ç¬¬äºŒå¥çš„é€Ÿåº¦select * from tb_sku as s, (select id from tb_sku order by id limit 9000000, 10) as a where s.id = a.id; countä¼˜åŒ–MyISAM å¼•æ“æŠŠä¸€ä¸ªè¡¨çš„æ€»è¡Œæ•°å­˜åœ¨äº†ç£ç›˜ä¸Šï¼Œå› æ­¤æ‰§è¡Œ count(*) çš„æ—¶å€™ä¼šç›´æ¥è¿”å›è¿™ä¸ªæ•°ï¼Œæ•ˆç‡å¾ˆé«˜ï¼ˆå‰ææ˜¯ä¸é€‚ç”¨whereï¼‰ï¼›InnoDB åœ¨æ‰§è¡Œ count(*) æ—¶ï¼Œéœ€è¦æŠŠæ•°æ®ä¸€è¡Œä¸€è¡Œåœ°ä»å¼•æ“é‡Œé¢è¯»å‡ºæ¥ï¼Œç„¶åç´¯è®¡è®¡æ•°ã€‚ä¼˜åŒ–æ–¹æ¡ˆï¼šè‡ªå·±è®¡æ•°ï¼Œå¦‚åˆ›å»ºkey-valueè¡¨å­˜å‚¨åœ¨å†…å­˜æˆ–ç¡¬ç›˜ï¼Œæˆ–è€…æ˜¯ç”¨redis countçš„å‡ ç§ç”¨æ³•ï¼š å¦‚æœcountå‡½æ•°çš„å‚æ•°ï¼ˆcounté‡Œé¢å†™çš„é‚£ä¸ªå­—æ®µï¼‰ä¸æ˜¯NULLï¼ˆå­—æ®µå€¼ä¸ä¸ºNULLï¼‰ï¼Œç´¯è®¡å€¼å°±åŠ ä¸€ï¼Œæœ€åè¿”å›ç´¯è®¡å€¼ ç”¨æ³•ï¼šcount(*)ã€count(ä¸»é”®)ã€count(å­—æ®µ)ã€count(1) count(ä¸»é”®)è·Ÿcount(*)ä¸€æ ·ï¼Œå› ä¸ºä¸»é”®ä¸èƒ½ä¸ºç©ºï¼›count(å­—æ®µ)åªè®¡ç®—å­—æ®µå€¼ä¸ä¸ºNULLçš„è¡Œï¼›count(1)å¼•æ“ä¼šä¸ºæ¯è¡Œæ·»åŠ ä¸€ä¸ª1ï¼Œç„¶åå°±countè¿™ä¸ª1ï¼Œè¿”å›ç»“æœä¹Ÿè·Ÿcount(*)ä¸€æ ·ï¼›count(null)è¿”å›0 å„ç§ç”¨æ³•çš„æ€§èƒ½ï¼š count(ä¸»é”®)ï¼šInnoDBå¼•æ“ä¼šéå†æ•´å¼ è¡¨ï¼ŒæŠŠæ¯è¡Œçš„ä¸»é”®idå€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™æœåŠ¡å±‚ï¼ŒæœåŠ¡å±‚æ‹¿åˆ°ä¸»é”®åï¼Œç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ ï¼ˆä¸»é”®ä¸å¯èƒ½ä¸ºç©ºï¼‰ count(å­—æ®µ)ï¼šæ²¡æœ‰not nullçº¦æŸçš„è¯ï¼ŒInnoDBå¼•æ“ä¼šéå†æ•´å¼ è¡¨æŠŠæ¯ä¸€è¡Œçš„å­—æ®µå€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™æœåŠ¡å±‚ï¼ŒæœåŠ¡å±‚åˆ¤æ–­æ˜¯å¦ä¸ºnullï¼Œä¸ä¸ºnullï¼Œè®¡æ•°ç´¯åŠ ï¼›æœ‰not nullçº¦æŸçš„è¯ï¼ŒInnoDBå¼•æ“ä¼šéå†æ•´å¼ è¡¨æŠŠæ¯ä¸€è¡Œçš„å­—æ®µå€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™æœåŠ¡å±‚ï¼Œç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ  count(1)ï¼šInnoDB å¼•æ“éå†æ•´å¼ è¡¨ï¼Œä½†ä¸å–å€¼ã€‚æœåŠ¡å±‚å¯¹äºè¿”å›çš„æ¯ä¸€å±‚ï¼Œæ”¾ä¸€ä¸ªæ•°å­— 1 è¿›å»ï¼Œç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ  count(*)ï¼šInnoDB å¼•æ“å¹¶ä¸ä¼šæŠŠå…¨éƒ¨å­—æ®µå–å‡ºæ¥ï¼Œè€Œæ˜¯ä¸“é—¨åšäº†ä¼˜åŒ–ï¼Œä¸å–å€¼ï¼ŒæœåŠ¡å±‚ç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ  æŒ‰æ•ˆç‡æ’åºï¼šcount(å­—æ®µ) &lt; count(ä¸»é”®) &lt; count(1) &lt; count(*)ï¼Œæ‰€ä»¥å°½é‡ä½¿ç”¨ count(*) updateä¼˜åŒ–ï¼ˆé¿å…è¡Œé”å‡çº§ä¸ºè¡¨é”ï¼‰InnoDB çš„è¡Œé”æ˜¯é’ˆå¯¹ç´¢å¼•åŠ çš„é”ï¼Œä¸æ˜¯é’ˆå¯¹è®°å½•åŠ çš„é”ï¼Œå¹¶ä¸”è¯¥ç´¢å¼•ä¸èƒ½å¤±æ•ˆï¼Œå¦åˆ™ä¼šä»è¡Œé”å‡çº§ä¸ºè¡¨é”ã€‚ å¦‚ä»¥ä¸‹ä¸¤æ¡è¯­å¥ï¼šupdate student set no = '123' where id = 1;ï¼Œè¿™å¥ç”±äºidæœ‰ä¸»é”®ç´¢å¼•ï¼Œæ‰€ä»¥åªä¼šé”è¿™ä¸€è¡Œï¼›update student set no = '123' where name = 'test';ï¼Œè¿™å¥ç”±äºnameæ²¡æœ‰ç´¢å¼•ï¼Œæ‰€ä»¥ä¼šæŠŠæ•´å¼ è¡¨éƒ½é”ä½è¿›è¡Œæ•°æ®æ›´æ–°ï¼Œè§£å†³æ–¹æ³•æ˜¯ç»™nameå­—æ®µæ·»åŠ ç´¢å¼• æ•°æ®ç±»å‹æ•´å‹ ç±»å‹åç§° å–å€¼èŒƒå›´ å¤§å° TINYINT -128ã€œ127 1ä¸ªå­—èŠ‚ SMALLINT -32768ã€œ32767 2ä¸ªå®‡èŠ‚ MEDIUMINT -8388608ã€œ8388607 3ä¸ªå­—èŠ‚ INT (INTEGHR) -2147483648ã€œ2147483647 4ä¸ªå­—èŠ‚ BIGINT -9223372036854775808ã€œ9223372036854775807 8ä¸ªå­—èŠ‚ æ— ç¬¦å·åœ¨æ•°æ®ç±»å‹ååŠ  unsigned å…³é”®å­—ã€‚ æµ®ç‚¹å‹ ç±»å‹åç§° è¯´æ˜ å­˜å‚¨éœ€æ±‚ FLOAT å•ç²¾åº¦æµ®ç‚¹æ•° 4 ä¸ªå­—èŠ‚ DOUBLE åŒç²¾åº¦æµ®ç‚¹æ•° 8 ä¸ªå­—èŠ‚ DECIMAL (M, D)ï¼ŒDEC å‹ç¼©çš„â€œä¸¥æ ¼â€å®šç‚¹æ•° M+2 ä¸ªå­—èŠ‚ æ—¥æœŸå’Œæ—¶é—´ ç±»å‹åç§° æ—¥æœŸæ ¼å¼ æ—¥æœŸèŒƒå›´ å­˜å‚¨éœ€æ±‚ YEAR YYYY 1901 ~ 2155 1 ä¸ªå­—èŠ‚ TIME HH:MM:SS -838:59:59 ~ 838:59:59 3 ä¸ªå­—èŠ‚ DATE YYYY-MM-DD 1000-01-01 ~ 9999-12-3 3 ä¸ªå­—èŠ‚ DATETIME YYYY-MM-DD HH:MM:SS 1000-01-01 00:00:00 ~ 9999-12-31 23:59:59 8 ä¸ªå­—èŠ‚ TIMESTAMP YYYY-MM-DD HH:MM:SS 1980-01-01 00:00:01 UTC ~ 2040-01-19 03:14:07 UTC 4 ä¸ªå­—èŠ‚ å­—ç¬¦ä¸² ç±»å‹åç§° è¯´æ˜ å­˜å‚¨éœ€æ±‚ CHAR(M) å›ºå®šé•¿åº¦éäºŒè¿›åˆ¶å­—ç¬¦ä¸² M å­—èŠ‚ï¼Œ1&lt;=M&lt;=255 VARCHAR(M) å˜é•¿éäºŒè¿›åˆ¶å­—ç¬¦ä¸² L+1å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt; = Må’Œ 1&lt;=M&lt;=255 TINYTEXT éå¸¸å°çš„éäºŒè¿›åˆ¶å­—ç¬¦ä¸² L+1å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^8 TEXT å°çš„éäºŒè¿›åˆ¶å­—ç¬¦ä¸² L+2å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^16 MEDIUMTEXT ä¸­ç­‰å¤§å°çš„éäºŒè¿›åˆ¶å­—ç¬¦ä¸² L+3å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^24 LONGTEXT å¤§çš„éäºŒè¿›åˆ¶å­—ç¬¦ä¸² L+4å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^32 ENUM æšä¸¾ç±»å‹ï¼Œåªèƒ½æœ‰ä¸€ä¸ªæšä¸¾å­—ç¬¦ä¸²å€¼ 1æˆ–2ä¸ªå­—èŠ‚ï¼Œå–å†³äºæšä¸¾å€¼çš„æ•°ç›® (æœ€å¤§å€¼ä¸º65535) SET ä¸€ä¸ªè®¾ç½®ï¼Œå­—ç¬¦ä¸²å¯¹è±¡å¯ä»¥æœ‰é›¶ä¸ªæˆ– å¤šä¸ªSETæˆå‘˜ 1ã€2ã€3ã€4æˆ–8ä¸ªå­—èŠ‚ï¼Œå–å†³äºé›†åˆ æˆå‘˜çš„æ•°é‡ï¼ˆæœ€å¤š64ä¸ªæˆå‘˜ï¼‰ äºŒè¿›åˆ¶ç±»å‹ ç±»å‹åç§° è¯´æ˜ å­˜å‚¨éœ€æ±‚ BIT(M) ä½å­—æ®µç±»å‹ å¤§çº¦ (M+7)/8 å­—èŠ‚ BINARY(M) å›ºå®šé•¿åº¦äºŒè¿›åˆ¶å­—ç¬¦ä¸² M å­—èŠ‚ VARBINARY (M) å¯å˜é•¿åº¦äºŒè¿›åˆ¶å­—ç¬¦ä¸² M+1 å­—èŠ‚ TINYBLOB (M) éå¸¸å°çš„BLOB L+1 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^8 BLOB (M) å° BLOB L+2 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^16 MEDIUMBLOB (M) ä¸­ç­‰å¤§å°çš„BLOB L+3 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^24 LONGBLOB (M) éå¸¸å¤§çš„BLOB L+4 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^32 æƒé™ä¸€è§ˆè¡¨ å…·ä½“æƒé™çš„ä½œç”¨è¯¦è§å®˜æ–¹æ–‡æ¡£ GRANT å’Œ REVOKE å…è®¸çš„é™æ€æƒé™ Privilege Grant Table Column Context ALL [PRIVILEGES] Synonym for â€œall privilegesâ€ Server administration ALTER Alter_priv Tables ALTER ROUTINE Alter_routine_priv Stored routines CREATE Create_priv Databases, tables, or indexes CREATE ROLE Create_role_priv Server administration CREATE ROUTINE Create_routine_priv Stored routines CREATE TABLESPACE Create_tablespace_priv Server administration CREATE TEMPORARY TABLES Create_tmp_table_priv Tables CREATE USER Create_user_priv Server administration CREATE VIEW Create_view_priv Views DELETE Delete_priv Tables DROP Drop_priv Databases, tables, or views DROP ROLE Drop_role_priv Server administration EVENT Event_priv Databases EXECUTE Execute_priv Stored routines FILE File_priv File access on server host GRANT OPTION Grant_priv Databases, tables, or stored routines INDEX Index_priv Tables INSERT Insert_priv Tables or columns LOCK TABLES Lock_tables_priv Databases PROCESS Process_priv Server administration PROXY See proxies_priv table Server administration REFERENCES References_priv Databases or tables RELOAD Reload_priv Server administration REPLICATION CLIENT Repl_client_priv Server administration REPLICATION SLAVE Repl_slave_priv Server administration SELECT Select_priv Tables or columns SHOW DATABASES Show_db_priv Server administration SHOW VIEW Show_view_priv Views SHUTDOWN Shutdown_priv Server administration SUPER Super_priv Server administration TRIGGER Trigger_priv Tables UPDATE Update_priv Tables or columns USAGE Synonym for â€œno privilegesâ€ Server administration GRANT å’Œ REVOKE å…è®¸çš„åŠ¨æ€æƒé™ Privilege Context APPLICATION_PASSWORD_ADMIN Dual password administration AUDIT_ABORT_EXEMPT Allow queries blocked by audit log filter AUDIT_ADMIN Audit log administration AUTHENTICATION_POLICY_ADMIN Authentication administration BACKUP_ADMIN Backup administration BINLOG_ADMIN Backup and Replication administration BINLOG_ENCRYPTION_ADMIN Backup and Replication administration CLONE_ADMIN Clone administration CONNECTION_ADMIN Server administration ENCRYPTION_KEY_ADMIN Server administration FIREWALL_ADMIN Firewall administration FIREWALL_EXEMPT Firewall administration FIREWALL_USER Firewall administration FLUSH_OPTIMIZER_COSTS Server administration FLUSH_STATUS Server administration FLUSH_TABLES Server administration FLUSH_USER_RESOURCES Server administration GROUP_REPLICATION_ADMIN Replication administration GROUP_REPLICATION_STREAM Replication administration INNODB_REDO_LOG_ARCHIVE Redo log archiving administration NDB_STORED_USER NDB Cluster PASSWORDLESS_USER_ADMIN Authentication administration PERSIST_RO_VARIABLES_ADMIN Server administration REPLICATION_APPLIER PRIVILEGE_CHECKS_USER for a replication channel REPLICATION_SLAVE_ADMIN Replication administration RESOURCE_GROUP_ADMIN Resource group administration RESOURCE_GROUP_USER Resource group administration ROLE_ADMIN Server administration SESSION_VARIABLES_ADMIN Server administration SET_USER_ID Server administration SHOW_ROUTINE Server administration SYSTEM_USER Server administration SYSTEM_VARIABLES_ADMIN Server administration TABLE_ENCRYPTION_ADMIN Server administration VERSION_TOKEN_ADMIN Server administration XA_RECOVER_ADMIN Server administration å›¾å½¢åŒ–ç•Œé¢å·¥å…· Workbench(å…è´¹): http://dev.mysql.com/downloads/workbench/ navicat(æ”¶è´¹ï¼Œè¯•ç”¨ç‰ˆ30å¤©): https://www.navicat.com/en/download/navicat-for-mysql Sequel Pro(å¼€æºå…è´¹ï¼Œä»…æ”¯æŒMac OS): http://www.sequelpro.com/ HeidiSQL(å…è´¹): http://www.heidisql.com/ phpMyAdmin(å…è´¹): https://www.phpmyadmin.net/ SQLyog: https://sqlyog.en.softonic.com/ å®‰è£…å°æŠ€å·§ åœ¨SQLè¯­å¥ä¹‹ååŠ ä¸Š\\Gä¼šå°†ç»“æœçš„è¡¨æ ¼å½¢å¼è½¬æ¢æˆè¡Œæ–‡æœ¬å½¢å¼ æŸ¥çœ‹Mysqlæ•°æ®åº“å ç”¨ç©ºé—´ï¼š1234SELECT table_schema &quot;Database Name&quot; , SUM(data_length + index_length) / (1024 * 1024) &quot;Database Size in MB&quot;FROM information_schema.TABLESGROUP BY table_schema; åç»­å†…å®¹åç»­å†…å®¹å› ä¸ºè·Ÿå½“å‰å­¦ä¹ ã€å·¥ä½œè®¡åˆ’æœ‰å†²çªï¼Œæ‰€ä»¥åç»­è¯¾ç¨‹çš„å­¦ä¹ è®¡åˆ’ä¼šæ— é™æœŸæ¨åã€‚ç›®å‰çš„å·¥ä½œé‡ç‚¹æ”¾åœ¨é‡åšä¸€ä¸ªå­¦ä¹ ç¬”è®°ç½‘ç«™ï¼Œå½“ç„¶è¿™æ˜¯è¾¹åšè¾¹å­¦çš„ï¼Œå¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„éš¾ç‚¹å’ŒçŸ¥è¯†ç‚¹æˆ‘ä¹Ÿä¼šè®°å½•ä¸‹æ¥ä¾›å¤§å®¶å­¦ä¹ ã€‚åœ¨æ­¤æ„Ÿè°¢Bç«™åŒæ ·çˆ±å­¦ä¹ çš„åŒå­¦ @å®ˆå¿ƒ-äºº æä¾›çš„åç»­è¯¾ç¨‹ç¬”è®°ï¼Œå¤§å®¶æœ‰æ¡ä»¶ä¸€å®šè¦å»ç»™ä¸ªstarï¼Œä½ çš„æ¯ä¸€ä¸ªstarå’Œç‚¹èµéƒ½æ˜¯æˆ‘ä»¬å‰è¿›çš„åŠ¨åŠ›https://github.com/Buildings-Lei/mysql_note/blob/main/README.md","link":"/MySQL.html"},{"title":"","text":".title_card { display: flex; position: relative; box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2); transition: 0.3s; width: auto; height: 100%; border-radius: 10px; overflow: hidden; align-items: center; justify-content: center; margin-left: 15px; margin-right: 15px; } .title_card:hover { box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2); } .title_card_text { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; align-items: center; /* å‚ç›´å±…ä¸­ */ justify-content: center; /* æ°´å¹³å±…ä¸­ */ color: white; /* å°†æ–‡å­—é¢œè‰²è®¾ç½®ä¸ºç™½è‰² */ opacity: 0; transition: opacity 0.3s; font-family: 'Trebuchet MS'; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); /* æ·»åŠ æ–‡å­—é˜´å½± */ } .title_card:hover .title_card_text { opacity: 0.9; animation: jelly 0.5s; } @keyframes jelly { 0%, 100% { transform: scale(1, 1); } 25% { transform: scale(0.9, 1.1); } 50% { transform: scale(1.1, 0.9); } 75% { transform: scale(0.95, 1.05); } } h1 { text-align: center; font-size: 4em; font-family: 'Trebuchet MS'; color: teal; } GALLERY Photography Miscellaneous Anime","link":"/gallery/index.html"}]}